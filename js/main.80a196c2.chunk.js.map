{"version":3,"sources":["modules/home/HomeActions.js","modules/home/HomeReducer.js","modules/my-registry/MyRegistryActions.js","modules/my-registry/MyRegistryReducer.js","modules/view-registry/ViewRegistryActions.js","modules/view-registry/ViewRegistryReducer.js","modules/registry/RegistryActions.js","modules/registry/RegistryReducer.js","modules/personalise-checklist/PersonaliseCheckListActions.js","modules/personalise-checklist/PersonaliseCheckListReducer.js","modules/onboarding/OnboardingAction.js","modules/onboarding/OnboardingReducer.js","modules/guest-view/GuestViewAction.js","modules/guest-view/GuestViewReducer.js","modules/track-gifts/TrackGiftsAction.jsx","modules/track-gifts/components/view-by/ViewBy.jsx","modules/track-gifts/TrackGiftsReducer.jsx","store/Store.js","utils/i18n.js","locales/index.js","locales/en.js","locales/es.js","utils/routes.js","modules/commons/components/more-option/MoreOption.jsx","modules/commons/components/modal-component/ModalComponent.jsx","modules/commons/components/counter/Counter.jsx","modules/commons/components/card-item/CardItem.jsx","api/queries.js","api/config.js","api/axios.js","utils/constants.js","api/mutations.js","modules/track-gifts/components/gift-card-pill/GiftCardPill.jsx","modules/commons/components/button-component/ButtonComponent.jsx","modules/commons/components/gift-status-pill/GiftStatusPill.jsx","modules/commons/components/product-details-model/ProductDetailsModel.jsx","modules/track-gifts/components/buy-now/BuyNow.jsx","modules/commons/components/mark-as-purchased/MarkAsPurchased.jsx","modules/track-gifts/components/mark-purchased/MarkPurchased.jsx","modules/track-gifts/components/gift-card/GiftCard.jsx","modules/track-gifts/containers/track-gifts-content/TrackGiftsContent.jsx","utils/commonFunction.js","modules/commons/components/check-box/CheckBox.jsx","modules/commons/components/select-category/SelectCategory.jsx","modules/commons/components/edit-gift/category-pill/CategoryPill.jsx","modules/commons/components/add-gift/toggle-pills/TogglePills.jsx","modules/commons/components/radio-button/RadioButton.jsx","modules/commons/components/tour-card/TourCard.jsx","utils/cdn-assets-links.js","modules/commons/components/edit-gift/EditGift.jsx","modules/commons/components/cash-fund-card/add-cash-fund-modal/toggle-pills/TogglePills.jsx","modules/commons/components/cash-fund-card/add-cash-fund-modal/AddCashFundModal.jsx","modules/commons/components/added-card/AddedCard.jsx","modules/my-registry/components/checkList/CheckList.jsx","modules/my-registry/components/checkList/CheckListItems.jsx","modules/commons/components/add-gift/bookmarklet-section/BookmarkletSection.jsx","modules/commons/components/add-gift/import-registry/category-pill/CategoryPill.jsx","modules/commons/components/add-gift/add-gift-another-store/AddGiftAnotherStore.jsx","modules/commons/components/variants-modal/VariantsModal.jsx","modules/commons/components/view-recommend/ViewRecommend.jsx","modules/my-registry/components/filter/Filter.jsx","modules/my-registry/components/filter/filter-item-chip/FilterItemChip.jsx","modules/commons/components/add-gift/import-gift-card/ImportGiftCard.jsx","modules/commons/components/add-gift/import-registry/ImportRegistry.jsx","modules/commons/components/add-gift/AddGift.jsx","modules/my-registry/components/filter-section/FilterSection.jsx","modules/commons/components/cash-fund-card/cash-fund-card-not-added/CashFundCardNotAdded.jsx","modules/commons/components/cash-fund-card/CashFundCard.jsx","modules/my-registry/containers/Everything/Everything.jsx","modules/my-registry/containers/MainContent/MainContent.jsx","modules/my-registry/MyRegistry.jsx","modules/view-registry/components/cover-image-picker/crop-image/CropImage.jsx","modules/view-registry/components/cover-image-picker/upload-image-card/UploadImageCard.jsx","modules/view-registry/components/cover-image-picker/default-image/DefaultImage.jsx","modules/view-registry/components/cover-image-picker/CoverImagePicker.jsx","modules/view-registry/components/edit-view-registry-detail/EditViewRegistryDetail.jsx","modules/view-registry/components/share-registry/ShareRegistry.jsx","modules/view-registry/containers/view-registry-header/ViewRegistryHeader.jsx","modules/view-registry/components/sort-filter/SortFilter.jsx","modules/view-registry/components/sort-filter/SortFilterMobile.jsx","modules/view-registry/components/view-filter/ViewFilterMobile.jsx","modules/view-registry/components/sort-filter-section/SortFilterSection.jsx","modules/view-registry/components/view-filter/ViewFilter.jsx","modules/commons/components/already-bought-product/AlreadyBoughtProduct.jsx","modules/commons/components/cash-contributed-already/CashContributedAlready.jsx","modules/commons/components/give-MA-gift-model/GiveMAGiftModel.jsx","modules/commons/components/give-gift-from-another-store/GiveGiftFromAnotherStore.jsx","modules/guest-view/components/GuestViewCard.jsx","modules/guest-view/containers/guest-view-header/GuestViewHeader.jsx","modules/guest-view/containers/guest-sort-filter/GuestSortFilter.jsx","modules/guest-view/containers/guest-sort-filter/GuestSortFilterMobile.jsx","modules/guest-view/containers/guest-filter/GuestFilterMobile.jsx","modules/guest-view/containers/guest-sort/GuestSortSection.jsx","modules/guest-view/containers/guest-filter/GuestFilter.jsx","modules/commons/components/toast/Toast.jsx","modules/track-gifts/components/redirection-screen/RedirectionScreen.jsx","modules/guest-view/GuestView.jsx","modules/view-registry/containers/view-registry-home/ViewRegistryHome.jsx","modules/view-registry/ViewRegistry.jsx","modules/registry-hero/component/todo-widget/TodoWidget.jsx","modules/track-gifts/components/filters/Filters.jsx","modules/track-gifts/components/thank-you-list/ThankYouList.jsx","modules/track-gifts/containers/track-gifts-sidebar/TrackGiftsSidebar.jsx","modules/track-gifts/components/search/Search.jsx","modules/track-gifts/components/add-gift/AddGift.jsx","modules/track-gifts/TrackGifts.jsx","modules/registry-hero/RegistryHero.jsx","modules/commons/components/questions/option/Option.jsx","modules/onboarding/Onboarding.jsx","modules/Login/VerifyToken/VerifyTokenActions.js","modules/Login/VerifyToken/VerifyToken.jsx","modules/personalise-checklist/components/personalise-header/PersonaliseHeader.jsx","modules/personalise-checklist/components/personalise-footer/PersonaliseFooter.jsx","modules/personalise-checklist/PersonaliseChecklist.jsx","modules/personalise-checklist/components/edit-checklist/EditChecklist.jsx","modules/find-registry/FindRegistry.jsx","modules/commons/components/loader/Loader.jsx","modules/commons/ViewsContainer.jsx","api/index.js","App.jsx","registerServiceWorker.js","index.js"],"names":["HOME_ACTION_TYPES","EXAMPLE_ACTION","combineReducers","values","state","action","type","payload","date","Date","SET_DATE","MY_REGISTRY_ACTION_TYPES","ADD_RECOMMENDED_PRODUCT","INCREMENT_QUANTITY","DECREMENT_QUANTITY","SET_REGISTRY_PRODUCTS","TOGGLE_MUST_HAVE_PRODUCT","ADD_PRODUCT_TO_CART","REMOVE_PRODUCT_FROM_CART","SET_ACTIVE_RECOMMANDATION","SET_ACTIVE_RECOMMANDATION_VARIANT","SET_FILTER_CATEGORY","SET_PARENT_FILTER","SET_CHILD_FILTER","CLEAR_FILTER","SET_FILTERED_PRODUCTS","GET_CHECKLIST_ITEMS","SET_ANOTHER_STORE_PRODUCT_INFO","CLEAR_ANOTHER_STORE_PRODUCT_INFO","SET_ANOTHER_STORE_REGISTRY_ITEMS","SET_CASH_FUND_CATEGORIES","SET_FILTER_PRODUCT_COUNT","addRecommendedProduct","params","incrementQuantity","id","quantity","decrementQuantity","setActiveRecommandationVariant","productID","variantID","toggleMustHaveProduct","setFilterCategory","setParentFilter","setChildFilter","clearFilter","setCheckListItems","setAnotherStoreProductInfo","clearAnotherStoreProductInfo","setAnotherStoreRegistryItems","incrementProductQuantity","stateInc","newState","product","push","decrementProductQuantity","stateDec","setActiveRecommandationVariantID","activeVariant","toggleMustHave","item","mostWanted","addProductToCart","length","title","variants","edges","node","price","category","parentFilter","childFilter","recommendedProducts","addedProducts","filter","_","activeRecommandation","filterCategory","filteredProducts","filterApplied","defaultData","myRegistry","defaultFilter","checkList","anotherStoreProduct","defaultAnotherStoreProductInfo","anotherStoreRegistry","cashFundCategories","filterCount","VIEW_REGISTRY_ACTION_TYPES","setViewRegistryProducts","activeSortFilter","setguestViewRegistry","setViewFilterCategory","setChildViewFilter","clearViewFilter","viewRegistryProducts","sortId","sortTitle","guestViewRegistry","viewFilterApplied","REGISTRY_ACTION_TYPES","updateRegistryInfo","setLoggingStatus","setOnboardingRegistry","setLoader","info","loggedIn","todo","onboardingRegistry","loader","user","PERSONALISE_CHECKLIST_ACTION_TYPES","setPersonaliseCheckListItems","addPersonalizeQuestion","addPersonalizeQuestionAnswer","updatePersonalizeQuestionAnswer","newSubCategory","subCategories","subCategory","totalItemsCount","setIsAddedCheckList","isAdded","editedPersonaliseCheckList","questions","answers","ONBOARDING_ACTION_TYPES","addOnboardingQuestion","addQuestionAnswer","updateQuestionAnswer","GUEST_VIEW_ACTION_TYPES","updateGuestViewInfo","setGuestViewProducts","activeGuestSortFilter","setChildGuestViewFilter","clearGuestViewFilter","setGuestViewFilterCategory","setViewGuestPaginationInfo","clearViewGuestPaginationInfo","setAlreadyBoughtProductInfo","setGuestGiftsRedirectionInfo","setCashContributedAlreadyInfo","updated","guestViewFilterApplied","guestFilterCategory","paginationInfo","trackGifts","pagination","alreadyBoughtProduct","defaultAlreadyBoughtProductInfo","redirectionInfo","cashContributedAlready","defaultCashContributedAlready","TRACK_GIFTS_ACTION_TYPES","setTrackGiftsProduct","setTrackGiftsPaginationInfo","setTrackGiftsFilters","setTrackGiftsSearch","setTrackGiftsRedirectionInfo","TRACK_GIFTS_VIEWS","ViewBy","activeView","useSelector","dispatch","useDispatch","changeTrackGiftView","view","className","join","onClick","products","filters","search","history","createBrowserHistory","rootReducer","home","registry","registryInfo","MyRegistryReducers","viewRegistry","ViewRegistryReducers","personaliseCheckList","PersonaliseCheckListReducer","onboarding","Onboarding","TrackGiftsReducer","guestView","GuestViewReducer","router","connectRouter","middlewares","routerMiddleware","thunk","composeEnhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","options","interpolation","escapeValue","resources","en","translation","redirect","today","button","getUser","another","personalize","registryHeader","subTitle","visible","link","shower","announcements","more","toDos","es","i18next","use","LanguageDetector","init","APP_HOME_ROUTE","routes","LOGIN","VERIFY_TOKEN","REGISTRY","HOME","MY_REGISTRY","GIFTS_ADDED","GIFT_TO_ADD","GIFT_VIEW","SHOWER","ANNOUNCEMENTS","MORE","TO_DOS","VIEW_REGISTRY","TRACK_GIFTS","ONBOARDING","PERSONALIZE","CHECKLIST","GUEST_VIEW","FIND_REGISTRY","MoreOption","props","iconClass","buttonClass","e","stopPropagation","data","map","option","index","key","name","ModalComponent","Modal","show","size","modalClassName","titleContent","Header","headerContent","closeIconClass","closeModal","Body","noBodyPadding","children","footer","Footer","Counter","decrementHandler","counter","incrementHandler","CardItem","onCardClick","src","imageUrl","alt","description","href","storeUrl","tabindex","target","strikedPrice","incrementQuantityHandler","decrementQuantityHandler","addProductHandler","maItemVariantItemRecommendation","variant","variantId","sku","setActiveRecommandationVariantHandler","iconUrl","pattern","gql","GET_CATEGORIES","GET_PRODUCTS","GET_RECOMMENDATIONS","ADD_REGISTRY_ITEM","UPDATE_REGISTRY_ITEM","GET_REGISTRIES","GET_QUESTIONS","GET_PERSONALIZE_QUESTIONS","GET_TRACK_GIFTS","GET_GUEST_REGISTRY_PRODUCT","backendId","cookies","Cookies","apiURL","config","PRODUCTION_API_URL","AuthToken","get","axios","require","axiosInstance","create","baseURL","headers","axiosInstanceNoToken","axiosInstanceNoHeader","graphQLNoToken","post","graphQLNoHeader","graphQL","getAnotherRegistryProducts","axiosInstanceMultipart","graphQLMultipart","downloadThankYouList","registryId","API_END_POINTS","API_URL","BACKEND_URL","MEDIA_URL_PREFIX","FILTERS","BOOKMARKLET_SCRIPT","SETTINGS_LINKS","BUILD_REGISTRY_STEPS","selector","content","position","MUST_HAVE_STEPS","VIEW_REGISTRY_STEPS","GROUP_GIFT_STEPS","ADD_GIFT_LINKS","EMAIL_RE","TOGGLE_MUST_HAVE","UPDATE_REGISTRY","REGISTER_USER","SAVE_QUESTION_RESPONSE","LOGIN_USER","ADD_PARTNER_ACCOUNT","SAVE_UPDATED_CHECKLIST","UPDATE_REGISTRY_ITEMS","SAVE_SINGLE_QUESTION_RESPONSE","CREATE_REGISTRY","TRACK_GIFTS_ADD_GIFT","MARK_AS_PURCHASED_BY_GUEST","GIVE_GROUP_GIFT_GUEST","CASH_FUND_GIFT_GUEST","MARK_AS_PURCHASED","CASH_AND_LEAVE","CASH_FUND_CONTRIBUTION_GUEST","RESERVE_REGISTRY_ITEM_GUEST","REMOVE_RESERVED_ITEM_GUEST","TOUR_UPDATE_FLAG","UPDATE_MA_BUTTON_CONFIGURED","GiftCardPill","text","amount","ButtonComponent","React","forwardRef","ref","btnVariantClass","disabled","GiftStatusPill","pillVariantClass","ProductDetailsModel","isCashFund","storeItemUrl","isGroupGift","hideTotal","formatPrice","note","quantityStatus","purchased_quantity","reserved_quantity","still_needed","BuyNow","storeName","orderNumber","guestName","guestEmail","errors","modalCloseHandler","setState","prevState","storeNameChangeHandler","ev","value","orderNumberChangeHandler","guestNameChangeHandler","errorState","guestEmailChangeHandler","validData","valid","match","saveClickHandler","buyNowClickHandler","createNewRecord","updateProduct","openModal","jsonVisitedItems","JSON","parse","localStorage","getItem","Number","rId","stateRegistryInfo","pId","productData","productTimestamp","timestamp","currentDate","setHours","newVisitedItemsData","foundProduct","newData","setItem","stringify","open","this","onChange","placeholder","Component","connect","MarkAsPurchased","PRICE_REGEX","PRICE_REGEX_WHILE_ENTERING","email","contributionAmount","backendErrors","contribution_amount","closeModalHandler","String","nameChangeHandler","emailChangeHandler","noteChangeHandler","contributionAmountChangeHandler","persist","reqData","query","variables","registryItemId","purchasedRegistryItemInput","isPurchased","orderNo","giftMessage","guestUserInput","then","res","markAsPurchased","toast","success","getTrackGiftsProduct","stateTrackGiftsFilters","stateTrackGiftsProducts","stateTrackGiftsPagination","stateTrackGiftsView","stateTrackGiftsSearch","getCategories","getProducts","catch","err","response","error","Object","keys","fieldError","indexOf","message","rows","MarkPurchased","openPurchasedModal","preventDefault","GiftCard","friendsDetailRef","createRef","toggleGiftModalHandler","toggleFriendsDetialsModalHandler","toggleFriendsDetail","current","classList","toggle","giftModalCloseHandler","giftModalOpenHandler","friendsDetailsOpenModalHandler","friendsDetailsCloseModalHandler","purchasedRegistryItem","guestUser","firstName","lastName","groupGift","amountReceived","style","width","isReserved","isCashAcceptedOnly","isAmountReceived","createdTs","moment","format","otherUsers","LOCAL_2_API_FILTERS_MAPPING","4","1","3","2","5","NoRecordFound","TrackGiftsContent","currentView","fetchAvailableFromAddedProducts","newProduct","getAvailableProduct","stateProducts","availableProducts","otherSelected","count","selected","getUniqueListBy","arr","Map","getProductsBasedOnView","guestUsersEmails","refinedProducts","skipCashFund","userProducts","currentProduct","newUsers","id2Remove","newProducts","partiallyPurchasedGroupGift","groupUser","searched","searchedText","searchText","toLowerCase","groupedProduct","groupProduct","hasNextPage","overflow","next","hasMore","dataLength","parseInt","categoryData","registryItems","registryItemsAnalysisCount","finalData","newItemObj","registryitemImage","image","registryCategories","setRegistryProducts","console","removeProductFromCartHandler","card","log","getRefinedCategory","parentCategory","categoryName","categoryType","isDesired","isExcluded","addedItemsCount","isParent","getAllCategories","getAll","subCategoriesIsExcluded","newParentCategory","registrySubCategories","newSubCategories","cat","refinedSubCate","subProductTypes","registrySubProductTypes","subProduct","operationName","finalCategories","allCategories","updateRegistryDetail","registries","registryData","currentRegistryInfo","notFound","updateRegistryDetailState","addProductToRegistry","getTodoList","updateProductToRegistry","stateAddedProducts","isMaItem","existingProduct","parseFloat","shopifyVariantId","shopifyItemId","tags","shopifyItemVariantId","getOnboardingQuestions","a","token","isPersonalize","question","followUpQuestions","followUpQuestion","isAnswered","updateGuestViewRegistry","urlSlug","registryAsGuest","guestViewInfo","dataURItoBlob","dataURI","fileType","fileName","byteString","atob","split","ab","ArrayBuffer","ia","Uint8Array","i","charCodeAt","blob","Blob","File","getGuestCategories","registryCategoriesAsGuest","getTrackGiftsFilterStatus","filterString","trackGiftsFilter","returnStatus","clearProducts","trackGiftsFilters","trackGiftsProduct","trackGiftsPagination","trackGiftsView","trackGiftsSearch","first","giftGivers","after","endCursor","searchKeyword","isAvailable","isFundsReceived","isReturned","registryGifts","registryGiftItemsCount","allFilterCounts","newFilters","gifts","pageInfo","returnRes","addProductToCartAPI","status","registryTodoSteps","fetchDefaultCashFundImage","categoryId","result","cashFundDefaultImage","UpdateBuildTourFlag","isBuildRegistryVisited","isViewAsGuestVisited","isFeaturedOrderApplied","isGroupGiftApplied","isViewRegistryVisited","isMustHaveApplied","updateMushHaveTourFlag","updateGroupGiftTourFlag","getMAVariant","returnValue","maItemVariants","currency","replace","CheckBox","checked","changeHandler","textClass","display","SelectCategory","useState","categories","setCategories","setSearched","searchedCategories","setSearchedCategories","currentCategory","selectedCategory","setSelectedCategory","fetchingAPI","useEffect","showModal","resData","finalCheckList","finalSubCategory","tempSubCategory","subProductType","tempCategory","getCategoriesToDisplay","find","allSelectedCategory","handleSelectionCategory","categorySelectBody","modalFooter","changeCurrentCategory","searchInputRef","changeLinkRef","searchLinkRef","searchCategory","searchMatched","onKeyUp","keyCode","searchOnEnter","focus","searchCategoryInputChangeHandler","onFocus","contains","add","searchInputFocusHandler","onBlur","remove","searchInputBlurHandler","changeLinkClickHandler","tabIndex","searchLinkClickHandler","CategoryPill","TogglePills","activeClass","data-tut","dataTut","RadioButton","centerText","TourCard","dotsArray","totalSteps","dotsData","close","gotoStep","CDN_BASE_URL","ROUTES","Rectangle_1685_2x_2","image_2_2x","Rectangle_1685_2x","image_1_2x","gift_icon","file_heart_svg","facebook","instagram","twitter","facebook_disabled","instagram_disabled","twitter_disabled","EditGift","OTHER_CATEOGRY_ID","M_A_STORE_NAME","MAX_IMAGE_SIZE","ACCEPTED_IMAGE_TYPE","howToGiftOptions","learnMoreLinkClickHandler","learnMoreContent","storeItemUrlInputRef","showCategoryModal","storeUrlInputHasFocus","tempStoreItemUrl","giftImage","giftTitle","giftPrice","giftQuantity","giftCategories","giftMustHave","giftGroupGift","giftPurchased","howToGift","giftNote","showLearnMore","learnMoreCashAccept","closeMainModalTemp","isTourOpen","isMustHaveTour","isGroupGiftTour","steps","giftVariants","currentVariant","imageInputRef","CUSTOM_PIC_OPTIONS","click","cashAcceptedLearnMore","closeLearnMoreModalHandler","refinedCategory","stateCategories","catToPush","subCat","newSubCat","unshift","foundCategory","mainCategory","displayName","closeCategoryModal","openSelectCategoryModal","setCategory","selectFileHandler","files","file","includes","reader","FileReader","onload","newProductImage","readAsDataURL","productNameChangeHandler","productNoteChangeHandler","productStoreUrlChangeHandler","productPriceChangeHandler","toggleGroupGift","togglePurchased","changeHowToGift","removeItemClickHandler","openRemoveModal","storeUrlChangeClickHandler","inputRef","storeItemUrlBlurHandler","setTimeout","resetStoreItemUrlClickHandler","blur","confirmStoreItemUrlClickHandler","validateData","URL","saveItemClickHandler","fd","FormData","cashAcceptedOnly","itemData","append","images","closeTour","changeCurrentVariantClickHandler","editableItem","total_contribution_amount","activeOptionClass","accept","backgroundImage","highlightedMaskClassName","isOpen","CustomHelper","onRequestClose","selectedClass","AddCashFundModal","API_CALLED","INITIAL_IMAGE_SET","cashFundImage","cashFundName","edit","cashFundAmount","cashFundType","cashFundNote","mustHave","imageRef","validateCashFundData","addCashFundClickHandler","formData","selectedCat","mutationCalled","input","items","presentCategories","catId","fetchDefaultImage","resetThenSet","newErrorState","cashFund","modalTitle","modalFooterButton","cashFundNameChangeHandler","cashFundAmountChangeHandler","cashFundHideTotalChangeHandler","cashFundTypeChangeHandler","stateCashFundCategories","changedCategory","cashFundNoteChangeHandler","mustHaveClickHandler","allCashFundCategories","cashFundCategory","draggable","list","AddedCard","stateGuestViewRegistry","stateRecommendedProducts","stateFilterApplied","setRecommendedProducts","setShow","categoryTitle","showRemoveModel","setShowRemoveModel","showEditModal","setShowEditModal","updateModal","setUpdateModal","showMarkPurchased","setShowMarkPurchased","showCashFundModal","setShowCashFundModal","moreOptionsData","addRemoveOption","showRemoveModelPopUp","showMarkAsPurchasedModal","categoryRecommended","jsonObject","uniqueSet","Set","Array","from","showRecommendation","removeConfirmFooter","openEditModal","DragHandle","sortableHandle","disabledDrag","multipleCategories","isViewCard","cardId","newRecommended","CheckList","gotoPersonalize","event","isQuizPending","editablePersonalizeQuestions","t","percentage","totalItems","addedItems","withTranslation","withRouter","CheckListItems","getOffset","el","rect","getBoundingClientRect","left","scrollX","top","scrollY","scrollToCategory","categorySection","document","getElementById","offset","scrollTo","getSubList","handleToggleEvent","checkListIconEl","checkListHeader","firstChild","subListItem","Accordion","Card","Toggle","as","eventKey","Collapse","BookmarkletSection","modalBody","modalTitleContent","modalFooterButtons","doneBookmarkletHandler","maButtonConfiguredhandler","isMaButtonConfigured","openAddBookmarkletModal","removeCategory","AddGiftAnotherStore","HTTPS_REGEX","categoryModalShow","setCategoryModalVisible","hideProductDetails","setHideProductDetails","showLoading","setshowLoading","btnHasFocus","setBtnHasFocus","inputHasFocus","setInputHasFocus","itemUrl","setItemUrl","setCurrentItemLink","setShowLearnMore","setLearnMoreCashAccept","productInfo","productImage","productName","setIsTourOpen","setIsMustHaveTour","setIsGroupGiftTour","setSteps","imageInput","changeTempCloseModal","setQuantity","prodInfo","priceChangeHandler","changePrice","changeProductName","changeNote","changeProductImage","fetchProductDetail","url","productUrl","changeProductUrl","item_url","ctgry","getScrapedProduct","img","newPrice","char","isInteger","getRefinedPrice","addMyOwn","checkUrlAndGetRegistryItems","submitStoreUrl","changeItemUrl","class","role","openCategorySelect","finalcategory","removeSelectedCategory","VariantsModal","groupedGift","productTitle","productLink","productPrice","isCashAccepted","productCategories","productUrlRef","addTheProduct","productDataUpdate","anotherStoreItemViewDetail","variantModalCloseHandler","productMustHave","productGroupedGift","ViewRecommend","viewDetailsBtn","maCardModal","nonMACardModal","currentRecommendProduct","productMostWanted","cardRef","clearModalData","alert","getCategoryId","currentRecommendation","stateActiveRecommandation","stateChecklist","childCategory","checkDataValidity","storeProduct","addItemToRegistry","stateAnotherStoreProduct","hostname","ADD_REGISTRY_ITEM_MUTATION","commonGetProducts","commonGetCategories","addOnMyOwnClickHandler","newCategory","isSubProduct","recommedCardClickedHandler","maCardModalCloseHandler","nonMACardModalCloseHandler","setMostWanted","setGroupedGift","getActiveRecommandation","allProducts","settings","dots","infinite","speed","slidesToShow","slidesToScroll","prevArrow","nextArrow","responsive","breakpoint","arrows","stepTwoForTour","height","offsetHeight","Filter","filterData","tempParentFilterId","tempChildFilterIds","showFilterModal","setShowFilterModal","filterContentRef","toggleFilterContent","filterContent","parent","child","childId","parentId","childIndex","newChildArray","splice","childChangeHandler","footerButton","FilterItemChip","deleteHandler","ImportGiftCard","ImportRegistry","REGISTRY_STORE_ALTERNATIVE_NAME","tgt","registryUrl","errorMessage","loading","activeCategoryProductIndex","currentRegistryLink","changeUrlConfirmationModal","changeLoadingState","registryUrlChangeHandler","getAnotherRegistryProductsInfo","registryUrlKeyUpHandler","refineProductForBabyList","stores","store_name","store_url","finally","productIndex","stateAnotherStoreRegistry","setProductCategories","newProductState","openChangeConfirmModal","closeChangeConfirmModal","changeRegistryUrl","removeProductFromRegistry","newRegistryProduct","notLoadingContent","bind","AddGift","closeTempModal","cashFundProduct","currentContent","addAnotherGiftApiCalled","addImportRegistryApiCalled","categoryList","openAddGiftModal","openCashFundModal","closeCashFundModal","importGiftAnotherStoreHandler","importRegistry","validImportRegistryData","getCleanedRegistryItems","cleanedRegistryItems","newItem","importRegistryClickHandler","jsonGraphQL","addRegistryItems","FilterSection","deleteChipHandler","element","clearFilterHandler","filterChips","allChild","stateFilterCategory","productCount","stateFilteredProducts","CashFundCardNotAdded","addButtonClickHandler","CashFundCard","Everything","recommendedCashFundImage","checkListRef","recommendationAPICalled","isRecommendationLoaderActive","updateRecommendedCashFundImage","toastDisplayed","checkListHeightFromTop","setCashFundCategoryAndOpenModal","updateFilterList","newFilterList","productId","mustHaveValue","setAllRecommendation","recommendedCategory","parentCat","rData","recommendationCat","itemRecommendations","cashFundImageApiCalled","getSortedProducts","productsToAppend","currentCashFundImage","imageApiCalled","productIds","added","total","isSubProductTypes","superParentCat","recommendations","childFilterArray","categoryFound","addedRecommendations","recommendationProduct","undefined","productToPush","groupedProducts","recommendationCount","totalProducts","totalRecommendations","getChecklistPercentage","checklistItems","showToast","location","toastMessage","pathname","handleScroll","body","offsetWidth","parentWidth","addEventListener","stateCheckList","stateLoader","hasCashFund","MainContent","exact","path","route","component","MyRegistry","CropImage","imgRef","useRef","crop","setCrop","completedCrop","setCompletedCrop","onLoad","useCallback","canvas","createElement","scaleX","naturalWidth","scaleY","naturalHeight","getContext","drawImage","x","y","Promise","resolve","reject","toBlob","getCroppedImg","setCroppedImage","crossorigin","onImageLoaded","newCrop","onComplete","c","UploadImageCard","DefaultImage","data-selected","CoverImagePicker","fileRef","croppedImage","uploadImage","setUploadImage","defaultImage","setDefaultImage","customImage","setCustomImage","getDefaultCoverImages","registryImages","defaultImages","closeCoverImagePicker","fileChangeHandler","imageId","updateRegistry","registryImage","EditViewRegistryDetail","registryName","changeRegistryName","greeting","changeGreeting","maxLength","greetingChangeHandler","closeEditRegistryDetail","dueDate","ShareRegistry","siteHostName","host","registryInfoUrl","setRegistryInfoUrl","isPublic","registryVisibility","setRegistryVisibility","setRegistryUrl","registryError","setRegistryError","inputContainerRef","changeRegistryVisibility","newRegistry","readOnly","checkUpdateRegistryUrlSlug","appendChild","select","execCommand","removeChild","CDN_ROUTES","closeShareRegistry","ViewRegistryHeader","showCoverImagePicker","showEditRegistryDetail","showShareRegistry","changeRegistryDetail","handleGuestView","handleDisableViewGuest","COVER_PIC_OPTIONS","shareHandler","queryParams","URLSearchParams","has","delete","toString","guestViewRegistryState","hasNoProducts","SortFilter","activeSortFilterState","sortItem","handleSortSelection","SortFilterMobile","currentSort","setCurrentSort","filterContentMobileRef","ViewFilterMobile","stateCategoriesInfo","stateFilterCategories","filterCountState","filterCategoryLimit","setFilterCategoryLimit","getLimitOfFliter","limit","under50","between50100","moreThan100","maStoreItems","otherStoreItems","giftStatus","totalAvailable","totalReserved","totalPurchased","accordionRef","handleMobileToggleEvent","parentFilterID","limitLength","isFound","newFilterCateoryLimit","categorylimit","changeParentLimitHandler","SortFilterSection","doneViewFilterModal","clearViewFilterModal","closeViewFilterModal","handleIsGotIt","isFeaturedNoticeRead","getFilterChips","filterCat","childCat","setFilterhandler","viewFilterStateHandler","stateActiveSortFilter","stateViewRegistryProducts","ViewFilter","clearClickHandler","AlreadyBoughtProduct","setInfo","partnerUser","fieldErrors","onFocusHandler","giftMessageChangeHandler","CashContributedAlready","hasDecimal","amountChangeHandler","GiveMAGiftModel","isBoughtThisAlready","isContributedAlready","componentDidMount","setModalData","iBoughtThisAlready","onFocusCashFundHandler","validBoughtThisAlreadyData","productBoughtAlreadyInfo","onFocusBoughtThisAlreadyHandler","fieldName","validCashContributedAlreadyData","cashContributedAlreadyInfo","onFocusCashContributedAlreadyHandler","validCashFundData","addProductToCartHandler","cart","querySelector","submitDataHandler","registryUrlSlug","purchasedQuantity","updateGuestViewProduct","giveGroupGift","cashInLieu","cashFundGift","contributeRestHandler","contributeAmount","Math","round","GiveGiftFromAnotherStore","registeredEmail","validEmail","stateUserInfo","removeProductFromList","updatedProducts","removeReservedAndAddProducts","removeProductReservation","copyAddress","defaultAddress","address1","address2","city","province","country","zip","modalLeftView","modalSecondaryBtn","modalPrimaryBtn","GuestViewCard","showMAGiftmodel","setMAGiftModel","showAnotherStoreGiftmodel","setAnotherStoreGiftmodel","setIsGroupGift","setIsCashAcceptedOnly","modelTitle","setModelTitle","openModelHandler","hasUserReservedProduct","GuestViewHeader","GuestSortFilter","GuestSortFilterMobile","GuestFilterMobile","categoryFilterLimit","GuestSortSection","showGuestFilterModal","guestChildFilter","guestFilterProducts","totalFilteredProducts","clearGuestFilterHandlerMobile","viewGuestFilterStateHandler","currTotalCount","doneGuestViewFilterModal","clearGuestViewFilterModal","closeGuestViewFilterModal","changeTotalCount","GuestFilter","Toast","toastClassName","autoClose","hideProgressBar","newestOnTop","closeOnClick","closeButton","parentElement","dismiss","RedirectionScreen","GuestView","isFirstTime","isSendMessageModalOpen","subject","totalProductCount","BABY_GIFTS_URL","AVAILABLE","RESERVED","PURCHASED","PRICE_1","PRICE_2","PRICE_3","MONICA_AND_ANDY","ELSEWHERE","allChildFilterCat","finalFilterApplied","ele","getFiltersApplied","sortBy","lessThanEqual","greaterThanEqual","hasPriceFilter","price_Lte","price_Gte","updateGuestViewRegistryProduct","emptyAllProduct","filtersApplied","clearAllProduct","stateGuestViewPagination","responseData","pagenationInfo","isAllGiftsPurchased","filterCategoryLimitHandler","limitData","sortByHighToLow","productList","sort","b","sortByLowToHigh","getSortedFilteredProducts","guestProducts","sortedProducts","getdataForFirstTime","registrySlug","validSendMessageData","subjectChangeHandler","messageChangeHandler","sendMessageHandler","setTotalCount","num","stateGuestGiftsRedirectionInfo","filteredSortProducts","registryUsers","ViewRegistryHome","localAddedProductState","handleFilterProductChange","setTotalProductCount","toggleMustHaveProductAction","SortableItem","sortableElement","SortableContainer","sortableContainer","getSortedProductsByFilters","finalFilterProduct","sortedData","newSortedProducts","isFeatured","sortByMustHave","viewRegistryProductsId","addProduct","onSortEnd","oldIndex","newIndex","itemsOldPosition","arrayMove","oldPosition","updateViewRegistryPosition","helperClass","axis","lockAxis","useDragHandle","updateViewRegistryTourFlag","ViewRegistry","TodoWidget","performTodoAction","redirectUrl","stateTodo","label","Filters","filterChangeHandler","filterId","stateFilters","newFilter","ThankYouList","saveData","createObjectURL","download","revokeObjectURL","downloadClickHandler","TrackGiftsSidebar","Search","inputContainer","applySearch","searchState","componentRef","searchInputChangeHandler","searchInput","searchClickHandler","giftName","userName","userEmail","addGiftClickHandler","addGift","giftNameChangeHandler","userNameChangeHandler","userEmailChangeHandler","TrackGifts","showTrackFilterModal","showSearchPopUp","searchRef","closeTrackFilterModal","toggleSearchBar","trackFilterModalFooterButtons","stateTrackGiftsRedirectionInfo","useTranslation","to","onpopstate","Option","LOGIN_TITLE","SIGNUP_TITLE","PARTNER_TITLE","RADIO","PARTNER","LITTLE_ONCE_ID","questionId","optionId","BOTH_OPTION_ID","SKIP_BOTH_OPTION","login","signUpErrors","signInErrors","partnerErrors","submitAnswer","bulkSaved","signInRedirectionUrl","currentAnswer","isActiveToast","clearErrorState","createRegistry","submitAllAnswers","checkValidEmail","optionalRegistryId","submitBulk","stateOnboardingAnswers","stateOnboardingRegistry","returnToURL","answer","questionOptionInput","optionText","addRegistryMultipleQuestionOption","origin","registryQuestionOptionInput","updateOrCreateRegistrySingleQuestionOption","redirectionUrl","clearToastMessage","setToastMessage","gotoNextQuestion","nextQuestionId","returnNext","nextFullQuestion","idToMatch","stateOnboardingQuestions","ques","stateLoggedIn","setQuestionBasedOnId","finalQuestion","foundQuestion","parentQuestion","addAnswerToState","answerRadioQuestion","watchNextBtn","nextBtnState","answerDataQuestion","dateCheck","now","day","getDate","slice","month","getMonth","getFullYear","textInputTypeChangeHandler","inputRefs","enableBtn","changeLoginState","refs","setErrorBasedOnResponse","parentErrors","subErrors","signInClickHandler","emailRef","passwordRef","password","returnTo","loginUser","set","registryRes","activeRegistry","getSignInContent","signUpClickHandler","firstNameRef","lastNameRef","registerUser","getSignUpContent","savePartnerDetail","nameRef","partnerDetail","addPartnerAccount","getPartnerContent","stateRouter","answerInputType","staticQuestionTitle","helpText","min","defaultValue","max","VERIFY_TOKEN_ACTION_TYPES","verifyTokenRequest","customer","redirectVerifyToken","VerifyToken","verifyToken","openEditChecklist","closePersonalise","PersonaliseFooter","prevQuestion","nextQuestion","PersonaliseChecklist","prevQuestionId","activeQuestionId","checkBoxSelected","headerHeightFromTop","CHECKBOX","calulatePercentage","answerQuestionCount","totalQuestionCount","totalAnwer","statePersonaliseQuestions","ceil","answerCheckBoxQuestion","answerId","questionOption","tempOption","ans","isActiveIdPresent","gotoPrevQuestion","popPrevQuestionId","pop","statePersonaliseAnswers","finalAnswer","submitQuestionAnswer","op","selectCheckboxAnswer","checkBoxRef","removeIndex","setStateQuestionWithSelectedAnswer","answerOpt","opt","selectedColorSchemes","prevQuestionID","currentQuestion","dangerouslySetInnerHTML","__html","selectedOptionID","selectOptions","selectedOption","defaultChecked","showOverrideModal","showAlertQuestion","closeAndSavePersonaliseCheckList","finalCheckListData","tempStateCheckList","tempData","registryCategoryId","itemsCount","itemCountData","gotoPersonaliseQuestions","quizModalFooter","parentCategories","FindRegistry","searchName","setSearchName","allRegistry","setAllRegistry","hasRegistry","setHasRegistry","searchRegistry","setSearchRegistry","textChangeHandler","findRegistryHandler","findRegistry","Loader","ViewsContainer","displayContent","foundRegistry","access_token","EditChecklist","RegistryHero","render","cache","InMemoryCache","errorLink","onError","graphQLErrors","networkError","locations","httpLink","HttpLink","uri","ApolloLink","ApolloClient","App","I18nextProvider","i18n","client","isLocalhost","Boolean","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","ReactDOM","process","fetch","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.80a196c2.chunk.js","sourcesContent":["import { push } from \"connected-react-router\";\n\nexport const HOME_ACTION_TYPES = {\n  EXAMPLE_ACTION: \"EXAMPLE_ACTION\"\n};\n\nconst exampleActionCreator = param => ({\n  type: HOME_ACTION_TYPES.EXAMPLE_ACTION,\n  payload: param\n});\n\nexport const exampleAction = param => dispatch => {\n  dispatch(exampleActionCreator(param));\n};\n\nexport const redirectExample = () => dispatch => {\n  dispatch(push(\"/another\"));\n};\n","import { combineReducers } from \"redux\";\nimport { HOME_ACTION_TYPES } from \"./HomeActions\";\n\nconst values = (state = [], action) => {\n  switch (action.type) {\n    case HOME_ACTION_TYPES.EXAMPLE_ACTION:\n      return [...state, action.payload];\n    default:\n      return state;\n  }\n};\n\nconst date = (state = new Date(), action) => {\n  //initialize state with today date\n  switch (action.type) {\n    case HOME_ACTION_TYPES.SET_DATE:\n      return action.payload;\n    default:\n      return state;\n  }\n};\n\nexport default combineReducers({\n  values,\n  date\n});\n","export const MY_REGISTRY_ACTION_TYPES = {\n\t// Recommended Product\n\tADD_RECOMMENDED_PRODUCT: \"ADD_RECOMMENDED_PRODUCT\",\n\tINCREMENT_QUANTITY: \"INCREMENT_QUANTITY\",\n\tDECREMENT_QUANTITY: \"DECREMENT_QUANTITY\",\n\n\t// Registry product\n\tSET_REGISTRY_PRODUCTS: \"SET_REGISTRY_PRODUCTS\",\n\tTOGGLE_MUST_HAVE_PRODUCT: \"TOGGLE_MUST_HAVE_PRODUCT\",\n\tADD_PRODUCT_TO_CART: \"ADD_PRODUCT_TO_CART\",\n\tREMOVE_PRODUCT_FROM_CART: \"REMOVE_PRODUCT_FROM_CART\",\n\n\t// CheckList\n\tSET_ACTIVE_RECOMMANDATION : \"SET_ACTIVE_RECOMMANDATION\",\n\tSET_ACTIVE_RECOMMANDATION_VARIANT : \"SET_ACTIVE_RECOMMANDATION_VARIANT\",\n\n\t// Filter Category\n\tSET_FILTER_CATEGORY: \"SET_FILTER_CATEGORY\",\n\n\t// Filter\n\tSET_PARENT_FILTER: \"SET_PARENT_FILTER\",\n\tSET_CHILD_FILTER: \"SET_CHILD_FILTER\",\n\tCLEAR_FILTER: \"CLEAR_FILTER\",\n\n\t// Filtered Products\n\tSET_FILTERED_PRODUCTS : \"SET_FILTERED_PRODUCTS\",\n\tGET_CHECKLIST_ITEMS: \"GET_CHECKLIST_ITEMS\",\n\n  //ANOTHER STORE PRODUCT\n  SET_ANOTHER_STORE_PRODUCT_INFO : \"SET_ANOTHER_STORE_PRODUCT_INFO\",\n  CLEAR_ANOTHER_STORE_PRODUCT_INFO : \"CLEAR_ANOTHER_STORE_PRODUCT_INFO\",\n\n  // ANOTHER STORE REGISTRY\n  SET_ANOTHER_STORE_REGISTRY_ITEMS: \"SET_ANOTHER_STORE_REGISTRY_ITEMS\",\n\n  // SET CASH FUND CATEGORIES\n\tSET_CASH_FUND_CATEGORIES: \"SET_CASH_FUND_CATEGORIES\",\n\t\n\t// SET FILTER COUNT\n\tSET_FILTER_PRODUCT_COUNT: \"SET_FILTER_PRODUCT_COUNT\",\n}\n\nexport const addRecommendedProduct = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.ADD_RECOMMENDED_PRODUCT,\n\t\tpayload: params\n\t}\n}\n\nexport const incrementQuantity = (id, quantity) => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.INCREMENT_QUANTITY,\n\t\tpayload: { id, quantity }\n\t}\n}\n\nexport const decrementQuantity = (id, quantity) => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.DECREMENT_QUANTITY,\n\t\tpayload: { id, quantity }\n\t}\n}\n\n//Set Active recommandation variant\nexport const setActiveRecommandationVariant = (productID, variantID) => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.SET_ACTIVE_RECOMMANDATION_VARIANT,\n\t\tpayload: { productID, variantID }\n\t}\n}\n\nexport const toggleMustHaveProduct = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.TOGGLE_MUST_HAVE_PRODUCT,\n\t\tpayload: params\n\t}\n}\n\nexport const setRegistryProducts = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.SET_REGISTRY_PRODUCTS,\n\t\tpayload: params\n\t}\n}\n\nexport const addProductToCart = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.ADD_PRODUCT_TO_CART,\n\t\tpayload: params\n\t}\n}\n\nexport const removeProduct = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.REMOVE_PRODUCT,\n\t\tpayload: params\n\t}\n}\n\nexport const removeProductFromCart = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.REMOVE_PRODUCT_FROM_CART,\n\t\tpayload: params\n\t}\n}\n\nexport const setActiveRecommandation = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.SET_ACTIVE_RECOMMANDATION,\n\t\tpayload: params\n\t}\n}\n\n// Filter Category Section\nexport const setFilterCategory = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.SET_FILTER_CATEGORY,\n\t\tpayload: params\n\t}\n}\n\n// Filter Section\n\nexport const setParentFilter = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.SET_PARENT_FILTER,\n\t\tpayload: params\n\t}\n}\n\nexport const setChildFilter = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.SET_CHILD_FILTER,\n\t\tpayload: params\n\t}\n}\n\nexport const clearFilter = () => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.CLEAR_FILTER,\n\t}\n}\n\n// Filtered Products\nexport const setFilteredProduct = (params) => {\n  return {\n    type: MY_REGISTRY_ACTION_TYPES.SET_FILTERED_PRODUCTS,\n    payload: params\n  }\n}\n\nexport const setCheckListItems = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.GET_CHECKLIST_ITEMS,\n\t\tpayload: params\n\t}\n}\n\n// Another store product info\nexport const setAnotherStoreProductInfo = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.SET_ANOTHER_STORE_PRODUCT_INFO,\n\t\tpayload: params\n\t}\n}\n\nexport const clearAnotherStoreProductInfo = () => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.CLEAR_ANOTHER_STORE_PRODUCT_INFO,\n\t}\n}\n\n//Another store Registry Items\nexport const setAnotherStoreRegistryItems = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.SET_ANOTHER_STORE_REGISTRY_ITEMS,\n\t\tpayload: params\n\t}\n}\n\n//Set Cash Fund Categories\nexport const setCashFundCategories = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.SET_CASH_FUND_CATEGORIES,\n\t\tpayload: params\n\t}\n}\n\n//Set filter count\nexport const setFilterProductCount = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.SET_FILTER_PRODUCT_COUNT,\n\t\tpayload: params\n\t}\n}","import {MY_REGISTRY_ACTION_TYPES} from \"./MyRegistryActions\";\nimport {combineReducers} from \"redux\";\nimport defaultData from \"data/ReducerDefaultData.json\";\n\n// Functions\nconst incrementProductQuantity = (state, payload) => {\n  let {\n    id,\n    quantity\n  } = payload;\n\n  let stateInc = [...state];\n  let newState = [];\n  for (let product of stateInc) {\n    if (product.id === id) {\n      product.quantity += quantity;\n    }\n    newState.push(product);\n  }\n  return newState;\n}\n\nconst decrementProductQuantity = (state, payload) => {\n  let {\n    id,\n    quantity\n  } = payload;\n  let stateDec = [...state];\n  let newState = [];\n  for (let product of stateDec) {\n    if (product.id === id && product.quantity - quantity > 0) {\n      product.quantity -= quantity;\n    }\n    newState.push(product);\n  }\n  return newState;\n}\n\nconst setActiveRecommandationVariantID = (state, payload) => {\n  let {\n    productID,\n    variantID\n  } = payload;\n\n  let stateInc = [...state];\n  let newState = [];\n  for (let product of stateInc) {\n    if (product.id === productID) {\n      product.activeVariant = variantID;\n    }\n    newState.push(product);\n  }\n  return newState;\n}\n\nconst toggleMustHave = (state, payload) => {\n  let newState = [];\n  for (let product of state) {\n    if (product.item.id === payload) {\n      product.mostWanted = !product.mostWanted\n    }\n    newState.push(product);\n  }\n  return newState;\n}\n\nconst addProductToCart = (state, payload) => {\n  for (let product of state) {\n    if (product.item.id === payload.id) {\n      return state\n    }\n  }\n\n  let product = {}\n  product['id'] = payload.id;\n  product['isGroupGift'] = false;\n  product['isReserved'] = false;\n  product['quantity'] = payload.quantity;\n  product['mostWanted'] = false;\n  product['orderNo'] = null;\n  product['giftMessage'] = null;\n  product['isAmountReceived'] = false;\n  product['isPurchased'] = false;\n  product['featuredOrder'] = state.length;\n\n  // TODO: Make item_id dynamic after calling POST API for adding it\n  let item = {}\n  item['id'] = payload.id;\n  item['title'] = payload.title;\n  item['shopifyItemId'] = product['id'];\n  item['note'] = null;\n  item['price'] = payload.variants.edges[0].node.price;\n\n  // TODO: Make category dynamic after POST API call\n  let category = {}\n  category['id'] = 2;\n  category['categoryName'] = 'Bassinet';\n  category['isRoot'] = false;\n\n  item['category'] = category;\n  product['item'] = item;\n\n\n  return [...state, product];\n}\n\n\nconst setParentFilter = (state, payload) => {\n  let newState = {...state}\n  newState.parentFilter = payload\n  newState.childFilter = [...state.childFilter]\n\n  return newState\n}\n\n\nconst setChildFilter = (state, payload) => {\n  let newState = {...state}\n  newState.childFilter = [...payload]\n\n  return newState\n}\n\n\n// Reducers\n\n// const products = (state = defaultData.myRegistry.defaultProduct, action) => {\nconst recommendedProducts = (state = [], action) => {\n  switch (action.type) {\n    case MY_REGISTRY_ACTION_TYPES.ADD_RECOMMENDED_PRODUCT:\n      return state.length === 0 ? [...action.payload] : [...state, ...action.payload];\n    case MY_REGISTRY_ACTION_TYPES.INCREMENT_QUANTITY:\n      return incrementProductQuantity(state, action.payload);\n    case MY_REGISTRY_ACTION_TYPES.DECREMENT_QUANTITY:\n      return decrementProductQuantity(state, action.payload);\n    case MY_REGISTRY_ACTION_TYPES.SET_ACTIVE_RECOMMANDATION_VARIANT:\n      return setActiveRecommandationVariantID(state, action.payload);\n    default: \n      return state;\n  }\n}\n\n// const addedProducts = (state = defaultData.myRegistry.defaultAddedProduct, action) => {\nconst addedProducts = (state = [], action) => {\n  switch (action.type) {\n    case MY_REGISTRY_ACTION_TYPES.SET_REGISTRY_PRODUCTS:\n      return action.payload;\n    case MY_REGISTRY_ACTION_TYPES.TOGGLE_MUST_HAVE_PRODUCT:\n      return toggleMustHave([...state], action.payload);\n    case MY_REGISTRY_ACTION_TYPES.ADD_PRODUCT_TO_CART:\n      return addProductToCart([...state], action.payload);\n    case MY_REGISTRY_ACTION_TYPES.REMOVE_PRODUCT_FROM_CART:\n      return state.filter((product, _) => {\n        return product.item.id !== action.payload\n      })\n    default:\n      return state;\n  }\n}\n\nconst activeRecommandation = (state = \"\", action) => {\n  switch (action.type) {\n    case MY_REGISTRY_ACTION_TYPES.SET_ACTIVE_RECOMMANDATION:\n      return action.payload;\n    default:\n      return state;\n  }\n}\n\nconst filteredProducts = (state = [], action) => {\n  switch (action.type) {\n    case MY_REGISTRY_ACTION_TYPES.SET_FILTERED_PRODUCTS:\n      return [...action.payload]\n    default:\n      return state\n  }\n}\n\nconst filterCategory = (state = [], action) => {\n  switch (action.type) {\n    case MY_REGISTRY_ACTION_TYPES.SET_FILTER_CATEGORY:\n      return action.payload\n    default:\n      return state\n  }\n}\n\nconst filterApplied = (state = defaultData.myRegistry.defaultFilter, action) => {\n  switch (action.type) {\n    case MY_REGISTRY_ACTION_TYPES.SET_PARENT_FILTER:\n      return setParentFilter(state, action.payload)\n    case MY_REGISTRY_ACTION_TYPES.SET_CHILD_FILTER:\n      return setChildFilter(state, action.payload)\n    case MY_REGISTRY_ACTION_TYPES.CLEAR_FILTER:\n      return defaultData.myRegistry.defaultFilter\n    default:\n      return state;\n  }\n}\n\nconst checkList = (state = [], action) => {\n  switch (action.type) {\n    case MY_REGISTRY_ACTION_TYPES.GET_CHECKLIST_ITEMS:\n      return action.payload;\n    default:\n      return state;\n  }\n}\n\nconst anotherStoreProduct = (state = defaultData.myRegistry.defaultAnotherStoreProductInfo, action) => {\n  switch (action.type) {\n    case MY_REGISTRY_ACTION_TYPES.SET_ANOTHER_STORE_PRODUCT_INFO:\n      return {...action.payload};\n    case MY_REGISTRY_ACTION_TYPES.CLEAR_ANOTHER_STORE_PRODUCT_INFO:\n      return defaultData.myRegistry.defaultAnotherStoreProductInfo;\n    default:\n      return state;\n  }\n}\n\nconst anotherStoreRegistry = (state = [], action) => {\n  switch (action.type) {\n    case MY_REGISTRY_ACTION_TYPES.SET_ANOTHER_STORE_REGISTRY_ITEMS:\n      return [...action.payload];\n    default:\n      return state;\n  }\n}\n\nconst cashFundCategories = (state = [], action) => {\n  switch (action.type) {\n    case MY_REGISTRY_ACTION_TYPES.SET_CASH_FUND_CATEGORIES:\n      return [...action.payload];\n    default:\n      return state;\n  }\n}\n\nconst filterCount = (state = defaultData.filterCount, action) => {\n  switch (action.type) {\n    case MY_REGISTRY_ACTION_TYPES.SET_FILTER_PRODUCT_COUNT:\n      return action.payload;\n    default:\n      return state;\n  }\n}\n\nexport default combineReducers({\n  recommendedProducts,\n  addedProducts,\n  activeRecommandation,\n  filterCategory,\n  filteredProducts,\n  filterApplied,\n  checkList,\n  anotherStoreProduct,\n  anotherStoreRegistry,\n  cashFundCategories,\n  filterCount,\n})","export const VIEW_REGISTRY_ACTION_TYPES = {\n\t// View Registry product\n  VIEW_REGISTRY_PRODUCTS: \"VIEW_REGISTRY_PRODUCTS\",\n  \n  // Filtered Products\n  SET_SORTED_PRODUCTS: \"SET_SORTED_PRODUCTS\",   \n  ACTIVE_SORT_FILTER: \"ACTIVE_SORT_FILTER\",\n  IS_GUEST_VIEW: \"IS_GUEST_VIEW\",\n  SET_VIEW_FILTER_CATEGORY: \"SET_VIEW_FILTER_CATEGORY\",\n\n  // Filter\n\tSET_VIEW_PARENT_FILTER: \"SET_VIEW_PARENT_FILTER\",\n\tSET_VIEW_CHILD_FILTER: \"SET_VIEW_CHILD_FILTER\",\n\tCLEAR_VIEW_FILTER: \"CLEAR_VIEW_FILTER\",\n}\n\nexport const setViewRegistryProducts = params => {\n\treturn {\n\t\ttype: VIEW_REGISTRY_ACTION_TYPES.VIEW_REGISTRY_PRODUCTS,\n\t\tpayload: params\n    }\n}\n\nexport const setSortedFilteredProduct = (params) => {\n  return {\n    type: VIEW_REGISTRY_ACTION_TYPES.SET_SORTED_PRODUCTS,\n    payload: params\n  }\n}\n\nexport const activeSortFilter = (params) => {\n  return {\n    type: VIEW_REGISTRY_ACTION_TYPES.ACTIVE_SORT_FILTER,\n    payload: params\n  }\n}\n\nexport const setguestViewRegistry = (params) => {\n  return {\n    type: VIEW_REGISTRY_ACTION_TYPES.IS_GUEST_VIEW,\n    payload: params\n  }\n}\n\n// View Filter Category Section\nexport const setViewFilterCategory = params => {\n\treturn {\n\t\ttype: VIEW_REGISTRY_ACTION_TYPES.SET_VIEW_FILTER_CATEGORY,\n\t\tpayload: params\n\t}\n}\n\n\n// Filter Section\n\nexport const setParentViewFilter = params => {\n\treturn {\n\t\ttype: VIEW_REGISTRY_ACTION_TYPES.SET_VIEW_PARENT_FILTER,\n\t\tpayload: params\n\t}\n}\n\nexport const setChildViewFilter = params => {\n\treturn {\n\t\ttype: VIEW_REGISTRY_ACTION_TYPES.SET_VIEW_CHILD_FILTER,\n\t\tpayload: params\n\t}\n}\n\nexport const clearViewFilter = () => {\n\treturn {\n\t\ttype: VIEW_REGISTRY_ACTION_TYPES.CLEAR_VIEW_FILTER,\n\t}\n}","import {VIEW_REGISTRY_ACTION_TYPES} from \"./ViewRegistryActions\";\nimport {combineReducers} from \"redux\";\nimport defaultData from \"data/ReducerDefaultData.json\";\n\nconst setParentFilter = (state, payload) => {\n  let newState = {...state}\n  newState.parentFilter = payload\n  newState.childFilter = [...state.childFilter]\n\n  return newState\n}\n\n\nconst setChildFilter = (state, payload) => {\n  let newState = {...state}\n  newState.childFilter = [...payload]\n\n  return newState\n}\n\nconst viewRegistryProducts = (state = [], action) => {\n    switch (action.type) {\n      case VIEW_REGISTRY_ACTION_TYPES.VIEW_REGISTRY_PRODUCTS:\n          return [...action.payload];\n      default:\n          return state;\n    }\n}\n\nconst activeSortFilter = (state = {sortId: 1, sortTitle: 'Featured'}, action) => {\n    switch (action.type) {\n      case VIEW_REGISTRY_ACTION_TYPES.ACTIVE_SORT_FILTER:\n        return {...action.payload};\n      default:\n        return state;\n    }\n  }\n\nconst guestViewRegistry = (state = false, action) => {\n  switch (action.type) {\n    case VIEW_REGISTRY_ACTION_TYPES.IS_GUEST_VIEW:\n      return action.payload;\n    default:\n      return state;\n  }\n}\n\nconst filterCategory = (state = [], action) => {\n  switch (action.type) {\n    case VIEW_REGISTRY_ACTION_TYPES.SET_VIEW_FILTER_CATEGORY:\n      return [...action.payload]\n    default:\n      return state\n  }\n}\n\nconst viewFilterApplied = (state = defaultData.myRegistry.defaultFilter, action) => {\n  switch (action.type) {\n    case VIEW_REGISTRY_ACTION_TYPES.SET_VIEW_PARENT_FILTER:\n      return setParentFilter(state, action.payload)\n    case VIEW_REGISTRY_ACTION_TYPES.SET_VIEW_CHILD_FILTER:\n      return setChildFilter(state, action.payload)\n    case VIEW_REGISTRY_ACTION_TYPES.CLEAR_VIEW_FILTER:\n      return defaultData.myRegistry.defaultFilter\n    default:\n      return state;\n  }\n}\n\nexport default combineReducers({\n    viewRegistryProducts,\n    activeSortFilter,\n    guestViewRegistry,\n    filterCategory,\n    viewFilterApplied\n})\n","export const REGISTRY_ACTION_TYPES = {\n  UPDATE_REGISTRY_INFO: \"UPDATE_REGISTRY_INFO\",\n  SET_LOGGING_STATUS: \"SET_LOGGING_STATUS\",\n  SET_TODO : \"SET_TODO\",\n  SET_ONBOARDING_REGISTRY: \"SET_ONBOARDING_REGISTRY\",\n\n  // For Loader\n  SET_LOADER: 'SET_LOADER',\n\n  // For login user\n  SET_USER_INFO: 'SET_USER_INFO'\n}\n\nexport const updateRegistryInfo = (params) => {\n  return {\n    type: REGISTRY_ACTION_TYPES.UPDATE_REGISTRY_INFO,\n    payload: params\n  }\n}\n\nexport const setLoggingStatus = (params) => {\n  return {\n    type: REGISTRY_ACTION_TYPES.SET_LOGGING_STATUS,\n    payload: params\n  }\n}\n\nexport const setTodo = (params) => {\n  return {\n    type: REGISTRY_ACTION_TYPES.SET_TODO,\n    payload: params\n  }\n}\n\nexport const setOnboardingRegistry = (params) => {\n  return {\n    type: REGISTRY_ACTION_TYPES.SET_ONBOARDING_REGISTRY,\n    payload: params\n  }\n}\n\nexport const setLoader = (params) => {\n  return {\n    type: REGISTRY_ACTION_TYPES.SET_LOADER,\n    payload: params\n  }\n}\n\nexport const setUserInfo = (params) => {\n  return {\n    type: REGISTRY_ACTION_TYPES.SET_USER_INFO,\n    payload: params\n  }\n}\n","import {REGISTRY_ACTION_TYPES} from \"./RegistryActions\"\nimport {combineReducers} from \"redux\";\nimport defaultData from \"data/ReducerDefaultData.json\";\n\nconst registryInfo = (state = {}, action) => {\n  switch (action.type) {\n    case REGISTRY_ACTION_TYPES.UPDATE_REGISTRY_INFO:\n      return action.payload\n    default:\n      return state\n  }\n}\n\nconst loggedIn = (state = false, action) => {\n  switch (action.type) {\n    case REGISTRY_ACTION_TYPES.SET_LOGGING_STATUS:\n      return action.payload\n    default:\n      return state\n  }\n}\n\nconst todo = (state = [], action) => {\n  switch (action.type) {\n    case REGISTRY_ACTION_TYPES.SET_TODO:\n      return [...action.payload]\n    default:\n      return state\n  }\n}\n\nconst onboardingRegistry = (state = \"\", action) => {\n  switch (action.type) {\n    case REGISTRY_ACTION_TYPES.SET_ONBOARDING_REGISTRY:\n      return action.payload\n    default:\n      return state\n  }\n}\n\nconst loader = (state = false, action) => {\n  switch (action.type) {\n    case REGISTRY_ACTION_TYPES.SET_LOADER:\n      return action.payload\n    default:\n      return state\n  }\n}\n\nconst user = (state = {}, action) => {\n  switch (action.type) {\n    case REGISTRY_ACTION_TYPES.SET_USER_INFO:\n      return action.payload\n    default:\n      return state\n  }\n}\n\n\nexport default combineReducers({\n  info: registryInfo,\n  loggedIn,\n  todo,\n  onboardingRegistry,\n  loader,\n  user\n});","export const PERSONALISE_CHECKLIST_ACTION_TYPES = {\n\n\tGET_ALL_CHECKLIST_ITEMS: \"GET_ALL_CHECKLIST_ITEMS\",\n\tINCREMENT_CHECKLIST_QUANTITY: \"INCREMENT_CHECKLIST_QUANTITY\",\n\tDECREMENT_CHECKLIST_QUANTITY: \"DECREMENT_CHECKLIST_QUANTITY\",\n\tCHECKLIST_ADDED: \"CHECKLIST_ADDED\",\n\n\tPERSONALISE_ADD_QUESTION: \"PERSONALISE_ADD_QUESTION\",\n    PERSONALISE_ADD_ANSWER: \"PERSONALISE_ADD_ANSWER\",\n    PERSONALISE_UPDATE_ANSWER: \"PERSONALISE_UPDATE_ANSWER\"\n}\n\nexport const incrementCheckListQuantity = (id, quantity) => {\n\treturn {\n\t\ttype: PERSONALISE_CHECKLIST_ACTION_TYPES.INCREMENT_CHECKLIST_QUANTITY,\n\t\tpayload: { id, quantity }\n\t}\n}\n\nexport const decrementCheckListQuantity = (id, quantity) => {\n\treturn {\n\t\ttype: PERSONALISE_CHECKLIST_ACTION_TYPES.DECREMENT_CHECKLIST_QUANTITY,\n\t\tpayload: { id, quantity }\n\t}\n}\n\n\nexport const setPersonaliseCheckListItems = params => {\n\treturn {\n\t\ttype: PERSONALISE_CHECKLIST_ACTION_TYPES.GET_ALL_CHECKLIST_ITEMS,\n\t\tpayload: params\n\t}\n}\n\nexport const setIsActiveCheckList = (id, isAdded) => {\n\treturn {\n\t\ttype: PERSONALISE_CHECKLIST_ACTION_TYPES.CHECKLIST_ADDED,\n\t\tpayload: { id, isAdded }\n\t}\n}\n\nexport const addPersonalizeQuestion = (params) => {\n\treturn {\n\t  type: PERSONALISE_CHECKLIST_ACTION_TYPES.PERSONALISE_ADD_QUESTION,\n\t  payload: params\n\t}\n  }\n  \n  export const addPersonalizeQuestionAnswer = (params) => {\n\treturn {\n\t  type: PERSONALISE_CHECKLIST_ACTION_TYPES.PERSONALISE_ADD_ANSWER,\n\t  payload: params\n\t}\n  }\n  \n  export const updatePersonalizeQuestionAnswer = (params) => {\n\treturn {\n\t  type: PERSONALISE_CHECKLIST_ACTION_TYPES.PERSONALISE_UPDATE_ANSWER,\n\t  payload: params\n\t}\n  }","import {PERSONALISE_CHECKLIST_ACTION_TYPES} from \"./PersonaliseCheckListActions\";\nimport {combineReducers} from \"redux\";\n\n// Functions\nconst incrementProductQuantity = (state, payload) => {\n  let {\n    id,\n    quantity\n  } = payload;\n\n  let stateInc = [...state];\n  let newState = [];\n  for (let category of stateInc) {\n    let newSubCategory = []\n    for (let subCategory of category.subCategories) {\n      if (subCategory.id === id) {\n        subCategory.totalItemsCount += quantity;\n      }\n      newSubCategory.push(subCategory)\n    }\n    category.subCategories = newSubCategory\n    newState.push(category)\n  }\n  return newState;\n}\n\nconst decrementProductQuantity = (state, payload) => {\n  let {\n    id,\n    quantity\n  } = payload;\n\n  let stateInc = [...state];\n  let newState = [];\n  for (let category of stateInc) {\n    let newSubCategory = []\n    for (let subCategory of category.subCategories) {\n      if (subCategory.id === id && subCategory.totalItemsCount > 1) {\n        subCategory.totalItemsCount -= quantity;\n      }\n      newSubCategory.push(subCategory)\n    }\n    category.subCategories = newSubCategory\n    newState.push(category)\n  }\n  return newState;\n}\n\nconst setIsAddedCheckList = (state, payload) => {\n  let {\n    id,\n    isAdded\n  } = payload;\n\n  let stateInc = [...state];\n  let newState = [];\n  for (let category of stateInc) {\n    let newSubCategory = []\n    for (let subCategory of category.subCategories) {\n      if (subCategory.id === id) {\n        subCategory.isAdded = isAdded;\n      }\n      newSubCategory.push(subCategory)\n    }\n    category.subCategories = newSubCategory\n    newState.push(category)\n  }\n  return newState;\n}\n\n// Reducers\nconst editedPersonaliseCheckList = (state = [], action) => {\n  switch (action.type) {\n    case PERSONALISE_CHECKLIST_ACTION_TYPES.GET_ALL_CHECKLIST_ITEMS:\n      return [...action.payload];\n    case PERSONALISE_CHECKLIST_ACTION_TYPES.INCREMENT_CHECKLIST_QUANTITY:\n      return incrementProductQuantity(state, action.payload);\n    case PERSONALISE_CHECKLIST_ACTION_TYPES.DECREMENT_CHECKLIST_QUANTITY:\n      return decrementProductQuantity(state, action.payload);\n      case PERSONALISE_CHECKLIST_ACTION_TYPES.CHECKLIST_ADDED:\n        return setIsAddedCheckList(state, action.payload);\n    default:\n      return state;\n  }\n}\n\nconst questions = (state = [], action) => {\n  switch (action.type) {\n    case PERSONALISE_CHECKLIST_ACTION_TYPES.PERSONALISE_ADD_QUESTION:\n      return action.payload\n    default:\n      return state\n  }\n}\n\nconst answers = (state = [], action) => {\n  switch (action.type) {\n    case PERSONALISE_CHECKLIST_ACTION_TYPES.PERSONALISE_ADD_ANSWER:\n      return [...state, action.payload]\n    case PERSONALISE_CHECKLIST_ACTION_TYPES.PERSONALISE_UPDATE_ANSWER:\n      return [...action.payload]\n    default:\n      return state\n  }\n}\n\nexport default combineReducers({\n  editedPersonaliseCheckList,\n  questions,\n  answers\n})","export const ONBOARDING_ACTION_TYPES = {\n  ADD_QUESTION: \"ADD_QUESTION\",\n  ADD_ANSWER: \"ADD_ANSWER\",\n  UPDATE_ANSWER: \"UPDATE_ANSWER\"\n}\n\nexport const addOnboardingQuestion = (params) => {\n  return {\n    type: ONBOARDING_ACTION_TYPES.ADD_QUESTION,\n    payload: params\n  }\n}\n\nexport const addQuestionAnswer = (params) => {\n  return {\n    type: ONBOARDING_ACTION_TYPES.ADD_ANSWER,\n    payload: params\n  }\n}\n\nexport const updateQuestionAnswer = (params) => {\n  return {\n    type: ONBOARDING_ACTION_TYPES.UPDATE_ANSWER,\n    payload: params\n  }\n}","import {ONBOARDING_ACTION_TYPES} from \"./OnboardingAction\";\nimport {combineReducers} from \"redux\";\n\n\nconst questions = (state = [], action) => {\n  switch (action.type) {\n    case ONBOARDING_ACTION_TYPES.ADD_QUESTION:\n      return [...action.payload]\n    default:\n      return state\n  }\n}\n\nconst answers = (state = [], action) => {\n  switch (action.type) {\n    case ONBOARDING_ACTION_TYPES.ADD_ANSWER:\n      return [...state, action.payload]\n    case ONBOARDING_ACTION_TYPES.UPDATE_ANSWER:\n      return [...action.payload]\n    default:\n      return state\n  }\n}\n\nexport default combineReducers({\n  questions,\n  answers\n});","export const GUEST_VIEW_ACTION_TYPES = {\n\tUPDATE_GUEST_VIEW_INFO: \"UPDATE_GUEST_VIEW_INFO\",\n\tSET_GUEST_VIEW_PRODUCT: \"SET_GUEST_VIEW_PRODUCT\",\n\tGUEST_ACTIVE_SORT_FILTER: \"GUEST_ACTIVE_SORT_FILTER\",\n\n\t// Filter\n\tSET_GUEST_VIEW_PARENT_FILTER: \"SET_GUEST_VIEW_PARENT_FILTER\",\n\tSET_GUEST_VIEW_CHILD_FILTER: \"SET_GUEST_VIEW_CHILD_FILTER\",\n\tCLEAR_GUEST_VIEW_FILTER: \"CLEAR_GUEST_VIEW_FILTER\",\n\n\tSET_GUEST_VIEW_FILTER_CATEGORY: \"SET_GUEST_VIEW_FILTER_CATEGORY\",\n\tGUEST_VIEW_SET_PAGINATION_INFO: \"GUEST_VIEW_SET_PAGINATION_INFO\",\n\tCLEAR_GUEST_PAGINATION_INFO: \"CLEAR_GUEST_PAGINATION_INFO\",\n\n\tGET_GUEST_CHECKLIST_ITEMS: \"GET_GUEST_CHECKLIST_ITEMS\",\n\n\t//I BOUGHT THIS ALREADY STORE PRODUCT\n  SET_ALREADY_BOUGHT_PRODUCT_INFO : \"SET_ALREADY_BOUGHT_PRODUCT_INFO\",\n\tCLEAR_ALREADY_BOUGHT_PRODUCT_INFO : \"CLEAR_ALREADY_BOUGHT_PRODUCT_INFO\",\n\n\t//CASH CONTRIBUTED ALREADY INFO\n  SET_CASH_CONTRIBUTED_ALREADY_INFO : \"SET_CASH_CONTRIBUTED_ALREADY_INFO\",\n\tCLEAR_CASH_CONTRIBUTED_ALREADY_INFO : \"CLEAR_CASH_CONTRIBUTED_ALREADY_INFO\",\n\t\n\tGUEST_GIFTS_SET_REDIRECTING_INFO: \"GUEST_GIFTS_SET_REDIRECTING_INFO\",\n}\n\nexport const updateGuestViewInfo = (params) => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.UPDATE_GUEST_VIEW_INFO,\n\t\tpayload: params\n\t}\n}\n\nexport const setGuestViewProducts = params => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.SET_GUEST_VIEW_PRODUCT,\n\t\tpayload: params\n\t}\n}\n\nexport const activeGuestSortFilter = (params) => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.GUEST_ACTIVE_SORT_FILTER,\n\t\tpayload: params\n\t}\n}\n\n// Filter Section\nexport const setParentGuestViewFilter = params => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.SET_GUEST_VIEW_PARENT_FILTER,\n\t\tpayload: params\n\t}\n}\n\nexport const setChildGuestViewFilter = params => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.SET_GUEST_VIEW_CHILD_FILTER,\n\t\tpayload: params\n\t}\n}\n\nexport const clearGuestViewFilter = () => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.CLEAR_GUEST_VIEW_FILTER,\n\t}\n}\n\n// View Filter Category Section\nexport const setGuestViewFilterCategory = params => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.SET_GUEST_VIEW_FILTER_CATEGORY,\n\t\tpayload: params\n\t}\n}\n\nexport const setViewGuestPaginationInfo = (params) => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.GUEST_VIEW_SET_PAGINATION_INFO,\n\t\tpayload: params\n\t}\n}\n\nexport const clearViewGuestPaginationInfo = () => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.CLEAR_GUEST_PAGINATION_INFO,\n\t}\n}\n\nexport const setGuestCheckListItems = params => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.GET_GUEST_CHECKLIST_ITEMS,\n\t\tpayload: params\n\t}\n}\n\n// I BOUGHT THIS ALREADY STORE PRODUCT\nexport const setAlreadyBoughtProductInfo = params => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.SET_ALREADY_BOUGHT_PRODUCT_INFO,\n\t\tpayload: params\n\t}\n}\n\nexport const clearAlreadyBoughtProductInfo = () => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.CLEAR_ALREADY_BOUGHT_PRODUCT_INFO,\n\t}\n}\n\n// For 3rd party Product\nexport const setGuestGiftsRedirectionInfo = (params) => {\n  return {\n    type: GUEST_VIEW_ACTION_TYPES.GUEST_GIFTS_SET_REDIRECTING_INFO,\n    payload: params\n  }\n}\n\n// Cash Contributed Already\nexport const setCashContributedAlreadyInfo = params => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.SET_CASH_CONTRIBUTED_ALREADY_INFO,\n\t\tpayload: params\n\t}\n}\n\nexport const clearCashContributedAlreadyInfo = () => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.CLEAR_CASH_CONTRIBUTED_ALREADY_INFO,\n\t}\n}\n","import { GUEST_VIEW_ACTION_TYPES } from \"./GuestViewAction\";\nimport { combineReducers } from \"redux\";\nimport defaultData from \"data/ReducerDefaultData.json\";\n\nconst guestViewRegistry = (state = { updated: false }, action) => {\n  switch (action.type) {\n    case GUEST_VIEW_ACTION_TYPES.UPDATE_GUEST_VIEW_INFO:\n      return { ...action.payload }\n    default:\n      return state\n  }\n}\n\nconst addedGuestProducts = (state = [], action) => {\n  switch (action.type) {\n    case GUEST_VIEW_ACTION_TYPES.SET_GUEST_VIEW_PRODUCT:\n      return  [...action.payload];\n    default:\n      return state;\n  }\n}\n\nconst activeGuestSortFilter = (state = {sortId: 1, sortTitle: 'Featured'}, action) => {\n  switch (action.type) {\n    case GUEST_VIEW_ACTION_TYPES.GUEST_ACTIVE_SORT_FILTER:\n      return {...action.payload};\n    default:\n      return state;\n  }\n}\n\nconst setParentFilter = (state, payload) => {\n  let newState = {...state}\n  newState.parentFilter = payload\n  newState.childFilter = [...state.childFilter]\n\n  return newState\n}\n\nconst setChildFilter = (state, payload) => {\n  let newState = {...state}\n  newState.childFilter = [...payload]\n\n  return newState\n}\n\nconst guestViewFilterApplied = (state = defaultData.myRegistry.defaultFilter, action) => {\n  switch (action.type) {\n    case GUEST_VIEW_ACTION_TYPES.SET_GUEST_VIEW_PARENT_FILTER:\n      return setParentFilter(state, action.payload)\n    case GUEST_VIEW_ACTION_TYPES.SET_GUEST_VIEW_CHILD_FILTER:\n      return setChildFilter(state, action.payload)\n    case GUEST_VIEW_ACTION_TYPES.CLEAR_GUEST_VIEW_FILTER:\n      return defaultData.myRegistry.defaultFilter\n    default:\n      return state;\n  }\n}\n\nconst guestFilterCategory = (state = [], action) => {\n  switch (action.type) {\n    case GUEST_VIEW_ACTION_TYPES.SET_GUEST_VIEW_FILTER_CATEGORY:\n      return [...action.payload]\n    default:\n      return state\n  }\n}\n\nconst paginationInfo = (state = defaultData.trackGifts.pagination, action) => {\n  switch (action.type) {\n    case GUEST_VIEW_ACTION_TYPES.GUEST_VIEW_SET_PAGINATION_INFO:\n      return {...action.payload}\n    case GUEST_VIEW_ACTION_TYPES.CLEAR_GUEST_PAGINATION_INFO:\n      return defaultData.trackGifts.pagination\n    default:\n      return state\n  }\n}\n\nconst checkList = (state = [], action) => {\n  switch (action.type) {\n    case GUEST_VIEW_ACTION_TYPES.GET_GUEST_CHECKLIST_ITEMS:\n      return action.payload;\n    default:\n      return state;\n  }\n}\n\nconst alreadyBoughtProduct = (state = defaultData.defaultAlreadyBoughtProductInfo, action) => {\n  switch (action.type) {\n    case GUEST_VIEW_ACTION_TYPES.SET_ALREADY_BOUGHT_PRODUCT_INFO:\n      return {...action.payload};\n    case GUEST_VIEW_ACTION_TYPES.CLEAR_ALREADY_BOUGHT_PRODUCT_INFO:\n      return defaultData.defaultAlreadyBoughtProductInfo;\n    default:\n      return state;\n  }\n}\n\nconst redirectionInfo = (state = {}, action) => {\n  switch (action.type) {\n    case GUEST_VIEW_ACTION_TYPES.GUEST_GIFTS_SET_REDIRECTING_INFO:\n      return {...action.payload}\n    default:\n      return state\n  }\n}\n\nconst cashContributedAlready = (state = defaultData.defaultCashContributedAlready, action) => {\n  switch (action.type) {\n    case GUEST_VIEW_ACTION_TYPES.SET_CASH_CONTRIBUTED_ALREADY_INFO:\n      return {...action.payload};\n    case GUEST_VIEW_ACTION_TYPES.CLEAR_CASH_CONTRIBUTED_ALREADY_INFO:\n      return defaultData.defaultCashContributedAlready;\n    default:\n      return state;\n  }\n}\n\nexport default combineReducers({\n  info: guestViewRegistry,\n  product: addedGuestProducts,\n  activeGuestSortFilter,\n  guestViewFilterApplied,\n  guestFilterCategory,\n  paginationInfo,\n  checkList,\n  alreadyBoughtProduct,\n  redirectionInfo,\n  cashContributedAlready,\n});","export const TRACK_GIFTS_ACTION_TYPES = {\n  TRACK_GIFTS_ACTIVE_VIEW: \"TRACK_GIFTS_ACTIVE_VIEW\",\n\n  TRACK_GIFTS_SET_PRODUCT: \"TRACK_GIFTS_SET_PRODUCT\",\n\n  TRACK_GIFTS_SET_PAGINATION_INFO: \"TRACK_GIFTS_SET_PAGINATION_INFO\",\n\n  TRACK_GIFTS_SET_FILTERS: \"TRACK_GIFTS_SET_FILTERS\",\n\n  TRACK_GIFTS_SET_SEARCH: \"TRACK_GIFTS_SET_SEARCH\",\n\n  TRACK_GIFTS_SET_REDIRECTING_INFO: \"TRACK_GIFTS_SET_REDIRECTING_INFO\"\n}\n\nexport const setActiveView = (params) => {\n  return {\n    type: TRACK_GIFTS_ACTION_TYPES.TRACK_GIFTS_ACTIVE_VIEW,\n    payload: params\n  }\n}\n\nexport const setTrackGiftsProduct = (params) => {\n  return {\n    type: TRACK_GIFTS_ACTION_TYPES.TRACK_GIFTS_SET_PRODUCT,\n    payload: params\n  }\n}\n\nexport const setTrackGiftsPaginationInfo = (params) => {\n  return {\n    type: TRACK_GIFTS_ACTION_TYPES.TRACK_GIFTS_SET_PAGINATION_INFO,\n    payload: params\n  }\n}\n\nexport const setTrackGiftsFilters = (params) => {\n  return {\n    type: TRACK_GIFTS_ACTION_TYPES.TRACK_GIFTS_SET_FILTERS,\n    payload: params\n  }\n}\n\nexport const setTrackGiftsSearch = (params) => {\n  return {\n    type: TRACK_GIFTS_ACTION_TYPES.TRACK_GIFTS_SET_SEARCH,\n    payload: params\n  }\n}\n\nexport const setTrackGiftsRedirectionInfo = (params) => {\n  return {\n    type: TRACK_GIFTS_ACTION_TYPES.TRACK_GIFTS_SET_REDIRECTING_INFO,\n    payload: params\n  }\n}\n","import React from \"react\";\nimport \"./ViewBy.scss\";\nimport {useSelector, useDispatch} from \"react-redux\";\nimport {setActiveView} from \"../../TrackGiftsAction\";\n\nexport const TRACK_GIFTS_VIEWS = [\n  {\n    \"id\": 1,\n    \"text\": \"Gifts\"\n  },\n  {\n    \"id\": 2,\n    \"text\": \"Gift Givers\"\n  }\n]\n\nconst ViewBy = () => {\n  const activeView = useSelector(state => state.trackGifts.activeView);\n  const dispatch = useDispatch()\n\n  const changeTrackGiftView = view => {\n    dispatch(setActiveView(view))\n  }\n\n  return (\n    <div className=\"track-gift-view-by\">\n      <p className=\"text-sm\">View By</p>\n      <div className=\"view-by-toggle-section mt-1\">\n        <div\n          className={[\"view-by-toggle text-sm p-2\", activeView.id === TRACK_GIFTS_VIEWS[0].id ? \"active-view-toggle\" : \"\"].join(\" \")}\n          onClick={() => changeTrackGiftView(TRACK_GIFTS_VIEWS[0])}\n        >Gifts\n        </div>\n        <div\n          className={[\"view-by-toggle text-sm p-2\", activeView.id === TRACK_GIFTS_VIEWS[1].id ? \"active-view-toggle\" : \"\"].join(\" \")}\n          onClick={() => changeTrackGiftView(TRACK_GIFTS_VIEWS[1])}\n        >Gift\n          Givers\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default ViewBy;","import {TRACK_GIFTS_ACTION_TYPES} from \"./TrackGiftsAction\";\nimport {combineReducers} from \"redux\";\nimport {TRACK_GIFTS_VIEWS} from \"./components/view-by/ViewBy\";\nimport defaultData from \"data/ReducerDefaultData.json\";\n\n// By default \"Gifts\" are selected\nconst activeView = (state = TRACK_GIFTS_VIEWS[0], action) => {\n  switch (action.type) {\n    case TRACK_GIFTS_ACTION_TYPES.TRACK_GIFTS_ACTIVE_VIEW:\n      return {...action.payload}\n    default:\n      return state\n  }\n}\n\nconst products = (state = [], action) => {\n  switch (action.type) {\n    case TRACK_GIFTS_ACTION_TYPES.TRACK_GIFTS_SET_PRODUCT:\n      return [...action.payload]\n    default:\n      return state\n  }\n}\n\nconst paginationInfo = (state = defaultData.trackGifts.pagination, action) => {\n  switch (action.type) {\n    case TRACK_GIFTS_ACTION_TYPES.TRACK_GIFTS_SET_PAGINATION_INFO:\n      return {...action.payload}\n    default:\n      return state\n  }\n}\n\nconst filters = (state = defaultData.trackGifts.filters, action) => {\n  switch (action.type) {\n    case TRACK_GIFTS_ACTION_TYPES.TRACK_GIFTS_SET_FILTERS:\n      return [...action.payload]\n    default:\n      return state\n  }\n}\n\nconst search = (state = defaultData.trackGifts.search, action) => {\n  switch (action.type) {\n    case TRACK_GIFTS_ACTION_TYPES.TRACK_GIFTS_SET_SEARCH:\n      return {...action.payload}\n    default:\n      return state\n  }\n}\n\nconst redirectionInfo = (state = {}, action) => {\n  switch (action.type) {\n    case TRACK_GIFTS_ACTION_TYPES.TRACK_GIFTS_SET_REDIRECTING_INFO:\n      return {...action.payload}\n    default:\n      return state\n  }\n}\n\n\nexport default combineReducers({\n  activeView,\n  products,\n  paginationInfo,\n  filters,\n  search,\n  redirectionInfo\n});","import { createStore, applyMiddleware, combineReducers, compose } from \"redux\";\nimport thunk from \"redux-thunk\";\nimport { routerMiddleware, connectRouter } from 'connected-react-router'\nimport { createBrowserHistory } from \"history\";\nimport home from \"../modules/home/HomeReducer\";\nimport MyRegistryReducers from \"../modules/my-registry/MyRegistryReducer\";\nimport ViewRegistryReducers from \"modules/view-registry/ViewRegistryReducer\";\nimport registryInfo from \"../modules/registry/RegistryReducer\";\nimport PersonaliseCheckListReducer from \"../modules/personalise-checklist/PersonaliseCheckListReducer\";\nimport Onboarding from \"../modules/onboarding/OnboardingReducer\";\nimport GuestViewReducer from \"../modules/guest-view/GuestViewReducer\";\nimport TrackGiftsReducer from \"../modules/track-gifts/TrackGiftsReducer\";\n\nexport const history = createBrowserHistory();\n\nconst rootReducer = combineReducers({\n  home,\n  registry: registryInfo,\n  myRegistry: MyRegistryReducers,\n  viewRegistry: ViewRegistryReducers,\n  personaliseCheckList: PersonaliseCheckListReducer,\n  onboarding: Onboarding,\n  trackGifts: TrackGiftsReducer,\n  guestView: GuestViewReducer,\n  router: connectRouter(history)\n})\n\nconst middlewares = [routerMiddleware(history), thunk];\n\nconst composeEnhancer = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose; // eslint-disable-line\n\nexport const store = createStore(\n  rootReducer,\n  composeEnhancer(applyMiddleware(...middlewares))\n);\n","import LanguageDetector from 'i18next-browser-languagedetector';\nimport i18next from 'i18next';\nimport { en, es } from '../locales';\n\nconst options = {\n  interpolation: {\n    escapeValue: false\n  },\n  resources: { en, es }\n};\n\ni18next.use(LanguageDetector).init(options);\n\nexport default i18next;\n","import enLocale from \"./en\";\nimport esLocale from \"./es\";\n\nexport const en = { translation: enLocale };\nexport const es = { translation: esLocale };\n","export default {\n  home: {\n    title: \"HOME\",\n    redirect: \"Redirect\",\n    today: \"Today is the day\",\n    button: \"Dispatch an example action\",\n    values: \"Values from the store (dispatch an action to load more)\",\n    getUser: \"Get Users by Apollo GraphQL queries:\"\n  },\n  another: {\n    title: \"ANOTHER VIEW\"\n  },\n  checkList: {\n    title: \"Checklist\",\n    personalize: \"Personalize\"\n  },\n  registryHeader: {\n    subTitle: \"Due on \",\n    visible: \"Visible\",\n    link:{\n      myRegistry: \"Build Registry\",\n      viewRegistry: \"View Registry\",\n      trackGifts: \"Track Gifts\",\n      shower: \"Baby Shower\",\n      announcements: \"Announcements\",\n      more: \"More\",\n      toDos: \"Here are your top to-dos\"\n    }\n  }\n};\n","export default {\n  home: {\n    title: \"INICIO\",\n    redirect: \"REDIRIGIR\",\n    today: \"Hoy es el da\",\n    button: \"Disparar accin de ejemplo\",\n    values: \"Resultado del store (disparar una accin para cargar ms)\",\n    getUser: \"Obtener usuarios mediante consultas de Apollo GraphQL:\"\n  },\n  another: {\n    title: \"OTRA VISTA\"\n  },\n  checkList: {\n    title: \"\",\n    personalize: \"\"\n  },\n  registryHeader: {\n    subTitle: \"\",\n    visible: \"\",\n    link:{\n      myRegistry: \"\",\n      guestView: \"\",\n      trackGifts: \"\",\n      shower: \"\",\n      announcements: \"\",\n      more: \"\",\n      toDos: \"\"\n    }\n  }\n};\n","let APP_HOME_ROUTE = \"/pages/registry\";\n\nlet routes = {\n  LOGIN: {\n    VERIFY_TOKEN: APP_HOME_ROUTE + \"/verify-token/:token\"\n  },\n  REGISTRY: {\n    HOME: APP_HOME_ROUTE\n  },\n\n  MY_REGISTRY: {\n    HOME: APP_HOME_ROUTE + \"/home\",\n    GIFTS_ADDED: APP_HOME_ROUTE + \"/~/gifts-added\",\n    GIFT_TO_ADD: APP_HOME_ROUTE + \"/~/gifts-to-add\",\n    GIFT_VIEW: APP_HOME_ROUTE + \"/guest-view\",\n    SHOWER: APP_HOME_ROUTE + \"/~/shower\",\n    ANNOUNCEMENTS: APP_HOME_ROUTE + \"/~/announcements\",\n    MORE: APP_HOME_ROUTE + \"/~/more\",\n    TO_DOS: APP_HOME_ROUTE + \"/~/to_dos\"\n  },\n\n  VIEW_REGISTRY: {\n    HOME: APP_HOME_ROUTE + \"/view-registry\"\n  },\n\n  TRACK_GIFTS: {\n    HOME: APP_HOME_ROUTE + \"/track_gifts\"\n  },\n\n  ONBOARDING: {\n    HOME: APP_HOME_ROUTE + \"/onboarding\"\n  },\n\n  PERSONALIZE:{\n    HOME: APP_HOME_ROUTE + \"/personalize-quiz\",\n    CHECKLIST: APP_HOME_ROUTE + \"/personalize-checklist\"\n  },\n\n  GUEST_VIEW: {\n    HOME: APP_HOME_ROUTE+\"\"\n  },\n\n  FIND_REGISTRY: {\n    HOME: APP_HOME_ROUTE + \"/find\"\n  }\n}\nexport default routes;","import React from 'react';\nimport \"./MoreOption.scss\";\n\nconst MoreOption = (props) => {\n  return (\n    <div className={[\"more-option\", props.className ? props.className : null].join(\" \")}>\n      <button className={[\"more-option-dropbtn my-auto\", props.iconClass, props.buttonClass ? props.buttonClass : \"\"].join(\" \")} onClick={(e) => e.stopPropagation()}/>\n      <div className={[\"more-option-dropdown\"].join(\" \")}>\n        <div className=\"more-option-content py-1\">\n          <ul className=\"p-0 m-0\">\n            {props.data ?\n              props.data.map((option, index) =>\n                <li className=\"text-sm\" key={\"option-\" + index}>\n                  <button className=\"py-2 px-4 more-option-item\" onClick={option.action}>{option.name}</button>\n                </li>\n              )\n              : null}\n          </ul>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default MoreOption;\n","import React from 'react';\nimport \"./ModalComponent.scss\";\nimport {Modal} from 'react-bootstrap';\n\nconst ModalComponent = (props) => {\n  return (\n    <Modal show={props.show} size={props.size ? props.size : \"xl\"} className={[\"m-a-modal\", props.modalClassName ? props.modalClassName : \"\"].join(\" \")}>\n      {props.title || props.titleContent ?\n        <Modal.Header className=\"px-3 pt-3 pb-1 d-block\">\n          <div>\n            <div className=\"d-flex justify-content-between\">\n              <h1>{props.title}</h1>\n              <div className=\"d-flex\">\n                {props.headerContent ? props.headerContent : null}\n                <i className={[\"icon-close m-a-modal-close align-self-center\", props.closeIconClass ? props.closeIconClass : \"\"].join(\" \")} onClick={props.closeModal}/>\n              </div>\n            </div>\n          </div>\n\n          {/* OPTIONAL CONTENT IN TITLE PORTION */}\n          {props.titleContent ? props.titleContent : null}\n\n        </Modal.Header> : null}\n      <Modal.Body className={[\"m-a-modal-content\", !props.noBodyPadding ? \"p-3\" : \"py-0 pr-3\"].join(\" \")}>\n        {/*<div className=\"row\">*/}\n        {/*  <div className=\"col\">*/}\n        {/* MODAL CONTENT GOES HERE */}\n        {props.children}\n        {/*  </div>*/}\n        {/*</div>*/}\n      </Modal.Body>\n      {props.footer ?\n        <Modal.Footer className=\"px-3 py-3 m-a-modal-footer\">\n          {/*  MODAL FOOTER BUTTONS GOES HERE*/}\n          {props.footer}\n        </Modal.Footer>\n        : null}\n    </Modal>\n\n\n  )\n}\n\nexport default ModalComponent;","import React from 'react'\nimport \"./Counter.scss\";\n\nconst Counter = (props) => {\n\treturn (\n\t\t<div className={[\"counter\", \"d-flex\", props.className ? props.className : \"\"].join(\" \")}>\n\t\t\t<button className=\"icon-btn icon-circle-minus pl-0\" onClick={props.decrementHandler}></button>\n\t\t\t<span className=\"mx-2\">{props.counter}</span>\n\t\t\t<button className=\"icon-btn icon-circle-plus pr-0\" onClick={props.incrementHandler}></button>\n\t\t</div >\n\t);\n}\n\nexport default Counter;","import React from 'react';\nimport \"./CardItem.scss\";\nimport Counter from \"modules/commons/components/counter/Counter\";\n\nconst CardItem = (props) => {\n\treturn (\n\t\t<div className={[\"card-item\", props.className ? props.className : \"\"].join(\" \")}>\n\t\t\t<div className={props.onCardClick?\"product-image text-center pointer px-2 pt-2\":\"product-image text-center px-2 pt-2\"} onClick={() => props.onCardClick ? props.onCardClick() : null}>\n\t\t\t\t<img className=\"mx-auto\" src={props.activeVariant ? props.activeVariant.imageUrl : props.data.imageUrl} alt={props.data.title} />\n\t\t\t</div>\n\t\t\t<div className=\"product-bottom mt-3 px-2 pb-2\">\n\t\t\t\t<div className={props.onCardClick?\"product-title font-medium text-body pointer\":\"product-title font-medium text-body\"} onClick={() => props.onCardClick ? props.onCardClick() : null}>\n\t\t\t\t\t{props.data.title}\n\t\t\t\t</div>\n\n\t\t\t\t<div className={props.onCardClick?\"product-sub-text-heading mt-3 text-sm font-medium pointer\":\"product-sub-text-heading mt-3 text-sm font-medium\"} onClick={() => props.onCardClick ? props.onCardClick() : null} >\n\t\t\t\t\t<span>Why we love it?</span>\n\t\t\t\t</div>\n\n\t\t\t\t<div className={props.onCardClick?\"product-sub-text-description text-sm text-sm pointer\":\"product-sub-text-description text-sm text-sm\"} onClick={() => props.onCardClick ? props.onCardClick() : null} >\n\t\t\t\t\t<span>{props.data.description} <a href={props.data.storeUrl} className=\"read-more\" tabindex=\"0\" target=\"_blank\">Read more</a></span>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<div className=\"product-price d-flex mt-3\">\n\t\t\t\t\t\t{/* <h5>{props.data.price ? '$ ' + props.data.price : (props.data.isMaItem && props.data.maItemVariantItemRecommendation.length) ? '$ ' + props.data.maItemVariantItemRecommendation[0].price : null}</h5> */}\n\t\t\t\t\t\t<h5>{props.activeVariant ? '$' + props.activeVariant.price : '$' + props.data.price}</h5>\n\t\t\t\t\t\t{props.data.strikedPrice ? <span className=\"strike-price ml-1\">{props.data.strikedPrice}</span> : null}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"d-flex align-items-center mt-3\">\n\t\t\t\t\t\t<Counter\n\t\t\t\t\t\t\tcounter={props.data.quantity}\n\t\t\t\t\t\t\tincrementHandler={props.incrementQuantityHandler}\n\t\t\t\t\t\t\tdecrementHandler={props.decrementQuantityHandler} />\n\t\t\t\t\t\t<button className=\"add-btn ml-auto\" onClick={props.addProductHandler} />\n\t\t\t\t\t</div>\n\t\t\t\t\t{props.data.maItemVariantItemRecommendation.length ?\n\t\t\t\t\t\t<div className=\"mt-3 product-variant\">\n\t\t\t\t\t\t\t<div className=\"mt-3\">\n\t\t\t\t\t\t\t\t<p className=\"font-medium product-variant-text\">Color</p>\n\t\t\t\t\t\t\t\t<div className=\"d-flex flex-wrap\">\n\t\t\t\t\t\t\t\t\t{props.data.maItemVariantItemRecommendation.map(variant =>\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName={[\"mr-1 mb-1 product-variant-circle-disk\", (props.activeVariant && props.activeVariant.variantId === variant.variantId) ? \"active-variant-product\" : \"\"].join(\" \")}\n\t\t\t\t\t\t\t\t\t\t\tkey={variant.variantId + ':' + variant.sku}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => props.setActiveRecommandationVariantHandler(variant)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<img className=\"product-variant-image\" src={variant.iconUrl} alt={variant.pattern} />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div> : null}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default CardItem;","import {gql} from '@apollo/client';\n\n// Add queries\n\nconst GET_USERS = gql`\nquery getUsers {\n    users {\n        id,\n        email\n    }\n}\n`;\n\nconst GET_CATEGORIES = `\nquery getCategories($registryId: Int!){\n  registryCategories(registryId:$registryId){\n    id,\n    isExcluded,\n    itemsCount,\n    addedItemsCount,\n    totalItemsCount,\n    subCategoriesIsExcluded,\n    category{\n      id,\n      categoryName,\n      description,\n      categoryType {\n        id,\n        name\n      }\n      isParent,\n    },\n    registrySubCategories{\n      id,\n      isExcluded,\n      itemsCount,\n      addedItemsCount,\n      totalItemsCount,\n      subCategoriesIsExcluded,\n      category{\n        id,\n        categoryName,\n        description,\n        categoryType {\n          id,\n          name\n        }\n        isParent,\n      },\n      registrySubProductTypes{\n        id,\n        isExcluded,\n        itemsCount,\n        addedItemsCount,\n        totalItemsCount,\n        category{\n          id,\n          categoryName,\n          description,\n          categoryType {\n            id,\n            name\n          }\n          isParent,\n        },\n      }\n    }\n  }\n }\n`;\n\nconst GET_PRODUCTS = `\nquery registryItems(\n  $registryId:Int!\n  $after: String,\n  $first: Int,\n  $isReserved: Boolean,\n  $isPurchased: Boolean,\n  $isAvailable: Boolean,\n  $sortBy: String,\n  $categories:[Int],\n  $price_Lte: Float,\n  $price_Gte: Float,\n  $store: [String],\n  ){\n    registryItems(\n      registryId:$registryId\n      isReserved: $isReserved,\n      isPurchased: $isPurchased,\n      isAvailable: $isAvailable,\n      sortBy: $sortBy,\n      categories: $categories,\n      price_Lte: $price_Lte,\n      price_Gte: $price_Gte,\n      store: $store,\n      ){\n      registryItems(after: $after, first: $first) {\n        edges {\n          node {\n            id\n            registryitemImage {\n              image\n            }\n            isGroupGift\n            isReserved\n            quantity\n            mostWanted\n            featuredOrder\n            isReserved\n            isAmountReceived\n            isPurchased\n            title\n            imageUrl\n            isCashAcceptedOnly\n            quantityStatus\n            purchasedRegistryItem{\n              id,\n              purchasedQuantity,\n              isPurchased,\n              giftMessage,\n              orderNo,\n              storeName,\n              createdTs,\n              contributionAmount\n              groupGift{\n                amountReceived\n              }\n              guestUser{\n                email,\n                firstName,\n                lastName,\n              }\n            }\n            registryCategories {\n              id\n              category {\n                id\n                categoryName\n                categoryType {\n                  id\n                  name\n                }\n                isParent\n                parentCategory {\n                  id\n                  categoryName\n                  isParent\n                    parentCategory {\n                    categoryName\n                  }\n                }\n              }\n            }\n            note\n            item {\n              store {\n                id\n                storeName\n              }\n              id\n              shopifyItemId\n              shopifyItemVariantId\n              storeItemUrl\n              sku\n              price\n              hideTotal\n            }\n          }\n        }\n        pageInfo {\n          endCursor\n          hasNextPage\n        }\n      }\n      registryItemsAnalysisCount{\n        totalAvailable,\n        totalReserved,\n        totalPurchased,\n        maStoreItems,\n        otherStoreItems,\n        under50,\n        moreThan100,\n        between50100,\n        totalFundsReceived\n      }\n      categoryData\n    }\n  }\n`\n\nconst GET_RECOMMENDATIONS = `\nquery itemRecommendations($registryId: Int!){\n  itemRecommendations(registryId:$registryId){\n    id,\n    imageUrl,\n    title,\n    price,\n    isMaItem,\n    isEnable,\n    sku,\n    storeName,\n    description,\n    shopifyItemId, \n    storeUrl,\n    category{\n      id,\n      categoryName,\n      categoryType {\n        id,\n        name\n      }\n      isParent,\n    },\n    maItemVariantItemRecommendation{\n      imageUrl,\n      pattern,\n      iconUrl,\n      size,\n      variantId,\n      sku,\n      price,\n      isAvailable\n    }\n  }\n\n  }\n`;\n\nconst ADD_REGISTRY_ITEM = `\nmutation addRegistryItems(\n    $registryId:Int!,\n    $title:String!,\n    $category:[Int]!,\n    $tags:[Int]!,\n    $storeItemUrl:String!,\n    $shopifyItemVariantId: String,\n    $sku:String!,\n    $price:Float!,\n    $quantity:Int!,\n    $shopifyItemId:String,\n    $storeName:String!\n    $imageUrl: String,\n    $mostWanted: Boolean,\n    $isGroupGift: Boolean, \n    $isCashAcceptedOnly: Boolean){\n  addRegistryItems(registryId:$registryId,\n  registryItems:[{\n    storeName: $storeName,\n    items: [{\n      title:$title,\n      registryCategories:$category,\n      tags:$tags,\n      storeItemUrl:$storeItemUrl,\n      sku:$sku,\n      price:$price,\n      quantity:$quantity,\n      shopifyItemId: $shopifyItemId,\n      imageUrl: $imageUrl,\n      shopifyItemVariantId: $shopifyItemVariantId,\n      mostWanted: $mostWanted,\n      isGroupGift: $isGroupGift,\n      isCashAcceptedOnly: $isCashAcceptedOnly\n    },]\n  }])\n  {\n    message\n  }\n}\n`;\n\nconst UPDATE_REGISTRY_ITEM = `\nmutation updateRegistryItems(\n  $registryItemId: Int!, \n  $quantity: Int!, \n  $mostWanted: Boolean,\n  $isGroupGift: Boolean, \n  $isCashAcceptedOnly: Boolean){\n  updateRegistryItems(registryItemId:$registryItemId, registryItemData:{\n    quantity:$quantity,\n    isReserved:false,\n    mostWanted: $mostWanted,\n    isGroupGift: $isGroupGift,\n    isCashAcceptedOnly: $isCashAcceptedOnly\n  }){\n    message\n  }\n}\n`;\n\nconst REMOVE_REGISTRY_ITEM = `\nmutation deleteRegistryItems($registryItemId: Int!){\n  deleteRegistryItems(registryItemId:$registryItemId){\n    message\n  }\n}\n`;\n\nconst GET_REGISTRIES = `\nquery {\n  registries {\n    edges {\n      node {\n        id\n        name\n        urlSlug\n        greeting\n        displayName\n        isFeaturedNoticeRead\n        isFeatured\n        isMustHaveApplied\n        isMaButtonConfigured\n        isBuildRegistryVisited\n        isViewAsGuestVisited\n        isFeaturedOrderApplied\n        isGroupGiftApplied\n        isViewRegistryVisited\n        image {\n          id\n          image\n        }\n        dueDate\n        isPublic\n      }\n    }\n  }\n}\n`;\n\nconst GET_REGISTRY_IMAGES = `\n  query registryImages($registryId: Int!){\n    registryImages(registryId: $registryId) {\n      id\n      image\n      isDefault\n    }\n  }\n`;\n\nconst GET_QUESTIONS = `\n  query getQuestions($registryId: Int, $isPersonalize: Boolean!){\n  questions(registryId: $registryId, isPersonalize: $isPersonalize){\n    id,\n    title,\n    answerInputType,\n    fields,\n    toastMessage,\n    answers{\n      questionOption{\n        id\n      },\n      optionText\n    },\n    options {\n      id,\n      value,\n      toastMessage,\n      helpText,\n      action,\n      followUpQuestions{\n         question{\n          id,\n          title,\n          fields,\n          answerInputType,\n          toastMessage,\n          options{\n            id\n            value\n            toastMessage\n            action\n          },\n          answers{\n            questionOption{\n              id\n            },\n            optionText\n          },\n        }\n      }\n    }\n  }\n}\n`\n\nconst GET_GUEST_REGISTRY = `\n  query getGuestRegistry($urlSlug: String!, $after: String, $first: Int){\n    registryAsGuest(urlSlug: $urlSlug){\n      id,\n      name,\n      displayName,\n      greeting,\n      isPublic,\n      isAllGiftsPurchased,\n      urlSlug,\n      image {\n        id\n        image\n      },\n      user {\n        firstName,\n        partnerUser {\n          firstName\n        },\n        defaultAddress{\n          address1,\n          address2,\n          province,\n          country,\n          zip,\n          city,\n          province\n        }\n      },\n      registryItems(after: $after, first: $first) {\n        edges{\n          node{\n            id,\n            registryitemImage{\n              image\n            }\n            isGroupGift,\n            isReserved,\n            quantity,\n            mostWanted,\n            featuredOrder,\n            isReserved,\n            isCashAcceptedOnly,\n            isAmountReceived,\n            isPurchased,\n            imageUrl,\n            title,\n            quantityStatus\n            purchasedRegistryItem{\n              id,\n              purchasedQuantity,\n              isPurchased,\n              giftMessage,\n              orderNo,\n              storeName,\n              createdTs,\n              contributionAmount\n              groupGift{\n                amountReceived\n              }\n              guestUser{\n                email,\n                firstName,\n                lastName,\n              }\n            }\n            registryCategories {\n              id,\n              category{\n                categoryName,\n              }\n            }\n            note,\n            item{\n              store{\n                id,\n                storeName\n              }\n              id,\n              shopifyItemId,\n              storeItemUrl,\n              sku,\n              price,\n              isCashFund,\n              hideTotal,\n            }\n          }\n        }\n        pageInfo{\n          endCursor,\n          hasNextPage\n        }\n      }\n    }\n  }\n`\n\nconst GET_PERSONALIZE_QUESTIONS = `\nquery editablePersonalizeQuestions($registryId: Int!){\n  editablePersonalizeQuestions(registryId: $registryId){\n    id,\n    title,\n    answerInputType,\n    fields,\n    isPersonalize,\n    toastMessage,\n    answers{\n      questionOption{\n        id\n      },\n      optionText\n    },\n    options {\n      id,\n      value,\n      toastMessage,\n      helpText,\n      followUpQuestions{\n         question{\n          id,\n          title,\n          fields,\n          answerInputType,\n          toastMessage,\n          isPersonalize,\n          options{\n            id\n            value\n            toastMessage\n          },\n          answers{\n            questionOption{\n              id\n            },\n            optionText\n          },\n        }\n      }\n    }\n  }\n}\n`\n\nconst GET_TRACK_GIFTS = `\nquery registryGifts($registryId: Int!, $giftGivers: Boolean!, $after: String, $first: Int, $isReserved: Boolean, $isAvailable: Boolean, $isPurchased: Boolean, $isFundsReceived: Boolean, $isReturned: Boolean, $searchKeyword: String) {\n  registryGifts(registryId: $registryId, giftGivers: $giftGivers, isReserved: $isReserved, isAvailable: $isAvailable, isPurchased: $isPurchased, isFundsReceived: $isFundsReceived, isReturned: $isReturned, searchKeyword: $searchKeyword) {\n    registryGiftItemsCount {\n      totalAvailable\n      totalPurchased\n      totalReserved\n      totalFundsReceived\n      totalReturned\n    }\n    gifts(after: $after, first: $first) {\n      edges {\n        node {\n          id\n          isGroupGift\n          registryitemImage {\n              image\n            }\n          featuredOrder\n          isReserved\n          isPurchased\n          quantity\n          isCashAcceptedOnly\n          isAmountReceived\n          imageUrl\n          item {\n            store {\n              id\n              storeName\n            }\n            storeItemUrl\n            price\n            isCashFund\n          }\n          quantityStatus\n          purchasedRegistryItem {\n            id\n            purchasedQuantity\n            isPurchased\n            isReserved\n            giftMessage\n            orderNo\n            storeName\n            createdTs\n            contributionAmount\n            groupGift {\n              id\n              amountReceived\n              guestUser {\n                email\n                firstName\n                lastName\n                id\n              }\n            }\n            guestUser {\n              email\n              firstName\n              lastName\n              id\n            }\n          }\n          title\n        }\n      }\n      pageInfo {\n        endCursor\n        hasNextPage\n      }\n    }\n  }\n}\n`\n\nconst GET_CASH_FUND_CATEGORIES = `\nquery getCashFund($registryId: Int!){\n  cashFundCategories(registryId:$registryId){\n    id\n    category{\n      id\n      categoryName\n    }\n  }\n}\n`\n\nconst GET_GUEST_REGISTRY_PRODUCT = `\n  query getGuestRegistry(\n    $urlSlug: String!,\n    $after: String,\n    $first: Int,\n    $isReserved: Boolean,\n    $isPurchased: Boolean,\n    $isAvailable: Boolean,\n    $sortBy: String,\n    $categories:[Int],\n    $price_Lte: Float,\n    $price_Gte: Float,\n    $store: [String],\n    ){\n    registryAsGuest(\n      urlSlug: $urlSlug,\n      isReserved: $isReserved,\n      isPurchased: $isPurchased,\n      isAvailable: $isAvailable,\n      sortBy: $sortBy,\n      categories: $categories,\n      price_Lte: $price_Lte,\n      price_Gte: $price_Gte,\n      store: $store,\n      ){\n      isAllGiftsPurchased\n      registryItems(\n        after: $after,\n        first: $first,\n        ) {\n        edges{\n          node{\n            id,\n            registryitemImage{\n              image\n            }\n            isGroupGift,\n            isReserved,\n            quantity,\n            mostWanted,\n            featuredOrder,\n            isReserved,\n            isCashAcceptedOnly,\n            isAmountReceived,\n            isPurchased,\n            imageUrl,\n            title,\n            quantityStatus\n            purchasedRegistryItem{\n              id,\n              purchasedQuantity,\n              isPurchased,\n              giftMessage,\n              orderNo,\n              isReserved,\n              storeName,\n              createdTs,\n              contributionAmount\n              groupGift{\n                amountReceived\n              }\n              guestUser{\n                email,\n                firstName,\n                lastName,\n              }\n            }\n            registryCategories {\n              id\n              category {\n                categoryName\n                categoryType {\n                  id\n                  name\n                }\n                isParent\n                parentCategory {\n                  categoryName\n                  isParent\n                    parentCategory {\n                    categoryName\n                  }\n                }\n              }\n            }\n            note,\n            item{\n              store{\n                id,\n                storeName\n              }\n              id,\n              shopifyItemId,\n              storeItemUrl,\n              shopifyItemVariantId,\n              sku,\n              price,\n              isCashFund,\n              hideTotal,\n            }\n          }\n        }\n        pageInfo{\n          endCursor,\n          hasNextPage\n        }\n      }\n      registryItemsAnalysisCount{\n        totalAvailable,\n        totalReserved,\n        totalPurchased,\n        maStoreItems,\n        otherStoreItems,\n        under50,\n        moreThan100,\n        between50100,\n        totalFundsReceived\n      }\n      categoryData\n    }\n  }\n`;\n\nconst GET_GUEST_CHECKLIST = `\n  query registryCategoriesAsGuest($urlSlug: String!){\n    registryCategoriesAsGuest(urlSlug: $urlSlug){\n      id,\n      isExcluded,\n      itemsCount,\n      addedItemsCount,\n      totalItemsCount,\n       category{\n        id,\n        categoryName,\n        categoryType{\n          id,\n          name\n        }\n      },\n      registrySubCategories{\n        id,\n        isExcluded,\n        itemsCount,\n        addedItemsCount,\n        totalItemsCount,\n        category{\n          id,\n          categoryName\n        },\n        registrySubProductTypes{\n          id,\n          isExcluded,\n          itemsCount,\n          addedItemsCount,\n          totalItemsCount,\n          category{\n            id,\n            categoryName\n          },\n        }\n      }\n    }\n  }\n`;\n\nconst FIND_REGISTRY = `\n  query findRegistry($registryName: String!){\n    findRegistry(registryName: $registryName){\n      edges{\n        node{\n          id,\n          name,\n          displayName,\n          urlSlug,\n          createdTs,\n          dueDate,\n          user{\n            id,\n            defaultAddress{\n              city,\n              province\n            }\n          }\n        }\n      }\n    }\n  }\n`;\n\nconst GET_TODO = `\n  query registryTodoSteps($registryId: ID!){\n    registryTodoSteps(registryId: $registryId) {\n      label\n      redirect,\n      redirectUrl\n    }\n  }\n`\n\nconst GET_DEFAULT_CASH_FUND_IMAGE = `\n  query cashFundDefaultImage($categoryId: ID!) {\n    cashFundDefaultImage(categoryId: $categoryId)\n  }\n`\n\nconst GET_MA_VARIANT = `\n  query maItemVariants($registryId: Int!, $variantId: String!){\n  maItemVariants(registryId:$registryId, variantId:$variantId){\n    id,\n    iconUrl,\n    imageUrl,\n    pattern,\n    size,\n    variantId,\n    sku,\n    price,\n    isAvailable\n  }\n}\n`\n\nexport {\n  GET_USERS,\n  GET_CATEGORIES,\n  GET_PRODUCTS,\n  GET_RECOMMENDATIONS,\n  ADD_REGISTRY_ITEM,\n  UPDATE_REGISTRY_ITEM,\n  REMOVE_REGISTRY_ITEM,\n  GET_REGISTRIES,\n  GET_REGISTRY_IMAGES,\n  GET_QUESTIONS,\n  GET_GUEST_REGISTRY,\n  GET_PERSONALIZE_QUESTIONS,\n  GET_TRACK_GIFTS,\n  GET_CASH_FUND_CATEGORIES,\n  GET_GUEST_REGISTRY_PRODUCT,\n  GET_GUEST_CHECKLIST,\n  FIND_REGISTRY,\n  GET_TODO,\n  GET_DEFAULT_CASH_FUND_IMAGE,\n  GET_MA_VARIANT\n};\n\n// Example to use queries added in home.jsx","const backendId = \"https://3.12.191.197\";\n// const backendId = \"http://localhost:8000\";\n\nexport default {\n  \"BACKEND_URL\": backendId,\n  \"LOCAL_API_URL\": backendId + \"/api/\",\n  \"PRODUCTION_API_URL\": backendId + \"/api/\"\n}","import config from './config';\nimport {Cookies} from 'react-cookie';\n\n\nconst cookies = new Cookies();\n// For axios\nexport const apiURL = process.env.NODE_ENV === 'production' ? config.PRODUCTION_API_URL : config.LOCAL_API_URL;\nconst AuthToken = cookies.get('access_token') ? \"Token \" + cookies.get('access_token') : \"\"\n\nconst axios = require(\"axios\");\n\nconst axiosInstance = axios.create({\n  baseURL: apiURL,\n  // TODO: Change Auth Token dyanamic\n  // headers : cookies.get('header')\n  headers: {\"Authorization\": cookies.get('access_token') ? \"Token \" + cookies.get('access_token') : \"\"}\n});\n\nconst axiosInstanceNoToken = axios.create({\n  baseURL: apiURL\n});\n\nconst axiosInstanceNoHeader = axios.create({\n  baseURL: apiURL\n});\n\nexport function graphQLNoToken(data) {\n  return axiosInstanceNoToken.post(\"/graphql\", data);\n}\n\nexport function graphQLNoHeader(data, options) {\n  return axiosInstanceNoHeader.post(\"/graphql\", data, options);\n}\n\nexport function graphQL(data) {\n  return axiosInstance.post(\"/graphql\", data);\n}\n\nexport function getRecommendation(data) {\n  return axiosInstance.get(\"/items\", data);\n}\n\nexport function getScrapedProduct(data) {\n  return axiosInstance.post(\"/items/import_item/\", data);\n}\n\nexport function verifyAccessToken(token) {\n  return axiosInstanceNoToken.post(\"/user/verify/token\", {}, {\n    headers: {\n      'Authorization': `Token ${token}`\n    }\n  });\n}\n\nexport function getAnotherRegistryProducts(data) {\n  return axiosInstance.post(\"/registry/import\", data);\n}\n\nconst axiosInstanceMultipart = axios.create({\n  baseURL: apiURL,\n  headers: {\n    \"Authorization\": AuthToken,\n    'Content-Type': 'multipart/form-data'\n  }\n});\n\nexport function graphQLMultipart(data) {\n  return axiosInstanceMultipart.post(\"/graphql\", data);\n}\n\nexport function addProductToCart(data) {\n  return axios.post(\"/cart/add.js\", data);\n}\n\nexport function downloadThankYouList(registryId) {\n  return axiosInstance.post(`/registry/${registryId}/download/thanks-note`);\n}","import React from 'react'\nimport config from \"api/config\";\n\nexport const API_END_POINTS = {\n  VERIFY_TOKEN: \"/api/user/verify/token\"\n}\n\nexport const API_URL = config.BACKEND_URL\n\nexport const MEDIA_URL_PREFIX = {\n  LOCAL_MEDIA_URL: \"\"\n}\n\nexport const FILTERS = {\n  CATEGORIES_DISPLAY: \"Categories\",\n  PRICE_DISPLAY: \"Price\",\n  PRICE_DISPLAY_1: \"Under $50\",\n  PRICE_DISPLAY_2: \"$50 - $100\",\n  PRICE_DISPLAY_3: \"more than $100\",\n  STORE_DISPLAY: \"Store\",\n  MONICA_AND_ANDY_DISPLAY: \"Monica + Andy\",\n  ELSEWHERE_DISPLAY: \"Elsewhere\",\n  AVAILABLE_DISPLAY: \"Available\",\n  RESERVED_DISPLAY: \"Reserved\",\n  PURCHASED_DISPLAY: \"Purchased\",\n}\n\nexport const BOOKMARKLET_SCRIPT = \"javascript:(function()%7Bif%20(!(!typeof%20url)%20)%7Bvar%20NO_JQUERY%3D%7B%7D%3B!function(e%2Ct%2Ca)%7Bif(!(%22console%22in%20e))%7Bvar%20r%3De.console%3D%7B%7D%3Br.log%3Dr.warn%3Dr.error%3Dr.debug%3Dfunction()%7B%7D%7Dt%3D%3D%3DNO_JQUERY%26%26(t%3D%7Bfn%3A%7B%7D%2Cextend%3Afunction()%7Bfor(var%20e%3Darguments%5B0%5D%2Ct%3D1%2Ca%3Darguments.length%3Bt%3Ca%3Bt%2B%2B)%7Bvar%20r%3Darguments%5Bt%5D%3Bfor(var%20n%20in%20r)e%5Bn%5D%3Dr%5Bn%5D%7Dreturn%20e%7D%7D)%2Ct.fn.pm%3Dfunction()%7Breturn%20console.log(%22usage%3A%20%5Cnto%20send%3A%20%20%20%20%24.pm(options)%5Cnto%20receive%3A%20%24.pm.bind(type%2C%20fn%2C%20%5Borigin%5D)%22)%2Cthis%7D%2Ct.pm%3De.bufferpm%3Dfunction(e)%7Bn.send(e)%7D%2Ct.pm.bind%3De.bufferpm.bind%3Dfunction(e%2Ct%2Ca%2Cr)%7Bn.bind(e%2Ct%2Ca%2Cr)%7D%2Ct.pm.unbind%3De.bufferpm.unbind%3Dfunction(e%2Ct)%7Bn.unbind(e%2Ct)%7D%2Ct.pm.origin%3De.bufferpm.origin%3Dnull%2Ct.pm.poll%3De.bufferpm.poll%3D200%3Bvar%20n%3D%7Bsend%3Afunction(e)%7Bvar%20a%3Dt.extend(%7B%7D%2Cn.defaults%2Ce)%2Cr%3Da.target%3Bif(a.target)if(a.type)%7Bvar%20s%3D%7Bdata%3Aa.data%2Ctype%3Aa.type%7D%3Ba.success%26%26(s.callback%3Dn._callback(a.success))%2Ca.error%26%26(s.errback%3Dn._callback(a.error))%2C%22postMessage%22in%20r%26%26!a.hash%3F(n._bind()%2Cr.postMessage(JSON.stringify(s)%2Ca.origin%7C%7C%22*%22))%3A(n.hash._bind()%2Cn.hash.send(a%2Cs))%7Delse%20console.warn(%22postmessage%20type%20required%22)%3Belse%20console.warn(%22postmessage%20target%20window%20required%22)%7D%2Cbind%3Afunction(a%2Cr%2Cs%2Co)%7B%22postMessage%22in%20e%26%26!o%3Fn._bind()%3An.hash._bind()%3Bvar%20i%3Dn.data(%22listeners.postmessage%22)%3Bi%7C%7C(i%3D%7B%7D%2Cn.data(%22listeners.postmessage%22%2Ci))%3Bvar%20u%3Di%5Ba%5D%3Bu%7C%7C(u%3D%5B%5D%2Ci%5Ba%5D%3Du)%2Cu.push(%7Bfn%3Ar%2Corigin%3As%7C%7Ct.pm.origin%7D)%7D%2Cunbind%3Afunction(e%2Ct)%7Bvar%20a%3Dn.data(%22listeners.postmessage%22)%3Bif(a)if(e)if(t)%7Bvar%20r%3Da%5Be%5D%3Bif(r)%7Bfor(var%20s%3D%5B%5D%2Co%3D0%2Ci%3Dr.length%3Bo%3Ci%3Bo%2B%2B)%7Bvar%20u%3Dr%5Bo%5D%3Bu.fn!%3D%3Dt%26%26s.push(u)%7Da%5Be%5D%3Ds%7D%7Delse%20delete%20a%5Be%5D%3Belse%20for(var%20o%20in%20a)delete%20a%5Bo%5D%7D%2Cdata%3Afunction(e%2Ct)%7Breturn%20t%3D%3D%3Da%3Fn._data%5Be%5D%3A(n._data%5Be%5D%3Dt%2Ct)%7D%2C_data%3A%7B%7D%2C_CHARS%3A%220123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz%22.split(%22%22)%2C_random%3Afunction()%7Bfor(var%20e%3D%5B%5D%2Ct%3D0%3Bt%3C32%3Bt%2B%2B)e%5Bt%5D%3Dn._CHARS%5B0%7C32*Math.random()%5D%3Breturn%20e.join(%22%22)%7D%2C_callback%3Afunction(e)%7Bvar%20t%3Dn.data(%22callbacks.postmessage%22)%3Bt%7C%7C(t%3D%7B%7D%2Cn.data(%22callbacks.postmessage%22%2Ct))%3Bvar%20a%3Dn._random()%3Breturn%20t%5Ba%5D%3De%2Ca%7D%2C_bind%3Afunction()%7Bn.data(%22listening.postmessage%22)%7C%7C(e.addEventListener%3Fe.addEventListener(%22message%22%2Cn._dispatch%2C!1)%3Ae.attachEvent%26%26e.attachEvent(%22onmessage%22%2Cn._dispatch)%2Cn.data(%22listening.postmessage%22%2C1))%7D%2C_dispatch%3Afunction(e)%7Btry%7Bvar%20t%3DJSON.parse(e.data)%7Dcatch(l)%7Breturn%20void%20console.warn(%22postmessage%20data%20invalid%20json%3A%20%22%2Cl)%7Dif(t.type)%7Bvar%20a%3D(n.data(%22callbacks.postmessage%22)%7C%7C%7B%7D)%5Bt.type%5D%3Bif(a)a(t.data)%3Belse%20for(var%20r%3D(n.data(%22listeners.postmessage%22)%7C%7C%7B%7D)%5Bt.type%5D%7C%7C%5B%5D%2Cs%3D0%2Co%3Dr.length%3Bs%3Co%3Bs%2B%2B)%7Bvar%20i%3Dr%5Bs%5D%3Bif(i.origin%26%26e.origin!%3D%3Di.origin)%7Bif(console.warn(%22postmessage%20message%20origin%20mismatch%22%2Ce.origin%2Ci.origin)%2Ct.errback)%7Bvar%20u%3D%7Bmessage%3A%22postmessage%20origin%20mismatch%22%2Corigin%3A%5Be.origin%2Ci.origin%5D%7D%3Bn.send(%7Btarget%3Ae.source%2Cdata%3Au%2Ctype%3At.errback%7D)%7D%7Delse%20try%7Bvar%20c%3Di.fn(t.data)%3Bt.callback%26%26n.send(%7Btarget%3Ae.source%2Cdata%3Ac%2Ctype%3At.callback%7D)%7Dcatch(l)%7Bt.errback%26%26n.send(%7Btarget%3Ae.source%2Cdata%3Al%2Ctype%3At.errback%7D)%7D%7D%7Delse%20console.warn(%22postmessage%20message%20type%20required%22)%7D%7D%3Bn.hash%3D%7Bsend%3Afunction(t%2Ca)%7Bvar%20r%3Dt.target%2Cs%3Dt.url%3Bif(s)%7Bs%3Dn.hash._url(s)%3Bvar%20o%2Ci%3Dn.hash._url(e.location.href)%3Bif(e%3D%3Dr.parent)o%3D%22parent%22%3Belse%20try%7Bfor(var%20u%3D0%2Cc%3Dparent.frames.length%3Bu%3Cc%3Bu%2B%2B)%7Bif(parent.frames%5Bu%5D%3D%3De)%7Bo%3Du%3Bbreak%7D%7D%7Dcatch(p)%7Bo%3De.name%7Dif(null!%3Do)%7Bvar%20l%3D%7B%22x-requested-with%22%3A%22postmessage%22%2Csource%3A%7Bname%3Ao%2Curl%3Ai%7D%2Cpostmessage%3Aa%7D%2Cf%3D%22%23x-postmessage-id%3D%22%2Bn._random()%3Br.location%3Ds%2Bf%2BencodeURIComponent(JSON.stringify(l))%7Delse%20console.warn(%22postmessage%20windows%20must%20be%20direct%20parent%2Fchild%20windows%20and%20the%20child%20must%20be%20available%20through%20the%20parent%20window.frames%20list%22)%7Delse%20console.warn(%22postmessage%20target%20window%20url%20is%20required%22)%7D%2C_regex%3A%2F%5E%5C%23x%5C-postmessage%5C-id%5C%3D(%5Cw%7B32%7D)%2F%2C_regex_len%3A%22%23x-postmessage-id%3D%22.length%2B32%2C_bind%3Afunction()%7Bn.data(%22polling.postmessage%22)%7C%7C(setInterval(function()%7Bvar%20t%3D%22%22%2Be.location.hash%2Ca%3Dn.hash._regex.exec(t)%3Bif(a)%7Bvar%20r%3Da%5B1%5D%3Bn.hash._last!%3D%3Dr%26%26(n.hash._last%3Dr%2Cn.hash._dispatch(t.substring(n.hash._regex_len)))%7D%7D%2Ct.pm.poll%7C%7C200)%2Cn.data(%22polling.postmessage%22%2C1))%7D%2C_dispatch%3Afunction(t)%7Bif(t)%7Btry%7Bif(!(%22postmessage%22%3D%3D%3D(t%3DJSON.parse(decodeURIComponent(t)))%5B%22x-requested-with%22%5D%26%26t.source%26%26null!%3Dt.source.name%26%26t.source.url%26%26t.postmessage))return%7Dcatch(g)%7Breturn%7Dvar%20a%3Dt.postmessage%2Cr%3D(n.data(%22callbacks.postmessage%22)%7C%7C%7B%7D)%5Ba.type%5D%3Bif(r)r(a.data)%3Belse%7Bvar%20s%3Bs%3D%22parent%22%3D%3D%3Dt.source.name%3Fe.parent%3Ae.frames%5Bt.source.name%5D%3Bfor(var%20o%3D(n.data(%22listeners.postmessage%22)%7C%7C%7B%7D)%5Ba.type%5D%7C%7C%5B%5D%2Ci%3D0%2Cu%3Do.length%3Bi%3Cu%3Bi%2B%2B)%7Bvar%20c%3Do%5Bi%5D%3Bif(c.origin)%7Bvar%20l%3D%2Fhttps%3F%5C%3A%5C%2F%5C%2F%5B%5E%5C%2F%5D*%2F.exec(t.source.url)%5B0%5D%3Bif(l!%3D%3Dc.origin)%7Bif(console.warn(%22postmessage%20message%20origin%20mismatch%22%2Cl%2Cc.origin)%2Ca.errback)%7Bvar%20f%3D%7Bmessage%3A%22postmessage%20origin%20mismatch%22%2Corigin%3A%5Bl%2Cc.origin%5D%7D%3Bn.send(%7Btarget%3As%2Cdata%3Af%2Ctype%3Aa.errback%2Chash%3A!0%2Curl%3At.source.url%7D)%7Dcontinue%7D%7Dtry%7Bvar%20p%3Dc.fn(a.data)%3Ba.callback%26%26n.send(%7Btarget%3As%2Cdata%3Ap%2Ctype%3Aa.callback%2Chash%3A!0%2Curl%3At.source.url%7D)%7Dcatch(g)%7Ba.errback%26%26n.send(%7Btarget%3As%2Cdata%3Ag%2Ctype%3Aa.errback%2Chash%3A!0%2Curl%3At.source.url%7D)%7D%7D%7D%7D%7D%2C_url%3Afunction(e)%7Breturn(%22%22%2Be).replace(%2F%23.*%24%2F%2C%22%22)%7D%7D%2Ct.extend(n%2C%7Bdefaults%3A%7Btarget%3Anull%2Curl%3Anull%2Ctype%3Anull%2Cdata%3Anull%2Csuccess%3Anull%2Cerror%3Anull%2Corigin%3A%22*%22%2Chash%3A!1%7D%7D)%7D(this%2C%22undefined%22%3D%3Dtypeof%20jQuery%3FNO_JQUERY%3AjQuery)%2C%22JSON%22in%20window%26%26window.JSON%7C%7C(JSON%3D%7B%7D)%2Cfunction()%7Bfunction%20f(e)%7Breturn%20e%3C10%3F%220%22%2Be%3Ae%7Dfunction%20quote(e)%7Breturn%20escapable.lastIndex%3D0%2Cescapable.test(e)%3F'%22'%2Be.replace(escapable%2Cfunction(e)%7Bvar%20t%3Dmeta%5Be%5D%3Breturn%22string%22%3D%3Dtypeof%20t%3Ft%3A%22%5C%5Cu%22%2B(%220000%22%2Be.charCodeAt(0).toString(16)).slice(-4)%7D)%2B'%22'%3A'%22'%2Be%2B'%22'%7Dfunction%20str(e%2Ct)%7Bvar%20a%2Cr%2Cn%2Cs%2Co%2Ci%3Dgap%2Cu%3Dt%5Be%5D%3Bswitch(u%26%26%22object%22%3D%3Dtypeof%20u%26%26%22function%22%3D%3Dtypeof%20u.toJSON%26%26(u%3Du.toJSON(e))%2C%22function%22%3D%3Dtypeof%20rep%26%26(u%3Drep.call(t%2Ce%2Cu))%2Ctypeof%20u)%7Bcase%22string%22%3Areturn%20quote(u)%3Bcase%22number%22%3Areturn%20isFinite(u)%3FString(u)%3A%22null%22%3Bcase%22boolean%22%3Acase%22null%22%3Areturn%20String(u)%3Bcase%22object%22%3Aif(!u)return%22null%22%3Bif(gap%2B%3Dindent%2Co%3D%5B%5D%2C%22%5Bobject%20Array%5D%22%3D%3D%3DObject.prototype.toString.apply(u))%7Bfor(s%3Du.length%2Ca%3D0%3Ba%3Cs%3Ba%2B%3D1)o%5Ba%5D%3Dstr(a%2Cu)%7C%7C%22null%22%3Breturn%20n%3D0%3D%3D%3Do.length%3F%22%5B%5D%22%3Agap%3F%22%5B%5Cn%22%2Bgap%2Bo.join(%22%2C%5Cn%22%2Bgap)%2B%22%5Cn%22%2Bi%2B%22%5D%22%3A%22%5B%22%2Bo.join(%22%2C%22)%2B%22%5D%22%2Cgap%3Di%2Cn%7Dif(rep%26%26%22object%22%3D%3Dtypeof%20rep)for(s%3Drep.length%2Ca%3D0%3Ba%3Cs%3Ba%2B%3D1)%22string%22%3D%3Dtypeof(r%3Drep%5Ba%5D)%26%26(n%3Dstr(r%2Cu))%26%26o.push(quote(r)%2B(gap%3F%22%3A%20%22%3A%22%3A%22)%2Bn)%3Belse%20for(r%20in%20u)Object.hasOwnProperty.call(u%2Cr)%26%26(n%3Dstr(r%2Cu))%26%26o.push(quote(r)%2B(gap%3F%22%3A%20%22%3A%22%3A%22)%2Bn)%3Breturn%20n%3D0%3D%3D%3Do.length%3F%22%7B%7D%22%3Agap%3F%22%7B%5Cn%22%2Bgap%2Bo.join(%22%2C%5Cn%22%2Bgap)%2B%22%5Cn%22%2Bi%2B%22%7D%22%3A%22%7B%22%2Bo.join(%22%2C%22)%2B%22%7D%22%2Cgap%3Di%2Cn%7D%7D%22function%22!%3Dtypeof%20Date.prototype.toJSON%26%26(Date.prototype.toJSON%3Dfunction()%7Breturn%20this.getUTCFullYear()%2B%22-%22%2Bf(this.getUTCMonth()%2B1)%2B%22-%22%2Bf(this.getUTCDate())%2B%22T%22%2Bf(this.getUTCHours())%2B%22%3A%22%2Bf(this.getUTCMinutes())%2B%22%3A%22%2Bf(this.getUTCSeconds())%2B%22Z%22%7D%2CString.prototype.toJSON%3DNumber.prototype.toJSON%3DBoolean.prototype.toJSON%3Dfunction()%7Breturn%20this.valueOf()%7D)%3Bvar%20cx%3D%2F%5B%5Cu0000%5Cu00ad%5Cu0600-%5Cu0604%5Cu070f%5Cu17b4%5Cu17b5%5Cu200c-%5Cu200f%5Cu2028-%5Cu202f%5Cu2060-%5Cu206f%5Cufeff%5Cufff0-%5Cuffff%5D%2Fg%2Cescapable%3D%2F%5B%5C%5C%5C%22%5Cx00-%5Cx1f%5Cx7f-%5Cx9f%5Cu00ad%5Cu0600-%5Cu0604%5Cu070f%5Cu17b4%5Cu17b5%5Cu200c-%5Cu200f%5Cu2028-%5Cu202f%5Cu2060-%5Cu206f%5Cufeff%5Cufff0-%5Cuffff%5D%2Fg%2Cgap%2Cindent%2Cmeta%3D%7B%22%5Cb%22%3A%22%5C%5Cb%22%2C%22%5Ct%22%3A%22%5C%5Ct%22%2C%22%5Cn%22%3A%22%5C%5Cn%22%2C%22%5Cf%22%3A%22%5C%5Cf%22%2C%22%5Cr%22%3A%22%5C%5Cr%22%2C'%22'%3A'%5C%5C%22'%2C%22%5C%5C%22%3A%22%5C%5C%5C%5C%22%7D%2Crep%3B%22function%22!%3Dtypeof%20JSON.stringify%26%26(JSON.stringify%3Dfunction(e%2Ct%2Ca)%7Bvar%20r%3Bif(gap%3D%22%22%2Cindent%3D%22%22%2C%22number%22%3D%3Dtypeof%20a)for(r%3D0%3Br%3Ca%3Br%2B%3D1)indent%2B%3D%22%20%22%3Belse%22string%22%3D%3Dtypeof%20a%26%26(indent%3Da)%3Bif(rep%3Dt%2Ct%26%26%22function%22!%3Dtypeof%20t%26%26(%22object%22!%3Dtypeof%20t%7C%7C%22number%22!%3Dtypeof%20t.length))throw%20new%20Error(%22JSON.stringify%22)%3Breturn%20str(%22%22%2C%7B%22%22%3Ae%7D)%7D)%2C%22function%22!%3Dtypeof%20JSON.parse%26%26(JSON.parse%3Dfunction(text%2Creviver)%7Bfunction%20walk(e%2Ct)%7Bvar%20a%2Cr%2Cn%3De%5Bt%5D%3Bif(n%26%26%22object%22%3D%3Dtypeof%20n)for(a%20in%20n)Object.hasOwnProperty.call(n%2Ca)%26%26((r%3Dwalk(n%2Ca))!%3D%3Dundefined%3Fn%5Ba%5D%3Dr%3Adelete%20n%5Ba%5D)%3Breturn%20reviver.call(e%2Ct%2Cn)%7Dvar%20j%3Bif(cx.lastIndex%3D0%2Ccx.test(text)%26%26(text%3Dtext.replace(cx%2Cfunction(e)%7Breturn%22%5C%5Cu%22%2B(%220000%22%2Be.charCodeAt(0).toString(16)).slice(-4)%7D))%2C%2F%5E%5B%5C%5D%2C%3A%7B%7D%5Cs%5D*%24%2F.test(text.replace(%2F%5C%5C(%3F%3A%5B%22%5C%5C%5C%2Fbfnrt%5D%7Cu%5B0-9a-fA-F%5D%7B4%7D)%2Fg%2C%22%40%22).replace(%2F%22%5B%5E%22%5C%5C%5Cn%5Cr%5D*%22%7Ctrue%7Cfalse%7Cnull%7C-%3F%5Cd%2B(%3F%3A%5C.%5Cd*)%3F(%3F%3A%5BeE%5D%5B%2B%5C-%5D%3F%5Cd%2B)%3F%2Fg%2C%22%5D%22).replace(%2F(%3F%3A%5E%7C%3A%7C%2C)(%3F%3A%5Cs*%5C%5B)%2B%2Fg%2C%22%22)))return%20j%3Deval(%22(%22%2Btext%2B%22)%22)%2C%22function%22%3D%3Dtypeof%20reviver%3Fwalk(%7B%22%22%3Aj%7D%2C%22%22)%3Aj%3Bthrow%20new%20SyntaxError(%22JSON.parse%22)%7D)%7D()%3Bvar%20url%20%3D%20window.location.href%3Bvar%20isOpen%20%3D%20true%3Bvar%20iframe%20%3D%20document.createElement('iframe')%3Biframe.setAttribute('allowtransparency'%2C%20'true')%3Biframe.setAttribute('src'%2C%20'https%3A%2F%2Fmonicaandandy-watertower.myshopify.com%2Fpages%2Fma_bady_registry_bookmarklet%3Furl%3D'%2Burl)%3Biframe.setAttribute('name'%2C%20'm-a-iframe')%3Biframe.setAttribute('id'%2C%20'm-a-iframe')%3Biframe.setAttribute('scrolling'%2C%20'no')%3Biframe.style.border%20%3D%20'none'%3Biframe.style.height%20%3D%20'100%25'%3Biframe.style.width%20%20%3D%20'100%25'%3Biframe.style.position%20%3D%20(document.doctype%20%3D%3D%20null%20%26%26%20navigator.appName.match('Microsoft'))%20%3F%20'absolute'%20%3A%20'fixed'%3Biframe.style.zIndex%20%3D%20'99999999999'%3Biframe.style.top%20%3D%20'0'%3Biframe.style.left%20%3D%20'0'%3Biframe.style%5B'background-color'%5D%20%3D%20'transparent'%3Biframe.style.clip%20%3D%20'auto'%3Biframe.style.overflow%20%3D%20'hidden'%3Biframe.style.opacity%20%3D%201%3Biframe.style.setProperty%20('display'%2C%20'block'%2C%20'important')%3Biframe.style.visibility%20%3D%20'visible'%3Bdocument.body.appendChild(iframe)%3B%7Dbufferpm.bind(%22buffermessage%22%2C%20function(data)%20%7Bvar%20iframe%20%3D%20document.getElementById(%22m-a-iframe%22)%3Biframe.parentNode.removeChild(iframe)%3Breturn%20false%3B%7D)%7D)()\"\n\nexport const IMPORT_REGISTRY_EMAIL = \"storks@monicaandandy.com\"\n\nexport const TRACK_GIFTS_PRODUCTS_PER_REQUEST = 20\nexport const M_A_STORE_NAME = \"monicaandandy\"\n\nexport const M_A_FORGOT_PASSWORD_LINK = \"https://monicaandandy-watertower.myshopify.com/account/login#recover\"\nexport const VIEW_GIFT_PRODUCTS_PER_REQUEST = 20\n\nexport const CURRENCY = \"$\"\n\nexport const LOCAL_STORAGE_TRACK_GIFT_BUY_KEY = \"babyRegistryVisitedItems\"\n\nexport const SETTINGS_LINKS = {\n  BANK_ACCOUNT: \"/pages/settings?content=bank-detail\"\n}\n\nexport const LOCAL_STORAGE_GUEST_GIFT_BUY_KEY = \"babyRegistryVisitedItemsByGuest\"\n\nexport const M_A_BABY_PRODUCT_LINK = \"https://monicaandandy.com/collections/baby-gifts\"\n\nexport const BUILD_REGISTRY_STEPS = [\n  {\n    selector: '[data-tut=\"build-step-one\"]',\n    content: () => {\n      return (\n        <>\n          <h4 className=\"font-medium\">An M+A Registry Tour</h4>\n          <p className=\"mt-3 text-sm\">\n            Planning for a baby can be overwhelming, that's why we've made managing your registry easyand fun!\n          </p>\n          <p className=\"mt-3 text-sm\">\n            The result?\n          </p>\n          <p className=\"mt-3 text-sm\">\n            A streamlined product checklist thats up-to-date, on-trend, and tailored to you and growing familydown to the number of bodysuits and pacis.\n          </p>\n        </>\n      )\n    },\n    title: 'An M+A Registry Tour',\n    children: 'top',\n  },\n  {\n    selector: '[data-tut=\"build-step-two\"]',\n    content: () => {\n      return (\n        <>\n          <h4 className=\"font-medium\">Lets Get Personal</h4>\n          <p className=\"mt-3 text-sm\">\n            Our personalization engine helps us get to know you better than other registries.\n          </p>\n          <p className=\"mt-3 text-sm\">\n            Based on your M+A Registry set-up quiz, we tailor our recommendations to your lifethink which bodysuits youll need for a winter baby and how many youll need to get you through that stage.\n          </p>\n          <p className=\"mt-3 text-sm\">\n            So every pick is just for you.\n          </p>\n        </>\n      )\n    },\n    title: 'Lets Get Personal',\n    position: [0, 100],\n\n  },\n  {\n    selector: '[data-tut=\"build-step-three\"]',\n    content: () => {\n      return (\n        <>\n          <h4 className=\"font-medium\">Add Any Items, From Any Store</h4>\n          <p className=\"mt-3 text-sm\">\n            Our registry is a universal registry.\n          </p>\n          <p className=\"mt-3 text-sm\">\n            You can add any products you love, from any online store, located anywhere on the internet. And you can manage them all in one place. Which makes it easier for you and easier for gift-givers.\n          </p>\n          <p className=\"mt-3 text-sm\">\n            So every pick is just for you.\n          </p>\n        </>\n      )\n    },\n    title: 'Add Any Items, From Any Store',\n  },\n];\n\nexport const MUST_HAVE_STEPS = [\n  {\n    selector: '[data-tut=\"must-have-step-one\"]',\n    content: () => {\n      return (\n        <>\n          <h4 className=\"font-medium\">Must Have</h4>\n          <p className=\"mt-3 text-sm\">\n            Its a fave! Let your guests know its something you really want.\n          </p>\n        </>\n      )\n    },\n    title: 'Must Have',\n    children: 'top',\n  },\n];\n\nexport const VIEW_REGISTRY_STEPS = [\n  {\n    selector: '[data-tut=\"view-step-one\"]',\n    content: () => {\n      return (\n        <>\n          <h4 className=\"font-medium\">Make It Yours</h4>\n          <p className=\"mt-3 text-sm\">\n            You can customize your M+A Registry homepage by adding a cute image, changing the title, and leaving your guests a little welcome note.\n          </p>\n        </>\n      )\n    },\n    title: 'Make It Yours',\n    // position: [50, 400],\n  },\n  {\n    selector: '[data-tut=\"view-step-two\"]',\n    content: () => {\n      return (\n        <>\n          <h4 className=\"font-medium\">Prioritize Gifts</h4>\n          <p className=\"mt-3 text-sm\">\n            You can also change the order that your guests view your registry itemsgiving them a visual cue to what tops your list (hint, hint).\n          </p>\n        </>\n      )\n    },\n    title: 'Prioritize Gifts',\n    position: 'top',\n  },\n  {\n    selector: '[data-tut=\"view-step-three\"]',\n    content: () => {\n      return (\n        <>\n          <h4 className=\"font-medium\">Preview + Share</h4>\n          <p className=\"mt-3 text-sm\">\n            When youre all set, preview your registry and see exactly what your guests will see when theyre shopping for you.\n          </p>\n          <p className=\"mt-3 text-sm\">\n            Looks good? Personalize a URL and share it, so they can get shopping.\n          </p>\n        </>\n      )\n    },\n    title: 'Preview + Share',\n  },\n]\n\nexport const GROUP_GIFT_STEPS = [\n  {\n    selector: '[data-tut=\"group-gift-step-one\"]',\n    content: () => {\n      return (\n        <>\n          <h4 className=\"font-medium\">Group Gift</h4>\n          <p className=\"mt-3 text-sm\">\n            The more the merrier! Let guests know this is a group gift and they can contribute any amount theyd like towards its purchase. We'll keep you posted on who contributes and how much they give. After you receive the full amount, you can buy the gift at your convenience.\n          </p>\n        </>\n      )\n    },\n    title: 'Group Gift',\n    children: 'top',\n  },\n];\n\nexport const BOOKMARKLET_STEP_THREE_PRODUCT_LINK = \"https://usa.plantoys.com/en/product/374\"\n\nexport const ADD_GIFT_LINKS = {\n  NEW_ARRIVALS: \"https://monicaandandy.com/collections/new-items?refinementList%5Boptions.pattern%5D%5B0%5D=Pizza%20Day&refinementList%5Boptions.pattern%5D%5B1%5D=Pink%20Le%20Macaron%20%2B%20Pink%20Cabana%20Stripe&refinementList%5Boptions.pattern%5D%5B2%5D=Starry%20Constellation\",\n  POPULAR_GIFTS: \"https://monicaandandy.com/collections/baby-gifts\",\n\n  NURSERY: \"https://monicaandandy.com/collections/nursery-furniture-decor\",\n  ACTIVITY_EXPERIMENT_TOY : \"https://monicaandandy.com/collections/play-learning\",\n  GEAR_TRAVEL : \"https://monicaandandy.com/collections/gear-travel\",\n  FEEDING: \"\"\n}\n\nexport const IMPORT_REGISTRY_BABYLIST_TEXT = \"babylist\"\n\nexport const EMAIL_RE = /^[\\w-+\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$/g\n","const TOGGLE_MUST_HAVE = `\n   mutation ToggleMustHaveProduct($productId: Int!, $mustHaveValue: Boolean! $quantity: Int!) {\n    updateRegistryItems(registryItemId:$productId, registryItemData:{\n    quantity: $quantity,\n    mostWanted:$mustHaveValue,\n     }){\n      message\n    }\n   }\n`\n\nconst ADD_REGISTRY_ITEM = `\n   mutation addRegistryItems($registryId:Int!,$input: [StoreInput])\n   { addRegistryItems(registryId:$registryId,registryItems: $input) {\n     message\n     }\n   }\n`\n\nconst UPDATE_REGISTRY = `\n  mutation updateRegistryDetail($registryId: Int!, $input: RegistryInput!){\n    updateRegistry(registryId: $registryId, registryData: $input) {\n      registry{\n      name,\n      image{\n            id,image\n        }\n      }\n    }\n  }\n`;\n\nconst UPDATE_VIEW_REGISTRY_POISTION = `\n  mutation registryItemsOrder($registryId:Int!, $registryItems: [RegistryItemOrderInput]){\n    registryItemsOrder(registryId: $registryId,registryItems: $registryItems){\n      message\n    }\n  }\n`;\n\nconst UPDATE_REGISTRY_URL = `\nmutation updateRegistryUrl($registryId:Int!, $urlSlug:String!){\n  checkUpdateRegistryUrlSlug(registryId:$registryId,urlSlugInput:{\n    urlSlug:$urlSlug\n  }){\n    message,\n    registry{\n      id\n    }\n  }\n}\n`\n\nconst REGISTER_USER = `\nmutation register_user($name: String!, $email: String!, $password: String!){\n  registerUser(registerInput:{\n      name:$name,\n      email:$email,\n      password:$password\n  }\n ){\n    user{\n      id\n    },\n    token,\n    redirectionUrl\n  }\n}\n`\nconst SAVE_QUESTION_RESPONSE = `\nmutation addRegistryQuestionOption($registryId: Int!, $answers: [RegistryQuestionOptionInput]!){\n  addRegistryMultipleQuestionOption(registryId: $registryId, registryQuestionOptionInput: $answers){\n    message\n  }\n}\n`\n\nconst SAVE_REGISTRY_DATA = `\nmutation saveRegistryData($registryData:RegistryInput!, $registryItems:[StoreInput]){\n  importRegistry(registryData: $registryData, registryItems: $registryItems) {\n    message\n  }\n}\n`\n\nconst LOGIN_USER = `\nmutation login_user($email: String!, $password: String!, $returnTo: String){\n  loginUser(loginInput:{\n      email:$email,\n      password:$password\n  },\n  returnTo: $returnTo\n ){\n    user{\n      id\n    },\n    token,\n    redirectionUrl\n  }\n}\n`\n\nconst ADD_PARTNER_ACCOUNT = `\nmutation addPartner($partnerDetail: AddPartnerAccountInput!){\n  addPartnerAccount(addPartnerAccountInput:$partnerDetail){\n    message\n  }\n}\n`\n\nconst SAVE_UPDATED_CHECKLIST = `\nmutation addDesiredChecklistItemCount($registryId:Int!, $itemCountData:[DesiredItemCountInput]!){\n  addDesiredChecklistItemCount(registryId: $registryId, itemCountData: $itemCountData){\n    message\n  }\n}\n`\n\nconst UPDATE_REGISTRY_ITEMS = `\nmutation updateRegistryItem($itemId: Int!, $itemData: RegistryItemInput!){\n  updateRegistryItems(registryItemId: $itemId, registryItemData: $itemData) {\n    message\n  }\n}\n`\n\nconst SAVE_SINGLE_QUESTION_RESPONSE = `\nmutation updateOrCreateRegistrySingleQuestionOption($registryId:Int!, $registryQuestionOptionInput: RegistryQuestionOptionInput!, $returnTo: String){\n  updateOrCreateRegistrySingleQuestionOption(registryId: $registryId, registryQuestionOptionInput: $registryQuestionOptionInput, returnTo: $returnTo){\n    message,\n    redirectionUrl\n  }\n}\n`\n\nconst CREATE_REGISTRY = `\nmutation{\n  createRegistry{\n    registry{\n      id\n    },\n    message,\n    status\n  }\n}\n`\n\nconst TRACK_GIFTS_ADD_GIFT = `\nmutation addGift($registryId: Int!, $gifts: [GiftInput]){\n  addGift(registryId: $registryId, gifts: $gifts){\n   message,\n   status\n  }\n}\n`\n\nconst MARK_AS_PURCHASED_BY_GUEST = `\nmutation markAsPurchasedByGuest(\n  $registryUrlSlug: String!,\n  $registryItemId: Int!,\n  $isPurchased: Boolean!,\n  $storeName: String,\n  $purchasedQuantity: Int,\n  $contributionAmount: Float,\n  $name: String!,\n  $email: String!,\n  $giftMessage: String,\n  $orderNumber: String,\n  ){\n  markAsPurchasedByGuest(registryUrlSlug: $registryUrlSlug,registryItemId: $registryItemId ,purchasedRegistryItemInput:{\n    isPurchased: $isPurchased,\n    storeName: $storeName,\n    purchasedQuantity: $purchasedQuantity,\n    contributionAmount: $contributionAmount,\n    giftMessage: $giftMessage,\n    orderNo: $orderNumber,\n  },guestUserInput:{\n    name: $name,\n    email: $email\n  }){\n    message,\n    status\n  }\n}\n`;\n\nconst GIVE_GROUP_GIFT_GUEST = `\nmutation giveGroupGift(\n  $registryId: Int!,\n  $registryItemId: Int!,\n  $contributionAmount: Float!\n  ){\n  giveGroupGift(\n    registryId: $registryId,\n    registryItemId: $registryItemId,\n    contributionAmount: $contributionAmount\n    ){\n    message,\n    status,\n    variantId\n  }\n}\n`;\n\nconst CASH_FUND_GIFT_GUEST = `\nmutation cashFundGift(\n  $registryId: Int!,\n  $registryItemId: Int!,\n  $contributionAmount: Float!\n  ){\n    cashFundGift(\n    registryId: $registryId,\n    registryItemId: $registryItemId,\n    contributionAmount: $contributionAmount\n    ){\n    message,\n    status,\n    variantId\n  }\n}\n`;\n\nconst MARK_AS_PURCHASED = `\nmutation markAsPurchased($registryId: Int!, $registryItemId: Int!, $purchasedRegistryItemInput: PurchasedRegistryItemInput!, $guestUserInput: GuestUserInput!){\n  markAsPurchased(registryId:$registryId,registryItemId:$registryItemId,purchasedRegistryItemInput:$purchasedRegistryItemInput,guestUserInput:$guestUserInput){\n    message,\n    status\n  }\n}`;\n\nconst CASH_AND_LEAVE = `\nmutation cashInLieu(\n  $registryId: Int!,\n  $registryItemId: Int!,\n  $purchasedQuantity: Int!\n  ){\n    cashInLieu(\n    registryId: $registryId,\n    registryItemId: $registryItemId,\n    purchasedQuantity: $purchasedQuantity\n    ){\n    message,\n    status,\n    variantId\n  }\n}\n`;\n\nconst CASH_FUND_CONTRIBUTION_GUEST = `\nmutation cashFundContribution(\n  $registryUrlSlug: String!,\n  $registryItemId: Int!,\n  $isPurchased: Boolean!,\n  $contributionAmount: Float,\n  $name: String!,\n  $email: String!,\n  $giftMessage: String,\n  ){\n    cashFundContribution(registryUrlSlug: $registryUrlSlug,registryItemId: $registryItemId ,cashFundContributionInput:{\n    isPurchased: $isPurchased,\n    contributionAmount: $contributionAmount,\n    giftMessage: $giftMessage,\n  },guestUserInput:{\n    name: $name,\n    email: $email\n  }){\n    message,\n    status\n  }\n}\n`;\n\nconst RESERVE_REGISTRY_ITEM_GUEST = `\nmutation reserveRegistryItem(\n  $registryId: Int!,\n  $registryItemId: Int!,\n  $isReserved: Boolean!,\n  $isPurchased: Boolean!,\n  $purchasedQuantity: Int,\n  $name: String!,\n  $email: String!,\n  ){\n    reserveRegistryItem(registryId: $registryId,registryItemId: $registryItemId ,reservedRegistryItemInput:{\n    isReserved: $isReserved,\n    isPurchased: $isPurchased,\n    purchasedQuantity: $purchasedQuantity,\n  },\n    firstName: $name,\n    email: $email\n  ){\n    message,\n    status\n  }\n}\n`;\n\nconst REMOVE_RESERVED_ITEM_GUEST = `\nmutation removeReservedRegistryItem(\n  $registryId: Int!,\n  $registryItemId: Int!,\n  $email: String!\n  ){\n    removeReservedRegistryItem(\n    registryId: $registryId,\n    registryItemId: $registryItemId,\n    email: $email\n    ){\n    message,\n    status,\n  }\n}\n`;\n\nconst TOUR_UPDATE_FLAG = `\n  mutation updateRegistry($registryId: Int!,\n    $isMustHaveApplied: Boolean\n    $isBuildRegistryVisited: Boolean\n    $isViewAsGuestVisited: Boolean\n    $isFeaturedOrderApplied: Boolean\n    $isGroupGiftApplied: Boolean\n    $isViewRegistryVisited: Boolean\n    ) {\n    updateRegistry(registryId: $registryId, registryData:{\n      isMustHaveApplied: $isMustHaveApplied\n      isBuildRegistryVisited: $isBuildRegistryVisited\n      isViewAsGuestVisited: $isViewAsGuestVisited\n      isFeaturedOrderApplied: $isFeaturedOrderApplied\n      isGroupGiftApplied: $isGroupGiftApplied\n      isViewRegistryVisited: $isViewRegistryVisited\n    }){\n      registry{\n        id\n      }\n    }\n  }\n`;\n\nconst UPDATE_MA_BUTTON_CONFIGURED = `\n  mutation updateRegistry($registryId: Int!,\n    $isMaButtonConfigured: Boolean\n    ) {\n    updateRegistry(registryId: $registryId, registryData:{\n      isMaButtonConfigured: $isMaButtonConfigured\n    }){\n      registry{\n        id\n      }\n    }\n  }\n`\n\n\nexport {\n  TOGGLE_MUST_HAVE,\n  ADD_REGISTRY_ITEM,\n  UPDATE_REGISTRY,\n  UPDATE_VIEW_REGISTRY_POISTION,\n  UPDATE_REGISTRY_URL,\n  SAVE_REGISTRY_DATA,\n  REGISTER_USER,\n  SAVE_QUESTION_RESPONSE,\n  LOGIN_USER,\n  SAVE_UPDATED_CHECKLIST,\n  UPDATE_REGISTRY_ITEMS,\n  ADD_PARTNER_ACCOUNT,\n  SAVE_SINGLE_QUESTION_RESPONSE,\n  CREATE_REGISTRY,\n  TRACK_GIFTS_ADD_GIFT,\n  MARK_AS_PURCHASED_BY_GUEST,\n  GIVE_GROUP_GIFT_GUEST,\n  CASH_FUND_GIFT_GUEST,\n  MARK_AS_PURCHASED,\n  CASH_AND_LEAVE,\n  CASH_FUND_CONTRIBUTION_GUEST,\n  RESERVE_REGISTRY_ITEM_GUEST,\n  REMOVE_RESERVED_ITEM_GUEST,\n  TOUR_UPDATE_FLAG,\n  UPDATE_MA_BUTTON_CONFIGURED,\n};\n","import React from \"react\";\nimport \"./GiftCardPill.scss\";\n\nconst GiftCardPill = (props) => {\n  let className = \"\"\n  let text = \"\"\n  switch (props.variant) {\n    case \"purchased\":\n      className = \"track-gifts-purchased-pill\"\n      text = \"Purchased\"\n      break\n    case \"reserved\":\n      className = \"track-gifts-reserved-pill\"\n      text = \"Reserved\"\n      break\n    case \"received\":\n      className = \"track-gifts-received-pill\"\n      text = \"Received\"\n      break\n    case \"available\":\n      className = \"track-gifts-available-pill\"\n      text = props.text\n      break\n    default:\n      className = \"\"\n      break\n  }\n\n  return (\n    <div className={[\"track-gifts-pills px-2 d-inline-block\", className, props.className ? props.className : ''].join(\" \")}>\n      <span className=\"text-sm font-medium\">{props.amount != null || undefined ? `${props.amount}` : null} {text}</span>\n    </div>\n  )\n}\n\nexport default GiftCardPill","import React from 'react';\nimport \"./ButtonComponent.scss\";\n\nconst ButtonComponent = React.forwardRef((props, ref) => {\n  let btnVariantClass = \"\"\n  if (props.variant === 'primary') {\n    btnVariantClass = \"m-a-primary-btn\";\n  } else if (props.variant === 'secondary') {\n    btnVariantClass = \"m-a-secondary-btn\";\n  }\n\n  return <button\n    className={[\"m-a-btn\", btnVariantClass, props.className].join(\" \")}\n    onClick={props.onClick}\n    ref={ref}\n    disabled={props.disabled ? props.disabled : false}\n  >{props.children}</button>\n})\n\nexport default ButtonComponent;","import React from \"react\";\nimport \"./GiftStatusPill.scss\";\n\nconst GiftStatusPill = (props) => {\n  let pillVariantClass = \"\"\n\n  if (props.variant === 'purchased') {\n    pillVariantClass = \"purchased-pill\";\n  } else if (props.variant === 'reserved') {\n    pillVariantClass = \"reserved-pill\";\n  } else if (props.variant === 'group-gift') {\n    pillVariantClass = \"group-gift-pill\";\n  } else if (props.variant === 'default') {\n    //  Default is still needed\n    pillVariantClass = \"default-pill\";\n  } else {\n    pillVariantClass = \"default-pill\";\n  }\n\n  return (\n    <div\n      className={[\"gift-status-pill\", props.variant === 'group-gift' ? \"pl-5 pr-2\":\"px-3\", pillVariantClass, props.className ? props.className : \"\"].join(\" \")}>\n      <span className=\"text-sm font-medium\">{props.text}</span>\n    </div>\n  )\n}\n\nexport default GiftStatusPill;","import React from \"react\";\nimport './ProductDetailsModel.scss';\nimport GiftStatusPill from '../gift-status-pill/GiftStatusPill'\nimport {formatPrice} from \"../../../../utils/commonFunction\";\n\nconst ProductDetailsModel = (props) => {\n  return (\n    <div className=\"row product-details-model\">\n      <div className=\"col-12 product-details-image\">\n        {props.data?.imageUrl ?\n          <img className=\"product-img d-block mx-auto\" src={props.data?.imageUrl} alt={props.data?.title} />\n          :\n          <div className=\"added-card-no-product-image\" />\n        }\n        {props.data.mostWanted ?\n          <div\n            className=\"d-flex align-items-center product-details-have product-details-must-have-btn px-1 added-gift-must-have-active\">\n            <i className=\"icon mr-1 d-block heart-fill\" />\n            <p className=\"text-sm product-details-must-have-text\">Must Have</p>\n          </div>\n          : <></>}\n        <div className=\"px-3 mt-2\">\n          <p className=\"font-medium\">{props.data.title}</p>\n          {!props.data.item.isCashFund ? <a className=\"product-detail-link text-sm font-medium mt-1\" href={props.data.item.storeItemUrl} target=\"_blank\">View Details</a> : null}\n          <div className=\"d-flex align-items-baseline give-gift-model\">\n            {props.data.isGroupGift ?\n              <div className=\"guest-toggle-pills px-1 mr-1 d-flex align-items-center\">\n                <i className=\"guest-icon-active mr-1\" />\n                <span className=\"text-sm guest-icon-text\">Group Gift</span>\n              </div> : null}\n            {props.data.item.hideTotal ? null : <p className=\"mt-2\">{formatPrice(props.data.item.price)}</p>}\n          </div>\n          {props.data.note ?\n            <>\n              <p className=\"mt-2 text-sm product-note font-medium\">Note:</p>\n              <p className=\"text-sm product-note\">{props.data.note}</p>\n            </>\n            : null}\n          <div className=\"d-flex mt-2 mb-3 flex-wrap align-items-end\">\n            {props.data.quantityStatus.purchased_quantity ?\n              <div>\n                <GiftStatusPill className=\"mr-1\" variant=\"purchased\" text={props.data.quantityStatus.purchased_quantity + \" Purchased\"} />\n              </div>\n              : null}\n            {props.data.quantityStatus.reserved_quantity ?\n              <div className=\"mr-1 mt-md-1 mt-lg-0\">\n                <GiftStatusPill variant=\"reserved\" text={props.data.quantityStatus.reserved_quantity + \" Reserved\"} />\n              </div>\n              : null}\n            {props.data.quantityStatus.still_needed ?\n              <div className=\"mr-1 mt-md-1 mt-lg-1\">\n                <GiftStatusPill variant=\"default\" text={`${props.data.quantityStatus.still_needed} ${props.data.quantityStatus.purchased_quantity === 0 ? \" Requested\" : \" Still Needed\"}`} />\n              </div>\n              : null}\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default ProductDetailsModel;","import React from \"react\";\nimport \"./BuyNow.scss\";\nimport Button from \"../../../commons/components/button-component/ButtonComponent\";\nimport {LOCAL_STORAGE_TRACK_GIFT_BUY_KEY} from \"../../../../utils/constants\";\nimport {connect} from \"react-redux\";\nimport {setTrackGiftsRedirectionInfo} from \"../../TrackGiftsAction\";\nimport Modal from \"../../../commons/components/modal-component/ModalComponent\";\nimport ProductDetailsModel from \"../../../commons/components/product-details-model/ProductDetailsModel\";\nimport Counter from \"../../../commons/components/counter/Counter\";\nimport {toast} from \"react-toastify\";\nimport {EMAIL_RE} from \"utils/constants\";\n\nclass BuyNow extends React.Component {\n\n  state = {\n    show: false,\n    quantity: 1,\n    storeName: \"\",\n    orderNumber: \"\",\n    guestName: \"\",\n    guestEmail: \"\",\n    errors: {}\n  }\n\n  modalCloseHandler = () => {\n    this.setState({\n      show: false\n    })\n  }\n\n  incrementQuantity = () => {\n    this.setState((prevState, _) => ({\n      quantity: prevState.quantity + 1\n    }))\n  }\n\n  decrementQuantity = () => {\n    this.setState((prevState, _) => ({\n      quantity: prevState.quantity - 1 > 0 ? prevState.quantity - 1 : 1\n    }))\n  }\n\n  storeNameChangeHandler = ev => {\n    this.setState({\n      storeName: ev.target.value\n    })\n  }\n\n  orderNumberChangeHandler = ev => {\n    this.setState({\n      orderNumber: ev.target.value\n    })\n  }\n\n  guestNameChangeHandler = ev => {\n    let errorState = {...this.state.errors}\n    if (this.state.errors.guestName){\n      delete errorState.guestName\n    }\n\n    this.setState({\n      guestName: ev.target.value,\n      errors: errorState\n    })\n  }\n\n  guestEmailChangeHandler = ev => {\n    let errorState = {...this.state.errors}\n    if (this.state.errors.guestEmail){\n      delete errorState.guestEmail\n    }\n    this.setState({\n      guestEmail: ev.target.value,\n      errors: errorState\n    })\n  }\n\n  validData = () => {\n    let errors = {}\n    let valid = true\n    if (this.state.guestName.length <= 0){\n      errors['guestName'] = \"This field is mandatory\"\n      valid = false\n    }\n\n    if (this.state.guestEmail.length <= 0){\n      errors['guestEmail'] = \"This field is mandatory\"\n      valid = false\n    } else if (!this.state.guestEmail.match(EMAIL_RE)){\n        errors['guestEmail'] = \"Invalid Email address\"\n        valid = false\n    }\n\n    this.setState({\n      errors: errors\n    })\n    return valid\n  }\n\n  saveClickHandler = () => {\n    if (this.validData()) {\n      return false\n    }\n\n    //  TODO: Integrate Buy Now API\n  }\n\n  buyNowClickHandler = () => {\n    let createNewRecord = false\n    let updateProduct = false\n    let openModal = false\n    let jsonVisitedItems = JSON.parse(localStorage.getItem(LOCAL_STORAGE_TRACK_GIFT_BUY_KEY))\n\n    if (jsonVisitedItems) {\n      for (let item of jsonVisitedItems) {\n\n        // If registry doesn't match then delete old and create new record\n        if (Number(item.rId) === Number(this.props.stateRegistryInfo.id)) {\n          if (Number(item.pId) === Number(this.props.productData.id)) {\n\n            let productTimestamp = new Date(item.timestamp)\n            let currentDate = new Date()\n\n            // Resetting hours because only checking the dates\n            productTimestamp.setHours(0, 0, 0, 0)\n            currentDate.setHours(0, 0, 0, 0)\n\n            // Checking if current date is same as product time stamp\n            // After 1 day, this product entry will be invalid\n            if (currentDate - productTimestamp === 0) {\n              openModal = true\n            } else {\n              updateProduct = true;\n              createNewRecord = true;\n            }\n            break;\n          } else {\n            updateProduct = true;\n            createNewRecord = true;\n          }\n        } else {\n          createNewRecord = true;\n          break;\n        }\n      }\n    } else {\n      createNewRecord = true;\n    }\n\n    if (createNewRecord && !openModal) {\n      const newVisitedItemsData = {\n        rId: this.props.stateRegistryInfo.id,\n        pId: this.props.productData.id,\n        timestamp: new Date()\n      }\n\n      let foundProduct = false\n      let newData = null\n      if (jsonVisitedItems) {\n        newData = jsonVisitedItems.map(item => {\n          if (Number(item.rId) === Number(this.props.stateRegistryInfo.id) && Number(item.pId) === Number(this.props.productData.id)) {\n            foundProduct = true\n            return newVisitedItemsData\n          }\n          return item\n        })\n        if (!foundProduct) {\n          newData.push(newVisitedItemsData)\n        }\n      }\n\n      // Updating localStorage\n      localStorage.setItem(LOCAL_STORAGE_TRACK_GIFT_BUY_KEY, JSON.stringify(updateProduct ? newData : [newVisitedItemsData]))\n\n      //Setting Redirection Store\n      this.props.dispatch(setTrackGiftsRedirectionInfo({store: this.props.productData.item?.store?.storeName}))\n\n      window.open(this.props.productData.item.storeItemUrl, \"_blank\")\n\n    } else {\n      this.setState({\n        show: true\n      })\n    }\n  }\n\n  render() {\n    return (\n      <>\n        <div className={[\"track-gifts-buy-now\", this.props.className ? this.props.className : \"\"].join(\" \")}>\n          <Button\n            variant=\"primary\"\n            onClick={this.buyNowClickHandler}\n            className=\"px-3 py-1 font-medium text-body track-gifts-buy-now-button\"\n          >Buy Now</Button>\n        </div>\n        {this.state.show ?\n          <Modal\n            show={this.state.show}\n            title=\"Buy Now\"\n            footer={\n              <Button\n                variant=\"primary\"\n                onClick={this.saveClickHandler}\n                className=\"text-body font-medium py-1 px-3 track-gifts-buy-now-modal-button\"\n              >Save & Close</Button>\n            }\n            closeModal={this.modalCloseHandler}>\n            <div className=\"track-gifts-buy-now-modal\">\n              <div className=\"row\">\n\n                <div className=\"col-12 col-md-5 track-gifts-buy-now-product-detail\">\n                  <div className=\"mr-3\">\n                    <ProductDetailsModel data={this.props.productData}/>\n                  </div>\n                </div>\n\n                <div className=\"col-12 col-md-7\">\n                  <div className=\"ml-3 mr-5 pt-4\">\n\n                    <div className=\"row\">\n                      <div className=\"col\">\n                        <p className=\"text-body font-medium\">Give us some more details please</p>\n                        <p className=\"text-sm\">This info will help keep track of all their gifts.</p>\n                      </div>\n                    </div>\n\n                    <div className=\"row mt-4\">\n                      <div className=\"col\">\n                        <div className=\"track-gifts-buy-now-modal-input-container\">\n                          <label className=\"track-gifts-buy-now-label text-sm track-gifts-buy-now-required\">Name</label>\n                          <input\n                            type=\"text\"\n                            name=\"name\"\n                            value={this.state.guestName}\n                            onChange={(ev) => this.guestNameChangeHandler(ev)}\n                            className={[\"px-2 py-1 text-body track-gifts-buy-now-input w-100 mw-100\", this.state.errors.guestName ? 'track-gifts-buy-now-input-error' : ''].join(\" \")}\n                            placeholder=\"John Doe\"/>\n                          {this.state.errors.guestName ?\n                            <label\n                              className=\"text-sm track-gifts-buy-now-input-error-text\">{this.state.errors.guestName}</label>\n                            : null}\n                        </div>\n                      </div>\n                    </div>\n\n                    <div className=\"row mt-4\">\n                      <div className=\"col\">\n                        <div className=\"track-gifts-buy-now-modal-input-container\">\n                          <label className=\"track-gifts-buy-now-label text-sm track-gifts-buy-now-required\">Email\n                            Address</label>\n                          <input\n                            type=\"text\"\n                            name=\"user-email\"\n                            value={this.state.guestEmail}\n                            onChange={(ev) => this.guestEmailChangeHandler(ev)}\n                            className={[\"px-2 py-1 text-body track-gifts-buy-now-input w-100 mw-100\", this.state.errors.guestEmail ? 'track-gifts-buy-now-input-error' : ''].join(\" \")}\n                            placeholder=\"johndoe@email.com\"/>\n                            {this.state.errors.guestEmail ?\n                            <label\n                              className=\"text-sm track-gifts-buy-now-input-error-text\">{this.state.errors.guestEmail}</label>\n                            : null}\n                        </div>\n                      </div>\n                    </div>\n\n                    <div className=\"row mt-4\">\n                      <div className=\"col\">\n                        <div className=\"track-gifts-buy-now-modal-input-container\">\n                          <label className=\"track-gifts-buy-now-label text-sm\">Quantity</label>\n                          <Counter\n                            className=\"mt-1\"\n                            counter={this.state.quantity}\n                            incrementHandler={this.incrementQuantity}\n                            decrementHandler={this.decrementQuantity}/>\n                        </div>\n                      </div>\n                    </div>\n\n                    <div className=\"row mt-4\">\n                      <div className=\"col-6\">\n                        <div className=\"track-gifts-buy-now-modal-input-container\">\n                          <label className=\"track-gifts-buy-now-label text-sm\">Store Name</label>\n                          <input\n                            type=\"text\"\n                            name=\"storeName\"\n                            value={this.state.storeName}\n                            onChange={(ev) => this.storeNameChangeHandler(ev)}\n                            className=\"px-2 py-1 text-body track-gifts-buy-now-input w-100 mw-100\"\n                            placeholder=\"Eg. Target\"/>\n                        </div>\n                      </div>\n                      <div className=\"col-6\">\n                        <div className=\"track-gifts-buy-now-modal-input-container\">\n                          <label className=\"track-gifts-buy-now-label text-sm\">Order Number</label>\n                          <input\n                            type=\"text\"\n                            name=\"orderNumber\"\n                            value={this.state.orderNumber}\n                            onChange={(ev) => this.orderNumberChangeHandler(ev)}\n                            className=\"px-2 py-1 text-body track-gifts-buy-now-input w-100 mw-100\"\n                            placeholder=\"0012345\"/>\n                        </div>\n                      </div>\n                    </div>\n\n                  </div>\n                </div>\n\n              </div>\n            </div>\n          </Modal>\n          : null}\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  stateRegistryInfo: state.registry.info\n})\n\nexport default connect(\n  mapStateToProps\n)(BuyNow);","import React from \"react\";\nimport \"./MarkAsPurchased.scss\";\nimport {connect} from 'react-redux';\nimport Modal from \"../modal-component/ModalComponent\";\nimport ProductDetailsModel from \"../product-details-model/ProductDetailsModel\";\nimport Counter from \"../counter/Counter\";\nimport Button from \"../button-component/ButtonComponent\";\nimport {MARK_AS_PURCHASED} from \"../../../../api/mutations\";\nimport {graphQL} from \"../../../../api/axios\";\nimport {toast} from \"react-toastify\";\nimport {getTrackGiftsProduct, getCategories, getProducts} from \"../../../../utils/commonFunction\";\nimport {EMAIL_RE} from \"utils/constants\";\n\nclass MarkAsPurchased extends React.Component {\n\n  PRICE_REGEX = /(^[0-9]+(.?[0-9]{1,2})?$)/g\n  PRICE_REGEX_WHILE_ENTERING = /^[0-9]+.{0,1}[0-9]{0,2}?$/g\n\n  state = {\n    quantity: 1,\n    name: \"\",\n    email: \"\",\n    storeName: \"\",\n    orderNumber: \"\",\n    note: \"\",\n    errors: {},\n    contributionAmount: 0.00\n  }\n\n  backendErrors = {\n    contribution_amount: \"contributionAmount\",\n    name: \"name\",\n    email: \"email\"\n  }\n\n  closeModalHandler = () => {\n    this.setState({\n      quantity: 1,\n      name: \"\",\n      email: \"\",\n      storeName: \"\",\n      orderNumber: \"\",\n      note: \"\",\n      errors: {},\n      contributionAmount: 0.00\n    })\n    this.props.closeModal()\n  }\n\n  incrementQuantity = () => {\n    this.setState((prevState, _) => ({\n      quantity: prevState.quantity + 1 > this.props.data.quantityStatus.still_needed ? prevState.quantity : prevState.quantity + 1\n    }))\n  }\n\n  decrementQuantity = () => {\n    this.setState((prevState, _) => ({\n      quantity: prevState.quantity - 1 > 0 ? prevState.quantity - 1 : 1\n    }))\n  }\n\n  validData = () => {\n    let errors = {}\n    let valid = true\n    if (this.state.name.length <= 0) {\n      errors['name'] = \"This field is mandatory\"\n      valid = false\n    }\n\n    if (this.state.email.length <= 0) {\n      errors['email'] = \"This field is mandatory\"\n      valid = false\n    } else if (!this.state.email.match(EMAIL_RE)) {\n      errors['email'] = \"Invalid Email address\"\n      valid = false\n    }\n\n    if (this.props.data.isGroupGift) {\n      if (this.state.contributionAmount.length <= 0) {\n        errors['contributionAmount'] = \"This field is mandatory\"\n        valid = false\n      } else if (!String(this.state.contributionAmount).match(this.PRICE_REGEX) && Number(this.state.contributionAmount) <= 0) {\n        errors['contributionAmount'] = \"Please enter valid amount\"\n        valid = false\n      }\n    }\n\n    this.setState({\n      errors: errors\n    })\n    return valid\n  }\n\n  // Event Handlers\n  nameChangeHandler = (ev) => {\n    let errors = {...this.state.errors}\n    if (errors.name) {\n      delete errors.name\n    }\n\n    this.setState({\n      name: ev.target.value,\n      errors: errors\n    })\n  }\n\n  emailChangeHandler = (ev) => {\n    let errors = {...this.state.errors}\n    if (errors.email) {\n      delete errors.email\n    }\n\n    this.setState({\n      email: ev.target.value,\n      errors: errors\n    })\n  }\n\n  storeNameChangeHandler = (ev) => {\n    this.setState({\n      storeName: ev.target.value\n    })\n  }\n\n  orderNumberChangeHandler = (ev) => {\n    this.setState({\n      orderNumber: ev.target.value\n    })\n  }\n\n  noteChangeHandler = (ev) => {\n    this.setState({\n      note: ev.target.value\n    })\n  }\n\n  contributionAmountChangeHandler = (ev) => {\n    ev.persist();\n    let errors = {...this.state.errors}\n    if (errors.contributionAmount) {\n      delete errors.contributionAmount\n    }\n\n    if ((ev.target.value.length > 0 && (Number(ev.target.value[ev.target.value.length - 1]) >= 0 || ev.target.value[ev.target.value.length - 1] === \".\")) && ev.target.value.match(this.PRICE_REGEX_WHILE_ENTERING) || ev.target.value.length <= 0) {\n      this.setState({\n        contributionAmount: ev.target.value,\n        errors: errors\n      })\n    }\n  }\n\n  saveClickHandler = () => {\n    if (!this.validData()) {\n      return false\n    }\n\n    let reqData = {\n      query: MARK_AS_PURCHASED,\n      variables: {\n        registryId: this.props.stateRegistryInfo.id,\n        registryItemId: this.props.data.id,\n        purchasedRegistryItemInput: {\n          isPurchased: true,\n          storeName: this.state.storeName,\n          orderNo: this.state.orderNumber,\n          giftMessage: this.state.note\n        },\n        guestUserInput: {\n          name: this.state.name,\n          email: this.state.email\n        }\n      }\n    }\n\n    if (this.props.data.isGroupGift) {\n      reqData.variables.purchasedRegistryItemInput['contributionAmount'] = this.state.contributionAmount\n    } else {\n      reqData.variables.purchasedRegistryItemInput['purchasedQuantity'] = this.state.quantity\n    }\n\n    graphQL(reqData).then(res => {\n      if (res.data.data && res.data.data.markAsPurchased) {\n        toast.success(<p><b>{this.props.data.title}</b> updated successfully.</p>)\n\n        //Fetching all current products\n        getTrackGiftsProduct(true, this.props.stateTrackGiftsFilters, this.props.stateTrackGiftsProducts, this.props.stateTrackGiftsPagination, this.props.stateTrackGiftsView, this.props.stateRegistryInfo, this.props.stateTrackGiftsSearch, this.props.dispatch, this.props.stateTrackGiftsProducts.length)\n        getCategories(this.props.stateRegistryInfo.id, this.props.dispatch)\n        getProducts(this.props.stateRegistryInfo.id, this.props.dispatch)\n        this.closeModalHandler()\n      }\n    }).catch(err => {\n      if (err.response && err.response.data && err.response.data.errors) {\n        for (let error of err.response.data.errors) {\n          if (error.errors && Object.keys(error.errors).length > 0) {\n            for (let fieldError of Object.keys(error.errors)) {\n              if (Object.keys(this.backendErrors).indexOf(fieldError) !== -1) {\n                let errorState = {...this.state.errors}\n                if (error.errors[fieldError].length > 0) {\n                  errorState[this.backendErrors[fieldError]] = error.errors[fieldError][0]\n                } else {\n                  toast.error(\"Some error occurred while updating product.\")\n                }\n                this.setState({\n                  errors: errorState\n                })\n              }\n            }\n          } else {\n            toast(error.message, \"error\")\n          }\n        }\n      } else {\n        toast.error(\"Some error occurred while updating product.\")\n      }\n    })\n  }\n\n  render() {\n    return (\n      <>\n        <Modal\n          noBodyPadding={true}\n          show={this.props.show}\n          title={this.props.data.isGroupGift ? \"Record a contribution\" : \"Record a purchase\"}\n          footer={(\n            <Button\n              variant=\"primary\"\n              disabled={this.state.name.length <= 0 || this.state.email.length <= 0 || (this.props.data.isGroupGift && (this.state.contributionAmount.length <= 0 || Number(this.state.contributionAmount) <= 0))}\n              onClick={this.saveClickHandler}\n              className=\"font-medium text-body px-3 py-1\">Save & Close</Button>\n          )}\n          closeModal={this.closeModalHandler}>\n\n          <div className=\"row add-gift-another-store mark-as-purchased-modal\">\n            <div className=\"col-12 col-md-5 pt-4 add-gift-image-select\">\n              <div className=\"mr-3\">\n                <ProductDetailsModel data={this.props.data}/>\n              </div>\n            </div>\n            <div className=\"col-12 col-md-7 pt-4\">\n              <div className=\"mx-3\">\n\n                <div className=\"row\">\n                  <div className=\"col\">\n                    <p className=\"text-body font-medium\">Already got it?</p>\n                    <p className=\"text-sm\">Let guests know, so you dont get another.</p>\n                  </div>\n                </div>\n\n                <div className=\"row\">\n                  <div className=\"col mt-4 m-a-input-container\">\n                    <p className=\"text-sm font-medium add-gift-store-label ma-input-required\">Name</p>\n                    <input\n                      className={[\"w-100 mt-1 px-2 py-1 mb-0\", this.state.errors.name ? \"mark-as-purchased-error\" : \"\"].join(\" \")}\n                      type='text'\n                      placeholder='John Doe'\n                      value={this.state.name}\n                      onChange={(ev) => this.nameChangeHandler(ev)}\n                    />\n                    {this.state.errors.name ?\n                      <label className=\"text-sm mark-as-purchased-error-text\">{this.state.errors.name}</label>\n                      : null}\n                  </div>\n                </div>\n\n                <div className=\"row\">\n                  <div className=\"col mt-4 m-a-input-container\">\n                    <p className=\"text-sm font-medium add-gift-store-label ma-input-required\">Email Address</p>\n                    <input\n                      className={[\"w-100 mt-1 px-2 py-1 mb-0\", this.state.errors.email ? \"mark-as-purchased-error\" : \"\"].join(\" \")}\n                      type='text'\n                      placeholder='johndoe@email.com'\n                      value={this.state.email}\n                      onChange={(ev) => this.emailChangeHandler(ev)}\n                    />\n                    {this.state.errors.email ?\n                      <label className=\"text-sm mark-as-purchased-error-text\">{this.state.errors.email}</label>\n                      : null}\n                  </div>\n                </div>\n\n                {this.props.data.isGroupGift ?\n                  <div className=\"row\">\n                    <div className=\"col mt-4 m-a-input-container\">\n                      <p className=\"text-sm font-medium add-gift-store-label ma-input-required\">Amount</p>\n                      <div className=\"price-input mt-1\">\n                        <input\n                          type=\"text\"\n                          className={[\"w-100 pr-2 py-1 text-body pl-5 mb-0\", this.state.errors.contributionAmount ? \"mark-as-purchased-error\" : \"\"].join(\" \")}\n                          value={this.state.contributionAmount}\n                          onChange={(ev) => this.contributionAmountChangeHandler(ev)}\n                        />\n                      </div>\n                      {this.state.errors.contributionAmount ?\n                        <label\n                          className=\"text-sm mark-as-purchased-error-text\">{this.state.errors.contributionAmount}</label>\n                        : null}\n                    </div>\n                  </div>\n                  :\n                  <>\n                    <div className=\"row\">\n                      <div className=\"col mt-4 m-a-input-container\">\n                        <p className=\"text-sm font-medium add-gift-store-label\">Quantity</p>\n                        <Counter\n                          className=\"mt-2\"\n                          counter={this.state.quantity}\n                          incrementHandler={this.incrementQuantity}\n                          decrementHandler={this.decrementQuantity}\n                        />\n                      </div>\n                    </div>\n\n                    <div className=\"row\">\n                      <div className=\"col-6 mt-4 m-a-input-container\">\n                        <p className=\"text-sm font-medium add-gift-store-label\">Store Name</p>\n                        <input\n                          className=\"w-100 mt-1 px-2 py-1 mb-0\"\n                          type='text'\n                          placeholder='Eg. Target'\n                          value={this.state.storeName}\n                          onChange={(ev) => this.storeNameChangeHandler(ev)}\n                        />\n                      </div>\n                      <div className=\"col-6 mt-4 m-a-input-container\">\n                        <p className=\"text-sm font-medium add-gift-store-label\">Order Number</p>\n                        <input\n                          className=\"w-100 mt-1 px-2 py-1 mb-0\"\n                          type='text'\n                          placeholder='0012345'\n                          value={this.state.orderNumber}\n                          onChange={(ev) => this.orderNumberChangeHandler(ev)}\n                        />\n                      </div>\n                    </div>\n                  </>\n                }\n\n\n                <div className=\"row\">\n                  <div className=\"col mt-4 m-a-input-container\">\n                    <p className=\"text-sm font-medium add-gift-store-label\">Gift Message</p>\n                    <textarea className=\"w-100 mt-1 text-body p-1 mb-2 mark-as-purchased-resize-textarea\"\n                              rows=\"2\"\n                              placeholder=\"Write a message for gift receiver\"\n                              value={this.state.note}\n                              onChange={(ev) => this.noteChangeHandler(ev)}\n                    />\n                  </div>\n                </div>\n\n              </div>\n            </div>\n          </div>\n\n        </Modal>\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  stateTrackGiftsFilters: state.trackGifts.filters,\n  stateTrackGiftsView: state.trackGifts.activeView,\n  stateTrackGiftsProducts: state.trackGifts.products,\n  stateTrackGiftsPagination: state.trackGifts.paginationInfo,\n  stateRegistryInfo: state.registry.info,\n  stateTrackGiftsSearch: state.trackGifts.search\n})\n\nexport default connect(\n  mapStateToProps\n)(MarkAsPurchased);","import React from \"react\";\nimport \"./MarkPurchased.scss\";\nimport MarkAsPurchased from \"../../../commons/components/mark-as-purchased/MarkAsPurchased\";\n\nclass MarkPurchased extends React.Component{\n  state = {\n    show: false\n  }\n\n  modalCloseHandler = () => {\n    this.setState({\n      show: false\n    })\n  }\n\n  openPurchasedModal = (ev) => {\n    ev.preventDefault();\n    this.setState({\n      show: true\n    })\n  }\n\n  render() {\n    return (\n      <div>\n        <a\n          href=\"#\"\n          className=\"mark-purchased-link font-medium text-sm\"\n          onClick={(ev) => this.openPurchasedModal(ev)}>{`Record a ${this.props.data.isGroupGift ? 'contribution' : 'purchase'}`}</a>\n        <MarkAsPurchased\n          show={this.state.show}\n          closeModal={this.modalCloseHandler}\n          data={this.props.data}\n        />\n      </div>\n    );\n  }\n}\n\nexport default MarkPurchased;","import React from \"react\";\nimport \"./GiftCard.scss\";\nimport GiftCardPill from \"../gift-card-pill/GiftCardPill\";\nimport {CURRENCY} from \"../../../../utils/constants\";\nimport BuyNow from \"../buy-now/BuyNow\";\nimport MarkPurchased from \"../mark-purchased/MarkPurchased\";\nimport moment from 'moment';\nimport Modal from \"../../../commons/components/modal-component/ModalComponent\";\nimport {formatPrice} from \"../../../../utils/commonFunction\";\n\nclass GiftCard extends React.Component {\n  friendsDetailRef = React.createRef()\n\n  state = {\n    toggleGiftModalHandler: false,\n    toggleFriendsDetialsModalHandler: false\n  }\n\n  toggleFriendsDetail = e => {\n    e.preventDefault()\n    if (this.friendsDetailRef.current) {\n      this.friendsDetailRef.current.classList.toggle(\"track-gifts-show-friends-detail\")\n    }\n  }\n\n  giftModalCloseHandler = () => {\n    this.setState({toggleGiftModalHandler: false})\n  }\n\n  giftModalOpenHandler = () => {\n    this.setState({toggleGiftModalHandler: true})\n  }\n\n  friendsDetailsOpenModalHandler = () => {\n    this.setState({toggleFriendsDetialsModalHandler: true})\n  }\n\n  friendsDetailsCloseModalHandler = () => {\n    this.setState({toggleFriendsDetialsModalHandler: false})\n  }\n\n  render() {\n    return (\n      <div className=\"baby-registry-track-gifts-card pt-3 pb-2 pb-md-4\">\n        <div className=\"row\">\n\n          <div className=\"col-5 col-sm-3 col-md-1\">\n            {this.props.data.imageUrl ?\n              <img src={this.props.data.imageUrl} className=\"track-gifts-card-image\" />\n              :\n              <div className=\"track-gifts-no-product-image\" />\n            }\n          </div>\n\n          <div className=\"col-12 col-md-5 my-3 my-md-0\">\n            <div className=\"track-gifts-product-description pl-1\">\n              <div className=\"d-flex\">\n                <h4\n                  className={[\"font-medium track-gifts-product-title\", !this.props.data.isGroupGift && this.props.data.purchasedRegistryItem.length > 0 && this.props.data.purchasedRegistryItem[0].giftMessage && this.props.data.purchasedRegistryItem[0].guestUser ? \"mr-5\" : \"mr-9\"].join(\" \")}>\n                  {this.props.data.title}\n                </h4>\n                {!this.props.data.isGroupGift && this.props.data.purchasedRegistryItem.length > 0 && this.props.data.purchasedRegistryItem[0].giftMessage && this.props.data.purchasedRegistryItem[0].guestUser ?\n                  <button className=\"ml-auto track-gifts-gift-message-container d-none d-md-inline-block text-left\">\n                    <div className=\"track-gifts-gift-message-content p-5\">\n                      <h3>Gift Message</h3>\n                      <p\n                        className=\"text-body mt-5 track-gifts-gift-message\">{this.props.data.purchasedRegistryItem[0].giftMessage}</p>\n                      <p\n                        className=\"mt-3 text-sm font-medium\">{`${this.props.data.purchasedRegistryItem[0].guestUser.firstName} ${this.props.data.purchasedRegistryItem[0].guestUser.lastName ? `${this.props.data.purchasedRegistryItem[0].guestUser.lastName[0]}.` : ''}`}</p>\n                    </div>\n                  </button>\n                  : null}\n\n\n              </div>\n              {this.props.data.purchasedRegistryItem.length > 0 && (this.props.data.purchasedRegistryItem[0].storeName || this.props.data.purchasedRegistryItem[0].orderNo) ?\n                <p\n                  className=\"text-body\">{this.props.data.purchasedRegistryItem[0].storeName ? this.props.data.purchasedRegistryItem[0].storeName : ''} {this.props.data.purchasedRegistryItem[0].orderNo ? '| #' + this.props.data.purchasedRegistryItem[0].orderNo : ''}</p>\n                : null}\n\n              {this.props.data.isGroupGift ?\n                <div className=\"mt-2\">\n                  {this.props.data.purchasedRegistryItem.length > 0 ?\n                    <div>\n                      <span\n                        className=\"text-sm font-medium\">{formatPrice(this.props.data.purchasedRegistryItem[0].groupGift.amountReceived)}</span>\n                      <span className=\"text-sm\">{` of ${formatPrice(this.props.data.quantity * this.props.data.item.price)} received`}</span>\n                      <div className=\"track-gifts-cash-fund-progress-bar\">\n                        <div className=\"track-gifts-cash-fund-progress mw-100\"\n                          style={{width: `${(this.props.data.purchasedRegistryItem[0].groupGift.amountReceived / (this.props.data.quantity * this.props.data.item.price)) * 100}%`}} />\n                      </div>\n                    </div>\n                    :\n                    <GiftCardPill variant=\"available\" text={`${formatPrice(this.props.data.quantity * this.props.data.item.price)} Requested`}/>\n                  }\n\n                </div>\n                :\n                <div className=\"mt-1 mt-md-2\">\n                  {this.props.data.purchasedRegistryItem.length > 0 && this.props.data.purchasedRegistryItem[0].isPurchased ? <GiftCardPill variant=\"purchased\" className=\"mr-1\" /> : null}\n                  {this.props.data.purchasedRegistryItem.length > 0 && this.props.data.purchasedRegistryItem[0].isReserved ? <GiftCardPill variant=\"reserved\" className=\"mr-1\" /> : null}\n                  {this.props.data.purchasedRegistryItem.length <= 0 ? <GiftCardPill variant=\"available\" text={`${this.props.data.quantityStatus ? this.props.data.quantity - this.props.data.quantityStatus.purchased_quantity : this.props.data.quantity} Requested`}/> : null}\n                  {this.props.data.isCashAcceptedOnly && this.props.data.isAmountReceived ?\n                    <GiftCardPill variant=\"received\" amount={formatPrice(this.props.data.item.price)} /> : null}\n                  {/* TODO: Add date of purchased */}\n                  {this.props.data.purchasedRegistryItem.length > 0 && this.props.data.purchasedRegistryItem[0].createdTs ?\n                    <span\n                      className=\"text-sm track-gifts-purchased-time\">{moment(this.props.data.purchasedRegistryItem[0].createdTs).format('MMM DD, YYYY')}</span>\n                    : null}\n                </div>\n              }\n\n\n            </div>\n          </div>\n\n          <div className=\"col-12 col-md-6 d-flex flex-md-row flex-column\">\n            {this.props.data.isGroupGift ?\n              // Group Gift\n\n              (this.props.data.purchasedRegistryItem.length > 0 ?\n                <div className=\"track-gifts-group-users-details \">\n                  <p\n                    className=\"text-sm font-medium\">{`${this.props.data.purchasedRegistryItem[0].otherUsers.length} friend${this.props.data.purchasedRegistryItem[0].otherUsers.length > 1 ? 's':''}`}</p>\n                  <a href=\"#\" className=\"track-gifts-view-friends-link text-sm d-none d-md-inline-block font-medium\"\n                    onClick={(e) => this.toggleFriendsDetail(e)}>View</a>\n                  <a href=\"#\" className=\"track-gifts-view-friends-link text-sm d-inline-block d-md-none font-medium\"\n                    onClick={this.friendsDetailsOpenModalHandler}>View</a>\n                  <div ref={this.friendsDetailRef} className=\"track-gifts-friends-detail pt-3 pb-1\">\n                    <div className=\"friends-detail-header d-flex pb-2 px-3\">\n                      <p\n                        className=\"text-sm font-medium\">{`${this.props.data.purchasedRegistryItem[0].otherUsers.length} friend${this.props.data.purchasedRegistryItem[0].otherUsers.length > 1 ? 's':''}`}</p>\n                      <i className=\"icon-close close-friends-detail-icon ml-auto\"\n                        onClick={(e) => this.toggleFriendsDetail(e)} />\n                    </div>\n                    <div className=\"px-3\">\n                      <table className=\"m-a-revert-all friends-detail-container\">\n                        {this.props.data.purchasedRegistryItem[0].otherUsers.map(user => (\n\n                          <tr className=\"friend-detail m-a-revert-all\">\n                            <td className=\"m-a-revert-all p-0\">\n                              <div className=\"py-2 mr-8\">\n                                <p\n                                  className=\"text-sm font-medium\">{`${user.guestUser.firstName ? user.guestUser.firstName : ''} ${user.guestUser.lastName ? user.guestUser.lastName : ''}`}</p>\n                                <p className=\"text-sm friend-user-email\">{user.guestUser.email}</p>\n                              </div>\n                            </td>\n                            <td className=\"text-right m-a-revert-all p-0\">\n                              <p\n                                className=\"text-sm font-medium friend-contribution-amount mr-1\">{formatPrice(user.contributionAmount)}</p>\n                            </td>\n                            <td className=\"m-a-revert-all p-0\">\n                              {user.createdTs ?\n                                <p\n                                  className=\"text-sm track-gifts-purchased-time\">{moment(user.createdTs).format('MMM DD, YYYY')}</p>\n                                : null}\n                            </td>\n                          </tr>\n                        ))}\n                      </table>\n                    </div>\n                  </div>\n                </div>\n                : null)\n              :\n              // Single guest User\n              (this.props.data.purchasedRegistryItem.length > 0 ?\n                <div className=\"track-gifts-user-detail d-flex ml-1 ml-md-0\">\n                  <div>\n                    <p\n                      className=\"text-sm font-medium\">{`${this.props.data.purchasedRegistryItem[0].guestUser.firstName ? this.props.data.purchasedRegistryItem[0].guestUser.firstName : ''} ${this.props.data.purchasedRegistryItem[0].guestUser.lastName ? this.props.data.purchasedRegistryItem[0].guestUser.lastName : ''}`}</p>\n                    <p\n                      className=\"text-sm track-gifts-user-email\">{this.props.data.purchasedRegistryItem[0].guestUser.email}</p>\n                  </div>\n                  {!this.props.data.isGroupGift && this.props.data.purchasedRegistryItem.length > 0 && this.props.data.purchasedRegistryItem[0].giftMessage && this.props.data.purchasedRegistryItem[0].guestUser ?\n                    <button className=\"ml-auto track-gifts-gift-message-container text-left d-inline-block d-md-none\" onClick={this.giftModalOpenHandler}>\n                    </button>\n                    : null}\n                </div>\n                : null)\n\n            }\n            <div className=\"ml-auto d-flex align-items-baseline\">\n\n              {(!this.props.data.isPurchased && this.props.data.purchasedRegistryItem.length <= 0) || (this.props.data.isGroupGift && !this.props.data.isPurchased)?\n                <MarkPurchased data={this.props.data} className=\"mt-3 mt-md-0\" />\n                : null}\n\n              {this.props.data.isCashAcceptedOnly && this.props.data.isAmountReceived?\n                <BuyNow productData={this.props.data} className=\"ml-2 mt-3 mt-md-0\" /> : null}\n\n            </div>\n          </div>\n        </div>\n        {!this.props.data.isGroupGift && this.props.data.purchasedRegistryItem.length > 0 && this.props.data.purchasedRegistryItem[0].giftMessage && this.props.data.purchasedRegistryItem[0].guestUser ?\n          <Modal\n            show={this.state.toggleGiftModalHandler}\n            title=\"Gift Message\"\n            closeModal={this.giftModalCloseHandler}>\n            <p\n              className=\"text-body track-gifts-gift-message\">{this.props.data.purchasedRegistryItem[0].giftMessage}</p>\n            <p\n              className=\"mt-3 text-sm font-medium\">{`${this.props.data.purchasedRegistryItem[0].guestUser.firstName} ${this.props.data.purchasedRegistryItem[0].guestUser.lastName ? `${this.props.data.purchasedRegistryItem[0].guestUser.lastName[0]}.` : ''}`}</p>\n\n          </Modal> : null}\n        {this.props.data.isGroupGift && this.props.data.purchasedRegistryItem.length > 0 ?\n          <Modal\n            show={this.state.toggleFriendsDetialsModalHandler}\n            title={`${this.props.data.purchasedRegistryItem[0].otherUsers.length} Friends`}\n            closeModal={this.friendsDetailsCloseModalHandler}>\n            {this.props.data.purchasedRegistryItem[0].otherUsers.map(user => (\n              <div className=\"friend-detail-modal-container mb-3 pb-3\">\n                <div className=\"p-0\">\n                  <div className=\"py-2 mr-8\">\n                    <p\n                      className=\"text-sm font-medium\">{`${user.guestUser.firstName ? user.guestUser.firstName : ''} ${user.guestUser.lastName ? user.guestUser.lastName : ''}`}</p>\n                    <p className=\"text-sm friend-user-email\">{user.guestUser.email}</p>\n                  </div>\n                </div>\n                <div className=\"d-flex\">\n                  <div className=\"text-right p-0\">\n                    <p\n                      className=\"text-sm font-medium friend-contribution-amount mr-1\">{`${CURRENCY}${user.contributionAmount}`}</p>\n                  </div>\n                  <div className=\"p-0\">\n                    {user.createdTs ?\n                      <p\n                        className=\"text-sm track-gifts-purchased-time\">{moment(user.createdTs).format('MMM DD, YYYY')}</p>\n                      : null}\n                  </div>\n                </div>\n              </div>\n            ))}\n          </Modal> : null}\n      </div>\n    );\n  }\n}\n\nexport default GiftCard;","import React from \"react\";\nimport {connect} from \"react-redux\";\nimport {TRACK_GIFTS_VIEWS} from \"../../components/view-by/ViewBy\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport {getTrackGiftsProduct} from \"../../../../utils/commonFunction\";\nimport GiftCard from \"../../components/gift-card/GiftCard\";\nimport \"./TrackGiftContent.scss\";\n\nexport const LOCAL_2_API_FILTERS_MAPPING = {\n  4: \"totalAvailable\",\n  1: \"totalPurchased\",\n  3: \"totalReserved\",\n  2: \"totalFundsReceived\",\n  5: \"totalReturned\"\n}\n\n// Component for No registry Gifts Found\nconst NoRecordFound = () => {\n  return (\n    <h2>No Gifts Found...</h2>\n  )\n}\n\nclass TrackGiftsContent extends React.Component {\n\n  state = {\n    currentView: null\n  }\n\n  fetchAvailableFromAddedProducts = (products) => {\n    let availableProducts = []\n    availableProducts = products.filter(product => {\n      if (product.isGroupGift) {\n        return !product.isPurchased\n      } else {\n        return !product.isPurchased && !product.isReserved\n      }\n    })\n    availableProducts = availableProducts.map(product => {\n      let newProduct = {...product}\n      newProduct.purchasedRegistryItem = []\n      return newProduct\n    })\n    return availableProducts\n  }\n\n  // Separating available products\n  getAvailableProduct = (stateProducts) => {\n    let availableProducts = []\n    let otherSelected = false\n\n    let currentFilterCount = [...this.props.stateTrackGiftsFilters].filter(filter => filter.count > 0).length\n    let unselectedCount = [...this.props.stateTrackGiftsFilters].filter(filter => filter.count > 0 && !filter.selected).length\n\n    if (currentFilterCount === unselectedCount) {\n      otherSelected = true\n      availableProducts = this.fetchAvailableFromAddedProducts(stateProducts)\n    } else {\n      for (let filter of this.props.stateTrackGiftsFilters) {\n        if (filter.id === 4 && filter.selected) {\n          availableProducts = this.fetchAvailableFromAddedProducts(stateProducts)\n        } else if (filter.count > 0 && filter.selected) {\n          otherSelected = true\n        }\n      }\n    }\n\n\n    return {otherSelected, availableProducts}\n  }\n\n  // Getting unique objects from a list\n  getUniqueListBy = (arr, key) => {\n    return [...new Map(arr.map(item => [item[key], item])).values()]\n  }\n\n  getProductsBasedOnView = (view, stateProducts) => {\n    let products = []\n    let guestUsersEmails = []\n    let refinedProducts = []\n    let skipCashFund = false;\n\n    for (const product of [...stateProducts]) {\n      if (product.purchasedRegistryItem.length <= 0) {\n        refinedProducts.push(product)\n      } else {\n        let userProducts = []\n        let currentProduct = {...product}\n        skipCashFund = false;\n        for (let user of product.purchasedRegistryItem) {\n          if (skipCashFund) {\n            skipCashFund = false\n            break\n          }\n          let newUsers = {...user}\n          let otherUsers = product.purchasedRegistryItem\n          newUsers['otherUsers'] = otherUsers\n          currentProduct.purchasedRegistryItem = [newUsers]\n          userProducts.push({...currentProduct})\n          currentProduct = {...product}\n          if (product.isGroupGift && view?.id === TRACK_GIFTS_VIEWS[0].id) {\n            skipCashFund = true\n          }\n        }\n        refinedProducts.push(...userProducts)\n      }\n    }\n\n    if (view?.id === TRACK_GIFTS_VIEWS[0].id) { // [0] index is Gifts\n      //  Gifts View\n      for (const product of refinedProducts) {\n        if (product.purchasedRegistryItem.length > 0) {\n          products.push({...product})\n        }\n      }\n\n      let {otherSelected, availableProducts} = this.getAvailableProduct(stateProducts)\n\n      // Show Available products in Gifts View only if Available Filter is applied\n      if (!otherSelected && availableProducts.length > 0) {\n        // If only available is selected then show only available products\n        let id2Remove = []\n        let newProducts = products.filter(product => {\n          if (product.isGroupGift && product.purchasedRegistryItem.length > 0) {\n            id2Remove.push(product.id)\n            return true\n          }\n          return false\n        })\n        products = [...newProducts, ...availableProducts.filter(product => id2Remove.indexOf(product.id) === -1)]\n      } else if (availableProducts.length > 0) {\n        let id2Remove = []\n        let newProducts = products.filter(product => {\n          if (product.isGroupGift && product.purchasedRegistryItem.length > 0) {\n            id2Remove.push(product.id)\n            return true\n          }\n          return false\n        })\n        products.push(...availableProducts.filter(product => id2Remove.indexOf(product.id) === -1))\n      }\n\n    } else {\n\n      let partiallyPurchasedGroupGift = []\n\n      //  Gift Giver View\n      for (const product of refinedProducts) {\n\n        if (product.purchasedRegistryItem.length > 0) {\n          // Grouping Product\n          if (product.isGroupGift) {\n            if (product.purchasedRegistryItem.length > 0 && !product.isPurchased) {\n              partiallyPurchasedGroupGift.push({...product})\n            }\n\n            // Looping through each groupGift User\n            for (const groupUser of product.purchasedRegistryItem) {\n\n              // Removing unsearched user from group gift\n              if (this.props.stateTrackGiftsSearch.searched) {\n                if (groupUser.guestUser) {\n                  const user = groupUser.guestUser;\n                  const searchedText = this.props.stateTrackGiftsSearch.searchText;\n                  if (!(user.email && user.email.toLowerCase().match(searchedText)) && !(user.firstName && user.firstName.toLowerCase().match(searchedText)) && !(user.lastName && user.lastName.toLowerCase().match(searchedText))) {\n                    continue\n                  }\n                }\n              }\n\n              if (guestUsersEmails.indexOf(groupUser.guestUser.email) !== -1) {\n                let newProducts = products.map(groupedProduct => {\n                  if (groupedProduct.user.guestUser.email === groupUser.guestUser.email) {\n                    groupedProduct.products = [...groupedProduct.products, product]\n                  }\n                  return groupedProduct\n                })\n                products = [...newProducts]\n              } else {\n                products.push({\n                  user: {...groupUser},\n                  products: [{...product}]\n                })\n                guestUsersEmails.push(groupUser.guestUser.email)\n              }\n            }\n          } else {\n            //  Not a group Gift\n            try {\n              if (guestUsersEmails.indexOf(product.purchasedRegistryItem[0].guestUser.email) !== -1) {\n                // User already have product\n                products = products.map(groupProduct => {\n                  if (groupProduct.user.guestUser.email === product.purchasedRegistryItem[0].guestUser.email) {\n                    groupProduct.products.push(product)\n                  }\n                  return groupProduct\n                })\n              } else {\n                // User doesn't have product\n                products.push({\n                  user: {...product.purchasedRegistryItem[0]},\n                  products: [{...product}]\n                })\n                guestUsersEmails.push(product.purchasedRegistryItem[0].guestUser.email)\n              }\n            } catch {\n              availableProducts.push({...product})\n            }\n          }\n        }\n      }\n\n      products = products.map(product => {\n        product.products = this.getUniqueListBy([...product.products], \"id\")\n        return product\n      })\n\n      let {otherSelected, availableProducts} = this.getAvailableProduct(stateProducts)\n      partiallyPurchasedGroupGift = this.getUniqueListBy([...partiallyPurchasedGroupGift], \"id\")\n      if (!otherSelected && availableProducts.length > 0) {\n        // If only available is selected then show only available products\n        let id2Remove = [...partiallyPurchasedGroupGift].map(product => product.id)\n        products = [{\n          availableProducts: true,\n          products: [...partiallyPurchasedGroupGift, ...availableProducts.filter(product => id2Remove.indexOf(product.id) === -1)]\n        }]\n                  // products: [...partiallyPurchasedGroupGift, ...availableProducts.filter(product => id2Remove.indexOf(product.id) === -1)]\n\n      } else if (availableProducts.length > 0) {\n        let id2Remove = [...partiallyPurchasedGroupGift].map(product => product.id)\n        products.push({\n          availableProducts: true,\n          products: [...availableProducts.filter(product => id2Remove.indexOf(product.id) === -1)]\n        })\n         // products: [...availableProducts.filter(product => id2Remove.indexOf(product.id) === -1)]\n      }\n    }\n\n    return products\n  }\n\n  render() {\n\n    if (this.props.stateTrackGiftsProducts.length <= 0 && this.state.currentView && this.props.stateTrackGiftsPagination.hasNextPage) {\n      getTrackGiftsProduct(true, this.props.stateTrackGiftsFilters, this.props.stateTrackGiftsProducts, this.props.stateTrackGiftsPagination, this.props.stateTrackGiftsView, this.props.stateRegistryInfo, this.props.stateTrackGiftsSearch, this.props.dispatch)\n    }\n\n    // Getting new products when new views are switched\n    if (this.state.currentView?.id !== this.props.stateTrackGiftsView?.id) {\n      this.setState({\n        currentView: {...this.props.stateTrackGiftsView}\n      })\n      getTrackGiftsProduct(true, this.props.stateTrackGiftsFilters, this.props.stateTrackGiftsProducts, this.props.stateTrackGiftsPagination, this.props.stateTrackGiftsView, this.props.stateRegistryInfo, this.props.stateTrackGiftsSearch, this.props.dispatch)\n    }\n\n    const products = this.getProductsBasedOnView(this.props.stateTrackGiftsView, this.props.stateTrackGiftsProducts)\n\n    if (this.props.stateTrackGiftsProducts.length <= 0 && !this.props.stateTrackGiftsPagination.hasNextPage) {\n      return <NoRecordFound/>\n    } else if (this.props.stateTrackGiftsView?.id === TRACK_GIFTS_VIEWS[0].id) {\n\n      // For Gifts\n\n      return (\n        <div>\n          <div className=\"row mb-1 mb-md-2\">\n            <div className=\"col-6 d-none d-md-inline-block\">\n              <p className=\"text-sm font-medium\">Gift details</p>\n            </div>\n            <div className=\"col-6 d-none d-md-inline-block\">\n              <p className=\"text-sm font-medium\">Gifted by</p>\n            </div>\n            <div className=\"col-12 d-inline-block d-md-none\">\n              <p className=\"text-sm font-body\">Gift details | Gifted by</p>\n            </div>\n          </div>\n          <div className=\"row\">\n            <div className=\"col\">\n              <InfiniteScroll\n                style={{overflow: \"unset\"}}\n                next={() => getTrackGiftsProduct(false, this.props.stateTrackGiftsFilters, this.props.stateTrackGiftsProducts, this.props.stateTrackGiftsPagination, this.props.stateTrackGiftsView, this.props.stateRegistryInfo, this.props.stateTrackGiftsSearch, this.props.dispatch)}\n                hasMore={this.props.stateTrackGiftsPagination.hasNextPage}\n                loader={<h4>Loading...</h4>}\n                dataLength={this.props.stateTrackGiftsProducts.length}\n              >\n                {products.map(product => {\n                  // return <p className=\"my-5\">{product.title}</p>\n                  return <GiftCard data={product}/>\n                })}\n              </InfiniteScroll>\n            </div>\n          </div>\n        </div>\n      )\n    } else {\n\n      // For Gift Giver\n\n      return (\n        <div>\n          <InfiniteScroll\n            next={() => getTrackGiftsProduct(false, this.props.stateTrackGiftsFilters, this.props.stateTrackGiftsProducts, this.props.stateTrackGiftsPagination, this.props.stateTrackGiftsView, this.props.stateRegistryInfo, this.props.stateTrackGiftsSearch, this.props.dispatch)}\n            hasMore={this.props.stateTrackGiftsPagination.hasNextPage}\n            loader={<h4>Loading...</h4>}\n            dataLength={this.props.stateTrackGiftsProducts.length}\n            style={{overflow: \"unset\"}}\n          >\n            {products.map(groupedProduct => {\n              return (\n                <div className=\"mb-4 track-gifts-gift-giver-view\">\n                  <div className=\"mb-2 d-flex\">\n                    <span\n                      className=\"text-body font-medium track-gifts-gift-giver-user-name\"\n                      title={groupedProduct.availableProducts ? \"Available\" : `${groupedProduct.user.guestUser.firstName ? groupedProduct.user.guestUser.firstName : \"\"} ${groupedProduct.user.guestUser.lastName ? groupedProduct.user.guestUser.lastName : \"\"}`}>{groupedProduct.availableProducts ? \"Available\" : `${groupedProduct.user.guestUser.firstName ? groupedProduct.user.guestUser.firstName : \"\"} ${groupedProduct.user.guestUser.lastName ? groupedProduct.user.guestUser.lastName : \"\"}`}\n                    </span>\n                    {!groupedProduct.availableProducts ?\n                      <span\n                        className=\"ml-1 text-body track-gifts-gift-giver-user-email\">{groupedProduct.user.guestUser.email}</span> : null}\n                    <span\n                      className=\"ml-1 text-body font-medium gift-givers-user-gift-count px-2\">{`${groupedProduct.products.length} gift${groupedProduct.products.length > 1 ? 's' : ''}`}</span>\n                  </div>\n                  <div>\n                    {groupedProduct.products.map(product => (\n                      <GiftCard data={product}/>\n                    ))}\n                  </div>\n                </div>\n              )\n            })}\n          </InfiniteScroll>\n        </div>\n      )\n    }\n  }\n}\n\nconst mapStateToProps = state => ({\n  stateTrackGiftsView: state.trackGifts.activeView,\n  stateTrackGiftsProducts: state.trackGifts.products,\n  stateTrackGiftsPagination: state.trackGifts.paginationInfo,\n  stateRegistryInfo: state.registry.info,\n  stateTrackGiftsFilters: state.trackGifts.filters,\n  stateTrackGiftsSearch: state.trackGifts.search\n})\n\nexport default connect(\n  mapStateToProps\n)(TrackGiftsContent);","import React from \"react\";\nimport {\n  GET_PRODUCTS,\n  REMOVE_REGISTRY_ITEM,\n  GET_CATEGORIES,\n  GET_REGISTRIES,\n  ADD_REGISTRY_ITEM,\n  UPDATE_REGISTRY_ITEM,\n  GET_QUESTIONS,\n  GET_GUEST_REGISTRY,\n  GET_PERSONALIZE_QUESTIONS,\n  GET_GUEST_CHECKLIST, GET_TRACK_GIFTS, GET_TODO, GET_DEFAULT_CASH_FUND_IMAGE, GET_MA_VARIANT\n} from \"../api/queries\";\nimport {graphQL, graphQLNoHeader, graphQLNoToken, addProductToCart as addProductToCartAPI} from \"../api/axios\";\nimport {CURRENCY, MEDIA_URL_PREFIX, TRACK_GIFTS_PRODUCTS_PER_REQUEST} from \"./constants\";\nimport {\n  setRegistryProducts,\n  setCheckListItems,\n  toggleMustHaveProduct as toggleMustHaveProductAction,\n  setCashFundCategories,\n  setFilterProductCount\n} from \"../modules/my-registry/MyRegistryActions\";\nimport {CREATE_REGISTRY, TOGGLE_MUST_HAVE, UPDATE_VIEW_REGISTRY_POISTION, TOUR_UPDATE_FLAG} from \"../api/mutations\";\nimport {setOnboardingRegistry, setTodo, updateRegistryInfo, setLoader} from \"../modules/registry/RegistryActions\";\nimport {setViewRegistryProducts} from \"../modules/view-registry/ViewRegistryActions\";\nimport {addOnboardingQuestion} from \"../modules/onboarding/OnboardingAction\";\nimport {addPersonalizeQuestion} from \"../modules/personalise-checklist/PersonaliseCheckListActions\";\nimport {updateGuestViewInfo, setGuestCheckListItems} from \"../modules/guest-view/GuestViewAction\";\nimport {toast} from \"react-toastify\";\nimport reducerDefaultData from \"data/ReducerDefaultData.json\";\nimport {TRACK_GIFTS_VIEWS} from \"../modules/track-gifts/components/view-by/ViewBy\";\nimport {\n  setTrackGiftsFilters,\n  setTrackGiftsPaginationInfo,\n  setTrackGiftsProduct\n} from \"../modules/track-gifts/TrackGiftsAction\";\nimport {LOCAL_2_API_FILTERS_MAPPING} from \"../modules/track-gifts/containers/track-gifts-content/TrackGiftsContent\";\n\nexport const getProducts = (registryId, dispatch) => {\n  let data = {\n    query: GET_PRODUCTS,\n    variables: {\n      registryId: parseInt(registryId)\n    }\n  }\n  dispatch(setLoader(true))\n  graphQL(data).then(res => {\n    // Filter Count\n    let filterCount = {\n      categoryData: {...res.data.data.registryItems.categoryData},\n      registryItemsAnalysisCount: {...res.data.data.registryItems.registryItemsAnalysisCount}\n    }\n    dispatch(setFilterProductCount(filterCount))\n\n    let responseData = res.data.data.registryItems.registryItems.edges.map(item => {\n      // return { ...item.node }\n      let newItemObj = {...item.node}\n      delete newItemObj.registryitemImage;\n      if (item.node.registryitemImage.length > 0) {\n        newItemObj.imageUrl = (MEDIA_URL_PREFIX.LOCAL_MEDIA_URL ? MEDIA_URL_PREFIX.LOCAL_MEDIA_URL : \"\") + item.node.registryitemImage[0].image;\n      }\n      return newItemObj;\n    })\n\n    // TODO: change category\n    let finalData = responseData.filter(product => product.registryCategories.length > 0)\n    dispatch(setRegistryProducts(finalData))\n    dispatch(setLoader(false))\n  }).catch(err => {\n    dispatch(setLoader(false))\n    console.error(err.response)\n  })\n}\n\nexport const toggleMustHaveProduct = (product, dispatch) => {\n  let data = {\n    query: TOGGLE_MUST_HAVE,\n    variables: {\n      productId: product.id,\n      mustHaveValue: !product.mostWanted,\n      quantity: product.quantity\n    }\n  }\n  graphQL(data).then(res => {\n    if (res.status === 200) {\n      dispatch(toggleMustHaveProductAction(product.item.id))\n    }\n  }).catch(err => {\n    console.error(err.message)\n  })\n}\n\nexport const removeProductFromCartHandler = (card, registryId, dispatch) => {\n  let registryItemId = card.id\n  let data = {\n    query: REMOVE_REGISTRY_ITEM,\n    variables: {\n      registryItemId: registryItemId\n    },\n  }\n  dispatch(setLoader(true))\n  graphQL(data).then(res => {\n    console.log({...res.data.data.errors})\n    if (res.data.errors && res.data.errors.length) {\n      for (let error of res.data.errors) {\n        toast.error(error.message)\n      }\n      return;\n    } else {\n      // dispatch(removeProductFromCart(card.item.id))\n      // this.getProducts();\n      getProducts(registryId, dispatch);\n      getCategories(registryId, dispatch);\n      dispatch(setLoader(false))\n      toast.error((\n        <p><b>{card.title}</b> removed from your registry!</p>\n      ))\n\n      // getCategories()\n    }\n\n  }).catch(err => {\n    dispatch(setLoader(false))\n    console.error(err.message)\n    toast.error((\n      <p>Some error occurred.</p>\n    ))\n  })\n}\n\n// While using this method. Plase mak sure of parentCategory Parameter\nexport const getRefinedCategory = (category, parentCategory = null) => {\n  return ({\n    id: category.id,\n    category: category.category,\n    categoryName: category.category.categoryName,\n    description: category.category.description,\n    categoryType: category.category.categoryType,\n    isDesired: category.isDesired,\n    isExcluded: category.isExcluded,\n    addedItemsCount: category.addedItemsCount,\n    totalItemsCount: category.totalItemsCount,\n    isParent: category.category.isParent,\n    parentCategory: parentCategory\n  })\n}\n\n\n// Get all categories\nexport const getAllCategories = (registryCategories, getAll) => {\n  // let finalCondition = category.subCategoriesIsExcluded ?\n  let parentCategories = registryCategories.filter(category => getAll ? true : (category.subCategoriesIsExcluded ? !category.subCategoriesIsExcluded : !category.isExcluded))\n  let finalCategories = parentCategories.map(parentCategory => {\n    let newParentCategory = getRefinedCategory(parentCategory)\n    let subCategory = parentCategory.registrySubCategories;\n    delete parentCategory.registrySubCategories\n    let newSubCategories = subCategory.filter(cat => getAll ? true : (cat.subCategoriesIsExcluded ? !cat.subCategoriesIsExcluded : !cat.isExcluded))\n    newSubCategories = newSubCategories.map(cat => {\n      let refinedSubCate = getRefinedCategory(cat, {\n        id: parentCategory.category.id,\n        name: parentCategory.category.categoryName\n      })\n      let subProductTypes = cat.registrySubProductTypes.map(subProduct => getRefinedCategory(subProduct, {\n        id: cat.category.id,\n        name: cat.category.categoryName\n      }))\n      refinedSubCate['subProductTypes'] = subProductTypes.filter(category => getAll ? true : !category.isExcluded)\n      return refinedSubCate\n    })\n    newParentCategory['subCategories'] = newSubCategories\n    return newParentCategory\n  })\n\n  return finalCategories\n}\n\nexport const getCategories = (registryId, dispatch) => {\n  let data = {\n    operationName: \"getCategories\",\n    query: GET_CATEGORIES,\n    variables: {\n      registryId: parseInt(registryId)\n    },\n  }\n  dispatch(setLoader(true))\n  graphQL(data).then(res => {\n    if (res.data.errors || res.data.error) {\n      // TODO: Add toast\n      console.log('Something went wrong-->', res.data.errors)\n      return;\n    } else {\n\n      // let tempAllCategories = getAllCategories(res.data.data.registryCategories, true)\n      // let cashFundCategories = []\n      //\n      // for (const category of tempAllCategories) {\n      //   for (const subCategory of category.subCategories) {\n      //     if (Number(subCategory.categoryType.id) === 2) {\n      //       cashFundCategories.push(subCategory)\n      //     }\n      //   }\n      // }\n      // dispatch(setCashFundCategories(cashFundCategories))\n      let finalCategories = getAllCategories(res.data.data.registryCategories, false)\n      if (finalCategories.length === 0) {\n        let allCategories = getAllCategories(res.data.data.registryCategories, true)\n        dispatch(setCheckListItems(allCategories))\n      } else {\n        dispatch(setCheckListItems(finalCategories))\n      }\n      // dispatch(setCheckListItems(categoryToUpdate))\n    }\n    dispatch(setLoader(false))\n  })\n}\n\nexport const updateRegistryDetailState = (dispatch, registryData) => {\n  let currentRegistryInfo = null;\n\n  currentRegistryInfo = registryData[0].node;\n  if (currentRegistryInfo.image) {\n    currentRegistryInfo.image.image = (MEDIA_URL_PREFIX.LOCAL_MEDIA_URL ? MEDIA_URL_PREFIX.LOCAL_MEDIA_URL : \"\") + currentRegistryInfo.image.image;\n  }\n\n  if (currentRegistryInfo) {\n    dispatch(updateRegistryInfo({...currentRegistryInfo}))\n  } else {\n    dispatch(updateRegistryInfo({notFound: true}))\n    console.log(\"No registry found!\");\n  }\n}\n\nexport const updateRegistryDetail = (dispatch) => {\n  let data = {\n    query: GET_REGISTRIES\n  }\n\n  graphQL(data).then(res => {\n    try {\n      if (res.data.data.registries.edges) {\n        updateRegistryDetailState(dispatch, res.data.data.registries.edges)\n      } else {\n        dispatch(updateRegistryInfo({notFound: true}))\n      }\n    } catch (e) {\n      dispatch(updateRegistryInfo({notFound: true}))\n      console.error(e)\n    }\n  }).catch(err => {\n    dispatch(updateRegistryInfo({notFound: true}))\n    console.error(err.response ? err.response.data : null)\n  })\n}\n\nexport const updateViewRegistryPosition = (registryId, position, oldPosition, dispatch) => {\n  let data = {\n    query: UPDATE_VIEW_REGISTRY_POISTION,\n    variables: {\n      registryId: registryId,\n      registryItems: position\n    },\n  }\n  graphQL(data).then(res => {\n    if (res.data.error) {\n      dispatch(setViewRegistryProducts(oldPosition))\n      toast.error(\"Somerhing went wrong while re-arranging Products\")\n      console.log('Something went wrong-->', res.data.error)\n      return;\n    } else {\n      getProducts(registryId, dispatch)\n    }\n\n  }).catch(err => {\n    dispatch(setViewRegistryProducts(oldPosition))\n    console.error(err.message)\n  })\n}\n\nconst addProductToRegistry = (data, registryId, title, dispatch) => {\n  graphQL(data).then(res => {\n    getProducts(registryId, dispatch);\n    getCategories(registryId, dispatch);\n\n    toast.success((\n      <p><b>{title}</b> added to your registry!</p>\n    ))\n    getTodoList(registryId, dispatch)\n  }).catch(err => {\n    console.error(err.message)\n\n    toast.error((\n      <p>Some error occurred!</p>\n    ))\n  })\n}\n\nconst updateProductToRegistry = (data, registryId, title, dispatch) => {\n  graphQL(data).then(res => {\n    getProducts(registryId, dispatch);\n    getCategories(registryId, dispatch);\n\n    toast.success((\n      <p><b>{title}</b> added to your registry!</p>\n    ))\n  }).catch(err => {\n    console.error(err.message)\n\n    toast.error((\n      <p>Some error occurred!</p>\n    ))\n  })\n}\n\n\nexport const addProductHandler = (card, stateAddedProducts, stateRegistryInfo, dispatch) => {\n  // If its MA Product\n  const registryId = parseInt(stateRegistryInfo.id)\n  if (card.isMaItem && card.activeVariant) {\n    let existingProduct = [...stateAddedProducts].filter(product => product.item.sku === card.activeVariant.sku)\n    if (existingProduct.length === 0) {\n      const title = card.title\n      const category = card.category.id\n      const storeItemUrl = card.storeUrl\n      const sku = card.activeVariant.sku\n      const price = parseFloat(card.activeVariant.price)\n      const quantity = parseInt(card.quantity)\n      const imageUrl = (card.activeVariant.imageUrl && card.activeVariant.imageUrl !== \"\") ? card.activeVariant.imageUrl : card.imageUrl;\n      const shopifyVariantId = card.activeVariant.variantId\n      const storeName = card.storeName\n      const mostWanted = card.mostWanted ? card.mostWanted : false\n      const isGroupGift = card.isGroupGift ? card.mostWanted : false\n      const isCashAcceptedOnly = false\n      const shopifyItemId = card.shopifyItemId\n\n      let data = {\n        query: ADD_REGISTRY_ITEM,\n        variables: {\n          registryId: registryId,\n          title: title,\n          // TODO: change category\n          category: [Number(category)],\n          tags: [],\n          storeItemUrl: storeItemUrl ? storeItemUrl : '',\n          sku: sku,\n          price: price,\n          quantity: quantity,\n          imageUrl: imageUrl,\n          shopifyItemVariantId: shopifyVariantId,\n          storeName: storeName,\n          mostWanted: mostWanted,\n          isGroupGift: isGroupGift,\n          //TODO: change this if requried\n          // shopifyItemId: shopifyItemId,\n          shopifyItemId: shopifyItemId,\n          isCashAcceptedOnly: isCashAcceptedOnly\n        }\n      }\n      addProductToRegistry(data, registryId, card.title, dispatch)\n    } else {\n      let data = {\n        query: UPDATE_REGISTRY_ITEM,\n        variables: {\n          registryItemId: existingProduct[0].id,\n          quantity: parseInt(card.quantity) + parseInt(existingProduct[0].quantity),\n          mostWanted: card.mostWanted ? card.mostWanted : existingProduct[0].mostWanted,\n          isGroupGift: card.isGroupGift ? card.isGroupGift: existingProduct[0].isGroupGift,\n          isCashAcceptedOnly: card.isCashAcceptedOnly ? card.isCashAcceptedOnly : existingProduct[0].isCashAcceptedOnly\n        }\n      }\n      updateProductToRegistry(data, registryId, card.title, dispatch)\n    }\n  }\n  // If its not MA Product\n  else {\n    let existingProduct = [...stateAddedProducts].filter(product => product.item.sku === card.sku)\n    if (existingProduct.length === 0) {\n      const title = card.title\n      const category = card.category.id\n      const storeItemUrl = card.storeUrl\n      const sku = card.sku\n      const price = parseFloat(card.price)\n      const quantity = parseInt(card.quantity)\n      const imageUrl = card.imageUrl\n      const storeName = card.storeName\n      const mostWanted = card.mostWanted ? card.mostWanted : false\n      const isCashAcceptedOnly = card.isCashAcceptedOnly === false ? card.isCashAcceptedOnly : true\n      const isGroupGift = card.isGroupGift ? card.mostWanted : false\n\n      let data = {\n        query: ADD_REGISTRY_ITEM,\n        variables: {\n          registryId: registryId,\n          title: title,\n          // TODO: change category\n          category: [Number(category)],\n          tags: [],\n          storeItemUrl: storeItemUrl ? storeItemUrl : '',\n          sku: sku,\n          price: price,\n          quantity: quantity,\n          imageUrl: imageUrl,\n          storeName: storeName,\n          mostWanted: mostWanted,\n          isGroupGift: isGroupGift,\n          isCashAcceptedOnly: isCashAcceptedOnly\n        }\n      }\n      addProductToRegistry(data, registryId, card.title, dispatch)\n    } else {\n      let data = {\n        query: UPDATE_REGISTRY_ITEM,\n        variables: {\n          registryItemId: existingProduct[0].id,\n          quantity: parseInt(card.quantity) + parseInt(existingProduct[0].quantity),\n          mostWanted: card.mostWanted ? card.mostWanted : existingProduct[0].mostWanted,\n          isGroupGift: card.isGroupGift ? card.isGroupGift: existingProduct[0].isGroupGift,\n          isCashAcceptedOnly: card.isCashAcceptedOnly ? card.isCashAcceptedOnly : existingProduct[0].isCashAcceptedOnly\n        }\n      }\n      updateProductToRegistry(data, registryId, card.title, dispatch)\n    }\n  }\n}\n\nexport const getOnboardingQuestions = async (dispatch, registryId = null, token = null) => {\n  let reqData = {\n    query: GET_QUESTIONS,\n    variables: {\n      isPersonalize: false,\n      registryId: registryId ? Number(registryId) : null\n    }\n  }\n  let options = {}\n  if (token) {\n    options = {headers: {\"Authorization\": \"Token \" + token}}\n  }\n\n  await graphQLNoHeader(reqData, options).then(async res => {\n    if (res.data.data.questions) {\n      const questions = res.data.data.questions.map(question => {\n        question.options = question.options.map(option => {\n          if (option.followUpQuestions.length > 0) {\n            option.followUpQuestions.map(followUpQuestion => {\n              followUpQuestion['parentQuestion'] = question.id\n              return followUpQuestion;\n            })\n          }\n          return option;\n        })\n        question.isAnswered = false;\n        return question;\n      })\n      await dispatch(addOnboardingQuestion(questions))\n    }\n  }).catch(err => {\n    // toast.error(\"Error occurred while fetching questions\");\n    console.error(err);\n  })\n}\n\n\nexport const getPersonalizeQuestions = (registryId, dispatch) => {\n  let reqData = {\n    query: GET_PERSONALIZE_QUESTIONS,\n    variables: {\n      registryId: registryId,\n    }\n  }\n\n  graphQL(reqData).then(res => {\n    if (res.data.data.editablePersonalizeQuestions) {\n      const questions = res.data.data.editablePersonalizeQuestions.map(question => {\n        question.options = question.options.map(option => {\n          if (option.followUpQuestions.length > 0) {\n            option.followUpQuestions.map(followUpQuestion => {\n              followUpQuestion['parentQuestion'] = question.id\n              return followUpQuestion;\n            })\n          }\n          return option;\n        })\n        question.isAnswered = false;\n        question.toastMessage = question.toastMessage.replace(\"\\n\", '<br>')\n        return question;\n      })\n      dispatch(addPersonalizeQuestion(questions))\n    }\n  }).catch(err => {\n    toast.error(\"Error occurred while fetching questions\");\n    console.error(err);\n  })\n}\n\nexport const updateGuestViewRegistry = (urlSlug, dispatch) => {\n  let reqData = {\n    query: GET_GUEST_REGISTRY,\n    variables: {\n      urlSlug: urlSlug,\n    }\n  }\n\n  graphQL(reqData).then(res => {\n    if (res.data.data.registryAsGuest) {\n      let guestViewInfo = {...res.data.data.registryAsGuest}\n      if (guestViewInfo.image) {\n        guestViewInfo.image.image = (MEDIA_URL_PREFIX.LOCAL_MEDIA_URL ? MEDIA_URL_PREFIX.LOCAL_MEDIA_URL : \"\") + guestViewInfo.image.image;\n      }\n      delete guestViewInfo.registryItems\n      dispatch(updateGuestViewInfo(guestViewInfo))\n    }\n  }).catch(err => {\n    dispatch(updateGuestViewInfo({notFound: true}))\n    if (err.response && err.response.data.errors) {\n      for (const error of err.response.data.errors) {\n        // TODO: Implement toast if necessary\n        console.log(error.message)\n      }\n    }\n  })\n}\n\nexport const createRegistry = dispatch => {\n  graphQL({query: CREATE_REGISTRY}).then(res => {\n    if (res.data.data) {\n      let registryId = res.data.data.createRegistry.registry.id\n      if (registryId) {\n        dispatch(setOnboardingRegistry(registryId))\n      }\n    }\n  }).catch(err => {\n    console.log(err.response)\n  })\n}\n\nexport const dataURItoBlob = (dataURI, fileType, fileName) => {\n  let byteString = atob(dataURI.split(',')[1]);\n  let ab = new ArrayBuffer(byteString.length);\n  let ia = new Uint8Array(ab);\n  for (let i = 0; i < byteString.length; i++) {\n    ia[i] = byteString.charCodeAt(i);\n  }\n\n  let blob = new Blob([ab], {type: fileType});\n  return new File([blob], fileName, {\n    type: fileType\n  })\n}\n\nexport const getGuestCategories = async (urlSlug, dispatch) => {\n  let reqData = {\n    query: GET_GUEST_CHECKLIST,\n    variables: {\n      urlSlug: urlSlug,\n    }\n  }\n  await graphQL(reqData).then(res => {\n    if (res.data.errors || res.data.error) {\n      // TODO: Add toast\n      console.log('Something went wrong-->', res.data.errors)\n      return;\n    } else {\n      let finalCategories = getAllCategories(res.data.data.registryCategoriesAsGuest, true)\n      dispatch(setGuestCheckListItems(finalCategories))\n      // dispatch(setCheckListItems(categoryToUpdate))\n    }\n  })\n}\n\nconst getTrackGiftsFilterStatus = (filterString, trackGiftsFilter) => {\n  let returnStatus = false\n  switch (filterString) {\n    case \"available\":\n      for (const filter of trackGiftsFilter) {\n        if (filter.id === 4 && filter.count > 0) {\n          returnStatus = filter.selected\n          break;\n        }\n      }\n      break\n    case \"purchased\":\n      for (const filter of trackGiftsFilter) {\n        if (filter.id === 1 && filter.count > 0) {\n          returnStatus = filter.selected\n          break;\n        }\n      }\n      break\n    case \"reserved\":\n      for (const filter of trackGiftsFilter) {\n        if (filter.id === 3 && filter.count > 0) {\n          returnStatus = filter.selected\n          break;\n        }\n      }\n      break\n    case \"fundsReceived\":\n      for (const filter of trackGiftsFilter) {\n        if (filter.id === 2 && filter.count > 0) {\n          returnStatus = filter.selected\n          break;\n        }\n      }\n      break\n    case \"returned\":\n      for (const filter of trackGiftsFilter) {\n        if (filter.id === 5 && filter.count > 0) {\n          returnStatus = filter.selected\n          break;\n        }\n      }\n      break\n    default:\n      returnStatus = false\n      break\n  }\n  return returnStatus;\n}\n\nexport const getTrackGiftsProduct = (clearProducts = false, trackGiftsFilters, trackGiftsProduct, trackGiftsPagination, trackGiftsView, registryInfo, trackGiftsSearch, dispatch, first = TRACK_GIFTS_PRODUCTS_PER_REQUEST) => {\n  dispatch(setLoader(true))\n  // TODO: Change this Function when Search API in implemented\n  let reqData = {\n    query: GET_TRACK_GIFTS,\n    operationName: \"registryGifts\",\n    variables: {\n      registryId: registryInfo?.id,\n      giftGivers: trackGiftsView?.id === TRACK_GIFTS_VIEWS[1].id,  // [1] index is Gift Giver\n      after: clearProducts ? null : trackGiftsPagination.endCursor,\n      first: first,\n      searchKeyword: trackGiftsSearch.searchText,\n      isReserved: getTrackGiftsFilterStatus(\"reserved\", trackGiftsFilters),\n      isAvailable: getTrackGiftsFilterStatus(\"available\", trackGiftsFilters),\n      isPurchased: getTrackGiftsFilterStatus(\"purchased\", trackGiftsFilters),\n      isFundsReceived: getTrackGiftsFilterStatus(\"fundsReceived\", trackGiftsFilters),\n      isReturned: getTrackGiftsFilterStatus(\"returned\", trackGiftsFilters),\n    }\n  }\n\n  graphQL(reqData).then(res => {\n    // Updating Track Gifts Filters\n    if (res.data.data.registryGifts && res.data.data.registryGifts.registryGiftItemsCount) {\n      const allFilterCounts = res.data.data.registryGifts.registryGiftItemsCount;\n      const newFilters = trackGiftsFilters.map(filter => {\n        filter.count = allFilterCounts[LOCAL_2_API_FILTERS_MAPPING[filter.id]] ? allFilterCounts[LOCAL_2_API_FILTERS_MAPPING[filter.id]] : 0\n        return filter\n      })\n\n      dispatch(setTrackGiftsFilters(newFilters))\n    }\n\n    // Updating Track Gifts Products\n    if (res.data.data.registryGifts && res.data.data.registryGifts.gifts) {\n      let registryGifts = res.data.data.registryGifts.gifts\n      let products = registryGifts.edges.map(item => {\n        let product = {...item.node}\n        if (product.registryitemImage.length > 0) {\n          product.imageUrl = (MEDIA_URL_PREFIX.LOCAL_MEDIA_URL ? MEDIA_URL_PREFIX.LOCAL_MEDIA_URL : \"\") + product.registryitemImage[0].image;\n        }\n        return product\n      })\n      let pagination = null\n      if (registryGifts.pageInfo) {\n        pagination = {\n          hasNextPage: registryGifts.pageInfo.hasNextPage,\n          endCursor: registryGifts.pageInfo.endCursor,\n        }\n      }\n      if (pagination) {\n        dispatch(setTrackGiftsPaginationInfo({...pagination}))\n      }\n      if (clearProducts) {\n        dispatch(setTrackGiftsProduct([...products]))\n      } else {\n        dispatch(setTrackGiftsProduct([...trackGiftsProduct, ...products]))\n      }\n\n    } else {\n      dispatch(setTrackGiftsPaginationInfo({\n        hasNextPage: false,\n        endCursor: null\n      }))\n    }\n    dispatch(setLoader(false))\n  }).catch(err => {\n    dispatch(setTrackGiftsPaginationInfo({\n      hasNextPage: false,\n      endCursor: null\n    }))\n    console.error(err.response)\n    dispatch(setLoader(false))\n  })\n}\n\nexport const addProductToCart = async (data) => {\n  let returnRes = {}\n  await addProductToCartAPI(data).then(res => {\n    returnRes['status'] = 200\n    console.log('Added to cart ')\n  }).catch(err => {\n    returnRes = err.response.data\n    if (typeof res !== 'object') {\n      returnRes = {status: 401}\n    }\n    console.error(err.response.data)\n  })\n  return returnRes\n}\n\nexport const getTodoList = (registryId, dispatch) => {\n  let reqData = {\n    query: GET_TODO,\n    variables: {\n      registryId: registryId\n    }\n  }\n\n  graphQL(reqData).then(res => {\n    if (res.data.data && res.data.data.registryTodoSteps) {\n      dispatch(setTodo(res.data.data.registryTodoSteps))\n    }\n    if (res.data.errors) {\n      console.error({...res.data.errors})\n    }\n  }).catch(err => {\n    console.error(err.response)\n  })\n}\n\nexport const fetchDefaultCashFundImage = async (categoryId) => {\n  let result = null\n  const reqData = {\n    query: GET_DEFAULT_CASH_FUND_IMAGE,\n    variables: {\n      categoryId: categoryId\n    }\n  }\n\n  await graphQL(reqData).then(async res => {\n    if (res.data.data.cashFundDefaultImage) {\n      result = {\n        status: \"success\",\n        data: res.data.data.cashFundDefaultImage\n      }\n    } else if (res.data.errors) {\n      result = {\n        status: \"error\",\n        data: res.data.errors\n      }\n    }\n  }).catch(err => {\n    result = {\n      status: \"error\",\n      data: err.response\n    }\n    console.error(\"Unable to fetch cash fund default image\", {...err.response})\n  })\n\n  return result\n}\n\nexport const UpdateBuildTourFlag = (stateRegistryInfo, dispatch) => {\n  let data = {\n    query: TOUR_UPDATE_FLAG,\n    variables: {\n      registryId: stateRegistryInfo.id,\n      isBuildRegistryVisited: true,\n      isViewAsGuestVisited: stateRegistryInfo.isViewAsGuestVisited,\n      isFeaturedOrderApplied: stateRegistryInfo.isFeaturedOrderApplied,\n      isGroupGiftApplied: stateRegistryInfo.isGroupGiftApplied,\n      isViewRegistryVisited: stateRegistryInfo.isViewRegistryVisited,\n      isMustHaveApplied: stateRegistryInfo.isMustHaveApplied\n    }\n  }\n  graphQL(data).then(res => {\n    if (res.status === 200) {\n      console.log('Done..')\n    }\n  }).catch(err => {\n    console.error(err.message)\n  })\n  let registryInfo = {...stateRegistryInfo}\n  registryInfo.isBuildRegistryVisited = true\n  dispatch(updateRegistryInfo(registryInfo))\n}\n\nexport const updateMushHaveTourFlag = (stateRegistryInfo, dispatch) => {\n  let data = {\n    query: TOUR_UPDATE_FLAG,\n    variables: {\n      registryId: stateRegistryInfo.id,\n      isBuildRegistryVisited: stateRegistryInfo.isBuildRegistryVisited,\n      isViewAsGuestVisited: stateRegistryInfo.isViewAsGuestVisited,\n      isFeaturedOrderApplied: stateRegistryInfo.isFeaturedOrderApplied,\n      isGroupGiftApplied: stateRegistryInfo.isGroupGiftApplied,\n      isViewRegistryVisited: stateRegistryInfo.isViewRegistryVisited,\n      isMustHaveApplied: true\n    }\n  }\n  graphQL(data).then(res => {\n    if (res.status === 200) {\n      console.log('Done..')\n    }\n  }).catch(err => {\n    console.error(err.message)\n  })\n  let registryInfo = {...stateRegistryInfo}\n  registryInfo.isMustHaveApplied = true\n  dispatch(updateRegistryInfo(registryInfo))\n}\n\nexport const updateViewRegistryTourFlag = (stateRegistryInfo, dispatch) => {\n  let data = {\n    query: TOUR_UPDATE_FLAG,\n    variables: {\n      registryId: stateRegistryInfo.id,\n      isBuildRegistryVisited: stateRegistryInfo.isBuildRegistryVisited,\n      isViewRegistryVisited: true,\n      isViewAsGuestVisited: stateRegistryInfo.isViewAsGuestVisited,\n      isFeaturedOrderApplied: stateRegistryInfo.isFeaturedOrderApplied,\n      isGroupGiftApplied: stateRegistryInfo.isGroupGiftApplied,\n      isMustHaveApplied: stateRegistryInfo.isMustHaveApplied\n    }\n  }\n  graphQL(data).then(res => {\n    if (res.status === 200) {\n      console.log('Done..')\n    }\n  }).catch(err => {\n    console.error(err.message)\n  })\n  let registryInfo = {...stateRegistryInfo}\n  registryInfo.isViewRegistryVisited = true\n  dispatch(updateRegistryInfo(registryInfo))\n}\n\nexport const updateGroupGiftTourFlag = (stateRegistryInfo, dispatch) => {\n  let data = {\n    query: TOUR_UPDATE_FLAG,\n    variables: {\n      registryId: stateRegistryInfo.id,\n      isBuildRegistryVisited: stateRegistryInfo.isBuildRegistryVisited,\n      isViewAsGuestVisited: stateRegistryInfo.isViewAsGuestVisited,\n      isFeaturedOrderApplied: stateRegistryInfo.isFeaturedOrderApplied,\n      isGroupGiftApplied: true,\n      isViewRegistryVisited: stateRegistryInfo.isViewRegistryVisited,\n      isMustHaveApplied: stateRegistryInfo.isMustHaveApplied\n    }\n  }\n  graphQL(data).then(res => {\n    if (res.status === 200) {\n      console.log('Done..')\n    }\n  }).catch(err => {\n    console.error(err.message)\n  })\n  let registryInfo = {...stateRegistryInfo}\n  registryInfo.isGroupGiftApplied = true\n  dispatch(updateRegistryInfo(registryInfo))\n}\n\nexport const getMAVariant = async (registryId, variantId) => {\n  let returnValue = null\n  if (!registryId || !variantId) {\n    return returnValue\n  }\n\n  let reqData = {\n    query: GET_MA_VARIANT,\n    variables: {\n      registryId: registryId,\n      variantId: variantId\n    }\n  }\n\n  await graphQL(reqData).then(res => {\n    if (res.data && res.data.data.maItemVariants) {\n      returnValue = res.data.data.maItemVariants\n    } else if (res.errors) {\n      console.error(\"Error occurred while fetching variants\", res.errors)\n    }\n  })\n\n  return returnValue\n}\n\nexport const formatPrice = (price, currency = CURRENCY) => {\n  if (price) {\n    price = String(price).replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")\n    return `${currency}${price}`\n  }\n  return price\n}","import React from 'react';\nimport \"./CheckBox.scss\";\n\nconst CheckBox = (props) => {\n  return (\n    <label className={[\"checkbox d-flex align-items-center\", props.className ? props.className : \"\"].join(\" \")}>\n      <span className=\"checkbox__input mr-2\">\n        <input\n          type=\"checkbox\"\n          name={props.id}\n          value={props.id}\n          checked={props.checked ? \"checked\" : \"\"}\n          onChange={props.changeHandler}\n        />\n        <span className=\"checkbox__control d-flex justify-content-center align-items-center\">\n          <i className=\"icon-check\"></i>\n        </span>\n      </span>\n      <span className={[\"radio__label text-sm\", props.textClass ? props.textClass : \"\"].join(\" \")}>{props.display} {props.count ? \"(\" + props.count + \")\" : null}</span>\n    </label>\n  )\n}\n\nexport default CheckBox;","import React, {useState, useEffect} from \"react\";\nimport \"./SelectCategory.scss\";\nimport Modal from \"../modal-component/ModalComponent\";\nimport {GET_CATEGORIES} from \"../../../../api/queries\";\nimport {graphQL} from \"../../../../api/axios\";\nimport Button from \"../button-component/ButtonComponent\";\nimport {useSelector, useDispatch} from \"react-redux\";\nimport {getAllCategories} from \"../../../../utils/commonFunction\";\nimport CheckBox from \"../check-box/CheckBox\";\nimport { setLoader } from \"modules/registry/RegistryActions\";\n\n// TODO: Change this Component to handle multiple categories\nconst SelectCategory = (props) => {\n\n  const dispatch = useDispatch()\n  const registryInfo = useSelector(state => state.registry.info)\n  const [categories, setCategories] = useState([]);\n  const [searched, setSearched] = useState(false)\n  const [searchedCategories, setSearchedCategories] = useState([]);\n  const [selectedCategory, setSelectedCategory] = useState(props.currentCategory ? props.currentCategory : []);\n  // const [selectedCategory, setSelectedCategory] = useState([]);\n  let fetchingAPI = false\n\n  const getCategories = () => {\n    let data = {\n      query: GET_CATEGORIES,\n      variables: {\n        registryId: parseInt(registryInfo.id)\n      },\n    }\n    dispatch(setLoader(true))\n    graphQL(data).then(res => {\n      if (res.data.data.registryCategories) {\n        fetchingAPI = false\n        let resData = getAllCategories(res.data.data.registryCategories, true)\n        let finalCheckList = []\n\n        // For Parent categories\n        for (let category of resData) {\n          if (category.categoryType && Number(category.categoryType.id) === 2) {\n            continue\n          }\n\n          let finalSubCategory = []\n          if (category.subCategories.length) {\n            // For Sub-Categories\n            for (let subCategory of category.subCategories) {\n              let tempSubCategory = []\n              if (subCategory.subProductTypes.length) {\n\n                // For subProductType\n                for (let subProductType of subCategory.subProductTypes) {\n                  subProductType.categoryName = subCategory.categoryName + ' (' + subProductType.categoryName + ')'\n                  tempSubCategory.push(subProductType)\n                }\n              } else {\n                tempSubCategory.push(subCategory)\n              }\n              finalSubCategory.push(...tempSubCategory)\n            }\n            let tempCategory = {...category}\n            tempCategory.subCategories = finalSubCategory\n            finalCheckList.push(tempCategory)\n          }\n        }\n        setCategories(finalCheckList);\n        dispatch(setLoader(false))\n      }\n    }).catch(err => {\n      dispatch(setLoader(false))\n      console.error(err.message)\n    })\n  }\n\n  const closeModal = () => {\n    setSelectedCategory(props.currentCategory);\n    props.closeModal(false);\n  }\n\n  const saveSelectedCategory = () => {\n    props.changeCurrentCategory(selectedCategory)\n    props.closeModal(false);\n  }\n\n  const handleSelectionCategory = (category, subCategory) => {\n    subCategory = {\n      ...subCategory,\n      \"mainCategory\": category\n    }\n    let sameCatagory = [...selectedCategory].find(category => subCategory.id === category.id)\n    if (sameCatagory) {\n      let allSelectedCategory = selectedCategory.filter(category => subCategory.id !== category.id)\n      setSelectedCategory(allSelectedCategory)\n    } else {\n      let allSelectedCategory = [...selectedCategory, subCategory]\n      setSelectedCategory(allSelectedCategory)\n    }\n  }\n\n  useEffect(() => {\n    if (props.currentCategory) {\n      setSelectedCategory(props.currentCategory)\n    } else {\n      setSelectedCategory([])\n    }\n  }, [props.currentCategory])\n\n  if (categories.length === 0 && props.showModal) {\n    if (!fetchingAPI) {\n      fetchingAPI = true;\n      getCategories();\n    }\n  }\n\n  const getCategoriesToDisplay = (cat) => {\n    return (\n      <div className=\"col\">\n        {cat.map(category => {\n          return (\n            <div className=\"mb-6\" key={\"select-\" + category.categoryName}>\n              <h4 className=\"parent-category mb-3 font-medium px-2\">{category.categoryName}</h4>\n              <div className=\"category-columns\">\n                {category.subCategories ?\n                  category.subCategories.map(subCategory =>\n                    <div className=\"w-100 category-column\">\n                      <label className=\"checkbox d-flex align-items-center py-1 px-2 m-0\">\n                        <span className=\"checkbox__input mr-2\">\n                          <input\n                            type=\"checkbox\"\n                            name={subCategory.id}\n                            value={subCategory.id}\n                            checked={selectedCategory.find(category => category.id === subCategory.id) ? \"checked\" : \"\"}\n                            onChange={() => handleSelectionCategory(category.categoryName, subCategory)}\n                          />\n                          <span className=\"checkbox__control d-flex justify-content-center align-items-center\">\n                            <i className=\"icon-check\"></i>\n                          </span>\n                        </span>\n                        <span className=\"select_category_radio__label text-body\">{subCategory.categoryName}</span>\n                      </label>\n                    </div>\n                  )\n                  : null}\n              </div>\n\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n\n  const categorySelectBody = (\n    <div className=\"row select-category-body\">\n      {searched ? (searchedCategories.length > 0 ? getCategoriesToDisplay(searchedCategories) : getCategoriesToDisplay([])) : getCategoriesToDisplay(categories)}\n    </div>\n  )\n\n  const modalFooter = (\n    <div className=\"categories-modal-footer\">\n      <label>{selectedCategory.length > 0 ? selectedCategory.length + ' selected' : null}</label>\n      <Button\n        variant=\"primary\"\n        className=\"font-medium p-1\"\n        onClick={saveSelectedCategory}\n      >Done</Button>\n    </div>\n  )\n\n  // Search Category Section\n  const searchInputRef = React.createRef()\n  const changeLinkRef = React.createRef()\n  const searchLinkRef = React.createRef()\n\n  const focusSearchCategoryInput = () => {\n    if (searchInputRef.current) {\n      searchInputRef.current.focus();\n    }\n  }\n\n  const searchInputFocusHandler = (e) => {\n    if (!e.target.classList.contains(\"search-category-input-focus\")) {\n      e.target.classList.add(\"search-category-input-focus\");\n    }\n  }\n\n  const searchInputBlurHandler = (e) => {\n    if (e.target.value.length > 0) {\n      return\n    }\n\n    if (e.target.classList.contains(\"search-category-input-focus\")) {\n      e.target.classList.remove(\"search-category-input-focus\");\n    }\n  }\n\n  const searchCategory = (searchText) => {\n    //  Searching through the category\n    let finalCategories = []\n    for (const parentCategory of categories) {\n      let newParentCategory = {...parentCategory}\n      newParentCategory.subCategories = []\n      let searchMatched = false\n\n      for (const subCategory of parentCategory.subCategories) {\n        if (subCategory.categoryName.toLowerCase().match(searchText.toLowerCase())) {\n          searchMatched = true\n          newParentCategory.subCategories.push(subCategory)\n        }\n      }\n\n      if (searchMatched) {\n        finalCategories.push(newParentCategory)\n        searchMatched = false\n      }\n    }\n    changeLinkRef.current.style.display = \"block\";\n    searchLinkRef.current.style.display = \"none\";\n    setSearchedCategories(finalCategories)\n  }\n\n  const searchCategoryInputChangeHandler = (e) => {\n    // setSearched(true)\n    if (e.target.value.length > 0) {\n      searchLinkRef.current.style.display = \"block\";\n      changeLinkRef.current.style.display = \"none\";\n      // searchCategory(e.target.value)\n    } else {\n      setSearched(false)\n      if (searchInputRef.current) {\n        if (searchInputRef.current.value.length > 0) {\n          searchInputRef.current.value = \"\"\n        }\n        searchLinkRef.current.style.display = \"none\";\n        changeLinkRef.current.style.display = \"none\";\n        searchInputRef.current.focus()\n        setSearchedCategories([])\n      }\n    }\n  }\n\n  const changeLinkClickHandler = (e) => {\n    e.preventDefault();\n    setSearched(false)\n    if (searchInputRef.current) {\n      if (searchInputRef.current.value.length > 0) {\n        searchInputRef.current.value = \"\"\n      }\n      changeLinkRef.current.style.display = \"none\";\n      searchInputRef.current.focus()\n      setSearchedCategories([])\n    }\n  }\n\n  const searchOnEnter = (e) => {\n    e.persist()\n    if (e.keyCode === 13 && searchInputRef.current && searchInputRef.current.value.length > 0){\n      setSearched(true)\n      searchCategory(searchInputRef.current.value)\n    }\n  }\n\n  const searchLinkClickHandler = (e) => {\n    e.preventDefault()\n    if (searchInputRef.current) {\n      setSearched(true)\n      searchCategory(searchInputRef.current.value)\n    }\n  }\n\n  const headerContent = (\n    <div className=\"align-self-center d-flex position-relative select-category-search-section mr-3\">\n      <input\n        type=\"text\"\n        placeholder=\"Search category...\"\n        className=\"search-category-input pl-5 py-1 pr-1 text-body m-0\"\n        ref={searchInputRef}\n        onKeyUp={(e) => searchOnEnter(e)}\n        onChange={(e) => searchCategoryInputChangeHandler(e)}\n        onFocus={(e) => searchInputFocusHandler(e)}\n        onBlur={(e) => searchInputBlurHandler(e)}\n      />\n      <i className=\"icon-search search-category-icon\" onClick={focusSearchCategoryInput}/>\n      <a\n        tabindex='0'\n        className=\"search-category-clear-link text-sm font-medium\"\n        href=\"#\"\n        onClick={(e) => changeLinkClickHandler(e)}\n        ref={changeLinkRef}>Clear all</a>\n      <a\n        tabIndex='0'\n        className=\"search-category-clear-link text-sm font-medium\"\n        href=\"#\"\n        onClick={(e) => searchLinkClickHandler(e)}\n        ref={searchLinkRef}>Search</a>\n    </div>\n  )\n\n  return (\n    <Modal\n      show={props.showModal}\n      title=\"Select Category\"\n      footer={modalFooter}\n      headerContent={headerContent}\n      closeModal={closeModal}>\n      {categorySelectBody}\n    </Modal>\n  )\n}\n\nexport default SelectCategory;","import React from \"react\";\nimport \"./CategoryPill.scss\";\n\nconst CategoryPill = (props) => {\n  return (\n    <div\n      className={[\"edit-gift-category-pill p-1 text-sm\", props.className ? props.className : \"\"].join(\" \")}>{props.text}</div>\n  )\n}\n\nexport default CategoryPill;","import React from \"react\";\nimport \"./TogglePills.scss\";\n\nconst TogglePills = (props) => {\n  return (\n    <div\n      className={[\"toggle-pills px-2 py-1 d-flex align-items-end\", props.activeClass, props.className ? props.className : \"\"].join(\" \")}\n      onClick={props.onClick}\n      data-tut={props.dataTut ? props.dataTut : ''}\n    >\n      <i className={[props.iconClass, \"mr-2\"].join(\" \")}/>\n      <span className=\"text-sm\">{props.text}</span>\n    </div>\n  )\n}\n\nexport default TogglePills;","import React from 'react';\nimport \"./RadioButton.scss\";\n\nconst RadioButton = (props) => {\n  return (\n    <label className={props.centerText?\"radio d-flex mb-0 align-items-center\": \"radio d-flex mb-0\"}>\n      <span className=\"radio__input mr-2\">\n      <input\n        type=\"radio\"\n        name={props.name}\n        checked={props.checked ? \"checked\" : \"\"}\n        onChange={props.changeHandler}\n        />\n      <span className=\"radio__control\"></span>\n      </span>\n      <span className={[\"radio__label\", props.textClass ? props.textClass : null].join(\" \")}>{props.display} {props.count ? \"(\"+props.count+\")\" : null}</span>\n      {props.children ? props.children : null}\n    </label>\n  )\n}\n\nexport default RadioButton;","import React from 'react';\nimport './TourCard.scss';\n\n\nconst TourCard = (props) => {\n  // { current, content, totalSteps, gotoStep, close }\n\n  let dotsArray = []\n  if (props.totalSteps > 1) {\n    for (let i = 0; i < props.totalSteps; i++) {\n      if (i <= props.current) {\n        dotsArray.push(true)\n      } else {\n        dotsArray.push(false)\n      }\n    }\n  }\n\n  return (\n    <div className=\"p-6 tour-card\">\n      <div className=\"d-flex mb-2\">\n        {[...dotsArray].map(dotsData =>\n          <div className={['tour-card-dots', dotsData ? 'visited' : ''].join(\" \")}>\n          </div>\n        )}\n      </div>\n      {props.content}\n      <div\n        className=\"mt-4 py-1 px-3 tour-card-btn font-medium\"\n        onClick={() => props.current === Number(props.totalSteps - 1) ? props.close() : props.gotoStep(props.current + 1)}\n      >\n        {props.totalSteps === 1 ? 'Ok, Got It!' : props.current === Number(props.totalSteps - 1) ? \"Lets Get Started\" : \"Next\"}\n      </div>\n    </div>\n  )\n}\n\nexport default TourCard;\n\n","export const CDN_BASE_URL = \"https://registry-cdn.monicaandandy.com\";\n\nexport const ROUTES = {\n    Rectangle_1685_2x_2: CDN_BASE_URL + \"/assets/Rectangle 1685@2x 2.png\",\n    image_2_2x: CDN_BASE_URL + \"/assets/image 2@2x.png\",\n    Rectangle_1685_2x: CDN_BASE_URL + \"/assets/Rectangle 1685@2x.png\",\n    image_1_2x: CDN_BASE_URL + \"/assets/image 1@2x.png\",\n\n    gift_icon: CDN_BASE_URL + '/icons/gift_icon.svg',\n    file_heart_svg: CDN_BASE_URL + '/icons/file_heart.svg',\n    facebook: CDN_BASE_URL + '/icons/facebook.svg',\n    instagram: CDN_BASE_URL + '/icons/instagram .svg',\n    twitter: CDN_BASE_URL + '/icons/twitter.svg',\n    facebook_disabled: CDN_BASE_URL + '/icons/facebook_disabled.svg',\n    instagram_disabled: CDN_BASE_URL + '/icons/instagram _disabled.svg',\n    twitter_disabled: CDN_BASE_URL + '/icons/twitter_disabled.svg',\n}","import React from \"react\";\nimport \"./EditGift.scss\";\nimport Modal from \"../modal-component/ModalComponent\";\nimport {toast} from \"react-toastify\";\nimport Counter from \"../counter/Counter\";\nimport {connect} from \"react-redux\";\nimport SelectCategory from \"../select-category/SelectCategory\";\nimport CategoryPill from \"./category-pill/CategoryPill\";\nimport TogglePills from \"../add-gift/toggle-pills/TogglePills\";\nimport RadioButton from \"../radio-button/RadioButton\";\nimport Button from \"../button-component/ButtonComponent\";\nimport MoreOption from \"../more-option/MoreOption\";\nimport {UPDATE_REGISTRY_ITEMS} from \"../../../../api/mutations\";\nimport {graphQLMultipart} from \"../../../../api/axios\";\nimport {\n  getProducts,\n  getCategories,\n  updateMushHaveTourFlag,\n  updateGroupGiftTourFlag,\n  getMAVariant\n} from \"../../../../utils/commonFunction\";\nimport {SETTINGS_LINKS} from \"../../../../utils/constants\";\nimport Tour from 'reactour';\nimport TourCard from 'modules/commons/components/tour-card/TourCard';\nimport {MUST_HAVE_STEPS, GROUP_GIFT_STEPS} from 'utils/constants';\nimport {ROUTES} from \"utils/cdn-assets-links\";\n\nclass EditGift extends React.Component {\n\n  PRICE_REGEX = /(^[0-9]+(.?[0-9]{1,2})?$)/g\n  PRICE_REGEX_WHILE_ENTERING = /^[0-9]+.{0,1}[0-9]{0,2}?$/g\n\n  OTHER_CATEOGRY_ID = \"171\"\n\n  M_A_STORE_NAME = \"monicaandandy\"\n  MAX_IMAGE_SIZE = 2000000; // 2MB\n  ACCEPTED_IMAGE_TYPE = [\n    'image/jpg',\n    'image/jpeg',\n    'image/png'\n  ]\n\n  howToGiftOptions = [\n    {\n      id: 1,\n      text: \"Get cash equivalent for this gift\",\n      content: (\n        <div>\n          <p className=\"text-body\">Get cash equivalent for this gift</p>\n          <p className=\"text-sm mt-1\">Choose this option for the best purchase experience.</p>\n          <a className=\"text-sm edit-gift-links mt-1\" href=\"#\"\n             onClick={(ev) => this.learnMoreLinkClickHandler(ev, true)}>Learn More</a>\n        </div>\n      ),\n      learnMoreContent: (\n        <>\n          <p className=\"text-body edit-gift-learn-more-modal-text mt-3\">When you choose this option, the money for\n            the gift (including shipping) will be transferred to your\n            bank account.</p>\n\n          <p className=\"text-body edit-gift-learn-more-modal-text mt-4\">When the time is right for you, youll click\n            through to order directly from the website and have it\n            delivered to your home.</p>\n\n          <p className=\"text-body edit-gift-learn-more-modal-text mt-4\">This helps decrease the number of duplicate\n            gifts, keeps your returns to a minimum, and gives you control\n            over when you receive the gift.</p>\n\n          <p className=\"text-body edit-gift-learn-more-modal-text mt-4\"><a href={SETTINGS_LINKS.BANK_ACCOUNT}\n                                                                           target=\"_blank\"\n                                                                           className=\"edit-gift-links\">Connect your\n            bank account to your profile,</a> if you havent already.</p>\n        </>\n      )\n    },\n    {\n      id: 2,\n      text: \"Send your guests to the stores website to purchase and ship now.\",\n      content: (\n        <div>\n          <p className=\"text-body\">Send your guests to the stores website to purchase and ship now.</p>\n          <a className=\"text-sm edit-gift-links mt-1\" href=\"#\"\n             onClick={(ev) => this.learnMoreLinkClickHandler(ev, false)}>Learn More</a>\n        </div>\n      ),\n      learnMoreContent: (\n        <p className=\"text-body edit-gift-learn-more-modal-text mt-1\">Please note, M+A is unable to accept returns\n          or manage shipping when you choose this option.</p>\n      )\n    }\n  ]\n  storeItemUrlInputRef = React.createRef()\n  state = {\n    showCategoryModal: false,\n    storeUrlInputHasFocus: false,\n    tempStoreItemUrl: \"\",\n    storeItemUrl: \"\",\n    storeName: \"\",\n    giftImage: {},\n    giftTitle: \"\",\n    giftPrice: \"\",\n    giftQuantity: 1,\n    giftCategories: [],\n    giftMustHave: false,\n    giftGroupGift: false,\n    giftPurchased: false,\n    howToGift: {},\n    giftNote: \"\",\n    showLearnMore: false,\n    learnMoreCashAccept: false,\n    closeMainModalTemp: false,\n    isTourOpen: false,\n    isMustHaveTour: false,\n    isGroupGiftTour: false,\n    steps: [],\n    giftVariants: [],\n    currentVariant: {}\n  }\n\n  imageInputRef = React.createRef()\n\n  CUSTOM_PIC_OPTIONS = [\n    {\n      id: 1,\n      name: \"Replace\",\n      action: () => {\n        if (this.imageInputRef.current) {\n          this.imageInputRef.current.click();\n        }\n      }\n    }\n  ]\n\n  learnMoreLinkClickHandler = (ev, cashAcceptedLearnMore) => {\n    ev.preventDefault()\n    ev.stopPropagation()\n\n    this.setState({\n      showLearnMore: true,\n      learnMoreCashAccept: cashAcceptedLearnMore,\n      closeMainModalTemp: true\n    })\n  }\n\n  closeLearnMoreModalHandler = () => {\n    this.setState({\n      showLearnMore: false,\n      closeMainModalTemp: false\n    })\n  }\n\n  getRefinedCategory = (category) => {\n    let refinedCategory = null;\n    for (let parentCategory of [...this.props.stateCategories]) {\n      let newParentCategory = {...parentCategory}\n      newParentCategory.subCategories = []\n      for (let subCategory of parentCategory.subCategories) {\n        let newSubCategory = {...subCategory}\n        let catToPush = []\n        if (newSubCategory.subProductTypes && newSubCategory.subProductTypes.length > 0) {\n          catToPush = newSubCategory.subProductTypes.map(subCat => {\n            let newSubCat = {...subCat}\n            newSubCat.categoryName = newSubCategory.categoryName + \" (\" + newSubCat.categoryName + \")\";\n            return newSubCat;\n          })\n        }\n        delete newSubCategory.subProductTypes\n        catToPush.unshift(newSubCategory)\n        newParentCategory.subCategories.push(...catToPush)\n      }\n      //  = parentCategory.subCategories.map(subCategory => {\n      //   if (subCategory.subProductTypes.length > 0){\n      //\n      //   }\n      // })\n      let foundCategory = newParentCategory.subCategories.filter(subCat => subCat.id === category.id);\n      if (foundCategory.length === 1) {\n        refinedCategory = {\n          ...foundCategory[0],\n          mainCategory: parentCategory.categoryName,\n          displayName: parentCategory.categoryName + \": \" + foundCategory[0].categoryName\n        }\n        break\n      }\n    }\n\n    return refinedCategory;\n  }\n\n\n  componentDidMount() {\n    if (this.props.data) {\n      // Setting product data to local state\n      let currentCategory = [];\n      for (let category of this.props.data.registryCategories) {\n        if (category.category.id === this.OTHER_CATEOGRY_ID) {\n          continue\n        }\n        currentCategory.push(this.getRefinedCategory(category))\n      }\n      const howToGift = this.props.data.isCashAcceptedOnly ? this.howToGiftOptions[0] : this.howToGiftOptions[1]\n      if (this.props.data.item.shopifyItemVariantId && this.props.stateRegistryInfo.id) {\n        let variants = getMAVariant(this.props.stateRegistryInfo.id, this.props.data.item.shopifyItemVariantId)\n\n        variants.then(res => {\n          if (res) {\n            let currentVariant = res.find(variant => variant.variantId === this.props.data.item.shopifyItemVariantId)\n            this.setState({\n              giftVariants: res,\n              currentVariant: currentVariant ? currentVariant : {}\n            })\n          }\n        })\n      }\n\n      this.setState({\n        storeItemUrl: this.props.data.item.storeItemUrl,\n        tempStoreItemUrl: this.props.data.item.storeItemUrl,\n        storeName: this.props.data.item.store.storeName,\n        giftImage: {\n          type: \"url\",\n          value: this.props.data.imageUrl\n        },\n        giftTitle: this.props.data.title,\n        giftPrice: this.props.data.item.price,\n        giftQuantity: this.props.data.quantity,\n        giftCategories: currentCategory ? [...currentCategory] : [],\n        giftMustHave: this.props.data.mostWanted,\n        giftGroupGift: this.props.data.isGroupGift,\n        giftPurchased: this.props.data.isPurchased,\n        giftNote: this.props.data.note ? this.props.data.note : \"\",\n        howToGift: howToGift\n      })\n    }\n  }\n\n  closeCategoryModal = (value) => {\n    this.setState({\n      showCategoryModal: value\n    })\n  }\n\n  openSelectCategoryModal = (e) => {\n    e.preventDefault()\n    this.setState({\n      showCategoryModal: true\n    })\n  }\n\n  setCategory = categories => {\n    this.setState({\n      giftCategories: [...categories]\n    })\n  }\n\n  modalCloseHandler = () => {\n    this.props.closeModal()\n  }\n\n  selectFileHandler = (ev) => {\n    if (ev.target && ev.target.files.length > 0) {\n      const file = ev.target.files[0]\n\n      // Verifying file is image\n      if (this.ACCEPTED_IMAGE_TYPE.includes(file.type)) {\n        if (file.size <= this.MAX_IMAGE_SIZE) {\n          let reader = new FileReader();\n\n          reader.onload = (e) => {\n            const newProductImage = {\n              type: \"custom\",\n              value: e.target.result,\n              file: file,\n              fileType: file.type,\n              fileName: file.name\n            }\n            this.setState({\n              giftImage: newProductImage\n            });\n          }\n\n          reader.readAsDataURL(file); // Converting to base64 string\n        } else {\n          toast.error(\"File size exceeds the limit\");\n        }\n      } else {\n        toast.error(\"Please select valid image.\");\n      }\n    }\n  }\n\n  // Input change handlers\n  productNameChangeHandler = (e) => {\n    this.setState({\n      giftTitle: e.target.value\n    })\n  }\n\n  productNoteChangeHandler = (e) => {\n    this.setState({\n      giftNote: e.target.value\n    })\n  }\n\n  productStoreUrlChangeHandler = (e) => {\n    this.setState({\n      tempStoreItemUrl: e.target.value\n    })\n  }\n\n  productPriceChangeHandler = (ev) => {\n    if ((ev.target.value.length > 0 && (Number(ev.target.value[ev.target.value.length - 1]) >= 0 || ev.target.value[ev.target.value.length - 1] === \".\")) && ev.target.value.match(this.PRICE_REGEX_WHILE_ENTERING) || ev.target.value.length <= 0) {\n      this.setState({\n        giftPrice: ev.target.value\n      })\n    }\n  }\n\n  incrementQuantity = () => {\n    this.setState((prevState, _) => ({\n      giftQuantity: prevState.giftQuantity + 1\n    }))\n  }\n\n  decrementQuantity = () => {\n    if (this.state.giftQuantity - 1 > 0) {\n      this.setState((prevState, _) => {\n        // cannot reduce quantity of Partial purchased or reserved product\n        let quantity = this.props.data.quantityStatus && this.props.data.quantityStatus.purchased_quantity + this.props.data.quantityStatus.reserved_quantity > prevState.giftQuantity - 1 ? prevState.giftQuantity : prevState.giftQuantity - 1\n\n        return {\n          giftQuantity: quantity\n        }\n      })\n    }\n  }\n\n  toggleMustHave = () => {\n    this.setState((prevState, _) => ({\n      giftMustHave: !prevState.giftMustHave\n    }))\n    if (!this.props.stateRegistryInfo.isMustHaveApplied) {\n      let steps = {...MUST_HAVE_STEPS}\n      steps[0].selector = '[data-tut=\"must-have-tour\"]';\n      steps.length = 1;\n      this.setState({\n        isMustHaveTour: true,\n        steps: steps,\n        isTourOpen: true\n      })\n    }\n  }\n\n  toggleGroupGift = () => {\n    this.setState((prevState, _) => ({\n      giftGroupGift: !prevState.giftGroupGift\n    }))\n    if (!this.props.stateRegistryInfo.isGroupGiftApplied) {\n      let steps = {...GROUP_GIFT_STEPS}\n      steps[0].selector = '[data-tut=\"group-gift-tour\"]';\n      steps.length = 1;\n      this.setState({\n        isGroupGiftTour: true,\n        steps: steps,\n        isTourOpen: true\n      })\n    }\n  }\n\n  togglePurchased = () => {\n    this.setState((prevState, _) => ({\n      giftPurchased: !prevState.giftPurchased\n    }))\n  }\n\n  changeHowToGift = option => {\n    this.setState({\n      howToGift: {...option}\n    })\n  }\n\n  removeItemClickHandler = (e) => {\n    e.preventDefault();\n    this.props.openRemoveModal(true);\n    this.modalCloseHandler()\n  }\n\n  storeUrlChangeClickHandler = (e, inputRef) => {\n    e.preventDefault();\n    if (inputRef.current) {\n      inputRef.current.disabled = false;\n      inputRef.current.focus();\n    }\n  }\n\n  storeItemUrlBlurHandler = e => {\n    e.preventDefault();\n    setTimeout(() => {\n      this.setState({\n        storeUrlInputHasFocus: false\n      })\n    }, 100)\n    e.target.disabled = true;\n  }\n\n  resetStoreItemUrlClickHandler = inputRef => {\n    this.setState((prevState, _) => ({\n      tempStoreItemUrl: prevState.storeItemUrl\n    }))\n    if (inputRef.current) {\n      inputRef.current.disabled = true;\n      inputRef.current.blur();\n    }\n  }\n\n  confirmStoreItemUrlClickHandler = inputRef => {\n    this.setState((prevState, _) => ({\n      storeItemUrl: prevState.tempStoreItemUrl\n    }))\n    if (inputRef.current) {\n      inputRef.current.disabled = true;\n      inputRef.current.blur();\n    }\n  }\n\n  validateData = () => {\n    try {\n      new URL(this.state.storeItemUrl);\n    } catch {\n      toast.error(\"Invalid store URL\")\n      return false\n    }\n\n    if (this.state.giftTitle.length <= 0) {\n      toast.error(\"Product Name cannot be empty\")\n      return false\n    }\n\n    if (this.state.giftPrice.length <= 0) {\n      toast.error(\"Price cannot be empty\")\n      return false\n    } else if (!String(this.state.giftPrice).match(this.PRICE_REGEX)) {\n      toast.error(\"Please enter valid amount\")\n      return false\n    }\n    return true\n  }\n\n  dataURItoBlob = (dataURI, fileType, fileName) => {\n    let byteString = atob(dataURI.split(',')[1]);\n    let ab = new ArrayBuffer(byteString.length);\n    let ia = new Uint8Array(ab);\n    for (let i = 0; i < byteString.length; i++) {\n      ia[i] = byteString.charCodeAt(i);\n    }\n\n    let blob = new Blob([ab], {type: fileType});\n    return new File([blob], fileName, {\n      type: fileType\n    })\n  }\n\n  saveItemClickHandler = () => {\n    if (!this.validateData()) {\n      return\n    }\n    let fd = new FormData()\n    let cashAcceptedOnly = false\n    if (this.state.howToGift.id) {\n      cashAcceptedOnly = this.state.howToGift.id === 1\n    }\n    let reqData = {\n      query: UPDATE_REGISTRY_ITEMS,\n      operationName: \"updateRegistryItem\",\n      variables: {\n        \"itemId\": this.props.data.id,\n        \"itemData\": {\n          \"quantity\": this.state.giftQuantity,\n          \"mostWanted\": this.state.giftMustHave,\n          \"isGroupGift\": this.state.giftGroupGift,\n          \"isCashAcceptedOnly\": cashAcceptedOnly,\n          \"registryCategories\": this.state.giftCategories.map(category => category.id),\n          \"price\": this.state.giftPrice,\n          \"note\": this.state.giftNote,\n          \"title\": this.state.giftTitle\n        }\n      }\n    }\n\n    if (this.state.currentVariant.pattern) {\n      reqData.variables.itemData['pattern'] = this.state.currentVariant.pattern\n    }\n\n    if (this.state.currentVariant.variantId) {\n      reqData.variables.itemData['shopifyItemVariantId'] = this.state.currentVariant.variantId\n    }\n\n    if (this.state.currentVariant.imageUrl) {\n      reqData.variables.itemData['imageUrl'] = this.state.currentVariant.imageUrl\n    }\n\n    if (this.state.giftImage.type === \"custom\") {\n      reqData.variables.itemData['images'] = null;\n      reqData.variables.itemData['imageUrl'] = null;\n\n      let map = {\n        images: [\"variables.itemData.images\"]\n      }\n      fd.append(\"map\", JSON.stringify(map))\n      fd.append(\"images\", this.dataURItoBlob(this.state.giftImage.value, this.state.giftImage.fileType, this.state.giftImage.fileName))\n    }\n\n    if (Object.keys(this.state.giftImage).length <= 0) {\n      reqData.variables.itemData['imageUrl'] = null;\n    }\n    fd.append(\"operations\", JSON.stringify(reqData))\n\n    graphQLMultipart(fd).then(res => {\n      if (res.data.data) {\n        getProducts(this.props.stateRegistryInfo.id, this.props.dispatch)\n        getCategories(this.props.stateRegistryInfo.id, this.props.dispatch)\n        toast.success(<p><b>{this.state.giftTitle}</b> is updated.</p>)\n        this.modalCloseHandler()\n      }\n    }).catch(err => {\n      toast.error(\"Some error occurred while updating product\")\n      console.log(err.response)\n    })\n  }\n\n  closeTour = () => {\n    // For must-have\n    if (this.state.isMustHaveTour && !this.state.isGroupGiftTour) {\n      updateMushHaveTourFlag(this.props.stateRegistryInfo, this.props.dispatch)\n    }\n\n    // For Group Gift\n    if (!this.state.isMustHaveTour && this.state.isGroupGiftTour) {\n      updateGroupGiftTourFlag(this.props.stateRegistryInfo, this.props.dispatch)\n    }\n\n    this.setState({\n      isTourOpen: false\n    })\n  }\n\n  // Gift Variant change handler\n  changeCurrentVariantClickHandler = (variant) => {\n    if (!variant) {\n      return\n    }\n    let giftImage = {\n      type: \"url\",\n      value: variant.imageUrl\n    }\n    let giftPrice = variant.price\n\n    this.setState({\n      giftImage: giftImage,\n      giftPrice: giftPrice,\n      currentVariant: {...variant}\n    })\n  }\n\n  render() {\n\n    let editableItem = true\n\n    if (this.props.data.isGroupGift){\n      editableItem = this.props.data.quantityStatus.total_contribution_amount <= 0\n    } else {\n      editableItem = this.props.data.quantityStatus.purchased_quantity + this.props.data.quantityStatus.reserved_quantity <= 0\n    }\n\n    if (this.state.giftImage.value) {\n      let foundRemoveOption = this.CUSTOM_PIC_OPTIONS.find(option => option.id === 2)\n      if (!foundRemoveOption) {\n        this.CUSTOM_PIC_OPTIONS.push({\n          id: 2,\n          name: \"Remove\",\n          action: () => {\n            this.setState({\n              giftImage: {}\n            })\n          }\n        })\n      }\n    } else {\n      this.CUSTOM_PIC_OPTIONS = this.CUSTOM_PIC_OPTIONS.filter(option => option.id !== 2)\n    }\n\n    const modalFooter = (\n      // <div className=\"d-flex w-100 align-items-center justify-content-between\">\n      <div className={[\"d-flex w-100 align-items-center\", editableItem ? \"justify-content-between\": \"justify-content-end\"].join(\" \")}>\n        {editableItem ?\n          <a href=\"#\" className=\"edit-gift-links font-medium\" onClick={(e) => this.removeItemClickHandler(e)}>Remove\n            Item</a>\n        : null}\n\n        <div>\n          <Button variant=\"secondary\" className=\"text-body font-medium px-2 py-1 mr-2\"\n                  onClick={() => window.open(this.state.storeItemUrl, '_blank')}>View Details</Button>\n          <Button variant=\"primary\" className=\"text-body font-medium px-2 py-1 mr-2\"\n                  onClick={this.saveItemClickHandler}>Save & Close</Button>\n        </div>\n      </div>\n    )\n\n    return (\n      <>\n        <div>\n          <Modal\n            show={this.props.show && !this.state.closeMainModalTemp}\n            title=\"Edit item\"\n            footer={modalFooter}\n            closeModal={this.modalCloseHandler}>\n\n            <div className=\"row mt-4 edit-gift-content\">\n              <div className=\"col-12 col-md-5\">\n                <div className={[\"mr-3 edit-gift-image-section\"].join(\" \")}>\n                  {!this.state.giftImage.value ?\n                    //TODO: Image From CDN\n                    <>\n                      <div className=\"edit-gift-default-image d-flex\">\n                        <img\n                          className=\"m-auto\"\n                          src={ROUTES.gift_icon}\n                          alt=\"No Image\"/>\n                      </div>\n                      <p className=\"text-sm edit-gift-upload-image-size mt-2\">Upload a photo with maximum 2 mb size.</p>\n                    </>\n                    : null}\n\n                  {this.state.giftImage.value ?\n                    <img src={this.state.giftImage.value} className=\"edit-gift-image\" alt=\"Gift\"/>\n                    : null}\n\n                  {/*  No edit image option when store is not M&A */}\n                  {this.state.storeName !== this.M_A_STORE_NAME ?\n                    <div className=\"edit-gift-custom-image-more-options\">\n                      <MoreOption\n                        data={this.CUSTOM_PIC_OPTIONS}\n                        iconClass=\"icon-preview\"\n                        activeOptionClass=\"view-registry-cover-option-active\"\n                        buttonClass=\"edit-gift-update-image-option p-1\"/>\n\n                      <input type=\"file\" className=\"d-none\" accept={this.ACCEPTED_IMAGE_TYPE.join(\",\")}\n                             ref={this.imageInputRef}\n                             onChange={(ev) => this.selectFileHandler(ev)}/>\n                    </div>\n                    : null}\n                </div>\n              </div>\n              <div className=\"col-12 col-md-7 edit-gift-detail\">\n                <div className=\"ml-3 mr-7\">\n                  <div className=\"row\">\n                    <div className=\"col\">\n                      {/* When store is M&A */}\n                      {this.state.storeName === this.M_A_STORE_NAME ?\n                        <h2>{this.state.giftTitle}</h2>\n                        : null}\n\n                      {/* When store is not M&A */}\n                      {this.state.storeName !== this.M_A_STORE_NAME ?\n                        <div className=\"edit-gift-input-container\">\n                          <p className=\"edit-gift-input-label text-sm font-medium mb-1\">Product Name</p>\n                          <textarea\n                            rows={2}\n                            className=\"w-100 mw-100 edit-gift-input h2 p-2 edit-gift-resize-none\"\n                            value={this.state.giftTitle}\n                            onChange={(e) => this.productNameChangeHandler(e)}\n                          />\n                        </div>\n                        : null}\n                    </div>\n                  </div>\n\n                  {this.state.storeName !== this.M_A_STORE_NAME ?\n                    <div className=\"row mt-5\">\n                      <div className=\"col\">\n                        {/* When store is not M&A */}\n                        <div className=\"edit-gift-input-container\">\n                          <p className=\"edit-gift-input-label text-sm font-medium mb-1\">Store</p>\n                          <div className=\"position-relative\">\n                            <input\n                              className=\"w-100 mw-100 edit-gift-input text-body py-1 pl-2 pr-14\"\n                              value={this.state.tempStoreItemUrl}\n                              ref={this.storeItemUrlInputRef}\n                              disabled={true}\n                              onFocus={() => this.setState({storeUrlInputHasFocus: true})}\n                              onBlur={(e) => this.storeItemUrlBlurHandler(e)}\n                              onChange={(e) => this.productStoreUrlChangeHandler(e)}\n                            />\n                            {!this.state.storeUrlInputHasFocus ?\n                              <a className=\"edit-gift-input-change-url edit-gift-links font-medium\" href=\"#\"\n                                 onClick={(e) => this.storeUrlChangeClickHandler(e, this.storeItemUrlInputRef)}>Change</a>\n                              :\n                              <div className=\"edit-gift-store-url-submit\">\n                                {/*TODO: Change icons once added to global icons*/}\n                                <button className=\"icon-close mr-3\"\n                                        onClick={() => this.resetStoreItemUrlClickHandler(this.storeItemUrlInputRef)}/>\n                                <button className=\"icon-check\"\n                                        onClick={() => this.confirmStoreItemUrlClickHandler(this.storeItemUrlInputRef)}/>\n                              </div>\n                            }\n\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    : null}\n\n                  <div className=\"row mt-5\">\n                    <div className=\"col-6\">\n                      {/* When store is M&A */}\n                      <div className=\"edit-gift-input-container\">\n                        <p className=\"edit-gift-input-label text-sm font-medium mb-1\">Price</p>\n                        {/* When store is M&A */}\n                        {this.state.storeName === this.M_A_STORE_NAME ?\n                          <h4>$ {this.state.giftPrice}</h4>\n                          : null}\n                        {/* When store is not M&A */}\n                        {this.state.storeName !== this.M_A_STORE_NAME ?\n                          <div className=\"edit-gift-input-overlay\">\n                            <input\n                              type=\"text\"\n                              className=\"w-100 mw-100 edit-gift-input py-1 text-body pl-5\"\n                              value={this.state.giftPrice}\n                              onChange={(e) => this.productPriceChangeHandler(e)}/>\n                            <span className=\"text-body edit-gift-price-currency\">$</span>\n                          </div>\n                          : null}\n                      </div>\n                    </div>\n\n                    <div className=\"col-6\">\n                      {/* When store is M&A */}\n                      <div className=\"edit-gift-input-container\">\n                        <p className=\"edit-gift-input-label text-sm font-medium mb-1\">Quantity</p>\n                        <Counter\n                          className=\"mt-2\"\n                          counter={this.state.giftQuantity}\n                          incrementHandler={this.incrementQuantity}\n                          decrementHandler={this.decrementQuantity}\n                        />\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Variant is only for MA product */}\n                  {this.state.storeName === this.M_A_STORE_NAME && this.state.giftVariants.length > 0 ?\n                    <div className=\"row mt-5\">\n                      <div className=\"col\">\n                        <div className=\"edit-gift-input-container\">\n                          <p className=\"edit-gift-input-label text-sm font-medium mb-1\">Color</p>\n                          <div className=\"d-flex flex-wrap\">\n                            {this.state.giftVariants.map(variant => (\n                              <button\n                                className={[\"edit-gift-variant mr-3 mb-2 p-2\", this.state.currentVariant?.id === variant.id ? \"edit-gift-variant-selected\" : \"\"].join(\" \")}\n                                style={{backgroundImage: `url(${variant.iconUrl})`}}\n                                onClick={() => this.changeCurrentVariantClickHandler(variant)}\n                              />\n                            ))}\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    : null}\n\n\n                  <div\n                    className={[\"row\", this.state.storeName === this.M_A_STORE_NAME && this.state.giftVariants.length > 0 ? \"mt-3\" : \"mt-5\"].join(\" \")}>\n                    <div className=\"col\">\n                      {/* When store is M&A */}\n                      <div className=\"edit-gift-input-container\">\n                        <div className=\"mb-1 d-flex\">\n                          <p className=\"edit-gift-input-label text-sm font-medium\">Category</p>\n                          {/* When store is not M&A */}\n                          {this.state.storeName !== this.M_A_STORE_NAME ?\n                            <a href=\"#\" className=\"edit-gift-links font-medium text-sm ml-2\"\n                               onClick={(e) => this.openSelectCategoryModal(e)}>Add</a>\n                            : null}\n                        </div>\n                        <div>\n                          {this.state.giftCategories.map(category => {\n                            return <CategoryPill text={`${category.mainCategory} : ${category.categoryName}`}\n                                                 className=\"mt-1 mr-1\"/>\n                          })}\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"row mt-5\">\n                    <div className=\"col d-flex\">\n                      <TogglePills\n                        dataTut=\"must-have-tour\"\n                        iconClass=\"icon-heart\"\n                        activeClass={this.state.giftMustHave ? \"edit-gift-active-must-have\" : null}\n                        onClick={this.toggleMustHave}\n                        text=\"Must Have\"\n                        className=\"mr-2\"/>\n                      <TogglePills\n                        dataTut=\"group-gift-tour\"\n                        iconClass=\"icon-guest\"\n                        activeClass={this.state.giftGroupGift ? \"edit-gift-active-group-gift\" : null}\n                        onClick={editableItem ? this.toggleGroupGift : null}\n                        text=\"Group Gift\"\n                        className={[\"mr-2\", !editableItem? \"edit-gift-disabled\" : \"\"].join(\" \")}/>\n                    </div>\n                  </div>\n\n                  {/* When store is not M&A */}\n                  {this.state.storeName !== this.M_A_STORE_NAME ?\n                    <div className=\"row mt-5\">\n                      <div className=\"col\">\n                        <div className=\"edit-gift-input-container\">\n                          <p className=\"edit-gift-input-label text-sm font-medium\">How to gift?</p>\n                          {this.howToGiftOptions.map((option, index) => (\n                            <div className={[index === 0 ? \"mt-1\" : \"mt-2\", !editableItem? \"edit-gift-disabled\" : \"\"].join(\" \")} key={\"how-to-gift-option-\" + option.id}>\n                              <RadioButton\n                                name=\"how-to-gift\"\n                                textClass=\"text-sm\"\n                                // display={option.text}\n                                checked={option.id === this.state.howToGift.id ? true : null}\n                                changeHandler={() => editableItem ? this.changeHowToGift(option) : null}>{option.content}</RadioButton>\n                            </div>\n                          ))}\n                        </div>\n                      </div>\n                    </div>\n                    : null}\n\n                  <div className=\"row mt-5 mb-3\">\n                    <div className=\"col\">\n                      <div className=\"edit-gift-input-container\">\n                        <p className=\"edit-gift-input-label text-sm font-medium mb-1\">Notes</p>\n                        <textarea\n                          rows={2}\n                          className=\"w-100 mw-100 edit-gift-input text-body p-2\"\n                          placeholder=\"Write a note for your friends and family\"\n                          value={this.state.giftNote}\n                          onChange={(e) => this.productNoteChangeHandler(e)}\n                        />\n                      </div>\n                    </div>\n                  </div>\n\n                </div>\n              </div>\n            </div>\n          </Modal>\n          {this.state.showCategoryModal ?\n            <SelectCategory\n              showModal={this.state.showCategoryModal}\n              closeModal={this.closeCategoryModal}\n              currentCategory={this.state.giftCategories ? [...this.state.giftCategories] : []}\n              changeCurrentCategory={this.setCategory}\n            />\n            : null}\n\n          <Modal\n            show={this.state.showLearnMore}\n            title={this.state.learnMoreCashAccept ? this.howToGiftOptions[0].text : this.howToGiftOptions[1].text}\n            size=\"md\"\n            closeIconClass=\"mb-auto\"\n            footer={(\n              <Button variant=\"primary\" className=\"px-6 py-1\" onClick={this.closeLearnMoreModalHandler}>Ok, got\n                it!</Button>\n            )}\n            closeModal={this.closeLearnMoreModalHandler}>\n            {this.state.learnMoreCashAccept ? this.howToGiftOptions[0].learnMoreContent : this.howToGiftOptions[1].learnMoreContent}\n          </Modal>\n\n        </div>\n        <Tour\n          highlightedMaskClassName='tour-bg'\n          steps={this.state.steps}\n          isOpen={this.state.isTourOpen}\n          CustomHelper={TourCard}\n          onRequestClose={this.closeTour}/>\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  stateCategories: state.myRegistry.checkList,\n  stateRegistryInfo: state.registry.info\n})\n\nexport default connect(\n  mapStateToProps\n)(EditGift);\n","import React from \"react\";\nimport \"./TogglePills.scss\";\n\nconst TogglePills = (props) => {\n    return (\n        <div\n          onClick={props.onClick}\n          className={[\"cash-fund-toggle-pills px-2 py-1\", props.className ? props.className : \"\", props.selectedClass ? props.selectedClass : \"\"].join(\" \")}>\n            <i className={[\"cash-fund-toggle-icon float-left\", props.iconClass ? props.iconClass : null].join(\" \")} />\n            <span className=\"text-sm ml-2\">{props.text}</span>\n        </div>\n    )\n}\n\nexport default TogglePills;","import React from \"react\";\nimport \"./AddCashFundModal.scss\";\nimport Modal from \"../../modal-component/ModalComponent\";\nimport Button from \"../../button-component/ButtonComponent\";\nimport {toast} from \"react-toastify\";\nimport TogglePills from \"./toggle-pills/TogglePills\";\nimport {connect} from \"react-redux\";\nimport {graphQL, graphQLMultipart} from \"../../../../../api/axios\";\nimport {GET_CASH_FUND_CATEGORIES} from \"../../../../../api/queries\";\nimport {ADD_REGISTRY_ITEM, UPDATE_REGISTRY_ITEMS} from \"../../../../../api/mutations\";\nimport {setCashFundCategories} from \"../../../../my-registry/MyRegistryActions\";\nimport {M_A_STORE_NAME} from \"../../../../../utils/constants\";\nimport {\n  dataURItoBlob,\n  getCategories,\n  getProducts,\n  fetchDefaultCashFundImage\n} from \"../../../../../utils/commonFunction\";\nimport {Dropdown} from 'reactjs-dropdown-component';\nimport {setLoader} from \"../../../../registry/RegistryActions\";\n\nclass AddCashFundModal extends React.Component {\n\n  PRICE_REGEX = /(^[0-9]+(.?[0-9]{1,2})?$)/g\n  PRICE_REGEX_WHILE_ENTERING = /^[0-9]+.{0,1}[0-9]{0,2}?$/g\n\n  API_CALLED = false\n\n  // Accepted Image input types for Cash fund image\n  ACCEPTED_IMAGE_TYPE = [\n    'image/jpg',\n    'image/jpeg',\n    'image/png'\n  ]\n  MAX_IMAGE_SIZE = 5000000; // 5MB\n\n  INITIAL_IMAGE_SET = false\n\n  // Cash Fund data\n  state = {\n    cashFundImage: {},\n    cashFundName: this.props.categoryData && !this.props.edit ? this.props.categoryData.registryCategories[0].category.categoryName : \"\",\n    cashFundAmount: \"\",\n    hideTotal: false,\n    cashFundType: {},\n    cashFundDefaultImage: \"\",\n    cashFundNote: \"\",\n    mustHave: false,\n    categories: [],\n    errors: {},\n    edit: false\n  }\n\n  imageRef = React.createRef()\n\n  modalCloseHandler = () => {\n    this.props.closeModal();\n  }\n\n  validateCashFundData = () => {\n    let valid = true;\n    let errors = {}\n    if (this.state.cashFundName.length <= 0) {\n      errors['cashFundName'] = \"Please enter Cash Fund Name.\"\n      valid = false;\n      // toast.error(\"Please enter Cash Fund Name.\")\n      // return false;\n    }\n\n    if (this.state.cashFundAmount.length <= 0) {\n      errors['cashFundAmount'] = \"Please enter Cash Fund Amount\"\n      valid = false;\n      // toast.error(\"Please enter Cash Fund Amount\")\n      // return false;\n    } else if (!this.state.cashFundAmount.match(this.PRICE_REGEX)) {\n      valid = false;\n      errors['cashFundAmount'] = \"Please enter valid amount\"\n    } else if (this.props.edit && Number(this.state.cashFundAmount) < this.props.categoryData?.quantityStatus.total_contribution_amount) {\n      valid = false;\n      errors['cashFundAmount'] = \"Amount is less than already contributed amount.\"\n    }\n\n    let selectedCat = this.state.categories.find(category => category.selected)\n    if (!selectedCat) {\n      errors['cashFundType'] = \"Please select Cash Fund Type.\"\n      valid = false;\n      // toast.error(\"Please select Cash Fund Type.\")\n      // return false;\n    }\n\n    this.setState({\n      errors: errors\n    })\n\n    return valid;\n  }\n\n  // Adding Cash Fund\n  addCashFundClickHandler = () => {\n    if (this.validateCashFundData() && !this.API_CALLED) {\n      let formData = new FormData()\n      let selectedCat = this.state.categories.find(category => category.selected)\n      let itemData = {\n        title: this.state.cashFundName,\n        price: this.state.cashFundAmount,\n        mostWanted: this.state.mustHave,\n        quantity: 1,\n        isGroupGift: true,\n        hideTotal: this.state.hideTotal,\n        note: this.state.cashFundNote,\n        registryCategories: [Number(selectedCat.id)]\n      }\n\n      if (!this.props.edit) {\n        itemData['isCashFund'] = true\n        itemData['tags'] = []\n      }\n\n      let reqData = {}\n      let mutationCalled = \"\"\n\n      if (this.props.edit) {\n        mutationCalled = \"updateRegistryItems\"\n        reqData = {\n          query: UPDATE_REGISTRY_ITEMS,\n          operationName: \"updateRegistryItem\",\n          variables: {\n            \"itemId\": this.props.categoryData.id,\n            \"itemData\": itemData\n          }\n        }\n      } else {\n        mutationCalled = \"addRegistryItems\"\n        reqData = {\n          query: ADD_REGISTRY_ITEM,\n          operationName: \"addRegistryItems\",\n          variables: {\n            registryId: this.props.stateRegistryInfo.id,\n            input: [{\n              storeName: M_A_STORE_NAME,\n              items: [itemData]\n            }]\n          }\n        }\n      }\n\n\n      if (this.state.cashFundImage.type === \"custom\") {\n        let map = {}\n        if (this.props.edit) {\n          map = {\n            images: [\"variables.itemData.images\"]\n          }\n          reqData.variables.itemData['images'] = null;\n          reqData.variables.itemData['imageUrl'] = null;\n        } else {\n          map = {\n            images: [\"variables.input.0.items.0.images\"]\n          }\n          reqData.variables.input[0].items[0]['images'] = null;\n        }\n\n        formData.append(\"map\", JSON.stringify(map))\n        formData.append(\"images\", dataURItoBlob(this.state.cashFundImage.value, this.state.cashFundImage.fileType, this.state.cashFundImage.fileName))\n      } else {\n        if (this.props.edit) {\n          reqData.variables.itemData['images'] = null;\n          reqData.variables.itemData['imageUrl'] = this.state.cashFundImage.value ? this.state.cashFundImage.value : this.state.cashFundDefaultImage;\n        } else {\n          reqData.variables.input[0].items[0]['imageUrl'] = this.state.cashFundImage.value ? this.state.cashFundImage.value : this.state.cashFundDefaultImage;\n        }\n      }\n      formData.append(\"operations\", JSON.stringify(reqData))\n      this.API_CALLED = true\n      this.props.dispatch(setLoader(true))\n      graphQLMultipart(formData).then(async res => {\n        await this.props.dispatch(setLoader(false))\n        if (res.data.data && res.data.data[mutationCalled]) {\n          // Successfully added product\n          getProducts(this.props.stateRegistryInfo.id, this.props.dispatch);\n          getCategories(this.props.stateRegistryInfo.id, this.props.dispatch);\n          if (this.props.edit) {\n            toast.success((\n              <p><b>{this.state.cashFundName}</b> updated successfully!</p>\n            ))\n          } else {\n            toast.success((\n              <p><b>{this.state.cashFundName}</b> added to your registry!</p>\n            ))\n          }\n\n          this.modalCloseHandler()\n        } else if (res.data.errors) {\n          this.API_CALLED = true\n        }\n      }).catch(async err => {\n        await this.props.dispatch(setLoader(false))\n        this.API_CALLED = true\n        if (err.response.data && err.response.data.errors) {\n          for (let error of err.response.data.errors) {\n            toast.error(error.message);\n          }\n        }\n        console.error(err.response)\n      })\n    }\n  }\n\n  presentCategories = (allCategories) => {\n    let categories = allCategories.map(category => {\n      let categoryData = {\n        id: category.id,\n        title: category.categoryName,\n        selected: this.state.cashFundType && this.state.cashFundType.id === category.id,\n        key: \"categories\"\n      }\n      if (category.catId) {\n        categoryData['catId'] = category.catId\n      }\n      return categoryData\n    })\n    this.setState({categories: [...categories]})\n    if (this.state.cashFundType && this.state.cashFundType.catId) {\n      this.fetchDefaultImage(this.state.cashFundType.catId);\n    }\n  }\n\n  resetThenSet = (id, key) => {\n    this.INITIAL_IMAGE_SET = false\n    if (this.state.errors.cashFundType) {\n      let newErrorState = {...this.state.errors}\n      delete newErrorState.cashFundType\n      this.setState({\n        errors: newErrorState\n      })\n    }\n    this.setState({\n      categories: this.state.categories.map(category => {\n        category.selected = category.id === id;\n        return category;\n      })\n    })\n    let cashFund = this.state.categories.find(category => category.id === id)\n    if (cashFund.catId) {\n      this.fetchDefaultImage(cashFund.catId)\n    }\n  }\n\n  // Modal Data\n  modalTitle = `${this.props.edit ? 'Edit' : 'Add'} Cash Fund`;\n  modalFooterButton = (\n    <Button\n      variant=\"primary\"\n      className=\"px-5 py-1 font-medium text-body\"\n      onClick={this.addCashFundClickHandler}\n    >{`${this.props.edit ? 'Save' : 'Add'} & Close`}</Button>\n  )\n\n  // Handling custom image selection\n  selectFileHandler = (ev) => {\n    if (ev.target && ev.target.files.length > 0) {\n      const file = ev.target.files[0]\n\n      // Verifying file is image\n      if (this.ACCEPTED_IMAGE_TYPE.includes(file.type)) {\n        if (file.size <= this.MAX_IMAGE_SIZE) {\n          let reader = new FileReader();\n\n          reader.onload = (e) => {\n            const newProductImage = {\n              type: \"custom\",\n              value: e.target.result,\n              fileType: file.type,\n              fileName: file.name\n            }\n            this.setState({\n              cashFundImage: newProductImage\n            })\n          }\n\n          reader.readAsDataURL(file); // Converting to base64 string\n        } else {\n          toast.error(\"File size exceeds the limit\");\n        }\n      } else {\n        toast.error(\"Please select valid image.\");\n      }\n    }\n  }\n\n\n  // Input change handlers\n  cashFundNameChangeHandler = (ev) => {\n    if (this.state.errors.cashFundName) {\n      let newErrorState = {...this.state.errors}\n      delete newErrorState.cashFundName\n      this.setState({\n        errors: newErrorState\n      })\n    }\n\n    this.setState({\n      cashFundName: ev.target.value\n    })\n  }\n\n  cashFundAmountChangeHandler = (ev) => {\n\n    if ((ev.target.value.length > 0 && (Number(ev.target.value[ev.target.value.length - 1]) >= 0 || ev.target.value[ev.target.value.length - 1] === \".\")) && ev.target.value.match(this.PRICE_REGEX_WHILE_ENTERING) || ev.target.value.length <= 0) {\n      if (this.state.errors.cashFundAmount) {\n        let newErrorState = {...this.state.errors}\n        delete newErrorState.cashFundAmount\n        this.setState({\n          errors: newErrorState\n        })\n      }\n\n      this.setState({\n        cashFundAmount: ev.target.value\n      })\n    }\n  }\n\n  cashFundHideTotalChangeHandler = (_) => {\n    this.setState((prevState, _) => ({\n      hideTotal: !prevState.hideTotal\n    }))\n  }\n\n  cashFundTypeChangeHandler = (ev) => {\n    if (this.props.stateCashFundCategories.length > 0) {\n      const changedCategory = this.props.stateCashFundCategories.find(category => Number(category.id) === Number(ev.target.value))\n      if (changedCategory.id) {\n        this.setState({\n          cashFundType: changedCategory\n        })\n      }\n    }\n  }\n\n  cashFundNoteChangeHandler = (ev) => {\n    this.setState({\n      cashFundNote: ev.target.value\n    })\n  }\n\n  mustHaveClickHandler = () => {\n    this.setState((prevState, _) => ({\n      mustHave: !prevState.mustHave\n    }))\n  }\n\n  // Fetch DEFAULT IMAGE of category\n\n  fetchDefaultImage = async (categoryId) => {\n    if (!this.state.cashFundImage.value && !this.INITIAL_IMAGE_SET) {\n      let result = fetchDefaultCashFundImage(categoryId)\n      result.then(res => {\n        if (res.status === \"success\") {\n          this.setState({\n            cashFundDefaultImage: res.data\n          })\n        }\n      })\n    }\n  }\n\n  render() {\n    if (this.props.categoryData?.imageUrl && !this.state.cashFundDefaultImage && this.state.cashFundDefaultImage !== this.props.categoryData.imageUrl) {\n      this.setState({\n        cashFundDefaultImage: this.props.categoryData.imageUrl\n      })\n      this.INITIAL_IMAGE_SET = true\n    }\n\n    if (this.props.edit && !this.state.edit) {\n      if (this.props.categoryData) {\n        const data = this.props.categoryData\n\n        this.setState({\n          edit: true,\n          cashFundNote: data.note ? data.note : \"\",\n          mustHave: data.mostWanted ? data.mostWanted : false,\n          cashFundName: data.title ? data.title : \"\",\n          cashFundAmount: String(data.item?.price) ? String(data.item.price) : \"\",\n          hideTotal: data.item?.hideTotal ? data.item.hideTotal : false\n        })\n      }\n    }\n\n    if (this.props.stateCashFundCategories.length > 0 && this.state.categories.length <= 0) {\n      this.presentCategories(this.props.stateCashFundCategories)\n    }\n\n    if (this.props.stateCashFundCategories.length <= 0) {\n      // Fetching all cash fund categories\n      const reqData = {\n        query: GET_CASH_FUND_CATEGORIES,\n        operationName: \"getCashFund\",\n        variables: {\n          registryId: this.props.stateRegistryInfo.id\n        }\n      }\n\n      graphQL(reqData).then(res => {\n        if (res.data.data && res.data.data.cashFundCategories) {\n          let allCashFundCategories = res.data.data.cashFundCategories.map(cat => {\n            cat.category['catId'] = cat.category.id\n            cat.category.id = cat.id\n            return cat.category\n          })\n          this.presentCategories(allCashFundCategories);\n          this.props.dispatch(setCashFundCategories(allCashFundCategories))\n        }\n      }).catch(err => {\n        console.error(err.response)\n      })\n    }\n\n\n    if (!this.state.cashFundType.id && this.props.stateCashFundCategories.length > 0) {\n      let foundCategory = false\n\n      if (this.props.categoryData?.registryCategories && this.props.categoryData.registryCategories.length > 0) {\n        for (let cashFundCategory of this.props.stateCashFundCategories) {\n          if ((this.props.edit && Number(this.props.categoryData.registryCategories[0].category.id) === Number(cashFundCategory.catId)) || (!this.props.edit && Number(this.props.categoryData.registryCategories[0].category.id) === Number(cashFundCategory.id))) {\n            foundCategory = true;\n            (\n              async () => {\n                await this.setState({\n                  cashFundType: cashFundCategory\n                })\n                this.presentCategories(this.props.stateCashFundCategories)\n              }\n            )()\n            break\n          }\n        }\n      }\n      //For future ref\n      //Default category will be first\n      // if (!foundCategory) {\n      //   (\n      //     async () => {\n      //       await this.setState({\n      //         cashFundType: this.props.stateCashFundCategories[0]\n      //       })\n      //       this.presentCategories(this.props.stateCashFundCategories)\n      //     }\n      //   )()\n      // }\n    }\n\n    return (\n      <>\n        <Modal\n          show={this.props.show}\n          title={this.modalTitle}\n          footer={this.modalFooterButton}\n          closeModal={this.modalCloseHandler}>\n\n          <div className=\"row cash-fund-modal-content\">\n            <div className=\"col-12 col-md-5\">\n              <div className=\"cash-fund-modal-image-section mr-1\">\n                {this.state.cashFundImage.type ?\n                  <img src={this.state.cashFundImage.value} draggable=\"false\" alt=\"Cash Fund\"\n                       className=\"cash-fund-modal-image\"/>\n                  :\n                  this.state.cashFundDefaultImage ?\n                    <img src={this.state.cashFundDefaultImage} draggable=\"false\" alt=\"Cash Fund\"\n                         className=\"cash-fund-modal-image\"/>\n                    :\n                    <div className=\"cash-fund-modal-no-image\"/>\n                }\n                <i\n                  className=\"icon-preview change-cash-fund-image-icon p-1\"\n                  onClick={() => {\n                    this.imageRef.current.click()\n                  }}\n                />\n                <input\n                  type=\"file\"\n                  className=\"d-none\"\n                  ref={this.imageRef}\n                  accept={this.ACCEPTED_IMAGE_TYPE.join(\",\")}\n                  onChange={(ev) => this.selectFileHandler(ev)}\n                />\n              </div>\n            </div>\n            <div className=\"col-12 col-md-7 cash-fund-input-section\">\n              <div className=\"ml-3 mr-6\">\n\n                {/* Cash Fund name */}\n                <div className=\"row\">\n                  <div className=\"col cash-fund-input-container\">\n                    <p className=\"cash-fund-input-label text-sm font-medium mt-2 mt-md-0\">Cash Fund Name<label\n                      className=\"asterik\">*</label></p>\n                    <input\n                      className={[\"cash-fund-input h2 mt-1 w-100 mw-100 p-2 mb-0\", this.state.errors.cashFundName ? \"cash-fund-input-error\" : \"\"].join(\" \")}\n                      type=\"text\"\n                      value={this.state.cashFundName}\n                      onChange={(ev) => this.cashFundNameChangeHandler(ev)}\n                    />\n                    {this.state.errors.cashFundName ? <label\n                        className=\"text-sm cash-fund-input-error-text mt-1\">{this.state.errors.cashFundName}</label>\n                      : null}\n                  </div>\n                </div>\n\n                {/* Cash Fund type */}\n                <div className=\"row mt-5\">\n                  <div className=\"col cash-fund-input-container\">\n                    <p className=\"cash-fund-input-label text-sm font-medium mb-1\">Type<label\n                      className=\"asterik\">*</label></p>\n                    <div\n                      className={[\"cash-fund-select w-100 mw-100\", this.state.errors.cashFundType ? \"cash-fund-input-error\" : \"\"].join(\" \")}>\n                      <Dropdown\n                        title=\"Select category\"\n                        list={this.state.categories}\n                        resetThenSet={this.resetThenSet}\n                      />\n                    </div>\n                    {this.state.errors.cashFundType ? <label\n                        className=\"text-sm cash-fund-input-error-text mt-1\">{this.state.errors.cashFundType}</label>\n                      : null}\n                  </div>\n                </div>\n\n\n                <div className=\"row mt-5\">\n\n                  <div className=\"col cash-fund-input-container\">\n                    <p className=\"cash-fund-input-label text-sm font-medium mb-1\">Total Amount<label\n                      className=\"asterik\">*</label></p>\n                    <div className=\"row\">\n\n                      {/* Cash fund amount */}\n                      <div className=\"col\">\n                        <div className=\"position-relative\">\n                          <input\n                            className={[\"cash-fund-input w-100 mw-100 p-1 pl-5 text-body mb-0\", this.state.errors.cashFundAmount ? \"cash-fund-input-error\" : \"\"].join(\" \")}\n                            type=\"text\"\n                            value={this.state.cashFundAmount}\n                            onChange={(ev) => this.cashFundAmountChangeHandler(ev)}\n                          />\n                          <span className=\"cash-fund-price-input-currency text-body\">$</span>\n                        </div>\n                      </div>\n\n                      {/* Cash fund hidden option */}\n                      <div className=\"col align-self-center\">\n                        <label\n                          className=\"checkbox d-flex align-items-center\">\n                          <span className=\"checkbox__input mr-2\">\n                            <input\n                              type=\"checkbox\"\n                              checked={this.state.hideTotal}\n                              onChange={(ev) => this.cashFundHideTotalChangeHandler(ev)}\n                            />\n                            <span className=\"checkbox__control d-flex justify-content-center align-items-center\">\n                              <i className=\"icon-check\"/>\n                            </span>\n                          </span>\n                          <span\n                            className=\"radio__label text-sm\">Hide total from guests</span>\n                        </label>\n                      </div>\n                    </div>\n                    {this.state.errors.cashFundAmount ? <label\n                        className=\"text-sm cash-fund-input-error-text mt-1\">{this.state.errors.cashFundAmount}</label>\n                      : null}\n                  </div>\n                </div>\n\n                <div className=\"row mt-5\">\n                  <div className=\"col\">\n                    <TogglePills\n                      text=\"Must Have\"\n                      iconClass=\"icon-heart\"\n                      selectedClass={this.state.mustHave ? \"cash-fund-must-have-selected\" : null}\n                      onClick={this.mustHaveClickHandler}\n                    />\n\n                  </div>\n                </div>\n\n\n                {/* Cash fund note */}\n                <div className=\"row mt-5 mb-3\">\n                  <div className=\"col cash-fund-input-container\">\n                    <p className=\"cash-fund-input-label text-sm font-medium\">Notes</p>\n                    <textarea\n                      placeholder=\"Write a note for your friends and family\"\n                      className=\"cash-fund-textarea w-100 mw-100 mt-1 w-100 mw-100 p-1 text-body mb-0\"\n                      value={this.state.cashFundNote}\n                      onChange={(ev) => this.cashFundNoteChangeHandler(ev)}\n                      rows={2}/>\n                  </div>\n                </div>\n\n              </div>\n            </div>\n          </div>\n        </Modal>\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    stateCashFundCategories: state.myRegistry.cashFundCategories,\n    stateRegistryInfo: state.registry.info\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(AddCashFundModal);","import React, {useState} from 'react'\nimport \"./AddedCard.scss\";\nimport MoreOption from \"../more-option/MoreOption\";\nimport {\n  sortableHandle,\n} from 'react-sortable-hoc';\nimport {useSelector, useDispatch} from 'react-redux';\nimport Modal from \"../modal-component/ModalComponent\";\nimport CardItem from \"../card-item/CardItem\";\nimport {addProductHandler, formatPrice} from 'utils/commonFunction';\nimport Button from \"../button-component/ButtonComponent\";\nimport EditGift from \"../edit-gift/EditGift\";\nimport GiftStatusPill from \"../gift-status-pill/GiftStatusPill\";\nimport MarkAsPurchased from \"../mark-as-purchased/MarkAsPurchased\";\nimport {CURRENCY} from \"../../../../utils/constants\";\nimport AddCashFundModal from \"../cash-fund-card/add-cash-fund-modal/AddCashFundModal\";\n\nconst AddedCard = (props) => {\n\n  const dispatch = useDispatch();\n  let stateGuestViewRegistry = useSelector(state => state.viewRegistry.guestViewRegistry)\n  const stateRecommendedProducts = useSelector(state => state.myRegistry.recommendedProducts)\n  const stateFilterApplied = useSelector(state => state.viewRegistry.viewFilterApplied.childFilter)\n  const stateAddedProducts = useSelector(state => state.myRegistry.addedProducts)\n  const stateRegistryInfo = useSelector(state => state.registry.info)\n  const [recommendedProducts, setRecommendedProducts] = useState([])\n  const [show, setShow] = useState(false);\n  const modalTitle = `Recommended ${props.categoryTitle ? props.categoryTitle : props.data.registryCategories[0].category.categoryName}`\n  const [showRemoveModel, setShowRemoveModel] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [updateModal, setUpdateModal] = useState(false);\n  let [showMarkPurchased, setShowMarkPurchased] = useState(false)\n  let [showCashFundModal, setShowCashFundModal] = useState(false)\n\n  const showRecommendation = (e, category) => {\n    e.stopPropagation()\n    // Fetching all recommendations for that particular product category\n    let categoryRecommended = [...stateRecommendedProducts.filter(product => Number(category.id) === Number(product.category.id))]\n\n    // Removing duplicate products if found any\n    let jsonObject = categoryRecommended.map(JSON.stringify);\n    let uniqueSet = new Set(jsonObject);\n    categoryRecommended = Array.from(uniqueSet).map(JSON.parse);\n\n    setRecommendedProducts(categoryRecommended.map(product => {\n      // Resetting recommended product quantity\n      product.quantity = 1;\n      if (product.maItemVariantItemRecommendation.length) {\n        product['activeVariant'] = product.maItemVariantItemRecommendation[0]\n      } else {\n        product['activeVariant'] = null\n      }\n      return product;\n    }));\n\n    setShow(true);\n  }\n\n  const showRemoveModelPopUp = (e) => {\n    e.stopPropagation()\n    setShowRemoveModel(true);\n  }\n\n  const showMarkAsPurchasedModal = (e) => {\n    e.stopPropagation()\n    setShowMarkPurchased(true);\n  }\n\n  let moreOptionsData = []\n  let addRemoveOption = false\n\n  if (props.data.isGroupGift && props.data.quantityStatus.total_contribution_amount <= 0) {\n    addRemoveOption = true\n  } else if (!props.data.isGroupGift && props.data.quantityStatus.purchased_quantity + props.data.quantityStatus.reserved_quantity <= 0) {\n    addRemoveOption = true\n  }\n\n  if (addRemoveOption) {\n    moreOptionsData.unshift({\n      name: \"Remove\",\n      action: (e) => showRemoveModelPopUp(e)\n    })\n  }\n\n  if (!props.data.isPurchased) {\n    moreOptionsData.unshift({\n      name: `Record a ${props.data.isGroupGift ? 'contribution' : 'purchase'}`,\n      action: (e) => showMarkAsPurchasedModal(e)\n    })\n  }\n\n  if (Number(props.data.registryCategories[0].category.categoryType.id) !== 2) {\n    moreOptionsData.unshift({\n      name: \"View Recommendations\",\n      action: (e) => showRecommendation(e, props.data.registryCategories[0])\n    })\n  }\n\n\n  const removeConfirmFooter = (\n    <>\n      <Button className='py-1 px-3 font-medium' variant='secondary' onClick={() => setShowRemoveModel(false)}>Do not\n        remove</Button>\n      <Button className='py-1 px-3 font-medium' variant='primary' onClick={() => {\n        props.removeProductFromCartHandler();\n        setShowRemoveModel(false);\n      }}>Remove</Button>\n    </>\n  )\n\n  // Incrementing quantity of local recommended product\n  const incrementQuantity = (cardId, quantity) => {\n    let newRecommended = [];\n    for (let product of [...recommendedProducts]) {\n      if (product.id === cardId) {\n        product.quantity += quantity;\n      }\n      newRecommended.push(product)\n    }\n    setRecommendedProducts(newRecommended)\n  }\n\n  // Decrementing quantity of local recommended product\n  const decrementQuantity = (cardId, quantity) => {\n    let newRecommended = [];\n    let updated = false;\n    for (let product of [...recommendedProducts]) {\n      if (product.id === cardId) {\n        if (product.quantity - quantity <= 0) {\n          break;\n        } else {\n          product.quantity -= quantity;\n          updated = true;\n        }\n      }\n      newRecommended.push(product)\n    }\n\n    if (updated) {\n      setRecommendedProducts(newRecommended)\n    }\n  }\n\n  // Open Edit Gift Modal\n  const openEditModal = () => {\n    if (props.data.registryCategories.length > 0 && props.data.registryCategories[0]?.category.categoryType.id !== \"2\" && !props.data.isPurchased) {\n      setShowEditModal(true)\n    }\n\n    if (props.data.registryCategories.length > 0 && props.data.registryCategories[0]?.category.categoryType.id === \"2\" && !props.data.isPurchased) {\n      setShowCashFundModal(true)\n    }\n\n\n  }\n\n  // Handle drag\n  // TODO: Change Draggable icon\n  const DragHandle = sortableHandle(() => <i\n    className={[\"ml-4 drag-icon m-a-popover m-a-popover-top-right\", (props.disabledDrag || stateFilterApplied.length !== 0) ? \"disabled-drag\" : \"\"].join(\" \")}>\n    <div className=\"m-a-popover-content drag-drop-popover w-auto px-3 py-2\">\n      <p className=\"text-sm font-weight-normal m-a-popover-content-desc\">Rearrange</p>\n    </div>\n  </i>);\n\n  const setActiveRecommandationVariantHandler = (productID, variant) => {\n    let newRecommended = [];\n    let updated = false;\n    for (let product of [...recommendedProducts]) {\n      if (productID === product.id) {\n        product.activeVariant = variant\n        updated = true\n      }\n      newRecommended.push(product)\n    }\n\n    if (updated) {\n      setRecommendedProducts(newRecommended)\n      setUpdateModal(!updateModal)\n    }\n  }\n\n  return (\n    <>\n      {!props.multipleCategories ?\n        <>\n          <div className=\"added-card py-5 pr-0 pr-sm-0 pr-md-2 px-2 px-md-0\" onClick={openEditModal}>\n            <div className=\"row\">\n              <div className=\"col-12 col-md-2\">\n                <div className=\"pl-0 pl-md-2\">\n                  {props.data?.imageUrl ?\n                    <img\n                      className={[\"product-img d-block mx-md-auto mx-0\", Number(props.data.registryCategories[0].category.categoryType.id) === 2 ? \"added-card-product-image-radius\" : \"\"].join(\" \")}\n                      src={props.data?.imageUrl}\n                      alt={props.data?.item.title}/>\n                    :\n                    <div className=\"added-card-no-product-image\"/>\n                  }\n\n                </div>\n\n              </div>\n              <div className={props.draggable ? \"col-12 col-md-5\" : \"col-12 col-md-6\"}>\n                {/* TODO: change category */}\n                <div\n                  className=\"text-sm category my-3 my-md-0\">{props.data.registryCategories[0].category.parentCategory && props.data.registryCategories[0].category.parentCategory.parentCategory !== null ? props.data.registryCategories[0].category.parentCategory.categoryName + \" (\" + props.data.registryCategories[0].category.categoryName + \")\" : props.data.registryCategories[0].category.categoryName}</div>\n                <h2>{props.data.title}</h2>\n                <div className=\"d-flex mt-2\">\n                  <div className=\"\">{formatPrice(props.data.item.price)}</div>\n                  {/*/!* TODO: Add Strikeout price dynamic *!/*/}\n                  {/*<div className=\"text-sm my-auto ml-1 strick-price\">$257.99</div>*/}\n                </div>\n                {!props.data.isGroupGift ?\n                  props.data.quantity > 1 ?\n                    <>\n                      {props.data.quantityStatus.purchased_quantity > 0 ?\n                        <GiftStatusPill variant=\"purchased\"\n                                        text={`${props.data.quantityStatus.purchased_quantity} Purchased`}\n                                        className=\"d-inline-block mr-1 mt-2\"/>\n                        : null}\n                      {props.data.quantityStatus.reserved_quantity > 0 ?\n                        <GiftStatusPill variant=\"reserved\"\n                                        text={`${props.data.quantityStatus.reserved_quantity} Reserved`}\n                                        className=\"d-inline-block mr-1 mt-2\"/>\n                        : null}\n                      {props.data.quantityStatus.still_needed > 0 ?\n                        <GiftStatusPill\n                          text={`${props.data.quantityStatus.still_needed} ${props.data.quantityStatus.still_needed === props.data.quantity ? 'Requested' : 'Still Needed'}`}\n                          className=\"d-inline-block mr-1 mt-2\"/>\n                        : null}\n                    </>\n                    :\n                    <>\n                      {props.data.isPurchased ?\n                        <GiftStatusPill variant=\"purchased\" text=\"Purchased\"\n                                        className=\"d-inline-block mr-1 mt-2\"/> : null}\n                      {props.data.isReserved ?\n                        <GiftStatusPill variant=\"reserved\" text=\"Reserved\"\n                                        className=\"d-inline-block mr-1 mt-2\"/> : null}\n                    </>\n                  :\n                  <div className=\"d-flex w-100 align-items-center flex-wrap\">\n                    <GiftStatusPill variant=\"group-gift\"\n                                    text={`Group Gift`}\n                                    className=\"d-inline-block mr-1 mt-2\"/>\n\n                    {props.data.quantityStatus && props.data.quantityStatus.total_contribution_amount <= 0 ?\n                      <GiftStatusPill\n                        text={`${formatPrice(props.data.item.price * props.data.quantity, CURRENCY)} Requested`}\n                        className=\"d-inline-block mr-1 mt-2\"/>\n                      :\n                      props.data.isAmountReceived ?\n                        <GiftStatusPill variant=\"purchased\"\n                                        text={`Received ${CURRENCY}${props.data.quantityStatus.total_contribution_amount}`}\n                                        className=\"d-inline-block mr-1 mt-2\"/>\n                        :\n                        <div className=\"flex-grow-1\">\n                      <span\n                        className=\"text-sm font-medium\">{`${formatPrice(props.data.quantityStatus.total_contribution_amount, CURRENCY)}`}</span>\n                          <span\n                            className=\"text-sm\">{` of ${formatPrice(props.data.item.price * props.data.quantity, CURRENCY)} received`}</span>\n                          <div className=\"added-card-group-gift-progress-bar\">\n                            <div className=\"added-card-group-gift-progress mw-100\"\n                                 style={{width: `${(props.data.quantityStatus.total_contribution_amount / (props.data.item.price * props.data.quantity)) * 100}%`}}/>\n                          </div>\n                        </div>\n                    }\n                  </div>\n                }\n\n              </div>\n              <div className={[\n                props.draggable ? \"col-12 col-md-5 added-card-buttons\" : \"col-12 col-md-4 added-card-buttons\",\n              ].join(\" \")}\n              >\n                <div className=\"d-flex align-items-baseline justify-content-end mr-md-1 mr-3\">\n                  {!stateGuestViewRegistry ?\n                    <button\n                      className={[\n                        \"mr-0 mr-sm-0 mr-md-4 d-flex align-items-center added-gift-must-have-btn px-2\",\n                        props.data.mostWanted ? \"added-gift-must-have-active\" : \"added-gift-must-have-not-active\"\n                      ].join(\" \")}\n                      data-tut={\"must-have-\" + props.data.id}\n                      onClick={props.toggleMustHave}\n                    >\n                      <i className={[\"icon mr-1 d-block\", props.data.mostWanted ? \"heart-fill\" : \"heart\"].join(\" \")}/>\n                      <p className=\"text-sm added-gift-must-have-text d-none d-sm-none d-md-inline-block \">Must Have</p>\n                    </button> :\n                    props.data.mostWanted ?\n                      <button\n                        data-tut={\"must-have-\" + props.data.id}\n                        className=\"mr-4 d-flex align-items-center added-gift-must-have-btn px-2 added-gift-must-have-active\">\n                        <i className=\"icon mr-1 d-block heart-fill\"/>\n                        <p className=\"text-sm added-gift-must-have-text d-none d-sm-none d-md-inline-block \">Must\n                          Have</p>\n                      </button>\n                      : <></>\n                  }\n                  {!stateGuestViewRegistry && moreOptionsData.length > 0 ?\n                    <MoreOption data={moreOptionsData} iconClass=\"icon-more-hori\"/>\n                    : <></>}\n                  {/* TODO: Add icon/rearrange icon */}\n                  {props.draggable && !stateGuestViewRegistry ?\n                    <DragHandle/> : <></>}\n                </div>\n              </div>\n            </div>\n          </div>\n          {props.isViewCard ?\n            props.data.registryCategories.length > 1 ?\n              props.data.registryCategories.map(category =>\n                props.data.registryCategories[0].id !== category.id ?\n                <div className=\"row\">\n                  <div className=\"col\">\n                    <div className=\"text-body font-medium p-6 added-card-other-category\">\n                      You have\n                      added {props.data.item.quantity > 1 ? props.data.item.quantity : null} {category.category.parentCategory.parentCategory !== null ? category.category.parentCategory.categoryName + \" (\" + category.category.categoryName + \")\" : category.category.categoryName} as\n                      part of <a className=\"title-link\" tabindex=\"0\" onClick={openEditModal}>{props.data.title}</a>\n                    </div>\n                  </div>\n                </div>\n                : null\n              )\n              : null\n          : null}\n        </>\n        :\n        <div className=\"row\">\n          <div className=\"col\">\n            <div className=\"text-body font-medium p-4 p-md-6 added-card-other-category\">\n              You have\n              added {props.data.item.quantity > 1 ? props.data.item.quantity : null} {props.multipleCategories.category.parentCategory && props.multipleCategories.category.parentCategory.parentCategory !== null ? props.multipleCategories.category.parentCategory.categoryName + \" (\" + props.multipleCategories.category.categoryName + \")\" : props.multipleCategories.category.categoryName} as\n              part of <a className=\"title-link\" tabindex=\"0\" onClick={openEditModal}>{props.data.title}</a>\n            </div>\n          </div>\n        </div>\n      }\n      <Modal\n        updateModal={updateModal}\n        show={show}\n        closeModal={() => setShow(false)}\n        title={modalTitle}\n        size=\"xl\"\n      >\n        <div className=\"position-relative added-card-recommended\">\n          <div className=\"row category-recommended-products\">\n            {recommendedProducts.map((card, index) => (\n              <div className=\"col-4 mb-5\" key={\"CardItem-\" + index}>\n                <CardItem\n                  data={card}\n                  incrementQuantityHandler={() => incrementQuantity(card.id, 1)}\n                  decrementQuantityHandler={() => decrementQuantity(card.id, 1)}\n                  activeVariant={card.activeVariant}\n                  setActiveRecommandationVariantHandler={(variant) => setActiveRecommandationVariantHandler(card.id, variant)}\n                  addProductHandler={() => addProductHandler(card, stateAddedProducts, stateRegistryInfo, dispatch)}\n                />\n              </div>\n            ))}\n            {recommendedProducts.length <= 0 ?\n              <div className=\"col text-center py-4\"><h4>No recommendation found</h4></div> : null}\n          </div>\n          {recommendedProducts.length > 0 ? <div className=\"added-card-recommends-bottom-gradient\"/> : null}\n        </div>\n      </Modal>\n      <Modal\n        show={showRemoveModel}\n        size=\"md\"\n        footer={removeConfirmFooter}\n      >\n        <h2>Do you want to remove {props.data.title}? </h2>\n      </Modal>\n\n      {showEditModal ?\n        <EditGift\n          show={showEditModal}\n          closeModal={() => setShowEditModal(false)}\n          data={props.data}\n          openRemoveModal={setShowRemoveModel}\n        />\n        : null}\n      <MarkAsPurchased\n        show={showMarkPurchased}\n        closeModal={() => setShowMarkPurchased(false)}\n        data={props.data}\n      />\n      {showCashFundModal ?\n        <AddCashFundModal\n          show={showCashFundModal}\n          closeModal={() => setShowCashFundModal(false)}\n          categoryData={props.data}\n          edit\n        />\n        : null}\n    </>\n  )\n}\n\nexport default AddedCard\n","import React from \"react\";\nimport \"./CheckListItems.scss\";\nimport { withTranslation } from \"react-i18next\";\nimport { withRouter } from \"react-router\";\nimport routes from \"utils/routes\";\nimport { GET_PERSONALIZE_QUESTIONS } from \"api/queries\";\nimport { graphQL } from \"api/axios\";\nimport { toast } from \"react-toastify\";\nimport {connect} from \"react-redux\";\n\nclass CheckList extends React.Component {\n\n    gotoPersonalize = (event) => {\n        event.preventDefault();\n        // this.props.history.push(routes.PERSONALIZE.HOME)\n\n        // If user has given answer or not\n        let isQuizPending = true\n        let reqData = {\n            query: GET_PERSONALIZE_QUESTIONS,\n            variables: {\n                registryId: this.props.stateRegistryInfo.id,\n            }\n        }\n        // To route to edit-checklist or Quiz\n        graphQL(reqData).then(res => {\n            if (res.data.data.editablePersonalizeQuestions) {\n                const questions = res.data.data.editablePersonalizeQuestions\n                for (let question of questions) {\n                    if (question.isPersonalize && question.answers.length > 0) {\n                        isQuizPending = false\n                        break;\n                    }\n                }\n                if (isQuizPending) {\n                    this.props.history.push(routes.PERSONALIZE.HOME)\n                } else {\n                    this.props.history.push(routes.PERSONALIZE.CHECKLIST)\n                }\n\n            }\n        }).catch(err => {\n            toast.error(\"Error occurred while fetching questions\");\n            console.error(err);\n        })\n    }\n\n    render() {\n        return (\n            <div className=\"mb-0 mb-lg-3 w-100\">\n                <div className=\"row check-list-header\">\n                    <div className=\"col d-flex align-items-baseline pb-1\">\n                        <p className=\"checklist-title mb-0\">{this.props.t(\"checkList.title\")}</p>\n                        <a href=\"#\" className=\"ml-2 text-sm checklist-personalize d-none d-lg-inline-block\" tabindex=\"0\" onClick={(e) => this.gotoPersonalize(e)}>{this.props.t(\"checkList.personalize\")}</a>\n                        {this.props.percentage.totalItems ?\n                            <p className=\"font-medium text-sm checklist-progress-count ml-2 ml-lg-auto \">{this.props.percentage.addedItems}/{this.props.percentage.totalItems}</p>\n                            : null}\n                    </div>\n                </div>\n                <div className=\"row\">\n                    <div className=\"col d-flex\">\n                        <div className=\"check-list-background\">\n                            <div className=\"check-list-progress mw-100\" style={{width: `${this.props.percentage.result}%`}} />\n                        </div>\n                    </div>\n                </div>\n                <div className=\"row check-list-header d-inline-block d-lg-none\">\n                    <a href=\"#\" className=\"text-sm checklist-personalize ml-3 mt-3\" tabindex=\"0\" onClick={(e) => this.gotoPersonalize(e)}>{this.props.t(\"checkList.personalize\")}</a>\n                </div>\n            </div>\n\n        );\n    }\n};\n\nconst mapStateToProps = state => {\n    return {\n        stateRegistryInfo: state.registry.info,\n    }\n}\n\nexport default withTranslation()(withRouter(connect(\n    mapStateToProps\n)(CheckList)));","import React, { Component } from \"react\";\nimport \"./CheckListItems.scss\";\nimport CircularProgress from \"modules/commons/components/circular-progress/CircularProgress\";\nimport Accordion from 'react-bootstrap/Accordion';\nimport Card from 'react-bootstrap/Card';\nimport { connect } from 'react-redux';\n\nclass CheckListItems extends Component {\n\n  constructor(props) {\n    super(props);\n    // create a ref to store the checkList header DOM element\n    this.checkListHeader = React.createRef();\n  }\n\n  getOffset = (el) => {\n    const rect = el.getBoundingClientRect();\n    return {\n      left: rect.left + window.scrollX,\n      top: rect.top + window.scrollY\n    };\n  }\n\n  scrollToCategory = (category) => {\n    const categorySection = document.getElementById(category)\n    if (categorySection) {\n      let offset = this.getOffset(categorySection);\n      window.scrollTo(0, offset.top)\n    }\n  }\n\n  getSubList = (getSubList) => {\n    let subItems = getSubList.map(({ id, categoryName, addedItemsCount, totalItemsCount, subProductTypes, parentCategory }) => {\n      return (\n        <>\n          {subProductTypes.length === 0 ?\n            <div className=\"d-flex card-body-contain align-items-center py-2\" key={categoryName + id}\n              onClick={() => this.scrollToCategory(parentCategory.name + '(' + categoryName + ')')}>\n              <p className=\"mb-0 card-body-header text-sm\">{categoryName}</p>\n\n              <div className='ml-auto mb-0 align-self-end text-sm progess-divison'>\n                {addedItemsCount >= totalItemsCount ?\n                  <div className=\"icon-done\" /> :\n                  (totalItemsCount > 0 ?\n                    <div className='ml-auto mb-auto align-self-end card-progress'>\n                      {addedItemsCount}/{totalItemsCount}\n                    </div>\n                    : null)}\n              </div>\n            </div> :\n            // Todo handle scroll\n            <>\n              <div className=\"card-body-contain align-items-center py-2\" key={categoryName + id}\n                onClick={() => this.scrollToCategory(categoryName)}>\n                <p className=\"mb-0 card-body-header text-sm\">{categoryName}</p>\n              </div>\n              <div className=\"text-sm\">\n                {subProductTypes.map((subProductType, index) => (\n                  <div className=\"sub-product-list d-flex py-2 ml-3 align-items-center\"\n                    key={subProductType.categoryName + subProductType.id}\n                    onClick={() => this.scrollToCategory(subProductType.parentCategory.name + '(' + subProductType.categoryName + ')')}\n                  >\n                    <div>{subProductType.categoryName}</div>\n                    <div className='ml-auto mb-0 align-self-end text-sm progess-divison'>\n                      {subProductType.addedItemsCount >= subProductType.totalItemsCount ?\n                        <div className=\"icon-done\" /> :\n                        (totalItemsCount > 0 ?\n                          <div className='ml-auto mb-auto align-self-end card-progress'>\n                            {subProductType.addedItemsCount}/{subProductType.totalItemsCount}\n                          </div>\n                          : null)}\n\n                    </div>\n                  </div>\n                ))}\n\n              </div>\n            </>}\n        </>\n      )\n\n    });\n    return subItems;\n  }\n\n  handleToggleEvent = () => {\n    const checkListIconEl = this.checkListHeader.current.firstChild;\n    checkListIconEl.classList.toggle(\"closed\");\n    checkListIconEl.classList.toggle(\"opened\");\n  }\n\n  render() {\n\n    let subListItem = this.getSubList(this.props.item.subCategories)\n    // TODO: For calculation for subitem\n    // let parentTotal = 10;\n    // let parentAdded = 16;\n\n    // for (let subItems of this.props.item.subCategories) {\n    //     if (subItems.added !== subItems.total) {\n    //         parentAdded += Number(subItems.added);\n    //         parentTotal += Number(subItems.total);\n    //     }\n    // }\n\n    return (\n      <Accordion className=\"accordion-list mb-5\" key={this.props.item.categoryName}>\n        {this.props.item.categoryName && this.props.item.isParent ?\n          <Card>\n            <Accordion.Toggle\n              onClick={this.handleToggleEvent}\n              as={Card.Header}\n              id={this.props.item.categoryName}\n              eventKey={this.props.item.categoryName}\n            >\n              <div ref={this.checkListHeader} className='d-flex icon-checklist'>\n                <span className=\"checklist-icon-arrow\" />\n                <div className=\"ml-3 mb-0 w-100\">\n                  <div className=\"text-body\">{this.props.item.categoryName}</div>\n                  <div className=\"d-flex\">\n                    <div className=\"check-list-hearder-background\">\n                      <div className=\"check-list-hearder-progress mw-100\" style={{ width: `${(this.props.item.addedItemsCount / this.props.item.totalItemsCount) * 100}%` }} />\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </Accordion.Toggle>\n            <Accordion.Collapse className=' mt-1 ml-6' eventKey={this.props.item.categoryName}>\n              <Card.Body>\n                {subListItem}\n              </Card.Body>\n            </Accordion.Collapse>\n          </Card>\n          :\n          <p className=\"pl-6 mr-3 text-body others-cat\" onClick={() => this.scrollToCategory(this.props.item.categoryName + '(' + this.props.item.categoryName + ')')}>{this.props.item.categoryName}</p>\n        }\n      </Accordion>\n    );\n\n  }\n}\n\nexport default connect()(CheckListItems);","import React from \"react\";\nimport \"./BookmarkletSection.scss\";\nimport Modal from \"../../modal-component/ModalComponent\";\nimport Button from '../../button-component/ButtonComponent';\nimport { BOOKMARKLET_SCRIPT, BOOKMARKLET_STEP_THREE_PRODUCT_LINK, IMPORT_REGISTRY_EMAIL } from \"utils/constants\";\nimport { connect } from \"react-redux\";\nimport { UPDATE_MA_BUTTON_CONFIGURED } from 'api/mutations';\nimport { updateRegistryInfo } from \"modules/registry/RegistryActions\";\nimport { graphQL } from \"api/axios\";\n\nclass BookmarkletSection extends React.Component {\n\n  state = {\n    show: false,\n    updateModal: false,\n  }\n\n  modalTitle = \"\"\n  modalBody = \"\"\n  modalTitleContent = \"\"\n  modalFooterButtons = \"\"\n\n  // Event Handlers\n  modalCloseHandler = () => {\n    this.setState({\n      show: false\n    })\n  }\n\n  doneBookmarkletHandler = () => {\n    this.modalCloseHandler()\n  }\n\n  maButtonConfiguredhandler = (ev) => {\n    ev.stopPropagation();\n    \n    let data = {\n      query: UPDATE_MA_BUTTON_CONFIGURED,\n      variables: {\n        registryId: this.props.stateRegistryInfo.id,\n        isMaButtonConfigured: true,\n      }\n    }\n    graphQL(data).then(res => {\n      if (res.status === 200) {\n        console.log('Done..')\n      }\n    }).catch(err => {\n      console.error(err.message)\n    })\n    let registryInfo = { ...this.props.stateRegistryInfo }\n    registryInfo.isMaButtonConfigured = true\n    this.props.dispatch(updateRegistryInfo(registryInfo))\n  }\n\n  openAddBookmarkletModal = () => {\n    this.modalTitle = \"Get M+A Button\"\n    this.modalTitleContent = (\n      <div className=\"py-2 text-sm\">\n        Its as easy as dragging the button to your browsers Bookmarks bar.\n      </div>\n    )\n    this.setState((prevState, props) => ({\n      show: true,\n    }))\n\n    this.modalBody = (\n      <div className=\"row bookmarlet-model justify-content-center\">\n        <div className=\"col\">\n          <div className=\"d-flex justify-content-center mb-6\">\n            <div className=\"text-body m-a-heading mr-5\">\n              <div>Drag the button the your</div> <div>browsers Bookmarks bar</div>\n            </div>\n            <a\n              tabindex=\"0\"\n              href={BOOKMARKLET_SCRIPT}\n              className=\"m-a-btn m-a-primary-btn primary-btn px-3 py-2 font-weight-bold font-medium text-body\"\n            >Add to M+A</a>\n          </div>\n          <div className=\"bookmarklet-steps\">\n            <ol className=\"my-5 order-list-bookmarklet\">\n              <li className=\"steps-title pl-4\">\n                <div className=\"text-body font-medium\">Make sure your bookmarks bar is visible</div>\n                <div className=\"mt-1 text-sm steps-details\">\n                  In Chrome browser, go to the top right menu and into Settings. On the left navigation you will find Appearance. Inside it find Show Bookmarks bar then toggle to turn on.\n                </div>\n              </li>\n              <li className=\"steps-title pl-4 mt-5\">\n                <div className=\"text-body font-medium\">Add to your Bookmarks bar</div>\n                <div className=\"mt-1 text-sm steps-details\">\n                  Click the Add to M+A button and drag it to your Bookmarks bar.\n                </div>\n              </li>\n              <li className=\"steps-title pl-4 mt-5\">\n                <div className=\"text-body font-medium\">Give it a go!</div>\n                <div className=\"mt-1 text-sm steps-details\">\n                  Go to <a className=\"bookmarklet-link\" href={BOOKMARKLET_STEP_THREE_PRODUCT_LINK} target='_blank' tabindex=\"0\">Key Rattle</a> on Plan Toys and click on your NEW M+A button.\n                </div>\n              </li>\n            </ol>\n          </div>\n        </div>\n      </div>\n    )\n    this.modalFooterButtons = (\n      <>\n        <a tabindex=\"0\" className=\"bookmarklet-link mr-auto\" onClick={() => this.doneBookmarkletHandler()}>I Already Have M+A Button</a>\n        <a\n          className=\"px-3 py-1 bookmarklet-disable-btn text-body font-medium\"\n          href={\"mailto:\" + IMPORT_REGISTRY_EMAIL}\n          target='_blank'\n          tabindex=\"0\"\n        >Email Us For Help</a>\n        <Button\n          variant=\"primary\"\n          className=\"px-4 py-1 font-weight-bold font-medium text-body\"\n          onClick={() => this.doneBookmarkletHandler()}\n        >Done</Button>\n      </>\n    )\n  }\n\n  render() {\n    return (\n      !this.props.stateRegistryInfo.isMaButtonConfigured ?\n        <>\n          <div className=\"py-2 bookmarklet-section\" onClick={this.openAddBookmarkletModal}>\n            <div className=\"row\">\n              <div className=\"col flex-grow-0\">\n                {/* TODO: Add M$A Icon once added */}\n              </div>\n              <div className=\"col\">\n                <h4>Get M+A Button</h4>\n                <p className=\"text-sm mt-1\">M+A Button lets you add product from any store directly to Monica+Andy Baby\n            Registry.</p>\n                <a tabindex=\"0\" className=\"bookmarklet-link mt-1 text-sm\" onClick={(ev) => this.maButtonConfiguredhandler(ev)}>I already have it</a>\n              </div>\n            </div>\n          </div>\n          <Modal\n            show={this.state.show}\n            updateModal={this.state.updateModal}\n            title={this.modalTitle}\n            titleContent={this.modalTitleContent}\n            footer={this.modalFooterButtons}\n            closeModal={this.modalCloseHandler}>\n            {this.modalBody}\n          </Modal>\n        </>\n        : null\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    stateRegistryInfo: state.registry.info,\n  }\n}\n\n\nexport default connect(\n  mapStateToProps\n)(BookmarkletSection);","import React from \"react\";\nimport \"./CategoryPill.scss\";\n\nconst CategoryPill = (props) => {\n  return (\n    <div className={[\"import-registry-category-pill text-sm p-1\", props.className ? props.className : \"\"].join(\" \")}>\n      <div className=\"d-flex align-items-center\">\n        <p>{props.mainCategory+\": \"+props.name}</p>\n        <i className=\"icon-close remove-category-pill-icon ml-2\" onClick={props.removeCategory}/>\n      </div>\n    </div>\n  );\n}\n\nexport default CategoryPill;\n","import React, {createRef, useState} from \"react\";\nimport {useDispatch, useSelector} from 'react-redux';\nimport \"./AddGiftAnotherStore.scss\";\nimport Counter from \"../../counter/Counter\";\nimport TogglePills from \"../toggle-pills/TogglePills\";\nimport RadioButton from \"../../radio-button/RadioButton\";\nimport SelectCategory from \"../../select-category/SelectCategory\";\nimport {setAnotherStoreProductInfo} from \"modules/my-registry/MyRegistryActions\";\nimport {getScrapedProduct} from \"api/axios\";\nimport {toast} from 'react-toastify';\nimport CategoryPill from \"../import-registry/category-pill/CategoryPill\";\nimport defaultData from \"data/ReducerDefaultData.json\";\nimport { updateMushHaveTourFlag, updateGroupGiftTourFlag } from \"utils/commonFunction\";\nimport {MUST_HAVE_STEPS, GROUP_GIFT_STEPS, SETTINGS_LINKS} from 'utils/constants';\nimport Tour from 'reactour';\nimport TourCard from 'modules/commons/components/tour-card/TourCard';\nimport Button from \"../../button-component/ButtonComponent\";\nimport Modal from \"../../modal-component/ModalComponent\";\n\nconst AddGiftAnotherStore = (props) => {\n\n  const PRICE_REGEX_WHILE_ENTERING = /^[0-9]+.{0,1}[0-9]{0,2}?$/g\n  const HTTPS_REGEX = /^(https?:\\/\\/){1}.*/g\n\n  const MAX_IMAGE_SIZE = 5000000; // 5MB\n  const ACCEPTED_IMAGE_TYPE = [\n    'image/jpg',\n    'image/jpeg',\n    'image/png'\n  ]\n\n  const [categoryModalShow, setCategoryModalVisible] = useState(false);\n  const [hideProductDetails, setHideProductDetails] = useState(true);\n  const [showLoading, setshowLoading] = useState(false);\n\n  const [btnHasFocus, setBtnHasFocus] = useState(false)\n  const [inputHasFocus, setInputHasFocus] = useState(false)\n  const [itemUrl, setItemUrl] = useState(\"\")\n  const [currentItemLink, setCurrentItemLink] = useState(\"\")\n  const [showLearnMore, setShowLearnMore] = useState(false)\n  const [learnMoreCashAccept, setLearnMoreCashAccept] = useState(false)\n\n  let inputRef = React.createRef()\n\n  const dispatch = useDispatch();\n  const stateRegistryInfo = useSelector(state => state.registry.info)\n  const productInfo = useSelector(state => state.myRegistry.anotherStoreProduct)\n\n  const productImage = useSelector(state => state.myRegistry.anotherStoreProduct.productImage)\n  const productName = useSelector(state => state.myRegistry.anotherStoreProduct.productName)\n  const category = useSelector(state => state.myRegistry.anotherStoreProduct.category)\n  const quantity = useSelector(state => state.myRegistry.anotherStoreProduct.quantity)\n  const price = useSelector(state => state.myRegistry.anotherStoreProduct.price)\n  const howToGift = useSelector(state => state.myRegistry.anotherStoreProduct.howToGift)\n  const note = useSelector(state => state.myRegistry.anotherStoreProduct.note)\n  const mustHave = useSelector(state => state.myRegistry.anotherStoreProduct.mustHave)\n  const groupGift = useSelector(state => state.myRegistry.anotherStoreProduct.groupGift)\n  const [isTourOpen, setIsTourOpen] = useState(false)\n  const [isMustHaveTour, setIsMustHaveTour] = useState(false)\n  const [isGroupGiftTour, setIsGroupGiftTour] = useState(false)\n  const [steps, setSteps] = useState([])\n\n  const imageInput = createRef()\n\n  const howToGiftOptions = [\n    {\n      id: 1,\n      text: \"Get cash equivalent for this gift\",\n      content: (\n        <div>\n          <p className=\"text-body\">Get cash equivalent for this gift</p>\n          <p className=\"text-sm mt-1\">Choose this option for the best purchase experience.</p>\n          <a className=\"text-sm edit-gift-links mt-1\" href=\"#\"\n             onClick={(ev) => learnMoreLinkClickHandler(ev, true)}>Learn More</a>\n        </div>\n      ),\n      learnMoreContent: (\n        <>\n          <p className=\"text-body edit-gift-learn-more-modal-text mt-3\">When you choose this option, the money for\n            the gift (including shipping) will be transferred to your\n            bank account.</p>\n\n          <p className=\"text-body edit-gift-learn-more-modal-text mt-4\">When the time is right for you, youll click\n            through to order directly from the website and have it\n            delivered to your home.</p>\n\n          <p className=\"text-body edit-gift-learn-more-modal-text mt-4\">This helps decrease the number of duplicate\n            gifts, keeps your returns to a minimum, and gives you control\n            over when you receive the gift.</p>\n\n          <p className=\"text-body edit-gift-learn-more-modal-text mt-4\"><a href={SETTINGS_LINKS.BANK_ACCOUNT}\n                                                                           target=\"_blank\"\n                                                                           className=\"edit-gift-links\">Connect your\n            bank account to your profile,</a> if you havent already.</p>\n        </>\n      )\n    },\n    {\n      id: 2,\n      text: \"Send your guests to the stores website to purchase and ship now.\",\n      content: (\n        <div>\n          <p className=\"text-body\">Send your guests to the stores website to purchase and ship now.</p>\n          <a className=\"text-sm edit-gift-links mt-1\" href=\"#\"\n             onClick={(ev) => learnMoreLinkClickHandler(ev, false)}>Learn More</a>\n        </div>\n      ),\n      learnMoreContent: (\n        <p className=\"text-body edit-gift-learn-more-modal-text mt-1\">Please note, M+A is unable to accept returns\n          or manage shipping when you choose this option.</p>\n      )\n    }\n  ]\n\n  const learnMoreLinkClickHandler = (ev, cashAcceptedLearnMore) => {\n    ev.preventDefault()\n    ev.stopPropagation()\n\n    setShowLearnMore(true)\n    props.changeTempCloseModal(true)\n    setLearnMoreCashAccept(cashAcceptedLearnMore)\n  }\n\n  const closeLearnMoreModalHandler = () => {\n    setShowLearnMore(false)\n    props.changeTempCloseModal(false)\n  }\n\n  // Update state function\n  const changeProductUrl = (url) => {\n    let prodInfo = {...productInfo};\n    prodInfo.productUrl = url;\n    dispatch(setAnotherStoreProductInfo(prodInfo));\n  }\n\n  const changeProductImage = (image) => {\n    let prodInfo = {...productInfo};\n    prodInfo.productImage = image;\n    dispatch(setAnotherStoreProductInfo(prodInfo));\n  }\n\n  const changeProductName = (name) => {\n    let prodInfo = {...productInfo};\n    prodInfo.productName = name;\n    dispatch(setAnotherStoreProductInfo(prodInfo));\n  }\n\n  const setCategory = (category) => {\n    let prodInfo = {...productInfo};\n    prodInfo.category = category;\n    dispatch(setAnotherStoreProductInfo(prodInfo));\n  }\n\n  const setQuantity = (quantity) => {\n    let prodInfo = {...productInfo};\n    prodInfo.quantity = quantity;\n    dispatch(setAnotherStoreProductInfo(prodInfo));\n  }\n\n  const changePrice = (price) => {\n    let prodInfo = {...productInfo};\n    prodInfo.price = price;\n    dispatch(setAnotherStoreProductInfo(prodInfo));\n  }\n\n  const changeHowToGift = (howToGift) => {\n    let prodInfo = {...productInfo};\n    prodInfo.howToGift = howToGift;\n    dispatch(setAnotherStoreProductInfo(prodInfo));\n  }\n\n  const changeNote = (note) => {\n    let prodInfo = {...productInfo};\n    prodInfo.note = note;\n    dispatch(setAnotherStoreProductInfo(prodInfo));\n  }\n\n  const toggleMustHave = (mustHave) => {\n    let prodInfo = {...productInfo};\n    prodInfo.mustHave = mustHave;\n    dispatch(setAnotherStoreProductInfo(prodInfo));\n\n    if (!stateRegistryInfo.isMustHaveApplied) {\n      let steps = { ...MUST_HAVE_STEPS }\n      steps[0].selector = '[data-tut=\"must-have-tour\"]';\n      steps.length = 1;\n\n      setIsMustHaveTour(true)\n      setSteps(steps)\n      setIsTourOpen(true)\n    }\n  }\n\n  const toggleGroupGift = (groupGift) => {\n    let prodInfo = {...productInfo};\n    prodInfo.groupGift = groupGift;\n    dispatch(setAnotherStoreProductInfo(prodInfo));\n\n    if (!stateRegistryInfo.isGroupGiftTour) {\n      let steps = { ...GROUP_GIFT_STEPS }\n      steps[0].selector = '[data-tut=\"group-gift-tour\"]';\n      steps.length = 1;\n\n      setIsGroupGiftTour(true)\n      setSteps(steps)\n      setIsTourOpen(true)\n    }\n  }\n\n  const openCategorySelect = (ev) => {\n    ev.preventDefault();\n    setCategoryModalVisible(true);\n  }\n\n  const incrementQuantity = () => {\n    setQuantity(quantity + 1)\n  }\n\n  const decrementQuantity = () => {\n    if (quantity - 1 > 0) {\n      setQuantity(quantity - 1)\n    }\n  }\n\n  const priceChangeHandler = (ev) => {\n    ev.persist();\n\n    if ((ev.target.value.length > 0 && (Number(ev.target.value[ev.target.value.length - 1]) >= 0 || ev.target.value[ev.target.value.length - 1] === \".\")) && ev.target.value.match(PRICE_REGEX_WHILE_ENTERING) || ev.target.value.length <= 0) {\n      // const newPrice = Number(ev.target.value);\n        changePrice(ev.target.value);\n    }\n  }\n\n  const productNameChangeHandler = (ev) => {\n    ev.persist();\n    changeProductName(ev.target.value)\n  }\n\n  const noteChangeHandler = (ev) => {\n    ev.persist();\n    changeNote(ev.target.value);\n  }\n\n\n  const selectFileHandler = (ev) => {\n    if (imageInput.current && imageInput.current.files.length > 0) {\n      const file = imageInput.current.files[0]\n\n      // Verifying file is image\n      if (ACCEPTED_IMAGE_TYPE.includes(file.type)) {\n        if (file.size <= MAX_IMAGE_SIZE) {\n          let reader = new FileReader();\n\n          reader.onload = function (e) {\n            const newProductImage = {\n              type: \"custom\",\n              value: e.target.result,\n              file: file,\n              fileType: file.type,\n              fileName: file.name\n            }\n            changeProductImage(newProductImage);\n          }\n\n          reader.readAsDataURL(file); // Converting to base64 string\n        } else {\n          toast.error(\"File size exceeds the limit\");\n        }\n      } else {\n        toast.error(\"Please select valid image.\");\n      }\n    }\n  }\n\n  const getRefinedPrice = (price) => {\n    let newPrice = \"\";\n    for (let char of price) {\n      if (char !== \".\") {\n        if (Number.isInteger(Number(char))) {\n          newPrice += char\n        }\n      } else {\n        newPrice += char\n      }\n    }\n\n    return newPrice;\n  }\n\n  const fetchProductDetail = (itemUrl) => {\n\n    try {\n      new URL(itemUrl);\n    } catch {\n      toast.error(\"Invalid Store Url\")\n      return;\n    }\n    setCurrentItemLink(itemUrl)\n    changeProductUrl(itemUrl);\n    const reqData = {\n      item_url: itemUrl\n    }\n    let ctgry = category;\n    let data = defaultData.myRegistry.defaultAnotherStoreProductInfo;\n    data.category = ctgry\n    dispatch(setAnotherStoreProductInfo(data))\n    setshowLoading(true);\n    setHideProductDetails(true);\n    getScrapedProduct(reqData).then(res => {\n      const resData = res.data;\n      if (resData) {\n        let prodInfo = {...productInfo};\n        prodInfo.productUrl = itemUrl;\n        prodInfo.productImage = {\n          type: \"url\",\n          value: resData.img\n        };\n        prodInfo.productName = resData.title;\n        prodInfo.price = getRefinedPrice(resData.price);\n        if (!props.addMyOwn) {\n          prodInfo.category = []\n        }\n        dispatch(setAnotherStoreProductInfo(prodInfo));\n        setshowLoading(false);\n        setHideProductDetails(false);\n      }\n    }).catch(err => {\n      console.error(err.response)\n      setshowLoading(false);\n      toast.error(\"Invalid Store Url\")\n      return false;\n    })\n  }\n\n  const checkUrlAndGetRegistryItems = () => {\n    let url = itemUrl\n    if (!url.match(HTTPS_REGEX)){\n      url = \"https://\"+url\n    }\n    setItemUrl(url)\n    // Checking for valid url\n    try {\n      new URL(url);\n    } catch {\n      toast.error(\"Invalid Store Url\")\n      return;\n    }\n\n    setBtnHasFocus(false)\n    fetchProductDetail(url)\n  }\n\n  const submitStoreUrl = (ev) => {\n    ev.persist();\n    ev.preventDefault();\n    if (ev.keyCode === 13) { //Enter keycode is 13\n      setBtnHasFocus(false)\n      ev.target.blur()\n      checkUrlAndGetRegistryItems()\n    }\n  }\n\n  const removeSelectedCategory = (categoryId) => {\n    if (productInfo.category.length) {\n      let finalcategory = productInfo.category.filter(category => category.id !== categoryId);\n      let prodInfo = {...productInfo};\n      prodInfo.category = finalcategory;\n      dispatch(setAnotherStoreProductInfo(prodInfo));\n    }\n  }\n\n  // Setting default HowToGiftOption\n  if (!howToGift.id) {\n    changeHowToGift(howToGiftOptions[0])\n  }\n\n  const closeTour = () => {\n    // For must-have\n    if (isMustHaveTour && !isGroupGiftTour) {\n      updateMushHaveTourFlag(stateRegistryInfo, dispatch)\n    }\n\n    // For Group Gift\n    if (!isMustHaveTour && isGroupGiftTour) {\n      updateGroupGiftTourFlag(stateRegistryInfo, dispatch)\n    }\n\n    setIsTourOpen(false)\n  }\n\n  const changeItemUrl = (e) => {\n    e.preventDefault();\n    if (inputRef.current) {\n      inputRef.current.disabled = false;\n      inputRef.current.focus();\n    }\n  }\n\n  return (\n    <>\n      <div className=\"row add-gift-another-store\">\n        <div className=\"col\">\n          <div className=\"row\">\n            <div className=\"col m-a-input-container\">\n              <p className=\"text-sm font-medium add-gift-store-label\">Store</p>\n              <div className=\"position-relative mt-1\">\n                <input type=\"text\" className=\"w-100 pl-2 pr-14 py-1 text-body input-background change-link-input\"\n                       placeholder=\"Paste a product link that you want to add in your Monica and Andy Registry\"\n                       onKeyUp={(ev) => submitStoreUrl(ev)}\n                       onChange={(ev) => setItemUrl(ev.target.value)}\n                       onFocus={() => {\n                         setInputHasFocus(true);\n                         setBtnHasFocus(true)\n                       }}\n                       onBlur={() => setInputHasFocus(false)}\n                       ref={inputRef}\n                       value={itemUrl}\n                />\n                {/* <a className=\"text-sm\" href=\"#\">Change</a> */}\n                {itemUrl.length > 0 && !inputHasFocus && !btnHasFocus?\n                  <a tabindex\n                     className=\"add-gift-another-store-change-link text-sm font-medium import-registry-category-link\"\n                     href=\"#\"\n                     onClick={(e) => changeItemUrl(e)}>Change</a> : null}\n\n                {itemUrl.length > 0 && btnHasFocus ?\n                  <div className=\"add-gift-another-store-submit-url-section\">\n                    {/*TODO: Change icons once added to global icons*/}\n                    <button className=\"icon-close mr-3\"\n                            onClick={() => {\n                              setItemUrl(\"\");\n                              setBtnHasFocus(false);\n                            }}\n                    />\n                    <button className=\"icon-check\" onClick={checkUrlAndGetRegistryItems}/>\n                  </div>\n                  : null}\n              </div>\n            </div>\n          </div>\n\n          <div className={[\"row mt-4\"].join(\" \")}>\n            {hideProductDetails ? showLoading ?\n              <div className=\"col text-center\">\n                <div className=\"hide-product-view py-13\">\n                  <div class=\"spinner-border\" role=\"status\">\n                    <span class=\"sr-only\">Loading...</span>\n                  </div>\n                  <h4 className=\"hide-product-details m-auto\">Please wait while we fetch the product details</h4>\n                </div>\n              </div>\n              :\n              <div className=\"col text-center\">\n                <div className=\"hide-product-view py-13\">\n                  <h4 className=\"hide-product-details m-auto\">Please paste product link above to view details here</h4>\n                </div>\n              </div>\n              :\n              <>\n                <div className=\"col-12 col-md-5 add-gift-image-select\">\n                  <div className=\"mr-3 mt-2 position-relative\">\n                    {productImage?.value ?\n                      <img\n                        src={productImage.value}\n                        alt=\"Product Image\"\n                      />\n                      : null}\n\n                    <i className=\"icon-preview p-1\" onClick={() => {\n                      imageInput.current.click()\n                    }}/>\n                    {/* TODO: Change above icon to camera icon */}\n\n                    <input type=\"file\" className=\"d-none\" accept={ACCEPTED_IMAGE_TYPE.join(\",\")} ref={imageInput}\n                           onChange={(ev) => selectFileHandler(ev)}/>\n                  </div>\n                </div>\n                <div className=\"col-12 col-md-7\">\n                  <div className=\"ml-3 mt-2\">\n                    <div className=\"row\">\n                      <div className=\"col m-a-input-container\">\n                        <p className=\"text-sm font-medium add-gift-store-label\">Product Name</p>\n                        <textarea\n                          className=\"w-100 mt-1 h1 p-2\"\n                          rows=\"2\"\n                          value={productInfo.productName}\n                          onChange={(ev) => productNameChangeHandler(ev)}\n                        />\n                      </div>\n                    </div>\n\n                    <div className=\"row mt-4\">\n                      <div className=\"col\">\n                        <div className=\"m-a-input-container mr-2\">\n                          <p className=\"text-sm font-medium add-gift-store-label\">Price</p>\n                          <div className=\"price-input mt-1\">\n                            <input\n                              type=\"text\"\n                              className=\"w-100 pl-2 pr-1 py-1 text-body pl-5\"\n                              value={price}\n                              onChange={(ev) => priceChangeHandler(ev)}\n                            />\n                          </div>\n                          {/*<span className=\"price-input text-body\">$</span>*/}\n                        </div>\n                      </div>\n                      <div className=\"col\">\n                        <div className=\"m-a-input-container\">\n                          <p className=\"text-sm font-medium add-gift-store-label\">Quantity</p>\n                          <Counter\n                            className=\"mt-2\"\n                            counter={quantity}\n                            incrementHandler={incrementQuantity}\n                            decrementHandler={decrementQuantity}\n                          />\n                        </div>\n                      </div>\n                    </div>\n\n                    {!props.addMyOwn ?\n                      <>\n                        <div className=\"row mt-5\">\n                          <div className=\"col d-flex\">\n                            <p className=\"text-sm add-gift-store-label font-medium mb-1\">Category</p>\n                            <a className=\"text-sm ml-2 add-gift-link font-medium\" href=\"#\" tabindex=\"0\"\n                               onClick={(ev) => openCategorySelect(ev)}>Add</a>\n                            {/* <div className=\"position-relative\">\n                            <input type=\"text\" value={category.displayName} readOnly={true}\n                                   className=\"w-100 pl-2 pr-12 py-1 text-body input-background change-link-input\"/>\n                          </div> */}\n                          </div>\n                        </div>\n                        <div className=\"row mt-2\">\n                          <div className=\"col\">\n                            {category.map(cat => (\n                              <CategoryPill\n                                key={cat.id}\n                                mainCategory={cat.mainCategory}\n                                name={cat.categoryName}\n                                removeCategory={() => removeSelectedCategory(cat.id)}\n                                className=\"mt-2 mr-3\"\n                              />\n                            ))}\n                          </div>\n                        </div>\n                      </>\n                      : null}\n\n                    <div className=\"row mt-5\">\n                      <div className=\"col d-flex\">\n                        <TogglePills\n                          dataTut=\"must-have-tour\"\n                          iconClass=\"icon-heart\"\n                          activeClass={mustHave ? \"active-must-have\" : null}\n                          onClick={() => toggleMustHave(!mustHave)}\n                          text=\"Must Have\"\n                          className=\"mr-2\"/>\n                        <TogglePills\n                          dataTut=\"group-gift-tour\"\n                          iconClass=\"icon-guest\"\n                          activeClass={groupGift ? \"active-group-gift\" : null}\n                          onClick={() => toggleGroupGift(!groupGift)}\n                          text=\"Group Gift\"\n                          className=\"mr-2\"/>\n                        {/* TODO: Change above guest icon one added */}\n                      </div>\n                    </div>\n\n                    <div className=\"row mt-5\">\n                      <div className=\"col\">\n                        <p className=\"text-sm font-medium add-gift-store-label\">How to gift?</p>\n                        {howToGiftOptions.map((option, index) => (\n                          <div className={index === 0 ? \"mt-1\" : \"mt-3\"} key={\"how-to-gift-option-\" + option.id}>\n                            <RadioButton\n                              name=\"how-to-gift\"\n                              textClass=\"text-sm\"\n                              // display={option.text}\n                              checked={option.id === howToGift.id ? true : null}\n                              changeHandler={() => changeHowToGift(option)}\n                            >{option.content}</RadioButton>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n\n                    <div className=\"row mt-5 mb-3\">\n                      <div className=\"col m-a-input-container\">\n                        <p className=\"text-sm font-medium add-gift-store-label\">Notes</p>\n                        <textarea className=\"w-100 mt-1 text-body p-1 m-a-resize-textarea mb-2\"\n                                  rows=\"2\"\n                                  placeholder=\"Write a note for your friends and family\"\n                                  value={note}\n                                  onChange={(ev) => noteChangeHandler(ev)}\n                        />\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </>\n            }\n          </div>\n        </div>\n      </div>\n      <Modal\n            show={showLearnMore}\n            title={learnMoreCashAccept ? howToGiftOptions[0].text : howToGiftOptions[1].text}\n            size=\"md\"\n            closeIconClass=\"mb-auto\"\n            footer={(\n              <Button variant=\"primary\" className=\"px-6 py-1\" onClick={closeLearnMoreModalHandler}>Ok, got\n                it!</Button>\n            )}\n            closeModal={closeLearnMoreModalHandler}>\n            {learnMoreCashAccept ? howToGiftOptions[0].learnMoreContent : howToGiftOptions[1].learnMoreContent}\n          </Modal>\n      <SelectCategory\n        showModal={categoryModalShow}\n        closeModal={setCategoryModalVisible}\n        currentCategory={category}\n        changeCurrentCategory={setCategory}\n      />\n      <Tour\n        highlightedMaskClassName='tour-bg'\n        steps={steps}\n        isOpen={isTourOpen}\n        CustomHelper={TourCard}\n        onRequestClose={closeTour} />\n    </>\n  )\n}\n\nexport default AddGiftAnotherStore;","import React from \"react\";\nimport Modal from \"../modal-component/ModalComponent\";\nimport Counter from \"../counter/Counter\";\nimport Button from \"../button-component/ButtonComponent\";\nimport './VariantsModal.scss'\nimport TogglePills from \"../add-gift/toggle-pills/TogglePills\";\nimport CategoryPills from \"../edit-gift/category-pill/CategoryPill\";\nimport {SETTINGS_LINKS} from \"../../../../utils/constants\";\nimport RadioButton from \"../../components/radio-button/RadioButton\";\nimport SelectCategory from \"../select-category/SelectCategory\";\nimport {connect} from \"react-redux\";\n\nclass VariantsModal extends React.Component {\n\n\tstate = {\n\t\tmustHave: false,\n\t\tgroupedGift: false,\n\t\tproductTitle: \"\",\n\t\tproductLink: \"\",\n\t\ttempStoreItemUrl: \"\",\n\t\tstoreUrlInputHasFocus: false,\n\t\tproductPrice: \"\",\n\t\thowToGift: {},\n\t\tisCashAccepted: false,\n\t\tshowCategoryModal: false,\n\t\tproductCategories: []\n\t}\n\tproductUrlRef = React.createRef()\n\n\tcomponentDidMount() {\n\t\t// states only used for non-ma products\n\t\tlet currentCategory = []\n\t\tif (this.props.data.category) {\n\t\t\tcurrentCategory.push(this.getRefinedCategory(this.props.data.category))\n\t\t}\n\n\t\tthis.setState({\n\t\t\tproductTitle: this.props.data.title,\n\t\t\ttempStoreItemUrl: this.props.data.storeUrl,\n\t\t\tproductPrice: this.props.data.price,\n\t\t\tisCashAccepted: this.props.data.isMaItem ? false : true,\n\t\t\thowToGift: this.howToGiftOptions[0]\n\t\t})\n\t}\n\n\t//change product name\n\tproductNameChangeHandler = (e) => {\n\t\tthis.setState({\n\t\t\tproductTitle: e.target.value\n\t\t})\n\t}\n\n\t//change product Url\n\tproductStoreUrlChangeHandler = (e) => {\n\t\tthis.setState({\n\t\t\ttempStoreItemUrl: e.target.value\n\t\t})\n\t}\n\n\tresetStoreItemUrlClickHandler = inputRef => {\n\t\tthis.setState((prevState, _) => ({\n\t\t\ttempStoreItemUrl: prevState.storeItemUrl\n\t\t}))\n\t\tif (inputRef.current) {\n\t\t\tinputRef.current.disabled = true;\n\t\t\tinputRef.current.blur();\n\t\t}\n\t}\n\n\tconfirmStoreItemUrlClickHandler = inputRef => {\n\t\tthis.setState((prevState, _) => ({\n\t\t\tstoreItemUrl: prevState.tempStoreItemUrl\n\t\t}))\n\t\tif (inputRef.current) {\n\t\t\tinputRef.current.disabled = true;\n\t\t\tinputRef.current.blur();\n\t\t}\n\t}\n\tvariantModalCloseHandler() {\n\t\tthis.props.closeModal();\n\t}\n\tstoreUrlChangeClickHandler = (e, inputRef) => {\n\t\te.preventDefault();\n\t\tif (inputRef.current) {\n\t\t\tinputRef.current.disabled = false;\n\t\t\tinputRef.current.focus();\n\t\t}\n\t}\n\n\t//navigate to another store link\n\tanotherStoreItemViewDetail(link) {\n\t\twindow.open(link, \"_blank\")\n\t}\n\n\tstoreItemUrlBlurHandler = e => {\n\t\te.preventDefault();\n\t\tsetTimeout(() => {\n\t\t\tthis.setState({\n\t\t\t\tstoreUrlInputHasFocus: false\n\t\t\t})\n\t\t}, 100)\n\t\te.target.disabled = true;\n\t}\n\n\t//function for must have\n\tasync productMustHave() {\n\t\tawait this.setState((prevState, _) => ({mustHave: !prevState.mustHave}))\n\t\tthis.props.mostWanted();\n\t}\n\n\t//function for grouped gift\n\tasync productGroupedGift() {\n\t\tawait this.setState((prevState, _) => ({groupedGift: !prevState.groupedGift}))\n\t\tthis.props.groupedGift();\n\t}\n\n\t//price change handler\n\tproductPriceChangeHandler = (ev) => {\n\t\tif ((ev.target.value.length > 0 && (Number(ev.target.value[ev.target.value.length - 1]) >= 0 || ev.target.value[ev.target.value.length - 1] === \".\")) && ev.target.value.match(this.PRICE_REGEX_WHILE_ENTERING) || ev.target.value.length <= 0) {\n\t\t\tthis.setState({\n\t\t\t\tproductPrice: ev.target.value\n\t\t\t})\n\t\t}\n\t}\n\n\t//how to gift options\n\thowToGiftOptions = [\n\t\t{\n\t\t\tid: 1,\n\t\t\ttext: \"Get cash equivalent for this gift\",\n\t\t\tcontent: (\n\t\t\t\t<div>\n\t\t\t\t\t<p className=\"text-body\">Get cash equivalent for this gift</p>\n\t\t\t\t\t<p className=\"text-sm mt-1\">Choose this option for the best purchase experience.</p>\n\t\t\t\t\t<a className=\"text-sm edit-gift-links mt-1\" href=\"#\"\n\t\t\t\t\t\tonClick={(ev) => this.learnMoreLinkClickHandler(ev, true)}>Learn More</a>\n\t\t\t\t</div>\n\t\t\t),\n\t\t\tlearnMoreContent: (\n\t\t\t\t<>\n\t\t\t\t\t<p className=\"text-body edit-gift-learn-more-modal-text mt-3\">When you choose this option, the money for\n\t\t\t\t\t  the gift (including shipping) will be transferred to your\n\t\t\t\tbank account.</p>\n\n\t\t\t\t\t<p className=\"text-body edit-gift-learn-more-modal-text mt-4\">When the time is right for you, youll click\n\t\t\t\t\t  through to order directly from the website and have it\n\t\t\t\tdelivered to your home.</p>\n\n\t\t\t\t\t<p className=\"text-body edit-gift-learn-more-modal-text mt-4\">This helps decrease the number of duplicate\n\t\t\t\t\t  gifts, keeps your returns to a minimum, and gives you control\n\t\t\t\tover when you receive the gift.</p>\n\n\t\t\t\t\t<p className=\"text-body edit-gift-learn-more-modal-text mt-4\"><a href={SETTINGS_LINKS.BANK_ACCOUNT}\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\tclassName=\"edit-gift-links\">Connect your\n\t\t\t\tbank account to your profile,</a> if you havent already.</p>\n\t\t\t\t</>\n\t\t\t)\n\t\t},\n\t\t{\n\t\t\tid: 2,\n\t\t\ttext: \"Send your guests to the stores website to purchase and ship now.\",\n\t\t\tcontent: (\n\t\t\t\t<div>\n\t\t\t\t\t<p className=\"text-body\">Send your guests to the stores website to purchase and ship now.</p>\n\t\t\t\t\t<a className=\"text-sm edit-gift-links mt-1\" href=\"#\"\n\t\t\t\t\t\tonClick={(ev) => this.learnMoreLinkClickHandler(ev, false)}>Learn More</a>\n\t\t\t\t</div>\n\t\t\t),\n\t\t\tlearnMoreContent: (\n\t\t\t\t<p className=\"text-body edit-gift-learn-more-modal-text mt-1\">Please note, M+A is unable to accept returns\n\t\t\t  or manage shipping when you choose this option.</p>\n\t\t\t)\n\t\t}\n\t]\n\n\t//change how to gift handler\n\tchangeHowToGift = option => {\n\t\tthis.setState({\n\t\t\thowToGift: {...option}\n\t\t})\n\t}\n\n\t//adding product to registry\n\taddTheProduct = async () => {\n\t\tif (!this.props.data.isMaItem) {\n\t\t\tif (this.state.howToGift.id) {\n\t\t\t\tthis.state.isCashAccepted = this.state.howToGift.id === 1\n\t\t\t}\n\t\t\tlet categories = [];\n\t\t\tif (this.state.productCategories.length > 1) {\n\t\t\t\tthis.state.productCategories.map(cat => {\n\t\t\t\t\tcategories.push(cat.id);\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tawait this.props.productDataUpdate({\n\t\t\t\t...this.props.data,\n\t\t\t\ttitle: this.state.productTitle,\n\t\t\t\tprice: this.state.productPrice,\n\t\t\t\tstoreUrl: this.state.tempStoreItemUrl,\n\t\t\t\tisCashAcceptedOnly: this.state.isCashAccepted\n\t\t\t})\n\t\t}\n\t\tthis.props.addProductHandler()\n\t}\n\t\n\t//Only if add category to be added\n\t//select category modal handler functions\n\t// openSelectCategoryModal = (e) => {\n\t// \te.preventDefault()\n\t// \tthis.setState({\n\t// \t\tshowCategoryModal: true\n\t// \t})\n\t// }\n\n\tcloseCategoryModal = (value) => {\n\t\tthis.setState({\n\t\t\tshowCategoryModal: value\n\t\t})\n\t}\n\n\tsetCategory = categories => {\n\t\tthis.setState({\n\t\t\tproductCategories: [...categories]\n\t\t})\n\t}\n\n\tgetRefinedCategory = (category) => {\n\t\tlet refinedCategory = null;\n\t\tfor (let parentCategory of [...this.props.stateCategories]) {\n\t\t\tlet newParentCategory = {...parentCategory}\n\t\t\tnewParentCategory.subCategories = []\n\t\t\tfor (let subCategory of parentCategory.subCategories) {\n\t\t\t\tlet newSubCategory = {...subCategory}\n\t\t\t\tlet catToPush = []\n\t\t\t\tif (newSubCategory.subProductTypes && newSubCategory.subProductTypes.length > 0) {\n\t\t\t\t\tcatToPush = newSubCategory.subProductTypes.map(subCat => {\n\t\t\t\t\t\tlet newSubCat = {...subCat}\n\t\t\t\t\t\tnewSubCat.categoryName = newSubCategory.categoryName + \" (\" + newSubCat.categoryName + \")\";\n\t\t\t\t\t\treturn newSubCat;\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tdelete newSubCategory.subProductTypes\n\t\t\t\tcatToPush.unshift(newSubCategory)\n\t\t\t\tnewParentCategory.subCategories.push(...catToPush)\n\t\t\t}\n\t\t\tlet foundCategory = newParentCategory.subCategories.filter(subCat => subCat.id === category.id);\n\t\t\tif (foundCategory.length === 1) {\n\t\t\t\trefinedCategory = {\n\t\t\t\t\t...foundCategory[0],\n\t\t\t\t\tmainCategory: parentCategory.categoryName,\n\t\t\t\t\tdisplayName: parentCategory.categoryName + \": \" + foundCategory[0].categoryName\n\t\t\t\t}\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\n\t\treturn refinedCategory;\n\t}\n\trender() {\n\t\tconst modalFooter = (\n\t\t\t<>\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\tclassName=\"px-3 py-1 font-weight-bold font-medium text-body\"\n\t\t\t\t\tonClick={() => this.anotherStoreItemViewDetail(this.props.data.storeUrl)}\n\t\t\t\t>View Details</Button>\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\tclassName=\"px-4 py-1 font-weight-bold font-medium text-body\"\n\t\t\t\t\tonClick={this.addTheProduct}\n\t\t\t\t>Add & Close</Button>\n\t\t\t</>\n\t\t)\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Modal\n\t\t\t\t\tshow={this.props.show}\n\t\t\t\t\ttitle=\"Add Item\"\n\t\t\t\t\tfooter={modalFooter}\n\t\t\t\t\tcloseModal={() => this.variantModalCloseHandler()}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"row mt-4 variant-product-content\">\n\t\t\t\t\t\t<div className=\"col-12 col-md-5 pr-3 variant-product-image-container\">\n\t\t\t\t\t\t\t<div className=\"pb-5 image w-100\">\n\t\t\t\t\t\t\t\t<img className=\"mx-auto variant-product-image\" src={this.props.data.activeVariant === null ? this.props.data.imageUrl : this.props.data.activeVariant.imageUrl} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"product-sub-text-heading mt-3 text-sm font-medium\">\n\t\t\t\t\t\t\t\t<span>Why we love it?</span>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className=\"product-sub-text-description text-sm text-sm\">\n\t\t\t\t\t\t\t\t<span>{this.props.data.description} <a href={this.props.data.storeUrl} className=\"read-more\" tabindex=\"0\" target=\"_blank\">Read more</a></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"col-12 col-md-7 variant-product-detail pl-md-5 pl-md-0 mt-3 mt-md-0\">\n\t\t\t\t\t\t\t{this.props.data.isMaItem ?\n\t\t\t\t\t\t\t\t<label className=\"w-100 mw-100 h2 edit-gift-resize-none mb-7\">{this.props.data.title}</label>\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<div className=\"recommend-product-input-container\">\n\t\t\t\t\t\t\t\t\t<p className=\"recommend-product-input-label text-sm font-medium mb-1\">Product Name</p>\n\t\t\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\t\t\trows={2}\n\t\t\t\t\t\t\t\t\t\tclassName=\"w-100 mw-100 recommend-product-input h2 p-2 edit-gift-resize-none\"\n\t\t\t\t\t\t\t\t\t\tvalue={this.state.productTitle}\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => this.productNameChangeHandler(e)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\t\t{this.props.data.isMaItem ?\n\t\t\t\t\t\t\t\tnull\n\t\t\t\t\t\t\t\t: <div className=\"row my-5 \">\n\t\t\t\t\t\t\t\t\t<div className=\"col\">\n\t\t\t\t\t\t\t\t\t\t{/* When store is not M&A */}\n\t\t\t\t\t\t\t\t\t\t<div className=\"recommend-product-input-container\">\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"recommend-product-input-label text-sm font-medium mb-1\">Store</p>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"position-relative\">\n\t\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-100 mw-100 recommend-product-input text-body py-1 pl-2 pr-14\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.tempStoreItemUrl}\n\t\t\t\t\t\t\t\t\t\t\t\t\tref={this.productUrlRef}\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={true}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonFocus={() => this.setState({storeUrlInputHasFocus: true})}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonBlur={(e) => this.storeItemUrlBlurHandler(e)}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => this.productStoreUrlChangeHandler(e)}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t{!this.state.storeUrlInputHasFocus ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a className=\"recommned-product-input-change-url edit-gift-links font-medium\" href=\"#\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => this.storeUrlChangeClickHandler(e, this.productUrlRef)}>Change</a>\n\t\t\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"recommned-product-store-url-submit\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/*TODO: Change icons once added to global icons*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button className=\"icon-close mr-3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.resetStoreItemUrlClickHandler(this.productUrlRef)} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button className=\"icon-check\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.confirmStoreItemUrlClickHandler(this.productUrlRef)} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t<div className=\"d-flex align-items-center mb-7\">\n\t\t\t\t\t\t\t\t<div className=\"mr-7\">\n\t\t\t\t\t\t\t\t\t<div className=\"text-sm font-medium\">Price</div>\n\t\t\t\t\t\t\t\t\t{this.props.data.isMaItem ?\n\t\t\t\t\t\t\t\t\t\t<div className=\"product-price  d-flex\">\n\t\t\t\t\t\t\t\t\t\t\t<h5>{this.props.activeVariant ? '$' + this.props.activeVariant.price : '$' + this.props.data.price}</h5>\n\t\t\t\t\t\t\t\t\t\t\t{this.props.data.strikedPrice ? <span className=\"strike-price ml-1\">{this.props.data.strikedPrice}</span> : null}\n\t\t\t\t\t\t\t\t\t\t</div> :\n\t\t\t\t\t\t\t\t\t\t<div className=\"recommned-product-input-overlay recommend-product-input-container\">\n\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-100 mw-100 recommend-product-input py-1 text-body pl-5\"\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.productPrice}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => this.productPriceChangeHandler(e)} />\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-body recommned-price-currency\">$</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<div className=\"text-sm font-medium mb-1\">Quantity</div>\n\t\t\t\t\t\t\t\t\t<Counter\n\t\t\t\t\t\t\t\t\t\tcounter={this.props.data.quantity}\n\t\t\t\t\t\t\t\t\t\tincrementHandler={this.props.incrementQuantityHandler}\n\t\t\t\t\t\t\t\t\t\tdecrementHandler={this.props.decrementQuantityHandler} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{this.props.data.maItemVariantItemRecommendation.length > 0 ? <div className=\"text-sm font-medium mb-1\">Colors</div> : null}\n\t\t\t\t\t\t\t<div className=\"d-flex flex-wrap mb-7\">\n\t\t\t\t\t\t\t\t{this.props.data.maItemVariantItemRecommendation.map(variant =>\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName={[\"mr-1 mb-1 product-variant-circle-disk\", (this.props.data.activeVariant && this.props.data.activeVariant.variantId === variant.variantId) ? \"active-variant-product\" : \"\"].join(\" \")}\n\t\t\t\t\t\t\t\t\t\tkey={variant.variantId + ':' + variant.sku}\n\t\t\t\t\t\t\t\t\t\tonClick={() => this.props.setActiveRecommandationVariantHandler(variant)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<img className=\"product-variant-image\" src={variant.iconUrl} alt={variant.pattern} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className=\"mb-7\">\n\t\t\t\t\t\t\t\t<div className=\"text-sm font-medium mb-1 d-flex\">Categories\n\t\t\t\t\t\t\t\t{/* Uncomment only if added categories is to be added */}\n\t\t\t\t\t\t\t\t{/* {!this.props.data.isMaItem ?\n\t\t\t\t\t\t\t\t\t\t<a href=\"#\" className=\"edit-gift-links font-medium text-sm ml-2\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => this.openSelectCategoryModal(e)}>Add</a>\n\t\t\t\t\t\t\t\t\t\t: null} */}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{/* {this.state.productCategories.map(category => {\n\t\t\t\t\t\t\t\t\treturn <CategoryPills text={`${category.mainCategory} : ${category.categoryName}`}\n\t\t\t\t\t\t\t\t\t\tclassName=\"mt-1 mr-1\" />\n\t\t\t\t\t\t\t\t})} */}\n\t\t\t\t\t\t\t\t<CategoryPills text={this.props.data.category.parentCategory !== null ? this.props.data.category.parentCategory.categoryName + \": \" + this.props.data.category.categoryName : this.props.data.category.categoryName} className=\"mt-1 mr-1\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"mb-7 d-flex\">\n\t\t\t\t\t\t\t\t<TogglePills\n\t\t\t\t\t\t\t\t\tdataTut=\"must-have-tour\"\n\t\t\t\t\t\t\t\t\ticonClass=\"icon-heart\"\n\t\t\t\t\t\t\t\t\tactiveClass={this.state.mustHave ? 'add-product-active-must-have' : null}\n\t\t\t\t\t\t\t\t\tonClick={() => this.productMustHave()}\n\t\t\t\t\t\t\t\t\ttext=\"Must Have\"\n\t\t\t\t\t\t\t\t\tclassName=\"mr-2\" />\n\t\t\t\t\t\t\t\t<TogglePills\n\t\t\t\t\t\t\t\t\tdataTut=\"group-gift-tour\"\n\t\t\t\t\t\t\t\t\ticonClass=\"icon-guest\"\n\t\t\t\t\t\t\t\t\tactiveClass={this.state.groupedGift ? 'add-product-active-group-gift' : null}\n\t\t\t\t\t\t\t\t\tonClick={() => this.productGroupedGift()}\n\t\t\t\t\t\t\t\t\ttext=\"Group Gift\"\n\t\t\t\t\t\t\t\t\tclassName=\"mr-2\" />\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{this.props.data.isMaItem ? null :\n\t\t\t\t\t\t\t\t<div className=\"row mt-5\">\n\t\t\t\t\t\t\t\t\t<div className=\"col\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"recommend-product-input-container\">\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"recommend-product-input-label text-sm font-medium\">How to gift?</p>\n\t\t\t\t\t\t\t\t\t\t\t{this.howToGiftOptions.map((option, index) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<div className={[index === 0 ? \"mt-1\" : \"mt-2\"].join(\" \")} key={\"how-to-gift-option-\" + option.id}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<RadioButton\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"how-to-gift\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttextClass=\"text-sm\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tchecked={option.id === this.state.howToGift.id ? true : null}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tchangeHandler={() => this.changeHowToGift(option)}>{option.content}</RadioButton>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</Modal>\n\t\t\t\t{this.state.showCategoryModal ?\n\t\t\t\t\t<SelectCategory\n\t\t\t\t\t\tshowModal={this.state.showCategoryModal}\n\t\t\t\t\t\tcloseModal={this.closeCategoryModal}\n\t\t\t\t\t\tcurrentCategory={this.state.productCategories ? [...this.state.productCategories] : []}\n\t\t\t\t\t\tchangeCurrentCategory={this.setCategory}\n\t\t\t\t\t/>\n\t\t\t\t\t: null}\n\t\t\t</>\n\t\t)\n\t}\n}\nconst mapStateToProps = state => ({\n\tstateCategories: state.myRegistry.checkList,\n})\n\nexport default connect(\n\tmapStateToProps\n)(VariantsModal);\n","import React, {Component} from 'react';\nimport {\n  incrementQuantity,\n  decrementQuantity,\n  clearAnotherStoreProductInfo,\n  setAnotherStoreProductInfo,\n  setActiveRecommandationVariant,\n} from \"../../../my-registry/MyRegistryActions\";\nimport CardItem from \"modules/commons/components/card-item/CardItem\";\nimport {connect} from \"react-redux\";\nimport \"./ViewRecommend.scss\";\nimport MoreOption from \"../more-option/MoreOption\";\nimport {ADD_REGISTRY_ITEM, UPDATE_REGISTRY_ITEM} from 'api/queries';\nimport {graphQL} from 'api/axios';\nimport Slider from \"react-slick\";\n// Import css files\nimport \"slick-carousel/slick/slick.css\";\nimport \"slick-carousel/slick/slick-theme.css\";\nimport {toast} from \"react-toastify\";\nimport {ADD_REGISTRY_ITEM as ADD_REGISTRY_ITEM_MUTATION} from 'api/mutations';\nimport BookmarkletSection from \"../add-gift/bookmarklet-section/BookmarkletSection\";\nimport AddGiftAnotherStore from \"../add-gift/add-gift-another-store/AddGiftAnotherStore\";\nimport Button from \"../button-component/ButtonComponent\";\nimport Modal from \"../modal-component/ModalComponent\";\nimport {getProducts as commonGetProducts, getCategories as commonGetCategories, getTodoList} from \"../../../../utils/commonFunction\";\nimport {addProductHandler} from 'utils/commonFunction';\nimport VariantsModal from \"../variants-modal/VariantsModal\";\nimport { getAction } from 'connected-react-router';\n\nclass ViewRecommend extends Component {\n\n  PRICE_REGEX = /(^[0-9]+(.?[0-9]{1,2})?$)/g\n\n  state = {\n    show: false,\n    updateModal: false,\n    viewDetailsBtn: true,\n    maCardModal: false,\n    nonMACardModal: false,\n    currentRecommendProduct: null,\n    productMostWanted: false,\n    productGroupedGift: false\n  }\n  modalTitle = \"\"\n  modalBody = \"\"\n  modalTitleContent = \"\"\n  cardRef = React.createRef()\n\n  clearModalData = () => {\n    this.modalTitle = \"\"\n    this.modalBody = \"\"\n    this.modalTitleContent = \"\"\n\n    this.props.dispatch(clearAnotherStoreProductInfo());\n  }\n\n  modalCloseHandler = () => {\n    this.clearModalData()\n    this.setState({\n      show: false\n    })\n  }\n\n  moreOptionsData = [\n    // TODO add option list\n    {\n      name: \"View Item\",\n      action: () => alert(\"Clicked\")\n    },\n  ]\n  getCategoryId = () => {\n    const currentRecommendation = this.props.stateActiveRecommandation;\n    for (let parentCategory of this.props.stateChecklist) {\n      if (parentCategory.categoryName === currentRecommendation) {\n        return parentCategory.id\n      }\n      for (let childCategory of parentCategory.subCategories) {\n        if (childCategory.categoryName === currentRecommendation) {\n          return childCategory.id\n        }\n      }\n    }\n  }\n\n  // Checking if product data is valid or not\n  checkDataValidity = (storeProduct) => {\n\n    // Valid store URL\n    try {\n      new URL(storeProduct.productUrl);\n    } catch {\n      alert(\"Invalid Store Url\");\n      return false;\n    }\n\n    // Valid Product Name\n    if (storeProduct.productName.length <= 0) {\n      alert(\"Invalid Product Name\");\n      return false;\n    }\n\n    // Valid Price\n    if (storeProduct.price.length <= 0) {\n      alert(\"Invalid Price\");\n      return false;\n    } else if (!String(storeProduct.price).match(this.PRICE_REGEX)) {\n      toast.error(\"Please enter valid amount\")\n      return false\n    }\n\n    // Valid Quantity\n    if (storeProduct.quantity < 1) {\n      alert(\"Invalid Quantity\");\n      return false;\n    }\n\n    // // Valid Category\n    // if (!storeProduct.category.id) {\n    //   alert(\"Invalid Category\");\n    //   return false;\n    // }\n\n    return true;\n  }\n\n  // Adding Add on my own product to registry\n  addItemToRegistry = () => {\n    const storeProduct = this.props.stateAnotherStoreProduct;\n    const isValidData = this.checkDataValidity(storeProduct);\n    if (!isValidData) {\n      return;\n    }\n\n    let storeUrl = new URL(storeProduct.productUrl);\n    storeUrl = storeUrl.hostname.split(\".\")\n    const storeName = storeUrl[storeUrl.length - 2]\n\n    let formData = new FormData()\n\n    let data = {\n      query: ADD_REGISTRY_ITEM_MUTATION,\n      operationName: \"addRegistryItems\",\n      variables: {\n        \"registryId\": this.props.stateRegistryInfo.id,\n        \"input\": [{\n          \"storeName\": storeName,\n          \"items\": [{\n            \"title\": storeProduct.productName,\n            // TODO: change category\n            \"registryCategories\": storeProduct.category.length > 0 ? storeProduct.category.map(category => Number(category.id)) : null,\n            \"tags\": [],\n            \"storeItemUrl\": storeProduct.productUrl,\n            \"price\": storeProduct.price,\n            \"quantity\": storeProduct.quantity,\n            \"mostWanted\": storeProduct.mustHave,\n            \"isGroupGift\": storeProduct.groupGift,\n            \"note\": storeProduct.note\n          }]\n        }]\n      }\n    }\n\n    if (storeProduct.productImage.type === \"custom\") {\n      let map = {\n        images: [\"variables.input.0.items.0.images\"]\n      }\n      data.variables.input[0].items[0]['images'] = null;\n      formData.append(\"map\", JSON.stringify(map))\n      formData.append(\"images\", this.dataURItoBlob(storeProduct.productImage.value, storeProduct.productImage.fileType, storeProduct.productImage.fileName))\n    } else {\n      data.variables.input[0].items[0]['imageUrl'] = this.props.stateAnotherStoreProduct.productImage.value;\n    }\n\n    formData.append(\"operations\", JSON.stringify(data))\n\n    graphQL(formData).then(res => {\n      if (res.status === 200) {\n        // Successfully added product\n        commonGetProducts(this.props.stateRegistryInfo.id, this.props.dispatch);\n        commonGetCategories(this.props.stateRegistryInfo.id, this.props.dispatch);\n\n        toast.success((\n          <p><b>{storeProduct.productName}</b> added to your registry!</p>\n        ))\n        getTodoList(this.props.stateRegistryInfo.id, this.props.dispatch)\n        this.clearModalData();\n        this.modalCloseHandler();\n      }\n    }).catch(err => {\n      toast.error(\"Some error occurred.\");\n      console.error(err.message)\n    })\n  }\n\n  anotherStoreItemViewDetail = (storeProduct) => {\n    if (storeProduct.productUrl) {\n      window.open(storeProduct.productUrl, '_blank');\n    }\n  }\n\n  // Popping up Add on my own modal\n  addOnMyOwnClickHandler = (category) => {\n    this.clearModalData()\n    let newCategory = [{\n      ...category,\n      displayName: category.parentCategory + \" : \" + category.categoryName\n    }]\n    let prodInfo = {...this.props.stateAnotherStoreProduct};\n    prodInfo.category = newCategory;\n    this.props.dispatch(setAnotherStoreProductInfo(prodInfo));\n\n    this.modalTitle = `Add my own ${category && category.isSubProduct && category.parentCategory ? `${category.parentCategory.categoryName} (${category.categoryName})` : category.categoryName}`\n    // this.modalTitle = `Add my own ${category && category.parentCategory ? category.parentCategory: \"\"}${category ? category.categoryName.toLowerCase() : \"\"}`\n    this.modalTitleContent = (\n      <div className=\"row mt-2 mb-4\">\n        <div className=\"col\">\n          <BookmarkletSection />\n        </div>\n      </div>\n    )\n    this.modalBody = <AddGiftAnotherStore addMyOwn={true} />\n\n    this.setState((prevState, props) => ({\n      show: !prevState.show\n    }))\n  }\n\n  setActiveRecommandationVariantHandler = (productID, variant) => {\n    this.props.dispatch(setActiveRecommandationVariant(productID, variant));\n  }\n\n  recommedCardClickedHandler = (data) => {\n    this.setState({\n      maCardModal: true,\n      currentRecommendProduct: data\n    })\n  }\n\n  maCardModalCloseHandler = () => {\n    this.setState({\n      maCardModal: false,\n      currentRecommendProduct: null,\n      productMostWanted: false,\n      productGroupedGift: false\n    })\n  }\n\n  nonMACardModalCloseHandler = () => {\n    this.setState({\n      nonMACardModal: false,\n      currentRecommendProduct: null,\n      productMostWanted: false,\n      productGroupedGift: false\n    })\n  }\n\n  setMostWanted = async () => {\n    await this.setState((prevState, _) => ({\n      productMostWanted: !prevState.productMostWanted\n    }))\n  }\n\n  setGroupedGift = async () => {\n    await this.setState((prevState, _) => ({\n      productGroupedGift: !prevState.productGroupedGift\n    }))\n  }\n\n  addProductToRegistry = async (activeRecommandation) => {\n    let data = {}\n    if (activeRecommandation.isMaItem) {\n      data = {\n        ...activeRecommandation,\n        mostWanted: this.state.productMostWanted ? this.state.productMostWanted : false,\n        isGroupGift: this.state.productGroupedGift ? this.state.productGroupedGift : false,\n        isCashAcceptedOnly: false\n      }\n    }\n    else {\n      data = {\n        ...activeRecommandation,\n        mostWanted: this.state.productMostWanted ? this.state.productMostWanted : false,\n        isGroupGift: this.state.productGroupedGift ? this.state.productGroupedGift : false,\n      }\n    }\n    await addProductHandler(data, this.props.stateAddedProducts, this.props.stateRegistryInfo, this.props.dispatch)\n    this.setState({\n      maCardModal: false\n    });\n  }\n\n  productDataUpdate(data) {\n    this.setState({\n      currentRecommendProduct: data\n    })\n  }\n\n  getActiveRecommandation = (products) => {\n    let allProducts = [...this.props.products]\n    for (let product of allProducts) {\n      if(product.id === this.state.currentRecommendProduct?.id) {\n        return product\n      }\n    }\n  }\n\n  render() {\n\n    let activeRecommandation = this.getActiveRecommandation(this.props.products)\n\n    const settings = {\n      dots: true,\n      infinite: false,\n      speed: 500,\n      slidesToShow: 3.2,\n      slidesToScroll: 1,\n      prevArrow: <button type=\"button\" class=\"slick-prev slick-prev-btn\"><i className=\"icon-chevron-left slick-icon\" />\n      </button>,\n      nextArrow: <button type=\"button\" class=\"slick-next slick-next-btn\"><i className=\"icon-chevron-right slick-icon\" />\n      </button>,\n      responsive: [{\n        breakpoint: 576,\n        settings: {\n          slidesToShow: 1.1,\n          prevArrow: false,\n          nextArrow: false,\n          arrows: false\n        }\n      },\n      {\n        breakpoint: 927,\n        settings: {\n          slidesToShow: 2.1\n        }\n      },\n      {\n        breakpoint: 1025,\n        settings: {\n          slidesToShow: 2.5\n        }\n      }\n      ],\n    };\n\n    let modalFooterButtons = (\n      <>\n        <Button\n          variant=\"secondary\"\n          className=\"px-3 py-1 font-weight-bold font-medium text-body\"\n          onClick={() => this.anotherStoreItemViewDetail(this.props.stateAnotherStoreProduct)}\n          disabled={this.props.stateAnotherStoreProduct && this.props.stateAnotherStoreProduct.productName ? false : true}\n        >View Details</Button>\n        <Button\n          variant=\"primary\"\n          className=\"px-4 py-1 font-weight-bold font-medium text-body\"\n          onClick={this.addItemToRegistry}\n          disabled={this.props.stateAnotherStoreProduct && this.props.stateAnotherStoreProduct.productName ? false : true}\n        >Save & Close</Button>\n      </>\n    )\n    return (\n      <>\n        <div className=\"recommended-cart py-6\" data-tut={this.props.stepTwoForTour}>\n          <div className=\"row\">\n            <div className=\"col title d-flex align-items-center\">\n              <h2>{this.props.title}</h2>\n              {/* <span className=\"text-sm sub-title\">Recommended </span> */}\n              {this.props.category.totalItemsCount ?\n                <p className=\"text-sm sub-title-progess ml-2 px-1\">{this.props.category.addedItemsCount}/{this.props.category.totalItemsCount} added</p>\n                : null}\n\n            </div>\n          </div>\n          <div className=\"pt-6\">\n            <Slider {...settings}>\n              {this.props.products.map((card, index) =>\n                // <div><>{index}</></div>\n                <div className=\"cart-view\" ref={this.cardRef}>\n                  <CardItem\n                    className=\"mr-4\"\n                    data={card}\n                    onCardClick={() => this.recommedCardClickedHandler(card)}\n                    activeVariant={card.activeVariant}\n                    key={\"CardItem-\" + index}\n                    incrementQuantityHandler={() => this.props.dispatch(incrementQuantity(card.id, 1))}\n                    decrementQuantityHandler={() => this.props.dispatch(decrementQuantity(card.id, 1))}\n                    addProductHandler={() => addProductHandler(card, this.props.stateAddedProducts, this.props.stateRegistryInfo, this.props.dispatch)}\n                    setActiveRecommandationVariantHandler={(variant) => this.setActiveRecommandationVariantHandler(card.id, variant)}\n                  />\n                </div>\n              )}\n              <div>\n                <div className=\"add-my-own-card mr-4 d-flex flex-column align-items-center justify-content-center\"\n                  style={{height: this.cardRef.current ? this.cardRef.current.offsetHeight + 'px' : '200px'}}\n                  onClick={() => this.addOnMyOwnClickHandler(this.props.category)}\n                >\n                  <button className=\"add-my-own-button\" />\n                  <p className=\"text-body font-medium mt-5\">Add my own</p>\n                </div>\n              </div>\n            </Slider>\n          </div>\n          <div className=\"mt-6 card-buttom d-flex\">\n            {/* TODO: Change text to dynamic */}\n            <div>\n              <img className=\"blog-img\"\n                src=\"https://cdn.shopify.com/s/files/1/2338/2917/files/maedit_submenu.jpg?v=1588207400\"\n                alt={this.props.title} />\n            </div>\n            <div className=\"pl-2 pl-md-4 my-auto\">\n              <div className=\"text-body\">How to pick up a perfect crib mattress?</div>\n              <div className=\"card-buttom-subtext text-sm d-none d-md-inline-block\">by Joanna Lee, March 13, 2020</div>\n            </div>\n            <div className=\"text-sm my-auto mr-6 ml-md-auto ml-0 d-none d-md-inline-block\">\n              <a href=\"\" className=\"read-more \" tabindex=\"0\">Read more</a>\n            </div>\n          </div>\n        </div>\n\n        <Modal\n          show={this.state.show}\n          updateModal={this.state.updateModal}\n          title={this.modalTitle}\n          titleContent={this.modalTitleContent}\n          footer={modalFooterButtons}\n          closeModal={this.modalCloseHandler}>\n          {this.modalBody}\n        </Modal>\n\n        {this.state.maCardModal ?\n          <VariantsModal\n            show={this.state.maCardModal}\n            data={activeRecommandation}\n            productDataUpdate={(data) => this.productDataUpdate(data)}\n            closeModal={this.maCardModalCloseHandler}\n            activeVariant={activeRecommandation.activeVariant}\n            incrementQuantityHandler={() => this.props.dispatch(incrementQuantity(this.state.currentRecommendProduct.id, 1))}\n            decrementQuantityHandler={() => this.props.dispatch(decrementQuantity(this.state.currentRecommendProduct.id, 1))}\n            addProductHandler={() => this.addProductToRegistry(activeRecommandation)}\n            mostWanted={() => this.setMostWanted()}\n            groupedGift={() => this.setGroupedGift()}\n            setActiveRecommandationVariantHandler={(variant) => this.setActiveRecommandationVariantHandler(this.state.currentRecommendProduct.id, variant)}\n          /> : null\n        }\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    stateAddedProducts: state.myRegistry.addedProducts,\n    stateActiveRecommandation: state.myRegistry.activeRecommandation,\n    stateChecklist: state.myRegistry.checkList,\n    stateRegistryInfo: state.registry.info,\n    stateAnotherStoreProduct: state.myRegistry.anotherStoreProduct,\n  }\n}\n\nexport default connect(mapStateToProps)(ViewRecommend)","import React, {useState} from 'react'\nimport \"./Filter.scss\";\nimport RadioButton from 'modules/commons/components/radio-button/RadioButton';\nimport CheckBox from 'modules/commons/components/check-box/CheckBox';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setParentFilter, setChildFilter, clearFilter } from '../../MyRegistryActions.js';\nimport Button from \"../../../commons/components/button-component/ButtonComponent\";\nimport Modal from '../../../commons/components/modal-component/ModalComponent';\n\n\nconst Filter = () => {\n\n  const dispatch = useDispatch()\n\n  const filterData = useSelector(state => state.myRegistry.filterCategory)\n  let tempParentFilterId = useSelector(state => state.myRegistry.filterApplied.parentFilter)\n  let tempChildFilterIds = useSelector(state => state.myRegistry.filterApplied.childFilter)\n  let [showFilterModal, setShowFilterModal] = useState(false);\n\n  const filterContentRef = React.createRef();\n\n  const toggleFilterContent = () => {\n    filterContentRef.current.classList.toggle(\"show\");\n  }\n\n  // Change event handlers\n\n  const parentChangeHandler = (parent) => {\n    dispatch(setParentFilter(parent.id))\n    if (parent.child) {\n      dispatch(setChildFilter(parent.child.map(child => child.id)))\n    } else {\n      dispatch(setChildFilter([]))\n    }\n  }\n\n  const childChangeHandler = (childId, parentId) => {\n\n    if (parentId !== tempParentFilterId) {\n      dispatch(setParentFilter(parentId))\n      if (tempChildFilterIds.length > 0) {\n        dispatch(setChildFilter([]))\n      }\n    }\n\n    const childIndex = tempChildFilterIds.indexOf(childId)\n\n    if (childIndex === -1) {\n      dispatch(setChildFilter([...tempChildFilterIds, childId]))\n    } else {\n      let newChildArray = [...tempChildFilterIds]\n      newChildArray.splice(childIndex, 1)\n      dispatch(setChildFilter(newChildArray))\n    }\n  }\n\n  // Click Handler\n\n  const doneClickHandler = () => {\n    toggleFilterContent()\n  }\n\n\n  const clearClickHandler = () => {\n    dispatch(clearFilter())\n    toggleFilterContent()\n  }\n\n  const doneModalClickHandler = () => {\n    setShowFilterModal(false);\n  }\n\n\n  const clearModalClickHandler = () => {\n    dispatch(clearFilter())\n    setShowFilterModal(false);\n  }\n\n  const filterContent = (\n    <div className=\"d-flex flex-column px-5\">\n      {filterData.map(parentFilter => (\n        <div className=\"filter-item mb-3\" key={\"filter-\" + parentFilter.id}>\n          {/* Parent filter */}\n          <RadioButton\n            {...parentFilter}\n            textClass=\"text-body\"\n            centerText=\"true\"\n            name=\"parentFilter\"\n            key={parentFilter.id}\n            checked={parentFilter.id === tempParentFilterId ? true : null}\n            changeHandler={() => parentChangeHandler(parentFilter)}\n          />\n\n          {/* Child filter */}\n          {parentFilter.child ? (\n            <div className=\"d-flex flex-column mt-2 pl-5\" key={\"child-filter-\" + parentFilter.id}>\n              {parentFilter.child.map(childFilter => (\n                <CheckBox\n                  {...childFilter}\n                  key={childFilter.id}\n                  className=\"mb-4\"\n                  checked={tempChildFilterIds.includes(childFilter.id) ? true : null}\n                  changeHandler={() => childChangeHandler(childFilter.id, parentFilter.id)}\n                />\n              ))}\n            </div>\n          )\n            : null}\n        </div>\n      ))}\n    </div>\n  )\n\n  const footerButton = (\n    <div className=\"d-flex filter-content-bottom-buttons\">\n      <Button className=\"text-body py-1 px-5 mr-2 font-medium\"\n        onClick={clearModalClickHandler}\n        variant=\"secondary\"\n      >Clear\n          </Button>\n      <Button\n        className=\"text-body py-1 px-3 font-medium\"\n        onClick={doneModalClickHandler}\n        variant=\"primary\"\n      >Done\n          </Button>\n    </div>\n  )\n\n\n  return (\n    <div className=\"filter-section-filter\">\n      <Button className=\"px-1 py-1 px-md-3 d-none d-md-inline-block\" variant=\"secondary\" onClick={toggleFilterContent}>\n        <div className=\"d-flex\">\n          <i className=\"icon-filter-1 mr-1 filter-icon\" />\n          <span className=\"font-medium text-body\">Filter</span>\n        </div>\n      </Button>\n      <Button className=\"px-1 py-1 px-md-3 d-inline-block d-md-none\" variant=\"secondary\" onClick={()=>setShowFilterModal(true)}>\n        <div className=\"d-flex\">\n          <i className=\"icon-filter-1 filter-icon\" />\n        </div>\n      </Button>\n      <div className=\"filter-content py-4\" ref={filterContentRef}>\n        {filterContent}\n        <div className=\"d-flex filter-content-bottom-buttons px-5 pt-4\">\n          <Button className=\"text-body py-1 px-5 mr-2 font-medium\"\n            onClick={clearClickHandler}\n            variant=\"secondary\"\n          >Clear\n          </Button>\n          <Button\n            className=\"text-body py-1 px-3 font-medium\"\n            onClick={doneClickHandler}\n            variant=\"primary\"\n          >Done\n          </Button>\n        </div>\n      </div>\n      <Modal\n        show={showFilterModal}\n        title=\"Filters\"\n        footer={footerButton}\n        closeModal={()=> setShowFilterModal(false)}>\n        {filterContent}\n      </Modal>\n    </div>\n  )\n}\n\nexport default Filter;","import React from 'react';\nimport \"./FilterItemChip.scss\";\n\nconst FilterItemChip = (props) => {\n  return (\n    <span className={[\"filter-item-chip px-2 mb-1\", props.className ? props.className : ''].join(\" \")}><span className=\"text-sm\">{props.text}</span><i className=\"icon-close ml-1\" onClick={props.deleteHandler}></i></span>\n  )\n}\n\nexport default FilterItemChip;","import React from \"react\";\nimport \"./ImportGiftCard.scss\";\n\nconst ImportGiftCard = (props) => {\n  return (\n    <div className=\"import-gift-card d-flex py-2\" onClick={props.onClick}>\n        <i className={[props.iconClass, \"import-gift-card-icon mx-5 align-self-center\"].join(\" \")}/>\n        <div className=\"mr-3\">\n          <h4>{props.title}</h4>\n          <p className=\"text-sm mt-1\">{props.text}</p>\n        </div>\n    </div>\n  )\n}\n\nexport default ImportGiftCard;","import React from \"react\";\nimport \"./ImportRegistry.scss\";\nimport {getAnotherRegistryProducts} from \"../../../../../api/axios\";\nimport {toast} from \"react-toastify\";\nimport SelectCategory from \"../../select-category/SelectCategory\";\nimport CategoryPill from \"./category-pill/CategoryPill\";\nimport {connect} from \"react-redux\";\nimport {setAnotherStoreRegistryItems} from \"../../../../my-registry/MyRegistryActions\";\nimport Button from \"../../button-component/ButtonComponent\";\nimport Modal from \"../../modal-component/ModalComponent\";\nimport {IMPORT_REGISTRY_BABYLIST_TEXT} from \"../../../../../utils/constants\";\n\nclass ImportRegistry extends React.Component {\n  HTTPS_REGEX = /^(https?:\\/\\/){1}.*/g\n\n  REGISTRY_STORE_ALTERNATIVE_NAME = {\n    tgt: \"target\"\n  }\n\n  state = {\n    registryUrl: \"\",\n    errorState: \"\",\n    errorMessage: \"\",\n    loading: false,\n    categoryModalShow: false,\n    activeCategoryProductIndex: null,\n    currentRegistryLink: \"\",\n    inputHasFocus: false,\n    currentCategory: [],\n    btnHasFocus: false,\n    changeUrlConfirmationModal: false\n  }\n\n  inputRef = React.createRef()\n\n  setCategoryModalVisible = () => {\n    this.setState({categoryModalShow: false, currentCategory: []})\n  }\n\n  changeLoadingState = (value) => {\n    this.setState({\n      loading: value\n    })\n  }\n\n  registryUrlChangeHandler = (ev) => {\n    this.setState({\n      registryUrl: ev.target.value,\n      errorMessage: \"\"\n    })\n  }\n\n  checkUrlAndGetRegistryItems = async () => {\n    let url = this.state.registryUrl\n    if (!url.match(this.HTTPS_REGEX)) {\n      url = \"https://\" + url\n    }\n    await this.setState({\n      registryUrl: url\n    })\n\n    // Checking for valid url\n    try {\n      new URL(url);\n    } catch {\n      toast.error(\"Invalid Store Url\")\n      return;\n    }\n    this.setState({\n      btnHasFocus: false,\n      errorMessage: \"\"\n    })\n    this.getAnotherRegistryProductsInfo();\n  }\n\n  registryUrlKeyUpHandler = (ev) => {\n    ev.persist();\n    ev.preventDefault();\n    if (ev.keyCode === 13) { //Enter keycode is 13\n      this.checkUrlAndGetRegistryItems()\n    }\n  }\n\n  refineProductForBabyList = (products) => {\n    // Removing products with no store\n    return products.filter(product => product.title && product.stores && product.stores.length > 0)\n      .map(product => {\n        let newProduct = {...product}\n        newProduct['price'] = newProduct.stores[0].price\n        newProduct['url'] = newProduct.stores[0].url\n        delete newProduct.stores\n        return newProduct\n      })\n\n  }\n\n  getAnotherRegistryProductsInfo = () => {\n\n    this.setState({\n      currentRegistryLink: this.state.registryUrl\n    })\n    if (this.inputRef.current) {\n      this.inputRef.current.disabled = true;\n    }\n\n    const registryUrl = new URL(this.state.registryUrl);\n    let storeName = registryUrl.hostname.split(\".\")\n\n    if (storeName.length >= 2) {\n      storeName = storeName[0] === \"www\" ? storeName[1] : storeName[0]\n    } else {\n      storeName = \"\"\n    }\n\n\n    const reqData = {\n      store_name: storeName,\n      store_url: this.state.registryUrl\n    }\n\n    this.changeLoadingState(true);\n\n    getAnotherRegistryProducts(reqData).then(res => {\n      try {\n        if (res.data) {\n          const products = res.data.products;\n\n          if (products) {\n            const registryUrl = new URL(this.state.registryUrl);\n            let storeName = registryUrl.hostname.split(\".\")\n\n            if (storeName.length >= 2) {\n              storeName = storeName[0] === \"www\" ? storeName[1] : storeName[0]\n            } else {\n              storeName = \"\"\n            }\n            storeName = this.REGISTRY_STORE_ALTERNATIVE_NAME[storeName] ? this.REGISTRY_STORE_ALTERNATIVE_NAME[storeName] : storeName\n\n            let newProducts = []\n\n            if (String(storeName).toLowerCase() === IMPORT_REGISTRY_BABYLIST_TEXT) {\n              newProducts = this.refineProductForBabyList(products)\n            } else {\n              newProducts = products.filter(product => product.title)\n            }\n            newProducts = newProducts.map(product => {\n              product.categories = [];\n              product.storeName = storeName\n              return product;\n            })\n            this.props.dispatch(setAnotherStoreRegistryItems(newProducts))\n            // this.setState({\n            //   products: newProducts\n            // })\n            this.setState({\n              errorState: \"\",\n              errorMessage: \"\"\n            })\n          } else if (products === null) {\n            this.setState({\n              errorState: \"private_registry\",\n              errorMessage: \"Looks like this registry is not publically accessible. Please change the settings and try again.\"\n            })\n            this.props.dispatch(setAnotherStoreRegistryItems([]))\n          } else if (res.data.store_name) {\n            this.setState({\n              errorState: \"invalid_store\",\n              errorMessage: res.data.store_name[0]\n            })\n            this.props.dispatch(setAnotherStoreRegistryItems([]))\n          } else {\n            toast.error(\"Some error occurred while reading registry products.\")\n            this.props.dispatch(setAnotherStoreRegistryItems([]))\n          }\n        }\n      } catch (e) {\n        console.error(e)\n        toast.error(\"Some error occurred while reading registry products.\")\n      }\n\n    }).catch(err => {\n      toast.error(\"Some error occurred while fetching registry.\")\n      console.error(err);\n    }).finally(() => {\n      this.changeLoadingState(false)\n    })\n  }\n\n  openSelectCategoryModal = (ev, productIndex) => {\n    ev.preventDefault()\n    if (this.props.stateAnotherStoreRegistry[productIndex]) {\n      this.setState({\n        activeCategoryProductIndex: productIndex,\n        categoryModalShow: true,\n        currentCategory: this.props.stateAnotherStoreRegistry[productIndex].categories\n      })\n    } else {\n      console.log(\"Invalid Product Index\");\n    }\n  }\n\n  setProductCategories = (categories) => {\n    // Saving categories passed from SelectCategory Modal\n    if (Number.isInteger(this.state.activeCategoryProductIndex) && this.props.stateAnotherStoreRegistry[this.state.activeCategoryProductIndex]) {\n      let newProductState = [...this.props.stateAnotherStoreRegistry];\n      // TODO: Change this to support multiple categories\n      newProductState[this.state.activeCategoryProductIndex].categories = categories;\n      this.props.dispatch(setAnotherStoreRegistryItems(newProductState))\n      this.setState({\n        activeCategoryProductIndex: null\n      })\n    }\n  }\n\n  removeSelectedCategory = (productIndex, categoryId) => {\n    if (this.props.stateAnotherStoreRegistry[productIndex]) {\n      let newProducts = [...this.props.stateAnotherStoreRegistry]\n      newProducts[productIndex].categories = newProducts[productIndex].categories.filter(category => category.id !== categoryId);\n      this.props.dispatch(setAnotherStoreRegistryItems(newProducts))\n      // this.setState({\n      //   products: newProducts\n      // })\n    }\n  }\n\n  openChangeConfirmModal = (e) => {\n    e.preventDefault();\n    this.setState({\n      changeUrlConfirmationModal: true\n    })\n    this.props.changeTempCloseModal(true)\n  }\n\n  closeChangeConfirmModal = () => {\n    this.setState({\n      changeUrlConfirmationModal: false\n    })\n    this.props.changeTempCloseModal(false)\n  }\n\n  changeRegistryUrl = () => {\n    this.closeChangeConfirmModal()\n    setTimeout(() => {\n      if (this.inputRef.current) {\n        this.inputRef.current.disabled = false;\n        this.inputRef.current.focus();\n      }\n    }, 50)\n  }\n\n  removeProductFromRegistry = (index) => {\n    let newRegistryProduct = [...this.props.stateAnotherStoreRegistry]\n    newRegistryProduct.splice(index, 1)\n    this.props.dispatch(setAnotherStoreRegistryItems(newRegistryProduct))\n  }\n\n  render() {\n    let notLoadingContent = null\n\n    if (this.state.errorState === \"private_registry\") {\n      notLoadingContent = (\n        <h4 className=\"mx-auto import-registry-no-content-text\">\n          Oops! This registry URL is private. Please change the setting to public and try again.\n        </h4>\n      )\n    } else if (this.state.errorState === \"invalid_store\") {\n      notLoadingContent = (\n        <>\n          <h4 className=\"mx-auto import-registry-no-content-text\">\n            Sorry! The store youre trying to import a registry from is not supported by the M+A registry. However, our\n            Stork team can help you troubleshoot this.\n          </h4>\n          <Button variant=\"primary\" className=\"text-body font-medium px-3 py-1 mt-3\">Email M+A Storks</Button>\n        </>)\n    } else {\n      notLoadingContent = <h4 className=\"mx-auto import-registry-no-content-text\">\n        Please paste your publicly accessible registry URL above to import items to M+A.\n      </h4>\n    }\n\n    return (\n      <>\n        <div className=\"baby-registry-import-registry\">\n          <div className=\"row mt-5\">\n            <div className=\"col d-flex flex-column\">\n              <span className=\"baby-registry-required-field text-sm font-medium\">Registry URL</span>\n              <div className=\"position-relative mt-1\">\n                <input type=\"text\"\n                       className={[\"import-registry-input-field w-100 mb-0 mw-100 text-body pl-2 py-1 pr-14\", this.state.errorMessage ? \"import-registry-error-field\" : \"\"].join(\" \")}\n                       placeholder=\"Paste your registry URL here to import.  Please ensure it's publicly accessible.\"\n                       value={this.state.registryUrl}\n                       ref={this.inputRef}\n                       onChange={this.registryUrlChangeHandler.bind(this)}\n                       onFocus={() => this.setState({inputHasFocus: true, btnHasFocus: true})}\n                       onBlur={() => this.setState({inputHasFocus: false})}\n                />\n                {this.state.registryUrl.length > 0 && this.state.currentRegistryLink === this.state.registryUrl && !this.state.inputHasFocus && !this.state.btnHasFocus ?\n                  <a tabindex className=\"import-registry-change-link text-sm font-medium import-registry-category-link\"\n                     href=\"#\"\n                     onClick={(e) => this.openChangeConfirmModal(e)}>Change</a> : null}\n\n                {this.state.registryUrl.length > 0 && (this.state.btnHasFocus) ?\n                  <div className=\"import-registry-submit-url-section\">\n                    {/*TODO: Change icons once added to global icons*/}\n                    <button className=\"icon-close mr-3\"\n                            onClick={() => this.setState({registryUrl: \"\", btnHasFocus: false, errorMessage: \"\"})}\n                    />\n                    <button className=\"icon-check\" onClick={this.checkUrlAndGetRegistryItems}/>\n                  </div>\n                  : null}\n              </div>\n            </div>\n          </div>\n\n          <div className=\"row baby-registry-import-section\">\n            <div className=\"col pt-6\">\n              {this.props.stateAnotherStoreRegistry.length <= 0 || this.state.loading ?\n                // When no product exists\n                <div className=\"py-20 text-center import-registry-main-content\">\n                  {this.state.loading ?\n                    <>\n                      <div className=\"spinner-border import-registry-spinner\" role=\"status\">\n                        <span className=\"sr-only\">Loading...</span>\n                      </div>\n                      <h4 className=\"mt-1 mx-auto import-registry-loading-text\">Please wait while were importing your\n                        registry</h4>\n                    </>\n                    :\n                    notLoadingContent\n                  }\n                </div>\n                :\n                // When products is filled\n                <>\n                  <p className=\"text-sm mb-2 import-registry-grey-text\">Put your gifts in respective categories</p>\n                  <div className=\"row\">\n                    <div className=\"col\">\n                      <div className=\"import-registry-main-content d-flex flex-column import-registry-products\">\n                        <div className=\"d-flex import-registry-products-column \">\n                          <div className=\"w-50 pt-2 pb-1 px-3\">\n                            <p className=\"text-sm font-medium\">Items</p>\n                          </div>\n                          <div className=\"w-50 pt-2 pb-1 px-3\">\n                            <p className=\"text-sm font-medium\">Category: Item</p>\n                          </div>\n                        </div>\n\n\n                        {this.props.stateAnotherStoreRegistry.map((product, index) => (\n                          <div className=\"d-flex import-registry-products-column\" key={\"Product-\" + index}>\n                            <div className=\"w-50 px-3\">\n                              <p className=\"py-3 text-body\">{product.title}</p>\n                            </div>\n                            <div className=\"w-50 px-3 d-flex justify-content-between\">\n                              {product.categories.length <= 0 ?\n                                <div className=\"py-3\">\n                                  <a tabindex href=\"#\" className=\"import-registry-category-link font-medium text-sm\"\n                                     onClick={(ev) => this.openSelectCategoryModal(ev, index)}>Select category</a>\n                                </div>\n                                :\n                                <div className=\"pb-2\">\n                                  {product.categories.map(category => (\n                                    <CategoryPill\n                                      key={category.id}\n                                      name={category.categoryName}\n                                      mainCategory={category.mainCategory}\n                                      removeCategory={() => this.removeSelectedCategory(index, category.id)}\n                                      className=\"mt-2 mr-3\"\n                                    />\n                                  ))}\n\n                                  <a tabindex href=\"#\"\n                                     className=\"import-registry-category-link font-medium text-sm mt-2\"\n                                     onClick={(ev) => this.openSelectCategoryModal(ev, index)}>Add</a>\n                                </div>\n                              }\n                              <div>\n                                <button\n                                  className=\"p-2 m-a-popover m-a-popover-top import-registry-item-delete-btn\"\n                                  onClick={() => this.removeProductFromRegistry(index)}\n                                >\n                                  <i className=\"icon-delete\"/>\n                                  <div className=\"m-a-popover-content import-registry-delete-popover p-2 text-sm\">\n                                    Delete\n                                  </div>\n                                </button>\n                              </div>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                  </div>\n                </>\n              }\n            </div>\n          </div>\n        </div>\n        <SelectCategory\n          showModal={this.state.categoryModalShow}\n          closeModal={this.setCategoryModalVisible}\n          changeCurrentCategory={this.setProductCategories}\n          currentCategory={this.state.currentCategory}\n        />\n        <Modal\n          show={this.state.changeUrlConfirmationModal}\n          size=\"md\"\n          closeIconClass=\"mb-auto\"\n          footer={(\n            <>\n              <Button variant=\"secondary\" className=\"px-6 py-1\" onClick={this.closeChangeConfirmModal}>No,\n                cancel</Button>\n              <Button variant=\"primary\" className=\"px-6 py-1\" onClick={this.changeRegistryUrl}>Yes, change</Button>\n            </>\n          )}\n          closeModal={this.closeChangeConfirmModal}>\n          You may lose the items on this screen. Are you sure you want to change?\n        </Modal>\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    stateAnotherStoreRegistry: state.myRegistry.anotherStoreRegistry\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(ImportRegistry);","import React from 'react';\nimport \"./AddGift.scss\";\nimport {connect} from 'react-redux';\nimport Button from '../button-component/ButtonComponent';\nimport Modal from \"../modal-component/ModalComponent\";\nimport BookmarkletSection from \"./bookmarklet-section/BookmarkletSection\";\nimport ImportGiftCard from \"./import-gift-card/ImportGiftCard\";\nimport AddGiftAnotherStore from \"./add-gift-another-store/AddGiftAnotherStore\";\nimport ImportRegistry from \"./import-registry/ImportRegistry\";\nimport {clearAnotherStoreProductInfo, setAnotherStoreRegistryItems} from \"modules/my-registry/MyRegistryActions\";\nimport {ADD_REGISTRY_ITEM, SAVE_REGISTRY_DATA} from \"../../../../api/mutations\";\nimport {graphQLMultipart as graphQL, graphQL as jsonGraphQL} from \"../../../../api/axios\";\nimport {getProducts, getCategories, getTodoList} from \"utils/commonFunction\";\nimport {toast} from \"react-toastify\";\nimport {ADD_GIFT_LINKS, IMPORT_REGISTRY_EMAIL} from \"../../../../utils/constants\";\nimport {dataURItoBlob} from \"../../../../utils/commonFunction\";\nimport AddCashFundModal from \"../../../commons/components/cash-fund-card/add-cash-fund-modal/AddCashFundModal\";\nimport {ROUTES} from \"utils/cdn-assets-links\";\n\nclass AddGift extends React.Component {\n\n  PRICE_REGEX = /(^[0-9]+(.?[0-9]{1,2})?$)/g\n\n  // Variable declarations\n  state = {\n    show: false,\n    closeTempModal: false,\n    updateModal: false,\n    showCashFundModal: false,\n    cashFundProduct: null,\n    currentContent: \"\",\n  }\n\n  addAnotherGiftApiCalled = false\n  addImportRegistryApiCalled = false\n\n  modalTitle = \"\"\n  modalBody = \"\"\n  modalTitleContent = \"\"\n  modalFooterButtons = \"\"\n\n  //TODO: List to be populated from the API\n  categoryList = [\n    {\n      name: \"Nursery\",\n      description: \"A curated collection of our favorite nursery must-haves.\",\n      imageUrl: ROUTES.Rectangle_1685_2x_2,\n      link: ADD_GIFT_LINKS.NURSERY\n    },\n    {\n      name: \"Activity Equipment + Toys\",\n      description: \"The best playthings to help babies learn, grow and have fun.\",\n      imageUrl: ROUTES.image_2_2x,\n      link: ADD_GIFT_LINKS.ACTIVITY_EXPERIMENT_TOY\n    },\n    {\n      name: \"Gear + Travel\",\n      description: \"Everything your baby needs when you're on the go.\",\n      imageUrl: ROUTES.Rectangle_1685_2x,\n      link: ADD_GIFT_LINKS.GEAR_TRAVEL\n    },\n    {\n      name: \"Feeding\",\n      description: \"Meal time essentials from bottles to baby food makers.\",\n      imageUrl: ROUTES.image_1_2x,\n      link: ADD_GIFT_LINKS.FEEDING\n    }\n  ]\n\n  // Helper function\n\n  clearModalData = () => {\n    this.modalTitle = \"\"\n    this.modalBody = \"\"\n    this.modalTitleContent = \"\"\n    this.modalFooterButtons = \"\"\n\n    this.props.dispatch(clearAnotherStoreProductInfo());\n    this.props.dispatch(setAnotherStoreRegistryItems([]));\n  }\n\n\n  checkDataValidity = (storeProduct) => {\n\n    // Valid store URL\n    try {\n      new URL(storeProduct.productUrl);\n    } catch {\n      toast.error(\"Invalid Store Url\")\n      return false;\n    }\n\n    // Valid Product Name\n    if (storeProduct.productName.length <= 0) {\n      toast.error(\"Invalid Product Name\");\n      return false;\n    }\n\n    // Valid Price\n    if (storeProduct.price.length <= 0) {\n      toast.error(\"Invalid Price\");\n      return false;\n    } else if (!String(storeProduct.price).match(this.PRICE_REGEX)) {\n      toast.error(\"Please enter valid amount\")\n      return false\n    }\n\n    // Valid Quantity\n    if (storeProduct.quantity < 1) {\n      toast.error(\"Invalid Quantity\");\n      return false;\n    }\n\n    // TODO: if necessary Valid Category\n    // if (!storeProduct.category.id) {\n    //   toast.error(\"Invalid Category\");\n    //   return false;\n    // }\n\n    return true;\n  }\n\n  changeTempCloseModal = (value) => {\n    this.setState({\n      closeTempModal: value\n    })\n  }\n\n  addItemToRegistry = () => {\n    const storeProduct = this.props.stateAnotherStoreProduct;\n    const isValidData = this.checkDataValidity(storeProduct);\n    if (!isValidData) {\n      return;\n    }\n\n    let storeUrl = new URL(storeProduct.productUrl);\n    storeUrl = storeUrl.hostname.split(\".\")\n    const storeName = storeUrl[storeUrl.length - 2]\n\n    let formData = new FormData()\n    let data = {\n      query: ADD_REGISTRY_ITEM,\n      operationName: \"addRegistryItems\",\n      variables: {\n        \"registryId\": this.props.stateRegistryInfo.id,\n        \"input\": [{\n          \"storeName\": storeName,\n          \"items\": [{\n            \"title\": storeProduct.productName,\n            \"registryCategories\": storeProduct.category.length > 0 ? storeProduct.category.map(category => Number(category.id)) : null,\n            \"tags\": [],\n            \"storeItemUrl\": storeProduct.productUrl,\n            \"price\": storeProduct.price,\n            \"quantity\": storeProduct.quantity,\n            \"isCashAcceptedOnly\": storeProduct.howToGift.id === 1 ? true : false,\n            \"mostWanted\": storeProduct.mustHave,\n            \"isGroupGift\": storeProduct.groupGift,\n            \"note\": storeProduct.note\n          }]\n        }]\n      }\n    }\n\n    if (storeProduct.productImage.type === \"custom\") {\n      let map = {\n        images: [\"variables.input.0.items.0.images\"]\n      }\n      data.variables.input[0].items[0]['images'] = null;\n      data.variables.input[0].items[0]['imageUrl'] = null;\n      formData.append(\"map\", JSON.stringify(map))\n      formData.append(\"images\", dataURItoBlob(storeProduct.productImage.value, storeProduct.productImage.fileType, storeProduct.productImage.fileName))\n    } else {\n      data.variables.input[0].items[0]['imageUrl'] = this.props.stateAnotherStoreProduct.productImage.value;\n    }\n\n    formData.append(\"operations\", JSON.stringify(data))\n    if (!this.addAnotherGiftApiCalled) {\n      this.addAnotherGiftApiCalled = true\n      graphQL(formData).then(res => {\n        if (res.status === 200) {\n          // Successfully added product\n          getProducts(this.props.stateRegistryInfo.id, this.props.dispatch);\n          getCategories(this.props.stateRegistryInfo.id, this.props.dispatch);\n\n          toast.success((\n            <p><b>{storeProduct.productName}</b> added to your registry!</p>\n          ))\n          getTodoList(this.props.stateRegistryInfo.id, this.props.dispatch)\n          this.clearModalData();\n          this.modalCloseHandler();\n        }\n        this.addAnotherGiftApiCalled = false\n      }).catch(err => {\n        this.addAnotherGiftApiCalled = false\n        toast.error(\"Some error occurred.\");\n        console.error(err.message)\n      })\n    }\n  }\n\n  // Event Handlers\n\n  modalCloseHandler = () => {\n    if (this.state.currentContent) {\n      this.openAddGiftModal()\n    } else {\n      this.clearModalData()\n      this.setState({\n        show: false,\n        currentContent: \"\"\n      })\n    }\n  }\n\n  openCashFundModal = () => {\n    this.modalCloseHandler();\n    this.setState({\n      showCashFundModal: true\n    })\n  }\n\n  closeCashFundModal = () => {\n    this.setState({\n      showCashFundModal: false\n    })\n  }\n\n  openAddGiftModal = () => {\n    this.clearModalData()\n    this.modalTitle = \"Add item\"\n    this.setState((prevState, props) => ({\n      show: true,\n      currentContent: \"\",\n      updateModal: !prevState.updateModal\n    }))\n\n    this.modalBody = (\n      <div className=\"row\">\n        <div className=\"col\">\n          <h4 className=\"font-weight-bold\">M+A Store</h4>\n          <div className=\"card-deck mt-2\">\n            <a href={ADD_GIFT_LINKS.NEW_ARRIVALS} target=\"_blank\" className=\"card m-a-cards\"><p\n              className=\"m-auto text-body font-medium\">New Arrivals</p></a>\n            <a href={ADD_GIFT_LINKS.POPULAR_GIFTS} target=\"_blank\" className=\"card m-a-cards\"><p\n              className=\"m-auto text-body font-medium\">Most Popular Gifts</p></a>\n            <div className=\"card m-a-cards\" onClick={this.openCashFundModal}>\n              <p className=\"m-auto text-body font-medium\">Cash Funds</p>\n            </div>\n          </div>\n          <div className=\"card-deck mt-4\">\n            {this.categoryList.map(category =>\n              <a href={category.link} target=\"_blank\" className=\"card m-a-category-card\"\n                 key={\"category-\" + category.name}>\n                <img src={category.imageUrl} alt={category.name}/>\n                <div className=\"px-2 my-3\">\n                  <p className=\"text-sm font-medium\">{category.name}</p>\n                  <p className=\"text-sm mt-1\">{category.description}</p>\n                </div>\n              </a>\n            )}\n          </div>\n          <h4 className=\"font-weight-bold mt-5\">Another Store</h4>\n          <div className=\"row mt-2\">\n            <div className=\"col\">\n              <BookmarkletSection/>\n            </div>\n          </div>\n          <div className=\"row\">\n            <div className=\"col-sm-12 col-md-6 mt-5\">\n              <ImportGiftCard\n                iconClass=\"icon-shopping-cart\"\n                title=\"Add item from another store\"\n                text=\"You can add links from other online store and save in your registry.\"\n                onClick={this.importGiftAnotherStoreHandler}\n              />\n            </div>\n            <div className=\"col-sm-12 col-md-6 mt-5\">\n              <ImportGiftCard\n                iconClass=\"icon-import\"\n                title=\"Import\"\n                text=\"You can import a gift or an entire registry from another store\"\n                onClick={this.importRegistry}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  anotherStoreItemViewDetail = (storeProduct) => {\n    if (storeProduct.productUrl) {\n      window.open(storeProduct.productUrl, '_blank');\n    }\n  }\n\n  validImportRegistryData = (registryItems) => {\n    if (registryItems.length <= 0) {\n      toast.error(\"No Item found\");\n      return false;\n    }\n    // TODO: if necessary Valid Category\n    // for (const item of registryItems) {\n    //   if (item.categories.length <= 0) {\n    //     toast.error(\"Please select category for all product\");\n    //     return false;\n    //   }\n    // }\n    return true;\n  }\n\n  getRefinedPrice = (price) => {\n    let newPrice = \"\";\n    for (let char of price) {\n      if (char !== \".\") {\n        if (Number.isInteger(Number(char))) {\n          newPrice += char\n        }\n      } else {\n        newPrice += char\n      }\n    }\n\n    return newPrice;\n  }\n\n  getCleanedRegistryItems = (registryItems) => {\n    let cleanedRegistryItems = []\n    let storeName = null\n    let items = registryItems.map(item => {\n      let newItem = {}\n\n      if (item.storeName && !storeName) {\n        storeName = item.storeName\n      }\n\n      if (item.title) {\n        newItem['title'] = item.title\n      }\n      if (item.url) {\n        newItem['storeItemUrl'] = item.url\n      }\n      if (item.img) {\n        newItem['imageUrl'] = item.img\n      }\n\n      if (item.price) {\n        let price = this.getRefinedPrice(item.price)\n        newItem['price'] = price ? price : 0\n      }\n\n      newItem['registryCategories'] = item.categories.map(category => Number(category.id))\n      newItem['quantity'] = 1\n      newItem['tags'] = []\n      newItem['isCashAcceptedOnly'] = true\n\n      return newItem\n    })\n\n    cleanedRegistryItems.push({\n      storeName: storeName,\n      items: items\n    })\n    return cleanedRegistryItems;\n  }\n\n  importRegistryClickHandler = () => {\n    if (!this.validImportRegistryData(this.props.stateAnotherStoreRegistry)) {\n      return;\n    }\n\n    const registryItems = this.getCleanedRegistryItems(this.props.stateAnotherStoreRegistry)\n    if (registryItems.length > 0) {\n      const reqData = {\n        query: ADD_REGISTRY_ITEM,\n        operationName: \"addRegistryItems\",\n        variables: {\n          \"registryId\": this.props.stateRegistryInfo.id,\n          \"input\": registryItems\n        }\n      }\n      if (!this.addImportRegistryApiCalled) {\n        this.addImportRegistryApiCalled = true\n        jsonGraphQL(reqData).then(res => {\n          if (res.data.data.addRegistryItems) {\n            getProducts(this.props.stateRegistryInfo.id, this.props.dispatch);\n            getCategories(this.props.stateRegistryInfo.id, this.props.dispatch);\n            toast.success(\"Registry items imported successfully\");\n            getTodoList(this.props.stateRegistryInfo.id, this.props.dispatch)\n            this.clearModalData();\n            this.modalCloseHandler();\n          }\n          this.addImportRegistryApiCalled = false\n        }).catch(err => {\n          this.addImportRegistryApiCalled = false\n          toast.error(\"Error occurred while adding items to registry\")\n          console.error(err);\n        })\n      }\n    }\n  }\n\n  importGiftAnotherStoreHandler = () => {\n    this.clearModalData()\n    this.modalTitle = \"Add item from another store\"\n    this.modalTitleContent = (\n      <div className=\"row mt-2 mb-4\">\n        <div className=\"col\">\n          <BookmarkletSection/>\n        </div>\n      </div>\n    )\n    this.modalBody = <AddGiftAnotherStore changeTempCloseModal={this.changeTempCloseModal}/>\n\n    this.setState((prevState, props) => ({\n      updateModal: !prevState.updateModal,\n      currentContent: \"anotherStoreProduct\"\n    }))\n  }\n\n  importRegistry = () => {\n    this.clearModalData()\n    this.modalTitle = \"Import Registry\"\n    this.modalBody = <ImportRegistry changeTempCloseModal={this.changeTempCloseModal}/>\n\n    this.setState((prevState, _) => ({\n      updateModal: !prevState.updateModal,\n      currentContent: \"importRegistry\"\n    }))\n  }\n\n  render() {\n\n    if (this.props.stateAnotherStoreProduct && this.state.currentContent === \"anotherStoreProduct\") {\n      this.modalFooterButtons = (\n        <>\n          <Button\n            variant=\"secondary\"\n            className=\"px-3 py-1 font-weight-bold font-medium text-body\"\n            disabled={!this.props.stateAnotherStoreProduct.productName}\n            onClick={() => this.anotherStoreItemViewDetail(this.props.stateAnotherStoreProduct)}\n          >View Details</Button>\n          <Button\n            variant=\"primary\"\n            className=\"px-4 py-1 font-weight-bold font-medium text-body\"\n            disabled={!this.props.stateAnotherStoreProduct.productName}\n            onClick={this.addItemToRegistry}\n          >Save & Close</Button>\n        </>\n      )\n    }\n\n    if (this.props.stateAnotherStoreRegistry && this.state.currentContent === \"importRegistry\") {\n      this.modalFooterButtons = (\n        <>\n          {/*TODO: change href of email us link*/}\n          <a href={\"mailto:\" + IMPORT_REGISTRY_EMAIL} tabindex=\"0\" target='_blank'\n             className=\"mr-auto import-registry-email-link text-sm font-medium\">Email Us For Help</a>\n          {/*TODO: Integrate API when multiple category is supported*/}\n          <Button\n            variant=\"primary\"\n            className=\"px-4 py-1 font-weight-bold font-medium text-body\"\n            disabled={this.props.stateAnotherStoreRegistry.length <= 0}\n            onClick={this.importRegistryClickHandler}\n          >Import</Button>\n        </>\n      )\n    }\n\n    return (\n      <>\n        <Button\n          variant=\"primary\"\n          className=\"px-3 py-1 font-weight-bold font-medium m-a-popover m-a-popover-top-right\"\n          onClick={this.openAddGiftModal}\n        >\n          <span className=\"text-body\">{this.props.title ? this.props.title : 'Add item'}</span>\n          <div className=\"m-a-popover-content px-3 py-2\">\n            <span className=\"font-medium text-sm\">You can add item</span>\n            <p className=\"text-sm font-weight-normal m-a-popover-content-desc\">You can add item from our store and save\n              in your registry.</p>\n          </div>\n        </Button>\n\n        <Modal\n          show={this.state.show}\n          modalClassName={this.state.closeTempModal ? \"d-none\" : \"d-block\"}\n          updateModal={this.state.updateModal}\n          title={this.modalTitle}\n          titleContent={this.modalTitleContent}\n          footer={this.modalFooterButtons}\n          closeModal={this.modalCloseHandler}>\n          {this.modalBody}\n        </Modal>\n\n        {this.state.showCashFundModal ?\n          <AddCashFundModal\n            show={this.state.showCashFundModal}\n            closeModal={this.closeCashFundModal}\n            categoryData={this.state.cashFundProduct}\n          />\n          : null}\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    stateAnotherStoreProduct: state.myRegistry.anotherStoreProduct,\n    stateAnotherStoreRegistry: state.myRegistry.anotherStoreRegistry,\n    stateRegistryInfo: state.registry.info\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(AddGift);","import React from 'react';\nimport './FilterSection.scss';\nimport Filter from '../filter/Filter';\nimport { connect } from 'react-redux';\nimport FilterItemChip from '../filter/filter-item-chip/FilterItemChip';\nimport { clearFilter, setChildFilter } from \"../../MyRegistryActions\"\nimport AddGift from \"../../../commons/components/add-gift/AddGift\";\n\nclass FilterSection extends React.Component {\n\n  // Filter chips close handler\n  deleteChipHandler = (isParent, childId) => {\n    if (isParent) {\n      this.props.dispatch(clearFilter())\n    } else {\n      const newChildArray = this.props.stateFilterApplied.childFilter.filter(element => {\n        return element !== childId\n      })\n      this.props.dispatch(setChildFilter(newChildArray))\n    }\n  }\n\n  //Clear filter state\n  clearFilterHandler = (ev) => {\n    ev.preventDefault()\n    this.props.dispatch(clearFilter())\n  }\n\n  render() {\n    // Get all the filter chips from the state based on id\n    let filterChips = {}\n    if (this.props.stateFilterApplied) {\n      let allChild = []\n      if (this.props.stateFilterApplied.parentFilter) {\n        filterChips.parentFilter = this.props.stateFilterCategory.find(element => {\n          return element.id === this.props.stateFilterApplied.parentFilter\n        })\n        allChild = filterChips.parentFilter.child\n      }\n      if (this.props.stateFilterApplied.childFilter) {\n        filterChips.childFilter = this.props.stateFilterApplied.childFilter.map(item => {\n          return allChild.find(element => {\n            return element.id === item\n          })\n        })\n      }\n    }\n\n    return (\n      <div className=\"row mb-5 align-items-center align-items-md-start\">\n        <div className=\"col\">\n          <h4 className=\"font-weight-bold mr-2 filter-section-total-items\">{this.props.productCount} {this.props.productCount === 1 ? \"item\" : \"items\"}</h4>\n          <div className=\"filtered-items\">\n            {filterChips.parentFilter ?\n              <FilterItemChip text={filterChips.parentFilter.display} className=\"mr-2\"\n                deleteHandler={() => this.deleteChipHandler(true, null)} />\n              : null}\n            {filterChips.childFilter ?\n              filterChips.childFilter.map(item =>\n                <FilterItemChip\n                  text={item.display}\n                  className=\"mr-2\"\n                  key={filterChips.parentFilter.id + \"-\" + item.id}\n                  deleteHandler={() => this.deleteChipHandler(false, item.id)} />)\n              : null}\n            {filterChips.parentFilter ?\n              <a className=\"font-medium text-sm filter-clear-link\" href=\"#\" tabindex=\"0\"\n                onClick={(ev) => this.clearFilterHandler(ev)}>Clear\n                all</a>\n              : null}\n          </div>\n        </div>\n        <div className=\"col-8 col-md-6 d-flex justify-content-end text-align-right\">\n          <div className=\" mr-3\">\n            <Filter />\n          </div>\n          <div className=\"position-relative\" data-tut=\"build-step-three\">\n            <AddGift />\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\n\nconst mapStateToProps = state => {\n  return {\n    stateFilterApplied: state.myRegistry.filterApplied,\n    stateFilteredProducts: state.myRegistry.filteredProducts,\n    stateFilterCategory: state.myRegistry.filterCategory\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(FilterSection);\n","import React from \"react\";\nimport \"./CashFundCardNotAdded.scss\";\n\nclass CashFundCardNotAdded extends React.Component {\n  render() {\n    return (\n      <div\n        className={[\"baby-registry-cash-fund-card py-3 mb-2 px-2 px-md-0\", this.props.className ? this.props.className : \"\"].join(\" \")}>\n        <div className=\"row\">\n          <div className=\"col-5 col-sm-4 col-md-2\">\n\n            <div className=\"pl-0 pl-md-3\">\n              {this.props.data.imageUrl ?\n                <img className=\"cash-fund-image d-block mx-auto\" src={this.props.data.imageUrl}/>\n                :\n                <div className=\"baby-registry-cash-fund-no-image\" />\n              }\n            </div>\n\n          </div>\n          <div className=\"col-12 col-sm\">\n            <div className=\"float-left my-2 my-md-0\">\n              <p className=\"text-body font-medium\">{this.props.data.registryCategories[0].category.categoryName}</p>\n              <p\n                className=\"text-sm cash-fund-description\">{this.props.data.registryCategories[0].category.description}</p>\n            </div>\n            <button className=\"cash-fund-add-btn float-md-right float-left mr-6 my-2 my-md-0 \" onClick={this.props.addButtonClickHandler}/>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default CashFundCardNotAdded;","import React from \"react\";\nimport CashFundCardNotAdded from \"./cash-fund-card-not-added/CashFundCardNotAdded\";\n\nclass CashFundCard extends React.Component {\n  render() {\n    return <CashFundCardNotAdded data={this.props.data} addButtonClickHandler={this.props.addButtonClickHandler}/>\n  }\n}\n\nexport default CashFundCard;","import React, {Component} from 'react'\nimport {connect} from \"react-redux\";\nimport AddedCard from \"modules/commons/components/added-card/AddedCard\";\nimport {\n  toggleMustHaveProduct,\n  addRecommendedProduct,\n  setFilterCategory,\n} from \"../../MyRegistryActions\";\nimport CheckList from \"modules/my-registry/components/checkList/CheckList\";\nimport CheckListItems from \"modules/my-registry/components/checkList/CheckListItems\";\nimport ViewRecommend from 'modules/commons/components/view-recommend/ViewRecommend';\nimport FilterSection from '../../components/filter-section/FilterSection';\nimport {graphQL, getRecommendation} from 'api/axios';\nimport {GET_RECOMMENDATIONS} from 'api/queries';\nimport {TOGGLE_MUST_HAVE, TOUR_UPDATE_FLAG} from 'api/mutations';\nimport {\n  getProducts,\n  removeProductFromCartHandler,\n  getCategories,\n  updateMushHaveTourFlag,\n  UpdateBuildTourFlag\n} from \"utils/commonFunction\";\nimport {Cookies} from \"react-cookie\";\nimport config from \"api/config\";\nimport axios from \"axios\";\nimport CashFundCard from \"../../../commons/components/cash-fund-card/CashFundCard\";\nimport Button from \"../../../commons/components/button-component/ButtonComponent\";\nimport AddCashFundModal from \"../../../commons/components/cash-fund-card/add-cash-fund-modal/AddCashFundModal\";\nimport \"./Everything.scss\";\nimport Tour from 'reactour';\nimport TourCard from 'modules/commons/components/tour-card/TourCard';\nimport {BUILD_REGISTRY_STEPS, MUST_HAVE_STEPS} from 'utils/constants';\nimport {setLoader} from \"modules/registry/RegistryActions\";\nimport {fetchDefaultCashFundImage} from \"../../../../utils/commonFunction\";\nimport { toast } from 'react-toastify';\n\nclass Everything extends Component {\n\n  state = {\n    showCashFundModal: false,\n    cashFundProduct: null,\n    isTourOpen: false,\n    isMustHaveTour: false,\n    steps: [],\n    recommendedCashFundImage: []\n  }\n  checkListRef = React.createRef();\n  recommendationAPICalled = false\n  isRecommendationLoaderActive = false\n  updateRecommendedCashFundImage = false\n  toastDisplayed = false\n  checkListHeightFromTop = null\n\n  componentDidMount () {\n    this.checkListHeightFromTop = null\n    window.addEventListener('scroll', this.handleScroll);\n  }\n\n  openCashFundModal = () => {\n    this.setState({\n      showCashFundModal: true\n    })\n  }\n\n  setCashFundCategoryAndOpenModal = (product) => {\n    this.setState({\n      cashFundProduct: {...product}\n    })\n    this.openCashFundModal()\n  }\n\n  closeCashFundModal = () => {\n    this.setState({\n      showCashFundModal: false,\n      cashFundProduct: null\n    })\n  }\n\n  // Updating product count in filter categories\n  updateFilterList = (addedProducts) => {\n    const newFilterList = [\n      {\n        id: \"giftsAdded\",\n        display: \"Items added\",\n        count: addedProducts.length,\n        child: [\n          {\n            id: \"mustHave\",\n            display: \"Must have\",\n            count: addedProducts.filter(product => product.mostWanted).length\n          },\n          {\n            id: \"purchased\",\n            display: \"Purchased\",\n            count: addedProducts.filter(product => product.quantityStatus && product.quantityStatus.purchased_quantity > 0).length\n          },\n          {\n            id: \"reserved\",\n            display: \"Reserved\",\n            count: addedProducts.filter(product => product.quantityStatus && product.quantityStatus.reserved_quantity > 0).length\n          },\n          {\n            id: \"available\",\n            display: \"Available\",\n            count: addedProducts.filter(product => !product.isPurchased && !product.isReserved).length\n          }\n        ]\n      },\n      {\n        id: \"giftsToAdd\",\n        display: \"Items to add\",\n        count: 0\n      }\n    ]\n\n    this.props.dispatch(setFilterCategory(newFilterList))\n  }\n\n  toggleMustHaveProduct = (e, product) => {\n    e.stopPropagation()\n    if (!this.props.stateRegistryInfo.isMustHaveApplied) {\n      let steps = {...MUST_HAVE_STEPS}\n      steps[0].selector = '[data-tut=\"must-have-' + product.id + '\"]';\n      steps.length = 1;\n      this.setState({\n        isMustHaveTour: true,\n        steps: steps,\n        isTourOpen: true\n      })\n    }\n\n    let data = {\n      query: TOGGLE_MUST_HAVE,\n      variables: {\n        productId: product.id,\n        mustHaveValue: !product.mostWanted,\n        quantity: product.quantity\n      }\n    }\n    graphQL(data).then(res => {\n      if (res.status === 200) {\n        this.props.dispatch(toggleMustHaveProduct(product.item.id))\n      }\n    }).catch(err => {\n      console.error(err.message)\n    })\n  }\n\n\n  setAllRecommendation = async (categories) => {\n    let recommendedCategory = []\n    for (let parentCat of categories) {\n      for (let category of parentCat.subCategories) {\n        if (category.subProductTypes.length) {\n          for (let subProduct of category.subProductTypes) {\n            recommendedCategory.push({\n              ...subProduct,\n              isSubProduct: true,\n              parentCategory: category.categoryName,\n            })\n          }\n        } else {\n          recommendedCategory.push({\n            ...category,\n            parentCategory: parentCat.categoryName,\n          })\n        }\n      }\n    }\n    this.props.dispatch(setLoader(true))\n    this.isRecommendationLoaderActive = true\n    let data = {\n      query: GET_RECOMMENDATIONS,\n      variables: {\n        registryId: Number(this.props.stateRegistryInfo.id),\n      }\n    }\n    const apiURL = process.env.NODE_ENV === 'production' ? config.PRODUCTION_API_URL : config.LOCAL_API_URL;\n    const cookies = new Cookies();\n\n    await axios.get(apiURL + 'graphql', {\n      params: data,\n      headers: {\"Authorization\": cookies.get(\"access_token\") ? \"Token \" + cookies.get(\"access_token\") : \"\"}\n    })\n      .then(res => {\n        let rData = []\n        for (let item of [...res.data.data.itemRecommendations]) {\n          let recommendationCat = [...recommendedCategory].find(cat => cat.category.id === item.category.id)\n          if (recommendationCat) {\n            let resData = {...item}\n            resData['quantity'] = 1\n            resData['category'] = recommendationCat\n            if (item.maItemVariantItemRecommendation.length) {\n              resData['activeVariant'] = item.maItemVariantItemRecommendation[0]\n            } else {\n              resData['activeVariant'] = null\n            }\n            rData.push(resData)\n          }\n        }\n        if (rData.length !== 0) {\n          this.props.dispatch(addRecommendedProduct(rData))\n        }\n        this.props.dispatch(setLoader(false))\n        this.isRecommendationLoaderActive = false\n      }).catch(err => {\n        this.recommendationAPICalled = false\n        this.props.dispatch(setLoader(false))\n        this.isRecommendationLoaderActive = false\n        console.error(err.message)\n      })\n  }\n\n  cashFundImageApiCalled = []\n\n  getSortedProducts = (addedProducts, stateCategories, stateRecommendedProducts, stateFilterApplied) => {\n    const cashFundCategory = stateCategories.find(category => category.categoryType && Number(category.categoryType.id) === 2)\n    // for future ref : let cashFundCount = 0\n    let productsToAppend = []\n    if (cashFundCategory) {\n      for (let subCategory of cashFundCategory.subCategories) {\n        let currentCashFundImage = this.state.recommendedCashFundImage.find(el => el.categoryId === subCategory.id)\n\n        // Preventing multiple api calls\n        let imageApiCalled = this.cashFundImageApiCalled.find(el => el === subCategory.id)\n\n        if (!currentCashFundImage && !imageApiCalled) {\n          this.cashFundImageApiCalled.push(subCategory.id)\n          fetchDefaultCashFundImage(subCategory.category.id).then(async res => {\n            if (res.status === \"success\") {\n              this.updateRecommendedCashFundImage = true\n\n              await this.setState({\n                recommendedCashFundImage: this.state.recommendedCashFundImage.find(el => el.categoryId === subCategory.id) ? this.state.recommendedCashFundImage : [...this.state.recommendedCashFundImage, {\n                  categoryId: subCategory.id,\n                  imageUrl: res.data\n                }],\n              })\n              this.cashFundImageApiCalled = this.cashFundImageApiCalled.filter(el => el !== subCategory.id)\n            }\n          })\n        }\n        if (Number(subCategory.addedItemsCount) === 0) {\n          //for future ref :  cashFundCount++;\n          productsToAppend.push({\n            imageUrl: currentCashFundImage && currentCashFundImage.imageUrl ? currentCashFundImage.imageUrl : \"\",\n            registryCategories: [{\n              id: subCategory.id,\n              category: {\n                ...subCategory\n              }\n            }]\n          })\n        }\n      }\n      if (!stateFilterApplied.parentFilter) {\n        addedProducts = [...addedProducts, ...productsToAppend]\n      }\n    }\n\n    let allProducts = []\n    let productCount = 0;\n    let productIds = [];\n    let categories = []\n    for (let parentCat of stateCategories) {\n      if (!parentCat.isParent) {\n        categories.push({\n          id: parentCat.id,\n          name: parentCat.categoryName,\n          categoryName: parentCat.categoryName,\n          added: parentCat.addedItemsCount,\n          addedItemsCount: parentCat.addedItemsCount,\n          total: parentCat.totalItemsCount,\n          totalItemsCount: parentCat.totalItemsCount,\n          isSubProductTypes: false,\n          parentCategory: {\n            id: parentCat.id,\n            name: parentCat.categoryName,\n            categoryName: parentCat.categoryName,\n          },\n          superParentCat: null,\n          categoryType: parentCat.categoryType,\n        })\n      } else {\n        for (let category of parentCat.subCategories) {\n          if (category.subProductTypes.length) {\n            for (let subProduct of category.subProductTypes) {\n              categories.push({\n                id: subProduct.id,\n                name: subProduct.categoryName,\n                categoryName: subProduct.categoryName,\n                added: subProduct.addedItemsCount,\n                addedItemsCount: subProduct.addedItemsCount,\n                total: subProduct.totalItemsCount,\n                totalItemsCount: subProduct.totalItemsCount,\n                isSubProductTypes: true,\n                isSubProduct: true,\n                parentCategory: {\n                  id: category.id,\n                  name: category.categoryName,\n                  categoryName: category.categoryName\n                },\n                superParentCat: {\n                  id: parentCat.id,\n                  name: parentCat.categoryName,\n                  categoryName: parentCat.categoryName\n                },\n                categoryType: category.categoryType,\n              })\n            }\n          } else {\n            categories.push({\n              id: category.id,\n              name: category.categoryName,\n              categoryName: category.categoryName,\n              added: category.addedItemsCount,\n              addedItemsCount: category.addedItemsCount,\n              total: category.totalItemsCount,\n              totalItemsCount: category.totalItemsCount,\n              isSubProductTypes: false,\n              parentCategory: {\n                id: parentCat.id,\n                name: parentCat.categoryName,\n                categoryName: parentCat.categoryName,\n              },\n              superParentCat: null,\n              categoryType: category.categoryType,\n            })\n          }\n        }\n      }\n    }\n\n\n    for (let category of categories) {\n      let products = []\n      let recommendations = []\n\n      // Getting filtered Products and recommendations\n      if (stateFilterApplied.parentFilter) {\n        if (stateFilterApplied.parentFilter === \"giftsAdded\") {\n          if (stateFilterApplied.childFilter.length > 0) {\n            const childFilterArray = stateFilterApplied.childFilter\n\n            for (let product of addedProducts) {\n              let categoryFound = false\n              for (let cat of product.registryCategories) {\n                if (cat.id === category.id) {\n                  categoryFound = true\n                  break\n                }\n              }\n              if (\n                ((childFilterArray.includes(\"mustHave\") && product.mostWanted) ||\n                  (childFilterArray.includes(\"purchased\") && product.quantityStatus && product.quantityStatus.purchased_quantity > 0) ||\n                  (childFilterArray.includes(\"reserved\") && product.quantityStatus && product.quantityStatus.reserved_quantity > 0) ||\n                  (childFilterArray.includes(\"available\") && !product.isPurchased && !product.isReserved)) && categoryFound\n              ) {\n                products.push(product)\n                // filteredProductsId.push(product.id)\n              }\n            }\n          } else {\n            // TODO: change category\n            products.push(...addedProducts.filter(el => {\n              let categoryFound = false\n              for (let cat of el.registryCategories) {\n                if (cat.id === category.id) {\n                  categoryFound = true\n                  break\n                }\n              }\n              return categoryFound;\n            }))\n          }\n        } else if (stateFilterApplied.parentFilter === \"giftsToAdd\") {\n          let addedRecommendations = []\n          recommendations = stateRecommendedProducts.filter(el => {\n            if (el.category.id === category.id && !addedRecommendations.includes(el.id)) {\n              addedRecommendations.push(el.id)\n              return true;\n            }\n            return false;\n          }).map(el => {\n            let recommendationProduct = {...el};\n            recommendationProduct.category = category;\n            return recommendationProduct;\n          })\n        }\n      } else {\n        // TODO: Change this condition(el.item.category.length)\n        // TODO: change category\n        products.push(...addedProducts.filter(el => {\n          let categoryFound = false\n          for (let cat of el.registryCategories) {\n            if (cat.id === category.id) {\n              categoryFound = true\n              break\n            }\n          }\n          return categoryFound && el.registryCategories.length\n        }))\n        let addedRecommendations = []\n        recommendations = stateRecommendedProducts.filter(el => {\n          if (el.category.id === category.id && !addedRecommendations.includes(el.id)) {\n            addedRecommendations.push(el.id)\n            return true;\n          }\n          return false;\n        }).map(el => {\n          let recommendationProduct = {...el};\n          recommendationProduct.category = category;\n          return recommendationProduct;\n        })\n      }\n\n      if (products.length > 0) {\n        for (let item of products) {\n          if (!productIds.includes(item.id) && item.id !== undefined) {\n            productIds.push(item.id)\n          }\n        }\n      }\n\n      if (stateFilterApplied.parentFilter) {\n        if (stateFilterApplied.parentFilter === \"giftsToAdd\" && Number(category.categoryType.id) === 2) {\n          let productToPush = productsToAppend.find(product => product.registryCategories[0].id === category.id)\n          if (productToPush) {\n            products.push(productToPush)\n          }\n        }\n      }\n      // for future ref : productCount += products.length;\n      allProducts.push({\n        category: category,\n        products: products,\n        recommendations: (category.added < category.total || category.total === 0) ? recommendations : []\n      })\n    }\n\n    // Grouping products based on parent category\n    let groupedProducts = []\n    for (const product of allProducts) {\n      let foundCategory = false;\n      groupedProducts = groupedProducts.map(el => {\n\n        if (product.category.superParentCat) {\n          if (el.id === product.category.superParentCat.id) {\n            foundCategory = true;\n            el.allProducts.push(product);\n          }\n        } else if (el.id === product.category.parentCategory.id) {\n          foundCategory = true;\n          el.allProducts.push(product);\n        }\n        return el;\n      })\n\n      if (!foundCategory) {\n        groupedProducts.push({\n          ...product.category.parentCategory,\n          categoryType: product.category.categoryType,\n          allProducts: [product]\n        })\n      }\n    }\n\n    // Adding total products and recommendations\n    groupedProducts = groupedProducts.map(el => {\n      let productCount = 0;\n      let recommendationCount = 0;\n\n      for (let product of el.allProducts) {\n        productCount += product.products.length;\n        recommendationCount += product.recommendations.length;\n      }\n\n      el['totalProducts'] = productCount;\n      el['totalRecommendations'] = recommendationCount;\n      return el;\n    })\n\n    // Removing items that does not have products or recommendations based on filters\n    if (stateFilterApplied.parentFilter) {\n      if (stateFilterApplied.parentFilter === \"giftsAdded\") {\n        groupedProducts = groupedProducts.filter(product => product.totalProducts > 0)\n      } else if (stateFilterApplied.parentFilter === \"giftsToAdd\") {\n        groupedProducts = groupedProducts.filter(product => {\n          if (Number(product.categoryType.id) === 2) {\n            return true\n          }\n          return product.totalRecommendations > 0\n        })\n      }\n    } else {\n      groupedProducts = groupedProducts.filter(product => (product.totalProducts > 0 || product.totalRecommendations > 0))\n    }\n\n    // for future ref :\n    // if (!stateFilterApplied.parentFilter) {\n    //   productCount -= cashFundCount\n    // }\n\n    productCount = productIds.length\n    return {groupedProducts, productCount};\n  }\n\n  getChecklistPercentage = (checklistItems) => {\n    let totalItems = 0;\n    let addedItems = 0;\n    for (let category of checklistItems) {\n      totalItems += category.totalItemsCount;\n      addedItems += category.addedItemsCount;\n    }\n\n    let result = {\n      result: (addedItems / totalItems) * 100,\n      addedItems: addedItems,\n      totalItems: totalItems,\n    }\n    return result;\n  }\n\n  handleToggleEvent = () => {\n    const checkListIconEl = this.checkListRef.current;\n    // checkListIconEl.classList.toggle(\"closed\");\n    checkListIconEl.classList.toggle(\"opened\");\n  }\n\n  closeTour = () => {\n    // For Build tour\n    if (!this.props.stateRegistryInfo.isBuildRegistryVisited && !this.state.isMustHaveTour) {\n      UpdateBuildTourFlag(this.props.stateRegistryInfo, this.props.dispatch)\n    }\n\n    // For must-have\n    if (this.state.isMustHaveTour && !this.props.stateRegistryInfo.isMustHaveApplied) {\n      updateMushHaveTourFlag(this.props.stateRegistryInfo, this.props.dispatch)\n    }\n\n    this.setState({\n      isTourOpen: false\n    })\n  }\n\n  showToast = async () => {\n    if(!this.toastDisplayed) {\n      this.toastDisplayed = true\n      await toast.success(<p>{this.props.location.state.toastMessage}</p>)\n    } \n    await this.props.history.replace({\n      pathname: this.props.location.pathname,\n      state: {}\n    });\n  }\n\n  handleScroll = (event) => {\n    // For making it responsive\n    if(document.body.offsetWidth > 768) {\n      let el = document.getElementById('checklist-scrollarea');\n      if (el) {\n        // Setting height from top to checklist\n        if(el.getBoundingClientRect().top === 0 && !this.checkListHeightFromTop) {\n          this.checkListHeightFromTop = window.scrollY\n        }\n        // Setting position of checklist to fixed\n        if (el.getBoundingClientRect().top <= 0)\n        {\n          let parentWidth = document.getElementById('checklist-container').offsetWidth;\n          el.style.position = 'fixed';\n          el.style.top = 0;\n          el.style.width = `${parentWidth}px`;\n        }\n\n        // Setting position of checklist to static\n        if(this.checkListHeightFromTop >= window.scrollY) {\n          el.style.position = 'static';\n          el.style.top = 'auto';\n        }\n      }\n    }\n  }\n\n  render() {\n    if (this.props.stateRecommendedProducts.length === 0 && this.props.stateCheckList.length > 0 && !this.recommendationAPICalled) {\n      this.setAllRecommendation(this.props.stateCheckList);\n      this.recommendationAPICalled = true\n    }\n\n    // Recommendation Loader\n    if(this.isRecommendationLoaderActive && !this.props.stateLoader && this.props.stateRecommendedProducts.length === 0) {\n      this.props.dispatch(setLoader(true))\n    }\n\n    // For Build-registry tour\n    if (!this.state.isMustHaveTour && !this.props.stateRegistryInfo.isBuildRegistryVisited && this.props.stateRecommendedProducts.length && !this.state.isTourOpen) {\n      this.setState({\n        isTourOpen: true,\n        steps: BUILD_REGISTRY_STEPS\n      })\n    } else if (!this.state.isMustHaveTour && this.state.isTourOpen && this.props.stateRegistryInfo.isBuildRegistryVisited && this.props.stateRecommendedProducts.length) {\n      this.setState({\n        isTourOpen: false,\n      })\n    }\n\n    // For loader\n    if (this.props.stateCheckList.length <= 0) {\n      this.props.dispatch(setLoader(true))\n    }\n\n    // For toast message from other route\n    if(this.props.location.state?.toastMessage && !this.toastDisplayed) {\n      this.showToast()   \n    } \n\n    // let groupedProducts = []\n    // let productCount = 0\n    //\n    // if (this.state.recommendedCashFundImage.length > 0 && this.updateRecommendedCashFundImage){\n    //\n    // }\n\n    this.updateFilterList(this.props.stateAddedProducts)\n    let {groupedProducts, productCount} = this.getSortedProducts(this.props.stateAddedProducts, this.props.stateCheckList, this.props.stateRecommendedProducts, this.props.stateFilterApplied)\n\n    return (\n      <>\n        <div className=\"container\">\n          <div className=\"row mt-3 mt-md-6\">\n            {/* View CheckList */}\n            <div className=\"col-md-12 col-lg-3 px-0 px-lg-2 checklist-container\" id=\"checklist-container\" ref={this.checkListRef}>\n              <div data-tut=\"build-step-one\" className=\"pr-0 pr-md-5 checklist-scrollarea\" id=\"checklist-scrollarea\">\n                <div className=\"d-flex align-items justify-content-between px-4 px-lg-0 w-100 checklist-header\">\n                  <CheckList percentage={this.getChecklistPercentage(this.props.stateCheckList)}/>\n                  <span className=\"checklist-container-icon-arrow mr-2 mr-md-0\" onClick={this.handleToggleEvent}></span>\n                </div>\n                <div className=\"divider-div d-inline-block d-lg-none my-2\"/>\n                <div className=\"checklist-items-continer px-4 px-md-0\">\n                  {this.props.stateCheckList.map(item => <CheckListItems key={item.categoryName} item={item}\n                                                                         dispatch={this.props.dispatch}/>)}\n                </div>\n              </div>\n            </div>\n            <div className=\"col-12 col-lg-9 mb-11 px-3\">\n\n              {/* Top Filter Section */}\n              <FilterSection productCount={productCount}/>\n              <div className=\"mt-5 px-2 px-md-0\">\n                {groupedProducts.map(el => {\n                  let hasCashFund = false;\n                  return (<>\n                      <h4 className=\"text-uppercase my-4\">{el.name}</h4>\n                      {el.allProducts.map((product, i) => (\n                        <div id={product.category.parentCategory.name + '(' + product.category.name + ')'}>\n                          {product.products.map((card, index) => {\n                            if (Number(card.registryCategories[0].category.categoryType.id) === 2) {\n                              hasCashFund = true\n                            }\n                            if (Number(card.registryCategories[0].category.categoryType.id) === 2 && Number(card.registryCategories[0].category.addedItemsCount) === 0) {\n                              return (\n                                <CashFundCard\n                                  data={card}\n                                  key={\"cashFund\" + index}\n                                  className=\"mt-2\"\n                                  addButtonClickHandler={() => this.setCashFundCategoryAndOpenModal(card)}\n                                />\n                              )\n                            } else {\n                              return (\n                                <AddedCard\n                                  categoryTitle={product.recommendations.length ? product.category.isSubProductTypes ? product.category.parentCategory.name + ' (' + product.category.name + ')' : product.recommendations[0].category.categoryName : null}\n                                  data={card} key={\"addedCard\" + index}\n                                  multipleCategories={card.registryCategories.length > 1 ? card.registryCategories.find((cat, index) => Number(cat.id) === Number(product.category.id) && index != 0) : null}\n                                  toggleMustHave={(ev) => this.toggleMustHaveProduct(ev, card)}\n                                  removeProductFromCartHandler={() => removeProductFromCartHandler(card, this.props.stateRegistryInfo.id, this.props.dispatch)}\n                                />\n                              )\n                            }\n                          })}\n                          {product.recommendations.length > 0 ?\n                            <ViewRecommend\n                              title={product.category.isSubProductTypes ? product.category.parentCategory.name + ' (' + product.category.name + ')' : product.recommendations[0].category.categoryName}\n                              stepTwoForTour={i === 0 ? \"build-step-two\" : product.recommendations[0].category.id + '-' + i}\n                              category={product.recommendations[0].category}\n                              products={product.recommendations}/>\n                            : null}\n                        </div>\n                      ))}\n                      {hasCashFund ?\n                        <div className=\"my-2\">\n                          <Button\n                            variant=\"secondary\"\n                            className=\" w-100 py-1 text-body font-medium\"\n                            onClick={this.openCashFundModal}\n                          >Add my own</Button>\n                        </div>\n                        : null}\n                    </>\n                  )\n                })}\n              </div>\n            </div>\n          </div>\n        </div>\n        {this.state.showCashFundModal ?\n          <AddCashFundModal\n            show={this.state.showCashFundModal}\n            closeModal={this.closeCashFundModal}\n            categoryData={this.state.cashFundProduct}\n          />\n          : null}\n\n          {this.state.isTourOpen ?\n            <Tour\n              highlightedMaskClassName='tour-bg'\n              steps={this.state.steps}\n              isOpen={this.state.isTourOpen}\n              CustomHelper={TourCard}\n              onRequestClose={this.closeTour}/> \n            : null}\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    stateProducts: state.myRegistry.products,\n    stateAddedProducts: state.myRegistry.addedProducts,\n    stateFilterApplied: state.myRegistry.filterApplied,\n    stateActiveRecommandation: state.myRegistry.activeRecommandation,\n    stateRecommendedProducts: state.myRegistry.recommendedProducts,\n    stateCheckList: state.myRegistry.checkList,\n    stateRegistryInfo: state.registry.info,\n    stateLoader: state.registry.loader,\n  }\n}\n\n\nexport default connect(\n  mapStateToProps\n)(Everything);\n","import React from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\nimport route from \"utils/routes\";\nimport Everything from \"../Everything/Everything\";\n\nclass MainContent extends React.Component {\n    render() {\n        return (\n            <Switch>\n                <Route exact path={route.MY_REGISTRY.HOME} component={Everything} />\n            </Switch>\n        )\n    }\n}\n\nexport default MainContent;","import React from \"react\";\nimport MainContent from './containers/MainContent/MainContent';\n\n\nconst MyRegistry = (props) => {\n    return (\n        <>\n            <MainContent />\n        </>\n    )\n}\n\nexport default MyRegistry;\n","import React, { useState, useEffect, useRef, useCallback } from \"react\";\nimport ReactCrop from \"react-image-crop\";\nimport \"react-image-crop/lib/ReactCrop.scss\";\n\nconst CropImage = (props) => {\n  // DEFAULT CONSTANTS\n  const ASPECT_RATIO = {\n    width: 32,\n    height: 5,\n  };\n  const CROPPED_IMAGE_FORMAT = \"image/jpeg\";\n  const COVER_IMAGE_NAME = \"cover.jpeg\";\n\n  // VARIABLE INITIALIZATION\n  const imgRef = useRef(null);\n  const [crop, setCrop] = useState({});\n  const [completedCrop, setCompletedCrop] = useState(null);\n\n  // SET IMGREF TO LOADED IMAGE\n  const onLoad = useCallback((img) => {\n    imgRef.current = img;\n  }, []);\n\n  // RETURN BLOB OF CROPPED IMAGE\n  const getCroppedImg = (image, crop, fileName) => {\n    const canvas = document.createElement(\"canvas\");\n    const scaleX = image.naturalWidth / image.width;\n    const scaleY = image.naturalHeight / image.height;\n    canvas.width = crop.width;\n    canvas.height = crop.height;\n    const ctx = canvas.getContext(\"2d\");\n\n    ctx.drawImage(\n      image,\n      crop.x * scaleX,\n      crop.y * scaleY,\n      crop.width * scaleX,\n      crop.height * scaleY,\n      0,\n      0,\n      crop.width,\n      crop.height\n    );\n\n    return new Promise((resolve, reject) => {\n      canvas.toBlob(\n        (blob) => {\n          if (blob) {\n            blob.name = fileName;\n            resolve(blob);\n          } else {\n            reject(\"Blob is null\");\n          }\n        },\n        CROPPED_IMAGE_FORMAT,\n        1\n      );\n    });\n  };\n\n  // SET CROPPED IMAGE TO PARENT STATE\n  useEffect(() => {\n    if (!completedCrop || !imgRef.current) {\n      return;\n    }\n    let croppedImage = getCroppedImg(\n      imgRef.current,\n      completedCrop,\n      COVER_IMAGE_NAME\n    );\n    croppedImage\n      .then((blob) => {\n        props.setCroppedImage(blob);\n      })\n      .catch((_) => {});\n  }, [completedCrop]);\n\n  return (\n    <>\n      <ReactCrop\n        src={props.src}\n        crop={crop}\n        crossorigin=\"anonymous\"\n        onImageLoaded={onLoad}\n        onChange={(newCrop) => setCrop(newCrop)}\n        onComplete={(c) => setCompletedCrop(c)}\n      />\n    </>\n  );\n};\n\nexport default CropImage;\n","import React from \"react\";\nimport \"./UploadImageCard.scss\";\n\nconst UploadImageCard = (props) => {\n  return (\n    <div className=\"upload-image-card d-flex align-items-center px-5 py-3\" onClick={props.onClick}>\n      <div className=\"export-image-icon mr-5\"><i className=\"icon-export\" /></div>\n      <div>\n        <h4>Upload Image</h4>\n        <p className=\"text-sm\">Upload your own image, recommended size 1600px x 250px</p>\n      </div>\n    </div>\n  );\n}\n\nexport default UploadImageCard;","import React from \"react\";\nimport \"./DefaultImage.scss\";\n\nconst DefaultImage = (props) => {\n  return (\n    <div className=\"default-image-card\" data-selected={props.selected} onClick={props.onClick}>\n      <img src={props.src} alt=\"Default\"/>\n      {props.selected ? <i className=\"icon-check selected-image p-1\"/> : null}\n    </div>\n  )\n}\n\nexport default DefaultImage;","import React, {useEffect, useState, createRef} from \"react\";\nimport \"./CoverImagePicker.scss\";\nimport Modal from \"../../../commons/components/modal-component/ModalComponent\";\nimport {useSelector, useDispatch} from \"react-redux\";\nimport CropImage from \"./crop-image/CropImage\";\nimport Button from \"../../../commons/components/button-component/ButtonComponent\";\nimport UploadImageCard from \"./upload-image-card/UploadImageCard\";\nimport {graphQL, graphQLMultipart} from \"api/axios\";\nimport {GET_REGISTRY_IMAGES} from \"api/queries\";\nimport {MEDIA_URL_PREFIX} from \"../../../../utils/constants\";\nimport DefaultImage from \"./default-image/DefaultImage\";\nimport {UPDATE_REGISTRY} from \"../../../../api/mutations\";\nimport {updateRegistryDetail} from \"../../../../utils/commonFunction\";\nimport {toast} from \"react-toastify\";\n\nconst CoverImagePicker = (props) => {\n\n  const MAX_IMAGE_SIZE = 5000000; // 5MB\n  const ACCEPTED_IMAGE_TYPE = [\n    'image/jpg',\n    'image/jpeg',\n    'image/png'\n  ]\n  const dispatch = useDispatch();\n  const registryInfo = useSelector(state => state.registry.info);\n  const fileRef = createRef();\n  const [croppedImage, setCroppedImage] = useState(null);\n  const [uploadImage, setUploadImage] = useState(false);\n  const [defaultImage, setDefaultImage] = useState([]);\n  const [customImage, setCustomImage] = useState(null);\n  let modalBody = null;\n  let modalTitle = null;\n  let modalTitleContent = null;\n  let modalFooter = null;\n\n  // Fetching default images\n  const getDefaultCoverImages = () => {\n    const data = {\n      query: GET_REGISTRY_IMAGES,\n      variables: {\n        registryId: registryInfo.id\n      }\n    }\n\n    graphQL(data).then(res => {\n      try {\n        if (res.data.data.registryImages) {\n          // Use below line to get only default images\n          // let defaultImages = res.data.data.registryImages.filter(image => image.isDefault);\n          let defaultImages = res.data.data.registryImages;\n          setDefaultImage(defaultImages.map(image => {\n            image.image = (MEDIA_URL_PREFIX.LOCAL_MEDIA_URL ? MEDIA_URL_PREFIX.LOCAL_MEDIA_URL : \"\") + image.image\n            return image;\n          }));\n        }\n      } catch (e) {\n        console.log(e)\n      }\n    }).catch(err => {\n      console.error(err);\n    })\n  }\n\n  useEffect(() => {\n    if (defaultImage.length === 0) {\n      getDefaultCoverImages();\n    }\n  });\n\n  // Setting default images selected by user\n  const selectDefaultImage = (imageId) => {\n    if (!registryInfo.id) {\n      console.log(\"No registry found\");\n      return;\n    }\n\n    let data = {\n      query: UPDATE_REGISTRY,\n      operationName: \"updateRegistryDetail\",\n      variables: {\n        \"registryId\": registryInfo.id,\n        \"input\": {\n          image: imageId\n        }\n      }\n    }\n\n    graphQL(data).then(res => {\n      try {\n        if (res.data.data.updateRegistry.registry) {\n          toast.success(\"Successfully changed cover image\");\n          updateRegistryDetail(dispatch);\n          closeModalHandler()\n        } else {\n          console.log(res.data.data.updateRegistry.errors);\n          toast.error(\"Some error occurred\");\n          console.error(\"Some error occurred\");\n        }\n      } catch (e) {\n        toast.error(\"Some error occurred\");\n        console.error(e);\n      }\n    }).catch(err => {\n      toast.error(\"Some error occurred\");\n      console.error(err.message)\n    })\n  }\n\n  const openFileSelector = () => {\n    if (fileRef) {\n      fileRef.current.click();\n    }\n  }\n\n  const fileChangeHandler = (e) => {\n    e.persist();\n    if (fileRef.current && fileRef.current.files.length > 0) {\n      const file = fileRef.current.files[0]\n\n      // Verifying file is image\n      if (ACCEPTED_IMAGE_TYPE.includes(file.type)) {\n        if (file.size <= MAX_IMAGE_SIZE) {\n          let reader = new FileReader();\n\n          reader.onload = function (e) {\n            setCustomImage(e.target.result);\n            setUploadImage(true);\n          }\n\n          reader.readAsDataURL(file); // Converting to base64 string\n        } else {\n          toast.error(\"File size exceeds the limit\");\n        }\n      } else {\n        toast.error(\"Please select valid image.\");\n      }\n    }\n  }\n\n  const blobToFile = (blob) => {\n    return new File([blob], blob.name, {\n      type: blob.type\n    })\n  }\n\n  // Setting Custom Image\n  const saveCustomImage = () => {\n    if (!croppedImage) {\n      toast.error(\"Please crop the image\");\n      return;\n    }\n\n    if (!registryInfo.id) {\n      console.log(\"No registry found\");\n      return;\n    }\n\n    let formData = new FormData()\n    let data = {\n      query: UPDATE_REGISTRY,\n      operationName: \"updateRegistryDetail\",\n      variables: {\n        \"registryId\": registryInfo.id,\n        \"input\": {\n          registryImage: null\n        }\n      }\n    }\n\n    formData.append(\"operations\", JSON.stringify(data))\n    let map = {\n      registryImage: [\"variables.input.registryImage\"]\n    }\n    formData.append(\"map\", JSON.stringify(map))\n    formData.append(\"registryImage\", blobToFile(croppedImage))\n\n    graphQLMultipart(formData).then(res => {\n      try {\n        if (res.data.data.updateRegistry.registry) {\n          toast.success(\"Successfully changed cover image\");\n          updateRegistryDetail(dispatch);\n          closeModalHandler()\n          setUploadImage(false);\n        } else {\n          toast.error(\"Some error occurred\");\n          console.log(res.data.data.updateRegistry.errors);\n          console.error(\"Some error occurred\");\n        }\n      } catch (e) {\n        toast.error(\"Some error occurred\");\n        console.error(e);\n      }\n    }).catch(err => {\n      toast.error(\"Some error occurred\");\n      console.error(err.message)\n    })\n\n  }\n\n  const closeCropImageModalHandler = () => {\n    props.closeCoverImagePicker();\n    setUploadImage(false);\n  }\n\n  //modal close method\n  const closeModalHandler = () => {\n    getDefaultCoverImages();\n    props.closeCoverImagePicker();\n    setCroppedImage(null)\n    setCustomImage(null)\n    setUploadImage(false);\n  }\n  if (uploadImage === false) {\n    modalBody = (\n      <div className=\"row cover-image-picker\">\n        <div className=\"col\">\n          <div className=\"row\">\n            <div className=\"col\">\n              <UploadImageCard onClick={openFileSelector}/>\n              <input\n                type=\"file\"\n                className=\"d-none\"\n                ref={fileRef}\n                accept={ACCEPTED_IMAGE_TYPE.join(\",\")}\n                onChange={(e) => fileChangeHandler(e)}/>\n            </div>\n          </div>\n          <div className=\"row\">\n            {defaultImage.map(image => (\n              <div className=\"col-sm-12 col-md-6 mt-5\" key={\"Image-Id-\" + image.id}>\n                <DefaultImage\n                  src={image.image}\n                  selected={image.id === registryInfo.image.id}\n                  onClick={() => selectDefaultImage(image.id)}\n                />\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    )\n    modalTitle = \"Upload or Select an image\";\n  } else {\n    modalBody = (\n      <CropImage\n        src={customImage}\n        setCroppedImage={setCroppedImage}\n      />\n    )\n    modalTitle = \"Crop Image\";\n    modalTitleContent = (\n      <p className=\"text-sm mt-1\">Drag the box to crop the image</p>\n    )\n    modalFooter = (\n      <>\n        <Button variant='secondary' className=\"px-3 py-1 font-medium text-body\"\n                onClick={closeCropImageModalHandler}>Cancel</Button>\n        <Button variant='primary' className=\"px-3 py-1 font-medium text-body\" onClick={saveCustomImage}>Save & Close</Button>\n      </>\n    )\n  }\n\n  return (\n    <>\n      <Modal\n        show={props.show}\n        closeModal={closeModalHandler}\n        updateModal={uploadImage}\n        title={modalTitle}\n        titleContent={modalTitleContent}\n        footer={modalFooter}\n        size=\"lg\"\n      >\n        {modalBody}\n      </Modal>\n    </>\n  )\n}\n\nexport default CoverImagePicker;","import React, { useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport Modal from \"../../../commons/components/modal-component/ModalComponent\";\nimport \"./EditViewRegistryDetail.scss\";\nimport Button from \"../../../commons/components/button-component/ButtonComponent\";\nimport { UPDATE_REGISTRY } from \"../../../../api/mutations\";\nimport { graphQL } from \"../../../../api/axios\";\nimport {getTodoList, updateRegistryDetail} from \"utils/commonFunction\";\nimport { toast } from 'react-toastify';\n\nconst EditViewRegistryDetail = (props) => {\n\n  const MAX_LENGTH_GREETINGS = 280;\n\n  const dispatch = useDispatch();\n  const [registryName, changeRegistryName] = useState(props.info.displayName)\n  const [greeting, changeGreeting] = useState(props.info.greeting)\n\n  const greetingChangeHandler = (ev) => {\n    if (ev.target.value.length <= MAX_LENGTH_GREETINGS) {\n      changeGreeting(ev.target.value);\n    }\n  }\n\n  // SAVE & CLOSE BUTTON CLICK HANDLER\n  const saveRegistryDetail = () => {\n\n    if (registryName.length <= 0) {\n      toast.error(\"Registry Name cannot be empty\");\n      return;\n    }\n\n    let data = {\n      query: UPDATE_REGISTRY,\n      operationName: \"updateRegistryDetail\",\n      variables: {\n        \"registryId\": Number(props.info.id),\n        \"input\": {\n          displayName: registryName,\n          name: props.info.name,\n          greeting: greeting,\n          dueDate: props.info.dueDate,\n          image: props.info.image ? props.info.image.id : null\n        }\n      }\n    }\n\n    graphQL(data).then(res => {\n      try {\n        if (res.data.data.updateRegistry.registry) {\n          toast.success(\"Successfully updated registry information\");\n          updateRegistryDetail(dispatch);\n          getTodoList(props.info.id, dispatch)\n          props.closeEditRegistryDetail();\n        } else {\n          console.log(res.data.data.updateRegistry.errors);\n          toast.error(\"Some error occurred\");\n        }\n      } catch (e) {\n        console.error(e);\n        toast.error(\"Some error occurred\");\n      }\n    }).catch(err => {\n      console.error(err.message)\n    })\n  }\n\n  let modalTitle = \"Edit Registry Details\";\n  let modalBody = (\n    <>\n      <div className=\"row\">\n        <div className=\"col edit-view-detail\">\n          <span className=\"text-sm font-medium edit-view-detail-required\">Registry Name</span>\n          <textarea\n            className=\"w-100 mt-1 h1 p-2 resize-none\"\n            value={registryName}\n            onChange={(ev) => changeRegistryName(ev.target.value)}\n            rows=\"2\" />\n        </div>\n      </div>\n      <div className=\"row mt-3\">\n        <div className=\"col edit-view-detail\">\n          <span className=\"text-sm font-medium\">Add Greeting</span>\n          <span className=\"float-right text-sm edit-view-detail-max-char\">Max. {MAX_LENGTH_GREETINGS} chars</span>\n          <textarea\n            className=\"w-100 mt-1 text-body px-2 py-1\"\n            placeholder=\"Write a greeting for your guests\"\n            maxLength={MAX_LENGTH_GREETINGS}\n            value={greeting}\n            onChange={(ev) => greetingChangeHandler(ev)}\n            rows=\"2\" />\n        </div>\n      </div>\n    </>\n  );\n  let modalFooter = (\n    <>\n      <Button variant=\"secondary\" className=\"py-1 px-3 mr-3 font-medium text-body\"\n        onClick={props.closeEditRegistryDetail}>Cancel</Button>\n      <Button variant=\"primary\" className=\"py-1 px-3 font-medium text-body\" onClick={saveRegistryDetail}>Save & Close</Button>\n    </>\n  );\n\n  return (\n    <Modal\n      show={props.show}\n      closeModal={props.closeEditRegistryDetail}\n      title={modalTitle}\n      footer={modalFooter}\n      size=\"md\"\n    >\n      {modalBody}\n    </Modal>\n  )\n}\n\nexport default EditViewRegistryDetail;","import React, {useState, createRef} from \"react\";\nimport {useDispatch} from \"react-redux\";\nimport \"./ShareRegistry.scss\";\nimport Modal from \"../../../commons/components/modal-component/ModalComponent\";\nimport {UPDATE_REGISTRY, UPDATE_REGISTRY_URL} from \"../../../../api/mutations\";\nimport {graphQL} from \"../../../../api/axios\";\nimport {getTodoList, updateRegistryDetail} from \"../../../../utils/commonFunction\";\nimport {updateRegistryInfo} from \"../../../registry/RegistryActions\";\nimport Button from \"../../../commons/components/button-component/ButtonComponent\";\nimport {toast} from \"react-toastify\";\nimport routes from \"../../../../utils/routes\";\nimport {ROUTES as CDN_ROUTES} from \"utils/cdn-assets-links\";\n\nconst ShareRegistry = (props) => {\n\n  const siteHostName = window.location.host + routes.REGISTRY.HOME;\n  // const siteHostName = \"monicaandandy.com\";\n  const dispatch = useDispatch()\n  const [registryInfoUrl, setRegistryInfoUrl] = useState(props.registryInfo.urlSlug);\n  const [registryVisibility, setRegistryVisibility] = useState(props.registryInfo.isPublic)\n  const [registryUrl, setRegistryUrl] = useState(registryInfoUrl)\n  const [registryError, setRegistryError] = useState(\"\")\n  const inputContainerRef = createRef();\n\n  const closeModal = () => {\n    setRegistryUrl(props.registryInfo.urlSlug)\n    props.closeShareRegistry();\n  }\n\n  const changeRegistryVisibility = (value) => {\n    if (value === registryVisibility) {\n      return;\n    }\n\n    if (!props.registryInfo.id) {\n      console.log(\"No registry found!\");\n      return;\n    }\n\n    setRegistryVisibility(value);\n\n    let data = {\n      query: UPDATE_REGISTRY,\n      operationName: \"updateRegistryDetail\",\n      variables: {\n        \"registryId\": props.registryInfo.id,\n        \"input\": {\n          isPublic: value\n        }\n      }\n    }\n\n    graphQL(data).then(res => {\n      try {\n        if (res.data.data.updateRegistry.registry) {\n          let newRegistry = props.registryInfo\n          newRegistry.isPublic = value\n          dispatch(updateRegistryInfo(newRegistry))\n          getTodoList(props.registryInfo.id, dispatch)\n        } else {\n          console.log(res.data.data.updateRegistry.errors);\n          setRegistryVisibility(!value);\n          toast.error(\"Some error occurred\");\n        }\n      } catch (e) {\n        setRegistryVisibility(!value);\n        toast.error(\"Some error occurred\");\n        console.error(e);\n      }\n    }).catch(err => {\n      setRegistryVisibility(!value);\n      toast.error(\"Some error occurred\");\n      console.error(err.message)\n    })\n  }\n\n  const registryUrlChangeHandler = (ev) => {\n    if (registryError) {\n      setRegistryError(\"\")\n    }\n    setRegistryUrl(ev.target.value);\n  }\n\n  const checkUrlAvailability = () => {\n    if (registryUrl === props.registryInfo.urlSlug) {\n      return\n    }\n\n    if (registryUrl.length <= 0) {\n      toast.error(\"Registry URL cannot be empty!\");\n      return;\n    }\n\n    let data = {\n      query: UPDATE_REGISTRY_URL,\n      operationName: \"updateRegistryUrl\",\n      variables: {\n        \"registryId\": props.registryInfo.id,\n        \"urlSlug\": registryUrl\n      }\n    }\n\n    graphQL(data).then(res => {\n      try {\n        if (res.data.data.checkUpdateRegistryUrlSlug.message) {\n          let newRegistry = props.registryInfo\n          newRegistry.urlSlug = registryUrl\n          setRegistryInfoUrl(registryUrl);\n          setRegistryError(\"\")\n          dispatch(updateRegistryInfo(newRegistry))\n        } else {\n          setRegistryError(`${registryUrl} is not available. Please try something else.`)\n          console.log(res.data.data.checkUpdateRegistryUrlSlug.errors);\n          toast.error(\"Some error occurred\");\n        }\n        getTodoList(props.registryInfo.id, dispatch)\n      } catch (e) {\n        toast.error(\"Some error occurred\");\n        console.error(e);\n      }\n    }).catch(err => {\n      if (err.response.status === 400) {\n        setRegistryError(`${registryUrl} is not available. Please try something else.`)\n      } else {\n        toast.error(\"Some error occurred\");\n      }\n      console.error(err.response.data)\n    })\n  }\n\n  const copyRegistryClickHandler = () => {\n    const el = document.createElement('textarea');\n    el.value = `${siteHostName}/${registryUrl}`;\n    document.body.appendChild(el);\n    el.select();\n    document.execCommand('copy');\n    document.body.removeChild(el);\n    toast.success(\"Copied to clipboard\");\n  }\n\n  const modalTitle = \"Share Registry\";\n  const modalBody = (\n    <>\n      <div className=\"row\">\n        <div className=\"col d-flex flex-column\">\n          <span className=\"section-title-share-registry text-body font-medium\">Status</span>\n          <div className=\"visibility-status-btn mt-1\">\n            <button className={[\"text-sm p-2 mr-1\", registryVisibility ? \"active\" : \"\"].join(\" \")}\n                    onClick={() => changeRegistryVisibility(true)}>Visible\n            </button>\n            <button className={[\"text-sm p-2\", !registryVisibility ? \"active\" : \"\"].join(\" \")}\n                    onClick={() => changeRegistryVisibility(false)}>Secret\n            </button>\n          </div>\n          <p\n            className=\"text-sm mt-1\">{registryVisibility ? \"Guests can access this registry\" : \"Guests cant access this registry unless you set to visible.\"}</p>\n        </div>\n      </div>\n\n      <div className=\"row mt-6 align-items-end\">\n        <div className=\"col d-flex flex-column\">\n          <span className=\"section-title-share-registry text-sm font-medium\">Link</span>\n          <div className=\"mt-1 d-flex align-items-baseline\">\n            <div className=\"d-inline-block w-100\">\n              <div\n                className={[\"registry-url-section d-flex text-body\", registryError ? \"error-input-container\" : \"\"].join(\" \")}\n                ref={inputContainerRef}>\n                <input\n                  className=\"disabled-input-share-registry py-1 px-2\"\n                  value={siteHostName + \"/\"}\n                  readOnly/>\n                <input\n                  className=\"registry-url-input py-1 px-2 w-100\"\n                  value={registryUrl}\n                  onFocus={() => inputContainerRef.current.classList.add('focused-input-container')}\n                  onBlur={() => inputContainerRef.current.classList.remove('focused-input-container')}\n                  onChange={(ev) => registryUrlChangeHandler(ev)}\n                />\n              </div>\n              {registryError ?\n                <span className=\"text-sm input-error-message\">{registryError}</span>\n                : null}\n            </div>\n            {registryUrl !== registryInfoUrl ?\n              <Button variant=\"primary\" className=\"px-2 py-1 text-body font-medium ml-3\"\n                      onClick={checkUrlAvailability}>Check</Button>\n              :\n              <Button variant=\"primary\" className=\"px-2 py-1 text-body font-medium ml-3\"\n                      onClick={copyRegistryClickHandler}>Copy</Button>\n            }\n\n          </div>\n        </div>\n      </div>\n\n      <div className=\"row mt-10\">\n        <div className=\"col\">\n          <span className=\"text-sm font-medium section-title-share-registry\">Share on Social Media</span>\n          <div className=\"mt-2 d-flex\">\n            {registryVisibility ?\n              <>\n                {/*TODO: Add click handler*/}\n                <img className=\"mr-3 social-btn\"\n                     src={CDN_ROUTES.facebook}/>\n                <img className=\"mr-3 social-btn\"\n                     src={CDN_ROUTES.instagram}/>\n                <img className=\"social-btn\"\n                     src={CDN_ROUTES.twitter}/>\n              </>\n              :\n              <>\n                <img className=\"mr-3 social-btn\"\n                     src={CDN_ROUTES.facebook_disabled}/>\n                <img className=\"mr-3 social-btn\"\n                     src={CDN_ROUTES.instagram_disabled}/>\n                <img className=\"social-btn\"\n                     src={CDN_ROUTES.twitter_disabled}/>\n              </>\n            }\n          </div>\n        </div>\n      </div>\n    </>\n  );\n\n  return (\n    <Modal\n      show={props.show}\n      closeModal={closeModal}\n      title={modalTitle}\n      size=\"md\"\n    >\n      {modalBody}\n    </Modal>\n  )\n}\n\nexport default ShareRegistry;","import React from \"react\";\nimport \"./ViewRegistryHeader.scss\";\nimport Button from \"../../../commons/components/button-component/ButtonComponent\";\nimport MoreOption from \"../../../commons/components/more-option/MoreOption\";\nimport CoverImagePicker from \"../../components/cover-image-picker/CoverImagePicker\";\nimport { connect } from \"react-redux\";\nimport { toast } from 'react-toastify';\nimport EditViewRegistryDetail from \"../../components/edit-view-registry-detail/EditViewRegistryDetail\";\nimport { setguestViewRegistry } from \"modules/view-registry/ViewRegistryActions\";\nimport ShareRegistry from \"../../components/share-registry/ShareRegistry\";\nimport { updateGuestViewRegistry } from 'utils/commonFunction';\nimport {withRouter} from \"react-router\";\n\nclass ViewRegistryHeader extends React.Component {\n\n  state = {\n    showCoverImagePicker: false,\n    showEditRegistryDetail: false,\n    showShareRegistry: false\n  }\n\n  componentDidMount() {\n    let queryParams = new URLSearchParams(window.location.search)\n    if (queryParams.has('share')){\n      this.setState({\n        showShareRegistry: true\n      })\n      queryParams.delete('share')\n      this.props.history.replace({\n        search: queryParams.toString(),\n      })\n    }\n    if (!this.props.guestViewRegistryState.urlSlug) {\n      updateGuestViewRegistry(this.props.stateRegistryInfo.urlSlug, this.props.dispatch)\n    }\n  }\n\n  closeCoverImagePicker = () => {\n    this.setState({ showCoverImagePicker: false })\n  }\n\n  closeShareRegistry = () => {\n    this.setState({ showShareRegistry: false })\n  }\n\n  closeEditRegistryDetail = () => {\n    this.setState({ showEditRegistryDetail: false })\n  }\n\n  changeRegistryDetail = (ev) => {\n    ev.preventDefault();\n    this.setState({ showEditRegistryDetail: true })\n  }\n\n  handleGuestView = () => {\n    // toast.success(\"Viewing registry as guest\")\n    this.props.dispatch(setguestViewRegistry(true))\n  }\n\n  handleDisableViewGuest = () => {\n    this.props.dispatch(setguestViewRegistry(false))\n  }\n\n  COVER_PIC_OPTIONS = [\n    {\n      name: \"Replace Background\",\n      action: () => {\n        this.setState({ showCoverImagePicker: true })\n      }\n    }\n  ]\n\n  shareHandler = () => {\n    // this.props.dispatch(setguestViewRegistry(false))\n    this.setState({showShareRegistry: true})\n  }\n\n\n  render() {\n    // const style = {\n    //   backgroundImage: 'url(' + this.props.stateRegistryInfo.image.image + ')'\n    // }\n    return (\n      <div data-tut=\"view-step-one\">\n        {this.props.stateGuestViewRegistry ?\n          <div className=\"view-guest-header text-body py-2\">\n            <div className=\"container d-flex flex-wrap justify-content-between\">\n              <div className=\"d-flex align-items-center view-guest-link order-1 order-md-1 mb-2 mb-md-0\" onClick={this.handleDisableViewGuest}>\n                <i className=\"icon-chevron-left view-guest-text mr-2\" />\n                <a className=\"view-guest-text\" tabindex=\"0\">Back To View Registry</a>\n              </div>\n              <div className=\"view-guest-text order-3 order-md-2 ml-4 ml-md-0\">This is how your guests will see your registry</div>\n              <a className=\"view-guest-text view-guest-link order-2 order-md-3 mb-2 mb-md-0\" onClick={() => this.shareHandler()}>Share</a>\n            </div>\n          </div> : null\n        }\n        <div className=\"view-registry-header\" style={{ backgroundImage: 'url(' + this.props.stateRegistryInfo.image.image + ')' }}>\n\n          {/*TODO: Change icon-preview to icon-camera when updated*/}\n          {!this.props.stateGuestViewRegistry ?\n            <div className=\"cover-pic-update-options\">\n              <div className=\"container\">\n                <div className=\"row\">\n                  <div className=\"col d-flex justify-content-end\">\n                    <MoreOption\n                      data={this.COVER_PIC_OPTIONS}\n                      iconClass=\"icon-preview\"\n                      activeOptionClass=\"view-registry-cover-option-active\"\n                      buttonClass=\"update-cover-options p-1\" />\n                  </div>\n                </div>\n              </div>\n            </div> : null\n          }\n\n          <div className=\"header-registry-detail\">\n            <div className=\"container my-4\">\n              <div className=\"row\">\n                <div className=\"col\">\n                  <div className=\"d-flex align-items-center justify-content-between justify-content-md-start\">\n                    <h2>{this.props.stateRegistryInfo.displayName ? this.props.stateRegistryInfo.displayName : \"\"}</h2>\n                    {!this.props.stateGuestViewRegistry ?\n                      <i className=\"icon-pencil ml-1 edit-name-icon\" onClick={(ev) => this.changeRegistryDetail(ev)} />\n                      : null\n                    }\n                  </div>\n                  {this.props.stateRegistryInfo.greeting ?\n                    <span\n                      className=\"text-sm view-registry-header-greeting\">{this.props.stateRegistryInfo.greeting}</span>\n                    :\n                    !this.props.stateGuestViewRegistry ?\n                      <a className=\"add-greeting-link text-sm font-medium\" href=\"#\" tabindex=\"0\"\n                        onClick={(ev) => this.changeRegistryDetail(ev)}>Add a greeting</a> : null\n                  }\n                </div>\n                {!this.props.stateGuestViewRegistry ?\n                  <div className=\"col-12 col-md-6 header-buttons\">\n                    <div className=\"d-inline-block\" data-tut=\"view-step-three\">\n                      <Button variant=\"secondary\" disabled={this.props.hasNoProducts ? this.props.hasNoProducts : false} className=\"font-medium text-body py-1 px-3 mr-3 d-none d-md-inline-block \"\n                        onClick={this.handleGuestView}>View as Guest</Button>\n                      <Button variant=\"primary\" disabled={this.props.hasNoProducts ? this.props.hasNoProducts : false} className=\"font-medium text-body py-1 px-3 d-none d-md-inline-block\"\n                        onClick={() => this.setState({showShareRegistry: true})}>Share</Button>\n                      <a className=\"view-and-share-link text-sm font-medium mr-3 d-inline-block d-md-none\" href=\"#\" tabindex=\"0\"\n                        onClick={this.handleGuestView}>View as Guest</a>\n                      <a className=\"view-and-share-link text-sm font-medium d-inline-block d-md-none\" href=\"#\" tabindex=\"0\"\n                        onClick={() => this.setState({showShareRegistry: true})}>Share</a>\n                    </div>\n                  </div> : null\n                }\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <CoverImagePicker\n          show={this.state.showCoverImagePicker}\n          closeCoverImagePicker={this.closeCoverImagePicker}\n        />\n\n        {this.state.showEditRegistryDetail ?\n          <EditViewRegistryDetail\n            show={this.state.showEditRegistryDetail}\n            closeEditRegistryDetail={this.closeEditRegistryDetail}\n            info={this.props.stateRegistryInfo}\n          /> : null}\n\n        <ShareRegistry\n          show={this.state.showShareRegistry}\n          closeShareRegistry={this.closeShareRegistry}\n          registryInfo={this.props.stateRegistryInfo}\n        />\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    stateRegistryInfo: state.registry.info,\n    stateGuestViewRegistry: state.viewRegistry.guestViewRegistry,\n    guestViewRegistryState: state.guestView.info,\n  }\n}\n\n\nexport default connect(\n  mapStateToProps\n)(withRouter(ViewRegistryHeader));","import React from 'react';\nimport \"./SortFilter.scss\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport { activeSortFilter } from '../../ViewRegistryActions';\n\nconst SortFilter = () => {\n\n  const dispatch = useDispatch()\n  const activeSortFilterState = useSelector(state => state.viewRegistry.activeSortFilter)\n  const filterContentRef = React.createRef();\n\n  const toggleFilterContent = () => {\n    filterContentRef.current.classList.toggle(\"show\");\n  }\n\n\n  const handleSortSelection = (sortItem) => {\n    dispatch(activeSortFilter(sortItem))\n    filterContentRef.current.classList.toggle(\"show\");\n  }\n\n  const sortByList = [\n    {\n      sortId: 1,\n      sortTitle: 'Featured'\n    },\n    {\n      sortId: 2,\n      sortTitle: 'Price: Low to High'\n    },\n    {\n      sortId: 3,\n      sortTitle: 'Price: High to Low'\n    }\n  ]\n\n  return (\n    <div className=\"sort-section-filter\">\n      <div className=\"sort-filter-btn px-2 d-flex justify-content-between py-1\" onClick={toggleFilterContent}>\n        <span className=\"font-body selected-sort-text text-body\">{activeSortFilterState.sortTitle}</span>\n        <i className=\"icon-filter-1 pl-1 mr-1 icon-chevron-down\" />\n      </div>\n      <div className=\"filter-content\" ref={filterContentRef}>\n        <div className=\"d-flex flex-column\">\n          {sortByList.map(sortItem => {\n            return (\n              <div className=\"filter-item py-2 px-2\" key={\"sortid-\" + sortItem.sortId} onClick={() => handleSortSelection(sortItem)}>\n                <div className=\"text-sm\">{sortItem.sortTitle}</div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default SortFilter;\n","import React, {useEffect, useState} from 'react';\nimport \"./SortFilterMobile.scss\";\nimport {useSelector, useDispatch} from 'react-redux';\nimport {activeSortFilter} from '../../ViewRegistryActions';\nimport Accordion from 'react-bootstrap/Accordion';\nimport Card from 'react-bootstrap/Card';\nimport RadioButton from '../../../commons/components/radio-button/RadioButton';\n\nconst SortFilterMobile = () => {\n\n  const dispatch = useDispatch()\n  const activeSortFilterState = useSelector(state => state.viewRegistry.activeSortFilter)\n  const [currentSort, setCurrentSort] = useState(1)\n  const filterContentMobileRef = React.createRef();\n\n  useEffect(() => {\n    setCurrentSort(activeSortFilterState.sortId);\n  })\n  const toggleFilterContent = () => {\n    const checkListIconEl = filterContentMobileRef.current.firstChild;\n    checkListIconEl.classList.toggle(\"closed\");\n    checkListIconEl.classList.toggle(\"opened\");\n  }\n\n\n  const handleSortSelection = (sortItem) => {\n    if (currentSort !== sortItem.id) {\n      setCurrentSort(sortItem.sortId)\n      dispatch(activeSortFilter(sortItem))\n    }\n  }\n\n  const sortByList = [\n    {\n      sortId: 1,\n      sortTitle: 'Featured'\n    },\n    {\n      sortId: 2,\n      sortTitle: 'Price: Low to High'\n    },\n    {\n      sortId: 3,\n      sortTitle: 'Price: High to Low'\n    }\n  ]\n\n  return (\n    <div className=\"sort-section-mobile-filter w-100\">\n      <Accordion className=\"accordion-list mb-5\">\n        <Card>\n          <Accordion.Toggle\n            onClick={() => toggleFilterContent()}\n            as={Card.Header}\n            id=\"view-sort-filter\"\n            eventKey=\"view-sort-filter\"\n          >\n            <div ref={filterContentMobileRef} className='d-flex icon-checklist'>\n              <span className=\"checklist-icon-arrow\" />\n              <div className=\"ml-3 mt-1 w-100\">\n                <div className=\"text-body\">Sort By</div>\n              </div>\n            </div>\n          </Accordion.Toggle>\n          <Accordion.Collapse className='ml-6 mt-3' eventKey=\"view-sort-filter\">\n            <Card.Body className=\"text-sm\">\n              {sortByList.map(sortItem => {\n                return (\n                  <div className=\"mb-1\"> <RadioButton\n                    centerText=\"true\"\n                    textClass=\"text-body\"\n                    name=\"viewSortFilter\"\n                    key={sortItem.sortId}\n                    checked={sortItem.sortId === currentSort ? true : null}\n                    changeHandler={() => handleSortSelection(sortItem)} >\n                    {sortItem.sortTitle}\n                  </RadioButton>\n                  </div>\n                );\n              })}\n            </Card.Body>\n          </Accordion.Collapse>\n        </Card>\n      </Accordion>\n    </div>\n  )\n}\n\nexport default SortFilterMobile;\n","import React, {useState, useEffect} from 'react'\nimport \"./ViewFilterMobile.scss\";\nimport {useSelector, useDispatch} from 'react-redux';\nimport {setChildViewFilter, clearViewFilter, setViewFilterCategory} from '../../ViewRegistryActions';\nimport {FILTERS} from \"utils/constants\";\nimport Accordion from 'react-bootstrap/Accordion';\nimport Card from 'react-bootstrap/Card';\nimport SortFilterMobile from '../sort-filter/SortFilterMobile';\n\nconst ViewFilterMobile = () => {\n\n\tconst dispatch = useDispatch()\n\tlet tempParentFilterId = useSelector(state => state.viewRegistry.viewFilterApplied.parentFilter)\n\tlet tempChildFilterIds = useSelector(state => state.viewRegistry.viewFilterApplied.childFilter)\n\tlet stateAddedProducts = useSelector(state => state.myRegistry.addedProducts)\n\tconst stateCategoriesInfo = useSelector(state => state.myRegistry.checkList)\n\tconst stateGuestViewRegistry = useSelector(state => state.viewRegistry.guestViewRegistry)\n\tlet stateFilterCategories = useSelector(state => state.viewRegistry.filterCategory)\n\tlet filterCountState = useSelector(state => state.myRegistry.filterCount)\n\tlet [filterCategoryLimit, setFilterCategoryLimit] = useState([])\n\n\n\t// Constant variables for filters\n\tconst AVAILABLE = \"available\"\n\tconst RESERVED = \"reserved\"\n\tconst PURCHASED = \"purchased\"\n\tconst PRICE_1 = \"price-1\"\n\tconst PRICE_2 = \"price-2\"\n\tconst PRICE_3 = \"price-3\"\n\tconst MONICA_AND_ANDY = \"monicaandandy\"\n\tconst ELSEWHERE = \"elsewhere\"\n\n\n\tconst getLimitOfFliter = (parentId) => {\n\t\tlet limit = null\n\t\tconst filterCategory = [...filterCategoryLimit]\n\t\tfor (let category of filterCategory) {\n\t\t\tif (parentId === category.id && category.limit) {\n\t\t\t\tlimit = category.limit\n\t\t\t}\n\t\t}\n\t\treturn limit\n\t}\n\n\t// Updating product count in filter categories\n\tconst updateFilterList = (addedProducts) => {\n\n\t\tlet newFilterList = [\n\t\t\t{\n\t\t\t\tid: \"categories\",\n\t\t\t\tdisplay: FILTERS.CATEGORIES_DISPLAY,\n\t\t\t\tlimit: getLimitOfFliter(\"categories\") ? getLimitOfFliter(\"categories\") : 6,\n\t\t\t\tchild: [...stateCategoriesInfo].filter(category => {\n\t\t\t\t\tif (category.addedItemsCount > 0) {\n\t\t\t\t\t\treturn true\n\t\t\t\t\t}\n\t\t\t\t}).map(category => {\n\t\t\t\t\tlet newCategory = {...category}\n\t\t\t\t\tnewCategory.id = category.category.id\n\t\t\t\t\tnewCategory['display'] = newCategory.categoryName\n\t\t\t\t\tnewCategory['count'] = newCategory.addedItemsCount\n\t\t\t\t\treturn newCategory\n\t\t\t\t})\n\t\t\t\t// count: 0\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"price\",\n\t\t\t\tdisplay: FILTERS.PRICE_DISPLAY,\n\t\t\t\tchild: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: PRICE_1,\n\t\t\t\t\t\tdisplay: FILTERS.PRICE_DISPLAY_1,\n\t\t\t\t\t\tcount: filterCountState.under50\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: PRICE_2,\n\t\t\t\t\t\tdisplay: FILTERS.PRICE_DISPLAY_2,\n\t\t\t\t\t\tcount: filterCountState.between50100\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: PRICE_3,\n\t\t\t\t\t\tdisplay: FILTERS.PRICE_DISPLAY_3,\n\t\t\t\t\t\tcount: filterCountState.moreThan100\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"store\",\n\t\t\t\tdisplay: FILTERS.STORE_DISPLAY,\n\t\t\t\tchild: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: MONICA_AND_ANDY,\n\t\t\t\t\t\tdisplay: FILTERS.MONICA_AND_ANDY_DISPLAY,\n\t\t\t\t\t\tcount: filterCountState.maStoreItems\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: ELSEWHERE,\n\t\t\t\t\t\tdisplay: FILTERS.ELSEWHERE_DISPLAY,\n\t\t\t\t\t\tcount: filterCountState.otherStoreItems\n\t\t\t\t\t},\n\t\t\t\t]\n\t\t\t},\n\n\t\t]\n\t\tif (!stateGuestViewRegistry) {\n\t\t\tconst giftStatus = {\n\t\t\t\tid: \"giftStatus\",\n\t\t\t\tdisplay: \"Gift Status\",\n\t\t\t\tchild: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: AVAILABLE,\n\t\t\t\t\t\tdisplay: FILTERS.AVAILABLE_DISPLAY,\n\t\t\t\t\t\tcount: filterCountState.totalAvailable\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: RESERVED,\n\t\t\t\t\t\tdisplay: FILTERS.RESERVED_DISPLAY,\n\t\t\t\t\t\tcount: filterCountState.totalReserved\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: PURCHASED,\n\t\t\t\t\t\tdisplay: FILTERS.PURCHASED_DISPLAY,\n\t\t\t\t\t\tcount: filterCountState.totalPurchased\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t\tnewFilterList.splice(0, 0, giftStatus)\n\t\t}\n\t\tdispatch(setViewFilterCategory(newFilterList))\n\t\treturn newFilterList\n\t}\n\n\tuseEffect(() => {\n\t\tif (tempChildFilterIds.length === 0) {\n\t\t\tupdateFilterList(stateAddedProducts)\n\t\t}\n\t}, [stateAddedProducts, stateCategoriesInfo, tempChildFilterIds])\n\n\n\t// Change event handlers\n\n\t// TDOD: Add this if needed\n\t// const parentChangeHandler = (parent) => {\n\t//   dispatch(setParentViewFilter(parent.id))\n\t//   if (parent.child) {\n\t//     dispatch(setChildViewFilter(parent.child.map(child => child.id)))\n\t//   } else {\n\t//     dispatch(setChildViewFilter([]))\n\t//   }\n\t// }\n\n\tconst childChangeHandler = (childId, parentId) => {\n\n\t\tif (parentId !== tempParentFilterId) {\n\t\t\tif (tempChildFilterIds.length > 0) {\n\t\t\t\tdispatch(setChildViewFilter([]))\n\t\t\t}\n\t\t}\n\n\t\tconst childIndex = tempChildFilterIds.indexOf(childId)\n\n\t\tif (childIndex === -1) {\n\t\t\tdispatch(setChildViewFilter([...tempChildFilterIds, childId]))\n\t\t} else {\n\t\t\tlet newChildArray = [...tempChildFilterIds]\n\t\t\tnewChildArray.splice(childIndex, 1)\n\t\t\tdispatch(setChildViewFilter(newChildArray))\n\t\t}\n\t}\n\n\tconst changeParentLimitHandler = (parentFilterID) => {\n\t\tlet limitLength = null\n\t\tlet filterCategory = [...stateFilterCategories].map(parentFilter => {\n\t\t\tif (parentFilter.id === parentFilterID) {\n\t\t\t\tparentFilter.limit = parentFilter.child.length\n\t\t\t\tlimitLength = parentFilter.child.length\n\t\t\t}\n\t\t\treturn parentFilter\n\t\t})\n\t\tdispatch(setViewFilterCategory(filterCategory))\n\n\t\tlet isFound = false\n\t\tlet newFilterCateoryLimit = [...filterCategoryLimit].map(categorylimit => {\n\t\t\tif (categorylimit.id === parentFilterID) {\n\t\t\t\tcategorylimit.limit = limitLength\n\t\t\t\tisFound = true\n\t\t\t\treturn categorylimit\n\t\t\t}\n\t\t\treturn categorylimit\n\t\t})\n\n\t\tif (!isFound) {\n\t\t\tnewFilterCateoryLimit.push({'id': parentFilterID, 'limit': limitLength})\n\t\t}\n\t\tsetFilterCategoryLimit(newFilterCateoryLimit)\n\t}\n\n\tconst handleMobileToggleEvent = (ref) => {\n\t\t// if (id) {\n\t\t// \t// console.log(document.getElementById(`${id}`))\n\t\t// }\n\t\t// console.log(id)\n\t\tconst checkListIconEl = ref.current.firstChild;\n\t\tcheckListIconEl.classList.toggle(\"closed\");\n\t\tcheckListIconEl.classList.toggle(\"opened\");\n\t}\n\n\n\treturn (\n\t\t<div className=\"view-mobile-filter\">\n\t\t\t<div className=\"d-flex flex-column\">\n\t\t\t\t<SortFilterMobile />\n\t\t\t\t{[...stateFilterCategories].map(parentFilter => {\n\t\t\t\t\t// console.log(\"*****\",parentFilter.id)\n\t\t\t\t\tlet accordionRef = React.createRef();\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Accordion className=\"accordion-list mb-5\">\n\t\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t\t<Accordion.Toggle\n\t\t\t\t\t\t\t\t\tonClick={()=> handleMobileToggleEvent(accordionRef)}\n\t\t\t\t\t\t\t\t\tas={Card.Header}\n\t\t\t\t\t\t\t\t\tid={parentFilter.id}\n\t\t\t\t\t\t\t\t\teventKey={parentFilter.display}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div ref={accordionRef} className='d-flex icon-checklist'>\n\t\t\t\t\t\t\t\t\t\t<span className=\"checklist-icon-arrow\" />\n\t\t\t\t\t\t\t\t\t\t<div className=\"ml-3 mt-1 w-100\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-body\">{parentFilter.display}</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Accordion.Toggle>\n\t\t\t\t\t\t\t\t<Accordion.Collapse className='ml-6 mt-4' eventKey={parentFilter.display}>\n\t\t\t\t\t\t\t\t\t<Card.Body>\n\t\t\t\t\t\t\t\t\t\t{parentFilter.child ? (\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"d-flex flex-column\" key={\"child-filter-\" + parentFilter.id}>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"fliter-checkbox-section\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{parentFilter.child.map((childFilter, index) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tchildFilter.count > 0 ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tindex < (parentFilter.limit ? parentFilter.limit : parentFilter.child.length) ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"view-fliter-checkbox d-flex align-items-center mb-3\" key={childFilter.id}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"checkbox__input mr-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"checkbox\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname={childFilter.display}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={childFilter.display}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchecked={tempChildFilterIds.includes(childFilter.id) ? \"checked\" : \"\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={() => childChangeHandler(childFilter.id, parentFilter.id)} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"checkbox__control d-flex justify-content-center align-items-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"icon-check\"></i>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p class=\"radio__label text-sm\"><div>{childFilter.display} {childFilter.count > 0 ? <>({childFilter.count})</> : null}</div></p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: null\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{(parentFilter.limit && (parentFilter.limit !== parentFilter.child.length) && (parentFilter.child.length - parentFilter.limit) > 0) ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"filter-clear-all text-sm font-medium ml-4 pb-3\" onClick={() => changeParentLimitHandler(parentFilter.id)}>Show {parentFilter.child.length - parentFilter.limit} more</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t\t\t\t</Card.Body>\n\t\t\t\t\t\t\t\t</Accordion.Collapse>\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t</Accordion>\n\t\t\t\t\t)\n\t\t\t\t})}\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default ViewFilterMobile;\n","import React from 'react';\nimport {connect} from \"react-redux\";\nimport AddGift from \"modules/commons/components/add-gift/AddGift\";\nimport SortFilter from \"../sort-filter/SortFilter\";\nimport './SortFilterSection.scss';\nimport {isGotIt, clearViewFilter, setChildViewFilter} from \"modules/view-registry/ViewRegistryActions\";\nimport {UPDATE_REGISTRY} from \"api/mutations\";\nimport {graphQL} from \"api/axios\";\nimport {updateRegistryDetail} from \"utils/commonFunction\";\nimport FilterItemChip from \"modules/my-registry/components/filter/filter-item-chip/FilterItemChip\";\nimport Button from \"../../../commons/components/button-component/ButtonComponent\";\nimport Modal from \"../../../commons/components/modal-component/ModalComponent\";\nimport ViewFilterMobile from \"../view-filter/ViewFilterMobile\";\n\nclass SortFilterSection extends React.Component {\n  state = {\n    showFilterModal: false,\n    parentFilter: \"\",\n    childFilter: []\n  }\n\n  doneViewFilterModal = () => {\n    this.setState({showFilterModal: false})\n  }\n  \n  clearViewFilterModal = () =>{\n    this.props.dispatch(clearViewFilter())\n    this.doneViewFilterModal()\n  }\n  \n  closeViewFilterModal = () =>{\n    this.props.dispatch(setChildViewFilter([...this.state.childFilter]));\n    this.setState({showFilterModal: false})\n  }\n\n  handleIsGotIt = () => {\n    let data = {\n      query: UPDATE_REGISTRY,\n      operationName: \"updateRegistryDetail\",\n      variables: {\n        \"registryId\": this.props.stateRegistryInfo.id,\n        \"input\": {\n          isFeaturedNoticeRead: true\n        }\n      }\n    }\n    graphQL(data).then(res => {\n      try {\n        if (res.data.data.updateRegistry.registry) {\n          // this.props.dispatch(isGotIt(true))\n          updateRegistryDetail(this.props.dispatch);\n        } else {\n          console.log(res.data.data.updateRegistry.errors);\n          console.error(\"Some error occurred\");\n        }\n      } catch (e) {\n        console.error(e);\n      }\n    }).catch(err => {\n      console.error(err.message)\n    })\n  }\n\n  // Filter chips\n  getFilterChips = (stateFilterApplied) => {\n    let filterChips = {}\n    if (stateFilterApplied) {\n      let allChild = []\n      for (let filterCat of this.props.stateFilterCategory) {\n        for (let childCat of filterCat.child) {\n          allChild.push(childCat)\n        }\n      }\n      if (stateFilterApplied.childFilter) {\n        filterChips.childFilter = [...stateFilterApplied.childFilter].map(item => {\n          let finalAllChild = [...allChild].find(element => {\n            return element.id === item\n          })\n          return finalAllChild\n        })\n      }\n    }\n    return filterChips;\n  }\n\n  // Filter chips close handler\n  deleteChipHandler = async (isParent, childId) => {\n    if (isParent) {\n      await this.props.dispatch(clearViewFilter())\n    } else {\n      const newChildArray = this.props.stateFilterApplied.childFilter.filter(element => {\n        return element !== childId\n      })\n      await this.props.dispatch(setChildViewFilter(newChildArray))\n    }\n    await this.props.setFilterhandler()\n  }\n\n  //Clear filter state\n  clearFilterHandler = async (ev) => {\n    ev.preventDefault()\n    await this.props.dispatch(clearViewFilter())\n    await this.props.setFilterhandler()\n  }\n  \n  \n  //filter previous states\n  viewFilterStateHandler = () =>{\n    this.setState({parentFilter: this.props.stateFilterApplied.parentFilter})\n    this.setState({childFilter: this.props.stateFilterApplied.childFilter});\n    this.setState({showFilterModal: true});\n  }\n\n  //open modal\n  modalFooterButtons = (\n\t\t<>\n\t\t\t<Button\n\t\t\t\tvariant=\"secondary\"\n\t\t\t\tclassName=\"px-3 py-1 font-weight-bold font-medium text-body\"\n\t\t\t\tdisabled={false}\n\t\t\t\tonClick={this.clearViewFilterModal}\n\t\t\t>Clear</Button>\n\t\t\t<Button\n\t\t\t\tvariant=\"primary\"\n\t\t\t\tclassName=\"px-4 py-1 font-weight-bold font-medium text-body\"\n\t\t\t\tdisabled={false}\n\t\t\t\tonClick={this.doneViewFilterModal}\n\t\t\t>Done</Button>\n\t\t</>\n\t)\n\n  render() {\n    let filterChips = this.getFilterChips(this.props.stateFilterApplied)\n\n    return (\n      <>\n        <div className=\"row align-items-center align-items-md-start\">\n          <div className=\"col-3\">\n            <h4 className=\"font-weight-bold mr-2 filter-section-total-items\">{this.props.productCount} {this.props.productCount === 1 ? \"Gift\" : \"Gifts\"}</h4>\n          </div>\n          <div className=\"col filter-sort-section\">\n            <div className=\"d-flex justify-content-end\">\n              <div>\n                <Button className=\"px-1 pt-1 px-lg-3 d-inline-block d-lg-none mr-1\" variant=\"secondary\" onClick={this.viewFilterStateHandler}>\n                  <i className=\"icon-filter-1 filter-icon\" />\n                </Button>\n              </div>\n              <div className=\"text-sm sort-by-text mr-2 align-self-center d-none d-lg-inline-block\">Sort by</div>\n              <div className=\"d-none d-lg-inline-block\"><SortFilter /></div>\n              {this.props.stateGuestViewRegistry ?\n                <></> :\n                <div className=\"ml-0 ml-md-4 filter-add-gift-btn\"><AddGift /></div>}\n            </div>\n\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col-7\">\n            <div className=\"filtered-items\">\n              {filterChips.childFilter ?\n                filterChips.childFilter.map(item =>\n                  item ?\n                    <FilterItemChip\n                      text={item.display}\n                      className=\"mr-2\"\n                      key={filterChips.id + \"-\" + item.id}\n                      deleteHandler={() => this.deleteChipHandler(false, item.id)} /> : null )\n                : null}\n              {this.props.stateFilterApplied.childFilter.length > 0 ?\n                <a className=\"font-medium text-sm filter-clear-link\" href=\"#\" tabindex=\"0\"\n                  onClick={(ev) => this.clearFilterHandler(ev)}>Clear\n                all</a>\n                : null}\n            </div>\n          </div>\n        </div>\n        {this.props.stateRegistryInfo.isFeaturedNoticeRead === false && this.props.stateActiveSortFilter.sortId !== 1 && !this.props.stateGuestViewRegistry ?\n          <div className=\"row mt-2 mb-3\">\n            <div className=\"col\">\n              <div className=\"text-sm py-2 d-flex flex-wrap justify-content-center sort-filter-warning\">\n                <div>Enable rearrange gifts by</div>\n                <div className=\"font-weight-bold px-1\">clearing your filters</div>\n                <div>and setting to</div>\n                <div className=\"font-weight-bold px-1\">Sort by: Featured.</div>\n                <div className=\"sort-filter-warning-btn\" onClick={this.handleIsGotIt}>Ok, got it.</div>\n              </div>\n            </div>\n          </div> : <></>\n        }\n\n        <Modal\n          show={this.state.showFilterModal}\n          title={\"Filters\"}\n          closeModal={this.closeViewFilterModal}\n          footer={this.modalFooterButtons}\n          >\n          <ViewFilterMobile />\n        </Modal>\n      </>\n    )\n  }\n}\n\n\nconst mapStateToProps = state => {\n  return {\n    stateViewRegistryProducts: state.viewRegistry.viewRegistryProducts,\n    stateActiveSortFilter: state.viewRegistry.activeSortFilter,\n    stateGuestViewRegistry: state.viewRegistry.guestViewRegistry,\n    stateRegistryInfo: state.registry.info,\n    stateFilterApplied: state.viewRegistry.viewFilterApplied,\n    stateFilterCategory: state.viewRegistry.filterCategory\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(SortFilterSection);\n","import React, { useState, useEffect } from 'react'\nimport \"./ViewFilter.scss\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setChildViewFilter, clearViewFilter, setViewFilterCategory } from '../../ViewRegistryActions';\nimport { FILTERS } from \"utils/constants\"\n\nconst ViewFilter = (props) => {\n\n  const dispatch = useDispatch()\n  let tempParentFilterId = useSelector(state => state.viewRegistry.viewFilterApplied.parentFilter)\n  let tempChildFilterIds = useSelector(state => state.viewRegistry.viewFilterApplied.childFilter)\n  let stateAddedProducts = useSelector(state => state.myRegistry.addedProducts)\n  const stateCategoriesInfo = useSelector(state => state.myRegistry.checkList)\n  const stateGuestViewRegistry = useSelector(state => state.viewRegistry.guestViewRegistry)\n  let stateFilterCategories = useSelector(state => state.viewRegistry.filterCategory)\n  let filterCountState = useSelector(state => state.myRegistry.filterCount)\n  let [filterCategoryLimit, setFilterCategoryLimit] = useState([])\n\n  // Constant variables for filters\n  const AVAILABLE = \"available\"\n  const RESERVED = \"reserved\"\n  const PURCHASED = \"purchased\"\n  const PRICE_1 = \"price-1\"\n  const PRICE_2 = \"price-2\"\n  const PRICE_3 = \"price-3\"\n  const MONICA_AND_ANDY = \"monicaandandy\"\n  const ELSEWHERE = \"elsewhere\"\n\n  const getLimitOfFliter = (parentId) => {\n    let limit = null\n    const filterCategory = [...filterCategoryLimit]\n    for (let category of filterCategory) {\n      if (parentId === category.id && category.limit) {\n        limit = category.limit\n      }\n    }\n    return limit\n  }\n\n  // Updating product count in filter categories\n  const updateFilterList = (addedProducts) => {\n\n    let newFilterList = [\n      {\n        id: \"categories\",\n        display: FILTERS.CATEGORIES_DISPLAY,\n        limit: getLimitOfFliter(\"categories\") ? getLimitOfFliter(\"categories\") : 6,\n        child: [...stateCategoriesInfo].filter(category => {\n          let id = category.category.id\n          let count = filterCountState.categoryData[id]\n          if (count > 0) {\n            return true\n          }\n        }).map(category => {\n          let newCategory = { ...category }\n          let id = category.category.id\n          newCategory.id = category.category.id\n          newCategory['display'] = newCategory.categoryName\n          newCategory['count'] = filterCountState.categoryData[id]\n          return newCategory\n        })\n      },\n      {\n        id: \"price\",\n        display: FILTERS.PRICE_DISPLAY,\n        child: [\n          {\n            id: PRICE_1,\n            display: FILTERS.PRICE_DISPLAY_1,\n            count: filterCountState.registryItemsAnalysisCount.under50\n          },\n          {\n            id: PRICE_2,\n            display: FILTERS.PRICE_DISPLAY_2,\n            count: filterCountState.registryItemsAnalysisCount.between50100\n          },\n          {\n            id: PRICE_3,\n            display: FILTERS.PRICE_DISPLAY_3,\n            count: filterCountState.registryItemsAnalysisCount.moreThan100\n          }\n        ]\n      },\n      {\n        id: \"store\",\n        display: FILTERS.STORE_DISPLAY,\n        child: [\n          {\n            id: MONICA_AND_ANDY,\n            display: FILTERS.MONICA_AND_ANDY_DISPLAY,\n            count: filterCountState.registryItemsAnalysisCount.maStoreItems\n          },\n          {\n            id: ELSEWHERE,\n            display: FILTERS.ELSEWHERE_DISPLAY,\n            count: filterCountState.registryItemsAnalysisCount.otherStoreItems\n          },\n        ]\n      },\n\n    ]\n    if (!stateGuestViewRegistry) {\n      const giftStatus = {\n        id: \"giftStatus\",\n        display: \"Gift Status\",\n        child: [\n          {\n            id: AVAILABLE,\n            display: FILTERS.AVAILABLE_DISPLAY,\n            count: filterCountState.registryItemsAnalysisCount.totalAvailable\n          },\n          {\n            id: RESERVED,\n            display: FILTERS.RESERVED_DISPLAY,\n            count: filterCountState.registryItemsAnalysisCount.totalReserved\n          },\n          {\n            id: PURCHASED,\n            display: FILTERS.PURCHASED_DISPLAY,\n            count: filterCountState.registryItemsAnalysisCount.totalPurchased\n          }\n        ]\n      }\n      newFilterList.splice(0, 0, giftStatus)\n    }\n    dispatch(setViewFilterCategory(newFilterList))\n    return newFilterList\n  }\n\n  useEffect(() => {\n    if (tempChildFilterIds.length === 0) {\n      updateFilterList(stateAddedProducts)\n    }\n  }, [stateAddedProducts, stateCategoriesInfo])\n\n\n  // Change event handlers\n\n  // TDOD: Add this if needed\n  // const parentChangeHandler = (parent) => {\n  //   dispatch(setParentViewFilter(parent.id))\n  //   if (parent.child) {\n  //     dispatch(setChildViewFilter(parent.child.map(child => child.id)))\n  //   } else {\n  //     dispatch(setChildViewFilter([]))\n  //   }\n  // }\n\n  const childChangeHandler = async (childId, parentId) => {\n\n    if (parentId !== tempParentFilterId) {\n      if (tempChildFilterIds.length > 0) {\n        await dispatch(setChildViewFilter([]))\n      }\n    }\n\n    const childIndex = tempChildFilterIds.indexOf(childId)\n    let childFilter = []\n    if (childIndex === -1) {\n      childFilter = [...tempChildFilterIds, childId]\n      await dispatch(setChildViewFilter([...tempChildFilterIds, childId]))\n    } else {\n      let newChildArray = [...tempChildFilterIds]\n      newChildArray.splice(childIndex, 1)\n      childFilter = [...newChildArray]\n      await dispatch(setChildViewFilter(newChildArray))\n    }\n\t\tawait props.setFilterhandler(childFilter)\n  }\n\n  const clearClickHandler = async () => {\n    await dispatch(clearViewFilter())\n\t\tawait props.setFilterhandler([])\n  }\n\n  const changeParentLimitHandler = (parentFilterID) => {\n    let limitLength = null\n    let filterCategory = [...stateFilterCategories].map(parentFilter => {\n      if (parentFilter.id === parentFilterID) {\n        parentFilter.limit = parentFilter.child.length\n        limitLength = parentFilter.child.length\n      }\n      return parentFilter\n    })\n    dispatch(setViewFilterCategory(filterCategory))\n\n    let isFound = false\n    let newFilterCateoryLimit = [...filterCategoryLimit].map(categorylimit => {\n      if (categorylimit.id === parentFilterID) {\n        categorylimit.limit = limitLength\n        isFound = true\n        return categorylimit\n      }\n      return categorylimit\n    })\n\n    if (!isFound) {\n      newFilterCateoryLimit.push({ 'id': parentFilterID, 'limit': limitLength })\n    }\n    setFilterCategoryLimit(newFilterCateoryLimit)\n  }\n\n  return (\n    <div className=\"view-filter\">\n      <div className=\"view-filter-heading pb-1 d-flex align-items-baseline\">\n        <h4 className=\"font-weight-bold\">Filters</h4>\n        {tempChildFilterIds.length !== 0 ?\n          <a tabindex='0' className=\"filter-clear-all text-sm font-medium ml-auto\" onClick={() => clearClickHandler()}>Clear all</a> : null\n        }\n      </div>\n      <div className=\"d-flex flex-column\">\n        {[...stateFilterCategories].map(parentFilter => (\n          <div className=\"filter-item\" key={\"filter-\" + parentFilter.id}>\n            {/* Parent filter */}\n            <div className=\"text-body filter-title pt-5 d-flex\">{parentFilter.display}</div>\n\n            {/* Child filter */}\n            {parentFilter.child ? (\n              <div className=\"d-flex flex-column mt-2\" key={\"child-filter-\" + parentFilter.id}>\n                <div className=\"mt-3 fliter-checkbox-section\">\n                  {parentFilter.child.map((childFilter, index) => (\n                    childFilter.count > 0 ?\n                      index < (parentFilter.limit ? parentFilter.limit : parentFilter.child.length) ?\n                        <label class=\"view-fliter-checkbox d-flex align-items-center mb-4\" key={childFilter.id}>\n                          <span class=\"checkbox__input mr-2\">\n                            <input type=\"checkbox\"\n                              name={childFilter.display}\n                              value={childFilter.display}\n                              checked={tempChildFilterIds.includes(childFilter.id) ? \"checked\" : \"\"}\n                              onChange={() => childChangeHandler(childFilter.id, parentFilter.id)} />\n                            <span class=\"checkbox__control d-flex justify-content-center align-items-center\">\n                              <i class=\"icon-check\"></i>\n                            </span>\n                          </span>\n                          <p class=\"radio__label text-sm\"><div>{childFilter.display} {childFilter.count > 0 ? <>({childFilter.count})</> : null}</div></p>\n                        </label>\n                        : null\n                      : null\n\n                  ))}\n                  {(parentFilter.limit && (parentFilter.limit !== parentFilter.child.length) && (parentFilter.child.length - parentFilter.limit) > 0) ?\n                    <div className=\"filter-clear-all text-sm font-medium ml-4 pb-3\" onClick={() => changeParentLimitHandler(parentFilter.id)}>Show {parentFilter.child.length - parentFilter.limit} more</div>\n                    : null\n                  }\n                </div>\n              </div>\n            )\n              : null}\n          </div>\n        ))}\n      </div>\n    </div>\n  )\n}\n\nexport default ViewFilter;\n","import React, { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport { setAlreadyBoughtProductInfo } from 'modules/guest-view/GuestViewAction';\nimport ProductDetailsModel from '../product-details-model/ProductDetailsModel';\nimport Counter from \"../counter/Counter\";\nimport { store } from \"store/Store\";\nimport './AlreadyBoughtProduct.scss';\nimport { LOCAL_STORAGE_GUEST_GIFT_BUY_KEY } from 'utils/constants';\n\nconst AlreadyBoughtProduct = (props) => {\n\n  const dispatch = useDispatch();\n  const stateRegistryInfo = useSelector(state => state.guestView.info)\n  const productInfo = useSelector(state => state.guestView.alreadyBoughtProduct)\n  const quantity = useSelector(state => state.guestView.alreadyBoughtProduct.quantity)\n  const name = useSelector(state => state.guestView.alreadyBoughtProduct.name)\n  const email = useSelector(state => state.guestView.alreadyBoughtProduct.email)\n  const orderNumber = useSelector(state => state.guestView.alreadyBoughtProduct.orderNumber)\n  const storeName = useSelector(state => state.guestView.alreadyBoughtProduct.storeName)\n  const giftMessage = useSelector(state => state.guestView.alreadyBoughtProduct.giftMessage)\n\n  useEffect(() => {\n    let jsonVisitedItems = JSON.parse(localStorage.getItem(LOCAL_STORAGE_GUEST_GIFT_BUY_KEY))\n    // Setting default value for email and quantity\n    if (jsonVisitedItems) {\n      for (let item of jsonVisitedItems) {\n        if (Number(item.rId) === Number(stateRegistryInfo.id)) {\n          if (Number(item.pId) === Number(props.data.id)) {\n            setInfo(item.email, item.quantity, props.data.item.store.storeName)\n          }\n        }\n      }\n    }\n  }, [])\n\n  const setInfo = async (email, quantity, storeName) => {\n    let prodInfo = { ...productInfo };\n    prodInfo.email = email;\n    prodInfo.storeName = storeName;\n    prodInfo.quantity = quantity;\n    await dispatch(setAlreadyBoughtProductInfo(prodInfo));\n  }\n\n  const setQuantity = async (quantity) => {\n    let prodInfo = { ...productInfo };\n    prodInfo.quantity = quantity;\n    dispatch(setAlreadyBoughtProductInfo(prodInfo));\n  }\n\n  const incrementQuantity = () => {\n    if (quantity < props.data.quantityStatus.still_needed) {\n      setQuantity(quantity + 1)\n    }\n  }\n\n  const decrementQuantity = () => {\n    if (quantity - 1 > 0) {\n      setQuantity(quantity - 1)\n    }\n  }\n\n  const nameChangeHandler = (ev) => {\n    ev.persist();\n    let prodInfo = { ...productInfo };\n    props.onFocusHandler('name')\n    prodInfo.name = ev.target.value;\n    dispatch(setAlreadyBoughtProductInfo(prodInfo));\n  }\n\n\n  const emailChangeHandler = (ev) => {\n    ev.persist();\n    let prodInfo = { ...productInfo };\n    props.onFocusHandler('email')\n    prodInfo.email = ev.target.value;\n    dispatch(setAlreadyBoughtProductInfo(prodInfo));\n  }\n\n  const storeNameChangeHandler = (ev) => {\n    ev.persist();\n    let prodInfo = { ...productInfo };\n    props.onFocusHandler('storeName')\n    prodInfo.storeName = ev.target.value;\n    dispatch(setAlreadyBoughtProductInfo(prodInfo));\n  }\n\n  const orderNumberChangeHandler = (ev) => {\n    ev.persist();\n    let prodInfo = { ...productInfo };\n    prodInfo.orderNumber = ev.target.value;\n    dispatch(setAlreadyBoughtProductInfo(prodInfo));\n  }\n\n  const giftMessageChangeHandler = (ev) => {\n    ev.persist();\n    let prodInfo = { ...productInfo };\n    prodInfo.giftMessage = ev.target.value;\n    dispatch(setAlreadyBoughtProductInfo(prodInfo));\n  }\n\n  return (\n    <div className=\"row add-gift-another-store\">\n      <div className=\"col\">\n        <div className=\"row pb-2\">\n          <div className=\"col-12 col-md-5 py-4 add-gift-image-select\">\n            <div className=\"mr-3\">\n              <ProductDetailsModel data={props.data} />\n            </div>\n          </div>\n          {/* // I Bought This Already Model Body */}\n          <div className=\"col-12 col-md-7 mt-4\">\n            <div className=\"ml-3\">\n              <div className=\"row col\">\n                <div className=\"col\">\n                  <p className=\"font-body font-medium\">Great! Lets update their registry.</p>\n                  <p className=\"text-sm mt-1\">This information will help {stateRegistryInfo.user.firstName} {stateRegistryInfo.user.partnerUser ? 'and ' + stateRegistryInfo.user.partnerUser.firstName : ''} keep track of all their gifts.</p>\n                </div>\n              </div>\n              <div className=\"row col mt-4\">\n                <div className=\"col m-a-input-container\">\n                  <p className=\"text-sm font-medium add-gift-store-label guest-view-required\">Name</p>\n                  <input\n                    className={[\"w-100 mt-1 mb-0 px-2 py-1\", props.fieldErrors.name ? \"already-bought-input-error\" : \"\"].join(\" \")}\n                    type='text'\n                    placeholder='John Doe'\n                    value={name}\n                    onChange={(ev) => nameChangeHandler(ev)}\n                  />\n                  {props.fieldErrors.name ?\n                    <span\n                      className=\"text-sm already-bought-input-error-text\">{props.fieldErrors.name}</span>\n                    : null}\n                </div>\n              </div>\n              <div className=\"row col mt-4\">\n                <div className=\"col m-a-input-container\">\n                  <p className=\"text-sm font-medium add-gift-store-label guest-view-required\">Email Address</p>\n                  <input\n                    className={[\"w-100 mt-1 mb-0 px-2 py-1\", props.fieldErrors.email ? \"already-bought-input-error\" : \"\"].join(\" \")}\n                    type='text'\n                    placeholder='johndoe@email.com'\n                    value={email}\n                    onChange={(ev) => emailChangeHandler(ev)}\n                  />\n                  {props.fieldErrors.email ?\n                    <span\n                      className=\"text-sm already-bought-input-error-text\">{props.fieldErrors.email}</span>\n                    : null}\n                </div>\n              </div>\n              <div className=\"row col mt-5\">\n                <div className=\"col m-a-input-container\">\n                  <p className=\"text-sm font-medium add-gift-store-label\">Quantity</p>\n                  <Counter\n                    className=\"mt-2\"\n                    counter={quantity}\n                    incrementHandler={incrementQuantity}\n                    decrementHandler={decrementQuantity}\n                  />\n                </div>\n              </div>\n              <div className=\"row col mt-4\">\n                <div className=\"col m-a-input-container\">\n                  <p className=\"text-sm font-medium add-gift-store-label\">Store Name</p>\n                  <input\n                    className={[\"w-100 mt-1 mb-0 px-2 py-1\", props.fieldErrors.storeName ? \"already-bought-input-error\" : \"\"].join(\" \")}\n                    type='text'\n                    placeholder='Eg. Target'\n                    value={storeName}\n                    onChange={(ev) => storeNameChangeHandler(ev)}\n                  />\n                  {props.fieldErrors.storeName ?\n                    <span\n                      className=\"text-sm already-bought-input-error-text\">{props.fieldErrors.storeName}</span>\n                    : null}\n                </div>\n                <div className=\"col m-a-input-container ml-3\">\n                  <p className=\"text-sm font-medium add-gift-store-label\">Order Number</p>\n                  <input\n                    className=\"w-100 mt-1 mb-0 px-2 py-1\"\n                    type='text'\n                    placeholder='0012345'\n                    value={orderNumber}\n                    onChange={(ev) => orderNumberChangeHandler(ev)}\n                  />\n                </div>\n              </div>\n              <div className=\"row col mt-4\">\n                <div className=\"col m-a-input-container\">\n                  <p className=\"text-sm font-medium add-gift-store-label\">Gift Message</p>\n                  <textarea className=\"w-100 mt-1 text-body p-1 m-a-resize-textarea mb-2\"\n                    rows=\"2\"\n                    placeholder=\"Write a message for gift receiver\"\n                    value={giftMessage}\n                    onChange={(ev) => giftMessageChangeHandler(ev)}\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default AlreadyBoughtProduct;","import React, { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport { setCashContributedAlreadyInfo } from 'modules/guest-view/GuestViewAction';\nimport ProductDetailsModel from '../product-details-model/ProductDetailsModel';\nimport Counter from \"../counter/Counter\";\nimport { store } from \"store/Store\";\n// import './AlreadyBoughtProduct.scss';\nimport { LOCAL_STORAGE_GUEST_GIFT_BUY_KEY } from 'utils/constants';\n\nconst CashContributedAlready = (props) => {\n\n  const dispatch = useDispatch();\n  const stateRegistryInfo = useSelector(state => state.guestView.info)\n  const productInfo = useSelector(state => state.guestView.cashContributedAlready)\n  const amount = useSelector(state => state.guestView.cashContributedAlready.amount)\n  const name = useSelector(state => state.guestView.cashContributedAlready.name)\n  const email = useSelector(state => state.guestView.cashContributedAlready.email)\n  const giftMessage = useSelector(state => state.guestView.cashContributedAlready.giftMessage)\n\n  const nameChangeHandler = (ev) => {\n    ev.persist();\n    let prodInfo = { ...productInfo };\n    props.onFocusHandler('name')\n    prodInfo.name = ev.target.value;\n    dispatch(setCashContributedAlreadyInfo(prodInfo));\n  }\n\n  const emailChangeHandler = (ev) => {\n    ev.persist();\n    let prodInfo = { ...productInfo };\n    props.onFocusHandler('email')\n    prodInfo.email = ev.target.value;\n    dispatch(setCashContributedAlreadyInfo(prodInfo));\n  }\n\n  const amountChangeHandler = (ev) => {\n    ev.persist();\n    let prodInfo = { ...productInfo };\n    props.onFocusHandler('amount')\n    if (ev.target.value.length > 0) {\n\t\t\tconst newPrice = Number(ev.target.value);\n\t\t\tconst hasDecimal = (ev.target.value.split('.').length === 2 ? ev.target.value.split('.')[1].length <= 2 : true)\n\t\t\tif ((newPrice >= 0) && hasDecimal) {\n        prodInfo.amount = ev.target.value;\n\t\t\t}\n\t\t} else {\n      prodInfo.amount = '';\n\t\t}\n    dispatch(setCashContributedAlreadyInfo(prodInfo));\n  }\n\n  const giftMessageChangeHandler = (ev) => {\n    ev.persist();\n    let prodInfo = { ...productInfo };\n    prodInfo.giftMessage = ev.target.value;\n    dispatch(setCashContributedAlreadyInfo(prodInfo));\n  }\n\n  return (\n    <div className=\"row add-gift-another-store\">\n      <div className=\"col\">\n        <div className=\"row pb-2\">\n          <div className=\"col-12 col-md-5 py-4 add-gift-image-select\">\n            <div className=\"mr-3\">\n              <ProductDetailsModel data={props.data} />\n            </div>\n          </div>\n          {/* // I Bought This Already Model Body */}\n          <div className=\"col-12 col-md-7 mt-4\">\n            <div className=\"ml-3\">\n              <div className=\"row col\">\n                <div className=\"col\">\n                  <p className=\"font-body font-medium\">Great, lets update their registry.</p>\n                  <p className=\"text-sm mt-1\">This info will help {stateRegistryInfo.user.firstName} {stateRegistryInfo.user.partnerUser ? 'and' + stateRegistryInfo.user.partnerUser.firstName : ''} keep track of all their gifts.</p>\n                </div>\n              </div>\n              <div className=\"row col mt-4\">\n                <div className=\"col m-a-input-container\">\n                  <p className=\"text-sm font-medium add-gift-store-label guest-view-required\">Name</p>\n                  <input\n                    className={[\"w-100 mt-1 px-2 mb-0 py-1\", props.fieldErrors.name ? \"already-bought-input-error\" : \"\"].join(\" \")}\n                    type='text'\n                    placeholder='John Doe'\n                    value={name}\n                    onChange={(ev) => nameChangeHandler(ev)}\n                  />\n                  {props.fieldErrors.name ?\n                    <span\n                      className=\"text-sm already-bought-input-error-text\">{props.fieldErrors.name}</span>\n                    : null}\n                </div>\n              </div>\n              <div className=\"row col mt-4\">\n                <div className=\"col m-a-input-container\">\n                  <p className=\"text-sm font-medium add-gift-store-label guest-view-required\">Email Address</p>\n                  <input\n                    className={[\"w-100 mt-1 px-2 mb-0 py-1\", props.fieldErrors.email ? \"already-bought-input-error\" : \"\"].join(\" \")}\n                    type='text'\n                    placeholder='johndoe@email.com'\n                    value={email}\n                    onChange={(ev) => emailChangeHandler(ev)}\n                  />\n                  {props.fieldErrors.email ?\n                    <span\n                      className=\"text-sm already-bought-input-error-text\">{props.fieldErrors.email}</span>\n                    : null}\n                </div>\n              </div>\n              <div className=\"row col mt-4\">\n                <div className=\"col m-a-input-container\">\n                  <p className=\"text-sm font-medium add-gift-store-label guest-view-required\">Amount</p>\n                  <div className=\"price-input mt-1\">\n                    <input\n                      type=\"text\"\n                      className={[\"w-100 pl-2 pr-1 py-1 mb-0 text-body pl-5\", props.fieldErrors.amount ? \"already-bought-input-error\" : \"\"].join(\" \")}\n                      value={amount}\n                      onChange={(ev) => amountChangeHandler(ev)}\n                    />\n                  </div>\n                  {props.fieldErrors.amount ?\n                    <span\n                      className=\"text-sm already-bought-input-error-text\">{props.fieldErrors.amount}</span>\n                    : null}\n                  {/*<span className=\"price-input text-body\">$</span>*/}\n                </div>\n              </div>\n              <div className=\"row col mt-4\">\n                <div className=\"col m-a-input-container\">\n                  <p className=\"text-sm font-medium add-gift-store-label\">Gift Message</p>\n                  <textarea className=\"w-100 mt-1 mb-0 text-body p-1\"\n                    rows=\"2\"\n                    placeholder=\"Write a message for gift receiver\"\n                    value={giftMessage}\n                    onChange={(ev) => giftMessageChangeHandler(ev)}\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default CashContributedAlready;","import React, { useState } from 'react';\nimport \"./GiveMAGiftModel.scss\";\nimport Button from '../button-component/ButtonComponent';\nimport Modal from \"../modal-component/ModalComponent\";\nimport Counter from \"../counter/Counter\";\nimport ProductDetailsModel from '../product-details-model/ProductDetailsModel'\nimport { connect } from \"react-redux\";\nimport AlreadyBoughtProduct from \"modules/commons/components/already-bought-product/AlreadyBoughtProduct\";\nimport CashContributedAlready from \"modules/commons/components/cash-contributed-already/CashContributedAlready\";\nimport { graphQL } from \"api/axios\";\nimport { MARK_AS_PURCHASED_BY_GUEST, GIVE_GROUP_GIFT_GUEST, CASH_FUND_GIFT_GUEST, CASH_AND_LEAVE, CASH_FUND_CONTRIBUTION_GUEST } from \"api/mutations\";\nimport { toast } from \"react-toastify\";\nimport { withRouter } from 'react-router-dom';\nimport { clearViewGuestPaginationInfo, setGuestViewProducts } from \"modules/guest-view/GuestViewAction\";\nimport {addProductToCart, formatPrice} from \"utils/commonFunction\";\nimport { M_A_STORE_NAME } from 'utils/constants';\nimport { setLoader } from \"modules/registry/RegistryActions\";\nimport {EMAIL_RE} from \"utils/constants\";\n\nclass GiveMAGiftModel extends React.Component {\n\t// Variable declarations\n\tstate = {\n\t\tupdateModal: false,\n\t\tmodalTitle: '',\n\t\tquantity: 1,\n\t\tisBoughtThisAlready: false,\n\t\tisContributedAlready: false,\n\t\tname: null,\n\t\temail: null,\n\t\tstoreName: null,\n\t\torderNumber: null,\n\t\tgiftMessage: null,\n\t\tamount: \"0.00\",\n\t\terrors: {}\n\t}\n\n\tmodalTitleContent = \"\"\n\n\tcomponentDidMount = () => {\n\t\tthis.setModalData()\n\t}\n\n\tincrementQuantity = () => {\n\t\tif (this.state.quantity < this.props.data.quantityStatus.still_needed)\n\t\t\tthis.setState(() => ({\n\t\t\t\tquantity: this.state.quantity + 1\n\t\t\t}))\n\t}\n\n\tdecrementQuantity = () => {\n\t\tif (this.state.quantity > 1) {\n\t\t\tthis.setState(() => ({\n\t\t\t\tquantity: this.state.quantity - 1\n\t\t\t}))\n\t\t}\n\t}\n\n\tiBoughtThisAlready = () => {\n\t\tthis.setState(() => ({\n\t\t\tisBoughtThisAlready: true,\n\t\t\tmodalTitle: 'I bought this already',\n\t\t}))\n\t}\n\n\tisContributedAlready = () => {\n\t\tthis.setState(() => ({\n\t\t\tisContributedAlready: true,\n\t\t\tmodalTitle: 'I contributed already',\n\t\t\terrors: {}\n\t\t}))\n\t}\n\n\tnameChangeHandler = (ev) => {\n\t\tev.persist();\n\t\tthis.setState({\n\t\t\tname: ev.target.value\n\t\t})\n\t}\n\n\temailChangeHandler = (ev) => {\n\t\tev.persist();\n\t\tthis.setState({\n\t\t\temail: ev.target.value\n\t\t})\n\t}\n\n\tstoreNameChangeHandler = (ev) => {\n\t\tev.persist();\n\t\tthis.setState({\n\t\t\tstoreName: ev.target.value\n\t\t})\n\t}\n\n\torderNumberChangeHandler = (ev) => {\n\t\tev.persist();\n\t\tthis.setState({\n\t\t\torderNumber: ev.target.value\n\t\t})\n\t}\n\n\tgiftMessageChangeHandler = (ev) => {\n\t\tev.persist();\n\t\tthis.setState({\n\t\t\tgiftMessage: ev.target.value\n\t\t})\n\t}\n\n\tamountChangeHandler = (ev) => {\n\t\tthis.onFocusCashFundHandler('amount')\n\t\tif (ev.target.value.length > 0) {\n\t\t\tconst newPrice = Number(ev.target.value);\n\t\t\tconst hasDecimal = (ev.target.value.split('.').length === 2 ? ev.target.value.split('.')[1].length <= 2 : true)\n\t\t\tif ((newPrice >= 0) && hasDecimal) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tamount: ev.target.value\n\t\t\t\t})\n\t\t\t}\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\tamount: ''\n\t\t\t})\n\t\t}\n\t}\n\n\tvalidBoughtThisAlreadyData = () => {\n\t\tlet valid = true\n\t\tlet errors = {}\n\t\t// validate fields\n\t\tif (this.props.productBoughtAlreadyInfo.name.length <= 0) {\n\t\t\terrors['name'] = \"Name is required field\"\n\t\t\tvalid = false\n\t\t}\n\n\t\tif (this.props.productBoughtAlreadyInfo.email.length <= 0) {\n\t\t\terrors['email'] = \"Email address is required field\"\n\t\t\tvalid = false\n\t\t} else {\n\t\t\tif (!this.props.productBoughtAlreadyInfo.email.match(EMAIL_RE)) {\n\t\t\t\terrors['email'] = \"Invalid Email address\"\n\t\t\t\tvalid = false\n\t\t\t}\n\t\t}\n\n\t\tthis.setState({\n\t\t\terrors: errors\n\t\t})\n\n\t\treturn valid\n\t}\n\n\tonFocusBoughtThisAlreadyHandler = (fieldName) => {\n\t\tlet errors = { ...this.state.errors }\n\t\t// Remove the errors while typing\n\t\tif (this.state.errors.email && fieldName === 'email') {\n\t\t\tdelete errors.email\n\t\t}\n\t\tif (this.state.errors.name && fieldName === 'name') {\n\t\t\tdelete errors.name\n\t\t}\n\t\tif (this.state.errors.storeName && fieldName === 'storeName') {\n\t\t\tdelete errors.storeName\n\t\t}\n\t\tthis.setState({\n\t\t\terrors: errors\n\t\t})\n\t}\n\n\tvalidCashContributedAlreadyData = () => {\n\t\tlet valid = true\n\t\tlet errors = {}\n\t\t// validate fields\n\t\tif (this.props.cashContributedAlreadyInfo.name.length <= 0) {\n\t\t\terrors['name'] = \"Name is required field\"\n\t\t\tvalid = false\n\t\t}\n\n\t\tif (this.props.cashContributedAlreadyInfo.email.length <= 0) {\n\t\t\terrors['email'] = \"Email address is required field\"\n\t\t\tvalid = false\n\t\t} else {\n\t\t\tif (!this.props.cashContributedAlreadyInfo.email.match(EMAIL_RE)) {\n\t\t\t\terrors['email'] = \"Invalid Email address\"\n\t\t\t\tvalid = false\n\t\t\t}\n\t\t}\n\n\t\tif (Number(this.props.cashContributedAlreadyInfo.amount) === 0 || this.props.cashContributedAlreadyInfo.amount === '') {\n\t\t\terrors['amount'] = \"Amount can't be 0\"\n\t\t\tvalid = false\n\t\t}\n\t\telse if (Number(this.props.cashContributedAlreadyInfo.amount) > this.props.data.item.price) {\n\t\t\terrors['amount'] = \"Amount can't be greater than required amount\"\n\t\t\tvalid = false\n\t\t}\n\n\t\tthis.setState({\n\t\t\terrors: errors\n\t\t})\n\n\t\treturn valid\n\t}\n\n\tonFocusCashContributedAlreadyHandler = (fieldName) => {\n\t\tlet errors = { ...this.state.errors }\n\t\t// Remove the errors while typing\n\t\tif (this.state.errors.email && fieldName === 'email') {\n\t\t\tdelete errors.email\n\t\t}\n\t\tif (this.state.errors.name && fieldName === 'name') {\n\t\t\tdelete errors.name\n\t\t}\n\t\tif (this.state.errors.amount && fieldName === 'amount') {\n\t\t\tdelete errors.amount\n\t\t}\n\t\tthis.setState({\n\t\t\terrors: errors\n\t\t})\n\t}\n\n\tvalidCashFundData = () => {\n\t\tlet valid = true\n\t\tlet errors = {}\n\t\t// validate fields\n\t\tif (Number(this.state.amount) === 0) {\n\t\t\terrors['amount'] = \"Amount can't be 0\"\n\t\t\tvalid = false\n\t\t}\n\t\telse if (Number(this.state.amount) > (this.props.data.item.price * this.props.data.quantityStatus.still_needed)) {\n\t\t\terrors['amount'] = \"Amount can't be greater than required amount\"\n\t\t\tvalid = false\n\t\t}\n\n\t\tthis.setState({\n\t\t\terrors: errors\n\t\t})\n\n\t\treturn valid\n\t}\n\n\tonFocusCashFundHandler = (fieldName) => {\n\t\tlet errors = { ...this.state.errors }\n\t\t// Remove the errors while typing\n\t\tif (this.state.errors.amount && fieldName === 'amount') {\n\t\t\tdelete errors.amount\n\t\t}\n\t\tthis.setState({\n\t\t\terrors: errors\n\t\t})\n\t}\n\n\tmodalCloseHandler = () => {\n\t\tthis.setState({\n\t\t\terrors: {}\n\t\t})\n\t\tthis.props.close()\n\t}\n\n\taddProductToCartHandler = (quantity, id) => {\n\t\t// For Ref\n\t\t// ('/cart/add.js', {\n\t\t//   items: [\n\t\t//     {\n\t\t//       quantity: 1,\n\t\t//       id: 31643811020880,\n\t\t//     }\n\t\t//   ]\n\t\t// });\n\t\tlet data = {\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\tquantity: quantity,\n\t\t\t\t\t// id: id ? Number(id) : 4777708191824,\n\t\t\t\t\tid: id\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\n\t\t// This function return a promise with object that container response status\n\t\taddProductToCart(data).then(res => {\n\t\t\tif (res && res.status !== 200) {\n\t\t\t\ttoast.error(res.description ? res.description : \"Some error occurred while adding product to cart\");\n\t\t\t} else if (res && res.status === 200) {\n\t\t\t\t// toast.success(\"Product added to cart successfully.\")\n\t\t\t\tthis.modalCloseHandler()\n\t\t\t\t// Toggle MA store cart while addting product in cart\n\t\t\t\tlet cart = document.querySelector(\".open-cart-drawer\")\n\t\t\t\tif (cart) {\n\t\t\t\t\tcart.click();\n\t\t\t\t}\n\t\t\t\t// toast.success(\"Product added to cart successfully.\")\n\t\t\t\tthis.props.close()\n\t\t\t} else {\n\t\t\t\tif (res && res.status !== 200) {\n\t\t\t\t\ttoast.error(res.description ? res.description : \"Some error occurred while adding product to cart\");\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\ttoast.error(\"Some unexpected error has occurred\");\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tsubmitDataHandler = async () => {\n\t\tthis.props.dispatch(setLoader(true))\n\n\t\t// For Bought this gift already\n\t\tif (this.state.isBoughtThisAlready) {\n\t\t\t// Vaidating data\n\t\t\tif (!this.validBoughtThisAlreadyData()) {\n\t\t\t\tthis.props.dispatch(setLoader(false))\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\tlet data = {\n\t\t\t\tquery: MARK_AS_PURCHASED_BY_GUEST,\n\t\t\t\tvariables: {\n\t\t\t\t\tregistryUrlSlug: this.props.stateRegistryInfo.urlSlug,\n\t\t\t\t\tregistryItemId: this.props.data.id,\n\t\t\t\t\tisPurchased: true,\n\t\t\t\t\tstoreName: this.props.productBoughtAlreadyInfo.storeName,\n\t\t\t\t\tpurchasedQuantity: this.props.productBoughtAlreadyInfo.quantity,\n\t\t\t\t\t// contributionAmount: null,\n\t\t\t\t\tgiftMessage: this.props.productBoughtAlreadyInfo.giftMessage,\n\t\t\t\t\torderNumber: this.props.productBoughtAlreadyInfo.orderNumber,\n\t\t\t\t\tname: this.props.productBoughtAlreadyInfo.name,\n\t\t\t\t\temail: this.props.productBoughtAlreadyInfo.email\n\t\t\t\t},\n\t\t\t}\n\t\t\tawait graphQL(data).then(async res => {\n\t\t\t\tif (res.data.errors || res.data.error) {\n\t\t\t\t\t// TODO: Add toast proper toast msg\n\t\t\t\t\tconsole.log('Something went wrong-->', res.data.errors)\n\t\t\t\t\ttoast.error((\n\t\t\t\t\t\t<p>Something went wrong</p>\n\t\t\t\t\t))\n\t\t\t\t} else {\n\t\t\t\t\t// Getting Update Product\n\t\t\t\t\tawait this.props.dispatch(clearViewGuestPaginationInfo())\n\t\t\t\t\tawait this.props.updateGuestViewProduct(this.props.stateRegistryInfo.urlSlug, this.props.stateAddedProducts.length, true)\n\t\t\t\t\ttoast.success((\n\t\t\t\t\t\t<p><b>{this.props.data.title}</b> Purchased!</p>\n\t\t\t\t\t))\n\t\t\t\t\tthis.modalCloseHandler()\n\t\t\t\t}\n\t\t\t\tthis.props.dispatch(setLoader(false))\n\t\t\t}).catch(err => {\n\t\t\t\t// TODO: Add toast proper toast msg\n\t\t\t\tconsole.log('Something went wrong-->', err)\n\t\t\t\ttoast.error((\n\t\t\t\t\t<p>Something went wrong</p>\n\t\t\t\t))\n\t\t\t\tthis.props.dispatch(setLoader(false))\n\t\t\t})\n\t\t}\n\t\t// For Cash Fund Contributed Already\n\t\telse if (this.state.isContributedAlready) {\n\t\t\tif (!this.props.data.item.hideTotal && !this.validCashContributedAlreadyData()) {\n\t\t\t\tthis.props.dispatch(setLoader(false))\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\tlet data = {\n\t\t\t\tquery: CASH_FUND_CONTRIBUTION_GUEST,\n\t\t\t\tvariables: {\n\t\t\t\t\tregistryUrlSlug: this.props.stateRegistryInfo.urlSlug,\n\t\t\t\t\tregistryItemId: this.props.data.id,\n\t\t\t\t\tisPurchased: true,\n\t\t\t\t\tcontributionAmount: Number(this.props.cashContributedAlreadyInfo.amount),\n\t\t\t\t\t// contributionAmount: null,\n\t\t\t\t\tgiftMessage: this.props.cashContributedAlreadyInfo.giftMessage,\n\t\t\t\t\tname: this.props.cashContributedAlreadyInfo.name,\n\t\t\t\t\temail: this.props.cashContributedAlreadyInfo.email\n\t\t\t\t},\n\t\t\t}\n\t\t\tawait graphQL(data).then(async res => {\n\t\t\t\tif (res.data.errors || res.data.error) {\n\t\t\t\t\t// TODO: Add toast proper toast msg\n\t\t\t\t\tconsole.log('Something went wrong-->', res.data.errors)\n\t\t\t\t\ttoast.error((\n\t\t\t\t\t\t<p>Something went wrong</p>\n\t\t\t\t\t))\n\t\t\t\t} else {\n\t\t\t\t\t// Getting Update Product\n\t\t\t\t\tawait this.props.dispatch(clearViewGuestPaginationInfo())\n\t\t\t\t\tawait this.props.updateGuestViewProduct(this.props.stateRegistryInfo.urlSlug, this.props.stateAddedProducts.length, true)\n\t\t\t\t\ttoast.success((\n\t\t\t\t\t\t<p><b>${this.props.cashContributedAlreadyInfo.amount} contributed</b> successfully for {this.props.data.title}</p>\n\t\t\t\t\t))\n\t\t\t\t\tthis.modalCloseHandler()\n\t\t\t\t}\n\t\t\t\tthis.props.dispatch(setLoader(false))\n\t\t\t}).catch(err => {\n\t\t\t\t// TODO: Add toast proper toast msg\n\t\t\t\tconsole.log('Something went wrong-->', err)\n\t\t\t\tif (err.response.data.errors[0].errors.contribution_amount?.length) {\n\t\t\t\t\tlet errors = {}\n\t\t\t\t\terrors['amount'] = \"Amount can't be greater than required amount\"\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\terrors: errors\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\ttoast.error((\n\t\t\t\t\t\t<p>Something went wrong</p>\n\t\t\t\t\t))\n\t\t\t\t}\n\t\t\t\tthis.props.dispatch(setLoader(false))\n\t\t\t})\n\t\t}\n\t\t// For Group Gift\n\t\telse if (this.props.isGroupGift && !this.props.data.item.isCashFund) {\n\t\t\tif (!this.validCashFundData()) {\n\t\t\t\tthis.props.dispatch(setLoader(false))\n\t\t\t\treturn false\n\t\t\t}\n\t\t\tlet data = {\n\t\t\t\tquery: GIVE_GROUP_GIFT_GUEST,\n\t\t\t\tvariables: {\n\t\t\t\t\tregistryId: Number(this.props.stateRegistryInfo.id),\n\t\t\t\t\tregistryItemId: Number(this.props.data.id),\n\t\t\t\t\tcontributionAmount: Number(this.state.amount)\n\t\t\t\t},\n\t\t\t}\n\t\t\tawait graphQL(data).then(async res => {\n\t\t\t\tif (res.data.errors || res.data.error) {\n\t\t\t\t\t// TODO: Add toast proper toast msg\n\t\t\t\t\tconsole.log('Something went wrong-->', res.data.errors)\n\t\t\t\t\ttoast.error((\n\t\t\t\t\t\t<p>Something went wrong</p>\n\t\t\t\t\t))\n\t\t\t\t} else {\n\t\t\t\t\t// Getting Update Product\n\t\t\t\t\tawait this.props.dispatch(clearViewGuestPaginationInfo())\n\t\t\t\t\tawait this.props.updateGuestViewProduct(this.props.stateRegistryInfo.urlSlug, this.props.stateAddedProducts.length, true)\n\t\t\t\t\tthis.addProductToCartHandler(1, res.data.data.giveGroupGift.variantId)\n\t\t\t\t\ttoast.success((\n\t\t\t\t\t\t<p><b>${this.state.amount} contributed</b> successfully for {this.props.data.title}</p>\n\t\t\t\t\t))\n\t\t\t\t\t// this.modalCloseHandler()\n\t\t\t\t}\n\t\t\t\tthis.props.dispatch(setLoader(false))\n\t\t\t}).catch(err => {\n\t\t\t\t// TODO: Add toast proper toast msg\n\t\t\t\tconsole.log('Something went wrong-->', err)\n\t\t\t\tif (err.response.data.errors[0].errors.contribution_amount?.length) {\n\t\t\t\t\tlet errors = {}\n\t\t\t\t\terrors['amount'] = \"Amount can't be greater than required amount\"\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\terrors: errors\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\ttoast.error((\n\t\t\t\t\t\t<p>Something went wrong</p>\n\t\t\t\t\t))\n\t\t\t\t}\n\t\t\t\tthis.props.dispatch(setLoader(false))\n\t\t\t})\n\t\t}\n\t\t// For cash and leave\n\t\telse if (this.props.isCashAcceptedOnly) {\n\t\t\tlet data = {\n\t\t\t\tquery: CASH_AND_LEAVE,\n\t\t\t\tvariables: {\n\t\t\t\t\tregistryId: Number(this.props.stateRegistryInfo.id),\n\t\t\t\t\tregistryItemId: Number(this.props.data.id),\n\t\t\t\t\tpurchasedQuantity: this.state.quantity\n\t\t\t\t},\n\t\t\t}\n\t\t\tawait graphQL(data).then(async res => {\n\t\t\t\tif (res.data.errors || res.data.error) {\n\t\t\t\t\t// TODO: Add toast proper toast msg\n\t\t\t\t\tconsole.log('Something went wrong-->', res.data.errors)\n\t\t\t\t\ttoast.error((\n\t\t\t\t\t\t<p>Something went wrong</p>\n\t\t\t\t\t))\n\t\t\t\t} else {\n\t\t\t\t\t// Getting Update Product\n\t\t\t\t\tawait this.props.dispatch(clearViewGuestPaginationInfo())\n\t\t\t\t\tawait this.props.updateGuestViewProduct(this.props.stateRegistryInfo.urlSlug, this.props.stateAddedProducts.length, true)\n\t\t\t\t\tthis.addProductToCartHandler(this.state.quantity, res.data.data.cashInLieu.variantId)\n\t\t\t\t\ttoast.success((\n\t\t\t\t\t\t<p><b>{this.props.data.title}</b> Purchased!</p>\n\t\t\t\t\t))\n\t\t\t\t\t// this.modalCloseHandler()\n\t\t\t\t}\n\t\t\t\tthis.props.dispatch(setLoader(false))\n\t\t\t}).catch(err => {\n\t\t\t\t// TODO: Add toast proper toast msg\n\t\t\t\tconsole.log('Something went wrong-->', err)\n\t\t\t\ttoast.error((\n\t\t\t\t\t<p>Something went wrong</p>\n\t\t\t\t))\n\t\t\t\tthis.props.dispatch(setLoader(false))\n\t\t\t})\n\t\t}\n\t\t// For Cash Fund\n\t\telse if (this.props.data.item.isCashFund && this.props.isGroupGift) {\n\t\t\tif (!this.props.data.item.hideTotal && !this.validCashFundData()) {\n\t\t\t\tthis.props.dispatch(setLoader(false))\n\t\t\t\treturn false\n\t\t\t}\n\t\t\tlet data = {\n\t\t\t\tquery: CASH_FUND_GIFT_GUEST,\n\t\t\t\tvariables: {\n\t\t\t\t\tregistryId: Number(this.props.stateRegistryInfo.id),\n\t\t\t\t\tregistryItemId: Number(this.props.data.id),\n\t\t\t\t\tcontributionAmount: Number(this.state.amount)\n\t\t\t\t},\n\t\t\t}\n\t\t\tawait graphQL(data).then(async res => {\n\t\t\t\tif (res.data.errors || res.data.error) {\n\t\t\t\t\t// TODO: Add toast proper toast msg\n\t\t\t\t\tconsole.log('Something went wrong-->', res.data.errors)\n\t\t\t\t\tif (res.data.errors[0].errors.contribution_amount?.length) {\n\t\t\t\t\t\tlet errors = {}\n\t\t\t\t\t\terrors['amount'] = \"Amount can't be greater than required amount\"\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\terrors: errors\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\ttoast.error((\n\t\t\t\t\t\t\t<p>Something went wrong</p>\n\t\t\t\t\t\t))\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Getting Update Product\n\t\t\t\t\tawait this.props.dispatch(clearViewGuestPaginationInfo())\n\t\t\t\t\tawait this.props.updateGuestViewProduct(this.props.stateRegistryInfo.urlSlug, this.props.stateAddedProducts.length, true)\n\t\t\t\t\tthis.addProductToCartHandler(1, res.data.data.cashFundGift.variantId)\n\t\t\t\t\ttoast.success((\n\t\t\t\t\t\t<p><b>${this.state.amount} contributed</b> successfully for {this.props.data.title}</p>\n\t\t\t\t\t))\n\t\t\t\t\t// this.modalCloseHandler()\n\t\t\t\t}\n\t\t\t\tthis.props.dispatch(setLoader(false))\n\t\t\t}).catch(err => {\n\t\t\t\t// TODO: Add toast proper toast msg\n\t\t\t\tif (err.response.data.errors[0].errors.contribution_amount?.length) {\n\t\t\t\t\tlet errors = {}\n\t\t\t\t\terrors['amount'] = \"Amount can't be greater than required amount\"\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\terrors: errors\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\ttoast.error((\n\t\t\t\t\t\t<p>Something went wrong</p>\n\t\t\t\t\t))\n\t\t\t\t}\n\t\t\t\tthis.props.dispatch(setLoader(false))\n\t\t\t})\n\t\t}\n\t\t// If M-A product: Adding to cart\n\t\telse if (this.props.data.item.store.storeName === M_A_STORE_NAME &&\n\t\t\t!this.props.isGroupGift &&\n\t\t\t!this.props.isCashAcceptedOnly) {\n\t\t\tawait this.addProductToCartHandler(this.state.quantity, this.props.data.item.shopifyItemVariantId)\n\t\t\tthis.props.dispatch(setLoader(false))\n\t\t}\n\t}\n\n\tsetModalData = () => {\n\t\tthis.clearModalData()\n\t\tthis.setState({\n\t\t\tmodalTitle: this.props.title\n\t\t})\n\t}\n\n\tclearModalData = () => {\n\t\tthis.state.modalTitle = \"\"\n\t\tthis.modalBody = \"\"\n\t\tthis.modalTitleContent = \"\"\n\t\tthis.modalFooterButtons = \"\"\n\t}\n\n\tcontributeRestHandler = (data) => {\n\t\tlet contributeAmount = Math.round((data.item.price * data.quantityStatus.still_needed - data.quantityStatus.total_contribution_amount % data.item.price) * 100) / 100\n\t\tthis.setState({\n\t\t\tamount: contributeAmount\n\t\t})\n\t}\n\n\trender() {\n\t\t// Body for modal\n\t\tlet modalBody = (\n\t\t\t<>\n\t\t\t\t{/* Give M+A Gift Model Body */}\n\t\t\t\t{!this.state.isBoughtThisAlready && !this.state.isContributedAlready ?\n\t\t\t\t\t<div className=\"row add-gift-another-store\">\n\t\t\t\t\t\t<div className=\"col\">\n\t\t\t\t\t\t\t<div className=\"row\">\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<div className=\"col-12 col-md-5 py-4 add-gift-image-select\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"mr-3\">\n\t\t\t\t\t\t\t\t\t\t\t<ProductDetailsModel data={this.props.data} />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{!this.props.isGroupGift ?\n\t\t\t\t\t\t\t\t\t\t<div className=\"col-12 col-md-7 mt-4\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"ml-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"row col\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"col\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"font-body font-medium\">Buy this gift for {this.props.stateRegistryInfo.user.firstName} {this.props.stateRegistryInfo.user.partnerUser ? 'and ' + this.props.stateRegistryInfo.user.partnerUser.firstName : ''}</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm mt-1\">Well keep this gift available in the registry until you check out.{this.props.isCashAcceptedOnly ? \" This gift will be shipped to registrant at their convenience.\" : ''}</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"row col mt-4\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"col m-a-input-container\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm font-medium add-gift-store-label\">Quantity</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Counter\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"mt-2\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcounter={this.state.quantity}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tincrementHandler={this.incrementQuantity}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdecrementHandler={this.decrementQuantity}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t// For group gift\n\t\t\t\t\t\t\t\t\t\t<div className=\"col-12 col-md-7 mt-4\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"ml-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"row col\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"col\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"font-body font-medium\">How much do you want to contribute?</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm mt-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{this.props.stateRegistryInfo.user.firstName} {this.props.stateRegistryInfo.user.partnerUser ? 'and ' + this.props.stateRegistryInfo.user.partnerUser.firstName : ''} will be able to buy the gift themselves once they receive the funds.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t{this.props.data.isGroupGift ?\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.props.data.item.hideTotal ? null :\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"row col mt-4 give-gift-model\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"col\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm font-medium received-amount\">Received {formatPrice(Math.round((this.props.data.quantityStatus.total_contribution_amount % this.props.data.item.price) * 100) / 100)}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm total-amount\"> of {formatPrice(Math.round(this.props.data.item.price * this.props.data.quantityStatus.still_needed * 100) / 100)}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"group-gift-background\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"group-gift-progress mw-100\" style={{ width: `${((this.props.data.quantityStatus.total_contribution_amount % this.props.data.item.price) * 100) / (this.props.data.item.price * this.props.data.quantity)}%` }} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"mt-4 ml-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"row col\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"col\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"m-a-input-container mr-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm font-medium add-gift-store-label guest-view-required\">Amount</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"price-input mt-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={[\"w-100 pl-2 pr-1 py-1 mb-0 text-body pl-5\", this.state.errors.amount ? \"already-bought-input-error\" : \"\"].join(\" \")}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.amount}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(ev) => this.amountChangeHandler(ev)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{this.state.errors.amount ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-sm already-bought-input-error-text\">{this.state.errors.amount}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/*<span className=\"price-input text-body\">$</span>*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{this.props.data.item.hideTotal ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnull : <p className=\"mt-3 text-sm give-gift-text-link font-medium\" onClick={() => this.contributeRestHandler(this.props.data)}>Contribute the rest</p>}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div> :\n\t\t\t\t\t// For Cash fund\n\t\t\t\t\tthis.state.isContributedAlready ?\n\t\t\t\t\t\t<CashContributedAlready\n\t\t\t\t\t\t\tdata={this.props.data}\n\t\t\t\t\t\t\tvalidData={this.validCashContributedAlreadyData}\n\t\t\t\t\t\t\tonFocusHandler={this.onFocusCashContributedAlreadyHandler}\n\t\t\t\t\t\t\tfieldErrors={this.state.errors} />\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<AlreadyBoughtProduct\n\t\t\t\t\t\t\tdata={this.props.data}\n\t\t\t\t\t\t\tvalidBoughtThisAlreadyData={this.validBoughtThisAlreadyData}\n\t\t\t\t\t\t\tonFocusHandler={this.onFocusBoughtThisAlreadyHandler}\n\t\t\t\t\t\t\tfieldErrors={this.state.errors} />\n\t\t\t\t}\n\t\t\t</>\n\t\t)\n\n\t\t// Modal buttons\n\t\tlet modalFooterButtons = (\n\t\t\t<>\n\t\t\t\t{!this.state.isBoughtThisAlready && !this.state.isContributedAlready ?\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\tclassName=\"MA-gift-footer-btn px-3 py-1 font-medium text-body\"\n\t\t\t\t\t\tonClick={!this.props.data.item.isCashFund ? () => this.iBoughtThisAlready() : () => this.isContributedAlready()}\n\t\t\t\t\t>{!this.props.data.item.isCashFund ? \"I Bought This Already\" : \"I Contributed Already\"}</Button> : null}\n\t\t\t\t{/* For Contributed Already */}\n\t\t\t\t{!this.state.isContributedAlready ?\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\tclassName=\"MA-gift-footer-btn px-4 py-1 font-medium text-body\"\n\t\t\t\t\t\tdisabled={(this.state.isBoughtThisAlready && (this.props.productBoughtAlreadyInfo.name.length === 0 || this.props.productBoughtAlreadyInfo.email.length === 0)) || (!this.state.isBoughtThisAlready && this.props.isGroupGift && Number(this.state.amount) === 0) ? true : false}\n\t\t\t\t\t\tonClick={() => this.submitDataHandler()}\n\t\t\t\t\t>{!this.state.isBoughtThisAlready ? this.props.isGroupGift ? 'Contribute' : 'Add To Cart' : 'Save & Close'}</Button>\n\t\t\t\t\t:\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\tclassName=\"MA-gift-footer-btn px-4 py-1 font-medium text-body\"\n\t\t\t\t\t\tdisabled={(this.props.cashContributedAlreadyInfo.name.length === 0 || this.props.cashContributedAlreadyInfo.name.length === 0 || Number(this.props.cashContributedAlreadyInfo.amount) === 0) ? true : false}\n\t\t\t\t\t\tonClick={() => this.submitDataHandler()}\n\t\t\t\t\t>Save & Close</Button>\n\t\t\t\t}\n\t\t\t</>\n\t\t)\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Modal\n\t\t\t\t\tshow={this.props.show}\n\t\t\t\t\tupdateModal={this.state.updateModal}\n\t\t\t\t\ttitle={this.state.modalTitle}\n\t\t\t\t\ttitleContent={this.modalTitleContent}\n\t\t\t\t\tfooter={modalFooterButtons}\n\t\t\t\t\tnoBodyPadding={true}\n\t\t\t\t\tcloseModal={this.props.close}>\n\t\t\t\t\t{modalBody}\n\t\t\t\t</Modal>\n\t\t\t</>\n\t\t)\n\t}\n}\nconst mapStateToProps = state => {\n\treturn {\n\t\tstateRegistryInfo: state.guestView.info,\n\t\tproductBoughtAlreadyInfo: state.guestView.alreadyBoughtProduct,\n\t\tcashContributedAlreadyInfo: state.guestView.cashContributedAlready,\n\t\tstateAddedProducts: state.guestView.product\n\t}\n}\n\nexport default connect(\n\tmapStateToProps\n)(withRouter(GiveMAGiftModel));","import React, { useState } from 'react';\nimport \"./GiveGiftFromAnotherStore.scss\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from 'react-router-dom';\nimport Modal from \"../modal-component/ModalComponent\";\nimport Button from '../button-component/ButtonComponent';\nimport Counter from \"../counter/Counter\";\nimport ProductDetailsModel from '../product-details-model/ProductDetailsModel';\nimport AlreadyBoughtProduct from \"modules/commons/components/already-bought-product/AlreadyBoughtProduct\";\nimport { LOCAL_STORAGE_GUEST_GIFT_BUY_KEY } from 'utils/constants';\nimport { setGuestGiftsRedirectionInfo } from 'modules/guest-view/GuestViewAction';\nimport { MARK_AS_PURCHASED_BY_GUEST, RESERVE_REGISTRY_ITEM_GUEST, REMOVE_RESERVED_ITEM_GUEST } from \"api/mutations\";\nimport { toast } from \"react-toastify\";\nimport { graphQL } from \"api/axios\";\nimport { clearViewGuestPaginationInfo } from \"modules/guest-view/GuestViewAction\";\nimport { setLoader } from \"modules/registry/RegistryActions\";\nimport {EMAIL_RE} from \"utils/constants\";\n\nclass GiveGiftFromAnotherStore extends React.Component {\n  // Variable declarations\n  state = {\n    updateModal: false,\n    quantity: 1,\n    isBoughtThisAlready: false,\n    name: null,\n    email: '',\n    registeredEmail: '',\n    storeName: null,\n    orderNumber: null,\n    giftMessage: null,\n    currentView: 1,\n    errors: {}\n  }\n\n  componentDidMount = () => {\n    this.setModalData()\n    this.buyNowClickHandler(true)\n  }\n\n  incrementQuantity = () => {\n    if (this.state.quantity < this.props.data.quantityStatus.still_needed)\n      this.setState(() => ({\n        quantity: this.state.quantity + 1\n      }))\n  }\n\n  decrementQuantity = () => {\n    if (this.state.quantity > 1) {\n      this.setState(() => ({\n        quantity: this.state.quantity - 1\n      }))\n    }\n  }\n\n  emailChangeHandler = (ev) => {\n    ev.persist();\n    this.setState({\n      email: ev.target.value\n    })\n    let errors = { ...this.state.errors }\n\n    // Remove the errors while typing\n    if (this.state.errors.email) {\n      delete errors.email\n    }\n    this.setState({\n      errors: errors\n    })\n  }\n\n  iBoughtThisAlready = () => {\n    this.setState(() => ({\n      isBoughtThisAlready: true,\n      modalTitle: 'I bought this already',\n    }))\n  }\n\n  validEmail = () => {\n    let valid = true\n    let errors = {}\n    // validate fields\n    if (this.state.email.length <= 0) {\n      errors['email'] = \"Email address is required field\"\n      valid = false\n    } else {\n      if (!this.state.email.match(EMAIL_RE)) {\n        errors['email'] = \"Invalid Email address\"\n        valid = false\n      }\n    }\n\n    this.setState({\n      errors: errors\n    })\n\n    return valid\n  }\n\n  validBoughtThisAlreadyData = () => {\n    let valid = true\n    let errors = {}\n    // validate fields\n    if (this.props.productBoughtAlreadyInfo.name.length <= 0) {\n      errors['name'] = \"Name is required field\"\n      valid = false\n    }\n\n    if (this.props.productBoughtAlreadyInfo.email.length <= 0) {\n      errors['email'] = \"Email address is required field\"\n      valid = false\n    } else {\n      if (!this.props.productBoughtAlreadyInfo.email.match(EMAIL_RE)) {\n        errors['email'] = \"Invalid Email address\"\n        valid = false\n      }\n    }\n\n    this.setState({\n      errors: errors\n    })\n\n    return valid\n  }\n\n  onFocusBoughtThisAlreadyHandler = (fieldName) => {\n    let errors = { ...this.state.errors }\n    // Remove the errors while typing\n    if (this.state.errors.email && fieldName === 'email') {\n      delete errors.email\n    }\n    if (this.state.errors.name && fieldName === 'name') {\n      delete errors.email\n    }\n    if (this.state.errors.storeName && fieldName === 'storeName') {\n      delete errors.storeName\n    }\n    this.setState({\n      errors: errors\n    })\n  }\n\n  buyNowClickHandler = (onLoad = false) => {\n    let createNewRecord = false\n    let updateProduct = false\n    let openModal = false\n    let jsonVisitedItems = JSON.parse(localStorage.getItem(LOCAL_STORAGE_GUEST_GIFT_BUY_KEY))\n\n    if (jsonVisitedItems && jsonVisitedItems.length) {\n      for (let item of jsonVisitedItems) {\n        if (Number(item.rId) === Number(this.props.stateRegistryInfo.id)) {\n          if (Number(item.pId) === Number(this.props.data.id)) {\n            this.setState({\n              currentView: 3,\n            })\n          } else {\n            updateProduct = true;\n            createNewRecord = true;\n          }\n        } else {\n          updateProduct = true;\n          createNewRecord = true;\n        }\n      }\n    } else {\n      createNewRecord = true;\n    }\n\n    // TODO: If Reserved Based on TimeStamp\n    // if (jsonVisitedItems) {\n    //   for (let item of jsonVisitedItems) {\n\n    //     // If registry doesn't match then delete old and create new record\n    //     if (Number(item.rId) === Number(this.props.stateRegistryInfo.id)) {\n    //       if (Number(item.pId) === Number(this.props.data.id)) {\n\n    //         let productTimestamp = new Date(item.timestamp)\n    //         let currentDate = new Date()\n\n    //         // Resetting hours because only checking the dates\n    //         productTimestamp.setHours(0, 0, 0, 0)\n    //         currentDate.setHours(0, 0, 0, 0)\n\n    //         // Checking if current date is same as product time stamp\n    //         // After 1 day, this product entry will be invalid\n    //         if (currentDate - productTimestamp === 0) {\n    //           openModal = true\n    //         } else {\n    //           updateProduct = true;\n    //           createNewRecord = true;\n    //         }\n    //         break;\n    //       } else {\n    //         updateProduct = true;\n    //         createNewRecord = true;\n    //       }\n    //     } else {\n    //       createNewRecord = true;\n    //       break;\n    //     }\n    //   }\n    // } else {\n    //   createNewRecord = true;\n    // }\n\n    if (createNewRecord && !openModal && !onLoad) {\n      const newVisitedItemsData = {\n        rId: this.props.stateRegistryInfo.id,\n        pId: this.props.data.id,\n        email: this.state.email,\n        quantity: this.state.quantity,\n        timestamp: new Date()\n      }\n\n      let foundProduct = false\n      let newData = null\n      if (jsonVisitedItems) {\n        newData = jsonVisitedItems.map(item => {\n          if (Number(item.rId) === Number(this.props.stateRegistryInfo.id) && Number(item.pId) === Number(this.props.data.id)) {\n            foundProduct = true\n            return newVisitedItemsData\n          }\n          return item\n        })\n        if (!foundProduct) {\n          newData.push(newVisitedItemsData)\n        } else {\n          this.setState({\n            currentView: 3\n          })\n        }\n      }\n\n      // Updating localStorage\n      localStorage.setItem(LOCAL_STORAGE_GUEST_GIFT_BUY_KEY, JSON.stringify(updateProduct ? newData : [newVisitedItemsData]))\n\n      //Setting Redirection Store\n      this.props.dispatch(setGuestGiftsRedirectionInfo({ store: this.props.data.item?.store?.storeName }))\n\n      // Page refresh itself after 5 sec\n      setTimeout(async () => {\n        // Getting Update Product\n        await this.props.dispatch(clearViewGuestPaginationInfo())\n        await this.props.updateGuestViewProduct(this.props.stateRegistryInfo.urlSlug, this.props.stateAddedProducts.length, true)\n        this.modalCloseHandler()\n        this.props.dispatch(setGuestGiftsRedirectionInfo({}))\n      }, 5000);\n      window.open(this.props.data.item.storeItemUrl, \"_blank\")\n\n    }\n    // If User is logged in\n    if (this.props.stateUserInfo.loggedIn) {\n      for (let item of [...this.props.data.purchasedRegistryItem]) {\n        if (item.isReserved && item.guestUser.email === this.props.stateUserInfo.user.email) {\n          this.setState({\n            currentView: 3\n          })\n          break;\n        }\n      }\n    }\n  }\n\n  removeProductFromList = () => {\n    let jsonVisitedItems = JSON.parse(localStorage.getItem(LOCAL_STORAGE_GUEST_GIFT_BUY_KEY))\n    let updatedProducts = jsonVisitedItems.filter(product => product.pId !== this.props.data.id)\n    localStorage.setItem(LOCAL_STORAGE_GUEST_GIFT_BUY_KEY, JSON.stringify(updatedProducts))\n  }\n\n  modalCloseHandler = () => {\n    this.setState({\n      errors: {}\n    })\n    this.props.close()\n  }\n\n  // Remove Reserved Product then Marking product as purchased\n  removeReservedAndAddProducts = async () => {\n    let email = null\n    let jsonVisitedItems = JSON.parse(localStorage.getItem(LOCAL_STORAGE_GUEST_GIFT_BUY_KEY))\n    // getting default value for email and quantity\n    if (jsonVisitedItems) {\n      for (let item of jsonVisitedItems) {\n        if (Number(item.rId) === Number(this.props.stateRegistryInfo.id)) {\n          if (Number(item.pId) === Number(this.props.data.id)) {\n            email = item.email\n            break\n          }\n        }\n      }\n    }\n    // If User is logged in\n    if (this.props.stateUserInfo.loggedIn && !email) {\n      for (let item of [...this.props.data.purchasedRegistryItem]) {\n        if (item.guestUser.email === this.props.stateUserInfo.user.email) {\n          email = item.guestUser.email\n        }\n      }\n    }\n    let data = {\n      query: REMOVE_RESERVED_ITEM_GUEST,\n      variables: {\n        registryId: this.props.stateRegistryInfo.id,\n        registryItemId: this.props.data.id,\n        email: email ? email : this.props.productBoughtAlreadyInfo.email\n      },\n    }\n    this.props.dispatch(setLoader(true))\n    await graphQL(data).then(async res => {\n      if (res.data.errors || res.data.error) {\n        // TODO: Add toast proper toast msg\n        console.log('Something went wrong-->', res.data.errors)\n        toast.error((\n          <p>Something went wrong</p>\n        ))\n        this.props.dispatch(setLoader(false))\n      } else {\n        // Marking product as purchased\n        let data = {\n          query: MARK_AS_PURCHASED_BY_GUEST,\n          variables: {\n            registryUrlSlug: this.props.stateRegistryInfo.urlSlug,\n            registryItemId: this.props.data.id,\n            isPurchased: true,\n            storeName: this.props.productBoughtAlreadyInfo.storeName,\n            purchasedQuantity: this.props.productBoughtAlreadyInfo.quantity,\n            // contributionAmount: null,\n            giftMessage: this.props.productBoughtAlreadyInfo.giftMessage,\n            orderNumber: this.props.productBoughtAlreadyInfo.orderNumber,\n            name: this.props.productBoughtAlreadyInfo.name,\n            email: this.props.productBoughtAlreadyInfo.email\n          },\n        }\n        await graphQL(data).then(async res => {\n          if (res.data.errors || res.data.error) {\n            // TODO: Add toast proper toast msg\n            console.log('Something went wrong-->', res.data.errors)\n            toast.error((\n              <p>Something went wrong</p>\n            ))\n          } else {\n            // Getting Update Product\n            await this.props.dispatch(clearViewGuestPaginationInfo())\n            await this.props.updateGuestViewProduct(this.props.stateRegistryInfo.urlSlug, this.props.stateAddedProducts.length, true)\n            this.removeProductFromList()\n            toast.success((\n              <p><b>{this.props.data.title}</b> Purchased!</p>\n            ))\n            this.modalCloseHandler()\n          }\n          this.props.dispatch(setLoader(false))\n        }).catch(err => {\n          // TODO: Add toast proper toast msg\n          console.log('Something went wrong-->', err)\n          toast.error((\n            <p>Something went wrong</p>\n          ))\n          this.props.dispatch(setLoader(false))\n        })\n      }\n    }).catch(err => {\n      // TODO: Add toast proper toast msg\n      console.log('Something went wrong-->', err)\n      toast.error((\n        <p>Something went wrong</p>\n      ))\n      this.props.dispatch(setLoader(false))\n    })\n  }\n\n  submitDataHandler = async () => {\n    // Todo: API calls\n    // For Bought this gift already \n    if (this.state.isBoughtThisAlready) {\n      // Vaidating data\n      if (!this.validBoughtThisAlreadyData()) {\n        this.props.dispatch(setLoader(false))\n        return false\n      }\n      // Removing reversed product\n      this.removeReservedAndAddProducts()\n    }\n    if (this.state.currentView === 2) {\n      if (!this.validEmail()) {\n        this.props.dispatch(setLoader(false))\n        return false\n      }\n      // Reserveing product\n      let name = this.state.email.split('@')\n      let data = {\n        query: RESERVE_REGISTRY_ITEM_GUEST,\n        variables: {\n          registryId: this.props.stateRegistryInfo.id,\n          registryItemId: this.props.data.id,\n          isReserved: true,\n          isPurchased: false,\n          purchasedQuantity: Number(this.state.quantity),\n          name: name[0],\n          email: this.state.email\n        },\n      }\n      this.props.dispatch(setLoader(true))\n      await graphQL(data).then(async res => {\n        if (res.data.errors || res.data.error) {\n          // TODO: Add toast proper toast msg\n          console.log('Something went wrong-->', res.data.errors)\n          toast.error((\n            <p>Something went wrong</p>\n          ))\n        } else {\n          this.buyNowClickHandler()\n        }\n        this.props.dispatch(setLoader(false))\n      }).catch(err => {\n        // TODO: Add toast proper toast msg\n        console.log('Something went wrong-->', err)\n        toast.error((\n          <p>Something went wrong</p>\n        ))\n        this.props.dispatch(setLoader(false))\n      })\n    }\n    if (this.state.currentView < 5 && this.state.currentView !== 2) {\n      this.setState({\n        currentView: this.state.currentView + 1,\n      })\n    }\n  }\n\n  removeProductReservation = async () => {\n    let email = null\n    let jsonVisitedItems = JSON.parse(localStorage.getItem(LOCAL_STORAGE_GUEST_GIFT_BUY_KEY))\n    // getting default value for email and quantity\n    if (jsonVisitedItems) {\n      for (let item of jsonVisitedItems) {\n        if (Number(item.rId) === Number(this.props.stateRegistryInfo.id)) {\n          if (Number(item.pId) === Number(this.props.data.id)) {\n            email = item.email\n            break\n          }\n        }\n      }\n    }\n    if (this.props.stateUserInfo.loggedIn && !email) {\n      for (let item of [...this.props.data.purchasedRegistryItem]) {\n        if (item.guestUser.email === this.props.stateUserInfo.user.email) {\n          email = item.guestUser.email\n        }\n      }\n    }\n    let data = {\n      query: REMOVE_RESERVED_ITEM_GUEST,\n      variables: {\n        registryId: this.props.stateRegistryInfo.id,\n        registryItemId: this.props.data.id,\n        email: email ? email : this.props.productBoughtAlreadyInfo.email\n      },\n    }\n    this.props.dispatch(setLoader(true))\n    await graphQL(data).then(async res => {\n      if (res.data.errors || res.data.error) {\n        // TODO: Add toast proper toast msg\n        console.log('Something went wrong-->', res.data.errors)\n        toast.error((\n          <p>Something went wrong</p>\n        ))\n      } else {\n        // Getting Update Product\n        await this.props.dispatch(clearViewGuestPaginationInfo())\n        await this.props.updateGuestViewProduct(this.props.stateRegistryInfo.urlSlug, this.props.stateAddedProducts.length, true)\n        this.removeProductFromList()\n        console.log('Removed From Reservation')\n      }\n      this.props.dispatch(setLoader(false))\n    }).catch(err => {\n      // TODO: Add toast proper toast msg\n      console.log('Something went wrong-->', err)\n      toast.error((\n        <p>Something went wrong</p>\n      ))\n      this.props.dispatch(setLoader(false))\n    })\n  }\n\n  copyAddress = (ev) => {\n    ev.preventDefault();\n    const el = document.createElement('textarea');\n    el.value = `\n    ${this.props.stateRegistryInfo.user.defaultAddress.address1},\n    ${this.props.stateRegistryInfo.user.defaultAddress.address2},\n    ${this.props.stateRegistryInfo.user.defaultAddress.city},\n    ${this.props.stateRegistryInfo.user.defaultAddress.province},\n    ${this.props.stateRegistryInfo.user.defaultAddress.country} ${this.props.stateRegistryInfo.user.defaultAddress.zip}\n    `;\n    document.body.appendChild(el);\n    el.select();\n    document.execCommand('copy');\n    document.body.removeChild(el);\n    toast.success(\"Copied to clipboard\");\n  }\n\n  setModalData = () => {\n    this.clearModalData()\n    this.setState({\n      modalTitle: this.props.title\n    })\n  }\n\n  clearModalData = () => {\n    this.modalBody = \"\"\n    this.modalTitleContent = \"\"\n    this.modalFooterButtons = \"\"\n    this.setState({\n      currentView: 1,\n      isBoughtThisAlready: false\n    })\n  }\n\n  render() {\n\n    let modalLeftView = null\n    let modalSecondaryBtn = (\n      !this.state.isBoughtThisAlready ?\n        <Button\n          variant=\"secondary\"\n          className=\"MA-gift-footer-btn px-3 py-1 font-medium text-body\"\n          onClick={() => this.iBoughtThisAlready()}\n        >I Bought This Already</Button> : null\n    )\n    let modalPrimaryBtn = null\n\n    if (this.state.currentView === 1) {\n      modalLeftView = (\n        <div className=\"col-12 col-md-7 mt-4\">\n          <div className=\"ml-3\">\n            <div className=\"row col\">\n              <div className=\"col\">\n                <p className=\"font-body font-medium\">Buy this gift for {this.props.stateRegistryInfo.user.firstName} {this.props.stateRegistryInfo.user.partnerUser ? 'and ' + this.props.stateRegistryInfo.user.partnerUser.firstName : ''}</p>\n                <p className=\"text-sm mt-1\">You will be able to buy this gift from {this.props.data.item.store.storeName}.</p>\n              </div>\n            </div>\n            <div className=\"row col mt-4\">\n              <div className=\"col m-a-input-container\">\n                <p className=\"text-sm font-medium add-gift-store-label\">Quantity</p>\n                <Counter\n                  className=\"mt-2\"\n                  counter={this.state.quantity}\n                  incrementHandler={this.incrementQuantity}\n                  decrementHandler={this.decrementQuantity}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      )\n      modalPrimaryBtn = (\n        <Button\n          variant=\"primary\"\n          className=\"MA-gift-footer-btn px-4 py-1 font-medium text-body guest-footer-btn\"\n          disabled={(this.state.isBoughtThisAlready && (this.props.productBoughtAlreadyInfo.name.length === 0 || this.props.productBoughtAlreadyInfo.email.length === 0)) || (this.props.isGroupGift && Number(this.state.amount)) === 0 ? true : false}\n          onClick={() => this.submitDataHandler()}\n        >{!this.state.isBoughtThisAlready ? `Buy On ${this.props.data.item.store.storeName}` : 'Save & Close'}</Button>\n      )\n    } else if (this.state.currentView === 2) {\n      modalLeftView = (\n        <div className=\"col-7 mt-4\">\n          <div className=\"ml-3\">\n            <div className=\"row col\">\n              <div className=\"col\">\n                <p className=\"font-body font-medium\">Whats your email address?</p>\n                <p className=\"text-sm mt-1\">Well reserve this gift to make sure no one else tries to buy it until we confitm if youve bought this.</p>\n              </div>\n            </div>\n            <div className=\"row col mt-4\">\n              <div className=\"col m-a-input-container\">\n                <p className=\"text-sm font-medium add-gift-store-label guest-view-required\">Email Address</p>\n                <input\n                  className={[\"w-100 mt-1 mb-0 px-2 py-1\", this.state.errors.email ? \"already-bought-input-error\" : \"\"].join(\" \")}\n                  type='text'\n                  placeholder='johndoe@email.com'\n                  value={this.state.email}\n                  onChange={(ev) => this.emailChangeHandler(ev)}\n                />\n                {this.state.errors.email ?\n                  <span\n                    className=\"text-sm already-bought-input-error-text\">{this.state.errors.email}</span>\n                  : null}\n              </div>\n            </div>\n            {this.props.stateRegistryInfo.user.defaultAddress ?\n              <div className=\"row col mt-4\">\n                <div className=\"col m-a-input-container\">\n                  <p className=\"text-sm font-medium add-gift-store-label\">Ship To Them Directly</p>\n                  <div className=\"text-body guest-address-section px-2 py-1 mt-1 d-flex\">\n                    <div>\n                      {this.props.stateRegistryInfo.user.defaultAddress.address1 ? <p>{this.props.stateRegistryInfo.user.defaultAddress.address1},</p> : null}\n                      {this.props.stateRegistryInfo.user.defaultAddress.address2 ? <p>{this.props.stateRegistryInfo.user.defaultAddress.address2},</p> : null}\n                      {this.props.stateRegistryInfo.user.defaultAddress.city ? <p>{this.props.stateRegistryInfo.user.defaultAddress.city},</p> : null}\n                      {this.props.stateRegistryInfo.user.defaultAddress.province ? <p>{this.props.stateRegistryInfo.user.defaultAddress.province},</p> : null}\n                      {this.props.stateRegistryInfo.user.defaultAddress.country ? <p>{this.props.stateRegistryInfo.user.defaultAddress.country} {this.props.stateRegistryInfo.user.defaultAddress.zip ? this.props.stateRegistryInfo.user.defaultAddress.zip : null}</p> : null}\n                    </div>\n                    <div className=\"ml-auto\"><a className=\"address-copy-link font-medium text-sm mt-1\" href=\"#\" onClick={(ev) => this.copyAddress(ev)}>Copy</a></div>\n                  </div>\n                </div>\n              </div> : null}\n            <div className=\"row col mt-4\">\n              <div className=\"col\">\n                <p className=\"text-sm mt-1\">Come back to M+A Registry to tell us if you bought this, so we can help keep track of all their gifts</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      )\n      modalPrimaryBtn = (\n        <Button\n          variant=\"primary\"\n          className=\"MA-gift-footer-btn px-4 py-1 font-medium text-body guest-footer-btn\"\n          disabled={this.state.email.length === 0 || (this.state.isBoughtThisAlready && (this.props.productBoughtAlreadyInfo.name.length === 0 || this.props.productBoughtAlreadyInfo.email.length === 0)) || (this.props.isGroupGift && Number(this.state.amount)) === 0 ? true : false}\n          onClick={() => this.submitDataHandler()}\n        >{!this.state.isBoughtThisAlready ? `Go To ${this.props.data.item.store.storeName}` : 'Save & Close'}</Button>\n      )\n    } else if (this.state.currentView === 3) {\n      modalLeftView = (\n        <div className=\"col-7 mt-4\">\n          <div className=\"ml-3\">\n            <div className=\"row col\">\n              <div className=\"col\">\n                <p className=\"font-body font-medium\">Did you buy this gift?</p>\n                <p className=\"text-sm mt-1\">Well reserve this gift to make sure no one else tries to buy it until we confitm if youve bought this.</p>\n              </div>\n            </div>\n            <div className=\"row col\">\n              <div className=\"col\">\n                <p className=\"text-sm mt-5\">\n                  Still want to buy? <a className=\"guest-link font-medium\" href={this.props.data.item.storeItemUrl} target=\"_blank\">Return to <span className=\"guest-store-name\">{this.props.data.item.store.storeName}</span></a>\n                </p>\n              </div>\n            </div>\n            {this.props.stateRegistryInfo.user.defaultAddress ?\n              <div className=\"row col mt-5\">\n                <div className=\"col m-a-input-container\">\n                  <p className=\"text-sm font-medium add-gift-store-label\">Ship To Them Directly</p>\n                  <div className=\"text-body guest-address-section px-2 py-1 mt-1 d-flex\">\n                    <div>\n                      {this.props.stateRegistryInfo.user.defaultAddress.address1 ? <p>{this.props.stateRegistryInfo.user.defaultAddress.address1},</p> : null}\n                      {this.props.stateRegistryInfo.user.defaultAddress.address2 ? <p>{this.props.stateRegistryInfo.user.defaultAddress.address2},</p> : null}\n                      {this.props.stateRegistryInfo.user.defaultAddress.city ? <p>{this.props.stateRegistryInfo.user.defaultAddress.city},</p> : null}\n                      {this.props.stateRegistryInfo.user.defaultAddress.province ? <p>{this.props.stateRegistryInfo.user.defaultAddress.province},</p> : null}\n                      {this.props.stateRegistryInfo.user.defaultAddress.country ? <p>{this.props.stateRegistryInfo.user.defaultAddress.country} {this.props.stateRegistryInfo.user.defaultAddress.zip ? this.props.stateRegistryInfo.user.defaultAddress.zip : null}</p> : null}\n                    </div>\n                    <div className=\"ml-auto\"><a className=\"address-copy-link font-medium text-sm mt-1\" href=\"#\" onClick={(ev) => this.copyAddress(ev)}>Copy</a></div>\n                  </div>\n                </div>\n              </div> : null}\n          </div>\n        </div>\n      )\n      modalPrimaryBtn = (\n        <Button\n          variant=\"primary\"\n          className=\"MA-gift-footer-btn px-4 py-1 font-medium text-body guest-footer-btn\"\n          disabled={(this.state.isBoughtThisAlready && (this.props.productBoughtAlreadyInfo.name.length === 0 || this.props.productBoughtAlreadyInfo.email.length === 0)) || (this.props.isGroupGift && Number(this.state.amount)) === 0 ? true : false}\n          onClick={!this.state.isBoughtThisAlready ? () => this.iBoughtThisAlready() : () => this.submitDataHandler()}\n        >{!this.state.isBoughtThisAlready ? 'Yes. I Bought It' : 'Save & Close'}</Button>\n      )\n      modalSecondaryBtn = (\n        <>\n          {!this.state.isBoughtThisAlready ?\n            <Button\n              variant=\"secondary\"\n              className=\"MA-gift-footer-btn px-3 py-1 font-medium text-body\"\n              onClick={() => this.removeProductReservation()}\n            >No, I Didnt</Button>\n            : null\n          }\n        </>\n      )\n    }\n\n    // Body for modal\n    let modalBody = (\n      <>\n        {/* Give M+A Gift Model Body */}\n        {!this.state.isBoughtThisAlready ?\n          <div className=\"row add-gift-another-store\">\n            <div className=\"col\">\n              <div className=\"row\">\n                <>\n                  <div className=\"col-12 col-md-5 py-4 add-gift-image-select\">\n                    <div className=\"mr-3\">\n                      <ProductDetailsModel data={this.props.data} />\n                    </div>\n                  </div>\n                  {modalLeftView}\n                </>\n              </div>\n            </div>\n          </div>\n          :\n          <AlreadyBoughtProduct\n            data={this.props.data}\n            validBoughtThisAlreadyData={this.validBoughtThisAlreadyData}\n            onFocusHandler={this.onFocusBoughtThisAlreadyHandler}\n            fieldErrors={this.state.errors} />\n        }\n      </>\n    )\n\n    // Modal buttons\n    let modalFooterButtons = (\n      <>\n        {modalSecondaryBtn}\n        {modalPrimaryBtn}\n      </>\n    )\n\n    return (\n      <>\n        <Modal\n          show={this.props.show}\n          updateModal={this.state.updateModal}\n          title={this.state.modalTitle}\n          titleContent={this.modalTitleContent}\n          footer={modalFooterButtons}\n          noBodyPadding={true}\n\n          closeModal={this.props.close}>\n          {modalBody}\n        </Modal>\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    stateRegistryInfo: state.guestView.info,\n    stateUserInfo: state.registry,\n    productBoughtAlreadyInfo: state.guestView.alreadyBoughtProduct,\n    stateAddedProducts: state.guestView.product\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(withRouter(GiveGiftFromAnotherStore));","import React, { useState } from 'react'\nimport \"./GuestViewCard.scss\";\nimport {\n\tsortableHandle,\n} from 'react-sortable-hoc';\nimport { useSelector, useDispatch } from 'react-redux';\nimport Button from \"../../commons/components/button-component/ButtonComponent\";\nimport GiftStatusPill from \"../../commons/components/gift-status-pill/GiftStatusPill\";\nimport GiveMAGiftModel from \"modules/commons/components/give-MA-gift-model/GiveMAGiftModel\";\nimport { clearAlreadyBoughtProductInfo, clearCashContributedAlreadyInfo } from '../GuestViewAction';\nimport { M_A_STORE_NAME, LOCAL_STORAGE_GUEST_GIFT_BUY_KEY } from 'utils/constants';\nimport GiveGiftFromAnotherStore from \"modules/commons/components/give-gift-from-another-store/GiveGiftFromAnotherStore\";\nimport {formatPrice} from \"../../../utils/commonFunction\";\n\n\nconst GuestViewCard = (props) => {\n\n\tconst dispatch = useDispatch();\n\tconst stateFilterApplied = useSelector(state => state.viewRegistry.viewFilterApplied.childFilter)\n\tconst stateRegistryInfo = useSelector(state => state.registry)\n\tconst stateGuestViewRegistry = useSelector(state => state.guestView.info)\n\tconst [showMAGiftmodel, setMAGiftModel] = useState(false)\n\tconst [showAnotherStoreGiftmodel, setAnotherStoreGiftmodel] = useState(false)\n\tconst [isGroupGift, setIsGroupGift] = useState(false)\n\tconst [isCashAcceptedOnly, setIsCashAcceptedOnly] = useState(false)\n\tconst [modelTitle, setModelTitle] = useState('')\n\n\tconst modalCloseHandler = () => {\n\t\tdispatch(clearAlreadyBoughtProductInfo())\n\t\tdispatch(clearCashContributedAlreadyInfo())\n\t\tsetMAGiftModel(false)\n\t\tsetAnotherStoreGiftmodel(false)\n\t}\n\n\t// Handle drag\n\t// TODO: Change Draggable icon\n\tconst DragHandle = sortableHandle(() => <i\n\t\tclassName={[\"ml-4 drag-icon m-a-popover m-a-popover-top-right\", (props.disabledDrag || stateFilterApplied.length !== 0) ? \"disabled-drag\" : \"\"].join(\" \")}>\n\t\t<div className=\"m-a-popover-content drag-drop-popover w-auto px-3 py-2\">\n\t\t\t<p className=\"text-sm font-weight-normal m-a-popover-content-desc\">Rearrange</p>\n\t\t</div>\n\t</i>);\n\n\tconst openModelHandler = () => {\n\t\t// TODO: Conditions for different data model\n\t\t// For ma product which is not Grop Gift\n\t\tif (props.data.item.store.storeName === M_A_STORE_NAME && !props.data.isGroupGift) {\n\t\t\tsetMAGiftModel(true)\n\t\t}\n\t\t// For Group Gift\n\t\telse if (props.data.isGroupGift) {\n\t\t\tsetIsGroupGift(true)\n\t\t\tsetMAGiftModel(true)\n\t\t}\n\t\telse if (props.data.isCashAcceptedOnly) {\n\t\t\tsetIsCashAcceptedOnly(true)\n\t\t\tsetMAGiftModel(true)\n\t\t}\n\t\telse if (props.data.item.store.storeName !== M_A_STORE_NAME) {\n\t\t\tsetAnotherStoreGiftmodel(true)\n\t\t}\n\t\tsetModelTitle('Give this gift')\n\t\t// modelTitle = 'Give This Gift'\n\t}\n\n\tlet hasUserReservedProduct = false\n\t// If non MA product and It's quatity are not still needed\n\tif (props.data.item.store.storeName !== M_A_STORE_NAME && props.data.quantityStatus.reserved_quantity && props.data.quantityStatus.still_needed <= 0) {\n\t\t// If your is login\n\t\tif (stateRegistryInfo.loggedIn) {\n\t\t\tfor (let item of [...props.data.purchasedRegistryItem]) {\n\t\t\t\tif (item.isReserved && item.guestUser.email === stateRegistryInfo.user.email) {\n\t\t\t\t\thasUserReservedProduct = true\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// Checking in Local storage\n\tif (!hasUserReservedProduct && (props.data.item.store.storeName !== M_A_STORE_NAME && props.data.quantityStatus.reserved_quantity && props.data.quantityStatus.still_needed <= 0)) {\n\t\tlet jsonVisitedItems = JSON.parse(localStorage.getItem(LOCAL_STORAGE_GUEST_GIFT_BUY_KEY))\n\t\tif (jsonVisitedItems && jsonVisitedItems.length) {\n\t\t\tfor (let product of [...props.data.purchasedRegistryItem]) {\n\t\t\t\tfor (let item of jsonVisitedItems) {\n\t\t\t\t\tif (Number(item.rId) === Number(stateGuestViewRegistry.id) && Number(item.pId) === Number(props.data.id) && product.guestUser.email === item.email) {\n\t\t\t\t\t\thasUserReservedProduct = true\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (hasUserReservedProduct) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// If MA product and It quatity are still needed\n\tif (props.data.item.store.storeName === M_A_STORE_NAME || props.data.quantityStatus.still_needed > 0) {\n\t\thasUserReservedProduct = true\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{!props.data.isPurchased || !(props.data.isCashAcceptedOnly && (props.data.quantity === props.data.quantityStatus.purchased_quantity)) ?\n\t\t\t\t<>\n\t\t\t\t\t<div className=\"added-card py-5 pr-2\" onClick={hasUserReservedProduct ? () => openModelHandler() : () => { }}>\n\t\t\t\t\t\t<div className=\"row pl-3\">\n\t\t\t\t\t\t\t<div className=\"col-6 col-md-3 col-xl-2 mb-3 mb-md-0 guest-card-image\">\n\t\t\t\t\t\t\t\t{props.data?.imageUrl ?\n\t\t\t\t\t\t\t\t\t<img className=\"product-img d-block mx-auto\" src={props.data?.imageUrl} alt={props.data?.title} />\n\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t<div className=\"guest-added-card-no-product-image\" />\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t{props.data.mostWanted ?\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName=\"d-flex align-items-center guest-must-have added-gift-must-have-btn px-1 guest-added-gift-must-have-active\">\n\t\t\t\t\t\t\t\t\t\t<i className=\"icon mr-1 d-block heart-fill\" />\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm added-gift-must-have-text\">Must Have</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t: <></>}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"col-12 col-md\">\n\t\t\t\t\t\t\t\t{/* <div className=\"text-sm category\">{props.data.registryCategories[0].category.categoryName}</div> */}\n\t\t\t\t\t\t\t\t<h2>{props.data.title}</h2>\n\t\t\t\t\t\t\t\t{props.data.item.hideTotal ? null :\n\t\t\t\t\t\t\t\t\t<div className=\"d-flex mt-2\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"\">{formatPrice(props.data.item.price)}</div>\n\t\t\t\t\t\t\t\t\t\t{/*/!* TODO: Add Strikeout price dynamic *!/*/}\n\t\t\t\t\t\t\t\t\t\t{/*<div className=\"text-sm my-auto ml-1 strick-price\">$257.99</div>*/}\n\t\t\t\t\t\t\t\t\t\t{/* {props.data.quantity > 1 ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"ml-4 text-body d-flex\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tQty:{props.data.quantity}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"quantity-mul-text\"> (${props.data.item.price} * {props.data.quantity})</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div> : <></>} */}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t<div className=\"d-flex mt-3 flex-wrap align-items-end\">\n\t\t\t\t\t\t\t\t\t{props.data.quantityStatus.purchased_quantity && !props.data.item.isCashFund ?\n\t\t\t\t\t\t\t\t\t\t<GiftStatusPill className=\"mr-1\" variant=\"purchased\" text={props.data.quantityStatus.purchased_quantity + \" Purchased\"} />\n\t\t\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t\t\t\t{props.data.quantityStatus.reserved_quantity && !props.data.item.isCashFund ?\n\t\t\t\t\t\t\t\t\t\t<GiftStatusPill className=\"mr-1\" variant=\"reserved\" text={props.data.quantityStatus.reserved_quantity + \" Reserved\"} />\n\t\t\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t\t\t\t{props.data.quantityStatus.still_needed && !props.data.item.isCashFund ?\n\t\t\t\t\t\t\t\t\t\t<GiftStatusPill className=\"mr-1\" variant=\"default\" text={`${props.data.quantityStatus.still_needed} ${props.data.quantityStatus.purchased_quantity === 0 ? \" Requested\" : \" Still Needed\"}`} />\n\t\t\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t\t\t\t{props.data.isGroupGift ?\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"guest-toggle-pills px-1 mr-3 d-flex align-items-center mt-md-2 mt-lg-0\">\n\t\t\t\t\t\t\t\t\t\t\t\t<i className=\"guest-icon-active mr-1\" />\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm guest-icon-text\">Group Gift</span>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t{props.data.item.hideTotal ? null :\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"mt-md-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm font-medium received-amount\">Received {formatPrice(Math.round((props.data.quantityStatus.total_contribution_amount % props.data.item.price) * 100) / 100)} </span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm total-amount\">of {formatPrice(Math.round(props.data.item.price * props.data.quantityStatus.still_needed * 100) / 100)}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"group-gift-background\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"group-gift-progress mw-100\" style={{ width: `${((props.data.quantityStatus.total_contribution_amount % props.data.item.price) * 100) / (props.data.item.price * props.data.quantity)}%` }} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{hasUserReservedProduct ?\n\t\t\t\t\t\t\t\t<div className={[\n\t\t\t\t\t\t\t\t\tprops.draggable ? \"col-12 col-md-4 give-this-gift-button-container\" : \"col-12 col-md-4 give-this-gift-button-container\",\n\t\t\t\t\t\t\t\t].join(\" \")}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className=\"d-flex align-items-baseline justify-content-end mr-1\">\n\t\t\t\t\t\t\t\t\t\t<Button variant=\"secondary\" className=\"give-this-gift-btn font-medium text-body py-1 px-3 mr-3\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => openModelHandler()}\n\t\t\t\t\t\t\t\t\t\t>Give This Gift</Button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div> : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{/* TODO: change category */}\n\t\t\t\t\t{props.data.registryCategories.length > 1 ?\n\t\t\t\t\t\tprops.data.registryCategories.map(category =>\n\t\t\t\t\t\t\tprops.data.registryCategories[0].id !== category.id ?\n\t\t\t\t\t\t\t\t<div className=\"row\">\n\t\t\t\t\t\t\t\t\t<div className=\"col\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"text-body font-medium p-6 added-card-other-category\" onClick={() => openModelHandler()}>\n\t\t\t\t\t\t\t\t\t\t\tYou have added {props.data.item.quantity > 1 ? props.data.item.quantity : null} {category.category.parentCategory && category.category.parentCategory.parentCategory !== null ? category.category.parentCategory.categoryName + \" (\" + category.category.categoryName + \")\" : category.category.categoryName} as part of <a className=\"title-link\" tabIndex=\"true\">{props.data.title}</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t)\n\t\t\t\t\t\t: null}\n\t\t\t\t</> :\n\t\t\t\t<div className=\"guest-purchased-card py-3 pl-6\">\n\t\t\t\t\t<p className=\"guest-purchased-card-title font-medium\">{props.data.title}</p>\n\t\t\t\t\t{props.data.quantityStatus.purchased_quantity ?\n\t\t\t\t\t\t<GiftStatusPill className=\"mr-1\" variant=\"purchased\" text={!props.data.item.isCashFund ? props.data.quantityStatus.purchased_quantity + \" Purchased\" : \"Purchased\"} />\n\t\t\t\t\t\t: null}\n\t\t\t\t</div>\n\t\t\t}\n\t\t\t{showMAGiftmodel ?\n\t\t\t\t<GiveMAGiftModel\n\t\t\t\t\tshow={showMAGiftmodel}\n\t\t\t\t\tclose={modalCloseHandler}\n\t\t\t\t\ttitle={modelTitle}\n\t\t\t\t\tdata={props.data}\n\t\t\t\t\tisGroupGift={isGroupGift}\n\t\t\t\t\tisCashAcceptedOnly={isCashAcceptedOnly}\n\t\t\t\t\tupdateGuestViewProduct={props.updateGuestViewProduct}\n\t\t\t\t/> : null}\n\n\t\t\t{showAnotherStoreGiftmodel ?\n\t\t\t\t<GiveGiftFromAnotherStore\n\t\t\t\t\tshow={showAnotherStoreGiftmodel}\n\t\t\t\t\tclose={modalCloseHandler}\n\t\t\t\t\ttitle={modelTitle}\n\t\t\t\t\tdata={props.data}\n\t\t\t\t\tupdateGuestViewProduct={props.updateGuestViewProduct}\n\t\t\t\t/> : null}\n\t\t</>\n\t)\n}\n\nexport default GuestViewCard","import React from \"react\";\nimport \"./GuestViewHeader.scss\";\nimport Button from \"../../../commons/components/button-component/ButtonComponent\";\nimport MoreOption from \"../../../commons/components/more-option/MoreOption\";\nimport { connect } from \"react-redux\";\nimport { toast } from 'react-toastify';\n\n\nclass GuestViewHeader extends React.Component {\n\n  state = {\n    showEditRegistryDetail: false,\n  }\n\n  closeEditRegistryDetail = () => {\n    this.setState({ showEditRegistryDetail: false })\n  }\n\n  changeRegistryDetail = (ev) => {\n    ev.preventDefault();\n    this.setState({ showEditRegistryDetail: true })\n  }\n\n  render() {\n    return (\n      <>\n        <div className=\"view-registry-header\" style={{ backgroundImage: 'url(' + this.props.stateGuestViewRegistry.image.image + ')' }}>\n\n          <div className=\"header-registry-detail\">\n            <div className=\"container my-4\">\n              <div className=\"row\">\n                <div className=\"col\">\n                  <div className=\"d-flex align-items-center\">\n                    <h2>{this.props.stateGuestViewRegistry.displayName ? this.props.stateGuestViewRegistry.displayName : \"\"}</h2>\n                  </div>\n                  {this.props.stateGuestViewRegistry.greeting ?\n                    <span\n                      className=\"text-sm view-registry-header-greeting\">{this.props.stateGuestViewRegistry.greeting}</span>\n                    :\n                    null\n                  }\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    stateRegistryInfo: state.registry.info,\n    stateGuestViewRegistry: state.guestView.info\n  }\n}\n\n\nexport default connect(\n  mapStateToProps\n)(GuestViewHeader);","import React from 'react';\nimport \"./GuestSortFilter.scss\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport { activeGuestSortFilter } from '../../GuestViewAction';\n\nconst GuestSortFilter = () => {\n\n  const dispatch = useDispatch()\n  const activeSortFilterState = useSelector(state => state.guestView.activeGuestSortFilter)\n  const filterContentRef = React.createRef();\n\n  const toggleFilterContent = () => {\n    filterContentRef.current.classList.toggle(\"show\");\n  }\n\n\n  const handleSortSelection = (sortItem) => {\n    dispatch(activeGuestSortFilter(sortItem))\n    filterContentRef.current.classList.toggle(\"show\");\n  }\n\n  const sortByList = [\n    {\n      sortId: 1,\n      sortTitle: 'Featured'\n    },\n    {\n      sortId: 2,\n      sortTitle: 'Price: Low to High'\n    },\n    {\n      sortId: 3,\n      sortTitle: 'Price: High to Low'\n    }\n  ]\n\n  return (\n    <div className=\"sort-section-filter\">\n      <div className=\"sort-filter-btn px-2 d-flex justify-content-between py-1\" onClick={toggleFilterContent}>\n        <span className=\"font-body selected-sort-text text-body\">{activeSortFilterState.sortTitle}</span>\n        <i className=\"icon-filter-1 pl-1 mr-1 icon-chevron-down\" />\n      </div>\n      <div className=\"filter-content\" ref={filterContentRef}>\n        <div className=\"d-flex flex-column\">\n          {sortByList.map(sortItem => {\n            return (\n              <div className=\"filter-item py-2 px-2\" key={\"sortid-\" + sortItem.sortId} onClick={() => handleSortSelection(sortItem)}>\n                <div className=\"text-sm\">{sortItem.sortTitle}</div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default GuestSortFilter;\n","import React, {useState, useEffect} from 'react';\nimport \"./GuestSortFilter.scss\";\nimport {useSelector, useDispatch} from 'react-redux';\nimport {activeGuestSortFilter} from '../../GuestViewAction';\nimport RadioButton from \"../../../commons/components/radio-button/RadioButton\";\n\nconst GuestSortFilterMobile = () => {\n\n\tconst dispatch = useDispatch()\n\tconst activeSortFilterState = useSelector(state => state.guestView.activeGuestSortFilter)\n\tconst [currentSort, setCurrentSort] = useState(1)\n\n\tuseEffect(() => {\n\t\tsetCurrentSort(activeSortFilterState.sortId);\n\t})\n\n\tconst handleSortSelection = (sortItem) => {\n\t\tsetCurrentSort(sortItem.sortId)\n\t\tdispatch(activeGuestSortFilter(sortItem))\n\t}\n\n\tconst sortByList = [\n\t\t{\n\t\t\tsortId: 1,\n\t\t\tsortTitle: 'Featured'\n\t\t},\n\t\t{\n\t\t\tsortId: 2,\n\t\t\tsortTitle: 'Price: Low to High'\n\t\t},\n\t\t{\n\t\t\tsortId: 3,\n\t\t\tsortTitle: 'Price: High to Low'\n\t\t}\n\t]\n\n\treturn (\n\t\t<div className=\"sort-section-filter w-100\">\n\t\t\t<div className=\"text-body filter-title pt-5 d-flex\">Sort By</div>\n\t\t\t<div className=\"w-100 mt-5 text-sm mb-3\">\n\t\t\t\t{sortByList.map(sortItem => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className=\"mt-1\">\n\t\t\t\t\t\t\t<RadioButton\n\t\t\t\t\t\t\t\tcenterText=\"true\"\n\t\t\t\t\t\t\t\ttextClass=\"text-body\"\n\t\t\t\t\t\t\t\tname=\"guestViewSortFilter\"\n\t\t\t\t\t\t\t\tkey={sortItem.sortId}\n\t\t\t\t\t\t\t\tchecked={sortItem.sortId === currentSort ? true : null}\n\t\t\t\t\t\t\t\tchangeHandler={() => handleSortSelection(sortItem)} >\n\t\t\t\t\t\t\t\t{sortItem.sortTitle}\n\t\t\t\t\t\t\t</RadioButton>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default GuestSortFilterMobile;\n","import React, { useState } from 'react'\nimport \"./GuestFilter.scss\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setChildGuestViewFilter, clearGuestViewFilter, setGuestViewFilterCategory, setGuestViewProducts, clearViewGuestPaginationInfo } from '../../GuestViewAction';\nimport { FILTERS } from \"utils/constants\";\nimport GuestSortFilterMobile from \"../guest-sort-filter/GuestSortFilterMobile\";\n\nconst GuestFilterMobile = (props) => {\n\n\tconst dispatch = useDispatch()\n\tlet tempParentFilterId = useSelector(state => state.guestView.guestViewFilterApplied.parentFilter)\n\tlet tempChildFilterIds = useSelector(state => state.guestView.guestViewFilterApplied.childFilter)\n\tlet stateAddedProducts = useSelector(state => state.guestView.product)\n\tconst stateCategoriesInfo = useSelector(state => state.guestView.checkList)\n\tlet stateFilterCategories = useSelector(state => state.guestView.guestFilterCategory)\n\tlet [filterCategoryLimit, setFilterCategoryLimit] = useState([])\n\n\tconst childChangeHandler = async (childId, parentId) => {\n\n\t\tif (parentId !== tempParentFilterId) {\n\t\t\tif (tempChildFilterIds.length > 0) {\n\t\t\t\tawait dispatch(setChildGuestViewFilter([]))\n\t\t\t}\n\t\t}\n\n\t\tconst childIndex = tempChildFilterIds.indexOf(childId)\n\n\t\tif (childIndex === -1) {\n\t\t\tawait dispatch(setChildGuestViewFilter([...tempChildFilterIds, childId]))\n\t\t} else {\n\t\t\tlet newChildArray = [...tempChildFilterIds]\n\t\t\tnewChildArray.splice(childIndex, 1)\n\t\t\tawait dispatch(setChildGuestViewFilter(newChildArray))\n\t\t}\n\t\tawait dispatch(clearViewGuestPaginationInfo())\n\t\tawait dispatch(setGuestViewProducts([]))\n\t\tprops.setFilterhandler()\n\t}\n\n\tconst changeParentLimitHandler = (parentFilterID) => {\n\t\tlet limitLength = null\n\t\tlet filterCategory = [...stateFilterCategories].map(parentFilter => {\n\t\t\tif (parentFilter.id === parentFilterID) {\n\t\t\t\tparentFilter.limit = parentFilter.child.length\n\t\t\t\tlimitLength = parentFilter.child.length\n\t\t\t}\n\t\t\treturn parentFilter\n\t\t})\n\t\tdispatch(setGuestViewFilterCategory(filterCategory))\n\n\t\tlet isFound = false\n\t\tlet newFilterCateoryLimit = [...filterCategoryLimit].map(categorylimit => {\n\t\t\tif (categorylimit.id === parentFilterID) {\n\t\t\t\tcategorylimit.limit = limitLength\n\t\t\t\tisFound = true\n\t\t\t\treturn categorylimit\n\t\t\t}\n\t\t\treturn categorylimit\n\t\t})\n\n\t\tprops.categoryFilterLimit(newFilterCateoryLimit);\n\t\tif (!isFound) {\n\t\t\tnewFilterCateoryLimit.push({ 'id': parentFilterID, 'limit': limitLength })\n\t\t}\n\t\tsetFilterCategoryLimit(newFilterCateoryLimit)\n\t}\n\n\treturn (\n\t\t<div className=\"view-filter\">\n\t\t\t<div className=\"view-filter-heading pb-1 d-flex align-items-baseline\">\n\t\t\t\t<GuestSortFilterMobile/>\n\t\t\t</div>\n\t\t\t<div className=\"d-flex flex-column\">\n\t\t\t\t{[...stateFilterCategories].map(parentFilter => (\n\t\t\t\t\t<div className=\"filter-item\" key={\"filter-\" + parentFilter.id}>\n\t\t\t\t\t\t{/* Parent filter */}\n\t\t\t\t\t\t<div className=\"text-body filter-title pt-5 d-flex\">{parentFilter.display}</div>\n\n\t\t\t\t\t\t{/* Child filter */}\n\t\t\t\t\t\t{parentFilter.child ? (\n\t\t\t\t\t\t\t<div className=\"d-flex flex-column mt-2\" key={\"child-filter-\" + parentFilter.id}>\n\t\t\t\t\t\t\t\t<div className=\"mt-3 fliter-checkbox-section\">\n\t\t\t\t\t\t\t\t\t{parentFilter.child.map((childFilter, index) => (\n\t\t\t\t\t\t\t\t\t\tchildFilter.count > 0 ?\n\t\t\t\t\t\t\t\t\t\t\tindex < (parentFilter.limit ? parentFilter.limit : parentFilter.child.length) ?\n\t\t\t\t\t\t\t\t\t\t\t\t<label className=\"view-fliter-checkbox d-flex align-items-center mb-4\" key={childFilter.id}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"checkbox__input mr-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"checkbox\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname={childFilter.display}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={childFilter.display}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchecked={tempChildFilterIds.includes(childFilter.id) ? \"checked\" : \"\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={() => childChangeHandler(childFilter.id, parentFilter.id)} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"checkbox__control d-flex justify-content-center align-items-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i className=\"icon-check\"></i>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"radio__label text-sm\">{childFilter.display} {childFilter.count > 0 ? <>({childFilter.count})</> : null}</p>\n\t\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t\t\t\t\t: null\n\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t{(parentFilter.limit && (parentFilter.limit !== parentFilter.child.length) && (parentFilter.child.length - parentFilter.limit) > 0) ?\n\t\t\t\t\t\t\t\t\t\t<div className=\"filter-clear-all text-sm font-medium ml-4 pb-3\" onClick={() => changeParentLimitHandler(parentFilter.id)}>Show {parentFilter.child.length - parentFilter.limit} more</div>\n\t\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)\n\t\t\t\t\t\t\t: null}\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default GuestFilterMobile;\n","import React from 'react';\nimport { connect } from \"react-redux\";\nimport GuestSortFilter from \"../guest-sort-filter/GuestSortFilter\";\nimport './GuestSortSection.scss';\nimport { clearGuestViewFilter, setChildGuestViewFilter, setGuestViewProducts, clearViewGuestPaginationInfo } from \"../../GuestViewAction\";\nimport FilterItemChip from \"modules/my-registry/components/filter/filter-item-chip/FilterItemChip\";\nimport Button from \"../../../commons/components/button-component/ButtonComponent\";\nimport Modal from \"../../../commons/components/modal-component/ModalComponent\";\nimport GuestFilterMobile from \"../guest-filter/GuestFilterMobile\";\n\nclass GuestSortSection extends React.Component {\n\n  state = {\n    showGuestFilterModal: false,\n    guestChildFilter: [],\n    guestFilterProducts: [],\n    totalFilteredProducts: null\n  }\n\n  // Filter chips close handler\n  deleteChipHandler = async (isParent, childId) => {\n    if (isParent) {\n      await this.props.dispatch(clearGuestViewFilter())\n    } else {\n      const newChildArray = this.props.stateFilterApplied.childFilter.filter(element => {\n        return element !== childId\n      })\n      await this.props.dispatch(setChildGuestViewFilter(newChildArray))\n    }\n    await this.props.dispatch(clearViewGuestPaginationInfo())\n    await this.props.dispatch(setGuestViewProducts([]))\n    await this.props.setFilterhandler()\n  }\n\n  // Filter chips\n  getFilterChips = (stateFilterApplied) => {\n    let filterChips = {}\n    if (stateFilterApplied) {\n      let allChild = []\n      for (let filterCat of this.props.stateFilterCategory) {\n        for (let childCat of filterCat.child) {\n          allChild.push(childCat)\n        }\n      }\n      if (stateFilterApplied.childFilter) {\n        filterChips.childFilter = [...stateFilterApplied.childFilter].map(item => {\n          let finalAllChild = [...allChild].find(element => {\n            return element.id === item\n          })\n          return finalAllChild\n        })\n      }\n    }\n    return filterChips;\n  }\n\n  //Clear filter state\n  clearFilterHandler = async (ev) => {\n    ev.preventDefault()\n    await this.props.dispatch(clearGuestViewFilter())\n    await this.props.dispatch(clearViewGuestPaginationInfo())\n    await this.props.dispatch(setGuestViewProducts([]))\n    await this.props.setFilterhandler()\n  }\n  \n  //Clear Filter For Mobile\n  clearGuestFilterHandlerMobile = async () => {\n    await this.props.dispatch(clearGuestViewFilter())\n    await this.props.dispatch(clearViewGuestPaginationInfo())\n    await this.props.dispatch(setGuestViewProducts([]))\n    await this.props.setFilterhandler()\n  }\n\n  //filter previous states\n  viewGuestFilterStateHandler = () => {\n    this.setState({guestFilterProducts: this.props.guestFilterProducts})\n    this.setState({guestChildFilter: this.props.stateFilterApplied.childFilter});\n    this.setState({showGuestFilterModal: true});\n    this.setState({totalFilteredProducts: this.props.currTotalCount})\n  }\n\n  doneGuestViewFilterModal = () => {\n    this.setState({showGuestFilterModal: false})\n  }\n  \n  clearGuestViewFilterModal = () =>{\n    this.clearGuestFilterHandlerMobile()\n    this.doneGuestViewFilterModal()\n  }\n  \n  closeGuestViewFilterModal = () =>{\n    this.props.changeTotalCount(this.state.totalFilteredProducts);\n    this.props.dispatch(setGuestViewProducts([...this.state.guestFilterProducts]))\n    this.props.dispatch(setChildGuestViewFilter([...this.state.guestChildFilter]));\n    this.setState({showGuestFilterModal: false})\n  }\n  \n  //open modal\n  modalFooterButtons = (\n    <>\n      <Button\n        variant=\"secondary\"\n        className=\"px-3 py-1 font-weight-bold font-medium text-body\"\n        disabled={false}\n        onClick={this.clearGuestViewFilterModal}\n      >Clear</Button>\n      <Button\n        variant=\"primary\"\n        className=\"px-4 py-1 font-weight-bold font-medium text-body\"\n        disabled={false}\n        onClick={this.doneGuestViewFilterModal}\n      >Done</Button>\n    </>\n  )\n\n  render() {\n    let filterChips = this.getFilterChips(this.props.stateFilterApplied)\n\n    return (\n      <>\n        <div className=\"row\">\n          <div className=\"col\">\n            <h4 className=\"font-weight-bold mr-2 filter-section-total-items\">{this.props.productCount} {this.props.productCount === 1 ? \"Gift\" : \"Gifts\"}</h4>\n          </div>\n          <div className=\"col-5 filter-sort-section d-none d-lg-inline-block\">\n            <div className=\"d-flex justify-content-end\">\n              <div className=\"text-sm sort-by-text mr-2 align-self-center\">Sort by</div>\n              <GuestSortFilter />\n            </div>\n          </div>\n          <div className=\"d-inline-block d-lg-none\">\n            <Button className=\"px-1 pt-1 px-lg-3 d-inline-block d-lg-none mr-1\" variant=\"secondary\" onClick={this.viewGuestFilterStateHandler}>\n              <i className=\"icon-filter-1 filter-icon\" />\n            </Button>\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col-7\">\n            <div className=\"filtered-items\">\n              {filterChips.childFilter ?\n                filterChips.childFilter.map(item =>\n                  item ?\n                    <FilterItemChip\n                      text={item.display}\n                      className=\"mr-2\"\n                      key={filterChips.id + \"-\" + item.id}\n                      deleteHandler={() => this.deleteChipHandler(false, item.id)} /> : null)\n                : null}\n              {this.props.stateFilterApplied.childFilter.length > 0 ?\n                <a className=\"font-medium text-sm filter-clear-link\" href=\"#\" tabindex=\"0\"\n                  onClick={(ev) => this.clearFilterHandler(ev)}>Clear all</a>\n                : null}\n            </div>\n          </div>\n        </div>\n        <Modal\n          show={this.state.showGuestFilterModal}\n          title={\"Filters\"}\n          closeModal={this.closeGuestViewFilterModal}\n          footer={this.modalFooterButtons}\n          >\n          <GuestFilterMobile setFilterhandler={this.props.setFilterhandler} categoryFilterLimit={this.props.categoryFilterLimit}/>\n        </Modal>\n      </>\n    )\n  }\n}\n\n\nconst mapStateToProps = state => {\n  return {\n    stateViewRegistryProducts: state.guestView.product,\n    stateActiveSortFilter: state.guestView.activeGuestSortFilter,\n    stateGuestViewRegistry: state.guestView.guestViewRegistry,\n    stateRegistryInfo: state.guestView.info,\n    stateFilterApplied: state.guestView.guestViewFilterApplied,\n    stateFilterCategory: state.guestView.guestFilterCategory\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(GuestSortSection);\n","import React, { useState } from 'react'\nimport \"./GuestFilter.scss\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setChildGuestViewFilter, clearGuestViewFilter, setGuestViewFilterCategory, setGuestViewProducts, clearViewGuestPaginationInfo } from '../../GuestViewAction';\nimport { FILTERS } from \"utils/constants\";\n\nconst GuestFilter = (props) => {\n\n\tconst dispatch = useDispatch()\n\tlet tempParentFilterId = useSelector(state => state.guestView.guestViewFilterApplied.parentFilter)\n\tlet tempChildFilterIds = useSelector(state => state.guestView.guestViewFilterApplied.childFilter)\n\tlet stateAddedProducts = useSelector(state => state.guestView.product)\n\tconst stateCategoriesInfo = useSelector(state => state.guestView.checkList)\n\tlet stateFilterCategories = useSelector(state => state.guestView.guestFilterCategory)\n\tlet [filterCategoryLimit, setFilterCategoryLimit] = useState([])\n\n\tconst childChangeHandler = async (childId, parentId) => {\n\n\t\tif (parentId !== tempParentFilterId) {\n\t\t\tif (tempChildFilterIds.length > 0) {\n\t\t\t\tawait dispatch(setChildGuestViewFilter([]))\n\t\t\t}\n\t\t}\n\n\t\tconst childIndex = tempChildFilterIds.indexOf(childId)\n\n\t\tif (childIndex === -1) {\n\t\t\tawait dispatch(setChildGuestViewFilter([...tempChildFilterIds, childId]))\n\t\t} else {\n\t\t\tlet newChildArray = [...tempChildFilterIds]\n\t\t\tnewChildArray.splice(childIndex, 1)\n\t\t\tawait dispatch(setChildGuestViewFilter(newChildArray))\n\t\t}\n\t\tawait dispatch(clearViewGuestPaginationInfo())\n\t\tawait dispatch(setGuestViewProducts([]))\n\t\tprops.setFilterhandler()\n\t}\n\n\tconst clearClickHandler = async () => {\n\t\tawait dispatch(clearGuestViewFilter())\n\t\tawait dispatch(clearViewGuestPaginationInfo())\n\t\tawait dispatch(setGuestViewProducts([]))\n\t\tawait props.setFilterhandler()\n\t}\n\n\tconst changeParentLimitHandler = (parentFilterID) => {\n\t\tlet limitLength = null\n\t\tlet filterCategory = [...stateFilterCategories].map(parentFilter => {\n\t\t\tif (parentFilter.id === parentFilterID) {\n\t\t\t\tparentFilter.limit = parentFilter.child.length\n\t\t\t\tlimitLength = parentFilter.child.length\n\t\t\t}\n\t\t\treturn parentFilter\n\t\t})\n\t\tdispatch(setGuestViewFilterCategory(filterCategory))\n\n\t\tlet isFound = false\n\t\tlet newFilterCateoryLimit = [...filterCategoryLimit].map(categorylimit => {\n\t\t\tif (categorylimit.id === parentFilterID) {\n\t\t\t\tcategorylimit.limit = limitLength\n\t\t\t\tisFound = true\n\t\t\t\treturn categorylimit\n\t\t\t}\n\t\t\treturn categorylimit\n\t\t})\n\n\t\tprops.categoryFilterLimit(newFilterCateoryLimit);\n\t\tif (!isFound) {\n\t\t\tnewFilterCateoryLimit.push({ 'id': parentFilterID, 'limit': limitLength })\n\t\t}\n\t\tsetFilterCategoryLimit(newFilterCateoryLimit)\n\t}\n\n\treturn (\n\t\t<div className=\"view-filter\">\n\t\t\t<div className=\"view-filter-heading pb-1 d-flex align-items-baseline\">\n\t\t\t\t<h4 className=\"font-weight-bold\">Filters</h4>\n\t\t\t\t{tempChildFilterIds.length !== 0 ?\n\t\t\t\t\t<a tabindex='0' className=\"filter-clear-all text-sm font-medium ml-auto\" onClick={() => clearClickHandler()}>Clear all</a> : null\n\t\t\t\t}\n\t\t\t</div>\n\t\t\t<div className=\"d-flex flex-column\">\n\t\t\t\t{[...stateFilterCategories].map(parentFilter => (\n\t\t\t\t\t<div className=\"filter-item\" key={\"filter-\" + parentFilter.id}>\n\t\t\t\t\t\t{/* Parent filter */}\n\t\t\t\t\t\t<div className=\"text-body filter-title pt-5 d-flex\">{parentFilter.display}</div>\n\n\t\t\t\t\t\t{/* Child filter */}\n\t\t\t\t\t\t{parentFilter.child ? (\n\t\t\t\t\t\t\t<div className=\"d-flex flex-column mt-2\" key={\"child-filter-\" + parentFilter.id}>\n\t\t\t\t\t\t\t\t<div className=\"mt-3 fliter-checkbox-section\">\n\t\t\t\t\t\t\t\t\t{parentFilter.child.map((childFilter, index) => (\n\t\t\t\t\t\t\t\t\t\tchildFilter.count > 0 ?\n\t\t\t\t\t\t\t\t\t\t\tindex < (parentFilter.limit ? parentFilter.limit : parentFilter.child.length) ?\n\t\t\t\t\t\t\t\t\t\t\t\t<label className=\"view-fliter-checkbox d-flex align-items-center mb-4\" key={childFilter.id}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"checkbox__input mr-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"checkbox\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname={childFilter.display}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={childFilter.display}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchecked={tempChildFilterIds.includes(childFilter.id) ? \"checked\" : \"\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={() => childChangeHandler(childFilter.id, parentFilter.id)} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"checkbox__control d-flex justify-content-center align-items-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i className=\"icon-check\"></i>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"radio__label text-sm\">{childFilter.display} {childFilter.count > 0 ? <>({childFilter.count})</> : null}</p>\n\t\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t\t\t\t\t: null\n\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t{(parentFilter.limit && (parentFilter.limit !== parentFilter.child.length) && (parentFilter.child.length - parentFilter.limit) > 0) ?\n\t\t\t\t\t\t\t\t\t\t<div className=\"filter-clear-all text-sm font-medium ml-4 pb-3\" onClick={() => changeParentLimitHandler(parentFilter.id)}>Show {parentFilter.child.length - parentFilter.limit} more</div>\n\t\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)\n\t\t\t\t\t\t\t: null}\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default GuestFilter;\n","import React from \"react\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport 'react-toastify/dist/ReactToastify.css';\nimport './Toast.scss';\n\nconst Toast = () => {\n  const closeToastMessage = (parentId) => {\n    toast.dismiss(parentId);\n  }\n\n  return (\n    <ToastContainer\n      position=\"top-center\"\n      className=\"m-a-toast-container\"\n      toastClassName=\"m-a-toast\"\n      autoClose={4000}\n      hideProgressBar={true}\n      newestOnTop={true}\n      draggable={false}\n      closeOnClick={false}\n      closeButton={<i className=\"icon-close m-a-toast-close\" onClick={(event) => closeToastMessage(event.target.parentElement.id)} />}\n    />\n  )\n}\n\nexport default Toast;","import React from \"react\";\nimport \"./RedirectionScreen.scss\";\n\nconst RedirectionScreen = props => {\n  return (\n    <div className=\"track-gifts-redirection-screen text-center pt-12 mx-auto\">\n      <h1 className=\"track-gifts-redirection-screen-title\">{`Youre on your way to ${props.store}`}</h1>\n      <h4 className=\"mt-1 track-gifts-redirection-screen-desc\">Dont forget to come back to Monica+Andy to tell us if you bought this gift. Well make sure it doesnt get bought twice.</h4>\n    </div>\n  )\n}\n\nexport default RedirectionScreen;","import React from \"react\";\nimport \"./GuestView.scss\";\nimport { connect } from \"react-redux\";\nimport { updateGuestViewRegistry, getGuestCategories } from \"../../utils/commonFunction\";\nimport Button from \"../commons/components/button-component/ButtonComponent\";\nimport GuestViewHeader from \"./containers/guest-view-header/GuestViewHeader\";\nimport GuestSortSection from \"./containers/guest-sort/GuestSortSection\";\nimport GuestViewCard from \"./components/GuestViewCard\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport { VIEW_GIFT_PRODUCTS_PER_REQUEST } from \"utils/constants\";\nimport { setGuestViewProducts, setViewGuestPaginationInfo, updateGuestViewInfo, setGuestViewFilterCategory, clearViewGuestPaginationInfo, setChildGuestViewFilter } from './GuestViewAction';\nimport { GET_GUEST_REGISTRY_PRODUCT } from 'api/queries';\nimport { MEDIA_URL_PREFIX } from \"utils/constants\";\nimport { graphQL } from 'api/axios';\nimport GuestFilter from './containers/guest-filter/GuestFilter';\nimport { FILTERS } from \"utils/constants\";\nimport Toast from \"modules/commons/components/toast/Toast\";\nimport RedirectionScreen from \"modules/track-gifts/components/redirection-screen/RedirectionScreen\";\nimport { M_A_BABY_PRODUCT_LINK } from 'utils/constants';\nimport Modal from \"modules/commons/components/modal-component/ModalComponent\";\nimport { setLoader } from \"modules/registry/RegistryActions\";\nimport ViewRegistryHeader from \"modules/view-registry/containers/view-registry-header/ViewRegistryHeader\";\n\n\nclass GuestView extends React.Component {\n\n  state = {\n    isFirstTime: true,\n    filterCategoryLimit: [],\n    isSendMessageModalOpen: false,\n    errors: {},\n    subject: '',\n    message: '',\n    totalProductCount: null\n  }\n\n  BABY_GIFTS_URL = \"https://monicaandandy.com/collections/baby-gifts\"\n\n  // Constant variables for filters\n  AVAILABLE = \"available\"\n  RESERVED = \"reserved\"\n  PURCHASED = \"purchased\"\n  PRICE_1 = \"price-1\"\n  PRICE_2 = \"price-2\"\n  PRICE_3 = \"price-3\"\n  MONICA_AND_ANDY = \"monicaandandy\"\n  ELSEWHERE = \"elsewhere\"\n\n  componentDidMount() {\n    updateGuestViewRegistry(this.props.urlSlug ? this.props.urlSlug : this.props.match.params.registrySlug, this.props.dispatch)\n  }\n\n  getLimitOfFliter = (parentId) => {\n    let limit = null\n    const filterCategory = [...this.state.filterCategoryLimit]\n    for (let category of filterCategory) {\n      if (parentId === category.id && category.limit) {\n        limit = category.limit\n      }\n    }\n    return limit\n  }\n\n  // Updating product count in filter categories\n  updateFilterList = (registryItemsAnalysisCount, categoryData) => {\n\n    let newFilterList = [\n      {\n        id: \"giftStatus\",\n        display: \"Gift Status\",\n        child: [\n          {\n            id: this.AVAILABLE,\n            display: FILTERS.AVAILABLE_DISPLAY,\n            count: registryItemsAnalysisCount.totalAvailable\n          },\n          {\n            id: this.RESERVED,\n            display: FILTERS.RESERVED_DISPLAY,\n            count: registryItemsAnalysisCount.totalReserved\n          },\n          {\n            id: this.PURCHASED,\n            display: FILTERS.PURCHASED_DISPLAY,\n            count: registryItemsAnalysisCount.totalPurchased\n          }\n        ]\n      },\n      {\n        id: \"categories\",\n        display: FILTERS.CATEGORIES_DISPLAY,\n        limit: this.getLimitOfFliter(\"categories\") ? this.getLimitOfFliter(\"categories\") : 6,\n        child: [...this.props.stateCategoriesInfo].filter(category => {\n          let id = category.category.id\n          let count = categoryData[id]\n          if (count > 0) {\n            return true\n          }\n        }).map(category => {\n          let newCategory = { ...category }\n          let id = category.category.id\n          newCategory.id = category.category.id\n          newCategory['display'] = newCategory.categoryName\n          newCategory['count'] = categoryData[id]\n          return newCategory\n        })\n      },\n      {\n        id: \"price\",\n        display: FILTERS.PRICE_DISPLAY,\n        child: [\n          {\n            id: this.PRICE_1,\n            display: FILTERS.PRICE_DISPLAY_1,\n            count: registryItemsAnalysisCount.under50\n          },\n          {\n            id: this.PRICE_2,\n            display: FILTERS.PRICE_DISPLAY_2,\n            count: registryItemsAnalysisCount.between50100\n          },\n          {\n            id: this.PRICE_3,\n            display: FILTERS.PRICE_DISPLAY_3,\n            count: registryItemsAnalysisCount.moreThan100\n          }\n        ]\n      },\n      {\n        id: \"store\",\n        display: FILTERS.STORE_DISPLAY,\n        child: [\n          {\n            id: this.MONICA_AND_ANDY,\n            display: FILTERS.MONICA_AND_ANDY_DISPLAY,\n            count: registryItemsAnalysisCount.maStoreItems\n          },\n          {\n            id: this.ELSEWHERE,\n            display: FILTERS.ELSEWHERE_DISPLAY,\n            count: registryItemsAnalysisCount.otherStoreItems\n          },\n        ]\n      },\n\n    ]\n\n    // Removing All other applied filters\n    let allChildFilterCat = []\n    for (let filterCat of newFilterList) {\n      for (let childCat of filterCat.child) {\n        allChildFilterCat.push(childCat)\n      }\n    }\n    let finalFilterApplied = []\n    for (let item of this.props.stateFilterApplied) {\n      for (let ele of allChildFilterCat) {\n        if (ele.id === item && ele.count > 0) {\n          finalFilterApplied.push(item)\n        }\n      }\n    }\n    // Setting total Product Count\n    if ((this.props.stateFilterApplied.includes(this.MONICA_AND_ANDY) && this.props.stateFilterApplied.includes(this.ELSEWHERE))\n      || (!this.props.stateFilterApplied.includes(this.MONICA_AND_ANDY) && !this.props.stateFilterApplied.includes(this.ELSEWHERE))\n    ) {\n      this.setState({\n        totalProductCount: (registryItemsAnalysisCount.maStoreItems + registryItemsAnalysisCount.otherStoreItems)\n      })\n    }\n    else if (this.props.stateFilterApplied.includes(this.MONICA_AND_ANDY)) {\n      this.setState({\n        totalProductCount: registryItemsAnalysisCount.maStoreItems\n      })\n    }\n    else if (this.props.stateFilterApplied.includes(this.ELSEWHERE)) {\n      this.setState({\n        totalProductCount: registryItemsAnalysisCount.otherStoreItems\n      })\n    }\n\n    this.props.dispatch(setChildGuestViewFilter(finalFilterApplied))\n\n    this.props.dispatch(setGuestViewFilterCategory(newFilterList))\n    return newFilterList\n  }\n\n  getFiltersApplied = (stateFilterApplied, activeSortFilterState) => {\n    const childFilterArray = [...stateFilterApplied]\n    let filterApplied = {}\n    // For Gift Status\n    if (childFilterArray.includes(this.AVAILABLE)) {\n      filterApplied.isAvailable = true\n    }\n    if (childFilterArray.includes(this.RESERVED)) {\n      filterApplied.isReserved = true\n    }\n    if (childFilterArray.includes(this.PURCHASED)) {\n      filterApplied.isPurchased = true\n    }\n\n    // For Sort\n    if (activeSortFilterState.sortId === 2) {\n      filterApplied.sortBy = 'item__price'\n    } else if (activeSortFilterState.sortId === 3) {\n      filterApplied.sortBy = '-item__price'\n    }\n\n    // For Store\n    let store = []\n    if (childFilterArray.includes(this.MONICA_AND_ANDY)) {\n      store.push(this.MONICA_AND_ANDY)\n    }\n    if (childFilterArray.includes(this.ELSEWHERE)) {\n      store.push(this.ELSEWHERE)\n    }\n    if (store.length) {\n      filterApplied.store = store\n    }\n\n    let lessThanEqual = 0\n    let greaterThanEqual = 0\n    let hasPriceFilter = false\n    // For Price\n    if (childFilterArray.includes(this.PRICE_1) &&\n      childFilterArray.includes(this.PRICE_2) &&\n      childFilterArray.includes(this.PRICE_3)) {\n      greaterThanEqual = 0\n      hasPriceFilter = true\n    }\n    else if (childFilterArray.includes(this.PRICE_1) &&\n      childFilterArray.includes(this.PRICE_2)) {\n      lessThanEqual = 100\n      hasPriceFilter = true\n    }\n    else if (childFilterArray.includes(this.PRICE_1) &&\n      childFilterArray.includes(this.PRICE_3)) {\n      lessThanEqual = 49\n      greaterThanEqual = 100\n      hasPriceFilter = true\n    }\n    else if (childFilterArray.includes(this.PRICE_2) &&\n      childFilterArray.includes(this.PRICE_3)) {\n      greaterThanEqual = 50\n      hasPriceFilter = true\n    }\n    else if (childFilterArray.includes(this.PRICE_1)) {\n      lessThanEqual = 49\n      hasPriceFilter = true\n    }\n    else if (childFilterArray.includes(this.PRICE_2)) {\n      greaterThanEqual = 50\n      lessThanEqual = 100\n      hasPriceFilter = true\n    }\n    else if (childFilterArray.includes(this.PRICE_3)) {\n      greaterThanEqual = 100\n      hasPriceFilter = true\n    }\n    if (hasPriceFilter) {\n      filterApplied.price_Lte = lessThanEqual\n      filterApplied.price_Gte = greaterThanEqual\n    }\n\n    let categories = []\n    // For categories\n    for (let cat of [...this.props.stateCategoriesInfo]) {\n      if (childFilterArray.includes(cat.category.id)) {\n        categories.push(cat.category.id)\n      }\n    }\n    if (categories.length) {\n      filterApplied.categories = categories\n    }\n\n    return filterApplied\n  }\n\n  updateGuestViewRegistryProduct = async (urlSlug, first = VIEW_GIFT_PRODUCTS_PER_REQUEST, emptyAllProduct = false) => {\n    this.props.dispatch(setLoader(true))\n    let filtersApplied = this.getFiltersApplied(this.props.stateFilterApplied, this.props.activeSortFilterState)\n    let clearAllProduct = false\n    if (emptyAllProduct) {\n      await this.props.dispatch(clearViewGuestPaginationInfo())\n      await this.props.dispatch(setGuestViewProducts([]))\n    }\n    if (this.props.stateGuestViewPagination.endCursor === null) {\n      clearAllProduct = true\n    }\n    let reqData = {\n      query: GET_GUEST_REGISTRY_PRODUCT,\n      variables: {\n        urlSlug: urlSlug,\n        after: this.props.stateGuestViewPagination.endCursor,\n        first: first,\n        ...filtersApplied\n      }\n    }\n\n    await graphQL(reqData).then(async res => {\n      if (res.data.data.registryAsGuest) {\n        if (emptyAllProduct || this.props.stateGuestViewPagination.endCursor === null) {\n          await this.props.dispatch(setGuestViewProducts([]))\n        }\n\n        // Storing Product of GuestView\n        let responseData = [...res.data.data.registryAsGuest.registryItems.edges].map(item => {\n          let newItemObj = { ...item.node }\n          delete newItemObj.registryitemImage;\n          if (item.node.registryitemImage.length > 0) {\n            newItemObj.imageUrl = (MEDIA_URL_PREFIX.LOCAL_MEDIA_URL ? MEDIA_URL_PREFIX.LOCAL_MEDIA_URL : \"\") + item.node.registryitemImage[0].image;\n          }\n          return newItemObj;\n        })\n        let finalData = responseData.filter(product => product.registryCategories.length > 0)\n        if (!(emptyAllProduct || this.props.stateGuestViewPagination.endCursor === null || clearAllProduct)) {\n          finalData = [...this.props.stateAddedProducts, ...finalData]\n        }\n        await this.props.dispatch(setGuestViewProducts([...finalData]))\n\n        // Storing PagenationInfo\n        let pagenationInfo = { ...res.data.data.registryAsGuest.registryItems.pageInfo }\n        await this.props.dispatch(setViewGuestPaginationInfo(pagenationInfo))\n\n        await this.updateFilterList({ ...res.data.data.registryAsGuest.registryItemsAnalysisCount }, { ...res.data.data.registryAsGuest.categoryData })\n\n        // Setting is all purcashed flag\n        let guestViewInfo = { ...this.props.stateGuestViewRegistry }\n        guestViewInfo.isAllGiftsPurchased = res.data.data.registryAsGuest.isAllGiftsPurchased\n        await this.props.dispatch(updateGuestViewInfo(guestViewInfo))\n\n        this.props.dispatch(setLoader(false))\n      }\n    }).catch(err => {\n      this.props.dispatch(updateGuestViewInfo({ notFound: true }))\n      this.props.dispatch(setLoader(false))\n      if (err.response && err.response.data.errors) {\n        for (const error of err.response.data.errors) {\n          // TODO: Implement toast if necessary\n          console.log(error.message)\n        }\n      }\n    })\n  }\n\n  filterCategoryLimitHandler = (limitData) => {\n    this.setState({ filterCategoryLimit: limitData })\n  }\n\n  sortByHighToLow = (productList) => {\n    return productList.sort((a, b) => { return b.item.price - a.item.price });\n  }\n\n  sortByLowToHigh = (productList) => {\n    return productList.sort((a, b) => { return a.item.price - b.item.price });\n  }\n\n  getSortedFilteredProducts = (guestProducts, activeSortFilterState, filterApplied) => {\n    let sortedProducts = [];\n    if (activeSortFilterState.sortId === 1) {\n      sortedProducts = [...guestProducts]\n    }\n\n    else if (activeSortFilterState.sortId === 2) {\n      sortedProducts = this.sortByLowToHigh([...guestProducts])\n    }\n    else if (activeSortFilterState.sortId === 3) {\n      sortedProducts = this.sortByHighToLow([...guestProducts])\n    }\n\n    return sortedProducts;\n  }\n\n  getdataForFirstTime = async () => {\n    await getGuestCategories(this.props.urlSlug ? this.props.urlSlug : this.props.match.params.registrySlug, this.props.dispatch)\n    await this.props.dispatch(clearViewGuestPaginationInfo())\n    await this.updateGuestViewRegistryProduct(this.props.urlSlug ? this.props.urlSlug : this.props.match.params.registrySlug, VIEW_GIFT_PRODUCTS_PER_REQUEST, true)\n  }\n\n  // Validate Send message data\n  validSendMessageData = () => {\n    let errors = {}\n    let valid = true\n    if (this.state.subject.length <= 0) {\n      errors['subject'] = \"This field is mandatory\"\n      valid = false\n    }\n\n    if (this.state.message.length <= 0) {\n      errors['message'] = \"This field is mandatory\"\n      valid = false\n    }\n\n    this.setState({\n      errors: errors\n    })\n    return valid\n  }\n\n  subjectChangeHandler = (ev) => {\n    let errors = { ...this.state.errors }\n    if (errors.subject) {\n      delete errors.subject\n    }\n\n    ev.persist();\n    this.setState({\n      subject: ev.target.value\n    })\n  }\n\n  messageChangeHandler = (ev) => {\n    let errors = { ...this.state.errors }\n    if (errors.message) {\n      delete errors.message\n    }\n\n    ev.persist();\n    if (ev.target.value.length <= 280) {\n      this.setState({\n        message: ev.target.value\n      })\n    }\n  }\n\n  sendMessageHandler = () => {\n    if (!this.validSendMessageData()) {\n      return false\n    }\n    // TODO: API call when its done\n  }\n\n  setTotalCount = (num) => {\n    this.setState({ totalProductCount: num });\n  }\n  render() {\n\n    if (this.props.stateGuestGiftsRedirectionInfo.store) {\n      return (\n        <RedirectionScreen store={this.props.stateGuestGiftsRedirectionInfo.store} />\n      )\n    }\n\n    // if (this.props.stateGuestViewRegistry.urlSlug !== this.props.match.params.registrySlug) {\n    //   updateGuestViewRegistry(this.props.match.params.registrySlug, this.props.dispatch)\n    // }\n\n    // When registry doesn't exists\n    if (this.props.stateGuestViewRegistry.notFound) {\n      return <h1>Registry not found</h1>;\n    }\n\n    if (this.props.stateGuestViewRegistry.id) {\n      // When registry exists and it is not public\n      if (this.props.stateGuestViewRegistry.isPublic === false && !this.props.urlSlug) {\n        let registryUsers = [this.props.stateGuestViewRegistry.user.firstName]\n        if (this.props.stateGuestViewRegistry.user.partnerUser) {\n          registryUsers.push(this.props.stateGuestViewRegistry.user.partnerUser.firstName)\n        }\n        return (\n          <div className=\"container mt-17\">\n            <div className=\"row\">\n              <div className=\"col text-center\">\n                <h1>{this.props.stateGuestViewRegistry.displayName}</h1>\n                {/*TODO: Display partner name as well below*/}\n                {registryUsers.length === 1 ? <h4 className=\"guest-view-curator-names mt-2\"><span className=\"text-capitalize\">{registryUsers[0]}</span> is still curating their baby registry.</h4> : null}\n                {registryUsers.length === 2 ? <h4 className=\"guest-view-curator-names mt-2\"><span className=\"text-capitalize\">{registryUsers[0]}</span> and <span className=\"text-capitalize\">{registryUsers[1]}</span> are still curating their baby registry.</h4> : null}\n\n                <Button\n                  variant=\"primary\"\n                  className=\"py-1 px-2 mt-3 text-body font-medium\"\n                  onClick={() => window.location.href = this.BABY_GIFTS_URL}\n                >Shop baby Gifts</Button>\n              </div>\n            </div>\n          </div>\n        )\n      } else {\n\n        let filteredSortProducts = this.getSortedFilteredProducts(this.props.stateAddedProducts, this.props.activeSortFilterState, this.props.stateFilterApplied)\n\n        // Fetching product for first time\n        if (this.state.isFirstTime && this.props.stateAddedProducts.length <= 0 && this.props.stateGuestViewRegistry.urlSlug) {\n          this.setState({\n            isFirstTime: false\n          })\n          this.getdataForFirstTime()\n          // this.updateFilterList(this.props.stateAddedProducts)\n        }\n\n        let modalTitle = (\n          <div className=\"font-heading\">Send a message</div>\n        )\n        let modalBody = (\n          <>\n            <div className=\"row mt-3\">\n              <div className=\"col m-a-input-container\">\n                <p className=\"text-sm mb-1 font-medium add-gift-store-label guest-view-required\">Subject</p>\n                <input\n                  type=\"text\"\n                  className={[\"w-100 mt-1 px-2 py-1 mb-0 text-body\", this.state.errors.subject ? \"already-bought-input-error\" : \"\"].join(\" \")}\n                  value={this.state.subject}\n                  onChange={(ev) => this.subjectChangeHandler(ev)}\n                />\n                {this.state.errors.subject ?\n                  <span\n                    className=\"text-sm already-bought-input-error-text\">{this.state.errors.subject}</span>\n                  : null}\n              </div>\n            </div>\n            <div className=\"row\">\n              <div className=\"col mt-6 m-a-input-container\">\n                <div className=\"d-flex mb-1\">\n                  <p className=\"text-sm font-medium add-gift-store-label guest-view-required\">Message</p>\n                  <p className=\"text-sm ml-auto send-massagee-txt-secondary\">Max. 280 chars</p>\n                </div>\n                <textarea className=\"w-100 text-body p-1 mb-6 m-a-resize-textarea\"\n                  rows=\"2\"\n                  placeholder={('Write a message for ') + (this.props.stateGuestViewRegistry.user.firstName ? this.props.stateGuestViewRegistry.user.firstName : '') + (this.props.stateGuestViewRegistry.user.partnerUser ? ' and' + this.props.stateGuestViewRegistry.user.partnerUser.firstName : '') + '.'}\n                  value={this.state.message}\n                  onChange={(ev) => this.messageChangeHandler(ev)}\n                />\n                {this.state.errors.message ?\n                  <span\n                    className=\"text-sm already-bought-input-error-text\">{this.state.errors.subject}</span>\n                  : null}\n              </div>\n            </div>\n            <div className=\"text-right\">\n              <Button\n                variant=\"primary\"\n                disabled={this.state.subject.length <= 0 || this.state.message.length <= 0}\n                className=\"py-1 px-2 text-body font-medium\"\n                onClick={() => this.sendMessageHandler()}\n              >Send & Close</Button>\n            </div>\n          </>\n        )\n\n        // When registry exists and it is public\n        return (\n          <>\n            {this.props.urlSlug ?\n              <ViewRegistryHeader />\n              :\n              <GuestViewHeader />\n            }\n            <div className=\"container mt-7\">\n              <div className=\"row\">\n                <div className=\"col-2 d-none d-lg-inline-block\">\n                  <GuestFilter setFilterhandler={() => this.updateGuestViewRegistryProduct(this.props.urlSlug ? this.props.urlSlug : this.props.match.params.registrySlug)} categoryFilterLimit={this.filterCategoryLimitHandler} />\n                </div>\n                <div className=\"col\"></div>\n                <div className=\"col-12 col-lg-9\">\n                  {/* When all products are purchased */}\n                  {this.props.stateGuestViewRegistry.isAllGiftsPurchased ?\n                    <div className=\"my-7 pt-6 pb-7 guest-all-purchased-card text-center text-center\">\n                      <div className=\"font-heading guest-all-purchased-card-heading mx-auto\">100% complete! {this.props.stateGuestViewRegistry.user.firstName} {this.props.stateGuestViewRegistry.user.partnerUser ? 'and' + this.props.stateGuestViewRegistry.user.partnerUser.firstName : ''} have received everything on their registry.</div>\n                      <div className=\"d-flex mt-4 justify-content-center align-items-center\">\n                        <h4>\n                          <a\n                            className=\"font-medium guest-all-purchased-card-link\"\n                            tabindex=\"0\"\n                            onClick={() => this.setState({ isSendMessageModalOpen: true })}\n                          >Send A Message</a>\n                        </h4>\n                        <h4 className=\"ml-1 guest-all-purchased-card-txt\">or</h4>\n                        <a\n                          className=\"ml-3 px-3 py-1 guest-all-purchased-card-btn text-body font-medium d-inline-block\"\n                          href={M_A_BABY_PRODUCT_LINK}\n                          target='_blank'\n                          tabindex=\"0\"\n                        >Shop Baby Gifts</a>\n                      </div>\n                    </div> : null}\n                  <GuestSortSection\n                    productCount={this.state.totalProductCount}\n                    setFilterhandler={() => this.updateGuestViewRegistryProduct(this.props.urlSlug ? this.props.urlSlug : this.props.match.params.registrySlug)}\n                    categoryFilterLimit={this.filterCategoryLimitHandler}\n                    guestFilterProducts={filteredSortProducts}\n                    currTotalCount={this.state.totalProductCount}\n                    changeTotalCount={this.setTotalCount}\n                  />\n\n                  <div className=\"mt-5\">\n                    <InfiniteScroll\n                      next={() => this.updateGuestViewRegistryProduct(this.props.urlSlug ? this.props.urlSlug : this.props.match.params.registrySlug)}\n                      hasMore={this.props.stateGuestViewPagination.hasNextPage}\n                      loader={<h4>Loading...</h4>}\n                      dataLength={this.props.stateAddedProducts.length}\n                      style={{ overflow: \"hidden\" }}\n                    >\n\n                      {filteredSortProducts.length > 0 ?\n                        filteredSortProducts.map((card, index) =>\n                          <GuestViewCard\n                            data={card}\n                            key={\"addedCard\" + index}\n                            updateGuestViewProduct={this.updateGuestViewRegistryProduct}\n                          />) : null}\n                    </InfiniteScroll>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <Toast />\n            <Modal\n              size='md'\n              show={this.state.isSendMessageModalOpen}\n              title={modalTitle}\n              closeModal={() => this.setState({ isSendMessageModalOpen: false })}>\n              {modalBody}\n            </Modal>\n          </>\n        )\n      }\n    }\n\n\n    // Default return\n    return <></>\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    stateGuestViewRegistry: state.guestView.info,\n    stateAddedProducts: state.guestView.product,\n    activeSortFilterState: state.guestView.activeGuestSortFilter,\n    stateFilterApplied: state.guestView.guestViewFilterApplied.childFilter,\n    stateGuestViewPagination: state.guestView.paginationInfo,\n    stateCategoriesInfo: state.guestView.checkList,\n    stateGuestGiftsRedirectionInfo: state.guestView.redirectionInfo,\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(GuestView);","import React, { useEffect, useState } from \"react\";\nimport ViewRegistryHeader from \"../view-registry-header/ViewRegistryHeader\";\nimport AddedCard from \"modules/commons/components/added-card/AddedCard\";\nimport { toggleMustHaveProduct, removeProductFromCartHandler, getProducts, updateViewRegistryPosition, getCategories, updateViewRegistryTourFlag, updateMushHaveTourFlag } from \"utils/commonFunction\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport SortFilterSection from '../../components/sort-filter-section/SortFilterSection';\nimport { setViewRegistryProducts, clearViewFilter, setViewFilterCategory, setChildViewFilter } from '../../ViewRegistryActions';\nimport {\n  sortableContainer,\n  sortableElement,\n} from 'react-sortable-hoc';\nimport arrayMove from 'array-move';\nimport './ViewRegistryHome.scss';\nimport ViewFilter from \"modules/view-registry/components/view-filter/ViewFilter\";\nimport Button from \"modules/commons/components/button-component/ButtonComponent\";\nimport { FILTERS } from \"utils/constants\"\nimport { MEDIA_URL_PREFIX } from \"utils/constants\";\nimport { graphQL } from 'api/axios';\nimport { GET_PRODUCTS } from 'api/queries';\nimport { TOUR_UPDATE_FLAG } from 'api/mutations';\nimport GuestViewCard from \"modules/guest-view/components/GuestViewCard\";\nimport Tour from 'reactour';\nimport TourCard from 'modules/commons/components/tour-card/TourCard';\nimport { VIEW_REGISTRY_STEPS, MUST_HAVE_STEPS } from 'utils/constants';\nimport AddGift from \"modules/commons/components/add-gift/AddGift\";\nimport { setLoader, updateRegistryInfo } from \"modules/registry/RegistryActions\";\nimport GuestView from \"modules/guest-view/GuestView\";\n\nconst ViewRegistryHome = () => {\n\n  const dispatch = useDispatch()\n  let stateAddedProducts = useSelector(state => state.myRegistry.addedProducts)\n  let stateViewRegistryProducts = useSelector(state => state.viewRegistry.viewRegistryProducts)\n  const activeSortFilterState = useSelector(state => state.viewRegistry.activeSortFilter)\n  const stateFilterApplied = useSelector(state => state.viewRegistry.viewFilterApplied.childFilter)\n  const stateRegistryInfo = useSelector(state => state.registry.info)\n  const stateCategoriesInfo = useSelector(state => state.myRegistry.checkList)\n  const stateGuestViewRegistry = useSelector(state => state.viewRegistry.guestViewRegistry)\n  let filterCountState = useSelector(state => state.myRegistry.filterCount)\n  const [localAddedProductState, handleFilterProductChange] = useState([])\n  let [filterCategoryLimit, setFilterCategoryLimit] = useState([])\n  const [isTourOpen, setIsTourOpen] = useState(false)\n  const [isMustHaveTour, setIsMustHaveTour] = useState(false)\n  const [steps, setSteps] = useState([])\n  const [totalProductCount, setTotalProductCount] = useState(null)\n\n  // Constant variables for filters\n  const AVAILABLE = \"available\"\n  const RESERVED = \"reserved\"\n  const PURCHASED = \"purchased\"\n  const PRICE_1 = \"price-1\"\n  const PRICE_2 = \"price-2\"\n  const PRICE_3 = \"price-3\"\n  const MONICA_AND_ANDY = \"monicaandandy\"\n  const ELSEWHERE = \"elsewhere\"\n\n  // Updating product count in filter categories\n  const updateFilterList = (registryItemsAnalysisCount, categoryData, filterApplied) => {\n\n    let newFilterList = [\n      {\n        id: \"giftStatus\",\n        display: \"Gift Status\",\n        child: [\n          {\n            id: AVAILABLE,\n            display: FILTERS.AVAILABLE_DISPLAY,\n            count: registryItemsAnalysisCount.totalAvailable\n          },\n          {\n            id: RESERVED,\n            display: FILTERS.RESERVED_DISPLAY,\n            count: registryItemsAnalysisCount.totalReserved\n          },\n          {\n            id: PURCHASED,\n            display: FILTERS.PURCHASED_DISPLAY,\n            count: registryItemsAnalysisCount.totalPurchased\n          }\n        ]\n      },\n      {\n        id: \"categories\",\n        display: FILTERS.CATEGORIES_DISPLAY,\n        // limit: getLimitOfFliter(\"categories\") ? getLimitOfFliter(\"categories\") : 6,\n        child: [...stateCategoriesInfo].filter(category => {\n          let id = category.category.id\n          let count = categoryData[id]\n          if (count > 0) {\n            return true\n          }\n        }).map(category => {\n          let newCategory = { ...category }\n          let id = category.category.id\n          newCategory.id = category.category.id\n          newCategory['display'] = newCategory.categoryName\n          newCategory['count'] = categoryData[id]\n          return newCategory\n        })\n      },\n      {\n        id: \"price\",\n        display: FILTERS.PRICE_DISPLAY,\n        child: [\n          {\n            id: PRICE_1,\n            display: FILTERS.PRICE_DISPLAY_1,\n            count: registryItemsAnalysisCount.under50\n          },\n          {\n            id: PRICE_2,\n            display: FILTERS.PRICE_DISPLAY_2,\n            count: registryItemsAnalysisCount.between50100\n          },\n          {\n            id: PRICE_3,\n            display: FILTERS.PRICE_DISPLAY_3,\n            count: registryItemsAnalysisCount.moreThan100\n          }\n        ]\n      },\n      {\n        id: \"store\",\n        display: FILTERS.STORE_DISPLAY,\n        child: [\n          {\n            id: MONICA_AND_ANDY,\n            display: FILTERS.MONICA_AND_ANDY_DISPLAY,\n            count: registryItemsAnalysisCount.maStoreItems\n          },\n          {\n            id: ELSEWHERE,\n            display: FILTERS.ELSEWHERE_DISPLAY,\n            count: registryItemsAnalysisCount.otherStoreItems\n          },\n        ]\n      },\n\n    ]\n\n    // Removing All other applied filters\n    let allChildFilterCat = []\n    for (let filterCat of newFilterList) {\n      for (let childCat of filterCat.child) {\n        allChildFilterCat.push(childCat)\n      }\n    }\n    let finalFilterApplied = []\n    for (let item of filterApplied) {\n      for (let ele of allChildFilterCat) {\n        if (ele.id === item && ele.count > 0) {\n          finalFilterApplied.push(item)\n        }\n      }\n    }\n\n    // Setting total Product Count\n    if ((finalFilterApplied.includes(MONICA_AND_ANDY) && finalFilterApplied.includes(ELSEWHERE))\n      || (!finalFilterApplied.includes(MONICA_AND_ANDY) && !finalFilterApplied.includes(ELSEWHERE))\n    ) {\n      setTotalProductCount(registryItemsAnalysisCount.maStoreItems + registryItemsAnalysisCount.otherStoreItems)\n    }\n    else if (finalFilterApplied.includes(MONICA_AND_ANDY)) {\n      setTotalProductCount(registryItemsAnalysisCount.maStoreItems)\n    }\n    else if (finalFilterApplied.includes(ELSEWHERE)) {\n      setTotalProductCount(registryItemsAnalysisCount.otherStoreItems)\n    }\n    dispatch(setChildViewFilter(finalFilterApplied))\n    dispatch(setViewFilterCategory(newFilterList))\n    return newFilterList\n  }\n\n  const getFiltersApplied = (stateFilterApplied, activeSortFilterState) => {\n    const childFilterArray = [...stateFilterApplied]\n    let filterApplied = {}\n    // For Gift Status\n    if (childFilterArray.includes(AVAILABLE)) {\n      filterApplied.isAvailable = true\n    }\n    if (childFilterArray.includes(RESERVED)) {\n      filterApplied.isReserved = true\n    }\n    if (childFilterArray.includes(PURCHASED)) {\n      filterApplied.isPurchased = true\n    }\n\n    // For Sort\n    if (activeSortFilterState.sortId === 2) {\n      filterApplied.sortBy = 'item__price'\n    } else if (activeSortFilterState.sortId === 3) {\n      filterApplied.sortBy = '-item__price'\n    }\n\n    // For Store\n    let store = []\n    if (childFilterArray.includes(MONICA_AND_ANDY)) {\n      store.push(MONICA_AND_ANDY)\n    }\n    if (childFilterArray.includes(ELSEWHERE)) {\n      store.push(ELSEWHERE)\n    }\n    if (store.length) {\n      filterApplied.store = store\n    }\n\n    let lessThanEqual = 0\n    let greaterThanEqual = 0\n    let hasPriceFilter = false\n    // For Price\n    if (childFilterArray.includes(PRICE_1) &&\n      childFilterArray.includes(PRICE_2) &&\n      childFilterArray.includes(PRICE_3)) {\n      greaterThanEqual = 0\n      hasPriceFilter = true\n    }\n    else if (childFilterArray.includes(PRICE_1) &&\n      childFilterArray.includes(PRICE_2)) {\n      lessThanEqual = 100\n      hasPriceFilter = true\n    }\n    else if (childFilterArray.includes(PRICE_1) &&\n      childFilterArray.includes(PRICE_3)) {\n      lessThanEqual = 49\n      greaterThanEqual = 100\n      hasPriceFilter = true\n    }\n    else if (childFilterArray.includes(PRICE_2) &&\n      childFilterArray.includes(PRICE_3)) {\n      greaterThanEqual = 50\n      hasPriceFilter = true\n    }\n    else if (childFilterArray.includes(PRICE_1)) {\n      lessThanEqual = 49\n      hasPriceFilter = true\n    }\n    else if (childFilterArray.includes(PRICE_2)) {\n      greaterThanEqual = 50\n      lessThanEqual = 100\n      hasPriceFilter = true\n    }\n    else if (childFilterArray.includes(PRICE_3)) {\n      greaterThanEqual = 100\n      hasPriceFilter = true\n    }\n    if (hasPriceFilter) {\n      filterApplied.price_Lte = lessThanEqual\n      filterApplied.price_Gte = greaterThanEqual\n    }\n\n    let categories = []\n    // For categories\n    for (let cat of [...stateCategoriesInfo]) {\n      if (childFilterArray.includes(cat.category.id)) {\n        categories.push(cat.category.id)\n      }\n    }\n    if (categories.length) {\n      filterApplied.categories = categories\n    }\n\n    return filterApplied\n  }\n\n  const toggleMustHave = (ev, card, dispatch) => {\n    ev.stopPropagation()\n    if (!stateRegistryInfo.isMustHaveApplied) {\n      let steps = { ...MUST_HAVE_STEPS }\n      steps[0].selector = '[data-tut=\"must-have-' + card.id + '\"]';\n      steps.length = 1;\n\n      setIsMustHaveTour(true)\n      setSteps(steps)\n      setIsTourOpen(true)\n    }\n    toggleMustHaveProduct(card, dispatch)\n  }\n\n  const SortableItem = sortableElement(({ card, index }) => (\n    <li className=\"card-list-item\" data-tut={localAddedProductState[0].id === card.id ? \"view-step-two\" : card.id + '-' + index}>\n      <AddedCard\n        data={card} key={\"addedCard\" + index}\n        isViewCard={true}\n        toggleMustHave={(e) => toggleMustHave(e, card, dispatch)}\n        draggable={true}\n        disabledDrag={card.disabledDrag}\n        removeProductFromCartHandler={() => removeProductFromCartHandler(card, stateRegistryInfo.id, dispatch)}\n      />\n    </li>\n  ));\n\n  let onSortEnd = ({ oldIndex, newIndex }) => {\n    let itemsOldPosition = arrayMove([...stateViewRegistryProducts], oldIndex, oldIndex)\n    let items = arrayMove([...stateViewRegistryProducts], oldIndex, newIndex)\n    updateViewRegistryPosition(stateRegistryInfo.id, items, itemsOldPosition, dispatch)\n    if (!stateRegistryInfo.isFeatured) {\n      let registryInfo = { ...stateRegistryInfo }\n      registryInfo.isFeatured = true\n      dispatch(updateRegistryInfo(registryInfo))\n    }\n    dispatch(setViewRegistryProducts(items))\n  };\n\n  const SortableContainer = sortableContainer(({ children }) => {\n    return <ul className=\"p-0\">{children}</ul>;\n  });\n\n  const getSortedProductsByFilters = async (addedProducts, filterApplied) => {\n    let finalFilterProduct = []\n    let filtersApplied = getFiltersApplied(filterApplied, activeSortFilterState)\n    let reqData = {\n      query: GET_PRODUCTS,\n      variables: {\n        registryId: stateRegistryInfo.id,\n        ...filtersApplied\n      }\n    }\n    dispatch(setLoader(true))\n    await graphQL(reqData).then(res => {\n      if (res.data.data.registryItems) {\n        // Storing Product of GuestView\n        let responseData = [...res.data.data.registryItems.registryItems.edges].map(item => {\n          let newItemObj = { ...item.node }\n          delete newItemObj.registryitemImage;\n          if (item.node.registryitemImage.length > 0) {\n            newItemObj.item.imageUrl = (MEDIA_URL_PREFIX.LOCAL_MEDIA_URL ? MEDIA_URL_PREFIX.LOCAL_MEDIA_URL : \"\") + item.node.registryitemImage[0].image;\n          }\n          return newItemObj;\n        })\n        let finalData = responseData.filter(product => product.registryCategories.length > 0)\n        updateFilterList({ ...res.data.data.registryItems.registryItemsAnalysisCount }, { ...res.data.data.registryItems.categoryData }, filterApplied)\n\n        finalFilterProduct = finalData\n        return finalData\n      }\n      dispatch(setLoader(false))\n    }).catch(err => {\n      dispatch(setLoader(false))\n      if (err.response && err.response.data.errors) {\n        for (const error of err.response.data.errors) {\n          // TODO: Implement toast if necessary\n          console.log(error.message)\n        }\n      }\n    })\n    return finalFilterProduct\n  }\n\n  const getParentCategory = (id) => {\n    return [...stateCategoriesInfo].find((parentCategory) => parentCategory.subCategories.find((subCategory) => subCategory.id === id))\n  }\n\n  const getSortedFilteredProducts = async (addedProducts, activeSortFilterState, viewRegistryProducts, registryInfo, filterApplied = [...stateFilterApplied]) => {\n    dispatch(setLoader(true))\n    let sortedProducts = [];\n    let sortedData = null;\n    let newSortedProducts = null\n    if (filterApplied.length > 0) {\n      newSortedProducts = await getSortedProductsByFilters(addedProducts, filterApplied)\n    }\n    else {\n      await updateFilterList({ ...filterCountState.registryItemsAnalysisCount }, { ...filterCountState.categoryData }, filterApplied)\n      newSortedProducts = [...addedProducts]\n    }\n\n    if (activeSortFilterState.sortId === 1) {\n      if (filterApplied.length > 0) {\n        sortedData = newSortedProducts\n      }\n      else if (registryInfo.isFeatured) {\n        sortedData = viewRegistryProducts ? [...viewRegistryProducts] : [];\n      }\n      else {\n        sortedData = sortByMustHave([...newSortedProducts])\n        if (sortedData.length > 0) {\n          let viewRegistryProductsId = sortedData.map((productData, index) => {\n            return { 'id': productData.id }\n          })\n        }\n      }\n    }\n\n    else if (activeSortFilterState.sortId === 2) {\n      sortedData = sortByLowToHigh([...newSortedProducts])\n    }\n    else if (activeSortFilterState.sortId === 3) {\n      sortedData = sortByHighToLow([...newSortedProducts])\n    }\n\n    // Checking if there is product details other then id\n    if (sortedData.length && !sortedData[0].item) {\n      let viewRegistryProductsId = sortedData.map((productData, index) => {\n        return { 'id': productData.id }\n      })\n\n      for (let product of viewRegistryProductsId) {\n        for (let addProduct of addedProducts) {\n          if (product.id === addProduct.id) {\n            sortedProducts.push(addProduct);\n            break;\n          }\n        }\n      }\n    }\n    // If there is product details\n    else {\n      sortedProducts = [...sortedData]\n    }\n\n    handleFilterProductChange([...sortedProducts])\n    dispatch(setLoader(false))\n    return sortedProducts;\n  }\n\n  const sortByMustHave = (productList) => {\n    return productList.sort(function (a, b) { return b.mostWanted - a.mostWanted });\n  }\n\n  const sortByFeatured = (productList) => {\n    return productList.sort(function (a, b) { return a.isFeatured - b.isFeatured });\n  }\n\n  const sortByLowToHigh = (productList) => {\n    return productList.sort((a, b) => { return a.item.price - b.item.price });\n  }\n\n  const sortByHighToLow = (productList) => {\n    return productList.sort((a, b) => { return b.item.price - a.item.price });\n  }\n\n  //Clear filter state\n  const clearFilterHandler = (ev) => {\n    ev.preventDefault()\n    dispatch(clearViewFilter())\n  }\n\n  const closeTour = () => {\n    // For View tour\n    if (!stateRegistryInfo.isViewRegistryVisited && !isMustHaveTour) {\n      updateViewRegistryTourFlag(stateRegistryInfo, dispatch)\n    }\n\n    // For must-have\n    if (isMustHaveTour) {\n      updateMushHaveTourFlag(stateRegistryInfo, dispatch)\n    }\n\n    setIsTourOpen(false)\n  }\n\n  useEffect(() => {\n    let sortedData = sortByFeatured([...stateAddedProducts])\n    let viewRegistryProducts = sortedData.map((productData, index) => {\n      return { 'id': productData.id }\n    })\n    dispatch(setViewRegistryProducts(viewRegistryProducts))\n  }, [stateAddedProducts])\n\n  useEffect(() => {\n    let filteredSortProducts = getSortedFilteredProducts(stateAddedProducts, activeSortFilterState, stateViewRegistryProducts, stateRegistryInfo)\n    filteredSortProducts.then(product => {\n      handleFilterProductChange(product)\n    })\n  }, [stateAddedProducts, activeSortFilterState, stateViewRegistryProducts, stateRegistryInfo, stateGuestViewRegistry])\n\n  // TODO: Remove comments if needed\n  // let filteredSortProducts = getSortedFilteredProducts(stateAddedProducts, activeSortFilterState, stateViewRegistryProducts,  stateRegistryInfo)\n\n  // For Tour\n  if (!isMustHaveTour && !stateRegistryInfo.isViewRegistryVisited && stateViewRegistryProducts.length && stateCategoriesInfo.length && !isTourOpen) {\n    setSteps(VIEW_REGISTRY_STEPS)\n    setIsTourOpen(true)\n  }\n  else if (!isMustHaveTour && isTourOpen && stateRegistryInfo.isViewRegistryVisited && stateViewRegistryProducts.length && stateCategoriesInfo.length) {\n    setIsTourOpen(false)\n  }\n\n  // For Loader\n  if (stateCategoriesInfo.length <= 0) {\n    dispatch(setLoader(true))\n  }\n\n  return (\n    stateGuestViewRegistry ?\n      <GuestView urlSlug={stateRegistryInfo.urlSlug} />\n      :\n      <>\n        <ViewRegistryHeader hasNoProducts={localAddedProductState.length && stateCategoriesInfo.length > 0 ? false : true} />\n        {/* If product are added */}\n        {localAddedProductState.length ?\n          <div className=\"container mt-7\">\n            <div className=\"row\">\n              <div className=\"col-12 col-lg-2 d-none d-lg-inline-block\">\n                <ViewFilter\n                  setFilterhandler={(filterApplied) => { getSortedFilteredProducts(stateAddedProducts, activeSortFilterState, stateViewRegistryProducts, stateRegistryInfo, filterApplied) }}\n                />\n              </div>\n              <div className=\"col\"></div>\n              <div className=\"col-12 col-lg-9 px-3 px-mb-0\">\n\n                {/* Top Filter Section */}\n                <SortFilterSection\n                  productCount={totalProductCount}\n                  setFilterhandler={() => { getSortedFilteredProducts(stateAddedProducts, activeSortFilterState, stateViewRegistryProducts, stateRegistryInfo) }}\n                />\n                {/* Added Products */}\n                {!stateGuestViewRegistry ?\n                  localAddedProductState.length > 0 ?\n                    <div className=\"mt-2 mt-md-5\">\n                      <SortableContainer onSortEnd={onSortEnd} helperClass=\"drag-add-card\" axis=\"y\" lockAxis=\"y\" useDragHandle>\n                        {localAddedProductState.map((card, index) =>\n                          <SortableItem key={`item-${index}`} index={index} card={{ ...card, disabledDrag: activeSortFilterState.sortId !== 1 }} disabled={activeSortFilterState.sortId !== 1 || stateFilterApplied.length !== 0} />\n                        )}\n                      </SortableContainer>\n                    </div> :\n                    <div className=\"d-flex flex-column empty-filter mt-6 pb-8\">\n                      <div className=\"font-body empty-filter-title text-center mx-auto mt-10\">\n                        <p>We couldnt find any gifts that matches your filters...</p>\n                        <p>Please try clearing Filters to view gifts.</p>\n                      </div>\n                      <div className=\"mx-auto mt-3\">\n                        <Button\n                          variant=\"primary\"\n                          className=\"px-3 py-1 font-medium empty-filter-title text-body\"\n                          onClick={(ev) => clearFilterHandler(ev)}\n                        >\n                          Clear Filters\n                  </Button>\n                      </div>\n                    </div> :\n                  // Guest View Cards\n                  <div className=\"mt-2 mt-md-5\">\n                    {localAddedProductState.length > 0 ?\n                      localAddedProductState.map((card, index) =>\n                        <GuestViewCard\n                          data={card} key={\"addedCard\" + index}\n                        />) : null}\n                  </div>\n                }\n              </div>\n            </div>\n          </div> :\n          // If there is no product added\n          stateCategoriesInfo.length ?\n            <div className=\"container mt-7\">\n              <div className=\"row align-items-center\">\n                <h4 className=\"col font-medium filter-section-total-items\">0 Gifts</h4>\n                <div className=\"col text-right\">\n                  <AddGift title={'Add item'} />\n                </div>\n              </div>\n              <div className=\"row\">\n                <div className=\"col-12\">\n                  <div className=\"d-flex flex-column empty-filter mt-6 pt-10 pb-15\">\n                    <h4 className=\"empty-filter-title text-center mx-auto\">\n                      Your registry hasnt been started.\n                  </h4>\n                    <h4 className=\"empty-filter-title text-center mx-auto\">\n                      Head to Build a Registry for a guided registry experience.\n                  </h4>\n                    <h4 className=\"empty-filter-title text-center mx-auto\">\n                      Or click Add item button to start adding products from this page.\n                  </h4>\n                  </div>\n                </div>\n              </div>\n            </div>\n            : null\n        }\n        {isTourOpen ?\n          <Tour\n            highlightedMaskClassName='tour-bg'\n            steps={steps}\n            isOpen={isTourOpen}\n            CustomHelper={TourCard}\n            onRequestClose={closeTour} /> : null}\n      </>\n  )\n}\n\nexport default ViewRegistryHome;","import React from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\nimport route from \"utils/routes\";\nimport ViewRegistryHome from \"./containers/view-registry-home/ViewRegistryHome\";\n\nclass ViewRegistry extends React.Component {\n    render() {\n        return (\n            <Switch>\n                <Route exact path={route.VIEW_REGISTRY.HOME} component={ViewRegistryHome} />\n            </Switch>\n        )\n    }\n}\n\nexport default ViewRegistry;","import React from \"react\";\nimport \"./TodoWidget.scss\";\nimport {connect} from \"react-redux\";\nimport {getTodoList} from \"../../../../utils/commonFunction\";\n\nclass TodoWidget extends React.Component {\n\n  performTodoAction = todo => {\n    //  Perform action related to to-do\n    if (todo.redirect){\n      window.open(todo.redirectUrl, \"_self\")\n    }\n  }\n\n  render() {\n    if (this.props.stateTodo.length <= 0 && this.props.stateRegistryInfo.id) {\n      getTodoList(this.props.stateRegistryInfo.id, this.props.dispatch)\n    }\n\n    return (\n      <div className=\"baby-registry-todo-widget\">\n        {this.props.stateTodo.length > 0 ?\n          (\n            //  When there is To-do\n            <div className=\"baby-registry-todo-section\">\n              <button className=\"baby-steps-button d-flex align-items-center pt-1 pt-md-3 pb-0 pb-md-3 pl-1 pl-md-4 pr-1 pr-md-8\">\n                <i className=\"baby-steps-icon\"/>\n                <div className=\"ml-5 baby-steps-text\">\n                  <p className=\"text-body font-medium\">{this.props.stateTodo.length} Baby Steps</p>\n                  <p className=\"text-sm text-left\">to take next!</p>\n                </div>\n              </button>\n\n              <div className=\"baby-steps-todo-content p-2\">\n                {this.props.stateTodo.map(todo => (\n                  <div className=\"baby-step-todo d-flex justify-content-between py-2 align-items-center\">\n                    <p className=\"text-body mr-3\">{todo.label}</p>\n                    <button className=\"baby-step-action-btn\"\n                            onClick={() => this.performTodoAction(todo)}/>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )\n          :\n          (\n            //  When there is no To-do\n            <div className=\"baby-registry-no-todo-section d-flex align-items-center py-4\">\n              <i className=\"no-todo-icon\"/>\n              <div className=\"ml-2\">\n                <p className=\"text-body font-medium\">Great job!</p>\n                <p className=\"text-sm\">More to come, soon.</p>\n              </div>\n            </div>\n          )\n        }\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  stateTodo: state.registry.todo,\n  stateRegistryInfo: state.registry.info\n})\n\nexport default connect(\n  mapStateToProps\n)(TodoWidget);","import React from \"react\";\nimport \"./Filters.scss\";\nimport {connect} from 'react-redux';\nimport CheckBox from \"../../../commons/components/check-box/CheckBox\";\nimport {setTrackGiftsFilters} from \"../../TrackGiftsAction\";\nimport {getTrackGiftsProduct} from \"../../../../utils/commonFunction\";\nimport defaultData from \"data/ReducerDefaultData.json\"\n\nclass Filters extends React.Component {\n\n  filterChangeHandler = async filterId => {\n    let allUnselected = true\n    let newFilters = this.props.stateFilters.map(filter => {\n      let newFilter = {...filter}\n      if (newFilter.id === filterId) {\n        newFilter.selected = !newFilter.selected\n      }\n      if (newFilter.count > 0 && newFilter.selected) {\n        allUnselected = false\n      }\n      return newFilter\n    })\n\n    // Resetting filter to default when all filter are unselected\n    // if (allUnselected){\n    //   newFilters = defaultData.trackGifts.filters\n    // }\n\n    await this.props.dispatch(setTrackGiftsFilters(newFilters))\n    getTrackGiftsProduct(true, newFilters, this.props.stateTrackGiftsProducts, this.props.stateTrackGiftsPagination, this.props.stateTrackGiftsView, this.props.stateRegistryInfo, this.props.stateTrackGiftsSearch, this.props.dispatch)\n  }\n\n  render() {\n    return (\n      <div className=\"track-gifts-filters\">\n        <p className=\"text-sm\">Filters</p>\n        <div className=\"mt-3\">\n          {this.props.stateFilters.map(filter => (\n            filter.count > 0 ?\n              <CheckBox\n                display={filter.text}\n                count={filter.count}\n                checked={filter.selected ? \"checked\" : \"\"}\n                id={`trackGiftFilter-${filter.id}`}\n                className=\"mb-3\"\n                textClass=\"track-gifts-filter-text\"\n                changeHandler={() => this.filterChangeHandler(filter.id)}\n              />\n              :\n              null\n          ))}\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  stateFilters: state.trackGifts.filters,\n  stateTrackGiftsView: state.trackGifts.activeView,\n  stateTrackGiftsProducts: state.trackGifts.products,\n  stateTrackGiftsPagination: state.trackGifts.paginationInfo,\n  stateRegistryInfo: state.registry.info,\n  stateTrackGiftsSearch: state.trackGifts.search\n})\n\nexport default connect(\n  mapStateToProps\n)(Filters);","import React from \"react\";\nimport \"./ThankYouList.scss\"\nimport {downloadThankYouList} from \"../../../../api/axios\";\nimport {connect} from 'react-redux';\nimport {withRouter} from \"react-router\";\nimport {getTodoList} from \"../../../../utils/commonFunction\";\nimport {ROUTES} from \"utils/cdn-assets-links\";\n\nclass ThankYouList extends React.Component {\n\n  componentDidMount() {\n    let queryParams = new URLSearchParams(window.location.search)\n    if (queryParams.has('download-thank-you-list')) {\n      this.downloadClickHandler()\n      this.setState({\n        showShareRegistry: true\n      })\n      queryParams.delete('download-thank-you-list')\n      this.props.history.replace({\n        search: queryParams.toString(),\n      })\n    }\n  }\n\n  saveData = (function () {\n    const a = document.createElement(\"a\");\n    document.body.appendChild(a);\n    a.style = \"display: none\";\n    return function (data, fileName) {\n      const blob = new Blob([data], {type: \"octet/stream\"}),\n        url = window.URL.createObjectURL(blob);\n      a.href = url;\n      a.download = fileName;\n      a.click();\n      window.URL.revokeObjectURL(url);\n    };\n  }());\n\n  downloadClickHandler = (ev = null) => {\n    if (ev) {\n      ev.preventDefault()\n    }\n    downloadThankYouList(this.props.stateRegistryInfo.id).then(res => {\n      if (res.data) {\n        // Converting csv response to downloaded file\n        getTodoList(this.props.stateRegistryInfo.id, this.props.dispatch)\n        this.saveData(res.data, `${this.props.stateRegistryInfo.displayName}-thank-you-list.csv`);\n      }\n\n    }).catch(err => {\n      console.error({...err.response.data})\n    })\n  }\n\n  render() {\n    return (\n      <div className=\"track-gifts-thank-you-list p-4 mr-0 mr-md-5\">\n        <img src={ROUTES.file_heart_svg}\n             alt=\"Thank you list\"/>\n        <p className=\"mt-2 text-body font-medium\">Thank you list</p>\n        <p className=\"mt-1 text-sm track-gifts-thank-you-desc\">Let your gift-givers know that you are thankful to\n          them.</p>\n        <a href=\"#\" onClick={(ev) => this.downloadClickHandler(ev)}\n           className=\"mt-1 track-gifts-thank-you-link text-sm\">Download</a>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  stateRegistryInfo: state.registry.info\n})\n\nexport default connect(\n  mapStateToProps\n)(withRouter(ThankYouList));","import React from \"react\";\nimport ViewBy from \"../../components/view-by/ViewBy\";\nimport Filters from \"../../components/filters/Filters\";\nimport ThankYouList from \"../../components/thank-you-list/ThankYouList\";\n\nclass TrackGiftsSidebar extends React.Component {\n  render() {\n    return (\n      <>\n        <ViewBy/>\n        <div className=\"mt-4\">\n          <Filters/>\n        </div>\n        <div className=\"mt-4 d-none d-lg-inline-block\">\n          <ThankYouList />\n        </div>\n      </>\n    );\n  }\n}\n\nexport default TrackGiftsSidebar;","import React from \"react\";\nimport \"./Search.scss\";\nimport {connect} from \"react-redux\";\nimport {setTrackGiftsSearch} from \"../../TrackGiftsAction\";\nimport {getTrackGiftsProduct} from \"../../../../utils/commonFunction\";\n\nclass Search extends React.Component {\n  inputRef = React.createRef()\n  inputContainer = React.createRef()\n  state = {\n    searched: false\n  }\n\n  applySearch = () => {\n    let searchState = {...this.props.stateTrackGiftsSearch}\n    searchState.searched = true\n    getTrackGiftsProduct(true, this.props.stateTrackGiftsFilters, this.props.stateTrackGiftsProducts, this.props.stateTrackGiftsPagination, this.props.stateTrackGiftsView, this.props.stateRegistryInfo, this.props.stateTrackGiftsSearch, this.props.dispatch)\n    this.setState({searched: true})\n    this.props.dispatch(setTrackGiftsSearch(searchState))\n    if (this.props.componentRef) {\n      this.props.componentRef.current.classList.toggle(\"track-gifts-show-search-dialog\")\n    }\n  }\n\n  searchInputChangeHandler = async () => {\n    if (this.inputRef.current && this.inputContainer.current) {\n      let searchInput = this.inputRef.current\n      if (searchInput.value.length > 0) {\n        if (!this.inputContainer.current.classList.contains(\"track-gifts-search-container-focus\")) {\n          //Adding class to increase width\n          this.inputContainer.current.classList.add(\"track-gifts-search-container-focus\")\n        }\n      } else {\n        if(this.state.searched) {\n          this.clearClickHandler()\n        }\n      }\n      await this.props.dispatch(setTrackGiftsSearch({\n        searched: false,\n        searchText: searchInput.value\n      }))\n    }\n  }\n\n  searchInputFocusHandler = () => {\n    if (this.inputContainer.current) {\n      if (!this.inputContainer.current.classList.contains(\"track-gifts-search-container-focus\")) {\n        //Adding class to increase width\n        this.inputContainer.current.classList.add(\"track-gifts-search-container-focus\")\n      }\n    }\n  }\n\n  searchInputBlurHandler = () => {\n    if (this.inputRef.current && this.inputContainer.current) {\n      let searchInput = this.inputRef.current\n      if (searchInput.value.length <= 0) {\n        if (this.inputContainer.current.classList.contains(\"track-gifts-search-container-focus\")) {\n          //Removing class to decrease width\n          this.inputContainer.current.classList.remove(\"track-gifts-search-container-focus\")\n        }\n      }\n\n      if (searchInput.value.length >= 3 && !this.props.stateTrackGiftsSearch.searched) {\n        this.applySearch()\n      }\n    }\n  }\n\n  clearClickHandler = async (ev = null) => {\n    if(ev) {\n      ev.preventDefault()\n    }\n    this.setState({searched: false})\n    await this.props.dispatch(setTrackGiftsSearch({\n      searched: false,\n      searchText: \"\"\n    }))\n    if (this.inputRef.current) {\n      this.inputRef.current.focus()\n    }\n\n    this.applySearch()\n  }\n\n  searchClickHandler = async ev => {\n    ev.preventDefault()\n    this.applySearch()\n  }\n\n  searchOnEnter = (ev) => {\n    ev.persist();\n    ev.preventDefault();\n    if (ev.keyCode === 13) { //Enter keycode is 13\n      this.applySearch()\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"ml-auto track-gifts-search-container\" ref={this.inputContainer}>\n        <input\n          type=\"text\"\n          ref={this.inputRef}\n          placeholder=\"Search\"\n          value={this.props.stateTrackGiftsSearch.searchText}\n          onKeyUp={(ev) => this.searchOnEnter(ev)}\n          onChange={this.searchInputChangeHandler}\n          onFocus={this.searchInputFocusHandler}\n          onBlur={this.searchInputBlurHandler}\n          className={[\"m-a-unset-line-height track-gifts-search-input pl-6 text-body py-1 w-100 mw-100 mb-0\", this.props.stateTrackGiftsSearch.searched && this.props.stateTrackGiftsSearch.searchText.length > 0 ? \"pr-10\" : \"pr-12\"].join(\" \")}\n        />\n        <i className=\"icon-search track-gifts-search-icon\" />\n        {!this.props.stateTrackGiftsSearch.searched && this.props.stateTrackGiftsSearch.searchText.length > 0 ?\n          <a className=\"track-gifts-search-input-link text-body\" href=\"#\"\n            onClick={(ev) => this.searchClickHandler(ev)}>Search</a>\n          : null}\n        {this.props.stateTrackGiftsSearch.searched && this.props.stateTrackGiftsSearch.searchText.length > 0 ?\n          <a className=\"track-gifts-search-input-link text-body\" href=\"#\"\n            onClick={(ev) => this.clearClickHandler(ev)}>Clear</a>\n          : null}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  stateTrackGiftsSearch: state.trackGifts.search,\n  stateTrackGiftsFilters: state.trackGifts.filters,\n  stateTrackGiftsView: state.trackGifts.activeView,\n  stateTrackGiftsProducts: state.trackGifts.products,\n  stateTrackGiftsPagination: state.trackGifts.paginationInfo,\n  stateRegistryInfo: state.registry.info\n})\n\nexport default connect(\n  mapStateToProps\n)(Search);","import React from \"react\";\nimport \"./AddGift.scss\";\nimport Button from \"../../../commons/components/button-component/ButtonComponent\";\nimport Modal from \"../../../commons/components/modal-component/ModalComponent\";\nimport {graphQL} from \"../../../../api/axios\";\nimport {connect} from 'react-redux'\nimport {TRACK_GIFTS_ADD_GIFT} from \"../../../../api/mutations\";\nimport {getTrackGiftsProduct} from \"../../../../utils/commonFunction\";\nimport {toast} from \"react-toastify\";\nimport {EMAIL_RE} from \"utils/constants\";\n\nclass AddGift extends React.Component {\n  state = {\n    show: false,\n    giftName: \"\",\n    storeName: \"\",\n    orderNumber: \"\",\n    userName: \"\",\n    userEmail: \"\",\n    errors: {}\n  }\n\n  openAddGiftModal = () => {\n\n    this.setState({\n      show: true,\n      giftName: \"\",\n      storeName: \"\",\n      orderNumber: \"\",\n      userName: \"\",\n      userEmail: \"\",\n      errors: {}\n    })\n  }\n\n  modalCloseHandler = () => {\n    this.setState({\n      show: false\n    })\n  }\n\n  validData = () => {\n    let valid = true\n    let errors = {}\n\n    if (this.state.giftName.length <= 0) {\n      errors['giftName'] = \"Gift Name is required field\"\n      valid = false\n    }\n\n    if (this.state.userName.length <= 0) {\n      errors['userName'] = \"Name is required field\"\n      valid = false\n    }\n\n    if (this.state.userEmail.length <= 0) {\n      errors['userEmail'] = \"Email address is required field\"\n      valid = false\n    } else {\n      if (!this.state.userEmail.match(EMAIL_RE)) {\n        errors['userEmail'] = \"Invalid Email address\"\n        valid = false\n      }\n    }\n\n    this.setState({\n      errors: errors\n    })\n\n    return valid\n  }\n\n  addGiftClickHandler = () => {\n    if (!this.validData()) {\n      return false\n    }\n\n    let reqData = {\n      query: TRACK_GIFTS_ADD_GIFT,\n      variables: {\n        registryId: this.props.stateRegistryInfo?.id,\n        gifts: [{\n          guestName: this.state.userName ? this.state.userName : null,\n          guestEmail: this.state.userEmail ? this.state.userEmail : null,\n          items: [{\n            title: this.state.giftName ? this.state.giftName : null,\n            quantity: 1,\n            price: 0.0\n          }],\n          orderNo: this.state.orderNumber,\n          storeName: this.state.storeName\n        }]\n      }\n    }\n\n    // if (this.state.storeName) {\n    //   reqData.variables.gifts['storeName'] = this.state.storeName\n    // }\n    //\n    // if (this.state.orderNumber) {\n    //   reqData.variables.gifts['orderNo'] = this.state.orderNumber\n    // }\n\n    graphQL(reqData).then(res => {\n      if (res.data.data.addGift) {\n        toast.success(<p><b>{this.state.giftName} gift added.</b></p>)\n        getTrackGiftsProduct(true, this.props.stateTrackGiftsFilters, this.props.stateTrackGiftsProducts, this.props.stateTrackGiftsPagination, this.props.stateTrackGiftsView, this.props.stateRegistryInfo, this.props.stateTrackGiftsSearch, this.props.dispatch)\n        this.modalCloseHandler()\n      } else if (res.data.errors) {\n        toast.error(\"Some error occurred.\")\n        console.error({...res.data.errors})\n      }\n    }).catch(err => {\n      toast.error(\"Some error occurred.\")\n      console.error(err.response)\n    })\n\n  }\n\n  // Input Change Handlers\n  giftNameChangeHandler = ev => {\n    if (this.state.errors.giftName) {\n      let newErrorState = {...this.state.errors}\n      delete newErrorState.giftName\n      this.setState({\n        errors: newErrorState\n      })\n    }\n\n    this.setState({\n      giftName: ev.target.value\n    })\n  }\n\n  storeNameChangeHandler = ev => {\n    this.setState({\n      storeName: ev.target.value\n    })\n  }\n\n  orderNumberChangeHandler = ev => {\n    this.setState({\n      orderNumber: ev.target.value\n    })\n  }\n\n  userNameChangeHandler = ev => {\n    if (this.state.errors.userName) {\n      let newErrorState = {...this.state.errors}\n      delete newErrorState.userName\n      this.setState({\n        errors: newErrorState\n      })\n    }\n    this.setState({\n      userName: ev.target.value\n    })\n  }\n\n  userEmailChangeHandler = ev => {\n    if (this.state.errors.userEmail) {\n      let newErrorState = {...this.state.errors}\n      delete newErrorState.userEmail\n      this.setState({\n        errors: newErrorState\n      })\n    }\n    this.setState({\n      userEmail: ev.target.value\n    })\n  }\n\n  render() {\n    return (\n      <div className=\"track-gifts-add-gift-container\">\n\n        <Button\n          variant=\"primary\"\n          className=\"px-3 py-1 text-body font-medium track-gifts-add-gift-button\"\n          onClick={this.openAddGiftModal}\n        >Add Gift</Button>\n\n        <Modal\n          show={this.state.show}\n          title=\"Add Gift\"\n          size=\"md\"\n          footer={\n            <Button\n              variant=\"primary\"\n              onClick={this.addGiftClickHandler}\n              className=\"px-5 py-1 text-body font-medium track-gifts-add-gift-button\"\n            >Add & Close</Button>\n          }\n          closeModal={this.modalCloseHandler}>\n          <div className=\"track-gifts-add-gift-form\">\n\n            {/* Gift Name */}\n            <div className=\"row\">\n              <div className=\"col\">\n                <div className=\"track-gifts-add-gift-input-container\">\n                  <label\n                    className=\"track-gifts-add-gift-input-label track-gifts-add-gift-required text-sm font-medium mb-1\">Gift\n                    Name</label>\n                  <input\n                    type=\"text\"\n                    name=\"gift-name\"\n                    value={this.state.giftName}\n                    onChange={(ev) => this.giftNameChangeHandler(ev)}\n                    placeholder=\"Eg. Coming Home Blanket by Monica+Andy\"\n                    className={[\"m-a-unset-line-height track-gifts-add-gift-input d-block w-100 mw-100 px-2 py-1 text-body mb-0\", this.state.errors.giftName ? \"track-gifts-add-gift-input-error\" : \"\"].join(\" \")}/>\n                  {this.state.errors.giftName ?\n                    <label\n                      className=\"text-sm track-gifts-add-gift-input-error-text\">{this.state.errors.giftName}</label>\n                    : null}\n                </div>\n              </div>\n            </div>\n\n            <div className=\"row mt-2\">\n              {/* Store Name */}\n              <div className=\"col-6\">\n                <div className=\"track-gifts-add-gift-input-container\">\n                  <label className=\"track-gifts-add-gift-input-label text-sm font-medium mb-1\">Store Name</label>\n                  <input\n                    type=\"text\"\n                    name=\"store-name\"\n                    value={this.state.storeName}\n                    onChange={(ev) => this.storeNameChangeHandler(ev)}\n                    className=\"m-a-unset-line-height track-gifts-add-gift-input d-block w-100 mw-100 px-2 py-1 text-body mb-0\"\n                    placeholder=\"Eg. Target\"/>\n                </div>\n              </div>\n\n              {/* Order Number */}\n              <div className=\"col-6\">\n                <div className=\"track-gifts-add-gift-input-container\">\n                  <label className=\"track-gifts-add-gift-input-label text-sm font-medium mb-1\">Order number</label>\n                  <input\n                    type=\"text\"\n                    name=\"order-number\"\n                    value={this.state.orderNumber}\n                    onChange={(ev) => this.orderNumberChangeHandler(ev)}\n                    className=\"m-a-unset-line-height track-gifts-add-gift-input d-block w-100 mw-100 px-2 py-1 text-body mb-0\"\n                    placeholder=\"00012345\"/>\n                </div>\n              </div>\n            </div>\n\n            {/* User Info */}\n            <div className=\"row mt-5\">\n              <div className=\"col\">\n                <p className=\"text-body font-medium\">Gifted By</p>\n              </div>\n            </div>\n\n            {/* User Name */}\n            <div className=\"row mt-2\">\n              <div className=\"col\">\n                <div className=\"track-gifts-add-gift-input-container\">\n                  <label\n                    className=\"track-gifts-add-gift-input-label track-gifts-add-gift-required text-sm font-medium mb-1\">Name</label>\n                  <input\n                    type=\"text\"\n                    name=\"user-name\"\n                    placeholder=\"John Doe\"\n                    value={this.state.userName}\n                    onChange={(ev) => this.userNameChangeHandler(ev)}\n                    className={[\"m-a-unset-line-height track-gifts-add-gift-input d-block w-100 mw-100 px-2 py-1 text-body mb-0\", this.state.errors.userName ? \"track-gifts-add-gift-input-error\" : \"\"].join(\" \")}\n                  />\n                  {this.state.errors.userName ?\n                    <label\n                      className=\"text-sm track-gifts-add-gift-input-error-text\">{this.state.errors.userName}</label>\n                    : null}\n                </div>\n              </div>\n            </div>\n\n            {/* User email */}\n            <div className=\"row mt-2 mb-1\">\n              <div className=\"col\">\n                <div className=\"track-gifts-add-gift-input-container\">\n                  <label\n                    className=\"track-gifts-add-gift-input-label track-gifts-add-gift-required text-sm font-medium mb-1\">Email\n                    address</label>\n                  <input\n                    type=\"text\"\n                    name=\"user-email\"\n                    placeholder=\"johndoe@email.com\"\n                    value={this.state.userEmail}\n                    onChange={(ev) => this.userEmailChangeHandler(ev)}\n                    className={[\"m-a-unset-line-height track-gifts-add-gift-input d-block w-100 mw-100 px-2 py-1 text-body mb-0\", this.state.errors.userEmail ? \"track-gifts-add-gift-input-error\" : \"\"].join(\" \")}\n                  />\n                  {this.state.errors.userEmail ?\n                    <label\n                      className=\"text-sm track-gifts-add-gift-input-error-text\">{this.state.errors.userEmail}</label>\n                    : null}\n                </div>\n              </div>\n            </div>\n\n          </div>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  stateTrackGiftsFilters: state.trackGifts.filters,\n  stateTrackGiftsView: state.trackGifts.activeView,\n  stateTrackGiftsProducts: state.trackGifts.products,\n  stateTrackGiftsPagination: state.trackGifts.paginationInfo,\n  stateRegistryInfo: state.registry.info,\n  stateTrackGiftsSearch: state.trackGifts.search\n})\n\nexport default connect(\n  mapStateToProps\n)(AddGift);","import React from \"react\";\nimport TrackGiftsSidebar from \"./containers/track-gifts-sidebar/TrackGiftsSidebar\";\nimport TrackGiftsContent from \"./containers/track-gifts-content/TrackGiftsContent\";\nimport Search from \"./components/search/Search\";\nimport AddGift from \"./components/add-gift/AddGift\";\nimport Button from \"../commons/components/button-component/ButtonComponent\";\nimport Modal from \"../commons/components/modal-component/ModalComponent\";\nimport \"./TrackGifts.scss\";\nimport ThankYouList from \"../track-gifts/components/thank-you-list/ThankYouList\";\n\nclass TrackGifts extends React.Component {\n\n  state = {\n    showTrackFilterModal: false,\n    showSearchPopUp: false\n  }\n\n  searchRef = React.createRef();\n\n  closeTrackFilterModal = () => {\n    this.setState({showTrackFilterModal: false})\n  }\n\n  toggleSearchBar = e => {\n    e.preventDefault()\n    if (this.searchRef.current) {\n      this.searchRef.current.classList.toggle(\"track-gifts-show-search-dialog\")\n    }\n  }\n\n  trackFilterModalFooterButtons =\n    (\n      <>\n        <Button\n          variant=\"secondary\"\n          className=\"px-3 py-1 font-weight-bold font-medium text-body\"\n          disabled={false}\n          onClick={this.closeTrackFilterModal}\n        >Close</Button>\n      </>\n    )\n\n  render() {\n    return (\n      <div className=\"container track-gifts-container mt-2 mt-md-8\">\n        <div className=\"row\">\n\n          {/* Sidebar content */}\n          <div className=\"col-2 d-none d-lg-inline-block\">\n            <div className=\"row mb-5\">\n              <div className=\"col\">\n                <h4 className=\"font-medium\">View</h4>\n              </div>\n            </div>\n            <div className=\"row\">\n              <div className=\"col\">\n                <TrackGiftsSidebar />\n              </div>\n            </div>\n          </div>\n\n          {/* Main Content */}\n          <div className=\"col-12 col-lg-10\">\n            <div className=\"row mb-0 mb-md-5 align-items-center\">\n              <div className=\"col-2 col-md\">\n                <h4 className=\"font-medium\">Gifts</h4>\n              </div>\n              <div className=\"col-10 justify-content-end d-lg-none d-block d-flex align-items-center mb-2\">\n                <Button className=\"d-flex py-1 mr-2\" variant=\"secondary\" onClick={(e) => this.toggleSearchBar(e)}>\n                  <i className=\"icon-search search-icon-mobile\" />\n                </Button>\n                <div ref={this.searchRef} className=\"track-gifts-search-box-container\">\n                  <Search componentRef={this.searchRef} />\n                </div>\n                <Button className=\"d-flex py-1 mr-1\" variant=\"secondary\" onClick={() => {this.setState({showTrackFilterModal: true})}}>\n                  <i className=\"icon-filter-1 filter-icon\" />\n                </Button>\n                <AddGift />\n              </div>\n              <div className=\"col-lg-7 col-xl-6 d-none d-lg-flex\">\n                <div className=\"flex-fill mr-3\">\n                  <Search />\n                </div>\n                <AddGift />\n              </div>\n            </div>\n\n            <div className=\"row\">\n              <div className=\"divider-div d-inline-block d-md-none my-2\" />\n              <div className=\"col\">\n                <TrackGiftsContent />\n              </div>\n            </div>\n            <div className=\"d-inline-block d-lg-none mb-11 mt-3\">\n              <ThankYouList />\n            </div>\n          </div>\n        </div>\n        <Modal\n          show={this.state.showTrackFilterModal}\n          title={\"Filters\"}\n          closeModal={this.closeTrackFilterModal}\n        >\n          <TrackGiftsSidebar />\n        </Modal>\n      </div>\n    );\n  }\n}\n\nexport default TrackGifts;","import React from 'react';\nimport {NavLink, Switch, Route, Redirect, withRouter} from 'react-router-dom';\nimport MyRegistry from '../my-registry/MyRegistry';\nimport ViewRegistry from \"../view-registry/ViewRegistry\";\nimport {useTranslation} from \"react-i18next\";\nimport route from \"utils/routes\";\nimport RegistryHeroData from \"data/RegistryHero.json\";\nimport './RegistryHero.scss';\nimport {useSelector, useDispatch} from 'react-redux';\nimport Toast from \"modules/commons/components/toast/Toast\";\nimport TodoWidget from \"./component/todo-widget/TodoWidget\";\nimport TrackGifts from \"../track-gifts/TrackGifts\";\nimport RedirectionScreen from \"../track-gifts/components/redirection-screen/RedirectionScreen\";\nimport moment from 'moment';\nimport { setguestViewRegistry } from \"modules/view-registry/ViewRegistryActions\";\n\nconst RegistryHero = (props) => {\n\n  const stateGuestViewRegistry = useSelector(state => state.viewRegistry.guestViewRegistry)\n  const stateRegistryInfo = useSelector(state => state.registry.info)\n  const stateTrackGiftsRedirectionInfo = useSelector(state => state.trackGifts.redirectionInfo)\n  const {t} = useTranslation();\n  const registryData = RegistryHeroData\n  const dispatch = useDispatch()\n\n  if (!stateRegistryInfo.id && stateRegistryInfo.notFound) {\n    return <Redirect to={route.ONBOARDING.HOME}/>\n  }\n\n  window.onpopstate = (ev) => {\n    if(stateGuestViewRegistry) {\n      dispatch(setguestViewRegistry(false))\n    }\n  }\n\n  return (\n    <>{stateTrackGiftsRedirectionInfo.store ?\n      <RedirectionScreen store={stateTrackGiftsRedirectionInfo.store}/>\n      :\n      <>\n        {!stateGuestViewRegistry ?\n          <div className=\"registry-hero\">\n            <div className=\"container pt-3 pt-md-6\">\n              <div className=\"row mb-5 mb-md-0\">\n                <div className=\"col d-flex justify-content-between align-items-center align-items-md-start\">\n                  <div className=\"d-flex align-items-end\">\n                    <h1 className=\"registry-name-header\">{stateRegistryInfo.name}</h1>\n                    <span className=\"text-sm ml-1 registry-due-date-text\">{stateRegistryInfo.dueDate !== null ? t(\"registryHeader.subTitle\")+\" \"+moment(stateRegistryInfo.dueDate).format(\"MMM Do YYYY\"):\"\"}</span>\n                  </div>\n                  <div>\n                    <TodoWidget/>\n                  </div>\n                </div>\n              </div>\n              <div className=\"row\">\n                <div className=\"col\">\n                  <div className=\"d-flex registry-hero-navigation-links\">\n                    <NavLink to={route.MY_REGISTRY.HOME} className=\"registry-header-link\">\n                      <h4>{t(\"registryHeader.link.myRegistry\")}</h4></NavLink>\n\n                    <NavLink to={route.VIEW_REGISTRY.HOME} className=\"registry-header-link\">\n                      <h4>{t(\"registryHeader.link.viewRegistry\")}</h4></NavLink>\n\n                    <NavLink to={route.TRACK_GIFTS.HOME} className=\"registry-header-link\">\n                      <h4>{t(\"registryHeader.link.trackGifts\")}</h4></NavLink>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div> : null}\n\n        {/* Registry Nav Routes */}\n        {stateRegistryInfo.id ?\n          <Switch>\n            <Route exact path={route.REGISTRY.HOME}><Redirect to={route.MY_REGISTRY.HOME}/></Route>\n            <Route exact path={route.MY_REGISTRY.HOME} component={MyRegistry}/>\n            <Route exact path={route.VIEW_REGISTRY.HOME} component={ViewRegistry}/>\n            <Route exact path={route.TRACK_GIFTS.HOME} component={TrackGifts}/>\n          </Switch>\n\n          : null}\n      </>\n    }\n\n\n      <Toast/>\n    </>\n  )\n}\n\nexport default withRouter(RegistryHero);","import React from \"react\";\nimport \"./Option.scss\";\n\nconst Option = (props) => {\n  return (\n    <div\n      className={[\"px-3 px-md-4 py-2 py-md-3 baby-registry-question-option\", props.className ? props.className : \"\"].join(\" \")}\n      onClick={props.onClick}>{props.children}</div>\n  );\n}\n\nexport default Option;","import React from \"react\";\nimport \"./Onboarding.scss\";\nimport {connect} from \"react-redux\";\nimport {Redirect} from \"react-router\";\nimport routes from \"utils/routes\";\nimport Option from \"../commons/components/questions/option/Option\";\nimport {addQuestionAnswer, updateQuestionAnswer} from \"./OnboardingAction\";\nimport Button from \"../commons/components/button-component/ButtonComponent\";\nimport {toast, ToastContainer} from \"react-toastify\";\nimport {\n  REGISTER_USER,\n  SAVE_QUESTION_RESPONSE,\n  LOGIN_USER,\n  ADD_PARTNER_ACCOUNT,\n  CREATE_REGISTRY,\n  SAVE_SINGLE_QUESTION_RESPONSE\n} from \"../../api/mutations\";\nimport {graphQLNoToken, graphQLNoHeader} from \"../../api/axios\";\nimport {Cookies} from \"react-cookie\";\nimport {setLoggingStatus, setOnboardingRegistry} from \"../registry/RegistryActions\";\nimport {getOnboardingQuestions} from \"../../utils/commonFunction\";\nimport {GET_REGISTRIES} from \"../../api/queries\";\nimport {EMAIL_RE, M_A_FORGOT_PASSWORD_LINK} from \"../../utils/constants\";\nimport {setLoader} from \"modules/registry/RegistryActions\";\n\nclass Onboarding extends React.Component {\n\n  // Static titles\n  LOGIN_TITLE = \"Already have an M+A account? Use the same login to get started on your registry.\"\n  SIGNUP_TITLE = \"Lets make it official. Time to create your account.\"\n  PARTNER_TITLE = \"Your partners details please\"\n\n  // Answer type mapping\n  RADIO = \"Radio\"\n  LOGIN = \"Login\"\n  PARTNER = \"Partner\"\n\n  // Data to remove Both option\n  LITTLE_ONCE_ID = {\n    questionId: 5,\n    optionId: 7\n  }\n\n  BOTH_OPTION_ID = {\n    questionId: 6,\n    optionId: 13\n  }\n\n  SKIP_BOTH_OPTION = false\n\n  state = {\n    parentId: null,\n    question: {},\n    login: false,\n    toastMessage: \"\",\n    signUpErrors: {},\n    signInErrors: {},\n    partnerErrors: {},\n    submitAnswer: false,\n    bulkSaved: true,\n    signInRedirectionUrl: \"\",\n    currentAnswer: null\n  }\n\n  isActiveToast = false\n\n  componentDidMount() {\n    window.onpopstate = () => {\n      if (this.props.location.pathname.search(routes.ONBOARDING.HOME) >= 0) {\n        this.setQuestionBasedOnId(this.props.match.params['questionId'])\n        this.clearToastMessage()\n      }\n    }\n  }\n\n  clearErrorState = () => {\n    this.setState({\n      signUpErrors: {},\n      signInErrors: {},\n      partnerErrors: {}\n    })\n  }\n\n  createRegistry = () => {\n    let cookies = new Cookies();\n    graphQLNoHeader({query: CREATE_REGISTRY}, {\n      headers: {\"Authorization\": cookies.get(\"access_token\") ? \"Token \" + cookies.get(\"access_token\") : \"\"}\n    }).then(res => {\n      if (res.data.data) {\n        let registryId = res.data.data.createRegistry.registry.id\n        if (registryId) {\n          this.props.dispatch(setOnboardingRegistry(registryId))\n          this.submitAllAnswers(registryId, true)\n        }\n      }\n    }).catch(err => {\n      console.error(err.response)\n    })\n  }\n\n  checkValidEmail = (email) => {\n    return email.match(EMAIL_RE)\n  }\n\n  submitAllAnswers = async (optionalRegistryId = null, submitBulk = false) => {\n    if (this.state.submitAnswer || submitBulk) {\n      if (this.props.stateOnboardingAnswers.length > 0 && (this.props.stateOnboardingRegistry || optionalRegistryId)) {\n        const registryId = optionalRegistryId ? optionalRegistryId : this.props.stateOnboardingRegistry;\n        let action = null;\n        let returnToURL = null;\n\n        const cookies = new Cookies();\n        const token = cookies.get(\"access_token\") ? \"Token \" + cookies.get(\"access_token\") : \"\"\n\n        if (submitBulk) {\n          // Submitting all answers at once\n\n          const response = this.props.stateOnboardingAnswers.map(answer => {\n            return {\n              question: answer.question,\n              questionOptionInput: [\n                {\n                  option: answer.response.option,\n                  optionText: answer.response.optionText\n                }\n              ]\n            }\n          })\n          let reqData = {\n            query: SAVE_QUESTION_RESPONSE,\n            operationName: \"addRegistryQuestionOption\",\n            variables: {\n              registryId: registryId,\n              answers: response\n            }\n          }\n\n          await graphQLNoHeader(reqData, {\n            headers: {\"Authorization\": token}\n          }).then(res => {\n            if (res.data.data.addRegistryMultipleQuestionOption) {\n              console.log(\"Saved\")\n            }\n          }).catch(err => {\n            toast.error(\"Answer is not saved.\")\n            console.error(err.response);\n          }).finally(async () => {\n            await this.setState({\n              submitAnswer: false\n            })\n          })\n        } else {\n          //  Submitting single answer at once\n\n          let response = null\n\n          if (this.props.stateOnboardingAnswers.length > 0) {\n            const answer = this.props.stateOnboardingAnswers[this.props.stateOnboardingAnswers.length - 1]\n            action = answer.response.action ? answer.response.action : null;\n            response = {\n              question: answer.question,\n              questionOptionInput: [\n                {\n                  option: answer.response.option,\n                  optionText: answer.response.optionText\n                }\n              ]\n            }\n          }\n\n          if (action) {\n            switch (action) {\n              case \"build-registry\":\n                returnToURL = window.location.origin + routes.MY_REGISTRY.HOME\n                break\n              case \"registry-quiz\":\n                returnToURL = window.location.origin + routes.PERSONALIZE.HOME\n                break\n              default:\n                returnToURL = window.location.origin + routes.REGISTRY.HOME\n                break\n            }\n          }\n\n          if (response) {\n            let reqData = {\n              query: SAVE_SINGLE_QUESTION_RESPONSE,\n              operationName: \"updateOrCreateRegistrySingleQuestionOption\",\n              variables: {\n                registryId: registryId,\n                registryQuestionOptionInput: response\n              }\n            }\n\n            if (action && returnToURL) {\n              reqData.variables['returnTo'] = returnToURL\n            }\n\n            graphQLNoHeader(reqData, {\n              headers: {\"Authorization\": token}\n            }).then(res => {\n              if (res.data.data.updateOrCreateRegistrySingleQuestionOption) {\n                console.log(\"Saved\")\n                if (res.data.data.updateOrCreateRegistrySingleQuestionOption.redirectionUrl) {\n                  window.open(res.data.data.updateOrCreateRegistrySingleQuestionOption.redirectionUrl, \"_self\")\n                }\n              }\n            }).catch(err => {\n              console.error(err);\n            }).finally(() => {\n              this.setState({\n                submitAnswer: false\n              })\n            })\n          }\n        }\n\n      }\n    }\n  }\n\n  clearToastMessage = () => {\n    this.setState({\n      toastMessage: \"\"\n    })\n  }\n\n  setToastMessage = () => {\n    if (this.state.question.toastMessage) {\n      this.setState({\n        toastMessage: this.state.question.toastMessage\n      })\n      this.isActiveToast = false\n    } else {\n      this.clearToastMessage()\n    }\n  }\n\n  gotoNextQuestion = (question, parentId, option = {}) => {\n    let nextQuestionId = null;\n    let returnNext = false;\n    let nextFullQuestion = null;\n    const idToMatch = parentId ? parentId : question.id;\n    // Only works for 1 follow up question\n    if (option.followUpQuestions && option.followUpQuestions.length > 0) {\n      nextQuestionId = option.followUpQuestions[0].question.id;\n    } else {\n      for (let ques of this.props.stateOnboardingQuestions) {\n        if (returnNext) {\n          nextQuestionId = ques.id\n          nextFullQuestion = ques\n          break\n        }\n        if (ques.id === idToMatch) {\n          returnNext = true;\n        }\n      }\n    }\n\n    if (nextQuestionId === null && returnNext) {\n      //  This is last question\n      if (this.props.stateLoggedIn && this.state.redirectionUrl) {\n        // window.open(this.state.redirectionUrl, \"_self\")\n      }\n    } else if (nextQuestionId) {\n      this.setState({\n        parentId: null\n      })\n\n      if (nextFullQuestion && nextFullQuestion.answers.length > 0 && (nextFullQuestion.options.length > 0 && !nextFullQuestion.options[0].action)) {\n        this.gotoNextQuestion(nextFullQuestion, null)\n        return;\n      } else {\n        if (nextFullQuestion && nextFullQuestion.options.length > 0 && nextFullQuestion.options[0].action && nextFullQuestion.answers.length > 0) {\n          if (this.state.signInRedirectionUrl) {\n            this.props.history.push(this.state.signInRedirectionUrl)\n            window.open(this.state.signInRedirectionUrl, \"_self\")\n            return\n          }\n        }\n        this.setQuestionBasedOnId(nextQuestionId)\n        this.setToastMessage()\n        this.props.history.push(routes.ONBOARDING.HOME + `/${nextQuestionId}`)\n      }\n    }\n  }\n\n  setQuestionBasedOnId = (questionId) => {\n    if (questionId) {\n      let finalQuestion = {};\n      let foundQuestion = false;\n      let parentId = null;\n      for (const question of this.props.stateOnboardingQuestions) {\n        if (foundQuestion) {\n          break;\n        }\n        if (question.id === questionId) {\n          finalQuestion = question;\n          foundQuestion = true;\n          break;\n        }\n        for (const option of question.options) {\n          if (option.followUpQuestions.length > 0) {\n            for (const followUpQuestion of option.followUpQuestions) {\n              if (followUpQuestion.question.id === questionId) {\n                finalQuestion = followUpQuestion.question;\n                parentId = followUpQuestion.parentQuestion;\n                foundQuestion = true\n                break;\n              }\n            }\n          }\n        }\n      }\n\n      let currentAnswer = this.props.stateOnboardingAnswers.find(answer => Number(answer.question) === Number(finalQuestion.id))\n\n      if (finalQuestion.id) {\n        this.setState({\n          question: finalQuestion,\n          parentId: parentId,\n          currentAnswer: currentAnswer ? currentAnswer.response : null\n        })\n      } else {\n        console.log(\"No Question Found\");\n      }\n    }\n  }\n\n  addAnswerToState = async (questionId, response, option = null) => {\n    const alreadyAnswered = this.props.stateOnboardingAnswers.find(el => el.question === this.state.question.id)\n\n\n    if (alreadyAnswered) {\n      // This will delete the answers that were given after the matched response\n      let newState = []\n      for (let answer of this.props.stateOnboardingAnswers) {\n        if (answer.question === this.state.question.id) {\n          answer.response = response;\n          newState.push(answer)\n          break;\n        }\n        newState.push(answer)\n      }\n      await this.props.dispatch(updateQuestionAnswer(newState))\n    } else {\n      await this.props.dispatch(addQuestionAnswer({question: questionId, response: response}))\n    }\n    await this.setState({\n      submitAnswer: true\n    })\n\n    if (option) {\n      if (option.toastMessage) {\n        this.setState({\n          toastMessage: option.toastMessage\n        })\n      }\n    }\n\n    this.submitAllAnswers(null, false)\n  }\n\n  answerRadioQuestion = (questionId, option) => {\n    if (Number(this.state.question.id) === this.LITTLE_ONCE_ID.questionId && Number(option.id) === this.LITTLE_ONCE_ID.optionId) {\n      this.SKIP_BOTH_OPTION = true\n    } else if (this.SKIP_BOTH_OPTION) {\n      this.SKIP_BOTH_OPTION = false\n    }\n    this.addAnswerToState(questionId, {option: option.id, optionText: option.value, action: option.action}, option);\n    this.gotoNextQuestion(this.state.question, this.state.parentId, option);\n  }\n\n  watchNextBtn = (ev) => {\n    this.setState({\n      nextBtnState: ev.target.value.length <= 0\n    })\n  }\n\n  answerDataQuestion = (questionId, response, dateCheck) => {\n    if (dateCheck) {\n      var now = new Date();\n      var day = (\"0\" + now.getDate()).slice(-2);\n      var month = (\"0\" + (now.getMonth() + 1)).slice(-2);\n      var currentDate = now.getFullYear() + \"-\" + (month) + \"-\" + (day);\n      if (currentDate <= response) {\n        this.addAnswerToState(questionId, {option: 0, optionText: response})\n        this.gotoNextQuestion(this.state.question, this.state.parentId);\n      } else {\n        toast.error(\"Invalid date\")\n      }\n    } else {\n      this.addAnswerToState(questionId, {option: 0, optionText: response})\n      this.gotoNextQuestion(this.state.question, this.state.parentId);\n    }\n  }\n\n  textInputTypeChangeHandler = (ev, inputRefs) => {\n    let enableBtn = false;\n\n    for (const inputRef of inputRefs) {\n      if (inputRef.current.value.length <= 0) {\n        enableBtn = true\n        break\n      }\n    }\n\n    this.setState({\n      nextBtnState: enableBtn\n    })\n  }\n\n  changeLoginState = (ev, value, refs) => {\n    ev.preventDefault()\n    for (let ref of refs) {\n      if (ref.current) {\n        ref.current.value = \"\"\n      }\n    }\n    this.setState({\n      login: value\n    })\n  }\n\n  setErrorBasedOnResponse = (err, type) => {\n    if (err.response.data && err.response.data.errors) {\n      for (let error of err.response.data.errors) {\n        let parentErrors = err.response.data.errors\n\n        if (parentErrors.length > 0) {\n          for (const subErrors of parentErrors) {\n            if (subErrors.errors && (subErrors.errors instanceof Array ? subErrors.errors.length > 0 : true)) {\n              let newErrorState = {}\n              for (const error in subErrors.errors) {\n                newErrorState[error] = subErrors.errors[error].length > 0 ? subErrors.errors[error][0] : \"\"\n              }\n              switch (type) {\n                case \"signUp\":\n                  this.setState({\n                    signUpErrors: newErrorState\n                  })\n                  break\n                case \"signIn\":\n                  this.setState({\n                    signInErrors: newErrorState\n                  })\n                  break\n              }\n            } else {\n              toast.error(error.message)\n            }\n          }\n        }\n      }\n    }\n    console.error(err.response)\n  }\n\n  signInClickHandler = (emailRef, passwordRef) => {\n    if (emailRef.current.value.length <= 0 || passwordRef.current.value.length <= 0) {\n      this.setState({\n        signInErrors: {\n          email: emailRef.current.value.length <= 0 ? \"This field is mandatory\": \"\",\n          password: passwordRef.current.value.length <= 0 ? \"This field is mandatory\" : \"\"\n        }\n      })\n      return;\n    }\n\n    // Checking for valid email\n    if (!this.checkValidEmail(emailRef.current.value)) {\n      this.setState({\n        signInErrors: {\n          email: \"Invalid email address\"\n        }\n      })\n      return;\n    }\n\n    let reqData = {\n      query: LOGIN_USER,\n      operationName: \"login_user\",\n      variables: {\n        email: emailRef.current.value,\n        password: passwordRef.current.value,\n        returnTo: window.location.origin + routes.MY_REGISTRY.HOME\n      }\n    }\n    this.props.dispatch(setLoader(true))\n    graphQLNoToken(reqData).then(async res => {\n      if (res.data.data.loginUser) {\n        const cookies = new Cookies();\n        cookies.set(\"access_token\", res.data.data.loginUser.token, {path: \"/\"})\n\n        // Checking if user has registry\n        let data = {\n          query: GET_REGISTRIES\n        }\n        await graphQLNoHeader(data, {headers: {\"Authorization\": \"Token \" + res.data.data.loginUser.token}}).then(async registryRes => {\n          if (registryRes.data.data.registries.edges.length > 0) {\n            // TODO: Set currently active registry\n            let activeRegistry = registryRes.data.data.registries.edges[registryRes.data.data.registries.edges.length - 1]\n            let token = cookies.get(\"access_token\")\n            if (activeRegistry.node.id && token) {\n              await this.props.dispatch(setOnboardingRegistry(activeRegistry.node.id))\n              await getOnboardingQuestions(this.props.dispatch, activeRegistry.node.id, token)\n            }\n            if (res.data.data.loginUser.redirectionUrl) {\n              await this.setState({\n                signInRedirectionUrl: res.data.data.loginUser.redirectionUrl\n              })\n              // window.open(res.data.data.loginUser.redirectionUrl, \"_self\")\n            }\n            // window.open(routes.MY_REGISTRY.HOME, \"_self\")\n            // updateRegistryDetailState(this.props.dispatch, registryRes.data.data.registries.edges);\n          } else {\n            // Creating Registry\n            this.createRegistry()\n          }\n\n        }).catch(err => {\n          console.error(err);\n        })\n        this.setState({\n          redirectionUrl: res.data.data.loginUser.redirectionUrl\n        })\n        this.props.dispatch(setLoggingStatus(true))\n        this.submitAllAnswers(null, true)\n        this.props.dispatch(setLoader(false))\n      }\n    }).catch(err => {\n      this.props.dispatch(setLoader(false))\n      if (err.response && err.response.status === 401) {\n        this.setState({\n          signInErrors: {\n            email: \"Invalid email or password\",\n            password: \"Invalid email or password\"\n          }\n        })\n        return;\n      }\n      this.setErrorBasedOnResponse(err, \"signIn\")\n    })\n  }\n\n  getSignInContent = () => {\n    const emailRef = React.createRef()\n    const passwordRef = React.createRef()\n    return (\n      <>\n        <div className=\"d-flex flex-column mb-4\">\n          <span className=\"text-sm font-medium onboarding-required-field\">Email Address</span>\n          <input\n            className={[\"onboarding-input py-1 px-2 text-body mb-0 mt-1\", this.state.signInErrors.email ? \"onboarding-input-error\" : \"\"].join(\" \")}\n            type=\"email\"\n            name=\"signIn-email\"\n            ref={emailRef}\n            placeholder=\"johndoe@email.com\"\n          />\n          {this.state.signInErrors.email ?\n            <p className=\"text-sm onboarding-error-message mt-1\">{this.state.signInErrors.email}</p>\n            : null}\n        </div>\n        <div className=\"d-flex flex-column mb-1\">\n          <span className=\"text-sm font-medium onboarding-required-field\">Password</span>\n          <input\n            className={[\"onboarding-input py-1 px-2 text-body mb-0 mt-1\", this.state.signInErrors.password ? \"onboarding-input-error\" : \"\"].join(\" \")}\n            type=\"password\"\n            name=\"signIn-password\"\n            ref={passwordRef}\n            placeholder=\"Password\"\n          />\n          {this.state.signInErrors.password ?\n            <p className=\"text-sm onboarding-error-message mt-1\">{this.state.signInErrors.password}</p>\n            : null}\n        </div>\n        <div className=\"d-flex flex-column mb-4\">\n          <a className=\"text-body font-medium onboarding-link-text\" href={M_A_FORGOT_PASSWORD_LINK} target=\"_blank\">Forgot\n            Password</a>\n        </div>\n        <Button\n          variant=\"primary\"\n          className=\"px-3 py-1 font-medium onboarding-next-button\"\n          onClick={() => this.signInClickHandler(emailRef, passwordRef)}\n        >Sign In</Button>\n        {/*TODO : Add Api on Onclick of the button above*/}\n        <h4 className=\"mt-11\">Don't have an account? <a href=\"#\" className=\"font-medium onboarding-link-text\"\n                                                        onClick={(ev) => this.changeLoginState(ev, false, [emailRef, passwordRef])}\n        >Sign Up</a></h4>\n      </>\n    )\n  }\n\n  signUpClickHandler = (firstNameRef, lastNameRef, emailRef, passwordRef) => {\n    let errors = {}\n    let valid = true\n    if (firstNameRef.current.value.length <= 0) {\n      errors['firstName'] = \"This field is required\"\n      valid = false\n    }\n\n    if (lastNameRef.current.value.length <= 0) {\n      errors['lastName'] = \"This field is required\"\n      valid = false\n    }\n\n    if (emailRef.current.value.length <= 0) {\n      errors['email'] = \"This field is required\"\n      valid = false\n    } else if (!this.checkValidEmail(emailRef.current.value)) {\n      errors['email'] = \"Invalid email address\"\n      valid = false\n    }\n\n    if (passwordRef.current.value.length <= 0) {\n      errors['password'] = \"This field is required\"\n      valid = false\n    }\n\n    this.setState({\n      signUpErrors: errors\n    })\n\n    if (!valid) {\n      return\n    }\n\n    // Clearing all error messages\n    this.clearErrorState()\n\n    let reqData = {\n      query: REGISTER_USER,\n      operationName: \"register_user\",\n      variables: {\n        name: `${firstNameRef.current.value} ${lastNameRef.current.value}`,\n        email: emailRef.current.value,\n        password: passwordRef.current.value\n      }\n    }\n    this.props.dispatch(setLoader(true))\n    graphQLNoToken(reqData).then(res => {\n      if (res.data.data.registerUser) {\n        const cookies = new Cookies();\n        cookies.set(\"access_token\", res.data.data.registerUser.token, {path: \"/\"})\n        this.setState({\n          redirectionUrl: res.data.data.registerUser.redirectionUrl\n        })\n        this.createRegistry()\n        this.submitAllAnswers(null, true)\n        this.props.dispatch(setLoggingStatus(true))\n        this.props.dispatch(setLoader(false))\n      }\n    }).catch(err => {\n      this.setErrorBasedOnResponse(err, \"signUp\")\n      this.props.dispatch(setLoader(false))\n    })\n  }\n\n  getSignUpContent = () => {\n    let firstNameRef = React.createRef()\n    let lastNameRef = React.createRef()\n    let emailRef = React.createRef()\n    let passwordRef = React.createRef()\n    return (\n      <>\n        <div className=\"row\">\n          <div className=\"col-12 col-md-6 d-flex flex-column mb-4\">\n            <span className=\"text-sm font-medium onboarding-required-field\">First Name</span>\n            <input\n              className={[\"onboarding-input py-1 px-2 text-body mb-0 mt-1 w-100\", this.state.signUpErrors.firstName ? \"onboarding-input-error\" : \"\"].join(\" \")}\n              type=\"text\"\n              name=\"first-name\"\n              placeholder=\"John\"\n              ref={firstNameRef}\n            />\n            {this.state.signUpErrors.firstName ?\n              <p className=\"text-sm onboarding-error-message mt-1\">{this.state.signUpErrors.firstName}</p>\n              : null}\n          </div>\n          <div className=\"col-12 col-md-6 d-flex flex-column mb-4\">\n            <span className=\"text-sm font-medium onboarding-required-field\">Last Name</span>\n            <input\n              className={[\"onboarding-input py-1 px-2 text-body mb-0 mt-1 w-100\", this.state.signUpErrors.lastName ? \"onboarding-input-error\" : \"\"].join(\" \")}\n              type=\"text\"\n              name=\"last-name\"\n              placeholder=\"Doe\"\n              ref={lastNameRef}\n            />\n            {this.state.signUpErrors.lastName ?\n              <p className=\"text-sm onboarding-error-message mt-1\">{this.state.signUpErrors.lastName}</p>\n              : null}\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col-12 col-md-6 d-flex flex-column mb-4\">\n            <span className=\"text-sm font-medium onboarding-required-field\">Email Address</span>\n            <input\n              className={[\"onboarding-input py-1 px-2 text-body mb-0 mt-1 w-100\", this.state.signUpErrors.email ? \"onboarding-input-error\" : \"\"].join(\" \")}\n              type=\"email\"\n              name=\"email\"\n              placeholder=\"johndoe@email.com\"\n              ref={emailRef}\n            />\n            {this.state.signUpErrors.email ?\n              <p className=\"text-sm onboarding-error-message mt-1\">{this.state.signUpErrors.email}</p>\n              : null}\n          </div>\n          <div className=\"col-12 col-md-6 d-flex flex-column mb-4\">\n            <span className=\"text-sm font-medium onboarding-required-field\">Password</span>\n            <input\n              className={[\"onboarding-input py-1 px-2 text-body mb-0 mt-1 w-100\", this.state.signUpErrors.password ? \"onboarding-input-error\" : \"\"].join(\" \")}\n              type=\"password\"\n              name=\"password\"\n              placeholder=\"Password\"\n              ref={passwordRef}\n            />\n            {this.state.signUpErrors.password ?\n              <p className=\"text-sm onboarding-error-message mt-1\">{this.state.signUpErrors.password}</p>\n              : null}\n          </div>\n        </div>\n        <Button\n          variant=\"primary\"\n          className=\"px-3 py-1 font-medium onboarding-next-button\"\n          onClick={() => this.signUpClickHandler(firstNameRef, lastNameRef, emailRef, passwordRef)}\n        >Sign Up</Button>\n        <h4 className=\"mt-11\">Already have an account? <a href=\"#\" className=\"font-medium onboarding-link-text\"\n                                                          tabindex=\"0\"\n                                                          onClick={(ev) => this.changeLoginState(ev, true, [firstNameRef, lastNameRef, emailRef, passwordRef])}>Sign\n          In</a></h4>\n      </>\n    )\n  }\n\n  savePartnerDetail = (nameRef, emailRef) => {\n    let error = {}\n    if (nameRef.current.value.length <= 0 || emailRef.current.value.length <= 0) {\n      toast.error(\"Please enter all fields\")\n      return\n    }\n\n    // Checking for valid email\n    if (!this.checkValidEmail(emailRef.current.value)) {\n      error['email'] = \"Invalid email address\";\n    }\n    if (Object.keys(error).length > 0) {\n      this.setState({\n        partnerErrors: error\n      })\n      return\n    }\n\n    const cookies = new Cookies();\n    let reqData = {\n      query: ADD_PARTNER_ACCOUNT,\n      operationName: \"addPartner\",\n      variables: {\n        partnerDetail: {\n          email: emailRef.current.value,\n          name: nameRef.current.value\n        }\n      }\n    }\n    graphQLNoHeader(reqData, {\n      headers: {\"Authorization\": cookies.get(\"access_token\") ? \"Token \" + cookies.get(\"access_token\") : \"\"}\n    }).then(res => {\n      if (res.data.data.addPartnerAccount) {\n        this.gotoNextQuestion(this.state.question, this.state.parentId);\n      } else {\n        toast.error(\"Some error occurred\");\n      }\n    }).catch(err => {\n      toast.error(\"Some error occurred\");\n      console.error(err.response.data);\n    })\n  }\n\n  getPartnerContent = () => {\n    const nameRef = React.createRef()\n    const emailRef = React.createRef()\n    return (\n      <>\n        <div className=\"d-flex flex-column mb-4\">\n          <span className=\"text-sm font-medium onboarding-required-field\">Name</span>\n          <input\n            className=\"onboarding-input py-1 px-2 text-body mb-0 mt-1\"\n            type=\"text\"\n            name=\"name\"\n            placeholder=\"Name\"\n            ref={nameRef}\n            onChange={(ev) => this.textInputTypeChangeHandler(ev, [nameRef, emailRef])}\n          />\n        </div>\n        <div className=\"d-flex flex-column mb-4\">\n          <span className=\"text-sm font-medium onboarding-required-field\">Email Address</span>\n          <input\n            className={[\"onboarding-input py-1 px-2 text-body mt-1 mb-0\", this.state.partnerErrors.email ? \"onboarding-input-error\" : \"\"].join(\" \")}\n            type=\"email\"\n            name=\"email\"\n            placeholder=\"Your Email\"\n            ref={emailRef}\n            onChange={(ev) => this.textInputTypeChangeHandler(ev, [nameRef, emailRef])}\n          />\n          {this.state.partnerErrors.email ?\n            <p className=\"text-sm onboarding-error-message mt-1\">{this.state.partnerErrors.email}</p>\n            : null}\n        </div>\n        <Button\n          variant=\"primary\"\n          disabled={this.state.nextBtnState !== undefined ? this.state.nextBtnState : true}\n          className=\"px-3 py-1 font-medium onboarding-next-button\"\n          onClick={() => this.savePartnerDetail(nameRef, emailRef)}\n        >Next</Button>\n      </>\n    )\n  }\n\n  render() {\n    // if (this.props.stateOnboardingAnswers) {\n    //   this.submitAllAnswers(null, false)\n    // }\n\n    // Redirecting user to registry home if registry found\n    if (this.props.stateRegistryInfo.id) {\n      return <Redirect to={routes.MY_REGISTRY.HOME}/>\n    }\n\n    // Redirecting to first question if not answered any\n    if (this.props.stateOnboardingQuestions.length > 0\n      && this.props.stateOnboardingAnswers.length <= 0\n      && this.props.location.pathname !== routes.ONBOARDING.HOME + `/${this.props.stateOnboardingQuestions[0].id}`) {\n      return <Redirect to={routes.ONBOARDING.HOME + `/${this.props.stateOnboardingQuestions[0].id}`}/>\n    }\n\n    if (!this.state.question.title && this.props.stateOnboardingQuestions.length > 0 && this.props.stateRouter.location.pathname !== routes.ONBOARDING.HOME + `/${this.state.question.id}`) {\n      this.setQuestionBasedOnId(this.props.match.params['questionId'])\n    }\n\n    // Skipping Login Question if user is already logged in\n    if (this.props.stateLoggedIn && this.state.question.answerInputType === this.LOGIN) {\n      // If user already logged into M&A Store\n      this.setState((prevState, _) => ({\n        redirectionUrl: prevState.redirectionUrl ? prevState.redirectionUrl : routes.MY_REGISTRY.HOME\n      }))\n      this.gotoNextQuestion(this.state.question, null);\n    }\n\n    if (this.state.toastMessage && !this.isActiveToast) {\n      if (this.props.history.action === \"PUSH\") {\n        toast.dismiss()\n        toast.info(<h4 className=\"font-medium text-center\">{this.state.toastMessage}</h4>)\n        this.isActiveToast = true\n        // setTimeout(() => this.setState({toastMessage: \"\"}), 4000)\n      }\n    } else {\n      // toast.dismiss()\n    }\n\n    // Setting all the options for the questions\n    let options = []\n    let staticQuestionTitle = \"\";\n    var now = new Date();\n    var day = (\"0\" + now.getDate()).slice(-2);\n    var month = (\"0\" + (now.getMonth() + 1)).slice(-2);\n    var today = now.getFullYear() + \"-\" + (month) + \"-\" + (day);\n\n    if (this.state.question.answerInputType === this.RADIO) {\n      for (const option of this.state.question.options) {\n        if (this.SKIP_BOTH_OPTION && Number(this.state.question.id) === this.BOTH_OPTION_ID.questionId && Number(option.id) === this.BOTH_OPTION_ID.optionId) {\n          this.SKIP_BOTH_OPTION = true\n        } else {\n          options.push(\n            <Option className={[\"mb-2 mr-4\", this.state.currentAnswer && this.state.currentAnswer.optionText === option.value ? \"onboarding-selected\" : \"\"].join(\" \")}\n                    onClick={() => this.answerRadioQuestion(this.state.question.id, option)}>\n              <h4 className=\"d-inline\">{option.value}</h4>{option.helpText ?\n              <span className=\"text-sm ml-1 onboarding-option-help-text\">{option.helpText}</span> : null}</Option>\n          )\n        }\n      }\n    } else if (this.state.question.answerInputType === \"Date\") {\n      let inputRef = React.createRef();\n      options.push(\n        <div className=\"d-flex flex-column\">\n          {/*TODO: Get placeholder from backend*/}\n          <input\n            type=\"date\"\n            className=\"onboarding-input py-1 px-2 text-body mb-0\"\n            placeholder=\"Date\"\n            ref={inputRef}\n            onChange={(ev) => this.watchNextBtn(ev)}\n            min={today}\n            defaultValue={this.state.currentAnswer ? this.state.currentAnswer.optionText : \"\"}\n            max=\"9999-12-12\"\n          />\n          <Button\n            variant=\"primary\"\n            disabled={this.state.nextBtnState !== undefined ? this.state.nextBtnState : true}\n            onClick={() => this.answerDataQuestion(this.state.question.id, inputRef.current.value, true)}\n            className=\"px-3 py-1 font-medium mt-4 onboarding-next-button\"\n          >Next</Button>\n        </div>\n      )\n    } else if (this.state.question.answerInputType === \"Text\") {\n      let inputRefs = []\n      const inputRef = React.createRef()\n      inputRefs.push(inputRef)\n      options.push(\n        // TODO: Update this part if there is a Text type question\n        <div className=\"d-flex flex-column\">\n          <input\n            className=\"onboarding-input py-1 px-2 text-body mb-0 mt-1\"\n            type=\"Text\"\n            name=\"Answer\"\n            ref={inputRef}\n            defaultValue={this.state.currentAnswer ? this.state.currentAnswer.optionText : \"\"}\n            onChange={(ev) => this.textInputTypeChangeHandler(ev, inputRefs)}\n          />\n          <Button\n            variant=\"primary\"\n            disabled={this.state.nextBtnState !== undefined ? this.state.nextBtnState : true}\n            onClick={() => this.answerDataQuestion(this.state.question.id, inputRef.current ? inputRef.current.value : \"\", false)}\n            className=\"mt-4 px-3 py-1 font-medium onboarding-next-button\"\n          >Next</Button>\n        </div>\n      )\n    } else if (this.state.question.answerInputType === this.LOGIN) {\n      let content = null;\n      if (this.state.login) {\n        staticQuestionTitle = this.LOGIN_TITLE\n        content = this.getSignInContent()\n      } else {\n        staticQuestionTitle = this.SIGNUP_TITLE\n        content = this.getSignUpContent()\n      }\n\n      options.push(content)\n    } else if (this.state.question.answerInputType === this.PARTNER) {\n      staticQuestionTitle = this.PARTNER_TITLE;\n      options.push(this.getPartnerContent())\n    }\n\n    return (\n      <>\n        <div className=\"baby-registry-onboarding container\">\n          <div className=\"row justify-content-center mt-24\">\n            <div className=\"col-12 col-md-6\">\n              <span\n                className=\"font-body onboading-question\">{[this.LOGIN, this.PARTNER].indexOf(this.state.question.answerInputType) !== -1 ? staticQuestionTitle : this.state.question.title}</span>\n            </div>\n          </div>\n          <div className=\"row justify-content-center mt-6\">\n            <div\n              className={[\"col-12\", this.state.question.answerInputType === this.LOGIN && !this.state.login ? \"col-md-7 offset-md-1\" : \"col-md-6\"].join(\" \")}>\n              {options.map(option => option)}\n            </div>\n          </div>\n        </div>\n        <ToastContainer\n          position=\"top-center\"\n          className=\"onboarding-toast-container\"\n          toastClassName=\"onboarding-toast px-3 py-1\"\n          autoClose={2000}\n          hideProgressBar={true}\n          newestOnTop={true}\n          draggable={false}\n          closeOnClick={false}\n          closeButton={null}\n        />\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    stateRegistryInfo: state.registry.info,\n    stateLoggedIn: state.registry.loggedIn,\n    stateOnboardingQuestions: state.onboarding.questions,\n    stateOnboardingAnswers: state.onboarding.answers,\n    stateOnboardingRegistry: state.registry.onboardingRegistry,\n    stateRouter: state.router\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(Onboarding);","import axios from 'axios';\nimport { push } from \"connected-react-router\";\nimport { API_END_POINTS, API_URL } from '../../../utils/constants'\n\nexport const VERIFY_TOKEN_ACTION_TYPES = {\n    VERIFY_TOKEN: \"VERIFY_TOKEN\",\n    SET_CUSTOMER: \"SET_CUSTOMER\"\n}\n\nexport const setCustomer = (payload) => {\n    return {\n        type: VERIFY_TOKEN_ACTION_TYPES.SET_CUSTOMER,\n        payload: payload\n    }\n}\n\nexport const verifyTokenRequest = params => {\n    return dispatch => {\n        axios.post(API_URL + API_END_POINTS.VERIFY_TOKEN, {\n            token: params.token\n        }).then(response => {\n            dispatch(setCustomer({\n                customer: response.data.data.customer,\n                token: response.data.data.token\n            }))\n        }).then(() => {\n            dispatch(redirectVerifyToken())\n        }).catch(error => {\n            console.log(error);\n        })\n\n    }\n}\n\nexport const redirectVerifyToken = () => dispatch => {\n    dispatch(push(\"/another\"));\n};","import { Component } from \"react\";\nimport { connect } from 'react-redux';\n\nimport { verifyTokenRequest } from './VerifyTokenActions'\n\n\nclass VerifyToken extends Component {\n\n    componentDidMount() {\n        this.props.verifyToken({\n            token: this.props.match.params.token\n        })\n    }\n\n    render() {\n        return \"\"\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        verifyToken: (params) => dispatch(verifyTokenRequest(params))\n    };\n};\nexport default connect(null, mapDispatchToProps)(VerifyToken);","import React from 'react';\nimport \"./PersonaliseHeader.scss\";\nimport { withRouter } from \"react-router\";\nimport routes from \"utils/routes\";\n\n\nconst PersonaliseHeader = (props) => {\n    const closePersonalise = (event) => {\n        event.preventDefault();\n        // And Forwarding him to edit checklist\n        if(props.location.state?.openEditChecklist) {\n            props.history.push(routes.PERSONALIZE.CHECKLIST)\n        } \n        // And Forwarding to build registry\n        else {\n            props.history.push(routes.MY_REGISTRY.HOME)\n        }\n    }\n    \n    return (\n        <div className=\"personalise-header\" id=\"personalise-header\">\n            <div className=\"container\">\n                <div className=\"row\">\n                    <div className=\"col d-flex justify-content-between py-2\">\n                        <p className=\"text-body font-medium personalise-text\">My Registry Quiz</p>\n                        <i className=\"icon-close align-self-center personalise-close\" onClick={(e) => { closePersonalise(e) }} />\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default withRouter(PersonaliseHeader);","import React from 'react';\nimport \"./PersonaliseFooter.scss\";\n\n\nconst PersonaliseFooter = (props) => {\n  const closePersonalise = (event) => {\n    event.preventDefault();\n    // props.history.push(routes.REGISTRY.HOME)\n  }\n\n  return (\n    <div className=\"personalise-footer\">\n      <div className=\"container\">\n        <div className=\"row\">\n          <div className=\"col-4 justify-content-between pt-2 pb-4\">\n            <div className=\"mb-1\">\n              {props.percentage ? <p className=\"text-sm\">{props.percentage}% complete</p> : null}\n            </div>\n            <div className=\"personalise-progress-background\">\n              <div className=\"personalise-progress\" style={{ width: `${props.percentage}%` }} />\n            </div>\n          </div>\n          {/* <i className=\"icon-close align-self-center personalise-close\" onClick={(e) => { closePersonalise(e) }} /> */}\n          <div className=\"col d-flex justify-content-end\">\n            <i className=\"icon-chevron-left align-self-center personalise-footer-icon p-2\" onClick={props.prevQuestion} />\n            <i className=\"icon-chevron-right align-self-center personalise-footer-icon p-2 ml-2\" onClick={props.nextQuestion} />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default PersonaliseFooter;","import React, { createRef } from \"react\";\n// import \"./CheckListItems.scss\";\nimport { withTranslation } from \"react-i18next\";\nimport PersonaliseHeader from \"./components/personalise-header/PersonaliseHeader\";\nimport { getPersonalizeQuestions } from \"utils/commonFunction\";\nimport { connect } from \"react-redux\";\nimport PersonaliseFooter from \"./components/personalise-footer/PersonaliseFooter\";\nimport { toast, ToastContainer } from \"react-toastify\";\nimport Option from \"../commons/components/questions/option/Option\";\nimport { updatePersonalizeQuestionAnswer, addPersonalizeQuestionAnswer, addPersonalizeQuestion } from \"./PersonaliseCheckListActions\";\nimport \"./PersonaliseChecklist.scss\";\nimport Button from \"modules/commons/components/button-component/ButtonComponent\";\nimport routes from \"utils/routes\";\nimport { SAVE_SINGLE_QUESTION_RESPONSE } from 'api/mutations';\nimport { graphQL } from 'api/axios';\n\nclass PersonaliseChecklist extends React.Component {\n\n  state = {\n    parentId: null,\n    prevQuestionId: [],\n    question: {},\n    activeQuestionId: null,\n    toastMessage: \"\",\n    percentage: 0,\n    checkBoxSelected: [],\n  }\n\n  isActiveToast = false\n  headerHeightFromTop = null\n\n  // Answer type mapping\n  RADIO = \"Radio\"\n  CHECKBOX = \"Checkbox\"\n\n  componentDidMount() {\n    // getPersonalizeQuestions(this.props.stateRegistryInfo.id, this.props.dispatch)\n    this.headerHeightFromTop = null\n    window.addEventListener('scroll', this.handleScroll);\n    this.setQuestionBasedOnId(this.props.match.params['questionId'])\n    this.clearToastMessage()\n  }\n\n  calulatePercentage = (answerQuestionCount, totalQuestionCount) => {\n    let totalAnwer = 0;\n\n    const questions = [...this.props.statePersonaliseQuestions]\n    for (let question of questions) {\n      if (question.answers.length > 0) {\n        totalAnwer++;\n      }\n      if (questions.followUpQuestion) {\n        for (let subQuestion of question.followUpQuestions) {\n          if (subQuestion.answers.length > 0) {\n            totalAnwer++;\n          }\n        }\n      }\n    }\n    return this.props.statePersonaliseQuestions.length ? Math.ceil(totalAnwer * 100 / totalQuestionCount) : 0;\n  }\n\n  gotoNextQuestion = async (question, parentId, option = {}) => {\n    if (this.state.question.answerInputType === this.CHECKBOX) {\n      this.answerCheckBoxQuestion(this.state.question.id, this.state.checkBoxSelected)\n    }\n    let nextQuestionId = null;\n    let returnNext = false;\n    const idToMatch = parentId ? parentId : question.id;\n\n    // Finding if given anwer has followup or not & Only works for 1 follow up question\n    if (this.state.question.answers.length) {\n      let answerId = this.state.question.answers[0].questionOption.id\n      let tempOption = null\n      for (let ans of [...this.state.question.options]) {\n        if (ans.id === answerId && ans.followUpQuestions?.length) {\n          tempOption = { ...ans };\n          break;\n        }\n      }\n      if (tempOption) {\n        await this.setState({\n          question: tempOption.followUpQuestions[0].question,\n          parentId: tempOption.followUpQuestions[0].parentQuestion\n        })\n        await this.gotoNextQuestion(this.state.question, this.state.parentId, tempOption)\n        return;\n      }\n    }\n\n    // Only works for 1 follow up question\n    if (option.followUpQuestions && option.followUpQuestions.length > 0) {\n      nextQuestionId = option.followUpQuestions[0].question.id;\n    } else {\n      for (let ques of this.props.statePersonaliseQuestions) {\n        if (returnNext) {\n          nextQuestionId = ques.id\n          break\n        }\n        if (ques.id === idToMatch) {\n          returnNext = true;\n        }\n      }\n    }\n\n    if (nextQuestionId === null && returnNext) {\n      // This is last question\n      // And Forwarding him to edit checklist\n      // TODO: change this if needed\n      // if(this.props.location.state?.openEditChecklist) {\n      //   this.props.history.push(routes.PERSONALIZE.CHECKLIST)\n      // } \n      // // And Forwarding to build registry\n      // else {\n      //   this.props.history.push(routes.MY_REGISTRY.HOME)\n      // }\n      this.props.history.push({\n        pathname: routes.MY_REGISTRY.HOME,\n        state: { toastMessage: \"Your checklist and recommendations have been updated\" }\n      })\n    } else if (nextQuestionId) {\n      await this.setState({\n        parentId: null,\n        prevQuestionId: this.isActiveIdPresent() ? [...this.state.prevQuestionId, this.state.question.id] : this.state.prevQuestionId,\n        activeQuestionId: nextQuestionId\n      })\n      await this.setQuestionBasedOnId(nextQuestionId)\n      this.clearToastMessage();\n    }\n  }\n\n  gotoPrevQuestion = (prevQuestionId) => {\n    this.setQuestionBasedOnId(prevQuestionId);\n    if (this.state.prevQuestionId.length > 1) {\n      let popPrevQuestionId = [...this.state.prevQuestionId];\n      popPrevQuestionId.pop();\n      this.clearToastMessage();\n      this.setState({\n        prevQuestionId: popPrevQuestionId,\n        activeQuestionId: popPrevQuestionId.length > 0 ? popPrevQuestionId[popPrevQuestionId.length - 1] : this.state.activeQuestionId\n      })\n    }\n  }\n\n  setQuestionBasedOnId = (questionId) => {\n    if (questionId) {\n      let finalQuestion = {};\n      let foundQuestion = false;\n      let parentId = null;\n      for (const question of this.props.statePersonaliseQuestions) {\n        if (foundQuestion) {\n          break;\n        }\n        if (question.id === questionId) {\n          finalQuestion = question;\n          foundQuestion = true;\n          break;\n        }\n        for (const option of question.options) {\n          if (option.followUpQuestions.length > 0) {\n            for (const followUpQuestion of option.followUpQuestions) {\n              if (followUpQuestion.question.id === questionId) {\n                finalQuestion = followUpQuestion.question;\n                parentId = followUpQuestion.parentQuestion;\n                foundQuestion = true\n                break;\n              }\n            }\n          }\n        }\n      }\n\n      if (finalQuestion.id) {\n        this.setState({\n          question: finalQuestion,\n          parentId: parentId,\n        })\n      } else {\n        console.log(\"No Question Found\");\n      }\n    }\n  }\n\n  addAnswerToState = (response) => {\n    const alreadyAnswered = this.props.statePersonaliseAnswers.find(el => el.question === this.state.question.id)\n    if (alreadyAnswered) {\n      // This will delete the answers that were given after the matched response\n      let newState = []\n      for (let answer of this.props.statePersonaliseAnswers) {\n        if (answer.question === this.state.question.id) {\n          answer.response = response;\n          newState.push(answer)\n        }\n        else {\n          newState.push(answer)\n        }\n      }\n      this.props.dispatch(updatePersonalizeQuestionAnswer(newState))\n    } else {\n      this.props.dispatch(addPersonalizeQuestionAnswer({ question: this.state.question.id, response: response }))\n    }\n  }\n\n  isActiveIdPresent = () => {\n    if (this.state.prevQuestionId.length) {\n      if (this.state.prevQuestionId[this.state.prevQuestionId.length - 1] === this.state.question.id) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  answerRadioQuestion = (questionId, option) => {\n    this.addAnswerToState(option);\n    this.gotoNextQuestion(this.state.question, this.state.parentId, option);\n    // TODO: Remove comment this if needed\n    // if (this.isActiveIdPresent) {\n    //   this.setState({\n    //     prevQuestionId: this.isActiveIdPresent() ? [...this.state.prevQuestionId, this.state.activeQuestionId] : this.state.prevQuestionId,\n    //   })\n    // }\n\n    let finalAnswer = [{\n      option: option.id,\n      optionText: option.value\n    }]\n    this.submitQuestionAnswer(questionId, finalAnswer, option);\n  }\n\n  answerCheckBoxQuestion = (questionId, option) => {\n    this.addAnswerToState(option[0]);\n    // this.calulatePercentage();\n    if (this.isActiveIdPresent) {\n      this.setState({\n        prevQuestionId: this.isActiveIdPresent() ? [...this.state.prevQuestionId, this.state.activeQuestionId] : this.state.prevQuestionId,\n      })\n    }\n\n    // let finalAnswer = [{\n    //   option: option.id,\n    //   optionText: option.value\n    // }]\n\n    let finalAnswer = []\n\n    for (let op of option) {\n      finalAnswer.push({ option: op.id, optionText: op.value })\n    }\n    this.submitQuestionAnswer(questionId, finalAnswer, option);\n  }\n\n  selectCheckboxAnswer = (event, checkBoxRef, option) => {\n    checkBoxRef.current.classList.toggle(\"personalise-checkbox-selected\");\n    if (event.target.checked) {\n      this.setState({\n        // checkBoxSelected: selectedOption.push(option)\n        checkBoxSelected: [...this.state.checkBoxSelected, option]\n      })\n    }\n    else {\n      var removeIndex = this.state.checkBoxSelected.map(function (item) { return item.id; }).indexOf(option.id);\n      this.state.checkBoxSelected.splice(removeIndex, 1);\n    }\n  }\n\n  submitQuestionAnswer = (questionId, answer, option = null) => {\n\n    if (option?.toastMessage) {\n      this.setState({\n        toastMessage: option.toastMessage\n      })\n    } else {\n      this.setToastMessage()\n    }\n    let questionOptionInput = {\n      question: questionId,\n      questionOptionInput: answer\n    }\n    let reqData = {\n      query: SAVE_SINGLE_QUESTION_RESPONSE,\n      variables: {\n        registryId: this.props.stateRegistryInfo.id,\n        registryQuestionOptionInput: questionOptionInput\n      }\n    }\n\n    graphQL(reqData).then(res => {\n      if (res.data.data) {\n        console.log('Answer Done')\n        this.setStateQuestionWithSelectedAnswer(questionId, answer)\n      }\n    }).catch(err => {\n      toast.error(\"Error occurred while fetching questions\");\n      console.error(err);\n    })\n  }\n\n  setStateQuestionWithSelectedAnswer = (questionId, answer) => {\n    let answerOpt = []\n    for (let ans of answer) {\n      answerOpt.push({ questionOption: { id: ans.option }, optionText: ans.optionText })\n    }\n    // Setting question state with selected answer\n    const questions = [...this.props.statePersonaliseQuestions].map(question => {\n\n      if (question.id === questionId) {\n        question.answers = answerOpt\n      }\n      question.options = question.options.map(opt => {\n        if (opt.followUpQuestions.length > 0) {\n          opt.followUpQuestions.map(followUpQuestion => {\n            if (followUpQuestion.question.id === questionId) {\n              followUpQuestion.question.answers = answerOpt\n            }\n          })\n        }\n        return opt;\n      })\n      question.isAnswered = false;\n      return question;\n    })\n    this.props.dispatch(addPersonalizeQuestion(questions))\n  }\n\n  clearToastMessage = () => {\n    this.setState({\n      toastMessage: \"\"\n    })\n  }\n\n  setToastMessage = () => {\n    let question = { ...this.state.question }\n    if (question.toastMessage) {\n      this.setState({\n        toastMessage: question.toastMessage\n      })\n      this.isActiveToast = false\n    } else {\n      this.clearToastMessage()\n    }\n  }\n\n  selectedColorSchemes = (data) => {\n    if (this.state.checkBoxSelected.length <= 0) {\n      this.setState({\n        checkBoxSelected: [...data]\n      })\n    }\n  }\n\n  handleScroll = (event) => {\n    let el = document.getElementById('personalise-header');\n    if (el) {\n      // Setting height from top to checklist\n      if (el.getBoundingClientRect().top === 0 && !this.headerHeightFromTop) {\n        this.headerHeightFromTop = window.scrollY\n      }\n      // Setting position of checklist to fixed\n      if (el.getBoundingClientRect().top <= 0) {\n        el.style.position = 'fixed';\n        el.style.top = 0;\n        el.style.width = '100%';\n      }\n      // Setting position of checklist to static\n      if (this.headerHeightFromTop >= window.scrollY) {\n        el.style.position = 'static';\n        el.style.top = 'auto';\n      }\n    }\n  }\n\n  render() {\n\n    if (!this.state.question.id && this.props.statePersonaliseQuestions.length > 0) {\n      let prevQuestionID = []\n      let currentQuestion = null\n      for (let question of this.props.statePersonaliseQuestions) {\n        if (!question.isPersonalize) {\n          prevQuestionID.push(question.id)\n        }\n        else {\n          currentQuestion = question\n          break\n        }\n      }\n      this.setState({\n        prevQuestionId: prevQuestionID,\n        activeQuestionId: currentQuestion.id,\n        question: currentQuestion\n      })\n\n    }\n\n    if (this.state.toastMessage && !this.isActiveToast) {\n      toast.dismiss()\n      toast.info(<h4 className=\"font-medium text-center\" dangerouslySetInnerHTML={{ __html: this.state.toastMessage }} />)\n      this.isActiveToast = true\n    } else {\n      // toast.dismiss()\n    }\n\n    // Setting all the options for the questions\n    let options = []\n    let staticQuestionTitle = \"\";\n\n    if (this.state.question.answerInputType === this.RADIO) {\n      const selectedOptionID = this.state.question.answers?.length > 0 ? this.state.question.answers[0].questionOption.id : null\n      options = this.state.question.options.map(option => (\n        <Option className={[\"mb-2 mr-4\", selectedOptionID === option.id ? \"answer-selected\" : \"\"].join(\" \")} onClick={() => this.answerRadioQuestion(this.state.question.id, option)}>\n          <h4 className=\"d-inline\">{option.value}</h4>{option.helpText ?\n            <div className=\"text-sm onboarding-option-help-text\">{option.helpText}</div> : null}</Option>\n      ))\n    } else if (this.state.question.answerInputType === this.CHECKBOX) {\n      // TODO: If it is selected\n      const selectedOptionID = []\n      if (this.state.question.answers?.length > 0) {\n        for (let ans of this.state.question.answers) {\n          if (!selectedOptionID.includes(ans.questionOption.id)) {\n            selectedOptionID.push(ans.questionOption.id)\n          }\n        }\n        const selectOptions = []\n        for (let selectedOption of this.state.question.options) {\n          if (selectedOptionID.includes(selectedOption.id)) {\n            selectOptions.push(selectedOption)\n          }\n        }\n        this.selectedColorSchemes(selectOptions);\n      }\n      options = this.state.question.options.map(option => {\n        let checkBoxRef = createRef();\n        return (\n          <div\n            className={[\"personalise-checkbox mr-3 mb-3\", selectedOptionID.includes(option.id) ? \"personalise-checkbox-selected\" : \"\"].join(\" \")} ref={checkBoxRef}>\n            <label className=\"checkbox d-flex align-items-center pb-0 mb-0\">\n              <span className=\"checkbox__input p-2\">\n                <input\n                  type=\"checkbox\"\n                  name={option.id}\n                  value={option.id}\n                  onChange={(e) => this.selectCheckboxAnswer(e, checkBoxRef, option)}\n                  defaultChecked={selectedOptionID.includes(option.id)}\n                />\n                <span className=\"checkbox__control d-flex justify-content-center align-items-center\">\n                  <i className=\"icon-check\"></i>\n                </span>\n              </span>\n              <h4 className=\"radio__label pr-2\">{option.value}</h4>\n            </label>\n          </div>\n        )\n      })\n      options.push(\n        // <div>\n        //   <Button\n        //     variant=\"primary\"\n        //     className=\"px-3 py-1 font-medium onboarding-next-button\"\n        //     onClick={() => this.answerCheckBoxQuestion(this.state.question.id, this.state.checkBoxSelected)}\n        //   >Done</Button>\n        // </div>\n      );\n    }\n\n    return (\n      <>\n        <div className=\"personalise\">\n          {/* Personalise Header */}\n          <PersonaliseHeader />\n\n          {/* Personalise Body */}\n          <div className=\"baby-registry-onboarding container mb-15\">\n            <div className=\"row justify-content-center mt-12 mt-md-24\">\n              <div className=\"col-12 col-md-6\">\n                <span\n                  className=\"font-body onboading-question\">{this.state.question.title}</span>\n              </div>\n            </div>\n            <div className=\"row justify-content-center mt-6\">\n              <div className=\"col-12 col-md-6\">\n                {options.map(option => option)}\n              </div>\n            </div>\n          </div>\n\n          {/* Personalise Footer */}\n          <PersonaliseFooter\n            percentage={this.calulatePercentage(this.props.statePersonaliseAnswers.length, this.props.statePersonaliseQuestions.length)}\n            prevQuestion={() => { this.gotoPrevQuestion(this.state.prevQuestionId[this.state.prevQuestionId.length - 1]) }}\n            nextQuestion={() => { this.gotoNextQuestion(this.state.question, this.state.parentId) }}\n          />\n        </div>\n\n        <ToastContainer\n          position=\"top-center\"\n          className=\"personalise-toast-container\"\n          toastClassName=\"personalise-toast px-3 py-1\"\n          autoClose={2000}\n          hideProgressBar={true}\n          newestOnTop={true}\n          draggable={false}\n          closeOnClick={false}\n          closeButton={null}\n        />\n      </>\n    );\n  }\n};\n\nconst mapStateToProps = state => {\n  return {\n    stateRegistryInfo: state.registry.info,\n    stateLoggedIn: state.registry.loggedIn,\n    stateCheckList: state.personaliseCheckList.editedPersonaliseCheckList,\n    statePersonaliseQuestions: state.personaliseCheckList.questions,\n    statePersonaliseAnswers: state.personaliseCheckList.answers,\n  }\n}\n\n\nexport default connect(\n  mapStateToProps\n)(PersonaliseChecklist);","import React, { useState } from \"react\";\nimport { GET_CATEGORIES } from \"../../../../api/queries\";\nimport { graphQL } from \"../../../../api/axios\";\nimport { setPersonaliseCheckListItems } from \"../../PersonaliseCheckListActions\";\nimport { connect } from \"react-redux\";\nimport './EditChecklist.scss';\nimport Counter from \"../../../commons/components/counter/Counter\";\nimport {\n  incrementCheckListQuantity,\n  setIsActiveCheckList,\n  decrementCheckListQuantity\n} from \"../../PersonaliseCheckListActions\";\nimport Button from \"../../../commons/components/button-component/ButtonComponent\";\nimport routes from \"utils/routes\";\nimport { SAVE_UPDATED_CHECKLIST } from \"api/mutations\";\nimport { toast } from \"react-toastify\";\nimport Toast from \"modules/commons/components/toast/Toast\";\nimport {getAllCategories, getTodoList} from 'utils/commonFunction';\nimport Modal from \"../../../commons/components/modal-component/ModalComponent\";\nimport { setLoader } from \"modules/registry/RegistryActions\";\n\n// import {setCheckListItems} from \"../../../my-registry/MyRegistryActions\";\n\nclass PersonaliseChecklist extends React.Component {\n  state = {\n    showOverrideModal: false,\n    showAlertQuestion: false,\n  };\n  headerHeightFromTop = null\n\n\n  componentDidMount() {\n    this.headerHeightFromTop = null\n    window.addEventListener('scroll', this.handleScroll);\n    this.getAllCategories(this.props.stateRegistryInfo.id, this.props.dispatch);\n  }\n\n  getAllCategories = (registryId, dispatch) => {\n    let data = {\n      query: GET_CATEGORIES,\n      variables: {\n        registryId: parseInt(registryId)\n      },\n    }\n    this.props.dispatch(setLoader(true))\n    graphQL(data).then(res => {\n      if (res.data.errors || res.data.error) {\n        // TODO: Add toast\n        console.log('Something went wrong-->', res.data.errors)\n        return;\n      } else {\n        let resData = getAllCategories(res.data.data.registryCategories, true)\n        let finalCheckList = []\n        // For Parent categories\n        for (let category of resData) {\n          let finalSubCategory = []\n\n          if (category.subCategories.length) {\n            // For Sub-Categories\n            for (let subCategory of category.subCategories) {\n              let tempSubCategory = []\n              if (subCategory.subProductTypes.length) {\n\n                // For subProductType\n                for (let subProductType of subCategory.subProductTypes) {\n                  subProductType.categoryName = subCategory.categoryName + ' (' + subProductType.categoryName + ')'\n                  if (subProductType.isExcluded) {\n                    subProductType.totalItemsCount = 1\n                    subProductType['isAdded'] = false\n                  } else {\n                    subProductType['isAdded'] = true\n                  }\n                  tempSubCategory.push(subProductType)\n                }\n              }\n              else {\n                if (subCategory.isExcluded) {\n                  subCategory.totalItemsCount = 1\n                  subCategory['isAdded'] = false\n                } else {\n                  subCategory['isAdded'] = true\n                }\n                tempSubCategory.push(subCategory)\n              }\n              finalSubCategory.push(...tempSubCategory)\n            }\n            let tempCategory = { ...category }\n            tempCategory.subCategories = finalSubCategory\n            finalCheckList.push(tempCategory)\n          }\n\n        }\n        this.props.dispatch(setLoader(false))\n        dispatch(setPersonaliseCheckListItems(finalCheckList))\n      }\n    }).catch(err => {\n      this.props.dispatch(setLoader(false))\n      console.error('Something went wrong-->', err);\n    })\n  }\n\n  closeAndSavePersonaliseCheckList = (event) => {\n    event.preventDefault();\n    let finalCheckListData = []\n    let tempStateCheckList = [...this.props.stateCheckList]\n    for (let category of tempStateCheckList) {\n      for (let subCategory of category.subCategories) {\n        // let tempData = null\n        let tempData = {\n          registryCategoryId: subCategory.id,\n          itemsCount: subCategory.totalItemsCount,\n          isExcluded: !subCategory.isAdded\n        }\n        finalCheckListData.push(tempData)\n      }\n    }\n\n    let registryId = this.props.stateRegistryInfo.id\n    let data = {\n      query: SAVE_UPDATED_CHECKLIST,\n      variables: {\n        registryId: registryId,\n        itemCountData: finalCheckListData\n      },\n    }\n\n    graphQL(data).then(res => {\n      if (res.data) {\n        toast.dismiss()\n        toast.success((\n          <p>Personalise Checklist Updated Successfully</p>\n        ))\n        getTodoList(registryId, this.props.dispatch)\n        this.props.history.push(routes.REGISTRY.HOME)\n      }\n\n    }).catch(err => {\n      console.error(err.message)\n      toast.dismiss()\n      toast.error((\n        <p>Some error occurred.</p>\n      ))\n    })\n  }\n\n  gotoPersonaliseQuestions = (event) => {\n    event.preventDefault();\n    this.props.history.push({\n      pathname: routes.PERSONALIZE.HOME,\n      state: { openEditChecklist: true }\n    })\n  }\n\n  removeConfirmFooter = (\n    <>\n      <Button className='py-1 px-3 font-medium' variant='secondary' onClick={() => {\n        this.props.history.push(routes.REGISTRY.HOME)\n        this.setState({ showOverrideModal: false })\n      }}>Do Not Override</Button>\n\n      <Button className='py-1 px-3 font-medium' variant='primary' onClick={(e) => {\n        this.closeAndSavePersonaliseCheckList(e)\n        this.setState({ showOverrideModal: false });\n      }}>Yes, Please Override</Button>\n    </>\n  )\n\n  quizModalFooter = (\n    <>\n      <Button className='py-1 px-3 font-medium' variant='secondary' onClick={() => {\n        this.setState({ showAlertQuestion: false })\n      }}>Close</Button>\n      <Button className='py-1 px-3 font-medium' variant='primary' onClick={(e) => {\n        this.gotoPersonaliseQuestions(e)\n        this.setState({ showAlertQuestion: false });\n      }}>Okay, got it</Button>\n    </>\n  )\n\n  handleScroll = (event) => {\n    let el = document.getElementById('personalise-checklist-header');\n    if (el) {\n      // Setting height from top to checklist\n      if (el.getBoundingClientRect().top === 0 && !this.headerHeightFromTop) {\n        this.headerHeightFromTop = window.scrollY\n      }\n      // Setting position of checklist to fixed\n      if (el.getBoundingClientRect().top <= 0) {\n        el.style.position = 'fixed';\n        el.style.top = 0;\n        el.style.width = '100%';\n      }\n      // Setting position of checklist to static\n      if (this.headerHeightFromTop >= window.scrollY) {\n        el.style.position = 'static';\n        el.style.top = 'auto';\n      }\n    }\n  }\n\n  render() {\n    return (\n      // TODO: API call\n      <>\n        <div className=\"personalise-checklist\">\n          {/* Header */}\n          <div className=\"py-2 personalise-checklist-header font-body font-medium\" id=\"personalise-checklist-header\">\n            <div className=\"container\">\n              <div className=\"row align-items-center\">\n                <div className=\"col-12 col-md-6 \">Edit Checklist</div>\n                <div className=\"col-12 col-md-6 d-flex align-items-center justify-content-start justify-content-md-end\">\n                  <a className=\"mr-6 personalise-header-link\" tabindex=\"0\" onClick={() => this.setState({ showAlertQuestion: true })}>Take our quiz</a>\n                  <div>\n                    <Button\n                      variant=\"primary\"\n                      className=\"px-3 py-1  font-medium done-btn\"\n                      onClick={() => this.setState({ showOverrideModal: true })}\n                    >Save & Close</Button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* All categries selection body */}\n          {this.props.stateCheckList.map((parentCategories, i) => (\n            <div className=\"mt-17 mt-md-6 container\" key={parentCategories.categoryName + \"-\" + i}>\n              <div className=\"checklist-title pb-4 body-text\">\n                {parentCategories.categoryName}\n              </div>\n              <div className=\"row mt-4\">\n                {parentCategories.subCategories.map((subCategories, i) => (\n                  <div className=\"col-12 col-md-6 col-lg-3 mb-5\" key={subCategories.id}>\n                    <div className={[\"checklist-card pl-2 pr-3 py-3\",\n                      !subCategories.isAdded ? \"add-checklist-bg\" : \"\"].join(' ')\n                    }>\n                      <div className=\"d-flex mb-4 checklist-action-btn\">\n                        <div className=\"text-body font-medium align-self-center\">{subCategories.categoryName}</div>\n                        {subCategories.addedItemsCount <= 0 ?\n                          <div className=\"ml-auto\">\n                            <button className={[\"checklist-add-btn\",\n                              !subCategories.isAdded ? \"checklist-icon-plus\" : \"icon-close\"].join(' ')}\n                              onClick={() => this.props.dispatch(setIsActiveCheckList(subCategories.id, !subCategories.isAdded))} />\n                          </div>\n                          : null\n                        }\n                      </div>\n                      {Number(subCategories.categoryType.id) !== 2 ?\n                        <div className=\"d-flex align-items-center\">\n                          <Counter\n                            counter={subCategories.totalItemsCount}\n                            incrementHandler={() => this.props.dispatch(incrementCheckListQuantity(subCategories.id, 1))}\n                            decrementHandler={() => this.props.dispatch(decrementCheckListQuantity(subCategories.id, 1))}\n                          />\n                          {subCategories.addedItemsCount > 0 ?\n                            <span className=\"ml-auto text-sm item-count-label\">{subCategories.addedItemsCount} added</span>\n                            : null\n                          }\n                        </div>\n                        :\n                        subCategories.addedItemsCount > 0 ?\n                          <div className=\"d-flex align-items-center\"><span className=\"ml-auto text-sm item-count-label\">{subCategories.addedItemsCount} added</span></div>\n                          : null\n                      }\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          ))}\n          <Toast />\n        </div>\n        {this.state.showOverrideModal ?\n          <Modal\n            show={this.state.showOverrideModal}\n            size=\"lg\"\n            footer={this.removeConfirmFooter}\n          >\n            <h2 className=\"mb-1\">Editing your checklist will override the quiz answers.</h2>\n            <label className=\"text-sm\">If you do not want to change, click on Do not override, which will take you back to your registry and the changes you made to the checklist will be discarded.</label>\n          </Modal> : null\n        }\n        {this.state.showAlertQuestion ?\n          <Modal\n            show={this.state.showAlertQuestion}\n            size=\"lg\"\n            footer={this.quizModalFooter}\n          >\n            <h2 className=\"mb-1\">Changing your quiz answers will override the previous edits to your checklist.</h2>\n            {/* <label className=\"text-sm\">If you do not want to change, click on Do not override, which will take you back to your registry and the changes you made to the quiz will be discarded.</label> */}\n          </Modal> : null\n        }\n      </>\n    );\n  }\n\n};\n\nconst mapStateToProps = state => {\n  return {\n    stateCheckList: state.personaliseCheckList.editedPersonaliseCheckList,\n    stateRegistryInfo: state.registry.info,\n    stateLoader: state.registry.loader,\n  }\n}\n\n\nexport default connect(\n  mapStateToProps\n)(PersonaliseChecklist);","import React, { useState } from \"react\";\nimport \"./FindRegistry.scss\";\nimport { FIND_REGISTRY } from \"api/queries\";\nimport { graphQL } from 'api/axios';\nimport moment from 'moment';\nimport { IMPORT_REGISTRY_EMAIL } from \"utils/constants\";\n\nconst FindRegistry = () => {\n  const [searchName, setSearchName] = useState('')\n  const [allRegistry, setAllRegistry] = useState([])\n  const [hasRegistry, setHasRegistry] = useState(true)\n  const [searchRegistry, setSearchRegistry] = useState(false)\n\n  const findRegistry = (registryName) => {\n    let reqData = {\n      query: FIND_REGISTRY,\n      variables: {\n        registryName: registryName\n      }\n    }\n    graphQL(reqData).then(res => {\n      if (res.data.data.findRegistry) {\n        let registries = [...res.data.data.findRegistry.edges]\n        setAllRegistry(registries)\n        if (registries.length > 0) {\n          setHasRegistry(true)\n        } else {\n          setHasRegistry(false)\n        }\n      }\n    }).catch(err => {\n      setHasRegistry(false)\n    })\n  }\n\n  const handleClearSearch = () => {\n    setSearchName('')\n    setAllRegistry([])\n  }\n\n  const textChangeHandler = async (ev) => {\n    await setSearchName(ev.target.value)\n    setSearchRegistry(true)\n  }\n\n  const findRegistryHandler = async () => {\n    await findRegistry(searchName)\n    setSearchRegistry(false)\n  }\n\n  const searchOnEnter = (ev) => {\n    ev.persist();\n    ev.preventDefault();\n    if (ev.keyCode === 13) { //Enter keycode is 13\n      findRegistryHandler()\n    }\n  }\n\n  const handleRegistryUrlSlug = (urlSlug) => {\n    window.open(urlSlug)\n  }\n\n  return (\n    <div className=\"mt-10 find-registry\">\n      <div className=\"row\">\n        <div className=\"col-4 offset-4\">\n          <div className=\"find-registry-header text-center\">Find a Baby Registry</div>\n          <div className=\"mt-6 find-registry-search-container mx-auto\">\n            <input\n              type=\"text\"\n              placeholder=\"Search registry...\"\n              value={searchName}\n              onKeyUp={(ev) => searchOnEnter(ev)}\n              onChange={(ev) => textChangeHandler(ev)}\n              className=\"find-registry-search-input pl-6 text-body py-1 w-100 mw-100 pr-11 m-a-unset-line-height\"\n            />\n            <i className=\"icon-search find-registry-search-icon\" />\n            {searchName.length > 0 ?\n              searchRegistry ?\n                <a className=\"find-registry-search-input-link text-body\" href=\"#\"\n                  onClick={() => {\n                    findRegistryHandler()\n                  }}>Search</a>\n                :\n                <a className=\"find-registry-search-input-link text-body\" href=\"#\"\n                  onClick={() => {\n                    handleClearSearch()\n                  }}>Clear</a>\n              : null}\n          </div>\n\n\n        </div>\n      </div>\n      <div className={[\"row\", allRegistry.length ? \"mb-4 mt-10\" : \"\"].join(\" \")}>\n        <div className=\"col-10 offset-1\">\n          {[...allRegistry].map(data => (\n            <div className=\"p-4 find-registry-card mx-5\" key={data.node.urlSlug}>\n              <div className=\"d-flex align-items-center\">\n                <div className=\"d-flex align-items-baseline\">\n                  <h3 className=\"find-registry-displayName\">{data.node.displayName}</h3>\n                  <p className=\"ml-2 find-registry-content\">{data.node.dueDate !== null ? moment(data.node.dueDate).format('MMM DD, YYYY') : \"\"}</p>\n                </div>\n                <div className=\"ml-auto\">\n                  <button className=\"find-registry-action-btn p-2\"\n                    onClick={() => handleRegistryUrlSlug(data.node.urlSlug)} />\n                </div>\n              </div>\n              {data.node.user.defaultAddress ?\n                <p\n                  className=\"mt-1 find-registry-content\">{data.node.user.defaultAddress?.city}, {data.node.user.defaultAddress?.province}</p>\n                : null}\n            </div>\n          ))}\n\n        </div>\n      </div>\n      <div className=\"row\">\n        <div className=\"col\">\n          <div className=\"mt-6 text-center\">\n            {searchName.length > 0 ?\n              hasRegistry ?\n                // If has registries in list\n                <div className=\"find-registry-content\">\n                  <h4>Didnt find the registry that you are looking for?</h4>\n                  <h4 className=\"mb-2\">Check with the family or shower host for <a\n                    href={\"mailto:\" + IMPORT_REGISTRY_EMAIL} className=\"find-registry-email-link\" tabIndex\n                    target='_blank'>direct link</a> or</h4>\n                  <a\n                    className=\"px-3 py-1 find-registry-help-disable-btn text-body font-medium d-inline-block\"\n                    href={\"mailto:\" + IMPORT_REGISTRY_EMAIL}\n                    target='_blank'\n                    tabindex=\"0\"\n                  >Email Us For Help</a>\n                </div>\n                :\n                // If has no registries in list\n                <div className=\"find-registry-content\">\n                  <h4>We couldnt find any registries that match your search...</h4>\n                  <h4 className=\"mb-2\">Check with the family or shower host for <a\n                    href={\"mailto:\" + IMPORT_REGISTRY_EMAIL} className=\"find-registry-email-link\" tabIndex\n                    target='_blank'>direct link</a> or</h4>\n                  <a\n                    className=\"px-3 py-1 find-registry-help-primary-btn text-body font-medium d-inline-block\"\n                    href={\"mailto:\" + IMPORT_REGISTRY_EMAIL}\n                    target='_blank'\n                    tabindex=\"0\"\n                  >Email Us For Help</a>\n                </div>\n              :\n              // Search is not been started yet\n              <div className=\"font-medium find-registry-content\">\n                <p>Looking for Monica+Andy baby registry?</p>\n                <p>Begin typing to search</p>\n              </div>\n            }\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default FindRegistry;","import React from \"react\";\nimport \"./Loader.scss\";\n\nconst Loader = () => {\n  return (\n    <div className=\"MA-loader\">\n      <div className=\"MA-spinner spinner-border\" role=\"status\">\n        <span className=\"sr-only\">Loading...</span>\n      </div>\n    </div>\n  )\n}\n\nexport default Loader;","import React from \"react\";\nimport {Redirect, Route, Switch} from \"react-router-dom\";\nimport route from \"utils/routes\";\nimport {connect} from \"react-redux\";\nimport RegistryHero from '../registry-hero/RegistryHero';\nimport Onboarding from \"../onboarding/Onboarding\";\nimport VerifyToken from '../Login/VerifyToken/VerifyToken'\nimport {\n  updateRegistryDetail,\n  getOnboardingQuestions,\n  createRegistry,\n  getPersonalizeQuestions,\n  getCategories,\n  getProducts\n} from \"utils/commonFunction\";\nimport {Cookies} from \"react-cookie\";\nimport {verifyAccessToken} from \"../../api/axios\";\nimport {setLoggingStatus, updateRegistryInfo, setUserInfo} from \"../registry/RegistryActions\";\nimport PersonaliseChecklist from \"../personalise-checklist/PersonaliseChecklist\";\nimport EditChecklist from \"modules/personalise-checklist/components/edit-checklist/EditChecklist\";\nimport GuestView from \"../guest-view/GuestView\";\nimport FindRegistry from \"modules/find-registry/FindRegistry\";\nimport Loader from 'modules/commons/components/loader/Loader';\n\nclass ViewsContainer extends React.Component {\n\n  state = {\n    displayContent: false,\n    foundRegistry: false\n  }\n\n  componentDidMount() {\n    const cookies = new Cookies();\n    const access_token = cookies.get(\"access_token\")\n    if (access_token) {\n      verifyAccessToken(access_token).then(res => {\n        if (res.data.data.customer) {\n          this.props.dispatch(setLoggingStatus(true))\n          this.props.dispatch(setUserInfo(res.data.data.customer))\n          if (res.data.data.registries.length > 0) {\n            this.setState({\n              foundRegistry: true\n            })\n            updateRegistryDetail(this.props.dispatch);\n            // TODO: Get products of active registry\n            getCategories(res.data.data.registries[res.data.data.registries.length - 1].id, this.props.dispatch);\n            // TODO: Get categories of active registry\n            getProducts(res.data.data.registries[res.data.data.registries.length - 1].id, this.props.dispatch);\n            getPersonalizeQuestions(res.data.data.registries[res.data.data.registries.length - 1].id, this.props.dispatch)\n          } else {\n            this.props.dispatch(updateRegistryInfo({notFound: true}))\n            getOnboardingQuestions(this.props.dispatch)\n            //  Creating New Registry\n            createRegistry(this.props.dispatch)\n          }\n        }\n      }).catch(err => {\n        console.error(err)\n        getOnboardingQuestions(this.props.dispatch)\n        this.props.dispatch(setLoggingStatus(false))\n        this.props.dispatch(updateRegistryInfo({notFound: true}))\n      }).finally(() => {\n        this.setState({\n          displayContent: true\n        })\n      })\n    } else {\n      getOnboardingQuestions(this.props.dispatch)\n      this.setState({\n        displayContent: true\n      })\n      this.props.dispatch(updateRegistryInfo({notFound: true}))\n    }\n  }\n\n  render() {\n\n    // if (this.props.stateRouter.location.pathname.search(route.GUEST_VIEW.HOME) !== -1) {\n    //   console.log(route.GUEST_VIEW.HOME+\"/:registryName\")\n    //   return <Redirect to={this.props.stateRouter.location.pathname}/>\n    // }\n\n    // Redirecting user to onboarding is no registry found\n    // if (this.props.stateRouter.location.pathname.search(route.ONBOARDING.HOME) === -1 && !this.props.stateRegistryInfo.id && !this.state.foundRegistry && this.state.displayContent) {\n    //   console.log(this.props.stateRouter.location.pathname)\n    //   return <Redirect to={route.ONBOARDING.HOME}/>\n    // }\n\n\n    return (\n      <>\n        {this.state.displayContent ?\n          <Switch>\n            <Route exact path={route.PERSONALIZE.CHECKLIST} component={EditChecklist}/>\n            <Route exact path={route.PERSONALIZE.HOME} component={PersonaliseChecklist}/>\n            <Route exact path={route.FIND_REGISTRY.HOME} component={FindRegistry}/>\n            <Route exact path={route.ONBOARDING.HOME + \"/:questionId?\"} component={Onboarding}/>\n            <Route exact path={route.MY_REGISTRY.HOME} component={RegistryHero}/>\n            <Route exact path={route.VIEW_REGISTRY.HOME} component={RegistryHero}/>\n            <Route exact path={route.TRACK_GIFTS.HOME} component={RegistryHero}/>\n            <Route exact path={route.GUEST_VIEW.HOME + \"/:registrySlug\"} component={GuestView}/>\n            <Route path={route.REGISTRY.HOME} component={RegistryHero}/>\n            <Route path={route.LOGIN.VERIFY_TOKEN} component={VerifyToken}/>\n            <Route render={() => <div>DEFAULT</div>}/>\n          </Switch>\n          : null}\n        \n        {/* Loader */}\n        {this.props.stateLoader ? <Loader /> : null}\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    stateRegistryInfo: state.registry.info,\n    stateOnboardingQuestions: state.onboarding.questions,\n    stateRouter: state.router,\n    statePersonaliseQuestions: state.personaliseCheckList.questions,\n    stateLoader: state.registry.loader,\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(ViewsContainer);\n","import {ApolloClient, HttpLink, InMemoryCache} from '@apollo/client';\nimport {onError} from '@apollo/client/link/error';\nimport {ApolloLink} from '@apollo/client/link/core/ApolloLink';\n// import {API_URL} from '../utils/constants';\n\nconst cache = new InMemoryCache();\n\n\nconst errorLink = onError(({graphQLErrors, networkError}) => {\n  if (graphQLErrors)\n    graphQLErrors.map(({message, locations, path}) =>\n      console.log(\n        `[GraphQL error]: Message: ${message}, Location: ${locations}, Path: ${path}`,\n        // TODO: Add pop-up alert error message for GraphQL error\n      ),\n    );\n  if (networkError) {\n    console.log(`[Network error]: ${networkError}`);\n    // TODO: Add pop-up alert error message for network error\n  }\n});\n\n\nconst httpLink = new HttpLink({\n//  TODO: Add dynamic api url\n//  uri: API_URL,\n    uri: 'http://127.0.0.1:8000/graphql',\n});\n\nconst link = ApolloLink.from([errorLink, httpLink]);\n\nexport default new ApolloClient({\n  link,\n  cache,  \n  \n// TODO: Add store to header if any\n//   headers: {\n//     authorization: store.getState()?.auth?.token\n//       ? `Bearer ${store.getState()?.auth?.token}`\n//       : null,\n//     language: AppString.getLanguage() ?? 'en',\n//   },\n});","import React from \"react\";\nimport { Provider } from \"react-redux\";\nimport { ConnectedRouter } from \"connected-react-router\";\nimport { store, history } from \"./store/Store\";\nimport { I18nextProvider } from \"react-i18next\";\nimport i18n from \"./utils/i18n\";\nimport ViewsContainer from \"./modules/commons/ViewsContainer\";\nimport client from '../src/api';\n\nimport { ApolloProvider } from '@apollo/client';\n// Bootstrap\nimport \"./assets/scss/main.scss\";\n\n\nconst App = () => (\n  <Provider store={store}>\n    <I18nextProvider i18n={i18n}>\n      <ConnectedRouter history={history}>\n        <ApolloProvider client={client}>\n          <ViewsContainer />\n        </ApolloProvider>\n      </ConnectedRouter>\n    </I18nextProvider>\n  </Provider>\n);\n\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport registerServiceWorker from './registerServiceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\nregisterServiceWorker();\n"],"sourceRoot":""}