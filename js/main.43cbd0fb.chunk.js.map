{"version":3,"sources":["modules/home/HomeActions.js","modules/home/HomeReducer.js","modules/my-registry/MyRegistryActions.js","modules/my-registry/MyRegistryReducer.js","modules/view-registry/ViewRegistryActions.js","modules/view-registry/ViewRegistryReducer.js","modules/registry/RegistryActions.js","modules/registry/RegistryReducer.js","modules/personalise-checklist/PersonaliseCheckListActions.js","modules/personalise-checklist/PersonaliseCheckListReducer.js","modules/onboarding/OnboardingAction.js","modules/onboarding/OnboardingReducer.js","modules/guest-view/GuestViewAction.js","modules/guest-view/GuestViewReducer.js","modules/track-gifts/TrackGiftsAction.jsx","modules/track-gifts/components/view-by/ViewBy.jsx","modules/track-gifts/TrackGiftsReducer.jsx","store/Store.js","utils/i18n.js","locales/index.js","locales/en.js","locales/es.js","utils/routes.js","modules/commons/components/more-option/MoreOption.jsx","modules/commons/components/modal-component/ModalComponent.jsx","modules/commons/components/counter/Counter.jsx","modules/commons/components/card-item/CardItem.jsx","api/queries.js","api/config.js","api/axios.js","utils/constants.js","api/mutations.js","modules/track-gifts/components/gift-card-pill/GiftCardPill.jsx","modules/commons/components/button-component/ButtonComponent.jsx","modules/commons/components/gift-status-pill/GiftStatusPill.jsx","modules/commons/components/product-details-model/ProductDetailsModel.jsx","modules/track-gifts/components/buy-now/BuyNow.jsx","modules/commons/components/mark-as-purchased/MarkAsPurchased.jsx","modules/track-gifts/components/mark-purchased/MarkPurchased.jsx","modules/track-gifts/components/gift-card/GiftCard.jsx","modules/track-gifts/containers/track-gifts-content/TrackGiftsContent.jsx","utils/commonFunction.js","modules/commons/components/check-box/CheckBox.jsx","modules/commons/components/select-category/SelectCategory.jsx","modules/commons/components/edit-gift/category-pill/CategoryPill.jsx","modules/commons/components/add-gift/toggle-pills/TogglePills.jsx","modules/commons/components/radio-button/RadioButton.jsx","modules/commons/components/edit-gift/EditGift.jsx","modules/commons/components/added-card/AddedCard.jsx","modules/my-registry/components/checkList/CheckList.jsx","modules/my-registry/components/checkList/CheckListItems.jsx","modules/commons/components/add-gift/bookmarklet-section/BookmarkletSection.jsx","modules/commons/components/add-gift/import-registry/category-pill/CategoryPill.jsx","modules/commons/components/add-gift/add-gift-another-store/AddGiftAnotherStore.jsx","modules/commons/components/view-recommend/ViewRecommend.jsx","modules/my-registry/components/filter/Filter.jsx","modules/my-registry/components/filter/filter-item-chip/FilterItemChip.jsx","modules/commons/components/add-gift/import-gift-card/ImportGiftCard.jsx","modules/commons/components/add-gift/import-registry/ImportRegistry.jsx","modules/commons/components/cash-fund-card/add-cash-fund-modal/toggle-pills/TogglePills.jsx","modules/commons/components/cash-fund-card/add-cash-fund-modal/AddCashFundModal.jsx","modules/commons/components/add-gift/AddGift.jsx","modules/my-registry/components/filter-section/FilterSection.jsx","modules/commons/components/cash-fund-card/cash-fund-card-not-added/CashFundCardNotAdded.jsx","modules/commons/components/cash-fund-card/CashFundCard.jsx","modules/my-registry/containers/Everything/Everything.jsx","modules/my-registry/containers/MainContent/MainContent.jsx","modules/my-registry/MyRegistry.jsx","modules/view-registry/components/cover-image-picker/crop-image/CropImage.jsx","modules/view-registry/components/cover-image-picker/upload-image-card/UploadImageCard.jsx","modules/view-registry/components/cover-image-picker/default-image/DefaultImage.jsx","modules/view-registry/components/cover-image-picker/CoverImagePicker.jsx","modules/view-registry/components/edit-view-registry-detail/EditViewRegistryDetail.jsx","modules/view-registry/components/share-registry/ShareRegistry.jsx","modules/view-registry/containers/view-registry-header/ViewRegistryHeader.jsx","modules/view-registry/components/sort-filter/SortFilter.jsx","modules/view-registry/components/sort-filter/SortFilterMobile.jsx","modules/view-registry/components/view-filter/ViewFilterMobile.jsx","modules/view-registry/components/sort-filter-section/SortFilterSection.jsx","modules/view-registry/components/view-filter/ViewFilter.jsx","modules/commons/components/already-bought-product/AlreadyBoughtProduct.jsx","modules/commons/components/cash-contributed-already/CashContributedAlready.jsx","modules/commons/components/give-MA-gift-model/GiveMAGiftModel.jsx","modules/commons/components/give-gift-from-another-store/GiveGiftFromAnotherStore.jsx","modules/guest-view/components/GuestViewCard.jsx","modules/view-registry/containers/view-registry-home/ViewRegistryHome.jsx","modules/view-registry/ViewRegistry.jsx","modules/commons/components/toast/Toast.jsx","modules/registry-hero/component/todo-widget/TodoWidget.jsx","modules/track-gifts/components/filters/Filters.jsx","modules/track-gifts/components/thank-you-list/ThankYouList.jsx","modules/track-gifts/containers/track-gifts-sidebar/TrackGiftsSidebar.jsx","modules/track-gifts/components/search/Search.jsx","modules/track-gifts/components/add-gift/AddGift.jsx","modules/track-gifts/TrackGifts.jsx","modules/track-gifts/components/redirection-screen/RedirectionScreen.jsx","modules/registry-hero/RegistryHero.jsx","modules/commons/components/questions/option/Option.jsx","modules/onboarding/Onboarding.jsx","modules/Login/VerifyToken/VerifyTokenActions.js","modules/Login/VerifyToken/VerifyToken.jsx","modules/personalise-checklist/components/personalise-header/PersonaliseHeader.jsx","modules/personalise-checklist/components/personalise-footer/PersonaliseFooter.jsx","modules/personalise-checklist/PersonaliseChecklist.jsx","modules/personalise-checklist/components/edit-checklist/EditChecklist.jsx","modules/guest-view/containers/guest-view-header/GuestViewHeader.jsx","modules/guest-view/containers/guest-sort-filter/GuestSortFilter.jsx","modules/guest-view/containers/guest-sort/GuestSortSection.jsx","modules/guest-view/containers/guest-filter/GuestFilter.jsx","modules/guest-view/GuestView.jsx","modules/find-registry/FindRegistry.jsx","modules/commons/ViewsContainer.jsx","api/index.js","App.jsx","registerServiceWorker.js","index.js"],"names":["HOME_ACTION_TYPES","EXAMPLE_ACTION","combineReducers","values","state","action","type","payload","date","Date","SET_DATE","MY_REGISTRY_ACTION_TYPES","ADD_RECOMMENDED_PRODUCT","INCREMENT_QUANTITY","DECREMENT_QUANTITY","SET_REGISTRY_PRODUCTS","TOGGLE_MUST_HAVE_PRODUCT","ADD_PRODUCT_TO_CART","REMOVE_PRODUCT_FROM_CART","SET_ACTIVE_RECOMMANDATION","SET_ACTIVE_RECOMMANDATION_VARIANT","SET_FILTER_CATEGORY","SET_PARENT_FILTER","SET_CHILD_FILTER","CLEAR_FILTER","SET_FILTERED_PRODUCTS","GET_CHECKLIST_ITEMS","SET_ANOTHER_STORE_PRODUCT_INFO","CLEAR_ANOTHER_STORE_PRODUCT_INFO","SET_ANOTHER_STORE_REGISTRY_ITEMS","SET_CASH_FUND_CATEGORIES","SET_FILTER_PRODUCT_COUNT","addRecommendedProduct","params","setActiveRecommandationVariant","productID","variantID","toggleMustHaveProduct","setFilterCategory","setParentFilter","setChildFilter","clearFilter","setCheckListItems","setAnotherStoreProductInfo","clearAnotherStoreProductInfo","setAnotherStoreRegistryItems","incrementProductQuantity","id","quantity","stateInc","newState","product","push","decrementProductQuantity","stateDec","setActiveRecommandationVariantID","activeVariant","toggleMustHave","item","mostWanted","addProductToCart","length","title","variants","edges","node","price","category","parentFilter","childFilter","recommendedProducts","addedProducts","filter","_","activeRecommandation","filterCategory","filteredProducts","filterApplied","defaultData","myRegistry","defaultFilter","checkList","anotherStoreProduct","defaultAnotherStoreProductInfo","anotherStoreRegistry","cashFundCategories","filterCount","VIEW_REGISTRY_ACTION_TYPES","setViewRegistryProducts","activeSortFilter","setguestViewRegistry","setViewFilterCategory","setChildViewFilter","clearViewFilter","viewRegistryProducts","sortId","sortTitle","guestViewRegistry","viewFilterApplied","REGISTRY_ACTION_TYPES","updateRegistryInfo","setLoggingStatus","setOnboardingRegistry","info","loggedIn","todo","onboardingRegistry","PERSONALISE_CHECKLIST_ACTION_TYPES","setPersonaliseCheckListItems","addPersonalizeQuestion","addPersonalizeQuestionAnswer","updatePersonalizeQuestionAnswer","newSubCategory","subCategories","subCategory","totalItemsCount","setIsAddedCheckList","isAdded","editedPersonaliseCheckList","questions","answers","ONBOARDING_ACTION_TYPES","addOnboardingQuestion","addQuestionAnswer","updateQuestionAnswer","GUEST_VIEW_ACTION_TYPES","updateGuestViewInfo","setGuestViewProducts","setChildGuestViewFilter","clearGuestViewFilter","setGuestViewFilterCategory","setViewGuestPaginationInfo","clearViewGuestPaginationInfo","setAlreadyBoughtProductInfo","setGuestGiftsRedirectionInfo","setCashContributedAlreadyInfo","updated","activeGuestSortFilter","guestViewFilterApplied","guestFilterCategory","paginationInfo","trackGifts","pagination","alreadyBoughtProduct","defaultAlreadyBoughtProductInfo","redirectionInfo","cashContributedAlready","defaultCashContributedAlready","TRACK_GIFTS_ACTION_TYPES","setTrackGiftsProduct","setTrackGiftsPaginationInfo","setTrackGiftsFilters","setTrackGiftsSearch","setTrackGiftsRedirectionInfo","TRACK_GIFTS_VIEWS","ViewBy","activeView","useSelector","dispatch","useDispatch","changeTrackGiftView","view","className","join","onClick","products","filters","search","history","createBrowserHistory","rootReducer","home","registry","registryInfo","MyRegistryReducers","viewRegistry","ViewRegistryReducers","personaliseCheckList","PersonaliseCheckListReducer","onboarding","Onboarding","TrackGiftsReducer","guestView","GuestViewReducer","router","connectRouter","middlewares","routerMiddleware","thunk","composeEnhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","options","interpolation","escapeValue","resources","en","translation","redirect","today","button","getUser","another","personalize","registryHeader","subTitle","visible","link","shower","announcements","more","toDos","es","i18next","use","LanguageDetector","init","APP_HOME_ROUTE","routes","LOGIN","VERIFY_TOKEN","REGISTRY","HOME","MY_REGISTRY","GIFTS_ADDED","GIFT_TO_ADD","GIFT_VIEW","SHOWER","ANNOUNCEMENTS","MORE","TO_DOS","VIEW_REGISTRY","TRACK_GIFTS","ONBOARDING","PERSONALIZE","CHECKLIST","GUEST_VIEW","FIND_REGISTRY","MoreOption","props","iconClass","buttonClass","e","stopPropagation","data","map","option","index","key","name","ModalComponent","Modal","show","size","titleContent","Header","headerContent","closeIconClass","closeModal","Body","noBodyPadding","children","footer","Footer","Counter","decrementHandler","counter","incrementHandler","CardItem","src","imageUrl","alt","href","productLink","tabindex","description","storeUrl","strikedPrice","incrementQuantityHandler","decrementQuantityHandler","addProductHandler","maItemVariantItemRecommendation","variant","variantId","sku","setActiveRecommandationVariantHandler","iconUrl","pattern","gql","GET_CATEGORIES","GET_PRODUCTS","GET_RECOMMENDATIONS","ADD_REGISTRY_ITEM","UPDATE_REGISTRY_ITEM","GET_REGISTRIES","GET_QUESTIONS","GET_PERSONALIZE_QUESTIONS","GET_TRACK_GIFTS","GET_GUEST_REGISTRY_PRODUCT","backendId","cookies","Cookies","apiURL","config","PRODUCTION_API_URL","AuthToken","get","axios","require","axiosInstance","create","baseURL","headers","axiosInstanceNoToken","axiosInstanceNoHeader","graphQLNoToken","post","graphQLNoHeader","graphQL","getAnotherRegistryProducts","axiosInstanceMultipart","graphQLMultipart","downloadThankYouList","registryId","API_END_POINTS","API_URL","BACKEND_URL","MEDIA_URL_PREFIX","FILTERS","BOOKMARKLET_SCRIPT","SETTINGS_LINKS","TOGGLE_MUST_HAVE","UPDATE_REGISTRY","REGISTER_USER","SAVE_QUESTION_RESPONSE","LOGIN_USER","ADD_PARTNER_ACCOUNT","SAVE_UPDATED_CHECKLIST","UPDATE_REGISTRY_ITEMS","SAVE_SINGLE_QUESTION_RESPONSE","CREATE_REGISTRY","TRACK_GIFTS_ADD_GIFT","MARK_AS_PURCHASED_BY_GUEST","GIVE_GROUP_GIFT_GUEST","CASH_FUND_GIFT_GUEST","MARK_AS_PURCHASED","CASH_AND_LEAVE","CASH_FUND_CONTRIBUTION_GUEST","RESERVE_REGISTRY_ITEM_GUEST","REMOVE_RESERVED_ITEM_GUEST","GiftCardPill","text","amount","ButtonComponent","React","forwardRef","ref","btnVariantClass","disabled","GiftStatusPill","pillVariantClass","ProductDetailsModel","storeItemUrl","target","isGroupGift","note","quantityStatus","purchased_quantity","reserved_quantity","still_needed","EMAIL_RE","BuyNow","storeName","orderNumber","guestName","guestEmail","errors","modalCloseHandler","setState","incrementQuantity","prevState","decrementQuantity","storeNameChangeHandler","ev","value","orderNumberChangeHandler","guestNameChangeHandler","errorState","guestEmailChangeHandler","validData","valid","match","saveClickHandler","buyNowClickHandler","createNewRecord","updateProduct","openModal","jsonVisitedItems","JSON","parse","localStorage","getItem","Number","rId","stateRegistryInfo","pId","productData","productTimestamp","timestamp","currentDate","setHours","newVisitedItemsData","foundProduct","newData","setItem","stringify","open","this","onChange","placeholder","Component","connect","MarkAsPurchased","email","contributionAmount","closeModalHandler","nameChangeHandler","emailChangeHandler","noteChangeHandler","contributionAmountChangeHandler","persist","reqData","query","variables","registryItemId","purchasedRegistryItemInput","isPurchased","orderNo","giftMessage","guestUserInput","then","res","markAsPurchased","toast","success","getTrackGiftsProduct","stateTrackGiftsFilters","stateTrackGiftsProducts","stateTrackGiftsPagination","stateTrackGiftsView","stateTrackGiftsSearch","getCategories","getProducts","catch","err","error","console","response","rows","MarkPurchased","openPurchasedModal","preventDefault","GiftCard","friendsDetailRef","createRef","toggleGiftModalHandler","toggleFriendsDetialsModalHandler","toggleFriendsDetail","current","classList","toggle","giftModalCloseHandler","giftModalOpenHandler","friendsDetailsOpenModalHandler","friendsDetailsCloseModalHandler","purchasedRegistryItem","guestUser","firstName","lastName","isCashFund","groupGift","amountReceived","style","width","isReserved","isCashAcceptedOnly","isAmountReceived","createdTs","moment","format","otherUsers","user","LOCAL_2_API_FILTERS_MAPPING","4","1","3","2","5","NoRecordFound","TrackGiftsContent","currentView","checkProductAvailability","getProductsBasedOnView","stateProducts","availableProducts","guestUsersEmails","refinedProducts","skipCashFund","userProducts","currentProduct","newUsers","groupUser","log","indexOf","groupProduct","hasNextPage","overflow","next","hasMore","loader","dataLength","groupedProduct","parseInt","categoryData","registryItems","registryItemsAnalysisCount","finalData","newItemObj","registryitemImage","image","registryCategories","setRegistryProducts","removeProductFromCartHandler","card","message","getRefinedCategory","parentCategory","categoryName","categoryType","isDesired","isExcluded","addedItemsCount","isParent","getAllCategories","getAll","newParentCategory","registrySubCategories","newSubCategories","cat","refinedSubCate","subProductTypes","registrySubProductTypes","subProduct","operationName","finalCategories","allCategories","updateRegistryDetail","registries","registryData","currentRegistryInfo","notFound","updateRegistryDetailState","addProductToRegistry","updateProductToRegistry","stateAddedProducts","isMaItem","existingProduct","parseFloat","shopifyVariantId","tags","shopifyItemVariantId","getOnboardingQuestions","a","token","isPersonalize","question","followUpQuestions","followUpQuestion","isAnswered","updateGuestViewRegistry","urlSlug","registryAsGuest","guestViewInfo","dataURItoBlob","dataURI","fileType","fileName","byteString","atob","split","ab","ArrayBuffer","ia","Uint8Array","i","charCodeAt","blob","Blob","File","getGuestCategories","registryCategoriesAsGuest","getTrackGiftsFilterStatus","filterString","trackGiftsFilter","returnStatus","selected","clearProducts","trackGiftsFilters","trackGiftsProduct","trackGiftsPagination","trackGiftsView","trackGiftsSearch","first","giftGivers","after","endCursor","searchKeyword","searchText","isAvailable","isFundsReceived","isReturned","registryGifts","registryGiftItemsCount","allFilterCounts","newFilters","count","gifts","pageInfo","returnRes","addProductToCartAPI","status","getTodoList","registryTodoSteps","fetchDefaultCashFundImage","categoryId","result","cashFundDefaultImage","getMAVariant","returnValue","maItemVariants","CheckBox","checked","changeHandler","textClass","display","SelectCategory","useState","categories","setCategories","searched","setSearched","searchedCategories","setSearchedCategories","currentCategory","selectedCategory","setSelectedCategory","fetchingAPI","useEffect","resData","finalCheckList","finalSubCategory","tempSubCategory","subProductType","tempCategory","getCategoriesToDisplay","find","allSelectedCategory","handleSelectionCategory","categorySelectBody","modalFooter","changeCurrentCategory","searchInputRef","changeLinkRef","searchMatched","toLowerCase","focus","searchCategoryInputChangeHandler","onFocus","contains","add","searchInputFocusHandler","onBlur","remove","searchInputBlurHandler","changeLinkClickHandler","showModal","CategoryPill","TogglePills","activeClass","RadioButton","centerText","EditGift","M_A_STORE_NAME","MAX_IMAGE_SIZE","ACCEPTED_IMAGE_TYPE","howToGiftOptions","content","learnMoreLinkClickHandler","learnMoreContent","storeItemUrlInputRef","showCategoryModal","storeUrlInputHasFocus","tempStoreItemUrl","giftImage","giftTitle","giftPrice","giftQuantity","giftCategories","giftMustHave","giftGroupGift","giftPurchased","howToGift","giftNote","showLearnMore","learnMoreCashAccept","closeMainModalTemp","giftVariants","currentVariant","imageInputRef","CUSTOM_PIC_OPTIONS","click","cashAcceptedLearnMore","closeLearnMoreModalHandler","refinedCategory","stateCategories","catToPush","subCat","newSubCat","unshift","foundCategory","mainCategory","displayName","closeCategoryModal","openSelectCategoryModal","setCategory","selectFileHandler","files","file","includes","reader","FileReader","onload","newProductImage","readAsDataURL","productNameChangeHandler","productNoteChangeHandler","productStoreUrlChangeHandler","productPriceChangeHandler","toggleGroupGift","togglePurchased","changeHowToGift","removeItemClickHandler","openRemoveModal","storeUrlChangeClickHandler","inputRef","storeItemUrlBlurHandler","setTimeout","resetStoreItemUrlClickHandler","blur","confirmStoreItemUrlClickHandler","validateData","URL","saveItemClickHandler","fd","FormData","cashAcceptedOnly","itemData","append","images","Object","keys","changeCurrentVariantClickHandler","activeOptionClass","accept","backgroundImage","AddedCard","stateGuestViewRegistry","stateRecommendedProducts","stateFilterApplied","setRecommendedProducts","setShow","modalTitle","showRemoveModel","setShowRemoveModel","showEditModal","setShowEditModal","updateModal","setUpdateModal","showMarkPurchased","setShowMarkPurchased","moreOptionsData","showRemoveModelPopUp","showMarkAsPurchasedModal","categoryRecommended","jsonObject","uniqueSet","Set","Array","from","showRecommendation","removeConfirmFooter","openEditModal","DragHandle","sortableHandle","disabledDrag","multipleCategories","draggable","isViewCard","cardId","newRecommended","CheckList","gotoPersonalize","event","isQuizPending","editablePersonalizeQuestions","t","percentage","withTranslation","withRouter","CheckListItems","getOffset","el","rect","getBoundingClientRect","left","scrollX","top","scrollY","scrollToCategory","categorySection","document","getElementById","offset","scrollTo","getSubList","handleToggleEvent","checkListIconEl","checkListHeader","firstChild","subListItem","Accordion","Card","Toggle","as","eventKey","Collapse","BookmarkletSection","modalBody","modalTitleContent","modalFooterButtons","doneBookmarkletHandler","openAddBookmarkletModal","removeCategory","AddGiftAnotherStore","categoryModalShow","setCategoryModalVisible","hideProductDetails","setHideProductDetails","showLoading","setshowLoading","btnHasFocus","setBtnHasFocus","inputHasFocus","setInputHasFocus","itemUrl","setItemUrl","setCurrentItemLink","productInfo","productImage","productName","mustHave","imageInput","setQuantity","prodInfo","changePrice","changeProductName","changeNote","changeProductImage","fetchProductDetail","url","productUrl","changeProductUrl","item_url","ctgry","getScrapedProduct","img","newPrice","char","isInteger","getRefinedPrice","onKeyUp","keyCode","submitStoreUrl","changeItemUrl","class","role","priceChangeHandler","addMyOwn","openCategorySelect","finalcategory","removeSelectedCategory","ViewRecommend","viewDetailsBtn","cardRef","clearModalData","alert","getCategoryId","currentRecommendation","stateActiveRecommandation","stateChecklist","childCategory","checkDataValidity","storeProduct","addItemToRegistry","stateAnotherStoreProduct","hostname","formData","ADD_REGISTRY_ITEM_MUTATION","input","items","commonGetProducts","commonGetCategories","anotherStoreItemViewDetail","addOnMyOwnClickHandler","newCategory","isSubProduct","settings","dots","infinite","speed","slidesToShow","slidesToScroll","prevArrow","nextArrow","responsive","breakpoint","arrows","height","offsetHeight","Filter","filterData","tempParentFilterId","tempChildFilterIds","showFilterModal","setShowFilterModal","filterContentRef","toggleFilterContent","filterContent","parent","child","childId","parentId","childIndex","newChildArray","splice","childChangeHandler","footerButton","FilterItemChip","deleteHandler","ImportGiftCard","ImportRegistry","registryUrl","errorMessage","loading","activeCategoryProductIndex","currentRegistryLink","changeLoadingState","registryUrlChangeHandler","checkUrlAndGetRegistryItems","getAnotherRegistryProductsInfo","registryUrlKeyUpHandler","store_name","store_url","newProducts","finally","productIndex","stateAnotherStoreRegistry","setProductCategories","newProductState","changeRegistryUrl","bind","selectedClass","AddCashFundModal","PRICE_REGEX","PRICE_REGEX_WHILE_ENTERING","API_CALLED","cashFundImage","cashFundName","cashFundAmount","hideTotal","cashFundType","cashFundNote","markCompleted","imageRef","validateCashFundData","addCashFundClickHandler","selectedCat","markAsCompleted","addRegistryItems","presentCategories","catId","fetchDefaultImage","resetThenSet","newErrorState","cashFund","modalFooterButton","cashFundNameChangeHandler","cashFundAmountChangeHandler","cashFundHideTotalChangeHandler","cashFundTypeChangeHandler","stateCashFundCategories","changedCategory","cashFundNoteChangeHandler","mustHaveClickHandler","markCompletedClickHandler","allCashFundCategories","cashFundCategory","list","AddGift","showCashFundModal","cashFundProduct","currentContent","addAnotherGiftApiCalled","addImportRegistryApiCalled","categoryList","openCashFundModal","closeCashFundModal","openAddGiftModal","importGiftAnotherStoreHandler","importRegistry","validImportRegistryData","getCleanedRegistryItems","cleanedRegistryItems","itemStore","stores","newStore","importRegistryClickHandler","jsonGraphQL","FilterSection","deleteChipHandler","element","clearFilterHandler","filterChips","allChild","stateFilterCategory","productCount","stateFilteredProducts","CashFundCardNotAdded","addButtonClickHandler","CashFundCard","Everything","checkListRef","setCashFundCategoryAndOpenModal","updateFilterList","newFilterList","productId","mustHaveValue","setAllRecommendation","recommendedCategory","parentCat","recommendedCat","rData","itemRecommendations","getSortedProducts","productsToAppend","allProducts","productIds","added","total","isSubProductTypes","superParentCat","recommendations","childFilterArray","categoryFound","addedRecommendations","undefined","groupedProducts","recommendationCount","totalProducts","totalRecommendations","getChecklistPercentage","checklistItems","totalItems","addedItems","stateCheckList","hasCashFund","MainContent","exact","path","route","component","MyRegistry","CropImage","ASPECT_RATIO","imgRef","useRef","aspect","crop","setCrop","completedCrop","setCompletedCrop","onLoad","useCallback","canvas","createElement","scaleX","naturalWidth","scaleY","naturalHeight","getContext","drawImage","x","y","Promise","resolve","reject","toBlob","getCroppedImg","setCroppedImage","crossorigin","onImageLoaded","newCrop","onComplete","c","UploadImageCard","DefaultImage","data-selected","CoverImagePicker","fileRef","croppedImage","uploadImage","setUploadImage","defaultImage","setDefaultImage","customImage","setCustomImage","getDefaultCoverImages","registryImages","defaultImages","closeCoverImagePicker","fileChangeHandler","imageId","updateRegistry","registryImage","EditViewRegistryDetail","registryName","changeRegistryName","greeting","changeGreeting","maxLength","greetingChangeHandler","closeEditRegistryDetail","dueDate","ShareRegistry","siteHostName","location","host","registryInfoUrl","setRegistryInfoUrl","isPublic","registryVisibility","setRegistryVisibility","setRegistryUrl","registryError","setRegistryError","inputContainerRef","changeRegistryVisibility","newRegistry","readOnly","checkUpdateRegistryUrlSlug","body","appendChild","select","execCommand","removeChild","closeShareRegistry","ViewRegistryHeader","showCoverImagePicker","showEditRegistryDetail","showShareRegistry","changeRegistryDetail","handleGuestView","handleDisableViewGuest","COVER_PIC_OPTIONS","queryParams","URLSearchParams","has","delete","replace","toString","guestViewRegistryState","SortFilter","activeSortFilterState","sortItem","handleSortSelection","SortFilterMobile","currentSort","setCurrentSort","filterContentMobileRef","ViewFilterMobile","stateCategoriesInfo","stateFilterCategories","filterCountState","filterCategoryLimit","setFilterCategoryLimit","getLimitOfFliter","limit","under50","between50100","moreThan100","maStoreItems","otherStoreItems","giftStatus","totalAvailable","totalReserved","totalPurchased","accordionRef","handleMobileToggleEvent","parentFilterID","limitLength","isFound","newFilterCateoryLimit","categorylimit","changeParentLimitHandler","SortFilterSection","doneViewFilterModal","clearViewFilterModal","closeViewFilterModal","handleIsGotIt","isFeaturedNoticeRead","getFilterChips","filterCat","childCat","setFilterhandler","viewFilterStateHandler","stateActiveSortFilter","stateViewRegistryProducts","ViewFilter","clearClickHandler","AlreadyBoughtProduct","setInfo","partnerUser","fieldErrors","onFocusHandler","giftMessageChangeHandler","CashContributedAlready","hasDecimal","amountChangeHandler","GiveMAGiftModel","isBoughtThisAlready","isContributedAlready","componentDidMount","setModalData","iBoughtThisAlready","onFocusCashFundHandler","validBoughtThisAlreadyData","productBoughtAlreadyInfo","onFocusBoughtThisAlreadyHandler","fieldName","validCashContributedAlreadyData","cashContributedAlreadyInfo","onFocusCashContributedAlreadyHandler","validCashFundData","close","addProductToCartHandler","submitDataHandler","registryUrlSlug","purchasedQuantity","updateGuestViewProduct","registrySlug","giveGroupGift","cashInLieu","cashFundGift","contributeRestHandler","contributeAmount","Math","round","GiveGiftFromAnotherStore","registeredEmail","validEmail","removeProductFromList","updatedProducts","removeReservedAndAddProducts","copyAddress","defaultAddress","address1","address2","city","province","country","zip","modalLeftView","modalSecondaryBtn","modalPrimaryBtn","GuestViewCard","showMAGiftmodel","setMAGiftModel","showAnotherStoreGiftmodel","setAnotherStoreGiftmodel","setIsGroupGift","setIsCashAcceptedOnly","modelTitle","setModelTitle","openModelHandler","tabIndex","ViewRegistryHome","localAddedProductState","handleFilterProductChange","allChildFilterCat","finalFilterApplied","ele","getFiltersApplied","sortBy","lessThanEqual","greaterThanEqual","hasPriceFilter","price_Lte","price_Gte","toggleMustHaveProductAction","SortableItem","sortableElement","SortableContainer","sortableContainer","getSortedProductsByFilters","finalFilterProduct","filtersApplied","getSortedFilteredProducts","sortedProducts","sortedData","newSortedProducts","isFeatured","sortByMustHave","sortByLowToHigh","sortByHighToLow","viewRegistryProductsId","addProduct","productList","sort","b","onSortEnd","oldIndex","newIndex","itemsOldPosition","arrayMove","position","oldPosition","updateViewRegistryPosition","helperClass","axis","lockAxis","useDragHandle","ViewRegistry","Toast","toastClassName","autoClose","hideProgressBar","newestOnTop","closeOnClick","closeButton","parentElement","dismiss","TodoWidget","performTodoAction","redirectUrl","stateTodo","label","Filters","filterChangeHandler","filterId","allUnselected","stateFilters","newFilter","ThankYouList","saveData","createObjectURL","download","revokeObjectURL","downloadClickHandler","TrackGiftsSidebar","Search","inputContainer","applySearch","searchState","componentRef","searchInputChangeHandler","searchInput","searchClickHandler","searchOnEnter","giftName","userName","userEmail","addGiftClickHandler","addGift","giftNameChangeHandler","userNameChangeHandler","userEmailChangeHandler","TrackGifts","showTrackFilterModal","showSearchPopUp","searchRef","closeTrackFilterModal","toggleSearchBar","trackFilterModalFooterButtons","RedirectionScreen","RegistryHero","stateTrackGiftsRedirectionInfo","useTranslation","to","Option","MAIL_FORMAT","LOGIN_TITLE","SIGNUP_TITLE","PARTNER_TITLE","RADIO","PARTNER","LITTLE_ONCE_ID","questionId","optionId","BOTH_OPTION_ID","SKIP_BOTH_OPTION","login","toastMessage","signUpErrors","signInErrors","submitAnswer","bulkSaved","clearErrorState","createRegistry","submitAllAnswers","checkValidEmail","optionalRegistryId","submitBulk","stateOnboardingAnswers","stateOnboardingRegistry","returnToURL","answer","questionOptionInput","optionText","addRegistryMultipleQuestionOption","origin","registryQuestionOptionInput","updateOrCreateRegistrySingleQuestionOption","redirectionUrl","clearToastMessage","setToastMessage","gotoNextQuestion","nextQuestionId","returnNext","nextFullQuestion","idToMatch","stateOnboardingQuestions","ques","stateLoggedIn","setQuestionBasedOnId","finalQuestion","foundQuestion","parentQuestion","addAnswerToState","answerRadioQuestion","watchNextBtn","nextBtnState","answerDataQuestion","dateCheck","now","day","getDate","slice","month","getMonth","getFullYear","textInputTypeChangeHandler","inputRefs","enableBtn","changeLoginState","refs","setErrorBasedOnResponse","parentErrors","subErrors","signInClickHandler","emailRef","passwordRef","password","loginUser","set","registryRes","activeRegistry","getSignInContent","signUpClickHandler","firstNameRef","lastNameRef","registerUser","getSignUpContent","savePartnerDetail","nameRef","partnerDetail","addPartnerAccount","getPartnerContent","onpopstate","pathname","stateRouter","answerInputType","staticQuestionTitle","helpText","min","max","VERIFY_TOKEN_ACTION_TYPES","verifyTokenRequest","customer","redirectVerifyToken","VerifyToken","verifyToken","PersonaliseFooter","prevQuestion","nextQuestion","PersonaliseChecklist","prevQuestionId","activeQuestionId","checkBoxSelected","CHECKBOX","calulatePercentage","answerQuestionCount","totalQuestionCount","totalAnwer","statePersonaliseQuestions","ceil","answerCheckBoxQuestion","isActiveIdPresent","gotoPrevQuestion","popPrevQuestionId","pop","statePersonaliseAnswers","finalAnswer","submitQuestionAnswer","op","selectCheckboxAnswer","checkBoxRef","removeIndex","setStateQuestionWithSelectedAnswer","answerOpt","ans","questionOption","opt","selectedColorSchemes","prevQuestionID","currentQuestion","selectedOptionID","selectOptions","selectedOption","defaultChecked","showOverrideModal","closeAndSavePersonaliseCheckList","finalCheckListData","tempStateCheckList","tempData","registryCategoryId","itemsCount","itemCountData","gotoPersonaliseQuestions","parentCategories","GuestViewHeader","GuestSortFilter","GuestSortSection","GuestFilter","categoryFilterLimit","GuestView","isFirstTime","isSendMessageModalOpen","subject","totalProductCount","BABY_GIFTS_URL","AVAILABLE","RESERVED","PURCHASED","PRICE_1","PRICE_2","PRICE_3","MONICA_AND_ANDY","ELSEWHERE","updateGuestViewRegistryProduct","emptyAllProduct","clearAllProduct","stateGuestViewPagination","responseData","pagenationInfo","filterCategoryLimitHandler","limitData","guestProducts","getdataForFirstTime","validSendMessageData","subjectChangeHandler","messageChangeHandler","sendMessageHandler","stateGuestGiftsRedirectionInfo","registryUsers","filteredSortProducts","isAllGiftsPurchased","FindRegistry","searchName","setSearchName","allRegistry","setAllRegistry","hasRegistry","setHasRegistry","findRegistryHandler","findRegistry","ViewsContainer","displayContent","foundRegistry","access_token","EditChecklist","render","cache","InMemoryCache","errorLink","onError","graphQLErrors","networkError","locations","httpLink","HttpLink","uri","ApolloLink","ApolloClient","App","I18nextProvider","i18n","client","isLocalhost","Boolean","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","ReactDOM","process","addEventListener","fetch","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.43cbd0fb.chunk.js","sourcesContent":["import { push } from \"connected-react-router\";\n\nexport const HOME_ACTION_TYPES = {\n  EXAMPLE_ACTION: \"EXAMPLE_ACTION\"\n};\n\nconst exampleActionCreator = param => ({\n  type: HOME_ACTION_TYPES.EXAMPLE_ACTION,\n  payload: param\n});\n\nexport const exampleAction = param => dispatch => {\n  dispatch(exampleActionCreator(param));\n};\n\nexport const redirectExample = () => dispatch => {\n  dispatch(push(\"/another\"));\n};\n","import { combineReducers } from \"redux\";\nimport { HOME_ACTION_TYPES } from \"./HomeActions\";\n\nconst values = (state = [], action) => {\n  switch (action.type) {\n    case HOME_ACTION_TYPES.EXAMPLE_ACTION:\n      return [...state, action.payload];\n    default:\n      return state;\n  }\n};\n\nconst date = (state = new Date(), action) => {\n  //initialize state with today date\n  switch (action.type) {\n    case HOME_ACTION_TYPES.SET_DATE:\n      return action.payload;\n    default:\n      return state;\n  }\n};\n\nexport default combineReducers({\n  values,\n  date\n});\n","export const MY_REGISTRY_ACTION_TYPES = {\n\t// Recommended Product\n\tADD_RECOMMENDED_PRODUCT: \"ADD_RECOMMENDED_PRODUCT\",\n\tINCREMENT_QUANTITY: \"INCREMENT_QUANTITY\",\n\tDECREMENT_QUANTITY: \"DECREMENT_QUANTITY\",\n\n\t// Registry product\n\tSET_REGISTRY_PRODUCTS: \"SET_REGISTRY_PRODUCTS\",\n\tTOGGLE_MUST_HAVE_PRODUCT: \"TOGGLE_MUST_HAVE_PRODUCT\",\n\tADD_PRODUCT_TO_CART: \"ADD_PRODUCT_TO_CART\",\n\tREMOVE_PRODUCT_FROM_CART: \"REMOVE_PRODUCT_FROM_CART\",\n\n\t// CheckList\n\tSET_ACTIVE_RECOMMANDATION : \"SET_ACTIVE_RECOMMANDATION\",\n\tSET_ACTIVE_RECOMMANDATION_VARIANT : \"SET_ACTIVE_RECOMMANDATION_VARIANT\",\n\n\t// Filter Category\n\tSET_FILTER_CATEGORY: \"SET_FILTER_CATEGORY\",\n\n\t// Filter\n\tSET_PARENT_FILTER: \"SET_PARENT_FILTER\",\n\tSET_CHILD_FILTER: \"SET_CHILD_FILTER\",\n\tCLEAR_FILTER: \"CLEAR_FILTER\",\n\n\t// Filtered Products\n\tSET_FILTERED_PRODUCTS : \"SET_FILTERED_PRODUCTS\",\n\tGET_CHECKLIST_ITEMS: \"GET_CHECKLIST_ITEMS\",\n\n  //ANOTHER STORE PRODUCT\n  SET_ANOTHER_STORE_PRODUCT_INFO : \"SET_ANOTHER_STORE_PRODUCT_INFO\",\n  CLEAR_ANOTHER_STORE_PRODUCT_INFO : \"CLEAR_ANOTHER_STORE_PRODUCT_INFO\",\n\n  // ANOTHER STORE REGISTRY\n  SET_ANOTHER_STORE_REGISTRY_ITEMS: \"SET_ANOTHER_STORE_REGISTRY_ITEMS\",\n\n  // SET CASH FUND CATEGORIES\n\tSET_CASH_FUND_CATEGORIES: \"SET_CASH_FUND_CATEGORIES\",\n\t\n\t// SET FILTER COUNT\n\tSET_FILTER_PRODUCT_COUNT: \"SET_FILTER_PRODUCT_COUNT\",\n}\n\nexport const addRecommendedProduct = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.ADD_RECOMMENDED_PRODUCT,\n\t\tpayload: params\n\t}\n}\n\nexport const incrementQuantity = (id, quantity) => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.INCREMENT_QUANTITY,\n\t\tpayload: { id, quantity }\n\t}\n}\n\nexport const decrementQuantity = (id, quantity) => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.DECREMENT_QUANTITY,\n\t\tpayload: { id, quantity }\n\t}\n}\n\n//Set Active recommandation variant\nexport const setActiveRecommandationVariant = (productID, variantID) => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.SET_ACTIVE_RECOMMANDATION_VARIANT,\n\t\tpayload: { productID, variantID }\n\t}\n}\n\nexport const toggleMustHaveProduct = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.TOGGLE_MUST_HAVE_PRODUCT,\n\t\tpayload: params\n\t}\n}\n\nexport const setRegistryProducts = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.SET_REGISTRY_PRODUCTS,\n\t\tpayload: params\n\t}\n}\n\nexport const addProductToCart = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.ADD_PRODUCT_TO_CART,\n\t\tpayload: params\n\t}\n}\n\nexport const removeProduct = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.REMOVE_PRODUCT,\n\t\tpayload: params\n\t}\n}\n\nexport const removeProductFromCart = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.REMOVE_PRODUCT_FROM_CART,\n\t\tpayload: params\n\t}\n}\n\nexport const setActiveRecommandation = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.SET_ACTIVE_RECOMMANDATION,\n\t\tpayload: params\n\t}\n}\n\n// Filter Category Section\nexport const setFilterCategory = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.SET_FILTER_CATEGORY,\n\t\tpayload: params\n\t}\n}\n\n// Filter Section\n\nexport const setParentFilter = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.SET_PARENT_FILTER,\n\t\tpayload: params\n\t}\n}\n\nexport const setChildFilter = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.SET_CHILD_FILTER,\n\t\tpayload: params\n\t}\n}\n\nexport const clearFilter = () => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.CLEAR_FILTER,\n\t}\n}\n\n// Filtered Products\nexport const setFilteredProduct = (params) => {\n  return {\n    type: MY_REGISTRY_ACTION_TYPES.SET_FILTERED_PRODUCTS,\n    payload: params\n  }\n}\n\nexport const setCheckListItems = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.GET_CHECKLIST_ITEMS,\n\t\tpayload: params\n\t}\n}\n\n// Another store product info\nexport const setAnotherStoreProductInfo = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.SET_ANOTHER_STORE_PRODUCT_INFO,\n\t\tpayload: params\n\t}\n}\n\nexport const clearAnotherStoreProductInfo = () => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.CLEAR_ANOTHER_STORE_PRODUCT_INFO,\n\t}\n}\n\n//Another store Registry Items\nexport const setAnotherStoreRegistryItems = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.SET_ANOTHER_STORE_REGISTRY_ITEMS,\n\t\tpayload: params\n\t}\n}\n\n//Set Cash Fund Categories\nexport const setCashFundCategories = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.SET_CASH_FUND_CATEGORIES,\n\t\tpayload: params\n\t}\n}\n\n//Set filter count\nexport const setFilterProductCount = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.SET_FILTER_PRODUCT_COUNT,\n\t\tpayload: params\n\t}\n}","import {MY_REGISTRY_ACTION_TYPES} from \"./MyRegistryActions\";\nimport {combineReducers} from \"redux\";\nimport defaultData from \"data/ReducerDefaultData.json\";\n\n// Functions\nconst incrementProductQuantity = (state, payload) => {\n  let {\n    id,\n    quantity\n  } = payload;\n\n  let stateInc = [...state];\n  let newState = [];\n  for (let product of stateInc) {\n    if (product.id === id) {\n      product.quantity += quantity;\n    }\n    newState.push(product);\n  }\n  return newState;\n}\n\nconst decrementProductQuantity = (state, payload) => {\n  let {\n    id,\n    quantity\n  } = payload;\n  let stateDec = [...state];\n  let newState = [];\n  for (let product of stateDec) {\n    if (product.id === id && product.quantity - quantity > 0) {\n      product.quantity -= quantity;\n    }\n    newState.push(product);\n  }\n  return newState;\n}\n\nconst setActiveRecommandationVariantID = (state, payload) => {\n  let {\n    productID,\n    variantID\n  } = payload;\n\n  let stateInc = [...state];\n  let newState = [];\n  for (let product of stateInc) {\n    if (product.id === productID) {\n      product.activeVariant = variantID;\n    }\n    newState.push(product);\n  }\n  return newState;\n}\n\nconst toggleMustHave = (state, payload) => {\n  let newState = [];\n  for (let product of state) {\n    if (product.item.id === payload) {\n      product.mostWanted = !product.mostWanted\n    }\n    newState.push(product);\n  }\n  return newState;\n}\n\nconst addProductToCart = (state, payload) => {\n  for (let product of state) {\n    if (product.item.id === payload.id) {\n      return state\n    }\n  }\n\n  let product = {}\n  product['id'] = payload.id;\n  product['isGroupGift'] = false;\n  product['isReserved'] = false;\n  product['quantity'] = payload.quantity;\n  product['mostWanted'] = false;\n  product['orderNo'] = null;\n  product['giftMessage'] = null;\n  product['isAmountReceived'] = false;\n  product['isPurchased'] = false;\n  product['featuredOrder'] = state.length;\n\n  // TODO: Make item_id dynamic after calling POST API for adding it\n  let item = {}\n  item['id'] = payload.id;\n  item['title'] = payload.title;\n  item['shopifyItemId'] = product['id'];\n  item['note'] = null;\n  item['price'] = payload.variants.edges[0].node.price;\n\n  // TODO: Make category dynamic after POST API call\n  let category = {}\n  category['id'] = 2;\n  category['categoryName'] = 'Bassinet';\n  category['isRoot'] = false;\n\n  item['category'] = category;\n  product['item'] = item;\n\n\n  return [...state, product];\n}\n\n\nconst setParentFilter = (state, payload) => {\n  let newState = {...state}\n  newState.parentFilter = payload\n  newState.childFilter = [...state.childFilter]\n\n  return newState\n}\n\n\nconst setChildFilter = (state, payload) => {\n  let newState = {...state}\n  newState.childFilter = [...payload]\n\n  return newState\n}\n\n\n// Reducers\n\n// const products = (state = defaultData.myRegistry.defaultProduct, action) => {\nconst recommendedProducts = (state = [], action) => {\n  switch (action.type) {\n    case MY_REGISTRY_ACTION_TYPES.ADD_RECOMMENDED_PRODUCT:\n      return state.length === 0 ? [...action.payload] : [...state, ...action.payload];\n    case MY_REGISTRY_ACTION_TYPES.INCREMENT_QUANTITY:\n      return incrementProductQuantity(state, action.payload);\n    case MY_REGISTRY_ACTION_TYPES.DECREMENT_QUANTITY:\n      return decrementProductQuantity(state, action.payload);\n    case MY_REGISTRY_ACTION_TYPES.SET_ACTIVE_RECOMMANDATION_VARIANT:\n      return setActiveRecommandationVariantID(state, action.payload);\n    default: \n      return state;\n  }\n}\n\n// const addedProducts = (state = defaultData.myRegistry.defaultAddedProduct, action) => {\nconst addedProducts = (state = [], action) => {\n  switch (action.type) {\n    case MY_REGISTRY_ACTION_TYPES.SET_REGISTRY_PRODUCTS:\n      return action.payload;\n    case MY_REGISTRY_ACTION_TYPES.TOGGLE_MUST_HAVE_PRODUCT:\n      return toggleMustHave([...state], action.payload);\n    case MY_REGISTRY_ACTION_TYPES.ADD_PRODUCT_TO_CART:\n      return addProductToCart([...state], action.payload);\n    case MY_REGISTRY_ACTION_TYPES.REMOVE_PRODUCT_FROM_CART:\n      return state.filter((product, _) => {\n        return product.item.id !== action.payload\n      })\n    default:\n      return state;\n  }\n}\n\nconst activeRecommandation = (state = \"\", action) => {\n  switch (action.type) {\n    case MY_REGISTRY_ACTION_TYPES.SET_ACTIVE_RECOMMANDATION:\n      return action.payload;\n    default:\n      return state;\n  }\n}\n\nconst filteredProducts = (state = [], action) => {\n  switch (action.type) {\n    case MY_REGISTRY_ACTION_TYPES.SET_FILTERED_PRODUCTS:\n      return [...action.payload]\n    default:\n      return state\n  }\n}\n\nconst filterCategory = (state = [], action) => {\n  switch (action.type) {\n    case MY_REGISTRY_ACTION_TYPES.SET_FILTER_CATEGORY:\n      return action.payload\n    default:\n      return state\n  }\n}\n\nconst filterApplied = (state = defaultData.myRegistry.defaultFilter, action) => {\n  switch (action.type) {\n    case MY_REGISTRY_ACTION_TYPES.SET_PARENT_FILTER:\n      return setParentFilter(state, action.payload)\n    case MY_REGISTRY_ACTION_TYPES.SET_CHILD_FILTER:\n      return setChildFilter(state, action.payload)\n    case MY_REGISTRY_ACTION_TYPES.CLEAR_FILTER:\n      return defaultData.myRegistry.defaultFilter\n    default:\n      return state;\n  }\n}\n\nconst checkList = (state = [], action) => {\n  switch (action.type) {\n    case MY_REGISTRY_ACTION_TYPES.GET_CHECKLIST_ITEMS:\n      return action.payload;\n    default:\n      return state;\n  }\n}\n\nconst anotherStoreProduct = (state = defaultData.myRegistry.defaultAnotherStoreProductInfo, action) => {\n  switch (action.type) {\n    case MY_REGISTRY_ACTION_TYPES.SET_ANOTHER_STORE_PRODUCT_INFO:\n      return {...action.payload};\n    case MY_REGISTRY_ACTION_TYPES.CLEAR_ANOTHER_STORE_PRODUCT_INFO:\n      return defaultData.myRegistry.defaultAnotherStoreProductInfo;\n    default:\n      return state;\n  }\n}\n\nconst anotherStoreRegistry = (state = [], action) => {\n  switch (action.type) {\n    case MY_REGISTRY_ACTION_TYPES.SET_ANOTHER_STORE_REGISTRY_ITEMS:\n      return [...action.payload];\n    default:\n      return state;\n  }\n}\n\nconst cashFundCategories = (state = [], action) => {\n  switch (action.type) {\n    case MY_REGISTRY_ACTION_TYPES.SET_CASH_FUND_CATEGORIES:\n      return [...action.payload];\n    default:\n      return state;\n  }\n}\n\nconst filterCount = (state = defaultData.filterCount, action) => {\n  switch (action.type) {\n    case MY_REGISTRY_ACTION_TYPES.SET_FILTER_PRODUCT_COUNT:\n      return action.payload;\n    default:\n      return state;\n  }\n}\n\nexport default combineReducers({\n  recommendedProducts,\n  addedProducts,\n  activeRecommandation,\n  filterCategory,\n  filteredProducts,\n  filterApplied,\n  checkList,\n  anotherStoreProduct,\n  anotherStoreRegistry,\n  cashFundCategories,\n  filterCount,\n})","export const VIEW_REGISTRY_ACTION_TYPES = {\n\t// View Registry product\n  VIEW_REGISTRY_PRODUCTS: \"VIEW_REGISTRY_PRODUCTS\",\n  \n  // Filtered Products\n  SET_SORTED_PRODUCTS: \"SET_SORTED_PRODUCTS\",   \n  ACTIVE_SORT_FILTER: \"ACTIVE_SORT_FILTER\",\n  IS_GUEST_VIEW: \"IS_GUEST_VIEW\",\n  SET_VIEW_FILTER_CATEGORY: \"SET_VIEW_FILTER_CATEGORY\",\n\n  // Filter\n\tSET_VIEW_PARENT_FILTER: \"SET_VIEW_PARENT_FILTER\",\n\tSET_VIEW_CHILD_FILTER: \"SET_VIEW_CHILD_FILTER\",\n\tCLEAR_VIEW_FILTER: \"CLEAR_VIEW_FILTER\",\n}\n\nexport const setViewRegistryProducts = params => {\n\treturn {\n\t\ttype: VIEW_REGISTRY_ACTION_TYPES.VIEW_REGISTRY_PRODUCTS,\n\t\tpayload: params\n    }\n}\n\nexport const setSortedFilteredProduct = (params) => {\n  return {\n    type: VIEW_REGISTRY_ACTION_TYPES.SET_SORTED_PRODUCTS,\n    payload: params\n  }\n}\n\nexport const activeSortFilter = (params) => {\n  return {\n    type: VIEW_REGISTRY_ACTION_TYPES.ACTIVE_SORT_FILTER,\n    payload: params\n  }\n}\n\nexport const setguestViewRegistry = (params) => {\n  return {\n    type: VIEW_REGISTRY_ACTION_TYPES.IS_GUEST_VIEW,\n    payload: params\n  }\n}\n\n// View Filter Category Section\nexport const setViewFilterCategory = params => {\n\treturn {\n\t\ttype: VIEW_REGISTRY_ACTION_TYPES.SET_VIEW_FILTER_CATEGORY,\n\t\tpayload: params\n\t}\n}\n\n\n// Filter Section\n\nexport const setParentViewFilter = params => {\n\treturn {\n\t\ttype: VIEW_REGISTRY_ACTION_TYPES.SET_VIEW_PARENT_FILTER,\n\t\tpayload: params\n\t}\n}\n\nexport const setChildViewFilter = params => {\n\treturn {\n\t\ttype: VIEW_REGISTRY_ACTION_TYPES.SET_VIEW_CHILD_FILTER,\n\t\tpayload: params\n\t}\n}\n\nexport const clearViewFilter = () => {\n\treturn {\n\t\ttype: VIEW_REGISTRY_ACTION_TYPES.CLEAR_VIEW_FILTER,\n\t}\n}","import {VIEW_REGISTRY_ACTION_TYPES} from \"./ViewRegistryActions\";\nimport {combineReducers} from \"redux\";\nimport defaultData from \"data/ReducerDefaultData.json\";\n\nconst setParentFilter = (state, payload) => {\n  let newState = {...state}\n  newState.parentFilter = payload\n  newState.childFilter = [...state.childFilter]\n\n  return newState\n}\n\n\nconst setChildFilter = (state, payload) => {\n  let newState = {...state}\n  newState.childFilter = [...payload]\n\n  return newState\n}\n\nconst viewRegistryProducts = (state = [], action) => {\n    switch (action.type) {\n      case VIEW_REGISTRY_ACTION_TYPES.VIEW_REGISTRY_PRODUCTS:\n          return [...action.payload];\n      default:\n          return state;\n    }\n}\n\nconst activeSortFilter = (state = {sortId: 1, sortTitle: 'Featured'}, action) => {\n    switch (action.type) {\n      case VIEW_REGISTRY_ACTION_TYPES.ACTIVE_SORT_FILTER:\n        return {...action.payload};\n      default:\n        return state;\n    }\n  }\n\nconst guestViewRegistry = (state = false, action) => {\n  switch (action.type) {\n    case VIEW_REGISTRY_ACTION_TYPES.IS_GUEST_VIEW:\n      return action.payload;\n    default:\n      return state;\n  }\n}\n\nconst filterCategory = (state = [], action) => {\n  switch (action.type) {\n    case VIEW_REGISTRY_ACTION_TYPES.SET_VIEW_FILTER_CATEGORY:\n      return [...action.payload]\n    default:\n      return state\n  }\n}\n\nconst viewFilterApplied = (state = defaultData.myRegistry.defaultFilter, action) => {\n  switch (action.type) {\n    case VIEW_REGISTRY_ACTION_TYPES.SET_VIEW_PARENT_FILTER:\n      return setParentFilter(state, action.payload)\n    case VIEW_REGISTRY_ACTION_TYPES.SET_VIEW_CHILD_FILTER:\n      return setChildFilter(state, action.payload)\n    case VIEW_REGISTRY_ACTION_TYPES.CLEAR_VIEW_FILTER:\n      return defaultData.myRegistry.defaultFilter\n    default:\n      return state;\n  }\n}\n\nexport default combineReducers({\n    viewRegistryProducts,\n    activeSortFilter,\n    guestViewRegistry,\n    filterCategory,\n    viewFilterApplied\n})\n","export const REGISTRY_ACTION_TYPES = {\n  UPDATE_REGISTRY_INFO: \"UPDATE_REGISTRY_INFO\",\n  SET_LOGGING_STATUS: \"SET_LOGGING_STATUS\",\n  SET_TODO : \"SET_TODO\",\n  SET_ONBOARDING_REGISTRY: \"SET_ONBOARDING_REGISTRY\"\n}\n\nexport const updateRegistryInfo = (params) => {\n  return {\n    type: REGISTRY_ACTION_TYPES.UPDATE_REGISTRY_INFO,\n    payload: params\n  }\n}\n\nexport const setLoggingStatus = (params) => {\n  return {\n    type: REGISTRY_ACTION_TYPES.SET_LOGGING_STATUS,\n    payload: params\n  }\n}\n\nexport const setTodo = (params) => {\n  return {\n    type: REGISTRY_ACTION_TYPES.SET_TODO,\n    payload: params\n  }\n}\n\nexport const setOnboardingRegistry = (params) => {\n  return {\n    type: REGISTRY_ACTION_TYPES.SET_ONBOARDING_REGISTRY,\n    payload: params\n  }\n}\n","import {REGISTRY_ACTION_TYPES} from \"./RegistryActions\"\nimport {combineReducers} from \"redux\";\nimport defaultData from \"data/ReducerDefaultData.json\";\n\nconst registryInfo = (state = {}, action) => {\n  switch (action.type) {\n    case REGISTRY_ACTION_TYPES.UPDATE_REGISTRY_INFO:\n      return action.payload\n    default:\n      return state\n  }\n}\n\nconst loggedIn = (state = false, action) => {\n  switch (action.type) {\n    case REGISTRY_ACTION_TYPES.SET_LOGGING_STATUS:\n      return action.payload\n    default:\n      return state\n  }\n}\n\nconst todo = (state = [], action) => {\n  switch (action.type) {\n    case REGISTRY_ACTION_TYPES.SET_TODO:\n      return [...action.payload]\n    default:\n      return state\n  }\n}\n\nconst onboardingRegistry = (state = \"\", action) => {\n  switch (action.type) {\n    case REGISTRY_ACTION_TYPES.SET_ONBOARDING_REGISTRY:\n      return action.payload\n    default:\n      return state\n  }\n}\n\nexport default combineReducers({\n  info: registryInfo,\n  loggedIn,\n  todo,\n  onboardingRegistry\n});","export const PERSONALISE_CHECKLIST_ACTION_TYPES = {\n\n\tGET_ALL_CHECKLIST_ITEMS: \"GET_ALL_CHECKLIST_ITEMS\",\n\tINCREMENT_CHECKLIST_QUANTITY: \"INCREMENT_CHECKLIST_QUANTITY\",\n\tDECREMENT_CHECKLIST_QUANTITY: \"DECREMENT_CHECKLIST_QUANTITY\",\n\tCHECKLIST_ADDED: \"CHECKLIST_ADDED\",\n\n\tPERSONALISE_ADD_QUESTION: \"PERSONALISE_ADD_QUESTION\",\n    PERSONALISE_ADD_ANSWER: \"PERSONALISE_ADD_ANSWER\",\n    PERSONALISE_UPDATE_ANSWER: \"PERSONALISE_UPDATE_ANSWER\"\n}\n\nexport const incrementCheckListQuantity = (id, quantity) => {\n\treturn {\n\t\ttype: PERSONALISE_CHECKLIST_ACTION_TYPES.INCREMENT_CHECKLIST_QUANTITY,\n\t\tpayload: { id, quantity }\n\t}\n}\n\nexport const decrementCheckListQuantity = (id, quantity) => {\n\treturn {\n\t\ttype: PERSONALISE_CHECKLIST_ACTION_TYPES.DECREMENT_CHECKLIST_QUANTITY,\n\t\tpayload: { id, quantity }\n\t}\n}\n\n\nexport const setPersonaliseCheckListItems = params => {\n\treturn {\n\t\ttype: PERSONALISE_CHECKLIST_ACTION_TYPES.GET_ALL_CHECKLIST_ITEMS,\n\t\tpayload: params\n\t}\n}\n\nexport const setIsActiveCheckList = (id, isAdded) => {\n\treturn {\n\t\ttype: PERSONALISE_CHECKLIST_ACTION_TYPES.CHECKLIST_ADDED,\n\t\tpayload: { id, isAdded }\n\t}\n}\n\nexport const addPersonalizeQuestion = (params) => {\n\treturn {\n\t  type: PERSONALISE_CHECKLIST_ACTION_TYPES.PERSONALISE_ADD_QUESTION,\n\t  payload: params\n\t}\n  }\n  \n  export const addPersonalizeQuestionAnswer = (params) => {\n\treturn {\n\t  type: PERSONALISE_CHECKLIST_ACTION_TYPES.PERSONALISE_ADD_ANSWER,\n\t  payload: params\n\t}\n  }\n  \n  export const updatePersonalizeQuestionAnswer = (params) => {\n\treturn {\n\t  type: PERSONALISE_CHECKLIST_ACTION_TYPES.PERSONALISE_UPDATE_ANSWER,\n\t  payload: params\n\t}\n  }","import {PERSONALISE_CHECKLIST_ACTION_TYPES} from \"./PersonaliseCheckListActions\";\nimport {combineReducers} from \"redux\";\n\n// Functions\nconst incrementProductQuantity = (state, payload) => {\n  let {\n    id,\n    quantity\n  } = payload;\n\n  let stateInc = [...state];\n  let newState = [];\n  for (let category of stateInc) {\n    let newSubCategory = []\n    for (let subCategory of category.subCategories) {\n      if (subCategory.id === id) {\n        subCategory.totalItemsCount += quantity;\n      }\n      newSubCategory.push(subCategory)\n    }\n    category.subCategories = newSubCategory\n    newState.push(category)\n  }\n  return newState;\n}\n\nconst decrementProductQuantity = (state, payload) => {\n  let {\n    id,\n    quantity\n  } = payload;\n\n  let stateInc = [...state];\n  let newState = [];\n  for (let category of stateInc) {\n    let newSubCategory = []\n    for (let subCategory of category.subCategories) {\n      if (subCategory.id === id && subCategory.totalItemsCount > 1) {\n        subCategory.totalItemsCount -= quantity;\n      }\n      newSubCategory.push(subCategory)\n    }\n    category.subCategories = newSubCategory\n    newState.push(category)\n  }\n  return newState;\n}\n\nconst setIsAddedCheckList = (state, payload) => {\n  let {\n    id,\n    isAdded\n  } = payload;\n\n  let stateInc = [...state];\n  let newState = [];\n  for (let category of stateInc) {\n    let newSubCategory = []\n    for (let subCategory of category.subCategories) {\n      if (subCategory.id === id) {\n        subCategory.isAdded = isAdded;\n      }\n      newSubCategory.push(subCategory)\n    }\n    category.subCategories = newSubCategory\n    newState.push(category)\n  }\n  return newState;\n}\n\n// Reducers\nconst editedPersonaliseCheckList = (state = [], action) => {\n  switch (action.type) {\n    case PERSONALISE_CHECKLIST_ACTION_TYPES.GET_ALL_CHECKLIST_ITEMS:\n      return [...action.payload];\n    case PERSONALISE_CHECKLIST_ACTION_TYPES.INCREMENT_CHECKLIST_QUANTITY:\n      return incrementProductQuantity(state, action.payload);\n    case PERSONALISE_CHECKLIST_ACTION_TYPES.DECREMENT_CHECKLIST_QUANTITY:\n      return decrementProductQuantity(state, action.payload);\n      case PERSONALISE_CHECKLIST_ACTION_TYPES.CHECKLIST_ADDED:\n        return setIsAddedCheckList(state, action.payload);\n    default:\n      return state;\n  }\n}\n\nconst questions = (state = [], action) => {\n  switch (action.type) {\n    case PERSONALISE_CHECKLIST_ACTION_TYPES.PERSONALISE_ADD_QUESTION:\n      return action.payload\n    default:\n      return state\n  }\n}\n\nconst answers = (state = [], action) => {\n  switch (action.type) {\n    case PERSONALISE_CHECKLIST_ACTION_TYPES.PERSONALISE_ADD_ANSWER:\n      return [...state, action.payload]\n    case PERSONALISE_CHECKLIST_ACTION_TYPES.PERSONALISE_UPDATE_ANSWER:\n      return [...action.payload]\n    default:\n      return state\n  }\n}\n\nexport default combineReducers({\n  editedPersonaliseCheckList,\n  questions,\n  answers\n})","export const ONBOARDING_ACTION_TYPES = {\n  ADD_QUESTION: \"ADD_QUESTION\",\n  ADD_ANSWER: \"ADD_ANSWER\",\n  UPDATE_ANSWER: \"UPDATE_ANSWER\"\n}\n\nexport const addOnboardingQuestion = (params) => {\n  return {\n    type: ONBOARDING_ACTION_TYPES.ADD_QUESTION,\n    payload: params\n  }\n}\n\nexport const addQuestionAnswer = (params) => {\n  return {\n    type: ONBOARDING_ACTION_TYPES.ADD_ANSWER,\n    payload: params\n  }\n}\n\nexport const updateQuestionAnswer = (params) => {\n  return {\n    type: ONBOARDING_ACTION_TYPES.UPDATE_ANSWER,\n    payload: params\n  }\n}","import {ONBOARDING_ACTION_TYPES} from \"./OnboardingAction\";\nimport {combineReducers} from \"redux\";\n\n\nconst questions = (state = [], action) => {\n  switch (action.type) {\n    case ONBOARDING_ACTION_TYPES.ADD_QUESTION:\n      return [...action.payload]\n    default:\n      return state\n  }\n}\n\nconst answers = (state = [], action) => {\n  switch (action.type) {\n    case ONBOARDING_ACTION_TYPES.ADD_ANSWER:\n      return [...state, action.payload]\n    case ONBOARDING_ACTION_TYPES.UPDATE_ANSWER:\n      return [...action.payload]\n    default:\n      return state\n  }\n}\n\nexport default combineReducers({\n  questions,\n  answers\n});","export const GUEST_VIEW_ACTION_TYPES = {\n\tUPDATE_GUEST_VIEW_INFO: \"UPDATE_GUEST_VIEW_INFO\",\n\tSET_GUEST_VIEW_PRODUCT: \"SET_GUEST_VIEW_PRODUCT\",\n\tGUEST_ACTIVE_SORT_FILTER: \"GUEST_ACTIVE_SORT_FILTER\",\n\n\t// Filter\n\tSET_GUEST_VIEW_PARENT_FILTER: \"SET_GUEST_VIEW_PARENT_FILTER\",\n\tSET_GUEST_VIEW_CHILD_FILTER: \"SET_GUEST_VIEW_CHILD_FILTER\",\n\tCLEAR_GUEST_VIEW_FILTER: \"CLEAR_GUEST_VIEW_FILTER\",\n\n\tSET_GUEST_VIEW_FILTER_CATEGORY: \"SET_GUEST_VIEW_FILTER_CATEGORY\",\n\tGUEST_VIEW_SET_PAGINATION_INFO: \"GUEST_VIEW_SET_PAGINATION_INFO\",\n\tCLEAR_GUEST_PAGINATION_INFO: \"CLEAR_GUEST_PAGINATION_INFO\",\n\n\tGET_GUEST_CHECKLIST_ITEMS: \"GET_GUEST_CHECKLIST_ITEMS\",\n\n\t//I BOUGHT THIS ALREADY STORE PRODUCT\n  SET_ALREADY_BOUGHT_PRODUCT_INFO : \"SET_ALREADY_BOUGHT_PRODUCT_INFO\",\n\tCLEAR_ALREADY_BOUGHT_PRODUCT_INFO : \"CLEAR_ALREADY_BOUGHT_PRODUCT_INFO\",\n\n\t//CASH CONTRIBUTED ALREADY INFO\n  SET_CASH_CONTRIBUTED_ALREADY_INFO : \"SET_CASH_CONTRIBUTED_ALREADY_INFO\",\n\tCLEAR_CASH_CONTRIBUTED_ALREADY_INFO : \"CLEAR_CASH_CONTRIBUTED_ALREADY_INFO\",\n\t\n\tGUEST_GIFTS_SET_REDIRECTING_INFO: \"GUEST_GIFTS_SET_REDIRECTING_INFO\",\n}\n\nexport const updateGuestViewInfo = (params) => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.UPDATE_GUEST_VIEW_INFO,\n\t\tpayload: params\n\t}\n}\n\nexport const setGuestViewProducts = params => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.SET_GUEST_VIEW_PRODUCT,\n\t\tpayload: params\n\t}\n}\n\nexport const activeGuestSortFilter = (params) => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.GUEST_ACTIVE_SORT_FILTER,\n\t\tpayload: params\n\t}\n}\n\n// Filter Section\nexport const setParentGuestViewFilter = params => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.SET_GUEST_VIEW_PARENT_FILTER,\n\t\tpayload: params\n\t}\n}\n\nexport const setChildGuestViewFilter = params => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.SET_GUEST_VIEW_CHILD_FILTER,\n\t\tpayload: params\n\t}\n}\n\nexport const clearGuestViewFilter = () => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.CLEAR_GUEST_VIEW_FILTER,\n\t}\n}\n\n// View Filter Category Section\nexport const setGuestViewFilterCategory = params => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.SET_GUEST_VIEW_FILTER_CATEGORY,\n\t\tpayload: params\n\t}\n}\n\nexport const setViewGuestPaginationInfo = (params) => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.GUEST_VIEW_SET_PAGINATION_INFO,\n\t\tpayload: params\n\t}\n}\n\nexport const clearViewGuestPaginationInfo = () => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.CLEAR_GUEST_PAGINATION_INFO,\n\t}\n}\n\nexport const setGuestCheckListItems = params => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.GET_GUEST_CHECKLIST_ITEMS,\n\t\tpayload: params\n\t}\n}\n\n// I BOUGHT THIS ALREADY STORE PRODUCT\nexport const setAlreadyBoughtProductInfo = params => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.SET_ALREADY_BOUGHT_PRODUCT_INFO,\n\t\tpayload: params\n\t}\n}\n\nexport const clearAlreadyBoughtProductInfo = () => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.CLEAR_ALREADY_BOUGHT_PRODUCT_INFO,\n\t}\n}\n\n// For 3rd party Product\nexport const setGuestGiftsRedirectionInfo = (params) => {\n  return {\n    type: GUEST_VIEW_ACTION_TYPES.GUEST_GIFTS_SET_REDIRECTING_INFO,\n    payload: params\n  }\n}\n\n// Cash Contributed Already\nexport const setCashContributedAlreadyInfo = params => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.SET_CASH_CONTRIBUTED_ALREADY_INFO,\n\t\tpayload: params\n\t}\n}\n\nexport const clearCashContributedAlreadyInfo = () => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.CLEAR_CASH_CONTRIBUTED_ALREADY_INFO,\n\t}\n}\n","import { GUEST_VIEW_ACTION_TYPES } from \"./GuestViewAction\";\nimport { combineReducers } from \"redux\";\nimport defaultData from \"data/ReducerDefaultData.json\";\n\nconst guestViewRegistry = (state = { updated: false }, action) => {\n  switch (action.type) {\n    case GUEST_VIEW_ACTION_TYPES.UPDATE_GUEST_VIEW_INFO:\n      return { ...action.payload }\n    default:\n      return state\n  }\n}\n\nconst addedGuestProducts = (state = [], action) => {\n  switch (action.type) {\n    case GUEST_VIEW_ACTION_TYPES.SET_GUEST_VIEW_PRODUCT:\n      return  [...action.payload];\n    default:\n      return state;\n  }\n}\n\nconst activeGuestSortFilter = (state = {sortId: 1, sortTitle: 'Featured'}, action) => {\n  switch (action.type) {\n    case GUEST_VIEW_ACTION_TYPES.GUEST_ACTIVE_SORT_FILTER:\n      return {...action.payload};\n    default:\n      return state;\n  }\n}\n\nconst setParentFilter = (state, payload) => {\n  let newState = {...state}\n  newState.parentFilter = payload\n  newState.childFilter = [...state.childFilter]\n\n  return newState\n}\n\nconst setChildFilter = (state, payload) => {\n  let newState = {...state}\n  newState.childFilter = [...payload]\n\n  return newState\n}\n\nconst guestViewFilterApplied = (state = defaultData.myRegistry.defaultFilter, action) => {\n  switch (action.type) {\n    case GUEST_VIEW_ACTION_TYPES.SET_GUEST_VIEW_PARENT_FILTER:\n      return setParentFilter(state, action.payload)\n    case GUEST_VIEW_ACTION_TYPES.SET_GUEST_VIEW_CHILD_FILTER:\n      return setChildFilter(state, action.payload)\n    case GUEST_VIEW_ACTION_TYPES.CLEAR_GUEST_VIEW_FILTER:\n      return defaultData.myRegistry.defaultFilter\n    default:\n      return state;\n  }\n}\n\nconst guestFilterCategory = (state = [], action) => {\n  switch (action.type) {\n    case GUEST_VIEW_ACTION_TYPES.SET_GUEST_VIEW_FILTER_CATEGORY:\n      return [...action.payload]\n    default:\n      return state\n  }\n}\n\nconst paginationInfo = (state = defaultData.trackGifts.pagination, action) => {\n  switch (action.type) {\n    case GUEST_VIEW_ACTION_TYPES.GUEST_VIEW_SET_PAGINATION_INFO:\n      return {...action.payload}\n    case GUEST_VIEW_ACTION_TYPES.CLEAR_GUEST_PAGINATION_INFO:\n      return defaultData.trackGifts.pagination\n    default:\n      return state\n  }\n}\n\nconst checkList = (state = [], action) => {\n  switch (action.type) {\n    case GUEST_VIEW_ACTION_TYPES.GET_GUEST_CHECKLIST_ITEMS:\n      return action.payload;\n    default:\n      return state;\n  }\n}\n\nconst alreadyBoughtProduct = (state = defaultData.defaultAlreadyBoughtProductInfo, action) => {\n  switch (action.type) {\n    case GUEST_VIEW_ACTION_TYPES.SET_ALREADY_BOUGHT_PRODUCT_INFO:\n      return {...action.payload};\n    case GUEST_VIEW_ACTION_TYPES.CLEAR_ALREADY_BOUGHT_PRODUCT_INFO:\n      return defaultData.defaultAlreadyBoughtProductInfo;\n    default:\n      return state;\n  }\n}\n\nconst redirectionInfo = (state = {}, action) => {\n  switch (action.type) {\n    case GUEST_VIEW_ACTION_TYPES.GUEST_GIFTS_SET_REDIRECTING_INFO:\n      return {...action.payload}\n    default:\n      return state\n  }\n}\n\nconst cashContributedAlready = (state = defaultData.defaultCashContributedAlready, action) => {\n  switch (action.type) {\n    case GUEST_VIEW_ACTION_TYPES.SET_CASH_CONTRIBUTED_ALREADY_INFO:\n      return {...action.payload};\n    case GUEST_VIEW_ACTION_TYPES.CLEAR_CASH_CONTRIBUTED_ALREADY_INFO:\n      return defaultData.defaultCashContributedAlready;\n    default:\n      return state;\n  }\n}\n\nexport default combineReducers({\n  info: guestViewRegistry,\n  product: addedGuestProducts,\n  activeGuestSortFilter,\n  guestViewFilterApplied,\n  guestFilterCategory,\n  paginationInfo,\n  checkList,\n  alreadyBoughtProduct,\n  redirectionInfo,\n  cashContributedAlready,\n});","export const TRACK_GIFTS_ACTION_TYPES = {\n  TRACK_GIFTS_ACTIVE_VIEW: \"TRACK_GIFTS_ACTIVE_VIEW\",\n\n  TRACK_GIFTS_SET_PRODUCT: \"TRACK_GIFTS_SET_PRODUCT\",\n\n  TRACK_GIFTS_SET_PAGINATION_INFO: \"TRACK_GIFTS_SET_PAGINATION_INFO\",\n\n  TRACK_GIFTS_SET_FILTERS: \"TRACK_GIFTS_SET_FILTERS\",\n\n  TRACK_GIFTS_SET_SEARCH: \"TRACK_GIFTS_SET_SEARCH\",\n\n  TRACK_GIFTS_SET_REDIRECTING_INFO: \"TRACK_GIFTS_SET_REDIRECTING_INFO\"\n}\n\nexport const setActiveView = (params) => {\n  return {\n    type: TRACK_GIFTS_ACTION_TYPES.TRACK_GIFTS_ACTIVE_VIEW,\n    payload: params\n  }\n}\n\nexport const setTrackGiftsProduct = (params) => {\n  return {\n    type: TRACK_GIFTS_ACTION_TYPES.TRACK_GIFTS_SET_PRODUCT,\n    payload: params\n  }\n}\n\nexport const setTrackGiftsPaginationInfo = (params) => {\n  return {\n    type: TRACK_GIFTS_ACTION_TYPES.TRACK_GIFTS_SET_PAGINATION_INFO,\n    payload: params\n  }\n}\n\nexport const setTrackGiftsFilters = (params) => {\n  return {\n    type: TRACK_GIFTS_ACTION_TYPES.TRACK_GIFTS_SET_FILTERS,\n    payload: params\n  }\n}\n\nexport const setTrackGiftsSearch = (params) => {\n  return {\n    type: TRACK_GIFTS_ACTION_TYPES.TRACK_GIFTS_SET_SEARCH,\n    payload: params\n  }\n}\n\nexport const setTrackGiftsRedirectionInfo = (params) => {\n  return {\n    type: TRACK_GIFTS_ACTION_TYPES.TRACK_GIFTS_SET_REDIRECTING_INFO,\n    payload: params\n  }\n}\n","import React from \"react\";\nimport \"./ViewBy.scss\";\nimport {useSelector, useDispatch} from \"react-redux\";\nimport {setActiveView} from \"../../TrackGiftsAction\";\n\nexport const TRACK_GIFTS_VIEWS = [\n  {\n    \"id\": 1,\n    \"text\": \"Gifts\"\n  },\n  {\n    \"id\": 2,\n    \"text\": \"Gift Givers\"\n  }\n]\n\nconst ViewBy = () => {\n  const activeView = useSelector(state => state.trackGifts.activeView);\n  const dispatch = useDispatch()\n\n  const changeTrackGiftView = view => {\n    dispatch(setActiveView(view))\n  }\n\n  return (\n    <div className=\"track-gift-view-by\">\n      <p className=\"text-sm\">View By</p>\n      <div className=\"view-by-toggle-section mt-1\">\n        <div\n          className={[\"view-by-toggle text-sm p-2\", activeView.id === TRACK_GIFTS_VIEWS[0].id ? \"active-view-toggle\" : \"\"].join(\" \")}\n          onClick={() => changeTrackGiftView(TRACK_GIFTS_VIEWS[0])}\n        >Gifts\n        </div>\n        <div\n          className={[\"view-by-toggle text-sm p-2\", activeView.id === TRACK_GIFTS_VIEWS[1].id ? \"active-view-toggle\" : \"\"].join(\" \")}\n          onClick={() => changeTrackGiftView(TRACK_GIFTS_VIEWS[1])}\n        >Gift\n          Givers\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default ViewBy;","import {TRACK_GIFTS_ACTION_TYPES} from \"./TrackGiftsAction\";\nimport {combineReducers} from \"redux\";\nimport {TRACK_GIFTS_VIEWS} from \"./components/view-by/ViewBy\";\nimport defaultData from \"data/ReducerDefaultData.json\";\n\n// By default \"Gifts\" are selected\nconst activeView = (state = TRACK_GIFTS_VIEWS[0], action) => {\n  switch (action.type) {\n    case TRACK_GIFTS_ACTION_TYPES.TRACK_GIFTS_ACTIVE_VIEW:\n      return {...action.payload}\n    default:\n      return state\n  }\n}\n\nconst products = (state = [], action) => {\n  switch (action.type) {\n    case TRACK_GIFTS_ACTION_TYPES.TRACK_GIFTS_SET_PRODUCT:\n      return [...action.payload]\n    default:\n      return state\n  }\n}\n\nconst paginationInfo = (state = defaultData.trackGifts.pagination, action) => {\n  switch (action.type) {\n    case TRACK_GIFTS_ACTION_TYPES.TRACK_GIFTS_SET_PAGINATION_INFO:\n      return {...action.payload}\n    default:\n      return state\n  }\n}\n\nconst filters = (state = defaultData.trackGifts.filters, action) => {\n  switch (action.type) {\n    case TRACK_GIFTS_ACTION_TYPES.TRACK_GIFTS_SET_FILTERS:\n      return [...action.payload]\n    default:\n      return state\n  }\n}\n\nconst search = (state = defaultData.trackGifts.search, action) => {\n  switch (action.type) {\n    case TRACK_GIFTS_ACTION_TYPES.TRACK_GIFTS_SET_SEARCH:\n      return {...action.payload}\n    default:\n      return state\n  }\n}\n\nconst redirectionInfo = (state = {}, action) => {\n  switch (action.type) {\n    case TRACK_GIFTS_ACTION_TYPES.TRACK_GIFTS_SET_REDIRECTING_INFO:\n      return {...action.payload}\n    default:\n      return state\n  }\n}\n\n\nexport default combineReducers({\n  activeView,\n  products,\n  paginationInfo,\n  filters,\n  search,\n  redirectionInfo\n});","import { createStore, applyMiddleware, combineReducers, compose } from \"redux\";\nimport thunk from \"redux-thunk\";\nimport { routerMiddleware, connectRouter } from 'connected-react-router'\nimport { createBrowserHistory } from \"history\";\nimport home from \"../modules/home/HomeReducer\";\nimport MyRegistryReducers from \"../modules/my-registry/MyRegistryReducer\";\nimport ViewRegistryReducers from \"modules/view-registry/ViewRegistryReducer\";\nimport registryInfo from \"../modules/registry/RegistryReducer\";\nimport PersonaliseCheckListReducer from \"../modules/personalise-checklist/PersonaliseCheckListReducer\";\nimport Onboarding from \"../modules/onboarding/OnboardingReducer\";\nimport GuestViewReducer from \"../modules/guest-view/GuestViewReducer\";\nimport TrackGiftsReducer from \"../modules/track-gifts/TrackGiftsReducer\";\n\nexport const history = createBrowserHistory();\n\nconst rootReducer = combineReducers({\n  home,\n  registry: registryInfo,\n  myRegistry: MyRegistryReducers,\n  viewRegistry: ViewRegistryReducers,\n  personaliseCheckList: PersonaliseCheckListReducer,\n  onboarding: Onboarding,\n  trackGifts: TrackGiftsReducer,\n  guestView: GuestViewReducer,\n  router: connectRouter(history)\n})\n\nconst middlewares = [routerMiddleware(history), thunk];\n\nconst composeEnhancer = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose; // eslint-disable-line\n\nexport const store = createStore(\n  rootReducer,\n  composeEnhancer(applyMiddleware(...middlewares))\n);\n","import LanguageDetector from 'i18next-browser-languagedetector';\nimport i18next from 'i18next';\nimport { en, es } from '../locales';\n\nconst options = {\n  interpolation: {\n    escapeValue: false\n  },\n  resources: { en, es }\n};\n\ni18next.use(LanguageDetector).init(options);\n\nexport default i18next;\n","import enLocale from \"./en\";\nimport esLocale from \"./es\";\n\nexport const en = { translation: enLocale };\nexport const es = { translation: esLocale };\n","export default {\n  home: {\n    title: \"HOME\",\n    redirect: \"Redirect\",\n    today: \"Today is the day\",\n    button: \"Dispatch an example action\",\n    values: \"Values from the store (dispatch an action to load more)\",\n    getUser: \"Get Users by Apollo GraphQL queries:\"\n  },\n  another: {\n    title: \"ANOTHER VIEW\"\n  },\n  checkList: {\n    title: \"Checklist\",\n    personalize: \"Personalize\"\n  },\n  registryHeader: {\n    subTitle: \"Due on \",\n    visible: \"Visible\",\n    link:{\n      myRegistry: \"Build Registry\",\n      viewRegistry: \"View Registry\",\n      trackGifts: \"Track Gifts\",\n      shower: \"Baby Shower\",\n      announcements: \"Announcements\",\n      more: \"More\",\n      toDos: \"Here are your top to-dos\"\n    }\n  }\n};\n","export default {\n  home: {\n    title: \"INICIO\",\n    redirect: \"REDIRIGIR\",\n    today: \"Hoy es el da\",\n    button: \"Disparar accin de ejemplo\",\n    values: \"Resultado del store (disparar una accin para cargar ms)\",\n    getUser: \"Obtener usuarios mediante consultas de Apollo GraphQL:\"\n  },\n  another: {\n    title: \"OTRA VISTA\"\n  },\n  checkList: {\n    title: \"\",\n    personalize: \"\"\n  },\n  registryHeader: {\n    subTitle: \"\",\n    visible: \"\",\n    link:{\n      myRegistry: \"\",\n      guestView: \"\",\n      trackGifts: \"\",\n      shower: \"\",\n      announcements: \"\",\n      more: \"\",\n      toDos: \"\"\n    }\n  }\n};\n","let APP_HOME_ROUTE = \"/pages/registry\";\n\nlet routes = {\n  LOGIN: {\n    VERIFY_TOKEN: APP_HOME_ROUTE + \"/verify-token/:token\"\n  },\n  REGISTRY: {\n    HOME: APP_HOME_ROUTE\n  },\n\n  MY_REGISTRY: {\n    HOME: APP_HOME_ROUTE + \"/home\",\n    GIFTS_ADDED: APP_HOME_ROUTE + \"/~/gifts-added\",\n    GIFT_TO_ADD: APP_HOME_ROUTE + \"/~/gifts-to-add\",\n    GIFT_VIEW: APP_HOME_ROUTE + \"/guest-view\",\n    SHOWER: APP_HOME_ROUTE + \"/~/shower\",\n    ANNOUNCEMENTS: APP_HOME_ROUTE + \"/~/announcements\",\n    MORE: APP_HOME_ROUTE + \"/~/more\",\n    TO_DOS: APP_HOME_ROUTE + \"/~/to_dos\"\n  },\n\n  VIEW_REGISTRY: {\n    HOME: APP_HOME_ROUTE + \"/view-registry\"\n  },\n\n  TRACK_GIFTS: {\n    HOME: APP_HOME_ROUTE + \"/track_gifts\"\n  },\n\n  ONBOARDING: {\n    HOME: APP_HOME_ROUTE + \"/onboarding\"\n  },\n\n  PERSONALIZE:{\n    HOME: APP_HOME_ROUTE + \"/personalize-quiz\",\n    CHECKLIST: APP_HOME_ROUTE + \"/personalize-checklist\"\n  },\n\n  GUEST_VIEW: {\n    HOME: APP_HOME_ROUTE+\"\"\n  },\n\n  FIND_REGISTRY: {\n    HOME: APP_HOME_ROUTE + \"/find\"\n  }\n}\nexport default routes;","import React from 'react';\nimport \"./MoreOption.scss\";\n\nconst MoreOption = (props) => {\n  return (\n    <div className={[\"more-option\", props.className ? props.className : null].join(\" \")}>\n      <button className={[\"more-option-dropbtn my-auto\", props.iconClass, props.buttonClass ? props.buttonClass : \"\"].join(\" \")} onClick={(e) => e.stopPropagation()}/>\n      <div className={[\"more-option-dropdown\"].join(\" \")}>\n        <div className=\"more-option-content py-1\">\n          <ul className=\"p-0 m-0\">\n            {props.data ?\n              props.data.map((option, index) =>\n                <li className=\"text-sm\" key={\"option-\" + index}>\n                  <button className=\"py-2 px-4 more-option-item\" onClick={option.action}>{option.name}</button>\n                </li>\n              )\n              : null}\n          </ul>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default MoreOption;\n","import React from 'react';\nimport \"./ModalComponent.scss\";\nimport {Modal} from 'react-bootstrap';\n\nconst ModalComponent = (props) => {\n  return (\n    <Modal show={props.show} size={props.size ? props.size : \"xl\"} className=\"m-a-modal\">\n      {props.title || props.titleContent ?\n        <Modal.Header className=\"px-3 pt-3 pb-1 d-block\">\n          <div>\n            <div className=\"d-flex justify-content-between\">\n              <h1>{props.title}</h1>\n              <div className=\"d-flex\">\n                {props.headerContent ? props.headerContent : null}\n                <i className={[\"icon-close m-a-modal-close align-self-center\", props.closeIconClass ? props.closeIconClass : \"\"].join(\" \")} onClick={props.closeModal}/>\n              </div>\n            </div>\n          </div>\n\n          {/* OPTIONAL CONTENT IN TITLE PORTION */}\n          {props.titleContent ? props.titleContent : null}\n\n        </Modal.Header> : null}\n      <Modal.Body className={[\"m-a-modal-content\", !props.noBodyPadding ? \"p-3\" : \"py-0 pr-3\"].join(\" \")}>\n        {/*<div className=\"row\">*/}\n        {/*  <div className=\"col\">*/}\n        {/* MODAL CONTENT GOES HERE */}\n        {props.children}\n        {/*  </div>*/}\n        {/*</div>*/}\n      </Modal.Body>\n      {props.footer ?\n        <Modal.Footer className=\"px-3 py-3 m-a-modal-footer\">\n          {/*  MODAL FOOTER BUTTONS GOES HERE*/}\n          {props.footer}\n        </Modal.Footer>\n        : null}\n    </Modal>\n\n\n  )\n}\n\nexport default ModalComponent;","import React from 'react'\nimport \"./Counter.scss\";\n\nconst Counter = (props) => {\n\treturn (\n\t\t<div className={[\"counter\", \"d-flex\", props.className ? props.className : \"\"].join(\" \")}>\n\t\t\t<button className=\"icon-btn icon-circle-minus pl-0\" onClick={props.decrementHandler}></button>\n\t\t\t<span className=\"mx-2\">{props.counter}</span>\n\t\t\t<button className=\"icon-btn icon-circle-plus pr-0\" onClick={props.incrementHandler}></button>\n\t\t</div >\n\t);\n}\n\nexport default Counter;","import React from 'react';\nimport \"./CardItem.scss\";\nimport Counter from \"modules/commons/components/counter/Counter\";\n\nconst CardItem = (props) => {\n\n\treturn (\n\t\t<div className={[\"card-item\", props.className ? props.className : \"\"].join(\" \")}>\n\t\t\t<div className=\"product-image text-center\">\n\t\t\t\t<img className=\"mx-auto\" src={props.activeVariant ? props.activeVariant.imageUrl : props.data.imageUrl} alt={props.data.title} />\n\t\t\t</div>\n\t\t\t<div className=\"product-bottom mt-3 px-2 pb-2\">\n\t\t\t\t<div className=\"product-title font-medium text-body\">\n\t\t\t\t\t<span><a href={props.data.productLink} tabindex=\"0\">{props.data.title}</a></span>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"product-sub-text-heading mt-3 text-sm font-medium\">\n\t\t\t\t\t<span>Why we love it?</span>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"product-sub-text-description text-sm text-sm\">\n\t\t\t\t\t<span>{props.data.description} <a href={props.data.storeUrl} className=\"read-more\" tabindex=\"0\">Read more</a></span>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<div className=\"product-price d-flex mt-3\">\n\t\t\t\t\t\t{/* <h5>{props.data.price ? '$ ' + props.data.price : (props.data.isMaItem && props.data.maItemVariantItemRecommendation.length) ? '$ ' + props.data.maItemVariantItemRecommendation[0].price : null}</h5> */}\n\t\t\t\t\t\t<h5>{props.activeVariant ? '$' + props.activeVariant.price : '$' + props.data.price}</h5>\n\t\t\t\t\t\t{props.data.strikedPrice ? <span className=\"strike-price ml-1\">{props.data.strikedPrice}</span> : null}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"d-flex align-items-center mt-3\">\n\t\t\t\t\t\t<Counter\n\t\t\t\t\t\t\tcounter={props.data.quantity}\n\t\t\t\t\t\t\tincrementHandler={props.incrementQuantityHandler}\n\t\t\t\t\t\t\tdecrementHandler={props.decrementQuantityHandler} />\n\t\t\t\t\t\t<button className=\"add-btn ml-auto\" onClick={props.addProductHandler} />\n\t\t\t\t\t</div>\n\t\t\t\t\t{props.data.maItemVariantItemRecommendation.length ?\n\t\t\t\t\t\t<div className=\"mt-3 product-variant\">\n\t\t\t\t\t\t\t<div className=\"mt-3\">\n\t\t\t\t\t\t\t\t<p className=\"font-medium product-variant-text\">Color</p>\n\t\t\t\t\t\t\t\t<div className=\"d-flex flex-wrap\">\n\t\t\t\t\t\t\t\t\t{props.data.maItemVariantItemRecommendation.map(variant =>\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName={[\"mr-1 mb-1 product-variant-circle-disk\", (props.activeVariant && props.activeVariant.variantId === variant.variantId) ? \"active-variant-product\" : \"\"].join(\" \")}\n\t\t\t\t\t\t\t\t\t\t\tkey={variant.variantId + ':' + variant.sku}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => props.setActiveRecommandationVariantHandler(variant)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<img className=\"product-variant-image\" src={variant.iconUrl} alt={variant.pattern} />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div> : null}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default CardItem;","import { gql } from '@apollo/client';\n\n// Add queries\n\nconst GET_USERS = gql`\nquery getUsers {\n    users {\n        id,\n        email\n    }\n}\n`;\n\nconst GET_CATEGORIES = `\nquery getCategories($registryId: Int!){\n  registryCategories(registryId:$registryId){\n    id,\n    isExcluded,\n    itemsCount,\n    addedItemsCount,\n    totalItemsCount,\n    category{\n      id,\n      categoryName,\n      description,\n      categoryType {\n        id,\n        name\n      }\n      isParent,\n    },\n    registrySubCategories{\n      id,\n      isExcluded,\n      itemsCount,\n      addedItemsCount,\n      totalItemsCount,\n      category{\n        id,\n        categoryName,\n        description,\n        categoryType {\n          id,\n          name\n        }\n        isParent,\n      },\n      registrySubProductTypes{\n        id,\n        isExcluded,\n        itemsCount,\n        addedItemsCount,\n        totalItemsCount,\n        category{\n          id,\n          categoryName,\n          description,\n          categoryType {\n            id,\n            name\n          }\n          isParent,\n        },\n      }\n    }\n  }\n }\n`;\n\nconst GET_PRODUCTS = `\nquery registryItems(\n  $registryId:Int!\n  $after: String,\n  $first: Int,\n  $isReserved: Boolean,\n  $isPurchased: Boolean,\n  $isAvailable: Boolean,\n  $sortBy: String,\n  $categories:[Int],\n  $price_Lte: Float,\n  $price_Gte: Float,\n  $store: [String],\n  ){\n    registryItems(\n      registryId:$registryId\n      isReserved: $isReserved,\n      isPurchased: $isPurchased,\n      isAvailable: $isAvailable,\n      sortBy: $sortBy,\n      categories: $categories,\n      price_Lte: $price_Lte,\n      price_Gte: $price_Gte,\n      store: $store,\n      ){\n      registryItems(after: $after, first: $first) {\n        edges {\n          node {\n            id\n            registryitemImage {\n              image\n            }\n            isGroupGift\n            isReserved\n            quantity\n            mostWanted\n            featuredOrder\n            isReserved\n            isAmountReceived\n            isPurchased\n            title\n            isCashAcceptedOnly\n            quantityStatus\n            purchasedRegistryItem{\n              id,\n              purchasedQuantity,\n              isPurchased,\n              giftMessage,\n              orderNo,\n              storeName,\n              createdTs,\n              contributionAmount\n              groupGift{\n                amountReceived\n              }\n              guestUser{\n                email,\n                firstName,\n                lastName,\n              }\n            }\n            registryCategories {\n              id\n              category {\n                id\n                categoryName\n                categoryType {\n                  id\n                  name\n                }\n                isParent\n                parentCategory {\n                  id\n                  categoryName\n                  isParent\n                    parentCategory {\n                    categoryName\n                  }\n                }\n              }\n            }\n            note\n            item {\n              store {\n                id\n                storeName\n              }\n              id\n              shopifyItemId\n              shopifyItemVariantId\n              storeItemUrl\n              sku\n              price\n              imageUrl\n              hideTotal\n            }\n          }\n        }\n        pageInfo {\n          endCursor\n          hasNextPage\n        }\n      }\n      registryItemsAnalysisCount{\n        totalAvailable,\n        totalReserved,\n        totalPurchased,\n        maStoreItems,\n        otherStoreItems,\n        under50,\n        moreThan100,\n        between50100,\n        totalFundsReceived\n      }\n      categoryData\n    }\n  }\n`\n\nconst GET_RECOMMENDATIONS = `\nquery itemRecommendations($registryId: Int!, $categoryId: Int!){\n  itemRecommendations(registryId:$registryId, categoryId:$categoryId){\n    id,\n    imageUrl,\n    title,\n    price,\n    isMaItem,\n    isEnable,\n    sku,\n    storeName,\n    storeUrl,\n    maItemVariantItemRecommendation{\n      imageUrl,\n      pattern,\n      iconUrl,\n      size,\n      variantId,\n      sku,\n      price,\n      isAvailable\n    }\n  }\n\n  }\n`;\n\nconst ADD_REGISTRY_ITEM = `\nmutation addRegistryItems(\n    $registryId:Int!,\n    $title:String!,\n    $category:[Int]!,\n    $tags:[Int]!,\n    $storeItemUrl:String!,\n    $shopifyItemVariantId: String,\n    $sku:String!,\n    $price:Float!,\n    $quantity:Int!,\n    $shopifyItemId:String,\n    $storeName:String!\n    $imageUrl: String){\n  addRegistryItems(registryId:$registryId,\n  registryItems:[{\n    storeName: $storeName,\n    items: [{\n      title:$title,\n      registryCategories:$category,\n      tags:$tags,\n      storeItemUrl:$storeItemUrl,\n      sku:$sku,\n      price:$price,\n      quantity:$quantity,\n      shopifyItemId: $shopifyItemId,\n      imageUrl: $imageUrl,\n      shopifyItemVariantId: $shopifyItemVariantId\n    },]\n  }])\n  {\n    message\n  }\n}\n`;\n\nconst UPDATE_REGISTRY_ITEM = `\nmutation updateRegistryItems($registryItemId: Int!, $quantity: Int!){\n  updateRegistryItems(registryItemId:$registryItemId, registryItemData:{\n    quantity:$quantity,\n    isReserved:false,\n  }){\n    message\n  }\n}\n`;\n\nconst REMOVE_REGISTRY_ITEM = `\nmutation deleteRegistryItems($registryItemId: Int!){\n  deleteRegistryItems(registryItemId:$registryItemId){\n    message\n  }\n}\n`;\n\nconst GET_REGISTRIES = `\nquery {\n  registries {\n    edges {\n      node {\n        id\n        name\n        urlSlug\n        greeting\n        displayName\n        isFeaturedNoticeRead\n        isFeatured\n        image {\n          id\n          image\n        }\n        dueDate\n        isPublic\n      }\n    }\n  }\n}\n`;\n\nconst GET_REGISTRY_IMAGES = `\n  query registryImages($registryId: Int!){\n    registryImages(registryId: $registryId) {\n      id\n      image\n      isDefault\n    }\n  }\n`;\n\nconst GET_QUESTIONS = `\n  query getQuestions($registryId: Int, $isPersonalize: Boolean!){\n  questions(registryId: $registryId, isPersonalize: $isPersonalize){\n    id,\n    title,\n    answerInputType,\n    fields,\n    toastMessage,\n    answers{\n      questionOption{\n        id\n      },\n      optionText\n    },\n    options {\n      id,\n      value,\n      toastMessage,\n      helpText,\n      action,\n      followUpQuestions{\n         question{\n          id,\n          title,\n          fields,\n          answerInputType,\n          toastMessage,\n          options{\n            id\n            value\n            toastMessage\n            action\n          },\n          answers{\n            questionOption{\n              id\n            },\n            optionText\n          },\n        }\n      }\n    }\n  }\n}\n`\n\nconst GET_GUEST_REGISTRY = `\n  query getGuestRegistry($urlSlug: String!, $after: String, $first: Int){\n    registryAsGuest(urlSlug: $urlSlug){\n      id,\n      name,\n      displayName,\n      greeting,\n      isPublic,\n      isAllGiftsPurchased,\n      urlSlug,\n      image {\n        id\n        image\n      },\n      user {\n        firstName,\n        partnerUser {\n          firstName\n        },\n        defaultAddress{\n          address1,\n          address2,\n          province,\n          country,\n          zip,\n          city,\n          province\n        }\n      },\n      registryItems(after: $after, first: $first) {\n        edges{\n          node{\n            id,\n            registryitemImage{\n              image\n            }\n            isGroupGift,\n            isReserved,\n            quantity,\n            mostWanted,\n            featuredOrder,\n            isReserved,\n            isCashAcceptedOnly,\n            isAmountReceived,\n            isPurchased,\n            title,\n            quantityStatus\n            purchasedRegistryItem{\n              id,\n              purchasedQuantity,\n              isPurchased,\n              giftMessage,\n              orderNo,\n              storeName,\n              createdTs,\n              contributionAmount\n              groupGift{\n                amountReceived\n              }\n              guestUser{\n                email,\n                firstName,\n                lastName,\n              }\n            }\n            registryCategories {\n              id,\n              category{\n                categoryName,\n              }\n            }\n            note,\n            item{\n              store{\n                id,\n                storeName\n              }\n              id,\n              shopifyItemId,\n              storeItemUrl,\n              sku,\n              price,\n              imageUrl,\n              isCashFund,\n              hideTotal,\n            }\n          }\n        }\n        pageInfo{\n          endCursor,\n          hasNextPage\n        }\n      }\n    }\n  }\n`\n\nconst GET_PERSONALIZE_QUESTIONS = `\nquery editablePersonalizeQuestions($registryId: Int!){\n  editablePersonalizeQuestions(registryId: $registryId){\n    id,\n    title,\n    answerInputType,\n    fields,\n    isPersonalize,\n    toastMessage,\n    answers{\n      questionOption{\n        id\n      },\n      optionText\n    },\n    options {\n      id,\n      value,\n      toastMessage,\n      helpText,\n      followUpQuestions{\n         question{\n          id,\n          title,\n          fields,\n          answerInputType,\n          toastMessage,\n          isPersonalize,\n          options{\n            id\n            value\n            toastMessage\n          },\n          answers{\n            questionOption{\n              id\n            },\n            optionText\n          },\n        }\n      }\n    }\n  }\n}\n`\n\nconst GET_TRACK_GIFTS = `\nquery registryGifts($registryId: Int!, $giftGivers: Boolean!, $after: String, $first: Int, $isReserved: Boolean, $isAvailable: Boolean, $isPurchased: Boolean, $isFundsReceived: Boolean, $isReturned: Boolean, $searchKeyword: String) {\n  registryGifts(registryId: $registryId, giftGivers: $giftGivers, isReserved: $isReserved, isAvailable: $isAvailable, isPurchased: $isPurchased, isFundsReceived: $isFundsReceived, isReturned: $isReturned, searchKeyword: $searchKeyword) {\n    registryGiftItemsCount {\n      totalAvailable\n      totalPurchased\n      totalReserved\n      totalFundsReceived\n      totalReturned\n    }\n    gifts(after: $after, first: $first) {\n      edges {\n        node {\n          id\n          isGroupGift\n          featuredOrder\n          isReserved\n          isPurchased\n          quantity\n          isCashAcceptedOnly\n          isAmountReceived\n          item {\n            store {\n              id\n              storeName\n            }\n            storeItemUrl\n            price\n            imageUrl\n            isCashFund\n          }\n          quantityStatus\n          purchasedRegistryItem {\n            id\n            purchasedQuantity\n            isPurchased\n            giftMessage\n            orderNo\n            storeName\n            createdTs\n            contributionAmount\n            groupGift {\n              id\n              amountReceived\n              guestUser {\n                email\n                firstName\n                lastName\n                id\n              }\n            }\n            guestUser {\n              email\n              firstName\n              lastName\n              id\n            }\n          }\n          title\n        }\n      }\n      pageInfo {\n        endCursor\n        hasNextPage\n      }\n    }\n  }\n}\n`\n\nconst GET_CASH_FUND_CATEGORIES = `\nquery getCashFund($registryId: Int!){\n  cashFundCategories(registryId:$registryId){\n    id\n    category{\n      id\n      categoryName\n    }\n  }\n}\n`\n\nconst GET_GUEST_REGISTRY_PRODUCT = `\n  query getGuestRegistry(\n    $urlSlug: String!,\n    $after: String,\n    $first: Int,\n    $isReserved: Boolean,\n    $isPurchased: Boolean,\n    $isAvailable: Boolean,\n    $sortBy: String,\n    $categories:[Int],\n    $price_Lte: Float,\n    $price_Gte: Float,\n    $store: [String],\n    ){\n    registryAsGuest(\n      urlSlug: $urlSlug,\n      isReserved: $isReserved,\n      isPurchased: $isPurchased,\n      isAvailable: $isAvailable,\n      sortBy: $sortBy,\n      categories: $categories,\n      price_Lte: $price_Lte,\n      price_Gte: $price_Gte,\n      store: $store,\n      ){\n      registryItems(\n        after: $after,\n        first: $first,\n        ) {\n        edges{\n          node{\n            id,\n            registryitemImage{\n              image\n            }\n            isGroupGift,\n            isReserved,\n            quantity,\n            mostWanted,\n            featuredOrder,\n            isReserved,\n            isCashAcceptedOnly,\n            isAmountReceived,\n            isPurchased,\n            title,\n            quantityStatus\n            purchasedRegistryItem{\n              id,\n              purchasedQuantity,\n              isPurchased,\n              giftMessage,\n              orderNo,\n              storeName,\n              createdTs,\n              contributionAmount\n              groupGift{\n                amountReceived\n              }\n              guestUser{\n                email,\n                firstName,\n                lastName,\n              }\n            }\n            registryCategories {\n              id\n              category {\n                categoryName\n                categoryType {\n                  id\n                  name\n                }\n                isParent\n                parentCategory {\n                  categoryName\n                  isParent\n                    parentCategory {\n                    categoryName\n                  }\n                }\n              }\n            }\n            note,\n            item{\n              store{\n                id,\n                storeName\n              }\n              id,\n              shopifyItemId,\n              storeItemUrl,\n              shopifyItemVariantId,\n              sku,\n              price,\n              imageUrl,\n              isCashFund,\n              hideTotal,\n            }\n          }\n        }\n        pageInfo{\n          endCursor,\n          hasNextPage\n        }\n      }\n      registryItemsAnalysisCount{\n        totalAvailable,\n        totalReserved,\n        totalPurchased,\n        maStoreItems,\n        otherStoreItems,\n        under50,\n        moreThan100,\n        between50100,\n        totalFundsReceived\n      }\n      categoryData\n    }\n  }\n`;\n\nconst GET_GUEST_CHECKLIST = `\n  query registryCategoriesAsGuest($urlSlug: String!){\n    registryCategoriesAsGuest(urlSlug: $urlSlug){\n      id,\n      isExcluded,\n      itemsCount,\n      addedItemsCount,\n      totalItemsCount,\n       category{\n        id,\n        categoryName,\n        categoryType{\n          id,\n          name\n        }\n      },\n      registrySubCategories{\n        id,\n        isExcluded,\n        itemsCount,\n        addedItemsCount,\n        totalItemsCount,\n        category{\n          id,\n          categoryName\n        },\n        registrySubProductTypes{\n          id,\n          isExcluded,\n          itemsCount,\n          addedItemsCount,\n          totalItemsCount,\n          category{\n            id,\n            categoryName\n          },\n        }\n      }\n    }\n  }\n`;\n\nconst FIND_REGISTRY = `\n  query findRegistry($registryName: String!){\n    findRegistry(registryName: $registryName){\n      edges{\n        node{\n          id,\n          name,\n          displayName,\n          urlSlug,\n          createdTs,\n          dueDate,\n          user{\n            id,\n            defaultAddress{\n              city,\n              province\n            }\n          }\n        }\n      }\n    }\n  }\n`;\n\nconst GET_TODO = `\n  query registryTodoSteps($registryId: ID!){\n    registryTodoSteps(registryId: $registryId) {\n      label\n      redirect,\n      redirectUrl\n    }\n  }\n`\n\nconst GET_DEFAULT_CASH_FUND_IMAGE = `\n  query cashFundDefaultImage($categoryId: ID!) {\n    cashFundDefaultImage(categoryId: $categoryId)\n  }\n`\n\nconst GET_MA_VARIANT = `\n  query maItemVariants($registryId: Int!, $variantId: String!){\n  maItemVariants(registryId:$registryId, variantId:$variantId){\n    id,\n    iconUrl,\n    imageUrl,\n    pattern,\n    size,\n    variantId,\n    sku,\n    price,\n    isAvailable\n  }\n}\n`\n\nexport {\n  GET_USERS,\n  GET_CATEGORIES,\n  GET_PRODUCTS,\n  GET_RECOMMENDATIONS,\n  ADD_REGISTRY_ITEM,\n  UPDATE_REGISTRY_ITEM,\n  REMOVE_REGISTRY_ITEM,\n  GET_REGISTRIES,\n  GET_REGISTRY_IMAGES,\n  GET_QUESTIONS,\n  GET_GUEST_REGISTRY,\n  GET_PERSONALIZE_QUESTIONS,\n  GET_TRACK_GIFTS,\n  GET_CASH_FUND_CATEGORIES,\n  GET_GUEST_REGISTRY_PRODUCT,\n  GET_GUEST_CHECKLIST,\n  FIND_REGISTRY,\n  GET_TODO,\n  GET_DEFAULT_CASH_FUND_IMAGE,\n  GET_MA_VARIANT\n};\n\n// Example to use queries added in home.jsx","const backendId = \"https://3.12.191.197\";\n// const backendId = \"http://localhost:8000\";\n\nexport default {\n  \"BACKEND_URL\": backendId,\n  \"LOCAL_API_URL\": backendId + \"/api/\",\n  \"PRODUCTION_API_URL\": backendId + \"/api/\"\n}","import config from './config';\nimport {Cookies} from 'react-cookie';\n\n\nconst cookies = new Cookies();\n// For axios\nexport const apiURL = process.env.NODE_ENV === 'production' ? config.PRODUCTION_API_URL : config.LOCAL_API_URL;\nconst AuthToken = cookies.get('access_token') ? \"Token \" + cookies.get('access_token') : \"\"\n\nconst axios = require(\"axios\");\n\nconst axiosInstance = axios.create({\n  baseURL: apiURL,\n  // TODO: Change Auth Token dyanamic\n  // headers : cookies.get('header')\n  headers: {\"Authorization\": cookies.get('access_token') ? \"Token \" + cookies.get('access_token') : \"\"}\n});\n\nconst axiosInstanceNoToken = axios.create({\n  baseURL: apiURL\n});\n\nconst axiosInstanceNoHeader = axios.create({\n  baseURL: apiURL\n});\n\nexport function graphQLNoToken(data) {\n  return axiosInstanceNoToken.post(\"/graphql\", data);\n}\n\nexport function graphQLNoHeader(data, options) {\n  return axiosInstanceNoHeader.post(\"/graphql\", data, options);\n}\n\nexport function graphQL(data) {\n  return axiosInstance.post(\"/graphql\", data);\n}\n\nexport function getRecommendation(data) {\n  return axiosInstance.get(\"/items\", data);\n}\n\nexport function getScrapedProduct(data) {\n  return axiosInstance.post(\"/items/import_item/\", data);\n}\n\nexport function verifyAccessToken(token) {\n  return axiosInstanceNoToken.post(\"/user/verify/token\", {}, {\n    headers: {\n      'Authorization': `Token ${token}`\n    }\n  });\n}\n\nexport function getAnotherRegistryProducts(data) {\n  return axiosInstance.post(\"/registry/import\", data);\n}\n\nconst axiosInstanceMultipart = axios.create({\n  baseURL: apiURL,\n  headers: {\n    \"Authorization\": AuthToken,\n    'Content-Type': 'multipart/form-data'\n  }\n});\n\nexport function graphQLMultipart(data) {\n  return axiosInstanceMultipart.post(\"/graphql\", data);\n}\n\nexport function addProductToCart(data) {\n  return axios.post(\"/cart/add.js\", data);\n}\n\nexport function downloadThankYouList(registryId) {\n  return axiosInstance.post(`/registry/${registryId}/download/thanks-note`);\n}","import config from \"api/config\";\n\nexport const API_END_POINTS = {\n  VERIFY_TOKEN: \"/api/user/verify/token\"\n}\n\nexport const API_URL = config.BACKEND_URL\n\nexport const MEDIA_URL_PREFIX = {\n  LOCAL_MEDIA_URL: config.BACKEND_URL + \"/media/\"\n}\n\nexport const FILTERS = {\n  CATEGORIES_DISPLAY: \"Categories\",\n  PRICE_DISPLAY: \"Price\",\n  PRICE_DISPLAY_1: \"Under $50\",\n  PRICE_DISPLAY_2: \"$50 - $100\",\n  PRICE_DISPLAY_3: \"more than $100\",\n  STORE_DISPLAY: \"Store\",\n  MONICA_AND_ANDY_DISPLAY: \"Monica + Andy\",\n  ELSEWHERE_DISPLAY: \"Elsewhere\",\n  AVAILABLE_DISPLAY: \"Available\",\n  RESERVED_DISPLAY: \"Reserved\",\n  PURCHASED_DISPLAY: \"Purchased\",\n}\n\nexport const BOOKMARKLET_SCRIPT = \"javascript:(function()%7Bif%20(!(!typeof%20url)%20)%7Bvar%20NO_JQUERY%3D%7B%7D%3B!function(e%2Ct%2Ca)%7Bif(!(%22console%22in%20e))%7Bvar%20r%3De.console%3D%7B%7D%3Br.log%3Dr.warn%3Dr.error%3Dr.debug%3Dfunction()%7B%7D%7Dt%3D%3D%3DNO_JQUERY%26%26(t%3D%7Bfn%3A%7B%7D%2Cextend%3Afunction()%7Bfor(var%20e%3Darguments%5B0%5D%2Ct%3D1%2Ca%3Darguments.length%3Bt%3Ca%3Bt%2B%2B)%7Bvar%20r%3Darguments%5Bt%5D%3Bfor(var%20n%20in%20r)e%5Bn%5D%3Dr%5Bn%5D%7Dreturn%20e%7D%7D)%2Ct.fn.pm%3Dfunction()%7Breturn%20console.log(%22usage%3A%20%5Cnto%20send%3A%20%20%20%20%24.pm(options)%5Cnto%20receive%3A%20%24.pm.bind(type%2C%20fn%2C%20%5Borigin%5D)%22)%2Cthis%7D%2Ct.pm%3De.bufferpm%3Dfunction(e)%7Bn.send(e)%7D%2Ct.pm.bind%3De.bufferpm.bind%3Dfunction(e%2Ct%2Ca%2Cr)%7Bn.bind(e%2Ct%2Ca%2Cr)%7D%2Ct.pm.unbind%3De.bufferpm.unbind%3Dfunction(e%2Ct)%7Bn.unbind(e%2Ct)%7D%2Ct.pm.origin%3De.bufferpm.origin%3Dnull%2Ct.pm.poll%3De.bufferpm.poll%3D200%3Bvar%20n%3D%7Bsend%3Afunction(e)%7Bvar%20a%3Dt.extend(%7B%7D%2Cn.defaults%2Ce)%2Cr%3Da.target%3Bif(a.target)if(a.type)%7Bvar%20s%3D%7Bdata%3Aa.data%2Ctype%3Aa.type%7D%3Ba.success%26%26(s.callback%3Dn._callback(a.success))%2Ca.error%26%26(s.errback%3Dn._callback(a.error))%2C%22postMessage%22in%20r%26%26!a.hash%3F(n._bind()%2Cr.postMessage(JSON.stringify(s)%2Ca.origin%7C%7C%22*%22))%3A(n.hash._bind()%2Cn.hash.send(a%2Cs))%7Delse%20console.warn(%22postmessage%20type%20required%22)%3Belse%20console.warn(%22postmessage%20target%20window%20required%22)%7D%2Cbind%3Afunction(a%2Cr%2Cs%2Co)%7B%22postMessage%22in%20e%26%26!o%3Fn._bind()%3An.hash._bind()%3Bvar%20i%3Dn.data(%22listeners.postmessage%22)%3Bi%7C%7C(i%3D%7B%7D%2Cn.data(%22listeners.postmessage%22%2Ci))%3Bvar%20u%3Di%5Ba%5D%3Bu%7C%7C(u%3D%5B%5D%2Ci%5Ba%5D%3Du)%2Cu.push(%7Bfn%3Ar%2Corigin%3As%7C%7Ct.pm.origin%7D)%7D%2Cunbind%3Afunction(e%2Ct)%7Bvar%20a%3Dn.data(%22listeners.postmessage%22)%3Bif(a)if(e)if(t)%7Bvar%20r%3Da%5Be%5D%3Bif(r)%7Bfor(var%20s%3D%5B%5D%2Co%3D0%2Ci%3Dr.length%3Bo%3Ci%3Bo%2B%2B)%7Bvar%20u%3Dr%5Bo%5D%3Bu.fn!%3D%3Dt%26%26s.push(u)%7Da%5Be%5D%3Ds%7D%7Delse%20delete%20a%5Be%5D%3Belse%20for(var%20o%20in%20a)delete%20a%5Bo%5D%7D%2Cdata%3Afunction(e%2Ct)%7Breturn%20t%3D%3D%3Da%3Fn._data%5Be%5D%3A(n._data%5Be%5D%3Dt%2Ct)%7D%2C_data%3A%7B%7D%2C_CHARS%3A%220123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz%22.split(%22%22)%2C_random%3Afunction()%7Bfor(var%20e%3D%5B%5D%2Ct%3D0%3Bt%3C32%3Bt%2B%2B)e%5Bt%5D%3Dn._CHARS%5B0%7C32*Math.random()%5D%3Breturn%20e.join(%22%22)%7D%2C_callback%3Afunction(e)%7Bvar%20t%3Dn.data(%22callbacks.postmessage%22)%3Bt%7C%7C(t%3D%7B%7D%2Cn.data(%22callbacks.postmessage%22%2Ct))%3Bvar%20a%3Dn._random()%3Breturn%20t%5Ba%5D%3De%2Ca%7D%2C_bind%3Afunction()%7Bn.data(%22listening.postmessage%22)%7C%7C(e.addEventListener%3Fe.addEventListener(%22message%22%2Cn._dispatch%2C!1)%3Ae.attachEvent%26%26e.attachEvent(%22onmessage%22%2Cn._dispatch)%2Cn.data(%22listening.postmessage%22%2C1))%7D%2C_dispatch%3Afunction(e)%7Btry%7Bvar%20t%3DJSON.parse(e.data)%7Dcatch(l)%7Breturn%20void%20console.warn(%22postmessage%20data%20invalid%20json%3A%20%22%2Cl)%7Dif(t.type)%7Bvar%20a%3D(n.data(%22callbacks.postmessage%22)%7C%7C%7B%7D)%5Bt.type%5D%3Bif(a)a(t.data)%3Belse%20for(var%20r%3D(n.data(%22listeners.postmessage%22)%7C%7C%7B%7D)%5Bt.type%5D%7C%7C%5B%5D%2Cs%3D0%2Co%3Dr.length%3Bs%3Co%3Bs%2B%2B)%7Bvar%20i%3Dr%5Bs%5D%3Bif(i.origin%26%26e.origin!%3D%3Di.origin)%7Bif(console.warn(%22postmessage%20message%20origin%20mismatch%22%2Ce.origin%2Ci.origin)%2Ct.errback)%7Bvar%20u%3D%7Bmessage%3A%22postmessage%20origin%20mismatch%22%2Corigin%3A%5Be.origin%2Ci.origin%5D%7D%3Bn.send(%7Btarget%3Ae.source%2Cdata%3Au%2Ctype%3At.errback%7D)%7D%7Delse%20try%7Bvar%20c%3Di.fn(t.data)%3Bt.callback%26%26n.send(%7Btarget%3Ae.source%2Cdata%3Ac%2Ctype%3At.callback%7D)%7Dcatch(l)%7Bt.errback%26%26n.send(%7Btarget%3Ae.source%2Cdata%3Al%2Ctype%3At.errback%7D)%7D%7D%7Delse%20console.warn(%22postmessage%20message%20type%20required%22)%7D%7D%3Bn.hash%3D%7Bsend%3Afunction(t%2Ca)%7Bvar%20r%3Dt.target%2Cs%3Dt.url%3Bif(s)%7Bs%3Dn.hash._url(s)%3Bvar%20o%2Ci%3Dn.hash._url(e.location.href)%3Bif(e%3D%3Dr.parent)o%3D%22parent%22%3Belse%20try%7Bfor(var%20u%3D0%2Cc%3Dparent.frames.length%3Bu%3Cc%3Bu%2B%2B)%7Bif(parent.frames%5Bu%5D%3D%3De)%7Bo%3Du%3Bbreak%7D%7D%7Dcatch(p)%7Bo%3De.name%7Dif(null!%3Do)%7Bvar%20l%3D%7B%22x-requested-with%22%3A%22postmessage%22%2Csource%3A%7Bname%3Ao%2Curl%3Ai%7D%2Cpostmessage%3Aa%7D%2Cf%3D%22%23x-postmessage-id%3D%22%2Bn._random()%3Br.location%3Ds%2Bf%2BencodeURIComponent(JSON.stringify(l))%7Delse%20console.warn(%22postmessage%20windows%20must%20be%20direct%20parent%2Fchild%20windows%20and%20the%20child%20must%20be%20available%20through%20the%20parent%20window.frames%20list%22)%7Delse%20console.warn(%22postmessage%20target%20window%20url%20is%20required%22)%7D%2C_regex%3A%2F%5E%5C%23x%5C-postmessage%5C-id%5C%3D(%5Cw%7B32%7D)%2F%2C_regex_len%3A%22%23x-postmessage-id%3D%22.length%2B32%2C_bind%3Afunction()%7Bn.data(%22polling.postmessage%22)%7C%7C(setInterval(function()%7Bvar%20t%3D%22%22%2Be.location.hash%2Ca%3Dn.hash._regex.exec(t)%3Bif(a)%7Bvar%20r%3Da%5B1%5D%3Bn.hash._last!%3D%3Dr%26%26(n.hash._last%3Dr%2Cn.hash._dispatch(t.substring(n.hash._regex_len)))%7D%7D%2Ct.pm.poll%7C%7C200)%2Cn.data(%22polling.postmessage%22%2C1))%7D%2C_dispatch%3Afunction(t)%7Bif(t)%7Btry%7Bif(!(%22postmessage%22%3D%3D%3D(t%3DJSON.parse(decodeURIComponent(t)))%5B%22x-requested-with%22%5D%26%26t.source%26%26null!%3Dt.source.name%26%26t.source.url%26%26t.postmessage))return%7Dcatch(g)%7Breturn%7Dvar%20a%3Dt.postmessage%2Cr%3D(n.data(%22callbacks.postmessage%22)%7C%7C%7B%7D)%5Ba.type%5D%3Bif(r)r(a.data)%3Belse%7Bvar%20s%3Bs%3D%22parent%22%3D%3D%3Dt.source.name%3Fe.parent%3Ae.frames%5Bt.source.name%5D%3Bfor(var%20o%3D(n.data(%22listeners.postmessage%22)%7C%7C%7B%7D)%5Ba.type%5D%7C%7C%5B%5D%2Ci%3D0%2Cu%3Do.length%3Bi%3Cu%3Bi%2B%2B)%7Bvar%20c%3Do%5Bi%5D%3Bif(c.origin)%7Bvar%20l%3D%2Fhttps%3F%5C%3A%5C%2F%5C%2F%5B%5E%5C%2F%5D*%2F.exec(t.source.url)%5B0%5D%3Bif(l!%3D%3Dc.origin)%7Bif(console.warn(%22postmessage%20message%20origin%20mismatch%22%2Cl%2Cc.origin)%2Ca.errback)%7Bvar%20f%3D%7Bmessage%3A%22postmessage%20origin%20mismatch%22%2Corigin%3A%5Bl%2Cc.origin%5D%7D%3Bn.send(%7Btarget%3As%2Cdata%3Af%2Ctype%3Aa.errback%2Chash%3A!0%2Curl%3At.source.url%7D)%7Dcontinue%7D%7Dtry%7Bvar%20p%3Dc.fn(a.data)%3Ba.callback%26%26n.send(%7Btarget%3As%2Cdata%3Ap%2Ctype%3Aa.callback%2Chash%3A!0%2Curl%3At.source.url%7D)%7Dcatch(g)%7Ba.errback%26%26n.send(%7Btarget%3As%2Cdata%3Ag%2Ctype%3Aa.errback%2Chash%3A!0%2Curl%3At.source.url%7D)%7D%7D%7D%7D%7D%2C_url%3Afunction(e)%7Breturn(%22%22%2Be).replace(%2F%23.*%24%2F%2C%22%22)%7D%7D%2Ct.extend(n%2C%7Bdefaults%3A%7Btarget%3Anull%2Curl%3Anull%2Ctype%3Anull%2Cdata%3Anull%2Csuccess%3Anull%2Cerror%3Anull%2Corigin%3A%22*%22%2Chash%3A!1%7D%7D)%7D(this%2C%22undefined%22%3D%3Dtypeof%20jQuery%3FNO_JQUERY%3AjQuery)%2C%22JSON%22in%20window%26%26window.JSON%7C%7C(JSON%3D%7B%7D)%2Cfunction()%7Bfunction%20f(e)%7Breturn%20e%3C10%3F%220%22%2Be%3Ae%7Dfunction%20quote(e)%7Breturn%20escapable.lastIndex%3D0%2Cescapable.test(e)%3F'%22'%2Be.replace(escapable%2Cfunction(e)%7Bvar%20t%3Dmeta%5Be%5D%3Breturn%22string%22%3D%3Dtypeof%20t%3Ft%3A%22%5C%5Cu%22%2B(%220000%22%2Be.charCodeAt(0).toString(16)).slice(-4)%7D)%2B'%22'%3A'%22'%2Be%2B'%22'%7Dfunction%20str(e%2Ct)%7Bvar%20a%2Cr%2Cn%2Cs%2Co%2Ci%3Dgap%2Cu%3Dt%5Be%5D%3Bswitch(u%26%26%22object%22%3D%3Dtypeof%20u%26%26%22function%22%3D%3Dtypeof%20u.toJSON%26%26(u%3Du.toJSON(e))%2C%22function%22%3D%3Dtypeof%20rep%26%26(u%3Drep.call(t%2Ce%2Cu))%2Ctypeof%20u)%7Bcase%22string%22%3Areturn%20quote(u)%3Bcase%22number%22%3Areturn%20isFinite(u)%3FString(u)%3A%22null%22%3Bcase%22boolean%22%3Acase%22null%22%3Areturn%20String(u)%3Bcase%22object%22%3Aif(!u)return%22null%22%3Bif(gap%2B%3Dindent%2Co%3D%5B%5D%2C%22%5Bobject%20Array%5D%22%3D%3D%3DObject.prototype.toString.apply(u))%7Bfor(s%3Du.length%2Ca%3D0%3Ba%3Cs%3Ba%2B%3D1)o%5Ba%5D%3Dstr(a%2Cu)%7C%7C%22null%22%3Breturn%20n%3D0%3D%3D%3Do.length%3F%22%5B%5D%22%3Agap%3F%22%5B%5Cn%22%2Bgap%2Bo.join(%22%2C%5Cn%22%2Bgap)%2B%22%5Cn%22%2Bi%2B%22%5D%22%3A%22%5B%22%2Bo.join(%22%2C%22)%2B%22%5D%22%2Cgap%3Di%2Cn%7Dif(rep%26%26%22object%22%3D%3Dtypeof%20rep)for(s%3Drep.length%2Ca%3D0%3Ba%3Cs%3Ba%2B%3D1)%22string%22%3D%3Dtypeof(r%3Drep%5Ba%5D)%26%26(n%3Dstr(r%2Cu))%26%26o.push(quote(r)%2B(gap%3F%22%3A%20%22%3A%22%3A%22)%2Bn)%3Belse%20for(r%20in%20u)Object.hasOwnProperty.call(u%2Cr)%26%26(n%3Dstr(r%2Cu))%26%26o.push(quote(r)%2B(gap%3F%22%3A%20%22%3A%22%3A%22)%2Bn)%3Breturn%20n%3D0%3D%3D%3Do.length%3F%22%7B%7D%22%3Agap%3F%22%7B%5Cn%22%2Bgap%2Bo.join(%22%2C%5Cn%22%2Bgap)%2B%22%5Cn%22%2Bi%2B%22%7D%22%3A%22%7B%22%2Bo.join(%22%2C%22)%2B%22%7D%22%2Cgap%3Di%2Cn%7D%7D%22function%22!%3Dtypeof%20Date.prototype.toJSON%26%26(Date.prototype.toJSON%3Dfunction()%7Breturn%20this.getUTCFullYear()%2B%22-%22%2Bf(this.getUTCMonth()%2B1)%2B%22-%22%2Bf(this.getUTCDate())%2B%22T%22%2Bf(this.getUTCHours())%2B%22%3A%22%2Bf(this.getUTCMinutes())%2B%22%3A%22%2Bf(this.getUTCSeconds())%2B%22Z%22%7D%2CString.prototype.toJSON%3DNumber.prototype.toJSON%3DBoolean.prototype.toJSON%3Dfunction()%7Breturn%20this.valueOf()%7D)%3Bvar%20cx%3D%2F%5B%5Cu0000%5Cu00ad%5Cu0600-%5Cu0604%5Cu070f%5Cu17b4%5Cu17b5%5Cu200c-%5Cu200f%5Cu2028-%5Cu202f%5Cu2060-%5Cu206f%5Cufeff%5Cufff0-%5Cuffff%5D%2Fg%2Cescapable%3D%2F%5B%5C%5C%5C%22%5Cx00-%5Cx1f%5Cx7f-%5Cx9f%5Cu00ad%5Cu0600-%5Cu0604%5Cu070f%5Cu17b4%5Cu17b5%5Cu200c-%5Cu200f%5Cu2028-%5Cu202f%5Cu2060-%5Cu206f%5Cufeff%5Cufff0-%5Cuffff%5D%2Fg%2Cgap%2Cindent%2Cmeta%3D%7B%22%5Cb%22%3A%22%5C%5Cb%22%2C%22%5Ct%22%3A%22%5C%5Ct%22%2C%22%5Cn%22%3A%22%5C%5Cn%22%2C%22%5Cf%22%3A%22%5C%5Cf%22%2C%22%5Cr%22%3A%22%5C%5Cr%22%2C'%22'%3A'%5C%5C%22'%2C%22%5C%5C%22%3A%22%5C%5C%5C%5C%22%7D%2Crep%3B%22function%22!%3Dtypeof%20JSON.stringify%26%26(JSON.stringify%3Dfunction(e%2Ct%2Ca)%7Bvar%20r%3Bif(gap%3D%22%22%2Cindent%3D%22%22%2C%22number%22%3D%3Dtypeof%20a)for(r%3D0%3Br%3Ca%3Br%2B%3D1)indent%2B%3D%22%20%22%3Belse%22string%22%3D%3Dtypeof%20a%26%26(indent%3Da)%3Bif(rep%3Dt%2Ct%26%26%22function%22!%3Dtypeof%20t%26%26(%22object%22!%3Dtypeof%20t%7C%7C%22number%22!%3Dtypeof%20t.length))throw%20new%20Error(%22JSON.stringify%22)%3Breturn%20str(%22%22%2C%7B%22%22%3Ae%7D)%7D)%2C%22function%22!%3Dtypeof%20JSON.parse%26%26(JSON.parse%3Dfunction(text%2Creviver)%7Bfunction%20walk(e%2Ct)%7Bvar%20a%2Cr%2Cn%3De%5Bt%5D%3Bif(n%26%26%22object%22%3D%3Dtypeof%20n)for(a%20in%20n)Object.hasOwnProperty.call(n%2Ca)%26%26((r%3Dwalk(n%2Ca))!%3D%3Dundefined%3Fn%5Ba%5D%3Dr%3Adelete%20n%5Ba%5D)%3Breturn%20reviver.call(e%2Ct%2Cn)%7Dvar%20j%3Bif(cx.lastIndex%3D0%2Ccx.test(text)%26%26(text%3Dtext.replace(cx%2Cfunction(e)%7Breturn%22%5C%5Cu%22%2B(%220000%22%2Be.charCodeAt(0).toString(16)).slice(-4)%7D))%2C%2F%5E%5B%5C%5D%2C%3A%7B%7D%5Cs%5D*%24%2F.test(text.replace(%2F%5C%5C(%3F%3A%5B%22%5C%5C%5C%2Fbfnrt%5D%7Cu%5B0-9a-fA-F%5D%7B4%7D)%2Fg%2C%22%40%22).replace(%2F%22%5B%5E%22%5C%5C%5Cn%5Cr%5D*%22%7Ctrue%7Cfalse%7Cnull%7C-%3F%5Cd%2B(%3F%3A%5C.%5Cd*)%3F(%3F%3A%5BeE%5D%5B%2B%5C-%5D%3F%5Cd%2B)%3F%2Fg%2C%22%5D%22).replace(%2F(%3F%3A%5E%7C%3A%7C%2C)(%3F%3A%5Cs*%5C%5B)%2B%2Fg%2C%22%22)))return%20j%3Deval(%22(%22%2Btext%2B%22)%22)%2C%22function%22%3D%3Dtypeof%20reviver%3Fwalk(%7B%22%22%3Aj%7D%2C%22%22)%3Aj%3Bthrow%20new%20SyntaxError(%22JSON.parse%22)%7D)%7D()%3Bvar%20url%20%3D%20window.location.href%3Bvar%20isOpen%20%3D%20true%3Bvar%20iframe%20%3D%20document.createElement('iframe')%3Biframe.setAttribute('allowtransparency'%2C%20'true')%3Biframe.setAttribute('src'%2C%20'https%3A%2F%2Fmonicaandandy-watertower.myshopify.com%2Fpages%2Fma_bady_registry_bookmarklet%3Furl%3D'%2Burl)%3Biframe.setAttribute('name'%2C%20'm-a-iframe')%3Biframe.setAttribute('id'%2C%20'm-a-iframe')%3Biframe.setAttribute('scrolling'%2C%20'no')%3Biframe.style.border%20%3D%20'none'%3Biframe.style.height%20%3D%20'100%25'%3Biframe.style.width%20%20%3D%20'100%25'%3Biframe.style.position%20%3D%20(document.doctype%20%3D%3D%20null%20%26%26%20navigator.appName.match('Microsoft'))%20%3F%20'absolute'%20%3A%20'fixed'%3Biframe.style.zIndex%20%3D%20'99999999999'%3Biframe.style.top%20%3D%20'0'%3Biframe.style.left%20%3D%20'0'%3Biframe.style%5B'background-color'%5D%20%3D%20'transparent'%3Biframe.style.clip%20%3D%20'auto'%3Biframe.style.overflow%20%3D%20'hidden'%3Biframe.style.opacity%20%3D%201%3Biframe.style.setProperty%20('display'%2C%20'block'%2C%20'important')%3Biframe.style.visibility%20%3D%20'visible'%3Bdocument.body.appendChild(iframe)%3B%7Dbufferpm.bind(%22buffermessage%22%2C%20function(data)%20%7Bvar%20iframe%20%3D%20document.getElementById(%22m-a-iframe%22)%3Biframe.parentNode.removeChild(iframe)%3Breturn%20false%3B%7D)%7D)()\"\n\nexport const IMPORT_REGISTRY_EMAIL = \"storks@monicaandandy.com\"\n\nexport const TRACK_GIFTS_PRODUCTS_PER_REQUEST = 20\nexport const M_A_STORE_NAME = \"monicaandandy\"\n\nexport const M_A_FORGOT_PASSWORD_LINK = \"https://monicaandandy-watertower.myshopify.com/account/login#recover\"\nexport const VIEW_GIFT_PRODUCTS_PER_REQUEST = 20\n\nexport const CURRENCY = \"$\"\n\nexport const LOCAL_STORAGE_TRACK_GIFT_BUY_KEY = \"babyRegistryVisitedItems\"\n\nexport const SETTINGS_LINKS = {\n  BANK_ACCOUNT: \"#\"\n}\n\nexport const LOCAL_STORAGE_GUEST_GIFT_BUY_KEY = \"babyRegistryVisitedItemsByGuest\"\n\nexport const M_A_BABY_PRODUCT_LINK = \"https://monicaandandy.com/collections/baby-gifts\"\n\nexport const BOOKMARKLET_STEP_THREE_PRODUCT_LINK = \"https://usa.plantoys.com/en/product/374\"\n","const TOGGLE_MUST_HAVE = `\n   mutation ToggleMustHaveProduct($productId: Int!, $mustHaveValue: Boolean! $quantity: Int!) {\n    updateRegistryItems(registryItemId:$productId, registryItemData:{\n    quantity: $quantity,\n    mostWanted:$mustHaveValue,\n     }){\n      message\n    }\n   }\n`\n\nconst ADD_REGISTRY_ITEM = `\n   mutation addRegistryItems($registryId:Int!,$input: [StoreInput])\n   { addRegistryItems(registryId:$registryId,registryItems: $input) {\n     message\n     }\n   }\n`\n\nconst UPDATE_REGISTRY = `\n  mutation updateRegistryDetail($registryId: Int!, $input: RegistryInput!){\n    updateRegistry(registryId: $registryId, registryData: $input) {\n      registry{\n      name,\n      image{\n            id,image\n        }\n      }\n    }\n  }\n`;\n\nconst UPDATE_VIEW_REGISTRY_POISTION = `\n  mutation registryItemsOrder($registryId:Int!, $registryItems: [RegistryItemOrderInput]){\n    registryItemsOrder(registryId: $registryId,registryItems: $registryItems){\n      message\n    }\n  }\n`;\n\nconst UPDATE_REGISTRY_URL = `\nmutation updateRegistryUrl($registryId:Int!, $urlSlug:String!){\n  checkUpdateRegistryUrlSlug(registryId:$registryId,urlSlugInput:{\n    urlSlug:$urlSlug\n  }){\n    message,\n    registry{\n      id\n    }\n  }\n}\n`\n\nconst REGISTER_USER = `\nmutation register_user($name: String!, $email: String!, $password: String!){\n  registerUser(registerInput:{\n      name:$name,\n      email:$email,\n      password:$password\n  }\n ){\n    user{\n      id\n    },\n    token,\n    redirectionUrl\n  }\n}\n`\nconst SAVE_QUESTION_RESPONSE = `\nmutation addRegistryQuestionOption($registryId: Int!, $answers: [RegistryQuestionOptionInput]!){\n  addRegistryMultipleQuestionOption(registryId: $registryId, registryQuestionOptionInput: $answers){\n    message\n  }\n}\n`\n\nconst SAVE_REGISTRY_DATA = `\nmutation saveRegistryData($registryData:RegistryInput!, $registryItems:[StoreInput]){\n  importRegistry(registryData: $registryData, registryItems: $registryItems) {\n    message\n  }\n}\n`\n\nconst LOGIN_USER = `\nmutation login_user($email: String!, $password: String!){\n  loginUser(loginInput:{\n      email:$email,\n      password:$password\n  }\n ){\n    user{\n      id\n    },\n    token,\n    redirectionUrl\n  }\n}\n`\n\nconst ADD_PARTNER_ACCOUNT = `\nmutation addPartner($partnerDetail: AddPartnerAccountInput!){\n  addPartnerAccount(addPartnerAccountInput:$partnerDetail){\n    message\n  }\n}\n`\n\nconst SAVE_UPDATED_CHECKLIST = `\nmutation addDesiredChecklistItemCount($registryId:Int!, $itemCountData:[DesiredItemCountInput]!){\n  addDesiredChecklistItemCount(registryId: $registryId, itemCountData: $itemCountData){\n    message\n  }\n}\n`\n\nconst UPDATE_REGISTRY_ITEMS = `\nmutation updateRegistryItem($itemId: Int!, $itemData: RegistryItemInput!){\n  updateRegistryItems(registryItemId: $itemId, registryItemData: $itemData) {\n    message\n  }\n}\n`\n\nconst SAVE_SINGLE_QUESTION_RESPONSE = `\nmutation updateOrCreateRegistrySingleQuestionOption($registryId:Int!, $registryQuestionOptionInput: RegistryQuestionOptionInput!, $returnTo: String){\n  updateOrCreateRegistrySingleQuestionOption(registryId: $registryId, registryQuestionOptionInput: $registryQuestionOptionInput, returnTo: $returnTo){\n    message,\n    redirectionUrl\n  }\n}\n`\n\nconst CREATE_REGISTRY = `\nmutation{\n  createRegistry{\n    registry{\n      id\n    },\n    message,\n    status\n  }\n}\n`\n\nconst TRACK_GIFTS_ADD_GIFT = `\nmutation addGift($registryId: Int!, $gifts: [GiftInput]){\n  addGift(registryId: $registryId, gifts: $gifts){\n   message,\n   status\n  }\n}\n`\n\nconst MARK_AS_PURCHASED_BY_GUEST = `\nmutation markAsPurchasedByGuest(\n  $registryUrlSlug: String!,\n  $registryItemId: Int!,\n  $isPurchased: Boolean!,\n  $storeName: String,\n  $purchasedQuantity: Int,\n  $contributionAmount: Float,\n  $name: String!,\n  $email: String!,\n  $giftMessage: String,\n  $orderNumber: String,\n  ){\n  markAsPurchasedByGuest(registryUrlSlug: $registryUrlSlug,registryItemId: $registryItemId ,purchasedRegistryItemInput:{\n    isPurchased: $isPurchased,\n    storeName: $storeName,\n    purchasedQuantity: $purchasedQuantity,\n    contributionAmount: $contributionAmount,\n    giftMessage: $giftMessage,\n    orderNo: $orderNumber,\n  },guestUserInput:{\n    name: $name,\n    email: $email\n  }){\n    message,\n    status\n  }\n}\n`;\n\nconst GIVE_GROUP_GIFT_GUEST = `\nmutation giveGroupGift(\n  $registryId: Int!,\n  $registryItemId: Int!,\n  $contributionAmount: Float!\n  ){\n  giveGroupGift(\n    registryId: $registryId,\n    registryItemId: $registryItemId,\n    contributionAmount: $contributionAmount\n    ){\n    message,\n    status,\n    variantId\n  }\n}\n`;\n\nconst CASH_FUND_GIFT_GUEST = `\nmutation cashFundGift(\n  $registryId: Int!,\n  $registryItemId: Int!,\n  $contributionAmount: Float!\n  ){\n    cashFundGift(\n    registryId: $registryId,\n    registryItemId: $registryItemId,\n    contributionAmount: $contributionAmount\n    ){\n    message,\n    status,\n    variantId\n  }\n}\n`;\n\nconst MARK_AS_PURCHASED = `\nmutation markAsPurchased($registryId: Int!, $registryItemId: Int!, $purchasedRegistryItemInput: PurchasedRegistryItemInput!, $guestUserInput: GuestUserInput!){\n  markAsPurchased(registryId:$registryId,registryItemId:$registryItemId,purchasedRegistryItemInput:$purchasedRegistryItemInput,guestUserInput:$guestUserInput){\n    message,\n    status\n  }\n}`;\n\nconst CASH_AND_LEAVE = `\nmutation cashInLieu(\n  $registryId: Int!,\n  $registryItemId: Int!,\n  $purchasedQuantity: Int!\n  ){\n    cashInLieu(\n    registryId: $registryId,\n    registryItemId: $registryItemId,\n    purchasedQuantity: $purchasedQuantity\n    ){\n    message,\n    status,\n    variantId\n  }\n}\n`;\n\nconst CASH_FUND_CONTRIBUTION_GUEST = `\nmutation cashFundContribution(\n  $registryUrlSlug: String!,\n  $registryItemId: Int!,\n  $isPurchased: Boolean!,\n  $contributionAmount: Float,\n  $name: String!,\n  $email: String!,\n  $giftMessage: String,\n  ){\n    cashFundContribution(registryUrlSlug: $registryUrlSlug,registryItemId: $registryItemId ,cashFundContributionInput:{\n    isPurchased: $isPurchased,\n    contributionAmount: $contributionAmount,\n    giftMessage: $giftMessage,\n  },guestUserInput:{\n    name: $name,\n    email: $email\n  }){\n    message,\n    status\n  }\n}\n`;\n\nconst RESERVE_REGISTRY_ITEM_GUEST = `\nmutation reserveRegistryItem(\n  $registryId: Int!,\n  $registryItemId: Int!,\n  $isReserved: Boolean!,\n  $isPurchased: Boolean!,\n  $purchasedQuantity: Int,\n  $name: String!,\n  $email: String!,\n  ){\n    reserveRegistryItem(registryId: $registryId,registryItemId: $registryItemId ,reservedRegistryItemInput:{\n    isReserved: $isReserved,\n    isPurchased: $isPurchased,\n    purchasedQuantity: $purchasedQuantity,\n  },\n    firstName: $name,\n    email: $email\n  ){\n    message,\n    status\n  }\n}\n`;\n\nconst REMOVE_RESERVED_ITEM_GUEST = `\nmutation removeReservedRegistryItem(\n  $registryId: Int!,\n  $registryItemId: Int!,\n  $email: String!\n  ){\n    removeReservedRegistryItem(\n    registryId: $registryId,\n    registryItemId: $registryItemId,\n    email: $email\n    ){\n    message,\n    status,\n  }\n}\n`;\n\n\nexport {\n  TOGGLE_MUST_HAVE,\n  ADD_REGISTRY_ITEM,\n  UPDATE_REGISTRY,\n  UPDATE_VIEW_REGISTRY_POISTION,\n  UPDATE_REGISTRY_URL,\n  SAVE_REGISTRY_DATA,\n  REGISTER_USER,\n  SAVE_QUESTION_RESPONSE,\n  LOGIN_USER,\n  SAVE_UPDATED_CHECKLIST,\n  UPDATE_REGISTRY_ITEMS,\n  ADD_PARTNER_ACCOUNT,\n  SAVE_SINGLE_QUESTION_RESPONSE,\n  CREATE_REGISTRY,\n  TRACK_GIFTS_ADD_GIFT,\n  MARK_AS_PURCHASED_BY_GUEST,\n  GIVE_GROUP_GIFT_GUEST,\n  CASH_FUND_GIFT_GUEST,\n  MARK_AS_PURCHASED,\n  CASH_AND_LEAVE,\n  CASH_FUND_CONTRIBUTION_GUEST,\n  RESERVE_REGISTRY_ITEM_GUEST,\n  REMOVE_RESERVED_ITEM_GUEST,\n};\n","import React from \"react\";\nimport \"./GiftCardPill.scss\";\n\nconst GiftCardPill = (props) => {\n  let className = \"\"\n  let text = \"\"\n  switch (props.variant) {\n    case \"purchased\":\n      className = \"track-gifts-purchased-pill\"\n      text = \"Purchased\"\n      break\n    case \"reserved\":\n      className = \"track-gifts-reserved-pill\"\n      text = \"Reserved\"\n      break\n    case \"received\":\n      className = \"track-gifts-received-pill\"\n      text = \"Received\"\n      break\n    default:\n      className = \"\"\n      break\n  }\n\n  return (\n    <div className={[\"track-gifts-pills px-2 d-inline-block\", className, props.className ? props.className : ''].join(\" \")}>\n      <span className=\"text-sm font-medium\">{props.amount != null || undefined ? `$${props.amount}` : null} {text}</span>\n    </div>\n  )\n}\n\nexport default GiftCardPill","import React from 'react';\nimport \"./ButtonComponent.scss\";\n\nconst ButtonComponent = React.forwardRef((props, ref) => {\n  let btnVariantClass = \"\"\n  if (props.variant === 'primary') {\n    btnVariantClass = \"m-a-primary-btn\";\n  } else if (props.variant === 'secondary') {\n    btnVariantClass = \"m-a-secondary-btn\";\n  }\n\n  return <button\n    className={[\"m-a-btn\", btnVariantClass, props.className].join(\" \")}\n    onClick={props.onClick}\n    ref={ref}\n    disabled={props.disabled ? props.disabled : false}\n  >{props.children}</button>\n})\n\nexport default ButtonComponent;","import React from \"react\";\nimport \"./GiftStatusPill.scss\";\n\nconst GiftStatusPill = (props) => {\n  let pillVariantClass = \"\"\n\n  if (props.variant === 'purchased') {\n    pillVariantClass = \"purchased-pill\";\n  } else if (props.variant === 'reserved') {\n    pillVariantClass = \"reserved-pill\";\n  } else if (props.variant === 'group-gift') {\n    pillVariantClass = \"group-gift-pill\";\n  } else if (props.variant === 'default') {\n    //  Default is still needed\n    pillVariantClass = \"default-pill\";\n  } else {\n    pillVariantClass = \"default-pill\";\n  }\n\n  return (\n    <div\n      className={[\"gift-status-pill\", props.variant === 'group-gift' ? \"pl-5 pr-2\":\"px-3\", pillVariantClass, props.className ? props.className : \"\"].join(\" \")}>\n      <span className=\"text-sm font-medium\">{props.text}</span>\n    </div>\n  )\n}\n\nexport default GiftStatusPill;","import React from \"react\";\nimport './ProductDetailsModel.scss';\nimport GiftStatusPill from '../gift-status-pill/GiftStatusPill'\n\nconst ProductDetailsModel = (props) => {\n  return (\n    <div className=\"row product-details-model\">\n      <div className=\"col-12 product-details-image\">\n        {props.data?.item.imageUrl ?\n          <img className=\"product-img d-block mx-auto\" src={props.data?.item.imageUrl} alt={props.data?.title} />\n          :\n          <div className=\"added-card-no-product-image\" />\n        }\n        {props.data.mostWanted ?\n          <div\n            className=\"d-flex align-items-center product-details-have product-details-must-have-btn px-1 added-gift-must-have-active\">\n            <i className=\"icon mr-1 d-block heart-fill\" />\n            <p className=\"text-sm product-details-must-have-text\">Must Have</p>\n          </div>\n          : <></>}\n        <div className=\"px-3 mt-2\">\n          <p className=\"font-medium\">{props.data.title}</p>\n          <a className=\"product-detail-link text-sm font-medium mt-1\" href={props.data.item.storeItemUrl} target=\"_blank\">View Details</a>\n          <div className=\"d-flex align-items-baseline give-gift-model\">\n            {props.data.isGroupGift ?\n              <div className=\"guest-toggle-pills px-1 mr-1 d-flex align-items-center\">\n                <i className=\"guest-icon-active mr-1\" />\n                <span className=\"text-sm guest-icon-text\">Group Gift</span>\n              </div> : null}\n            <p className=\"mt-2\">${props.data.item.price}</p>\n          </div>\n          {props.data.note ?\n            <>\n              <p className=\"mt-2 text-sm product-note font-medium\">Note:</p>\n              <p className=\"text-sm product-note\">{props.data.note}</p>\n            </>\n            : null}\n          <div className=\"d-flex mt-2 mb-3 flex-wrap align-items-end\">\n            {props.data.quantityStatus.purchased_quantity ?\n              <div>\n                <GiftStatusPill className=\"mr-1\" variant=\"purchased\" text={props.data.quantityStatus.purchased_quantity + \" Purchased\"} />\n              </div>\n              : null}\n            {props.data.quantityStatus.reserved_quantity ?\n              <div className=\"mr-1 mt-md-1 mt-lg-0\">\n                <GiftStatusPill variant=\"reserved\" text={props.data.quantityStatus.reserved_quantity + \" Reserved\"} />\n              </div>\n              : null}\n            {props.data.quantityStatus.still_needed ?\n              <div className=\"mr-1 mt-md-1 mt-lg-1\">\n                <GiftStatusPill variant=\"default\" text={`${props.data.quantityStatus.still_needed} ${props.data.quantityStatus.purchased_quantity === 0 ? \" Requested\" : \" Still Needed\"}`} />\n              </div>\n              : null}\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default ProductDetailsModel;","import React from \"react\";\nimport \"./BuyNow.scss\";\nimport Button from \"../../../commons/components/button-component/ButtonComponent\";\nimport {LOCAL_STORAGE_TRACK_GIFT_BUY_KEY} from \"../../../../utils/constants\";\nimport {connect} from \"react-redux\";\nimport {setTrackGiftsRedirectionInfo} from \"../../TrackGiftsAction\";\nimport Modal from \"../../../commons/components/modal-component/ModalComponent\";\nimport ProductDetailsModel from \"../../../commons/components/product-details-model/ProductDetailsModel\";\nimport Counter from \"../../../commons/components/counter/Counter\";\nimport {toast} from \"react-toastify\";\n\nconst EMAIL_RE = /^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$/g\n\nclass BuyNow extends React.Component {\n\n  state = {\n    show: false,\n    quantity: 1,\n    storeName: \"\",\n    orderNumber: \"\",\n    guestName: \"\",\n    guestEmail: \"\",\n    errors: {}\n  }\n\n  modalCloseHandler = () => {\n    this.setState({\n      show: false\n    })\n  }\n\n  incrementQuantity = () => {\n    this.setState((prevState, _) => ({\n      quantity: prevState.quantity + 1\n    }))\n  }\n\n  decrementQuantity = () => {\n    this.setState((prevState, _) => ({\n      quantity: prevState.quantity - 1 > 0 ? prevState.quantity - 1 : 1\n    }))\n  }\n\n  storeNameChangeHandler = ev => {\n    this.setState({\n      storeName: ev.target.value\n    })\n  }\n\n  orderNumberChangeHandler = ev => {\n    this.setState({\n      orderNumber: ev.target.value\n    })\n  }\n\n  guestNameChangeHandler = ev => {\n    let errorState = {...this.state.errors}\n    if (this.state.errors.guestName){\n      delete errorState.guestName\n    }\n\n    this.setState({\n      guestName: ev.target.value,\n      errors: errorState\n    })\n  }\n\n  guestEmailChangeHandler = ev => {\n    let errorState = {...this.state.errors}\n    if (this.state.errors.guestEmail){\n      delete errorState.guestEmail\n    }\n    this.setState({\n      guestEmail: ev.target.value,\n      errors: errorState\n    })\n  }\n\n  validData = () => {\n    let errors = {}\n    let valid = true\n    if (this.state.guestName.length <= 0){\n      errors['guestName'] = \"This field is mandatory\"\n      valid = false\n    }\n\n    if (this.state.guestEmail.length <= 0){\n      errors['guestEmail'] = \"This field is mandatory\"\n      valid = false\n    } else if (!this.state.guestEmail.match(EMAIL_RE)){\n        errors['guestEmail'] = \"Invalid Email address\"\n        valid = false\n    }\n\n    this.setState({\n      errors: errors\n    })\n    return valid\n  }\n\n  saveClickHandler = () => {\n    if (this.validData()) {\n      return false\n    }\n\n    //  TODO: Integrate Buy Now API\n  }\n\n  buyNowClickHandler = () => {\n    let createNewRecord = false\n    let updateProduct = false\n    let openModal = false\n    let jsonVisitedItems = JSON.parse(localStorage.getItem(LOCAL_STORAGE_TRACK_GIFT_BUY_KEY))\n\n    if (jsonVisitedItems) {\n      for (let item of jsonVisitedItems) {\n\n        // If registry doesn't match then delete old and create new record\n        if (Number(item.rId) === Number(this.props.stateRegistryInfo.id)) {\n          if (Number(item.pId) === Number(this.props.productData.id)) {\n\n            let productTimestamp = new Date(item.timestamp)\n            let currentDate = new Date()\n\n            // Resetting hours because only checking the dates\n            productTimestamp.setHours(0, 0, 0, 0)\n            currentDate.setHours(0, 0, 0, 0)\n\n            // Checking if current date is same as product time stamp\n            // After 1 day, this product entry will be invalid\n            if (currentDate - productTimestamp === 0) {\n              openModal = true\n            } else {\n              updateProduct = true;\n              createNewRecord = true;\n            }\n            break;\n          } else {\n            updateProduct = true;\n            createNewRecord = true;\n          }\n        } else {\n          createNewRecord = true;\n          break;\n        }\n      }\n    } else {\n      createNewRecord = true;\n    }\n\n    if (createNewRecord && !openModal) {\n      const newVisitedItemsData = {\n        rId: this.props.stateRegistryInfo.id,\n        pId: this.props.productData.id,\n        timestamp: new Date()\n      }\n\n      let foundProduct = false\n      let newData = null\n      if (jsonVisitedItems) {\n        newData = jsonVisitedItems.map(item => {\n          if (Number(item.rId) === Number(this.props.stateRegistryInfo.id) && Number(item.pId) === Number(this.props.productData.id)) {\n            foundProduct = true\n            return newVisitedItemsData\n          }\n          return item\n        })\n        if (!foundProduct) {\n          newData.push(newVisitedItemsData)\n        }\n      }\n\n      // Updating localStorage\n      localStorage.setItem(LOCAL_STORAGE_TRACK_GIFT_BUY_KEY, JSON.stringify(updateProduct ? newData : [newVisitedItemsData]))\n\n      //Setting Redirection Store\n      this.props.dispatch(setTrackGiftsRedirectionInfo({store: this.props.productData.item?.store?.storeName}))\n\n      window.open(this.props.productData.item.storeItemUrl, \"_blank\")\n\n    } else {\n      this.setState({\n        show: true\n      })\n    }\n  }\n\n  render() {\n    return (\n      <>\n        <div className={[\"track-gifts-buy-now\", this.props.className ? this.props.className : \"\"].join(\" \")}>\n          <Button\n            variant=\"primary\"\n            onClick={this.buyNowClickHandler}\n            className=\"px-3 py-1 font-medium text-body track-gifts-buy-now-button\"\n          >Buy Now</Button>\n        </div>\n        {this.state.show ?\n          <Modal\n            show={this.state.show}\n            title=\"Buy Now\"\n            footer={\n              <Button\n                variant=\"primary\"\n                onClick={this.saveClickHandler}\n                className=\"text-body font-medium py-1 px-3 track-gifts-buy-now-modal-button\"\n              >Save & Close</Button>\n            }\n            closeModal={this.modalCloseHandler}>\n            <div className=\"track-gifts-buy-now-modal\">\n              <div className=\"row\">\n\n                <div className=\"col-12 col-md-5 track-gifts-buy-now-product-detail\">\n                  <div className=\"mr-3\">\n                    <ProductDetailsModel data={this.props.productData}/>\n                  </div>\n                </div>\n\n                <div className=\"col-12 col-md-7\">\n                  <div className=\"ml-3 mr-5 pt-4\">\n\n                    <div className=\"row\">\n                      <div className=\"col\">\n                        <p className=\"text-body font-medium\">Give us some more details please</p>\n                        <p className=\"text-sm\">This info will help keep track of all their gifts.</p>\n                      </div>\n                    </div>\n\n                    <div className=\"row mt-4\">\n                      <div className=\"col\">\n                        <div className=\"track-gifts-buy-now-modal-input-container\">\n                          <label className=\"track-gifts-buy-now-label text-sm track-gifts-buy-now-required\">Name</label>\n                          <input\n                            type=\"text\"\n                            name=\"name\"\n                            value={this.state.guestName}\n                            onChange={(ev) => this.guestNameChangeHandler(ev)}\n                            className={[\"px-2 py-1 text-body track-gifts-buy-now-input w-100 mw-100\", this.state.errors.guestName ? 'track-gifts-buy-now-input-error' : ''].join(\" \")}\n                            placeholder=\"John Doe\"/>\n                          {this.state.errors.guestName ?\n                            <label\n                              className=\"text-sm track-gifts-buy-now-input-error-text\">{this.state.errors.guestName}</label>\n                            : null}\n                        </div>\n                      </div>\n                    </div>\n\n                    <div className=\"row mt-4\">\n                      <div className=\"col\">\n                        <div className=\"track-gifts-buy-now-modal-input-container\">\n                          <label className=\"track-gifts-buy-now-label text-sm track-gifts-buy-now-required\">Email\n                            Address</label>\n                          <input\n                            type=\"text\"\n                            name=\"user-email\"\n                            value={this.state.guestEmail}\n                            onChange={(ev) => this.guestEmailChangeHandler(ev)}\n                            className={[\"px-2 py-1 text-body track-gifts-buy-now-input w-100 mw-100\", this.state.errors.guestEmail ? 'track-gifts-buy-now-input-error' : ''].join(\" \")}\n                            placeholder=\"johndoe@email.com\"/>\n                            {this.state.errors.guestEmail ?\n                            <label\n                              className=\"text-sm track-gifts-buy-now-input-error-text\">{this.state.errors.guestEmail}</label>\n                            : null}\n                        </div>\n                      </div>\n                    </div>\n\n                    <div className=\"row mt-4\">\n                      <div className=\"col\">\n                        <div className=\"track-gifts-buy-now-modal-input-container\">\n                          <label className=\"track-gifts-buy-now-label text-sm\">Quantity</label>\n                          <Counter\n                            className=\"mt-1\"\n                            counter={this.state.quantity}\n                            incrementHandler={this.incrementQuantity}\n                            decrementHandler={this.decrementQuantity}/>\n                        </div>\n                      </div>\n                    </div>\n\n                    <div className=\"row mt-4\">\n                      <div className=\"col-6\">\n                        <div className=\"track-gifts-buy-now-modal-input-container\">\n                          <label className=\"track-gifts-buy-now-label text-sm\">Store Name</label>\n                          <input\n                            type=\"text\"\n                            name=\"storeName\"\n                            value={this.state.storeName}\n                            onChange={(ev) => this.storeNameChangeHandler(ev)}\n                            className=\"px-2 py-1 text-body track-gifts-buy-now-input w-100 mw-100\"\n                            placeholder=\"Eg. Target\"/>\n                        </div>\n                      </div>\n                      <div className=\"col-6\">\n                        <div className=\"track-gifts-buy-now-modal-input-container\">\n                          <label className=\"track-gifts-buy-now-label text-sm\">Order Number</label>\n                          <input\n                            type=\"text\"\n                            name=\"orderNumber\"\n                            value={this.state.orderNumber}\n                            onChange={(ev) => this.orderNumberChangeHandler(ev)}\n                            className=\"px-2 py-1 text-body track-gifts-buy-now-input w-100 mw-100\"\n                            placeholder=\"0012345\"/>\n                        </div>\n                      </div>\n                    </div>\n\n                  </div>\n                </div>\n\n              </div>\n            </div>\n          </Modal>\n          : null}\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  stateRegistryInfo: state.registry.info\n})\n\nexport default connect(\n  mapStateToProps\n)(BuyNow);","import React from \"react\";\nimport \"./MarkAsPurchased.scss\";\nimport {connect} from 'react-redux';\nimport Modal from \"../modal-component/ModalComponent\";\nimport ProductDetailsModel from \"../product-details-model/ProductDetailsModel\";\nimport Counter from \"../counter/Counter\";\nimport Button from \"../button-component/ButtonComponent\";\nimport {MARK_AS_PURCHASED} from \"../../../../api/mutations\";\nimport {graphQL} from \"../../../../api/axios\";\nimport {toast} from \"react-toastify\";\nimport {getTrackGiftsProduct, getCategories, getProducts} from \"../../../../utils/commonFunction\";\n\nconst EMAIL_RE = /^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$/g\n\nclass MarkAsPurchased extends React.Component {\n  state = {\n    quantity: 1,\n    name: \"\",\n    email: \"\",\n    storeName: \"\",\n    orderNumber: \"\",\n    note: \"\",\n    errors: {},\n    contributionAmount: 0.00\n  }\n\n  closeModalHandler = () => {\n    this.setState({\n      quantity: 1,\n      name: \"\",\n      email: \"\",\n      storeName: \"\",\n      orderNumber: \"\",\n      note: \"\",\n      errors: {},\n      contributionAmount: 0.00\n    })\n    this.props.closeModal()\n  }\n\n  incrementQuantity = () => {\n    this.setState((prevState, _) => ({\n      quantity: prevState.quantity + 1 > this.props.data.quantityStatus.still_needed ? prevState.quantity : prevState.quantity + 1\n    }))\n  }\n\n  decrementQuantity = () => {\n    this.setState((prevState, _) => ({\n      quantity: prevState.quantity - 1 > 0 ? prevState.quantity - 1 : 1\n    }))\n  }\n\n  validData = () => {\n    let errors = {}\n    let valid = true\n    if (this.state.name.length <= 0) {\n      errors['name'] = \"This field is mandatory\"\n      valid = false\n    }\n\n    if (this.state.email.length <= 0) {\n      errors['email'] = \"This field is mandatory\"\n      valid = false\n    } else if (!this.state.email.match(EMAIL_RE)) {\n      errors['email'] = \"Invalid Email address\"\n      valid = false\n    }\n\n    if (this.props.data.isGroupGift) {\n      if (this.state.contributionAmount.length <= 0) {\n        errors['contributionAmount'] = \"This field is mandatory\"\n        valid = false\n      } else if (Number(this.state.contributionAmount) <= 0) {\n        errors['contributionAmount'] = \"Please enter valid amount\"\n        valid = false\n      } else if(Number(this.state.contributionAmount) > this.props.data.item.price){\n        errors['contributionAmount'] = \"Cannot contribute more than gift amount.\"\n        valid = false\n      }\n    }\n\n    this.setState({\n      errors: errors\n    })\n    return valid\n  }\n\n  // Event Handlers\n  nameChangeHandler = (ev) => {\n    let errors = {...this.state.errors}\n    if (errors.name) {\n      delete errors.name\n    }\n\n    this.setState({\n      name: ev.target.value,\n      errors: errors\n    })\n  }\n\n  emailChangeHandler = (ev) => {\n    let errors = {...this.state.errors}\n    if (errors.email) {\n      delete errors.email\n    }\n\n    this.setState({\n      email: ev.target.value,\n      errors: errors\n    })\n  }\n\n  storeNameChangeHandler = (ev) => {\n    this.setState({\n      storeName: ev.target.value\n    })\n  }\n\n  orderNumberChangeHandler = (ev) => {\n    this.setState({\n      orderNumber: ev.target.value\n    })\n  }\n\n  noteChangeHandler = (ev) => {\n    this.setState({\n      note: ev.target.value\n    })\n  }\n\n  contributionAmountChangeHandler = (ev) => {\n    ev.persist();\n    let errors = {...this.state.errors}\n    if (errors.contributionAmount) {\n      delete errors.contributionAmount\n    }\n\n\n    if (ev.target.value.length > 0) {\n      const newPrice = Number(ev.target.value);\n\n      if (newPrice >= 0) {\n        this.setState({\n          contributionAmount: ev.target.value,\n          errors: errors\n        })\n      }\n    } else {\n      this.setState({\n        contributionAmount: \"\",\n        errors: errors\n      })\n    }\n  }\n\n  saveClickHandler = () => {\n    if (!this.validData()) {\n      return false\n    }\n\n    let reqData = {\n      query: MARK_AS_PURCHASED,\n      variables: {\n        registryId: this.props.stateRegistryInfo.id,\n        registryItemId: this.props.data.id,\n        purchasedRegistryItemInput: {\n          isPurchased: true,\n          storeName: this.state.storeName,\n          orderNo: this.state.orderNumber,\n          giftMessage: this.state.note\n        },\n        guestUserInput: {\n          name: this.state.name,\n          email: this.state.email\n        }\n      }\n    }\n\n    if (this.props.data.isGroupGift) {\n      reqData.variables.purchasedRegistryItemInput['contributionAmount'] = this.state.contributionAmount\n    } else {\n      reqData.variables.purchasedRegistryItemInput['purchasedQuantity'] = this.state.quantity\n    }\n\n    graphQL(reqData).then(res => {\n      if (res.data.data && res.data.data.markAsPurchased) {\n        toast.success(<p><b>{this.props.data.title}</b> updated successfully.</p>)\n\n        //Fetching all current products\n        getTrackGiftsProduct(true, this.props.stateTrackGiftsFilters, this.props.stateTrackGiftsProducts, this.props.stateTrackGiftsPagination, this.props.stateTrackGiftsView, this.props.stateRegistryInfo, this.props.stateTrackGiftsSearch, this.props.dispatch, this.props.stateTrackGiftsProducts.length)\n        getCategories(this.props.stateRegistryInfo.id, this.props.dispatch)\n        getProducts(this.props.stateRegistryInfo.id, this.props.dispatch)\n        this.closeModalHandler()\n      }\n    }).catch(err => {\n      toast.error(\"Some error occurred while updating product.\")\n      console.error(err.response);\n    })\n  }\n\n  render() {\n    return (\n      <>\n        <Modal\n          show={this.props.show}\n          title={this.props.data.isGroupGift ? \"Record a contribution\" : \"Record a purchase\"}\n          footer={(\n            <Button\n              variant=\"primary\"\n              disabled={this.state.name.length <= 0 || this.state.email.length <= 0}\n              onClick={this.saveClickHandler}\n              className=\"font-medium text-body px-3 py-1\">Save & Close</Button>\n          )}\n          closeModal={this.closeModalHandler}>\n\n          <div className=\"row add-gift-another-store mark-as-purchased-modal\">\n            <div className=\"col-12 col-md-5 mt-4 add-gift-image-select\">\n              <div className=\"mr-3\">\n                <ProductDetailsModel data={this.props.data}/>\n              </div>\n            </div>\n            <div className=\"col-12 col-md-7 mt-4\">\n              <div className=\"mx-3\">\n\n                <div className=\"row\">\n                  <div className=\"col\">\n                    <p className=\"text-body font-medium\">Already got it?</p>\n                    <p className=\"text-sm\">Let guests know, so you dont get another.</p>\n                  </div>\n                </div>\n\n                <div className=\"row\">\n                  <div className=\"col mt-4 m-a-input-container\">\n                    <p className=\"text-sm font-medium add-gift-store-label ma-input-required\">Name</p>\n                    <input\n                      className={[\"w-100 mt-1 px-2 py-1 mb-0\", this.state.errors.name ? \"mark-as-purchased-error\" : \"\"].join(\" \")}\n                      type='text'\n                      placeholder='John Doe'\n                      value={this.state.name}\n                      onChange={(ev) => this.nameChangeHandler(ev)}\n                    />\n                    {this.state.errors.name ?\n                      <label className=\"text-sm mark-as-purchased-error-text\">{this.state.errors.name}</label>\n                      : null}\n                  </div>\n                </div>\n\n                <div className=\"row\">\n                  <div className=\"col mt-4 m-a-input-container\">\n                    <p className=\"text-sm font-medium add-gift-store-label ma-input-required\">Email Address</p>\n                    <input\n                      className={[\"w-100 mt-1 px-2 py-1 mb-0\", this.state.errors.email ? \"mark-as-purchased-error\" : \"\"].join(\" \")}\n                      type='text'\n                      placeholder='johndoe@email.com'\n                      value={this.state.email}\n                      onChange={(ev) => this.emailChangeHandler(ev)}\n                    />\n                    {this.state.errors.email ?\n                      <label className=\"text-sm mark-as-purchased-error-text\">{this.state.errors.email}</label>\n                      : null}\n                  </div>\n                </div>\n\n                {this.props.data.isGroupGift ?\n                  <div className=\"row\">\n                    <div className=\"col mt-4 m-a-input-container\">\n                      <p className=\"text-sm font-medium add-gift-store-label\">Amount</p>\n                      <div className=\"price-input mt-1\">\n                        <input\n                          type=\"text\"\n                          className={[\"w-100 pr-2 py-1 text-body pl-5 mb-0\", this.state.errors.contributionAmount ? \"mark-as-purchased-error\" : \"\"].join(\" \")}\n                          value={this.state.contributionAmount}\n                          onChange={(ev) => this.contributionAmountChangeHandler(ev)}\n                        />\n                      </div>\n                      {this.state.errors.contributionAmount ?\n                        <label\n                          className=\"text-sm mark-as-purchased-error-text\">{this.state.errors.contributionAmount}</label>\n                        : null}\n                    </div>\n                  </div>\n                  :\n                  <>\n                    <div className=\"row\">\n                      <div className=\"col mt-4 m-a-input-container\">\n                        <p className=\"text-sm font-medium add-gift-store-label\">Quantity</p>\n                        <Counter\n                          className=\"mt-2\"\n                          counter={this.state.quantity}\n                          incrementHandler={this.incrementQuantity}\n                          decrementHandler={this.decrementQuantity}\n                        />\n                      </div>\n                    </div>\n\n                    <div className=\"row\">\n                      <div className=\"col-6 mt-4 m-a-input-container\">\n                        <p className=\"text-sm font-medium add-gift-store-label\">Store Name</p>\n                        <input\n                          className=\"w-100 mt-1 px-2 py-1 mb-0\"\n                          type='text'\n                          placeholder='Eg. Target'\n                          value={this.state.storeName}\n                          onChange={(ev) => this.storeNameChangeHandler(ev)}\n                        />\n                      </div>\n                      <div className=\"col-6 mt-4 m-a-input-container\">\n                        <p className=\"text-sm font-medium add-gift-store-label\">Order Number</p>\n                        <input\n                          className=\"w-100 mt-1 px-2 py-1 mb-0\"\n                          type='text'\n                          placeholder='0012345'\n                          value={this.state.orderNumber}\n                          onChange={(ev) => this.orderNumberChangeHandler(ev)}\n                        />\n                      </div>\n                    </div>\n                  </>\n                }\n\n\n                <div className=\"row\">\n                  <div className=\"col mt-4 m-a-input-container\">\n                    <p className=\"text-sm font-medium add-gift-store-label\">Gift Message</p>\n                    <textarea className=\"w-100 mt-1 text-body p-1 mb-2 mark-as-purchased-resize-textarea\"\n                              rows=\"2\"\n                              placeholder=\"Write a message for gift receiver\"\n                              value={this.state.note}\n                              onChange={(ev) => this.noteChangeHandler(ev)}\n                    />\n                  </div>\n                </div>\n\n              </div>\n            </div>\n          </div>\n\n        </Modal>\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  stateTrackGiftsFilters: state.trackGifts.filters,\n  stateTrackGiftsView: state.trackGifts.activeView,\n  stateTrackGiftsProducts: state.trackGifts.products,\n  stateTrackGiftsPagination: state.trackGifts.paginationInfo,\n  stateRegistryInfo: state.registry.info,\n  stateTrackGiftsSearch: state.trackGifts.search\n})\n\nexport default connect(\n  mapStateToProps\n)(MarkAsPurchased);","import React from \"react\";\nimport \"./MarkPurchased.scss\";\nimport MarkAsPurchased from \"../../../commons/components/mark-as-purchased/MarkAsPurchased\";\n\nclass MarkPurchased extends React.Component{\n  state = {\n    show: false\n  }\n\n  modalCloseHandler = () => {\n    this.setState({\n      show: false\n    })\n  }\n\n  openPurchasedModal = (ev) => {\n    ev.preventDefault();\n    this.setState({\n      show: true\n    })\n  }\n\n  render() {\n    return (\n      <div>\n        <a\n          href=\"#\"\n          className=\"mark-purchased-link font-medium text-sm\"\n          onClick={(ev) => this.openPurchasedModal(ev)}>Record A Purchase</a>\n        <MarkAsPurchased\n          show={this.state.show}\n          closeModal={this.modalCloseHandler}\n          data={this.props.data}\n        />\n      </div>\n    );\n  }\n}\n\nexport default MarkPurchased;","import React from \"react\";\nimport \"./GiftCard.scss\";\nimport GiftCardPill from \"../gift-card-pill/GiftCardPill\";\nimport {CURRENCY} from \"../../../../utils/constants\";\nimport BuyNow from \"../buy-now/BuyNow\";\nimport MarkPurchased from \"../mark-purchased/MarkPurchased\";\nimport moment from 'moment';\nimport Modal from \"../../../commons/components/modal-component/ModalComponent\";\n\nclass GiftCard extends React.Component {\n  friendsDetailRef = React.createRef()\n\n  state = {\n    toggleGiftModalHandler: false,\n    toggleFriendsDetialsModalHandler: false\n  }\n\n  toggleFriendsDetail = e => {\n    e.preventDefault()\n    if (this.friendsDetailRef.current) {\n      this.friendsDetailRef.current.classList.toggle(\"track-gifts-show-friends-detail\")\n    }\n  }\n\n  giftModalCloseHandler = () => {\n    this.setState({toggleGiftModalHandler: false})\n  }\n\n  giftModalOpenHandler = () => {\n    this.setState({toggleGiftModalHandler: true})\n  }\n\n  friendsDetailsOpenModalHandler = () => {\n    this.setState({toggleFriendsDetialsModalHandler: true})\n  }\n\n  friendsDetailsCloseModalHandler = () => {\n    this.setState({toggleFriendsDetialsModalHandler: false})\n  }\n\n  render() {\n    return (\n      <div className=\"baby-registry-track-gifts-card pt-3 pb-2 pb-md-4\">\n        <div className=\"row\">\n\n          <div className=\"col-5 col-sm-3 col-md-1\">\n            {this.props.data.item.imageUrl ?\n              <img src={this.props.data.item.imageUrl} className=\"track-gifts-card-image\" />\n              :\n              <div className=\"track-gifts-no-product-image\" />\n            }\n          </div>\n\n          <div className=\"col-12 col-md-5 my-3\">\n            <div className=\"track-gifts-product-description pl-1\">\n              <div className=\"d-flex\">\n                <h4\n                  className={[\"font-medium track-gifts-product-title\", !this.props.data.isGroupGift && this.props.data.purchasedRegistryItem.length > 0 && this.props.data.purchasedRegistryItem[0].giftMessage && this.props.data.purchasedRegistryItem[0].guestUser ? \"mr-5\" : \"mr-9\"].join(\" \")}>\n                  {this.props.data.title}\n                </h4>\n                {!this.props.data.isGroupGift && this.props.data.purchasedRegistryItem.length > 0 && this.props.data.purchasedRegistryItem[0].giftMessage && this.props.data.purchasedRegistryItem[0].guestUser ?\n                  <button className=\"ml-auto track-gifts-gift-message-container d-none d-md-inline-block text-left\">\n                    <div className=\"track-gifts-gift-message-content p-5\">\n                      <h3>Gift Message</h3>\n                      <p\n                        className=\"text-body mt-5 track-gifts-gift-message\">{this.props.data.purchasedRegistryItem[0].giftMessage}</p>\n                      <p\n                        className=\"mt-3 text-sm font-medium\">{`${this.props.data.purchasedRegistryItem[0].guestUser.firstName} ${this.props.data.purchasedRegistryItem[0].guestUser.lastName ? `${this.props.data.purchasedRegistryItem[0].guestUser.lastName[0]}.` : ''}`}</p>\n                    </div>\n                  </button>\n                  : null}\n\n\n              </div>\n              {this.props.data.purchasedRegistryItem.length > 0 && (this.props.data.purchasedRegistryItem[0].storeName || this.props.data.purchasedRegistryItem[0].orderNo) ?\n                <p\n                  className=\"text-body\">{this.props.data.purchasedRegistryItem[0].storeName ? this.props.data.purchasedRegistryItem[0].storeName : ''} {this.props.data.purchasedRegistryItem[0].orderNo ? '| #' + this.props.data.purchasedRegistryItem[0].orderNo : ''}</p>\n                : null}\n\n              {this.props.data.item.isCashFund ?\n                <div className=\"mt-2\">\n                  {this.props.data.purchasedRegistryItem.length > 0 ?\n                    <div>\n                      <span\n                        className=\"text-sm font-medium\">{`${CURRENCY}${this.props.data.purchasedRegistryItem[0].groupGift.amountReceived}`}</span>\n                      <span className=\"text-sm\">{` of ${CURRENCY}${this.props.data.item.price} received`}</span>\n                      <div className=\"track-gifts-cash-fund-progress-bar\">\n                        <div className=\"track-gifts-cash-fund-progress mw-100\"\n                          style={{width: `${(this.props.data.purchasedRegistryItem[0].groupGift.amountReceived / this.props.data.item.price) * 100}%`}} />\n                      </div>\n                    </div>\n                    : null}\n\n                </div>\n                :\n                <div className=\"mt-1 mt-md-2\">\n                  {this.props.data.purchasedRegistryItem.length > 0 && this.props.data.purchasedRegistryItem[0].isPurchased ? <GiftCardPill variant=\"purchased\" className=\"mr-1\" /> : null}\n                  {this.props.data.isReserved ? <GiftCardPill variant=\"reserved\" className=\"mr-1\" /> : null}\n                  {this.props.data.isCashAcceptedOnly && this.props.data.isAmountReceived ?\n                    <GiftCardPill variant=\"received\" amount={this.props.data.item.price} /> : null}\n                  {/* TODO: Add date of purchased */}\n                  {this.props.data.purchasedRegistryItem.length > 0 && this.props.data.purchasedRegistryItem[0].createdTs ?\n                    <span\n                      className=\"text-sm track-gifts-purchased-time\">{moment(this.props.data.purchasedRegistryItem[0].createdTs).format('MMM DD, YYYY')}</span>\n                    : null}\n                </div>\n              }\n\n\n            </div>\n          </div>\n\n          <div className=\"col-12 col-md-6 d-flex flex-md-row flex-column\">\n            {this.props.data.isGroupGift ?\n              // Group Gift\n\n              (this.props.data.purchasedRegistryItem.length > 0 ?\n                <div className=\"track-gifts-group-users-details \">\n                  <p\n                    className=\"text-sm font-medium\">{`${this.props.data.purchasedRegistryItem[0].otherUsers.length} friends`}</p>\n                  <a href=\"#\" className=\"track-gifts-view-friends-link text-sm d-none d-md-inline-block font-medium\"\n                    onClick={(e) => this.toggleFriendsDetail(e)}>View</a>\n                  <a href=\"#\" className=\"track-gifts-view-friends-link text-sm d-inline-block d-md-none font-medium\"\n                    onClick={this.friendsDetailsOpenModalHandler}>View</a>\n                  <div ref={this.friendsDetailRef} className=\"track-gifts-friends-detail pt-3 pb-1\">\n                    <div className=\"friends-detail-header d-flex pb-2 px-3\">\n                      <p\n                        className=\"text-sm font-medium\">{`${this.props.data.purchasedRegistryItem[0].otherUsers.length} friends`}</p>\n                      <i className=\"icon-close close-friends-detail-icon ml-auto\"\n                        onClick={(e) => this.toggleFriendsDetail(e)} />\n                    </div>\n                    <div className=\"px-3\">\n                      <table className=\"m-a-revert-all friends-detail-container\">\n                        {this.props.data.purchasedRegistryItem[0].otherUsers.map(user => (\n\n                          <tr className=\"friend-detail m-a-revert-all\">\n                            <td className=\"m-a-revert-all p-0\">\n                              <div className=\"py-2 mr-8\">\n                                <p\n                                  className=\"text-sm font-medium\">{`${user.guestUser.firstName ? user.guestUser.firstName : ''} ${user.guestUser.lastName ? user.guestUser.lastName : ''}`}</p>\n                                <p className=\"text-sm friend-user-email\">{user.guestUser.email}</p>\n                              </div>\n                            </td>\n                            <td className=\"text-right m-a-revert-all p-0\">\n                              <p\n                                className=\"text-sm font-medium friend-contribution-amount mr-1\">{`${CURRENCY}${user.contributionAmount}`}</p>\n                            </td>\n                            <td className=\"m-a-revert-all p-0\">\n                              {user.createdTs ?\n                                <p\n                                  className=\"text-sm track-gifts-purchased-time\">{moment(user.createdTs).format('MMM DD, YYYY')}</p>\n                                : null}\n                            </td>\n                          </tr>\n                        ))}\n                      </table>\n                    </div>\n                  </div>\n                </div>\n                : null)\n              :\n              // Single guest User\n              (this.props.data.purchasedRegistryItem.length > 0 ?\n                <div className=\"track-gifts-user-detail d-flex ml-1 ml-md-0\">\n                  <div>\n                    <p\n                      className=\"text-sm font-medium\">{`${this.props.data.purchasedRegistryItem[0].guestUser.firstName ? this.props.data.purchasedRegistryItem[0].guestUser.firstName : ''} ${this.props.data.purchasedRegistryItem[0].guestUser.lastName ? this.props.data.purchasedRegistryItem[0].guestUser.lastName : ''}`}</p>\n                    <p\n                      className=\"text-sm track-gifts-user-email\">{this.props.data.purchasedRegistryItem[0].guestUser.email}</p>\n                  </div>\n                  {!this.props.data.isGroupGift && this.props.data.purchasedRegistryItem.length > 0 && this.props.data.purchasedRegistryItem[0].giftMessage && this.props.data.purchasedRegistryItem[0].guestUser ?\n                    <button className=\"ml-auto track-gifts-gift-message-container text-left d-inline-block d-md-none\" onClick={this.giftModalOpenHandler}>\n                    </button>\n                    : null}\n                </div>\n                : null)\n\n            }\n            <div className=\"ml-auto d-flex align-items-baseline\">\n\n              {!this.props.data.isPurchased ?\n                <MarkPurchased data={this.props.data} className=\"mt-3 mt-md-0\" />\n                : null}\n\n              {this.props.data.isCashAcceptedOnly && this.props.data.isAmountReceived ?\n                <BuyNow productData={this.props.data} className=\"ml-2 mt-3 mt-md-0\" /> : null}\n\n            </div>\n          </div>\n        </div>\n        {!this.props.data.isGroupGift && this.props.data.purchasedRegistryItem.length > 0 && this.props.data.purchasedRegistryItem[0].giftMessage && this.props.data.purchasedRegistryItem[0].guestUser ?\n          <Modal\n            show={this.state.toggleGiftModalHandler}\n            title=\"Gift Message\"\n            closeModal={this.giftModalCloseHandler}>\n            <p\n              className=\"text-body track-gifts-gift-message\">{this.props.data.purchasedRegistryItem[0].giftMessage}</p>\n            <p\n              className=\"mt-3 text-sm font-medium\">{`${this.props.data.purchasedRegistryItem[0].guestUser.firstName} ${this.props.data.purchasedRegistryItem[0].guestUser.lastName ? `${this.props.data.purchasedRegistryItem[0].guestUser.lastName[0]}.` : ''}`}</p>\n\n          </Modal> : null}\n        {this.props.data.isGroupGift && this.props.data.purchasedRegistryItem.length > 0 ?\n          <Modal\n            show={this.state.toggleFriendsDetialsModalHandler}\n            title={`${this.props.data.purchasedRegistryItem[0].otherUsers.length} Friends`}\n            closeModal={this.friendsDetailsCloseModalHandler}>\n            {this.props.data.purchasedRegistryItem[0].otherUsers.map(user => (\n              <div className=\"friend-detail-modal-container mb-3 pb-3\">\n                <div className=\"p-0\">\n                  <div className=\"py-2 mr-8\">\n                    <p\n                      className=\"text-sm font-medium\">{`${user.guestUser.firstName ? user.guestUser.firstName : ''} ${user.guestUser.lastName ? user.guestUser.lastName : ''}`}</p>\n                    <p className=\"text-sm friend-user-email\">{user.guestUser.email}</p>\n                  </div>\n                </div>\n                <div className=\"d-flex\">\n                  <div className=\"text-right p-0\">\n                    <p\n                      className=\"text-sm font-medium friend-contribution-amount mr-1\">{`${CURRENCY}${user.contributionAmount}`}</p>\n                  </div>\n                  <div className=\"p-0\">\n                    {user.createdTs ?\n                      <p\n                        className=\"text-sm track-gifts-purchased-time\">{moment(user.createdTs).format('MMM DD, YYYY')}</p>\n                      : null}\n                  </div>\n                </div>\n              </div>\n            ))}\n          </Modal> : null}\n      </div>\n    );\n  }\n}\n\nexport default GiftCard;","import React from \"react\";\nimport {connect} from \"react-redux\";\nimport {TRACK_GIFTS_VIEWS} from \"../../components/view-by/ViewBy\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport {getTrackGiftsProduct} from \"../../../../utils/commonFunction\";\nimport GiftCard from \"../../components/gift-card/GiftCard\";\nimport \"./TrackGiftContent.scss\";\n\nexport const LOCAL_2_API_FILTERS_MAPPING = {\n  4: \"totalAvailable\",\n  1: \"totalPurchased\",\n  3: \"totalReserved\",\n  2: \"totalFundsReceived\",\n  5: \"totalReturned\"\n}\n\n// Component for No registry Gifts Found\nconst NoRecordFound = () => {\n  return (\n    <h2>No Gifts Found...</h2>\n  )\n}\n\nclass TrackGiftsContent extends React.Component {\n\n  state = {\n    currentView: null\n  }\n\n  checkProductAvailability = product => {\n    // Checking if product has any guestUser or not (Availability)\n    if (!product.isGroupGift) {\n      return !(product.isReserved || product.isPurchased || (product.isCashAcceptedOnly && product.isAmountReceived))\n    } else {\n        return product.purchasedRegistryItem.length <= 0\n    }\n  }\n\n  getProductsBasedOnView = (view, stateProducts) => {\n    let products = []\n    let availableProducts = []\n    let guestUsersEmails = []\n    let refinedProducts = []\n    let skipCashFund = false;\n    for (const product of [...stateProducts]){\n      if (product.purchasedRegistryItem.length <= 0) {\n        refinedProducts.push(product)\n      }else {\n        let userProducts = []\n        let currentProduct = {...product}\n        for (let user of product.purchasedRegistryItem) {\n          if (skipCashFund){\n            skipCashFund = false\n            break\n          }\n          let newUsers = {...user}\n          let otherUsers = product.purchasedRegistryItem\n          newUsers['otherUsers'] = otherUsers\n          currentProduct.purchasedRegistryItem = [newUsers]\n          userProducts.push({...currentProduct})\n          currentProduct = {...product}\n          if (product.isGroupGift && view?.id === TRACK_GIFTS_VIEWS[0].id){\n            skipCashFund = true\n          }\n        }\n        refinedProducts.push(...userProducts)\n      }\n    }\n\n\n    if (view?.id === TRACK_GIFTS_VIEWS[0].id) { // [0] index is Gifts\n      //  Gifts View\n      for (const product of refinedProducts) {\n        if (this.checkProductAvailability(product)) {\n          availableProducts.push({...product})\n        } else {\n          products.push({...product})\n        }\n      }\n\n      // Show Available products in Gifts View only if Available Filter is applied\n      if (availableProducts.length > 0) {\n        products.push(...availableProducts)\n      }\n    } else {\n\n      //  Gift Giver View\n\n      for (const product of refinedProducts) {\n        if (this.checkProductAvailability(product)) {\n          availableProducts.push({...product})\n        } else {\n          if (product.purchasedRegistryItem.length > 0) {\n            // Grouping Product\n            if (product.isGroupGift) {\n              // Looping through each groupGift User\n              for (const groupUser of product.purchasedRegistryItem) {\n                console.log(groupUser)\n                if (guestUsersEmails.indexOf(groupUser.guestUser.email) !== -1) {\n                  // User already have product\n                  products = products.map(groupProduct => {\n                    if (groupProduct.user.email === groupUser.guestUser.email) {\n                      groupProduct.products.push(product)\n                    }\n                    return groupProduct\n                  })\n                } else {\n                  // User doesn't have product\n                  products.push({\n                    user: {...groupUser},\n                    products: [{...product}]\n                  })\n                  guestUsersEmails.push(groupUser.email)\n                }\n              }\n            } else {\n              //  Not a group Gift\n              try {\n                if (guestUsersEmails.indexOf(product.purchasedRegistryItem[0].guestUser.email) !== -1) {\n                  // User already have product\n                  products = products.map(groupProduct => {\n                    if (groupProduct.user.guestUser.email === product.purchasedRegistryItem[0].guestUser.email) {\n                      groupProduct.products.push(product)\n                    }\n                    return groupProduct\n                  })\n                } else {\n                  // User doesn't have product\n                  products.push({\n                    user: {...product.purchasedRegistryItem[0]},\n                    products: [{...product}]\n                  })\n                  guestUsersEmails.push(product.purchasedRegistryItem[0].guestUser.email)\n                }\n              } catch {\n                availableProducts.push({...product})\n              }\n            }\n\n          }\n        }\n      }\n\n      if (availableProducts.length > 0) {\n        products.push({\n          availableProducts: true,\n          products: [...availableProducts]\n        })\n      }\n    }\n\n    return products\n  }\n\n  render() {\n\n    if (this.props.stateTrackGiftsProducts.length <= 0 && this.state.currentView && this.props.stateTrackGiftsPagination.hasNextPage) {\n      getTrackGiftsProduct(true, this.props.stateTrackGiftsFilters, this.props.stateTrackGiftsProducts, this.props.stateTrackGiftsPagination, this.props.stateTrackGiftsView, this.props.stateRegistryInfo, this.props.stateTrackGiftsSearch, this.props.dispatch)\n    }\n\n    // Getting new products when new views are switched\n    if (this.state.currentView?.id !== this.props.stateTrackGiftsView?.id) {\n      this.setState({\n        currentView: {...this.props.stateTrackGiftsView}\n      })\n      getTrackGiftsProduct(true, this.props.stateTrackGiftsFilters, this.props.stateTrackGiftsProducts, this.props.stateTrackGiftsPagination, this.props.stateTrackGiftsView, this.props.stateRegistryInfo, this.props.stateTrackGiftsSearch, this.props.dispatch)\n    }\n\n    const products = this.getProductsBasedOnView(this.props.stateTrackGiftsView, this.props.stateTrackGiftsProducts)\n\n    if (this.props.stateTrackGiftsProducts.length <= 0 && !this.props.stateTrackGiftsPagination.hasNextPage) {\n      return <NoRecordFound/>\n    } else if (this.props.stateTrackGiftsView?.id === TRACK_GIFTS_VIEWS[0].id) {\n\n      // For Gifts\n\n      return (\n        <div>\n          <div className=\"row mb-1 mb-md-2\">\n            <div className=\"col-6 d-none d-md-inline-block\">\n              <p className=\"text-sm font-medium\">Gift details</p>\n            </div>\n            <div className=\"col-6 d-none d-md-inline-block\">\n              <p className=\"text-sm font-medium\">Gifted by</p>\n            </div>\n            <div className=\"col-12 d-inline-block d-md-none\">\n              <p className=\"text-sm font-body\">Gift details | Gifted by</p>\n            </div>\n          </div>\n          <div className=\"row\">\n            <div className=\"col\">\n              <InfiniteScroll\n                style={{overflow: \"unset\"}}\n                next={() => getTrackGiftsProduct(false, this.props.stateTrackGiftsFilters, this.props.stateTrackGiftsProducts, this.props.stateTrackGiftsPagination, this.props.stateTrackGiftsView, this.props.stateRegistryInfo, this.props.stateTrackGiftsSearch, this.props.dispatch)}\n                hasMore={this.props.stateTrackGiftsPagination.hasNextPage}\n                loader={<h4>Loading...</h4>}\n                dataLength={this.props.stateTrackGiftsProducts.length}\n              >\n                {products.map(product => {\n                  // return <p className=\"my-5\">{product.title}</p>\n                  return <GiftCard data={product}/>\n                })}\n              </InfiniteScroll>\n            </div>\n          </div>\n        </div>\n      )\n    } else {\n\n      // For Gift Giver\n\n      return (\n        <div>\n          <InfiniteScroll\n            next={() => getTrackGiftsProduct(false, this.props.stateTrackGiftsFilters, this.props.stateTrackGiftsProducts, this.props.stateTrackGiftsPagination, this.props.stateTrackGiftsView, this.props.stateRegistryInfo, this.props.stateTrackGiftsSearch, this.props.dispatch)}\n            hasMore={this.props.stateTrackGiftsPagination.hasNextPage}\n            loader={<h4>Loading...</h4>}\n            dataLength={this.props.stateTrackGiftsProducts.length}\n            style={{overflow: \"unset\"}}\n          >\n            {products.map(groupedProduct => {\n              return (\n                <div className=\"mb-4 track-gifts-gift-giver-view\">\n                  <div className=\"mb-2\">\n                    <span\n                      className=\"text-body font-medium\">{groupedProduct.availableProducts ? \"Available\" : `${groupedProduct.user.guestUser.firstName ? groupedProduct.user.guestUser.firstName : \"\"} ${groupedProduct.user.guestUser.lastName ? groupedProduct.user.guestUser.lastName : \"\"}`}\n                    </span>\n                    {!groupedProduct.availableProducts ?\n                      <span className=\"ml-1 text-body\">{groupedProduct.user.guestUser.email}</span> : null}\n                    <span\n                      className=\"ml-1 text-body font-medium gift-givers-user-gift-count px-2\">{groupedProduct.products.length} gifts</span>\n                  </div>\n                  <div>\n                    {groupedProduct.products.map(product => (\n                      <GiftCard data={product}/>\n                    ))}\n                  </div>\n                </div>\n              )\n            })}\n          </InfiniteScroll>\n        </div>\n      )\n    }\n  }\n}\n\nconst mapStateToProps = state => ({\n  stateTrackGiftsView: state.trackGifts.activeView,\n  stateTrackGiftsProducts: state.trackGifts.products,\n  stateTrackGiftsPagination: state.trackGifts.paginationInfo,\n  stateRegistryInfo: state.registry.info,\n  stateTrackGiftsFilters: state.trackGifts.filters,\n  stateTrackGiftsSearch: state.trackGifts.search\n})\n\nexport default connect(\n  mapStateToProps\n)(TrackGiftsContent);","import React from \"react\";\nimport {\n  GET_PRODUCTS,\n  REMOVE_REGISTRY_ITEM,\n  GET_CATEGORIES,\n  GET_REGISTRIES,\n  ADD_REGISTRY_ITEM,\n  UPDATE_REGISTRY_ITEM,\n  GET_QUESTIONS,\n  GET_GUEST_REGISTRY,\n  GET_PERSONALIZE_QUESTIONS,\n  GET_GUEST_CHECKLIST, GET_TRACK_GIFTS, GET_TODO, GET_DEFAULT_CASH_FUND_IMAGE, GET_MA_VARIANT\n} from \"../api/queries\";\nimport {graphQL, graphQLNoHeader, graphQLNoToken, addProductToCart as addProductToCartAPI} from \"../api/axios\";\nimport {MEDIA_URL_PREFIX, TRACK_GIFTS_PRODUCTS_PER_REQUEST} from \"./constants\";\nimport {\n  setRegistryProducts,\n  setCheckListItems,\n  toggleMustHaveProduct as toggleMustHaveProductAction,\n  setCashFundCategories,\n  setFilterProductCount\n} from \"../modules/my-registry/MyRegistryActions\";\nimport {CREATE_REGISTRY, TOGGLE_MUST_HAVE, UPDATE_VIEW_REGISTRY_POISTION} from \"../api/mutations\";\nimport {setOnboardingRegistry, setTodo, updateRegistryInfo} from \"../modules/registry/RegistryActions\";\nimport {setViewRegistryProducts} from \"../modules/view-registry/ViewRegistryActions\";\nimport {addOnboardingQuestion} from \"../modules/onboarding/OnboardingAction\";\nimport {addPersonalizeQuestion} from \"../modules/personalise-checklist/PersonaliseCheckListActions\";\nimport {updateGuestViewInfo, setGuestCheckListItems} from \"../modules/guest-view/GuestViewAction\";\nimport {toast} from \"react-toastify\";\nimport reducerDefaultData from \"data/ReducerDefaultData.json\";\nimport {TRACK_GIFTS_VIEWS} from \"../modules/track-gifts/components/view-by/ViewBy\";\nimport {\n  setTrackGiftsFilters,\n  setTrackGiftsPaginationInfo,\n  setTrackGiftsProduct\n} from \"../modules/track-gifts/TrackGiftsAction\";\nimport {LOCAL_2_API_FILTERS_MAPPING} from \"../modules/track-gifts/containers/track-gifts-content/TrackGiftsContent\";\n\nexport const getProducts = (registryId, dispatch) => {\n  let data = {\n    query: GET_PRODUCTS,\n    variables: {\n      registryId: parseInt(registryId)\n    }\n  }\n  graphQL(data).then(res => {\n    // Filter Count\n    let filterCount = {\n      categoryData: {...res.data.data.registryItems.categoryData},\n      registryItemsAnalysisCount: {...res.data.data.registryItems.registryItemsAnalysisCount}\n    }\n    dispatch(setFilterProductCount(filterCount))\n\n    let responseData = res.data.data.registryItems.registryItems.edges.map(item => {\n      // return { ...item.node }\n      let newItemObj = {...item.node}\n      delete newItemObj.registryitemImage;\n      if (item.node.registryitemImage.length > 0) {\n        newItemObj.item.imageUrl = (MEDIA_URL_PREFIX.LOCAL_MEDIA_URL ? MEDIA_URL_PREFIX.LOCAL_MEDIA_URL : \"\") + item.node.registryitemImage[0].image;\n      }\n      return newItemObj;\n    })\n\n    // TODO: change category\n    let finalData = responseData.filter(product => product.registryCategories.length > 0)\n    dispatch(setRegistryProducts(finalData))\n\n  }).catch(err => {\n    console.error(err.response)\n  })\n}\n\nexport const toggleMustHaveProduct = (product, dispatch) => {\n  let data = {\n    query: TOGGLE_MUST_HAVE,\n    variables: {\n      productId: product.id,\n      mustHaveValue: !product.mostWanted,\n      quantity: product.quantity\n    }\n  }\n  graphQL(data).then(res => {\n    if (res.status === 200) {\n      dispatch(toggleMustHaveProductAction(product.item.id))\n    }\n  }).catch(err => {\n    console.error(err.message)\n  })\n}\n\nexport const removeProductFromCartHandler = (card, registryId, dispatch) => {\n  let registryItemId = card.id\n  let data = {\n    query: REMOVE_REGISTRY_ITEM,\n    variables: {\n      registryItemId: registryItemId\n    },\n  }\n  graphQL(data).then(res => {\n    console.log({...res.data.data.errors})\n    if (res.data.errors && res.data.errors.length) {\n      for (let error of res.data.errors) {\n        toast.error(error.message)\n      }\n      return;\n    } else {\n      // this.props.dispatch(removeProductFromCart(card.item.id))\n      // this.getProducts();\n      getProducts(registryId, dispatch);\n      getCategories(registryId, dispatch);\n\n      toast.error((\n        <p><b>{card.title}</b> removed from your registry!</p>\n      ))\n\n      // getCategories()\n    }\n\n  }).catch(err => {\n    console.error(err.message)\n    toast.error((\n      <p>Some error occurred.</p>\n    ))\n  })\n}\n\n// While using this method. Plase mak sure of parentCategory Parameter\nexport const getRefinedCategory = (category, parentCategory = null) => {\n  return ({\n    id: category.id,\n    category: category.category,\n    categoryName: category.category.categoryName,\n    description: category.category.description,\n    categoryType: category.category.categoryType,\n    isDesired: category.isDesired,\n    isExcluded: category.isExcluded,\n    addedItemsCount: category.addedItemsCount,\n    totalItemsCount: category.totalItemsCount,\n    isParent: category.category.isParent,\n    parentCategory: parentCategory\n  })\n}\n\n\n// Get all categories\nexport const getAllCategories = (registryCategories, getAll) => {\n  let parentCategories = registryCategories.filter(category => getAll ? true : (!category.isExcluded))\n  let finalCategories = parentCategories.map(parentCategory => {\n    let newParentCategory = getRefinedCategory(parentCategory)\n    let subCategory = parentCategory.registrySubCategories;\n    delete parentCategory.registrySubCategories\n    let newSubCategories = subCategory.filter(cat => getAll ? true : (!cat.isExcluded))\n    newSubCategories = newSubCategories.map(cat => {\n      let refinedSubCate = getRefinedCategory(cat, {\n        id: parentCategory.category.id,\n        name: parentCategory.category.categoryName\n      })\n      let subProductTypes = cat.registrySubProductTypes.map(subProduct => getRefinedCategory(subProduct, {\n        id: cat.category.id,\n        name: cat.category.categoryName\n      }))\n      refinedSubCate['subProductTypes'] = subProductTypes.filter(category => getAll ? true : !category.isExcluded)\n      return refinedSubCate\n    })\n    newParentCategory['subCategories'] = newSubCategories\n    return newParentCategory\n  })\n\n  return finalCategories\n}\n\nexport const getCategories = (registryId, dispatch) => {\n  let data = {\n    operationName: \"getCategories\",\n    query: GET_CATEGORIES,\n    variables: {\n      registryId: parseInt(registryId)\n    },\n  }\n  graphQL(data).then(res => {\n    if (res.data.errors || res.data.error) {\n      // TODO: Add toast\n      console.log('Something went wrong-->', res.data.errors)\n      return;\n    } else {\n\n      // let tempAllCategories = getAllCategories(res.data.data.registryCategories, true)\n      // let cashFundCategories = []\n      //\n      // for (const category of tempAllCategories) {\n      //   for (const subCategory of category.subCategories) {\n      //     if (Number(subCategory.categoryType.id) === 2) {\n      //       cashFundCategories.push(subCategory)\n      //     }\n      //   }\n      // }\n      // dispatch(setCashFundCategories(cashFundCategories))\n      let finalCategories = getAllCategories(res.data.data.registryCategories, false)\n      if (finalCategories.length === 0) {\n        let allCategories = getAllCategories(res.data.data.registryCategories, true)\n        dispatch(setCheckListItems(allCategories))\n      } else {\n        dispatch(setCheckListItems(finalCategories))\n      }\n      // dispatch(setCheckListItems(categoryToUpdate))\n    }\n  })\n}\n\nexport const updateRegistryDetailState = (dispatch, registryData) => {\n  let currentRegistryInfo = null;\n\n  currentRegistryInfo = registryData[0].node;\n  if (currentRegistryInfo.image) {\n    currentRegistryInfo.image.image = (MEDIA_URL_PREFIX.LOCAL_MEDIA_URL ? MEDIA_URL_PREFIX.LOCAL_MEDIA_URL : \"\") + currentRegistryInfo.image.image;\n  }\n\n  if (currentRegistryInfo) {\n    dispatch(updateRegistryInfo({...currentRegistryInfo}))\n  } else {\n    dispatch(updateRegistryInfo({notFound: true}))\n    console.log(\"No registry found!\");\n  }\n}\n\nexport const updateRegistryDetail = (dispatch) => {\n  let data = {\n    query: GET_REGISTRIES\n  }\n\n  graphQL(data).then(res => {\n    try {\n      if (res.data.data.registries.edges) {\n        updateRegistryDetailState(dispatch, res.data.data.registries.edges)\n      } else {\n        dispatch(updateRegistryInfo({notFound: true}))\n      }\n    } catch (e) {\n      dispatch(updateRegistryInfo({notFound: true}))\n      console.error(e)\n    }\n  }).catch(err => {\n    dispatch(updateRegistryInfo({notFound: true}))\n    console.error(err.response ? err.response.data : null)\n  })\n}\n\nexport const updateViewRegistryPosition = (registryId, position, oldPosition, dispatch) => {\n  let data = {\n    query: UPDATE_VIEW_REGISTRY_POISTION,\n    variables: {\n      registryId: registryId,\n      registryItems: position\n    },\n  }\n  graphQL(data).then(res => {\n    if (res.data.error) {\n      // TODO: Add toast\n      dispatch(setViewRegistryProducts(oldPosition))\n      toast.error(\"Somerhing went wrong while re-arranging Products\")\n      console.log('Something went wrong-->', res.data.error)\n      return;\n    }\n\n  }).catch(err => {\n    dispatch(setViewRegistryProducts(oldPosition))\n    console.error(err.message)\n  })\n}\n\nconst addProductToRegistry = (data, registryId, title, dispatch) => {\n  graphQL(data).then(res => {\n    getProducts(registryId, dispatch);\n    getCategories(registryId, dispatch);\n\n    toast.success((\n      <p><b>{title}</b> added to your registry!</p>\n    ))\n  }).catch(err => {\n    console.error(err.message)\n\n    toast.error((\n      <p>Some error occurred!</p>\n    ))\n  })\n}\n\nconst updateProductToRegistry = (data, registryId, title, dispatch) => {\n  graphQL(data).then(res => {\n    getProducts(registryId, dispatch);\n    getCategories(registryId, dispatch);\n\n    toast.success((\n      <p><b>{title}</b> added to your registry!</p>\n    ))\n  }).catch(err => {\n    console.error(err.message)\n\n    toast.error((\n      <p>Some error occurred!</p>\n    ))\n  })\n}\n\n\nexport const addProductHandler = (card, stateAddedProducts, stateRegistryInfo, dispatch) => {\n  // If its MA Product\n  const registryId = parseInt(stateRegistryInfo.id)\n  if (card.isMaItem && card.activeVariant) {\n    let existingProduct = [...stateAddedProducts].filter(product => product.item.sku === card.activeVariant.sku)\n    if (existingProduct.length === 0) {\n      const title = card.title\n      const category = card.category.id\n      const storeItemUrl = card.storeUrl\n      const sku = card.activeVariant.sku\n      const price = parseFloat(card.activeVariant.price)\n      const quantity = parseInt(card.quantity)\n      const imageUrl = (card.activeVariant.imageUrl && card.activeVariant.imageUrl !== \"\") ? card.activeVariant.imageUrl : card.imageUrl;\n      const shopifyVariantId = card.activeVariant.variantId\n      const storeName = card.storeName\n\n      let data = {\n        query: ADD_REGISTRY_ITEM,\n        variables: {\n          registryId: registryId,\n          title: title,\n          // TODO: change category\n          category: [Number(category)],\n          tags: [],\n          storeItemUrl: storeItemUrl ? storeItemUrl : '',\n          sku: sku,\n          price: price,\n          quantity: quantity,\n          imageUrl: imageUrl,\n          shopifyItemVariantId: shopifyVariantId,\n          storeName: storeName,\n          //TODO: change this if requried\n          // shopifyItemId: shopifyItemId,\n        }\n      }\n      addProductToRegistry(data, registryId, card.title, dispatch)\n    } else {\n      let data = {\n        query: UPDATE_REGISTRY_ITEM,\n        variables: {\n          registryItemId: existingProduct[0].id,\n          quantity: parseInt(card.quantity) + parseInt(existingProduct[0].quantity),\n        }\n      }\n      updateProductToRegistry(data, registryId, card.title, dispatch)\n    }\n  }\n  // If its not MA Product\n  else {\n    let existingProduct = [...stateAddedProducts].filter(product => product.item.sku === card.sku)\n    if (existingProduct.length === 0) {\n      const title = card.title\n      const category = card.category.id\n      const storeItemUrl = card.storeUrl\n      const sku = card.sku\n      const price = parseFloat(card.price)\n      const quantity = parseInt(card.quantity)\n      const imageUrl = card.imageUrl\n      const storeName = card.storeName\n\n      let data = {\n        query: ADD_REGISTRY_ITEM,\n        variables: {\n          registryId: registryId,\n          title: title,\n          // TODO: change category\n          category: [Number(category)],\n          tags: [],\n          storeItemUrl: storeItemUrl ? storeItemUrl : '',\n          sku: sku,\n          price: price,\n          quantity: quantity,\n          imageUrl: imageUrl,\n          storeName: storeName,\n        }\n      }\n      addProductToRegistry(data, registryId, card.title, dispatch)\n    } else {\n      let data = {\n        query: UPDATE_REGISTRY_ITEM,\n        variables: {\n          registryItemId: existingProduct[0].id,\n          quantity: parseInt(card.quantity) + parseInt(existingProduct[0].quantity),\n        }\n      }\n      updateProductToRegistry(data, registryId, card.title, dispatch)\n    }\n  }\n}\n\nexport const getOnboardingQuestions = async (dispatch, registryId = null, token = null) => {\n  let reqData = {\n    query: GET_QUESTIONS,\n    variables: {\n      isPersonalize: false,\n      registryId: registryId ? Number(registryId) : null\n    }\n  }\n  let options = {}\n  if (token) {\n    options = {headers: {\"Authorization\": \"Token \" + token}}\n  }\n\n  await graphQLNoHeader(reqData, options).then(async res => {\n    if (res.data.data.questions) {\n      const questions = res.data.data.questions.map(question => {\n        question.options = question.options.map(option => {\n          if (option.followUpQuestions.length > 0) {\n            option.followUpQuestions.map(followUpQuestion => {\n              followUpQuestion['parentQuestion'] = question.id\n              return followUpQuestion;\n            })\n          }\n          return option;\n        })\n        question.isAnswered = false;\n        return question;\n      })\n      await dispatch(addOnboardingQuestion(questions))\n    }\n  }).catch(err => {\n    // toast.error(\"Error occurred while fetching questions\");\n    console.error(err);\n  })\n}\n\n\nexport const getPersonalizeQuestions = (registryId, dispatch) => {\n  let reqData = {\n    query: GET_PERSONALIZE_QUESTIONS,\n    variables: {\n      registryId: registryId,\n    }\n  }\n\n  graphQL(reqData).then(res => {\n    if (res.data.data.editablePersonalizeQuestions) {\n      const questions = res.data.data.editablePersonalizeQuestions.map(question => {\n        question.options = question.options.map(option => {\n          if (option.followUpQuestions.length > 0) {\n            option.followUpQuestions.map(followUpQuestion => {\n              followUpQuestion['parentQuestion'] = question.id\n              return followUpQuestion;\n            })\n          }\n          return option;\n        })\n        question.isAnswered = false;\n        return question;\n      })\n      dispatch(addPersonalizeQuestion(questions))\n    }\n  }).catch(err => {\n    toast.error(\"Error occurred while fetching questions\");\n    console.error(err);\n  })\n}\n\nexport const updateGuestViewRegistry = (urlSlug, dispatch) => {\n  let reqData = {\n    query: GET_GUEST_REGISTRY,\n    variables: {\n      urlSlug: urlSlug,\n    }\n  }\n\n  graphQL(reqData).then(res => {\n    if (res.data.data.registryAsGuest) {\n      let guestViewInfo = {...res.data.data.registryAsGuest}\n      if (guestViewInfo.image) {\n        guestViewInfo.image.image = (MEDIA_URL_PREFIX.LOCAL_MEDIA_URL ? MEDIA_URL_PREFIX.LOCAL_MEDIA_URL : \"\") + guestViewInfo.image.image;\n      }\n      delete guestViewInfo.registryItems\n      dispatch(updateGuestViewInfo(guestViewInfo))\n    }\n  }).catch(err => {\n    dispatch(updateGuestViewInfo({notFound: true}))\n    if (err.response && err.response.data.errors) {\n      for (const error of err.response.data.errors) {\n        // TODO: Implement toast if necessary\n        console.log(error.message)\n      }\n    }\n  })\n}\n\nexport const createRegistry = dispatch => {\n  graphQL({query: CREATE_REGISTRY}).then(res => {\n    if (res.data.data) {\n      let registryId = res.data.data.createRegistry.registry.id\n      if (registryId) {\n        dispatch(setOnboardingRegistry(registryId))\n      }\n    }\n  }).catch(err => {\n    console.log(err.response)\n  })\n}\n\nexport const dataURItoBlob = (dataURI, fileType, fileName) => {\n  let byteString = atob(dataURI.split(',')[1]);\n  let ab = new ArrayBuffer(byteString.length);\n  let ia = new Uint8Array(ab);\n  for (let i = 0; i < byteString.length; i++) {\n    ia[i] = byteString.charCodeAt(i);\n  }\n\n  let blob = new Blob([ab], {type: fileType});\n  return new File([blob], fileName, {\n    type: fileType\n  })\n}\n\nexport const getGuestCategories = async (urlSlug, dispatch) => {\n  let reqData = {\n    query: GET_GUEST_CHECKLIST,\n    variables: {\n      urlSlug: urlSlug,\n    }\n  }\n  await graphQL(reqData).then(res => {\n    if (res.data.errors || res.data.error) {\n      // TODO: Add toast\n      console.log('Something went wrong-->', res.data.errors)\n      return;\n    } else {\n      let finalCategories = getAllCategories(res.data.data.registryCategoriesAsGuest, true)\n      dispatch(setGuestCheckListItems(finalCategories))\n      // dispatch(setCheckListItems(categoryToUpdate))\n    }\n  })\n}\n\nconst getTrackGiftsFilterStatus = (filterString, trackGiftsFilter) => {\n  let returnStatus = false\n  switch (filterString) {\n    case \"available\":\n      for (const filter of trackGiftsFilter) {\n        if (filter.id === 4) {\n          returnStatus = filter.selected\n          break;\n        }\n      }\n      break\n    case \"purchased\":\n      for (const filter of trackGiftsFilter) {\n        if (filter.id === 1) {\n          returnStatus = filter.selected\n          break;\n        }\n      }\n      break\n    case \"reserved\":\n      for (const filter of trackGiftsFilter) {\n        if (filter.id === 3) {\n          returnStatus = filter.selected\n          break;\n        }\n      }\n      break\n    case \"fundsReceived\":\n      for (const filter of trackGiftsFilter) {\n        if (filter.id === 2) {\n          returnStatus = filter.selected\n          break;\n        }\n      }\n      break\n    case \"returned\":\n      for (const filter of trackGiftsFilter) {\n        if (filter.id === 5) {\n          returnStatus = filter.selected\n          break;\n        }\n      }\n      break\n    default:\n      returnStatus = false\n      break\n  }\n  return returnStatus;\n}\n\nexport const getTrackGiftsProduct = (clearProducts = false, trackGiftsFilters, trackGiftsProduct, trackGiftsPagination, trackGiftsView, registryInfo, trackGiftsSearch, dispatch, first = TRACK_GIFTS_PRODUCTS_PER_REQUEST) => {\n  // TODO: Change this Function when Search API in implemented\n  let reqData = {\n    query: GET_TRACK_GIFTS,\n    operationName: \"registryGifts\",\n    variables: {\n      registryId: registryInfo?.id,\n      giftGivers: trackGiftsView?.id === TRACK_GIFTS_VIEWS[1].id,  // [1] index is Gift Giver\n      after: clearProducts ? null : trackGiftsPagination.endCursor,\n      first: first,\n      searchKeyword: trackGiftsSearch.searchText,\n      isReserved: getTrackGiftsFilterStatus(\"reserved\", trackGiftsFilters),\n      isAvailable: getTrackGiftsFilterStatus(\"available\", trackGiftsFilters),\n      isPurchased: getTrackGiftsFilterStatus(\"purchased\", trackGiftsFilters),\n      isFundsReceived: getTrackGiftsFilterStatus(\"fundsReceived\", trackGiftsFilters),\n      isReturned: getTrackGiftsFilterStatus(\"returned\", trackGiftsFilters),\n    }\n  }\n\n  graphQL(reqData).then(res => {\n    // Updating Track Gifts Filters\n    if (res.data.data.registryGifts && res.data.data.registryGifts.registryGiftItemsCount) {\n      const allFilterCounts = res.data.data.registryGifts.registryGiftItemsCount;\n      const newFilters = trackGiftsFilters.map(filter => {\n        filter.count = allFilterCounts[LOCAL_2_API_FILTERS_MAPPING[filter.id]] ? allFilterCounts[LOCAL_2_API_FILTERS_MAPPING[filter.id]] : 0\n        return filter\n      })\n\n      dispatch(setTrackGiftsFilters(newFilters))\n    }\n\n    // Updating Track Gifts Products\n    if (res.data.data.registryGifts && res.data.data.registryGifts.gifts) {\n      let registryGifts = res.data.data.registryGifts.gifts\n      let products = registryGifts.edges.map(item => ({...item.node}))\n      let pagination = null\n      if (registryGifts.pageInfo) {\n        pagination = {\n          hasNextPage: registryGifts.pageInfo.hasNextPage,\n          endCursor: registryGifts.pageInfo.endCursor,\n        }\n      }\n      if (pagination) {\n        dispatch(setTrackGiftsPaginationInfo({...pagination}))\n      }\n      if (clearProducts) {\n        dispatch(setTrackGiftsProduct([...products]))\n      } else {\n        dispatch(setTrackGiftsProduct([...trackGiftsProduct, ...products]))\n      }\n\n    } else {\n      dispatch(setTrackGiftsPaginationInfo({\n        hasNextPage: false,\n        endCursor: null\n      }))\n    }\n  }).catch(err => {\n    dispatch(setTrackGiftsPaginationInfo({\n      hasNextPage: false,\n      endCursor: null\n    }))\n    console.error(err.response)\n  })\n}\n\nexport const addProductToCart = async (data) => {\n  let returnRes = {}\n  await addProductToCartAPI(data).then(res => {\n    returnRes['status'] = 200\n    console.log('Added to cart ')\n  }).catch(err => {\n    returnRes = err.response.data\n    if (typeof res !== 'object') {\n      returnRes = {status: 401}\n    }\n    console.error(err.response.data)\n  })\n  return returnRes\n}\n\nexport const getTodoList = (registryId, dispatch) => {\n  let reqData = {\n    query: GET_TODO,\n    variables: {\n      registryId: registryId\n    }\n  }\n\n  graphQL(reqData).then(res => {\n    if (res.data.data && res.data.data.registryTodoSteps) {\n      dispatch(setTodo(res.data.data.registryTodoSteps))\n    }\n    if (res.data.errors) {\n      console.error({...res.data.errors})\n    }\n  }).catch(err => {\n    console.error(err.response)\n  })\n}\n\nexport const fetchDefaultCashFundImage = async (categoryId) => {\n  let result = null\n  const reqData = {\n    query: GET_DEFAULT_CASH_FUND_IMAGE,\n    variables: {\n      categoryId: categoryId\n    }\n  }\n\n  await graphQL(reqData).then(async res => {\n    if (res.data.data.cashFundDefaultImage) {\n      result = {\n        status: \"success\",\n        data: res.data.data.cashFundDefaultImage\n      }\n    } else if(res.data.errors){\n      result = {\n        status: \"error\",\n        data: res.data.errors\n      }\n    }\n  }).catch(err => {\n    result = {\n        status: \"error\",\n        data: err.response\n      }\n    console.error(\"Unable to fetch cash fund default image\", {...err.response})\n  })\n\n  return result\n}\n\nexport const getMAVariant = async (registryId, variantId) => {\n  let returnValue = null\n  if (!registryId || !variantId){\n    return returnValue\n  }\n\n  let reqData = {\n    query: GET_MA_VARIANT,\n    variables: {\n      registryId: registryId,\n      variantId: variantId\n    }\n  }\n\n  await graphQL(reqData).then(res => {\n    if (res.data && res.data.data.maItemVariants){\n      returnValue = res.data.data.maItemVariants\n    } else if(res.errors){\n      console.error(\"Error occurred while fetching variants\", res.errors)\n    }\n  })\n\n  return returnValue\n}","import React from 'react';\nimport \"./CheckBox.scss\";\n\nconst CheckBox = (props) => {\n  return (\n    <label className={[\"checkbox d-flex align-items-center\", props.className ? props.className : \"\"].join(\" \")}>\n      <span className=\"checkbox__input mr-2\">\n        <input\n          type=\"checkbox\"\n          name={props.id}\n          value={props.id}\n          checked={props.checked ? \"checked\" : \"\"}\n          onChange={props.changeHandler}\n        />\n        <span className=\"checkbox__control d-flex justify-content-center align-items-center\">\n          <i className=\"icon-check\"></i>\n        </span>\n      </span>\n      <span className={[\"radio__label text-sm\", props.textClass ? props.textClass : \"\"].join(\" \")}>{props.display} {props.count ? \"(\" + props.count + \")\" : null}</span>\n    </label>\n  )\n}\n\nexport default CheckBox;","import React, {useState, useEffect} from \"react\";\nimport \"./SelectCategory.scss\";\nimport Modal from \"../modal-component/ModalComponent\";\nimport {GET_CATEGORIES} from \"../../../../api/queries\";\nimport {graphQL} from \"../../../../api/axios\";\nimport Button from \"../button-component/ButtonComponent\";\nimport {useSelector} from \"react-redux\";\nimport {getAllCategories} from \"../../../../utils/commonFunction\";\nimport CheckBox from \"../check-box/CheckBox\";\n\n// TODO: Change this Component to handle multiple categories\nconst SelectCategory = (props) => {\n  const registryInfo = useSelector(state => state.registry.info)\n  const [categories, setCategories] = useState([]);\n  const [searched, setSearched] = useState(false)\n  const [searchedCategories, setSearchedCategories] = useState([]);\n  const [selectedCategory, setSelectedCategory] = useState(props.currentCategory ? props.currentCategory : []);\n  // const [selectedCategory, setSelectedCategory] = useState([]);\n  let fetchingAPI = false\n\n  const getCategories = () => {\n    let data = {\n      query: GET_CATEGORIES,\n      variables: {\n        registryId: parseInt(registryInfo.id)\n      },\n    }\n    graphQL(data).then(res => {\n      if (res.data.data.registryCategories) {\n        fetchingAPI = false\n        let resData = getAllCategories(res.data.data.registryCategories, true)\n        let finalCheckList = []\n\n        // For Parent categories\n        for (let category of resData) {\n          if (category.categoryType && Number(category.categoryType.id) === 2){\n            continue\n          }\n\n          let finalSubCategory = []\n          if (category.subCategories.length) {\n            // For Sub-Categories\n            for (let subCategory of category.subCategories) {\n              let tempSubCategory = []\n              if (subCategory.subProductTypes.length) {\n\n                // For subProductType\n                for (let subProductType of subCategory.subProductTypes) {\n                  subProductType.categoryName = subCategory.categoryName + ' (' + subProductType.categoryName + ')'\n                  tempSubCategory.push(subProductType)\n                }\n              } else {\n                tempSubCategory.push(subCategory)\n              }\n              finalSubCategory.push(...tempSubCategory)\n            }\n            let tempCategory = {...category}\n            tempCategory.subCategories = finalSubCategory\n            finalCheckList.push(tempCategory)\n          }\n        }\n        setCategories(finalCheckList);\n      }\n    }).catch(err => {\n      console.error(err.message)\n    })\n  }\n\n  const closeModal = () => {\n    setSelectedCategory(props.currentCategory);\n    props.closeModal(false);\n  }\n\n  const saveSelectedCategory = () => {\n    props.changeCurrentCategory(selectedCategory)\n    props.closeModal(false);\n  }\n\n  const handleSelectionCategory = (category, subCategory) => {\n    subCategory = {\n      ...subCategory,\n      \"mainCategory\": category\n    }\n    let sameCatagory = [...selectedCategory].find(category => subCategory.id === category.id)\n    if (sameCatagory) {\n      let allSelectedCategory = selectedCategory.filter(category => subCategory.id !== category.id)\n      setSelectedCategory(allSelectedCategory)\n    } else {\n      let allSelectedCategory = [...selectedCategory, subCategory]\n      setSelectedCategory(allSelectedCategory)\n    }\n  }\n\n  useEffect(() => {\n    if (props.currentCategory) {\n      setSelectedCategory(props.currentCategory)\n    } else {\n      setSelectedCategory([])\n    }\n  }, [props.currentCategory])\n\n  if (categories.length === 0) {\n    if (!fetchingAPI) {\n      fetchingAPI = true;\n      getCategories();\n    }\n  }\n\n  const getCategoriesToDisplay = (cat) => {\n    return (\n      <div className=\"col\">\n        {cat.map(category => {\n          return (\n            <div className=\"mb-6\" key={\"select-\" + category.categoryName}>\n              <h4 className=\"parent-category mb-3 font-medium px-2\">{category.categoryName}</h4>\n              <div className=\"category-columns\">\n                {category.subCategories ?\n                  category.subCategories.map(subCategory =>\n                    <div className=\"w-100 category-column\">\n                      <label className=\"checkbox d-flex align-items-center py-1 px-2 m-0\">\n                        <span className=\"checkbox__input mr-2\">\n                          <input\n                            type=\"checkbox\"\n                            name={subCategory.id}\n                            value={subCategory.id}\n                            checked={selectedCategory.find(category => category.id === subCategory.id) ? \"checked\" : \"\"}\n                            onChange={() => handleSelectionCategory(category.categoryName, subCategory)}\n                          />\n                          <span className=\"checkbox__control d-flex justify-content-center align-items-center\">\n                            <i className=\"icon-check\"></i>\n                          </span>\n                        </span>\n                        <span className=\"select_category_radio__label text-body\">{subCategory.categoryName}</span>\n                      </label>\n                    </div>\n                  )\n                  : null}\n              </div>\n\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n\n  const categorySelectBody = (\n    <div className=\"row select-category-body\">\n      {searched ? (searchedCategories.length > 0 ? getCategoriesToDisplay(searchedCategories) : getCategoriesToDisplay([])) : getCategoriesToDisplay(categories)}\n    </div>\n  )\n\n  const modalFooter = (\n    <div className=\"categories-modal-footer\">\n      <label>{selectedCategory.length > 0 ? selectedCategory.length + ' selected' : null}</label>\n      <Button\n        variant=\"primary\"\n        className=\"font-medium p-1\"\n        onClick={saveSelectedCategory}\n      >Done</Button>\n    </div>\n  )\n\n  // Search Category Section\n  const searchInputRef = React.createRef()\n  const changeLinkRef = React.createRef()\n\n  const focusSearchCategoryInput = () => {\n    if (searchInputRef.current) {\n      searchInputRef.current.focus();\n    }\n  }\n\n  const searchInputFocusHandler = (e) => {\n    if (!e.target.classList.contains(\"search-category-input-focus\")) {\n      e.target.classList.add(\"search-category-input-focus\");\n    }\n  }\n\n  const searchInputBlurHandler = (e) => {\n    if (e.target.value.length > 0) {\n      return\n    }\n\n    if (e.target.classList.contains(\"search-category-input-focus\")) {\n      e.target.classList.remove(\"search-category-input-focus\");\n    }\n  }\n\n  const searchCategoryInputChangeHandler = (e) => {\n    setSearched(true)\n    if (e.target.value.length > 0) {\n      changeLinkRef.current.style.display = \"block\";\n\n      //  Searching through the category\n      let finalCategories = []\n      for (const parentCategory of categories) {\n        let newParentCategory = {...parentCategory}\n        newParentCategory.subCategories = []\n        let searchMatched = false\n\n        for (const subCategory of parentCategory.subCategories) {\n          if (subCategory.categoryName.toLowerCase().match(e.target.value.toLowerCase())) {\n            searchMatched = true\n            newParentCategory.subCategories.push(subCategory)\n          }\n        }\n\n        if (searchMatched) {\n          finalCategories.push(newParentCategory)\n          searchMatched = false\n        }\n      }\n      setSearchedCategories(finalCategories)\n    } else {\n      setSearched(false)\n      if (searchInputRef.current) {\n        if (searchInputRef.current.value.length > 0) {\n          searchInputRef.current.value = \"\"\n        }\n        changeLinkRef.current.style.display = \"none\";\n        searchInputRef.current.focus()\n        setSearchedCategories([])\n      }\n    }\n  }\n\n  const changeLinkClickHandler = (e) => {\n    e.preventDefault();\n    setSearched(false)\n    if (searchInputRef.current) {\n      if (searchInputRef.current.value.length > 0) {\n        searchInputRef.current.value = \"\"\n      }\n      changeLinkRef.current.style.display = \"none\";\n      searchInputRef.current.focus()\n      setSearchedCategories([])\n    }\n  }\n\n  const headerContent = (\n    <div className=\"align-self-center d-flex position-relative select-category-search-section mr-3\">\n      <input\n        type=\"text\"\n        placeholder=\"Search category...\"\n        className=\"search-category-input pl-5 py-1 pr-1 text-body m-0\"\n        ref={searchInputRef}\n        onChange={(e) => searchCategoryInputChangeHandler(e)}\n        onFocus={(e) => searchInputFocusHandler(e)}\n        onBlur={(e) => searchInputBlurHandler(e)}\n      />\n      <i className=\"icon-search search-category-icon\" onClick={focusSearchCategoryInput}/>\n      <a\n        tabindex='0'\n        className=\"search-category-clear-link text-sm font-medium\"\n        href=\"#\"\n        onClick={(e) => changeLinkClickHandler(e)}\n        ref={changeLinkRef}>Clear all</a>\n    </div>\n  )\n\n  return (\n    <Modal\n      show={props.showModal}\n      title=\"Select Category\"\n      footer={modalFooter}\n      headerContent={headerContent}\n      closeModal={closeModal}>\n      {categorySelectBody}\n    </Modal>\n  )\n}\n\nexport default SelectCategory;","import React from \"react\";\nimport \"./CategoryPill.scss\";\n\nconst CategoryPill = (props) => {\n  return (\n    <div\n      className={[\"edit-gift-category-pill p-1 text-sm\", props.className ? props.className : \"\"].join(\" \")}>{props.text}</div>\n  )\n}\n\nexport default CategoryPill;","import React from \"react\";\nimport \"./TogglePills.scss\";\n\nconst TogglePills = (props) => {\n  return (\n    <div\n      className={[\"toggle-pills px-2 py-1 d-flex align-items-end\", props.activeClass, props.className ? props.className : \"\"].join(\" \")}\n      onClick={props.onClick}\n    >\n      <i className={[props.iconClass, \"mr-2\"].join(\" \")}/>\n      <span className=\"text-sm\">{props.text}</span>\n    </div>\n  )\n}\n\nexport default TogglePills;","import React from 'react';\nimport \"./RadioButton.scss\";\n\nconst RadioButton = (props) => {\n  return (\n    <label className={props.centerText?\"radio d-flex mb-0 align-items-center\": \"radio d-flex mb-0\"}>\n      <span className=\"radio__input mr-2\">\n      <input\n        type=\"radio\"\n        name={props.name}\n        checked={props.checked ? \"checked\" : \"\"}\n        onChange={props.changeHandler}\n        />\n      <span className=\"radio__control\"></span>\n      </span>\n      <span className={[\"radio__label\", props.textClass ? props.textClass : null].join(\" \")}>{props.display} {props.count ? \"(\"+props.count+\")\" : null}</span>\n      {props.children ? props.children : null}\n    </label>\n  )\n}\n\nexport default RadioButton;","import React from \"react\";\nimport \"./EditGift.scss\";\nimport Modal from \"../modal-component/ModalComponent\";\nimport {toast} from \"react-toastify\";\nimport Counter from \"../counter/Counter\";\nimport {connect} from \"react-redux\";\nimport SelectCategory from \"../select-category/SelectCategory\";\nimport CategoryPill from \"./category-pill/CategoryPill\";\nimport TogglePills from \"../add-gift/toggle-pills/TogglePills\";\nimport RadioButton from \"../radio-button/RadioButton\";\nimport Button from \"../button-component/ButtonComponent\";\nimport MoreOption from \"../more-option/MoreOption\";\nimport {UPDATE_REGISTRY_ITEMS} from \"../../../../api/mutations\";\nimport {graphQLMultipart} from \"../../../../api/axios\";\nimport {getProducts, getCategories, getMAVariant} from \"../../../../utils/commonFunction\";\nimport {SETTINGS_LINKS} from \"../../../../utils/constants\";\n\nclass EditGift extends React.Component {\n\n  M_A_STORE_NAME = \"monicaandandy\"\n  MAX_IMAGE_SIZE = 2000000; // 2MB\n  ACCEPTED_IMAGE_TYPE = [\n    'image/jpg',\n    'image/jpeg',\n    'image/png'\n  ]\n\n  howToGiftOptions = [\n    {\n      id: 1,\n      text: \"Get cash equivalent for this gift\",\n      content: (\n        <div>\n          <p className=\"text-body\">Get cash equivalent for this gift</p>\n          <p className=\"text-sm mt-1\">Choose this option for the best purchase experience.</p>\n          <a className=\"text-sm edit-gift-links mt-1\" href=\"#\"\n             onClick={(ev) => this.learnMoreLinkClickHandler(ev, true)}>Learn More</a>\n        </div>\n      ),\n      learnMoreContent: (\n        <>\n          <p className=\"text-body edit-gift-learn-more-modal-text mt-3\">When you choose this option, the money for\n            the gift (including shipping) will be transferred to your\n            bank account.</p>\n\n          <p className=\"text-body edit-gift-learn-more-modal-text mt-4\">When the time is right for you, youll click\n            through to order directly from the website and have it\n            delivered to your home.</p>\n\n          <p className=\"text-body edit-gift-learn-more-modal-text mt-4\">This helps decrease the number of duplicate\n            gifts, keeps your returns to a minimum, and gives you control\n            over when you receive the gift.</p>\n\n          <p className=\"text-body edit-gift-learn-more-modal-text mt-4\"><a href={SETTINGS_LINKS.BANK_ACCOUNT}\n                                                                           target=\"_blank\"\n                                                                           className=\"edit-gift-links\">Connect your\n            bank account to your profile,</a> if you havent already.</p>\n        </>\n      )\n    },\n    {\n      id: 2,\n      text: \"Send your guests to the stores website to purchase and ship now.\",\n      content: (\n        <div>\n          <p className=\"text-body\">Send your guests to the stores website to purchase and ship now.</p>\n          <a className=\"text-sm edit-gift-links mt-1\" href=\"#\"\n             onClick={(ev) => this.learnMoreLinkClickHandler(ev, false)}>Learn More</a>\n        </div>\n      ),\n      learnMoreContent: (\n        <p className=\"text-body edit-gift-learn-more-modal-text mt-1\">Please note, M+A is unable to accept returns\n          or manage shipping when you choose this option.</p>\n      )\n    }\n  ]\n  storeItemUrlInputRef = React.createRef()\n  state = {\n    showCategoryModal: false,\n    storeUrlInputHasFocus: false,\n    tempStoreItemUrl: \"\",\n    storeItemUrl: \"\",\n    storeName: \"\",\n    giftImage: {},\n    giftTitle: \"\",\n    giftPrice: \"\",\n    giftQuantity: 1,\n    giftCategories: [],\n    giftMustHave: false,\n    giftGroupGift: false,\n    giftPurchased: false,\n    howToGift: {},\n    giftNote: \"\",\n    showLearnMore: false,\n    learnMoreCashAccept: false,\n    closeMainModalTemp: false,\n    giftVariants: [],\n    currentVariant: {}\n  }\n\n  imageInputRef = React.createRef()\n\n  CUSTOM_PIC_OPTIONS = [\n    {\n      name: \"Replace\",\n      action: () => {\n        if (this.imageInputRef.current) {\n          this.imageInputRef.current.click();\n        }\n      }\n    },\n    {\n      name: \"Remove\",\n      action: () => {\n        this.setState({\n          giftImage: {}\n        })\n      }\n    }\n  ]\n\n  learnMoreLinkClickHandler = (ev, cashAcceptedLearnMore) => {\n    ev.preventDefault()\n    ev.stopPropagation()\n\n    this.setState({\n      showLearnMore: true,\n      learnMoreCashAccept: cashAcceptedLearnMore,\n      closeMainModalTemp: true\n    })\n  }\n\n  closeLearnMoreModalHandler = () => {\n    this.setState({\n      showLearnMore: false,\n      closeMainModalTemp: false\n    })\n  }\n\n  getRefinedCategory = (category) => {\n    let refinedCategory = null;\n    for (let parentCategory of [...this.props.stateCategories]) {\n      let newParentCategory = {...parentCategory}\n      newParentCategory.subCategories = []\n      for (let subCategory of parentCategory.subCategories) {\n        let newSubCategory = {...subCategory}\n        let catToPush = []\n        if (newSubCategory.subProductTypes && newSubCategory.subProductTypes.length > 0) {\n          catToPush = newSubCategory.subProductTypes.map(subCat => {\n            let newSubCat = {...subCat}\n            newSubCat.categoryName = newSubCategory.categoryName + \" (\" + newSubCat.categoryName + \")\";\n            return newSubCat;\n          })\n        }\n        delete newSubCategory.subProductTypes\n        catToPush.unshift(newSubCategory)\n        newParentCategory.subCategories.push(...catToPush)\n      }\n      //  = parentCategory.subCategories.map(subCategory => {\n      //   if (subCategory.subProductTypes.length > 0){\n      //\n      //   }\n      // })\n      let foundCategory = newParentCategory.subCategories.filter(subCat => subCat.id === category.id);\n      if (foundCategory.length === 1) {\n        refinedCategory = {\n          ...foundCategory[0],\n          mainCategory: parentCategory.categoryName,\n          displayName: parentCategory.categoryName + \": \" + foundCategory[0].categoryName\n        }\n        break\n      }\n    }\n\n    return refinedCategory;\n  }\n\n\n  componentDidMount() {\n    if (this.props.data) {\n      // Setting product data to local state\n      const currentCategory = this.getRefinedCategory(this.props.data.registryCategories[0]);\n      const howToGift = this.props.data.isCashAcceptedOnly ? this.howToGiftOptions[0] : this.howToGiftOptions[1]\n      if (this.props.data.item.shopifyItemVariantId && this.props.stateRegistryInfo.id) {\n        let variants = getMAVariant(this.props.stateRegistryInfo.id, this.props.data.item.shopifyItemVariantId)\n        variants.then(res => {\n          if (res) {\n            let currentVariant = res.find(variant => variant.sku === this.props.data.item.sku)\n            this.setState({\n              giftVariants: res,\n              currentVariant: currentVariant ? currentVariant : {}\n            })\n          }\n        })\n      }\n\n      this.setState({\n        storeItemUrl: this.props.data.item.storeItemUrl,\n        tempStoreItemUrl: this.props.data.item.storeItemUrl,\n        storeName: this.props.data.item.store.storeName,\n        giftImage: {\n          type: \"url\",\n          value: this.props.data.item.imageUrl\n        },\n        giftTitle: this.props.data.title,\n        giftPrice: this.props.data.item.price,\n        giftQuantity: this.props.data.quantity,\n        giftCategories: currentCategory ? [currentCategory] : [],\n        giftMustHave: this.props.data.mostWanted,\n        giftGroupGift: this.props.data.isGroupGift,\n        giftPurchased: this.props.data.isPurchased,\n        giftNote: this.props.data.note ? this.props.data.note : \"\",\n        howToGift: howToGift\n      })\n    }\n  }\n\n  closeCategoryModal = (value) => {\n    this.setState({\n      showCategoryModal: value\n    })\n  }\n\n  openSelectCategoryModal = (e) => {\n    e.preventDefault()\n    this.setState({\n      showCategoryModal: true\n    })\n  }\n\n  setCategory = categories => {\n    this.setState({\n      giftCategories: [...categories]\n    })\n  }\n\n  modalCloseHandler = () => {\n    this.props.closeModal()\n  }\n\n  selectFileHandler = (ev) => {\n    if (ev.target && ev.target.files.length > 0) {\n      const file = ev.target.files[0]\n\n      // Verifying file is image\n      if (this.ACCEPTED_IMAGE_TYPE.includes(file.type)) {\n        if (file.size <= this.MAX_IMAGE_SIZE) {\n          let reader = new FileReader();\n\n          reader.onload = (e) => {\n            const newProductImage = {\n              type: \"custom\",\n              value: e.target.result,\n              file: file,\n              fileType: file.type,\n              fileName: file.name\n            }\n            this.setState({\n              giftImage: newProductImage\n            });\n          }\n\n          reader.readAsDataURL(file); // Converting to base64 string\n        } else {\n          toast.error(\"File size exceeds the limit\");\n        }\n      } else {\n        toast.error(\"Please select valid image.\");\n      }\n    }\n  }\n\n  // Input change handlers\n  productNameChangeHandler = (e) => {\n    this.setState({\n      giftTitle: e.target.value\n    })\n  }\n\n  productNoteChangeHandler = (e) => {\n    this.setState({\n      giftNote: e.target.value\n    })\n  }\n\n  productStoreUrlChangeHandler = (e) => {\n    this.setState({\n      tempStoreItemUrl: e.target.value\n    })\n  }\n\n  productPriceChangeHandler = (e) => {\n    if (Number(e.target.value) || e.target.value.length <= 0) {\n      this.setState({\n        giftPrice: e.target.value\n      })\n    }\n  }\n\n  incrementQuantity = () => {\n    this.setState((prevState, _) => ({\n      giftQuantity: prevState.giftQuantity + 1\n    }))\n  }\n\n  decrementQuantity = () => {\n    if (this.state.giftQuantity - 1 > 0) {\n      this.setState((prevState, _) => ({\n        giftQuantity: prevState.giftQuantity - 1\n      }))\n    }\n  }\n\n  toggleMustHave = () => {\n    this.setState((prevState, _) => ({\n      giftMustHave: !prevState.giftMustHave\n    }))\n  }\n\n  toggleGroupGift = () => {\n    this.setState((prevState, _) => ({\n      giftGroupGift: !prevState.giftGroupGift\n    }))\n  }\n\n  togglePurchased = () => {\n    this.setState((prevState, _) => ({\n      giftPurchased: !prevState.giftPurchased\n    }))\n  }\n\n  changeHowToGift = option => {\n    this.setState({\n      howToGift: {...option}\n    })\n  }\n\n  removeItemClickHandler = (e) => {\n    e.preventDefault();\n    this.props.openRemoveModal(true);\n    this.modalCloseHandler()\n  }\n\n  storeUrlChangeClickHandler = (e, inputRef) => {\n    e.preventDefault();\n    if (inputRef.current) {\n      inputRef.current.disabled = false;\n      inputRef.current.focus();\n    }\n  }\n\n  storeItemUrlBlurHandler = e => {\n    e.preventDefault();\n    setTimeout(() => {\n      this.setState({\n        storeUrlInputHasFocus: false\n      })\n    }, 100)\n    e.target.disabled = true;\n  }\n\n  resetStoreItemUrlClickHandler = inputRef => {\n    this.setState((prevState, _) => ({\n      tempStoreItemUrl: prevState.storeItemUrl\n    }))\n    if (inputRef.current) {\n      inputRef.current.disabled = true;\n      inputRef.current.blur();\n    }\n  }\n\n  confirmStoreItemUrlClickHandler = inputRef => {\n    this.setState((prevState, _) => ({\n      storeItemUrl: prevState.tempStoreItemUrl\n    }))\n    if (inputRef.current) {\n      inputRef.current.disabled = true;\n      inputRef.current.blur();\n    }\n  }\n\n  validateData = () => {\n    try {\n      new URL(this.state.storeItemUrl);\n    } catch {\n      toast.error(\"Invalid store URL\")\n      return false\n    }\n\n    if (this.state.giftTitle.length <= 0) {\n      toast.error(\"Product Name cannot be empty\")\n      return false\n    }\n\n    if (this.state.giftPrice.length <= 0) {\n      toast.error(\"Price cannot be empty\")\n      return false\n    }\n  }\n\n  dataURItoBlob = (dataURI, fileType, fileName) => {\n    let byteString = atob(dataURI.split(',')[1]);\n    let ab = new ArrayBuffer(byteString.length);\n    let ia = new Uint8Array(ab);\n    for (let i = 0; i < byteString.length; i++) {\n      ia[i] = byteString.charCodeAt(i);\n    }\n\n    let blob = new Blob([ab], {type: fileType});\n    return new File([blob], fileName, {\n      type: fileType\n    })\n  }\n\n  saveItemClickHandler = () => {\n    if (!this.validateData()) {\n      let fd = new FormData()\n      let cashAcceptedOnly = false\n      if (this.state.howToGift.id) {\n        cashAcceptedOnly = this.state.howToGift.id === 1\n      }\n      let reqData = {\n        query: UPDATE_REGISTRY_ITEMS,\n        operationName: \"updateRegistryItem\",\n        variables: {\n          \"itemId\": this.props.data.id,\n          \"itemData\": {\n            \"quantity\": this.state.giftQuantity,\n            \"mostWanted\": this.state.giftMustHave,\n            \"isGroupGift\": this.state.giftGroupGift,\n            \"isCashAcceptedOnly\": cashAcceptedOnly,\n            \"registryCategories\": this.state.giftCategories.map(category => category.id),\n            \"price\": this.state.giftPrice,\n            \"note\": this.state.giftNote,\n            \"title\": this.state.giftTitle\n          }\n        }\n      }\n\n      if (this.state.currentVariant.pattern) {\n        reqData.variables.itemData['pattern'] = this.state.currentVariant.pattern\n      }\n\n      if (this.state.currentVariant.variantId) {\n        reqData.variables.itemData['shopifyItemVariantId'] = this.state.currentVariant.variantId\n      }\n\n      if (this.state.giftImage.type === \"custom\") {\n        reqData.variables.itemData['images'] = null;\n\n        let map = {\n          images: [\"variables.itemData.images\"]\n        }\n        fd.append(\"map\", JSON.stringify(map))\n        fd.append(\"images\", this.dataURItoBlob(this.state.giftImage.value, this.state.giftImage.fileType, this.state.giftImage.fileName))\n      }\n\n      if (Object.keys(this.state.giftImage).length <= 0) {\n        reqData.variables.itemData['images'] = null;\n      }\n      fd.append(\"operations\", JSON.stringify(reqData))\n\n      graphQLMultipart(fd).then(res => {\n        if (res.data.data) {\n          getProducts(this.props.stateRegistryInfo.id, this.props.dispatch)\n          getCategories(this.props.stateRegistryInfo.id, this.props.dispatch)\n          toast.success(<p><b>{this.state.giftTitle}</b> is updated.</p>)\n          this.modalCloseHandler()\n        }\n      }).catch(err => {\n        toast.error(\"Some error occurred while updating product\")\n        console.log(err.response)\n      })\n    }\n  }\n\n  // Gift Variant change handler\n  changeCurrentVariantClickHandler = (variant) => {\n    if (!variant) {\n      return\n    }\n    let giftImage = {\n      type: \"url\",\n      value: variant.imageUrl\n    }\n    let giftPrice = variant.price\n\n    this.setState({\n      giftImage: giftImage,\n      giftPrice: giftPrice,\n      currentVariant: {...variant}\n    })\n  }\n\n  render() {\n    const modalFooter = (\n      <div className=\"d-flex w-100 align-items-center justify-content-between\">\n        <a href=\"#\" className=\"edit-gift-links font-medium\" onClick={(e) => this.removeItemClickHandler(e)}>Remove\n          Item</a>\n        <div>\n          <Button variant=\"secondary\" className=\"text-body font-medium px-2 py-1 mr-2\"\n                  onClick={() => window.open(this.state.storeItemUrl, '_blank')}>View Details</Button>\n          <Button variant=\"primary\" className=\"text-body font-medium px-2 py-1 mr-2\"\n                  onClick={this.saveItemClickHandler}>Save & Close</Button>\n        </div>\n      </div>\n    )\n\n    return (\n      <>\n        <Modal\n          show={this.props.show && !this.state.closeMainModalTemp}\n          title=\"Edit item\"\n          footer={modalFooter}\n          closeModal={this.modalCloseHandler}>\n\n          <div className=\"row mt-4 edit-gift-content\">\n            <div className=\"col-12 col-md-5\">\n              <div className={[\"mr-3 edit-gift-image-section\"].join(\" \")}>\n                {!this.state.giftImage.value ?\n                  //TODO: Image From CDN\n                  <>\n                    <div className=\"edit-gift-default-image d-flex\">\n                      <img\n                        className=\"m-auto\"\n                        src=\"https://raw.githack.com/HetPatel-Aubergine/testCDNRepo/master/icons/gift_icon.svg\"\n                        alt=\"No Image\"/>\n                    </div>\n                    <p className=\"text-sm edit-gift-upload-image-size mt-2\">Upload a photo with maximum 2 mb size.</p>\n                  </>\n                  : null}\n\n                {this.state.giftImage.value ?\n                  <img src={this.state.giftImage.value} className=\"edit-gift-image\" alt=\"Gift\"/>\n                  : null}\n\n                {/*  No edit image option when store is not M&A */}\n                {this.state.storeName !== this.M_A_STORE_NAME ?\n                  <div className=\"edit-gift-custom-image-more-options\">\n                    <MoreOption\n                      data={this.CUSTOM_PIC_OPTIONS}\n                      iconClass=\"icon-preview\"\n                      activeOptionClass=\"view-registry-cover-option-active\"\n                      buttonClass=\"edit-gift-update-image-option p-1\"/>\n\n                    <input type=\"file\" className=\"d-none\" accept={this.ACCEPTED_IMAGE_TYPE.join(\",\")}\n                           ref={this.imageInputRef}\n                           onChange={(ev) => this.selectFileHandler(ev)}/>\n                  </div>\n                  : null}\n              </div>\n            </div>\n            <div className=\"col-12 col-md-7 edit-gift-detail\">\n              <div className=\"ml-3 mr-7\">\n                <div className=\"row\">\n                  <div className=\"col\">\n                    {/* When store is M&A */}\n                    {this.state.storeName === this.M_A_STORE_NAME ?\n                      <h2>{this.state.giftTitle}</h2>\n                      : null}\n\n                    {/* When store is not M&A */}\n                    {this.state.storeName !== this.M_A_STORE_NAME ?\n                      <div className=\"edit-gift-input-container\">\n                        <p className=\"edit-gift-input-label text-sm font-medium mb-1\">Product Name</p>\n                        <textarea\n                          rows={2}\n                          className=\"w-100 mw-100 edit-gift-input h2 p-2 edit-gift-resize-none\"\n                          value={this.state.giftTitle}\n                          onChange={(e) => this.productNameChangeHandler(e)}\n                        />\n                      </div>\n                      : null}\n                  </div>\n                </div>\n\n                {this.state.storeName !== this.M_A_STORE_NAME ?\n                  <div className=\"row mt-5\">\n                    <div className=\"col\">\n                      {/* When store is not M&A */}\n                      <div className=\"edit-gift-input-container\">\n                        <p className=\"edit-gift-input-label text-sm font-medium mb-1\">Product Name</p>\n                        <div className=\"position-relative\">\n                          <input\n                            className=\"w-100 mw-100 edit-gift-input text-body py-1 pl-2 pr-14\"\n                            value={this.state.tempStoreItemUrl}\n                            ref={this.storeItemUrlInputRef}\n                            disabled={true}\n                            onFocus={() => this.setState({storeUrlInputHasFocus: true})}\n                            onBlur={(e) => this.storeItemUrlBlurHandler(e)}\n                            onChange={(e) => this.productStoreUrlChangeHandler(e)}\n                          />\n                          {!this.state.storeUrlInputHasFocus ?\n                            <a className=\"edit-gift-input-change-url edit-gift-links font-medium\" href=\"#\"\n                               onClick={(e) => this.storeUrlChangeClickHandler(e, this.storeItemUrlInputRef)}>Change</a>\n                            :\n                            <div className=\"edit-gift-store-url-submit\">\n                              {/*TODO: Change icons once added to global icons*/}\n                              <button className=\"icon-close mr-3\"\n                                      onClick={() => this.resetStoreItemUrlClickHandler(this.storeItemUrlInputRef)}/>\n                              <button className=\"icon-check\"\n                                      onClick={() => this.confirmStoreItemUrlClickHandler(this.storeItemUrlInputRef)}/>\n                            </div>\n                          }\n\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  : null}\n\n                <div className=\"row mt-5\">\n                  <div className=\"col-6\">\n                    {/* When store is M&A */}\n                    <div className=\"edit-gift-input-container\">\n                      <p className=\"edit-gift-input-label text-sm font-medium mb-1\">Price</p>\n                      {/* When store is M&A */}\n                      {this.state.storeName === this.M_A_STORE_NAME ?\n                        <h4>$ {this.state.giftPrice}</h4>\n                        : null}\n                      {/* When store is not M&A */}\n                      {this.state.storeName !== this.M_A_STORE_NAME ?\n                        <div className=\"edit-gift-input-overlay\">\n                          <input\n                            type=\"text\"\n                            className=\"w-100 mw-100 edit-gift-input py-1 text-body pl-5\"\n                            value={this.state.giftPrice}\n                            onChange={(e) => this.productPriceChangeHandler(e)}/>\n                          <span className=\"text-body edit-gift-price-currency\">$</span>\n                        </div>\n                        : null}\n                    </div>\n                  </div>\n\n                  <div className=\"col-6\">\n                    {/* When store is M&A */}\n                    <div className=\"edit-gift-input-container\">\n                      <p className=\"edit-gift-input-label text-sm font-medium mb-1\">Quantity</p>\n                      <Counter\n                        className=\"mt-2\"\n                        counter={this.state.giftQuantity}\n                        incrementHandler={this.incrementQuantity}\n                        decrementHandler={this.decrementQuantity}\n                      />\n                    </div>\n                  </div>\n                </div>\n\n                {/* Variant is only for MA product */}\n                {this.state.storeName === this.M_A_STORE_NAME && this.state.giftVariants.length > 0 ?\n                  <div className=\"row mt-5\">\n                    <div className=\"col\">\n                      <div className=\"edit-gift-input-container\">\n                        <p className=\"edit-gift-input-label text-sm font-medium mb-1\">Color</p>\n                        <div className=\"d-flex flex-wrap\">\n                          {this.state.giftVariants.map(variant => (\n                            <button\n                              className={[\"edit-gift-variant mr-3 mb-2 p-2\", this.state.currentVariant?.id === variant.id ? \"edit-gift-variant-selected\" : \"\"].join(\" \")}\n                              style={{backgroundImage: `url(${variant.iconUrl})`}}\n                              onClick={() => this.changeCurrentVariantClickHandler(variant)}\n                            />\n                          ))}\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  : null}\n\n\n                <div\n                  className={[\"row\", this.state.storeName === this.M_A_STORE_NAME && this.state.giftVariants.length > 0 ? \"mt-3\" : \"mt-5\"].join(\" \")}>\n                  <div className=\"col\">\n                    {/* When store is M&A */}\n                    <div className=\"edit-gift-input-container\">\n                      <div className=\"mb-1 d-flex\">\n                        <p className=\"edit-gift-input-label text-sm font-medium\">Category</p>\n                        {/* When store is not M&A */}\n                        {this.state.storeName !== this.M_A_STORE_NAME ?\n                          <a href=\"#\" className=\"edit-gift-links font-medium text-sm ml-2\"\n                             onClick={(e) => this.openSelectCategoryModal(e)}>Add</a>\n                          : null}\n                      </div>\n                      <div>\n                        {this.state.giftCategories.map(category => {\n                          return <CategoryPill text={`${category.mainCategory} : ${category.categoryName}`}\n                                               className=\"mt-1 mr-1\"/>\n                        })}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"row mt-5\">\n                  <div className=\"col d-flex\">\n                    <TogglePills\n                      iconClass=\"icon-heart\"\n                      activeClass={this.state.giftMustHave ? \"edit-gift-active-must-have\" : null}\n                      onClick={this.toggleMustHave}\n                      text=\"Must Have\"\n                      className=\"mr-2\"/>\n                    <TogglePills\n                      iconClass=\"icon-guest\"\n                      activeClass={this.state.giftGroupGift ? \"edit-gift-active-group-gift\" : null}\n                      onClick={this.toggleGroupGift}\n                      text=\"Group Gift\"\n                      className=\"mr-2\"/>\n                  </div>\n                </div>\n\n                {/* When store is not M&A */}\n                {this.state.storeName !== this.M_A_STORE_NAME ?\n                  <div className=\"row mt-5\">\n                    <div className=\"col\">\n                      <div className=\"edit-gift-input-container\">\n                        <p className=\"edit-gift-input-label text-sm font-medium\">How to gift?</p>\n                        {this.howToGiftOptions.map((option, index) => (\n                          <div className={index === 0 ? \"mt-1\" : \"mt-2\"} key={\"how-to-gift-option-\" + option.id}>\n                            <RadioButton\n                              name=\"how-to-gift\"\n                              textClass=\"text-sm\"\n                              // display={option.text}\n                              checked={option.id === this.state.howToGift.id ? true : null}\n                              changeHandler={() => this.changeHowToGift(option)}>{option.content}</RadioButton>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                  </div>\n                  : null}\n\n                <div className=\"row mt-5\">\n                  <div className=\"col\">\n                    <div className=\"edit-gift-input-container\">\n                      <p className=\"edit-gift-input-label text-sm font-medium mb-1\">Notes</p>\n                      <textarea\n                        rows={2}\n                        className=\"w-100 mw-100 edit-gift-input text-body p-2\"\n                        placeholder=\"Write a note for your friends and family\"\n                        value={this.state.giftNote}\n                        onChange={(e) => this.productNoteChangeHandler(e)}\n                      />\n                    </div>\n                  </div>\n                </div>\n\n              </div>\n            </div>\n          </div>\n        </Modal>\n        {this.state.showCategoryModal ?\n          <SelectCategory\n            showModal={this.state.showCategoryModal}\n            closeModal={this.closeCategoryModal}\n            currentCategory={this.state.giftCategories ? [...this.state.giftCategories] : []}\n            changeCurrentCategory={this.setCategory}\n          />\n          : null}\n\n        <Modal\n          show={this.state.showLearnMore}\n          title={this.state.learnMoreCashAccept ? this.howToGiftOptions[0].text : this.howToGiftOptions[1].text}\n          size=\"md\"\n          closeIconClass=\"mb-auto\"\n          footer={(\n            <Button variant=\"primary\" className=\"px-6 py-1\" onClick={this.closeLearnMoreModalHandler}>Ok, got\n              it!</Button>\n          )}\n          closeModal={this.closeLearnMoreModalHandler}>\n          {this.state.learnMoreCashAccept ? this.howToGiftOptions[0].learnMoreContent : this.howToGiftOptions[1].learnMoreContent}\n        </Modal>\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  stateCategories: state.myRegistry.checkList,\n  stateRegistryInfo: state.registry.info\n})\n\nexport default connect(\n  mapStateToProps\n)(EditGift);","import React, {useState} from 'react'\nimport \"./AddedCard.scss\";\nimport MoreOption from \"../more-option/MoreOption\";\nimport {\n  sortableHandle,\n} from 'react-sortable-hoc';\nimport {useSelector, useDispatch} from 'react-redux';\nimport Modal from \"../modal-component/ModalComponent\";\nimport CardItem from \"../card-item/CardItem\";\nimport {addProductHandler} from 'utils/commonFunction';\nimport Button from \"../button-component/ButtonComponent\";\nimport EditGift from \"../edit-gift/EditGift\";\nimport GiftStatusPill from \"../gift-status-pill/GiftStatusPill\";\nimport MarkAsPurchased from \"../mark-as-purchased/MarkAsPurchased\";\n\nconst AddedCard = (props) => {\n\n  const dispatch = useDispatch();\n  let stateGuestViewRegistry = useSelector(state => state.viewRegistry.guestViewRegistry)\n  const stateRecommendedProducts = useSelector(state => state.myRegistry.recommendedProducts)\n  const stateFilterApplied = useSelector(state => state.viewRegistry.viewFilterApplied.childFilter)\n  const stateAddedProducts = useSelector(state => state.myRegistry.addedProducts)\n  const stateRegistryInfo = useSelector(state => state.registry.info)\n  const [recommendedProducts, setRecommendedProducts] = useState([])\n  const [show, setShow] = useState(false);\n  const modalTitle = `Recommended ${props.data.registryCategories[0].category.categoryName}`\n  const [showRemoveModel, setShowRemoveModel] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [updateModal, setUpdateModal] = useState(false);\n  let [showMarkPurchased, setShowMarkPurchased] = useState(false)\n\n  const showRecommendation = (e, category) => {\n    e.stopPropagation()\n    // Fetching all recommendations for that particular product category\n    let categoryRecommended = [...stateRecommendedProducts.filter(product => Number(category.id) === Number(product.category.id))]\n\n    // Removing duplicate products if found any\n    let jsonObject = categoryRecommended.map(JSON.stringify);\n    let uniqueSet = new Set(jsonObject);\n    categoryRecommended = Array.from(uniqueSet).map(JSON.parse);\n\n    setRecommendedProducts(categoryRecommended.map(product => {\n      // Resetting recommended product quantity\n      product.quantity = 1;\n      if (product.maItemVariantItemRecommendation.length) {\n        product['activeVariant'] = product.maItemVariantItemRecommendation[0]\n      } \n      else {\n        product['activeVariant'] = null\n      }\n      return product;\n    }));\n\n    setShow(true);\n  }\n\n  const showRemoveModelPopUp = (e) => {\n    e.stopPropagation()\n    setShowRemoveModel(true);\n  }\n\n  const showMarkAsPurchasedModal = (e) => {\n    e.stopPropagation()\n    setShowMarkPurchased(true);\n  }\n\n  let moreOptionsData = [\n    {\n      name: \"Remove\",\n      action: (e) => showRemoveModelPopUp(e)\n    }\n  ]\n\n  if (!props.data.isPurchased) {\n    moreOptionsData.unshift({\n      name: \"Record a purchase\",\n      action: (e) => showMarkAsPurchasedModal(e)\n    })\n  }\n\n  if (Number(props.data.registryCategories[0].category.categoryType.id) !== 2) {\n    moreOptionsData.unshift({\n      name: \"View Recommendations\",\n      action: (e) => showRecommendation(e, props.data.registryCategories[0])\n    })\n  }\n\n\n  const removeConfirmFooter = (\n    <>\n      <Button className='py-1 px-3 font-medium' variant='secondary' onClick={() => setShowRemoveModel(false)}>Do not\n        remove</Button>\n      <Button className='py-1 px-3 font-medium' variant='primary' onClick={() => {\n        props.removeProductFromCartHandler();\n        setShowRemoveModel(false);\n      }}>Remove</Button>\n    </>\n  )\n\n  // Incrementing quantity of local recommended product\n  const incrementQuantity = (cardId, quantity) => {\n    let newRecommended = [];\n    for (let product of [...recommendedProducts]) {\n      if (product.id === cardId) {\n        product.quantity += quantity;\n      }\n      newRecommended.push(product)\n    }\n    setRecommendedProducts(newRecommended)\n  }\n\n  // Decrementing quantity of local recommended product\n  const decrementQuantity = (cardId, quantity) => {\n    let newRecommended = [];\n    let updated = false;\n    for (let product of [...recommendedProducts]) {\n      if (product.id === cardId) {\n        if (product.quantity - quantity <= 0) {\n          break;\n        } else {\n          product.quantity -= quantity;\n          updated = true;\n        }\n      }\n      newRecommended.push(product)\n    }\n\n    if (updated) {\n      setRecommendedProducts(newRecommended)\n    }\n  }\n\n  // Open Edit Gift Modal\n  const openEditModal = () => {\n    if (props.data.registryCategories.length > 0 && props.data.registryCategories[0]?.category.categoryType.id !== \"2\"){\n      setShowEditModal(true)\n    }\n  }\n\n  // Handle drag\n  // TODO: Change Draggable icon\n  const DragHandle = sortableHandle(() => <i\n    className={[\"ml-4 drag-icon m-a-popover m-a-popover-top-right\", (props.disabledDrag || stateFilterApplied.length !== 0) ? \"disabled-drag\" : \"\"].join(\" \")}>\n    <div className=\"m-a-popover-content drag-drop-popover w-auto px-3 py-2\">\n      <p className=\"text-sm font-weight-normal m-a-popover-content-desc\">Rearrange</p>\n    </div>\n  </i>);\n\n  const setActiveRecommandationVariantHandler = (productID, variant) => {\n    let newRecommended = [];\n    let updated = false;\n    for (let product of [...recommendedProducts]) {\n      if (productID === product.id) {\n        product.activeVariant = variant\n        updated = true\n      }\n      newRecommended.push(product)\n    }\n\n    if (updated) {\n      setRecommendedProducts(newRecommended)\n      setUpdateModal(!updateModal)\n    }\n  }\n\n  return (\n    <>\n      {!props.multipleCategories ?\n        <>\n          <div className=\"added-card py-5 pr-0 pr-sm-0 pr-md-2 px-2 px-md-0\" onClick={openEditModal}>\n            <div className=\"row\">\n              <div className=\"col-12 col-md-2\">\n                <div className=\"pl-0 pl-md-2\">\n                  {props.data?.item.imageUrl ?\n                    <img\n                      className={[\"product-img d-block mx-md-auto mx-0\", Number(props.data.registryCategories[0].category.categoryType.id) === 2 ? \"added-card-product-image-radius\" : \"\"].join(\" \")}\n                      src={props.data?.item.imageUrl}\n                      alt={props.data?.item.title}/>\n                    :\n                    <div className=\"added-card-no-product-image\"/>\n                  }\n\n                </div>\n\n              </div>\n              <div className={props.draggable ? \"col-12 col-md-6\" : \"col-12 col-md-7\"}>\n                {/* TODO: change category */}\n                <div\n                  className=\"text-sm category my-3 my-md-0\">{props.data.registryCategories[0].category.parentCategory && props.data.registryCategories[0].category.parentCategory.parentCategory !== null ? props.data.registryCategories[0].category.parentCategory.categoryName + \" (\" + props.data.registryCategories[0].category.categoryName + \")\" : props.data.registryCategories[0].category.categoryName}</div>\n                <h2>{props.data.title}</h2>\n                <div className=\"d-flex mt-2\">\n                  <div className=\"\">${props.data.item.price}</div>\n                  {/*/!* TODO: Add Strikeout price dynamic *!/*/}\n                  {/*<div className=\"text-sm my-auto ml-1 strick-price\">$257.99</div>*/}\n                </div>\n                {!props.data.isGroupGift ?\n                  props.data.quantity > 1 ?\n                    <>\n                      {props.data.quantityStatus.purchased_quantity > 0 ?\n                        <GiftStatusPill variant=\"purchased\"\n                                        text={`${props.data.quantityStatus.purchased_quantity} Purchased`}\n                                        className=\"d-inline-block mr-1 mt-2\"/>\n                        : null}\n                      {props.data.quantityStatus.reserved_quantity > 0 ?\n                        <GiftStatusPill variant=\"reserved\"\n                                        text={`${props.data.quantityStatus.reserved_quantity} Reserved`}\n                                        className=\"d-inline-block mr-1 mt-2\"/>\n                        : null}\n                      {props.data.quantityStatus.still_needed > 0 ?\n                        <GiftStatusPill\n                          text={`${props.data.quantityStatus.still_needed} ${props.data.quantityStatus.still_needed === props.data.quantity ? 'Requested' : 'Still Needed'}`}\n                          className=\"d-inline-block mr-1 mt-2\"/>\n                        : null}\n                    </>\n                    :\n                    <>\n                      {props.data.isPurchased ?\n                        <GiftStatusPill variant=\"purchased\" text=\"Purchased\"\n                                        className=\"d-inline-block mr-1 mt-2\"/> : null}\n                      {props.data.isReserved ?\n                        <GiftStatusPill variant=\"reserved\" text=\"Reserved\"\n                                        className=\"d-inline-block mr-1 mt-2\"/> : null}\n                    </>\n                  :\n                  <>\n                    <GiftStatusPill variant=\"group-gift\"\n                                    text={`Group Gift`}\n                                    className=\"d-inline-block mr-1 mt-2\"/>\n                  </>\n                }\n\n              </div>\n              <div className={[\n                props.draggable ? \"col-12 col-md-4 added-card-buttons\" : \"col-12 col-md-3 added-card-buttons\",\n              ].join(\" \")}\n              >\n                <div className=\"d-flex align-items-baseline justify-content-end mr-md-1 mr-3\">\n                  {!stateGuestViewRegistry ?\n                    <button\n                      className={[\n                        \"mr-0 mr-sm-0 mr-md-4 d-flex align-items-center added-gift-must-have-btn px-2\",\n                        props.data.mostWanted ? \"added-gift-must-have-active\" : \"added-gift-must-have-not-active\"\n                      ].join(\" \")}\n                      onClick={props.toggleMustHave}\n                    >\n                      <i className={[\"icon mr-1 d-block\", props.data.mostWanted ? \"heart-fill\" : \"heart\"].join(\" \")}/>\n                      <p className=\"text-sm added-gift-must-have-text d-none d-sm-none d-md-inline-block \">Must Have</p>\n                    </button> :\n                    props.data.mostWanted ?\n                      <button\n                        className=\"mr-4 d-flex align-items-center added-gift-must-have-btn px-2 added-gift-must-have-active\">\n                        <i className=\"icon mr-1 d-block heart-fill\"/>\n                        <p className=\"text-sm added-gift-must-have-text d-none d-sm-none d-md-inline-block \">Must\n                          Have</p>\n                      </button>\n                      : <></>\n                  }\n                  {!stateGuestViewRegistry ?\n                    <MoreOption data={moreOptionsData} iconClass=\"icon-more-hori\"/>\n                    : <></>}\n                  {/* TODO: Add icon/rearrange icon */}\n                  {props.draggable && !stateGuestViewRegistry ?\n                    <DragHandle/> : <></>}\n                </div>\n              </div>\n            </div>\n          </div>\n          {props.isViewCard ?\n            <div className=\"row\">\n              <div className=\"col\">\n                {props.data.registryCategories.length > 1 ?\n                  props.data.registryCategories.map(category =>\n                    props.data.registryCategories[0].id !== category.id ?\n                      <div className=\"text-body font-medium p-6 added-card-other-category\">\n                        You have\n                        added {props.data.item.quantity > 1 ? props.data.item.quantity : null} {category.category.parentCategory.parentCategory !== null ? category.category.parentCategory.categoryName + \" (\" + category.category.categoryName + \")\" : category.category.categoryName} as\n                        part of <a className=\"title-link\" tabindex=\"0\" onClick={openEditModal}>{props.data.title}</a>\n                      </div>\n                      : null\n                  )\n                  : null}\n              </div>\n            </div> : null}\n        </>\n        :\n        <div className=\"row\">\n          <div className=\"col\">\n            <div className=\"text-body font-medium p-4 p-md-6 added-card-other-category\">\n              You have\n              added {props.data.item.quantity > 1 ? props.data.item.quantity : null} {props.multipleCategories.category.parentCategory && props.multipleCategories.category.parentCategory.parentCategory !== null ? props.multipleCategories.category.parentCategory.categoryName + \" (\" + props.multipleCategories.category.categoryName + \")\" : props.multipleCategories.category.categoryName} as\n              part of <a className=\"title-link\" tabindex=\"0\" onClick={openEditModal}>{props.data.title}</a>\n            </div>\n          </div>\n        </div>\n      }\n      <Modal\n        updateModal={updateModal}\n        show={show}\n        closeModal={() => setShow(false)}\n        title={modalTitle}\n        size=\"xl\"\n      >\n        <div className=\"position-relative added-card-recommended\">\n          <div className=\"row category-recommended-products\">\n            {recommendedProducts.map((card, index) => (\n              <div className=\"col-4 mb-5\" key={\"CardItem-\" + index}>\n                <CardItem\n                  data={card}\n                  incrementQuantityHandler={() => incrementQuantity(card.id, 1)}\n                  decrementQuantityHandler={() => decrementQuantity(card.id, 1)}\n                  activeVariant={card.activeVariant}\n                  setActiveRecommandationVariantHandler={(variant) => setActiveRecommandationVariantHandler(card.id, variant)}\n                  addProductHandler={() => addProductHandler(card, stateAddedProducts, stateRegistryInfo, dispatch)}\n                />\n              </div>\n            ))}\n            {recommendedProducts.length <= 0 ?\n              <div className=\"col text-center py-4\"><h4>No recommendation found</h4></div> : null}\n          </div>\n          {recommendedProducts.length > 0 ? <div className=\"added-card-recommends-bottom-gradient\"/> : null}\n        </div>\n      </Modal>\n      <Modal\n        show={showRemoveModel}\n        size=\"md\"\n        footer={removeConfirmFooter}\n      >\n        <h2>Do you want to remove {props.data.title}? </h2>\n      </Modal>\n\n      {showEditModal ?\n        <EditGift\n          show={showEditModal}\n          closeModal={() => setShowEditModal(false)}\n          data={props.data}\n          openRemoveModal={setShowRemoveModel}\n        />\n        : null}\n        <MarkAsPurchased\n          show={showMarkPurchased}\n          closeModal={() => setShowMarkPurchased(false)}\n          data={props.data}\n        />\n    </>\n  )\n}\n\nexport default AddedCard\n","import React from \"react\";\nimport \"./CheckListItems.scss\";\nimport { withTranslation } from \"react-i18next\";\nimport { withRouter } from \"react-router\";\nimport routes from \"utils/routes\";\nimport { GET_PERSONALIZE_QUESTIONS } from \"api/queries\";\nimport { graphQL } from \"api/axios\";\nimport { toast } from \"react-toastify\";\nimport {connect} from \"react-redux\";\n\nclass CheckList extends React.Component {\n\n    gotoPersonalize = (event) => {\n        event.preventDefault();\n        // this.props.history.push(routes.PERSONALIZE.HOME)\n\n        // If user has given answer or not\n        let isQuizPending = false\n        let reqData = {\n            query: GET_PERSONALIZE_QUESTIONS,\n            variables: {\n                registryId: this.props.stateRegistryInfo.id,\n            }\n        }\n        // To route to edit-checklist or Quiz\n        graphQL(reqData).then(res => {\n            if (res.data.data.editablePersonalizeQuestions) {\n                const questions = res.data.data.editablePersonalizeQuestions\n                for (let question of questions) {\n                    if (question.answers.length > 0) {\n                        isQuizPending = false\n                        break;\n                    }\n                }\n                if (isQuizPending) {\n                    this.props.history.push(routes.PERSONALIZE.HOME)\n                } else {\n                    this.props.history.push(routes.PERSONALIZE.CHECKLIST)\n                }\n\n            }\n        }).catch(err => {\n            toast.error(\"Error occurred while fetching questions\");\n            console.error(err);\n        })\n    }\n\n    render() {\n        return (\n            <div className=\"mb-0 mb-md-3 w-100\">\n                <div className=\"row check-list-header\">\n                    <div className=\"col d-flex align-items-baseline pb-1\">\n                        <p className=\"checklist-title mb-0\">{this.props.t(\"checkList.title\")}</p>\n                        <a href=\"#\" className=\"ml-2 text-sm checklist-personalize d-none d-md-inline-block\" tabindex=\"0\" onClick={(e) => this.gotoPersonalize(e)}>{this.props.t(\"checkList.personalize\")}</a>\n                    </div>\n                </div>\n                <div className=\"row\">\n                    <div className=\"col d-flex\">\n                        <div className=\"check-list-background\">\n                            <div className=\"check-list-progress mw-100\" style={{width: `${this.props.percentage}%`}} />\n                        </div>\n                    </div>\n                </div>\n                <div className=\"row check-list-header d-inline-block d-md-none\">\n                    <a href=\"#\" className=\"text-sm checklist-personalize ml-3 mt-3\" tabindex=\"0\" onClick={(e) => this.gotoPersonalize(e)}>{this.props.t(\"checkList.personalize\")}</a>\n                </div>\n            </div>\n\n        );\n    }\n};\n\nconst mapStateToProps = state => {\n    return {\n        stateRegistryInfo: state.registry.info,\n    }\n}\n\nexport default withTranslation()(withRouter(connect(\n    mapStateToProps\n)(CheckList)));","import React, { Component } from \"react\";\nimport \"./CheckListItems.scss\";\nimport CircularProgress from \"modules/commons/components/circular-progress/CircularProgress\";\nimport Accordion from 'react-bootstrap/Accordion';\nimport Card from 'react-bootstrap/Card';\nimport { connect } from 'react-redux';\n\nclass CheckListItems extends Component {\n\n  constructor(props) {\n    super(props);\n    // create a ref to store the checkList header DOM element\n    this.checkListHeader = React.createRef();\n  }\n\n  getOffset = (el) => {\n    const rect = el.getBoundingClientRect();\n    return {\n      left: rect.left + window.scrollX,\n      top: rect.top + window.scrollY\n    };\n  }\n\n  scrollToCategory = (category) => {\n    const categorySection = document.getElementById(category)\n    if (categorySection) {\n      let offset = this.getOffset(categorySection);\n      window.scrollTo(0, offset.top)\n    }\n  }\n\n  getSubList = (getSubList) => {\n    let subItems = getSubList.map(({ id, categoryName, addedItemsCount, totalItemsCount, subProductTypes, parentCategory }) => {\n      return (\n        <>\n          {subProductTypes.length === 0 ?\n            <div className=\"d-flex card-body-contain align-items-center py-2\" key={categoryName + id}\n              onClick={() => this.scrollToCategory(parentCategory.name + '(' + categoryName + ')')}>\n              <p className=\"mb-0 card-body-header text-sm\">{categoryName}</p>\n\n              <div className='ml-auto mb-0 align-self-end text-sm progess-divison'>\n                {addedItemsCount >= totalItemsCount ?\n                  <div className=\"icon-done\" /> :\n                  (totalItemsCount > 0 ?\n                    <div className='ml-auto mb-auto align-self-end card-progress'>\n                      {addedItemsCount}/{totalItemsCount}\n                    </div>\n                    : null)}\n              </div>\n            </div> :\n            // Todo handle scroll\n            <>\n              <div className=\"card-body-contain align-items-center py-2\" key={categoryName + id}\n                onClick={() => this.scrollToCategory(categoryName)}>\n                <p className=\"mb-0 card-body-header text-sm\">{categoryName}</p>\n              </div>\n              <div className=\"text-sm\">\n                {subProductTypes.map((subProductType, index) => (\n                  <div className=\"sub-product-list d-flex py-2 ml-3 align-items-center\"\n                    key={subProductType.categoryName + subProductType.id}\n                    onClick={() => this.scrollToCategory(subProductType.parentCategory.name + '(' + subProductType.categoryName + ')')}\n                  >\n                    <div>{subProductType.categoryName}</div>\n                    <div className='ml-auto mb-0 align-self-end text-sm progess-divison'>\n                      {subProductType.addedItemsCount >= subProductType.totalItemsCount ?\n                        <div className=\"icon-done\" /> :\n                        (totalItemsCount > 0 ?\n                          <div className='ml-auto mb-auto align-self-end card-progress'>\n                            {subProductType.addedItemsCount}/{subProductType.totalItemsCount}\n                          </div>\n                          : null)}\n\n                    </div>\n                  </div>\n                ))}\n\n              </div>\n            </>}\n        </>\n      )\n\n    });\n    return subItems;\n  }\n\n  handleToggleEvent = () => {\n    const checkListIconEl = this.checkListHeader.current.firstChild;\n    checkListIconEl.classList.toggle(\"closed\");\n    checkListIconEl.classList.toggle(\"opened\");\n  }\n\n  render() {\n\n    let subListItem = this.getSubList(this.props.item.subCategories)\n    // TODO: For calculation for subitem\n    // let parentTotal = 10;\n    // let parentAdded = 16;\n\n    // for (let subItems of this.props.item.subCategories) {\n    //     if (subItems.added !== subItems.total) {\n    //         parentAdded += Number(subItems.added);\n    //         parentTotal += Number(subItems.total);\n    //     }\n    // }\n\n    return (\n      <Accordion className=\"accordion-list mb-5\" key={this.props.item.categoryName}>\n        {this.props.item.categoryName && this.props.item.isParent ?\n          <Card>\n            <Accordion.Toggle\n              onClick={this.handleToggleEvent}\n              as={Card.Header}\n              id={this.props.item.categoryName}\n              eventKey={this.props.item.categoryName}\n            >\n              <div ref={this.checkListHeader} className='d-flex icon-checklist'>\n                <span className=\"checklist-icon-arrow\" />\n                <div className=\"ml-3 mb-0 w-100\">\n                  <div className=\"text-body\">{this.props.item.categoryName}</div>\n                  <div className=\"d-flex\">\n                    <div className=\"check-list-hearder-background\">\n                      <div className=\"check-list-hearder-progress mw-100\" style={{ width: `${(this.props.item.addedItemsCount / this.props.item.totalItemsCount) * 100}%` }} />\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </Accordion.Toggle>\n            <Accordion.Collapse className=' mt-1 ml-6' eventKey={this.props.item.categoryName}>\n              <Card.Body>\n                {subListItem}\n              </Card.Body>\n            </Accordion.Collapse>\n          </Card>\n          :\n          <p className=\"pl-6 mr-3 text-body others-cat\" onClick={() => this.scrollToCategory(this.props.item.categoryName + '(' + this.props.item.categoryName + ')')}>{this.props.item.categoryName}</p>\n        }\n      </Accordion>\n    );\n\n  }\n}\n\nexport default connect()(CheckListItems);","import React from \"react\";\nimport \"./BookmarkletSection.scss\";\nimport Modal from \"../../modal-component/ModalComponent\";\nimport Button from '../../button-component/ButtonComponent';\nimport { BOOKMARKLET_SCRIPT, BOOKMARKLET_STEP_THREE_PRODUCT_LINK, IMPORT_REGISTRY_EMAIL } from \"utils/constants\";\n\nclass BookmarkletSection extends React.Component {\n\n  state = {\n    show: false,\n    updateModal: false,\n  }\n\n  modalTitle = \"\"\n  modalBody = \"\"\n  modalTitleContent = \"\"\n  modalFooterButtons = \"\"\n\n  // Event Handlers\n  modalCloseHandler = () => {\n    this.setState({\n      show: false\n    })\n  }\n\n  doneBookmarkletHandler = () => {\n    this.modalCloseHandler()\n  }\n\n  openAddBookmarkletModal = () => {\n    this.modalTitle = \"Get M+A Button\"\n    this.modalTitleContent = (\n      <div className=\"py-2 text-sm\">\n        Its as easy as dragging the button to your browsers Bookmarks bar.\n      </div>\n    )\n    this.setState((prevState, props) => ({\n      show: true,\n    }))\n\n    this.modalBody = (\n      <div className=\"row bookmarlet-model justify-content-center\">\n        <div className=\"col\">\n          <div className=\"d-flex justify-content-center mb-6\">\n            <div className=\"text-body m-a-heading mr-5\">\n              <div>Drag the button the your</div> <div>browsers Bookmarks bar</div>\n            </div>\n            <a\n              tabindex=\"0\"\n              href={BOOKMARKLET_SCRIPT}\n              className=\"m-a-btn m-a-primary-btn primary-btn px-3 py-2 font-weight-bold font-medium text-body\"\n            >Add to M+A</a>\n          </div>\n          <div className=\"bookmarklet-steps\">\n            <ol className=\"my-5\">\n              <li className=\"steps-title pl-4\">\n                <div className=\"text-body font-medium\">Make sure your bookmarks bar is visible</div>\n                <div className=\"mt-1 text-sm steps-details\">\n                  In Chrome browser, go to the top right menu and into Settings. On the left navigation you will find Appearance. Inside it find Show Bookmarks bar then toggle to turn on.\n                </div>\n              </li>\n              <li className=\"steps-title pl-4 mt-5\">\n                <div className=\"text-body font-medium\">Add to your Bookmarks bar</div>\n                <div className=\"mt-1 text-sm steps-details\">\n                  Click the Add to M+A button and drag it to your Bookmarks bar.\n                </div>\n              </li>\n              <li className=\"steps-title pl-4 mt-5\">\n                <div className=\"text-body font-medium\">Give it a go!</div>\n                <div className=\"mt-1 text-sm steps-details\">\n                  Go to <a className=\"bookmarklet-link\" href={BOOKMARKLET_STEP_THREE_PRODUCT_LINK} target='_blank' tabindex=\"0\">Key Rattle</a> on Plan Toys and click on your NEW M+A button.\n                </div>\n              </li>\n            </ol>\n          </div>\n        </div>\n      </div>\n    )\n    this.modalFooterButtons = (\n      <>\n        <a tabindex=\"0\" className=\"bookmarklet-link mr-auto\" onClick={() => this.doneBookmarkletHandler()}>I Already Have M+A Button</a>\n        <a\n          className=\"px-3 py-1 bookmarklet-disable-btn text-body font-medium\"\n          href={\"mailto:\" + IMPORT_REGISTRY_EMAIL}\n          target='_blank'\n          tabindex=\"0\"\n        >Email Us For Help</a>\n        <Button\n          variant=\"primary\"\n          className=\"px-4 py-1 font-weight-bold font-medium text-body\"\n          onClick={() => this.doneBookmarkletHandler()}\n        >Done</Button>\n      </>\n    )\n  }\n\n  render() {\n    return (\n      <>\n        <div className=\"py-2 bookmarklet-section\" onClick={this.openAddBookmarkletModal}>\n          <div className=\"row\">\n            <div className=\"col flex-grow-0\">\n              {/* TODO: Add M$A Icon once added */}\n            </div>\n            <div className=\"col\">\n              <h4>Get M+A Button</h4>\n              <p className=\"text-sm mt-1\">M+A Button lets you add product from any store directly to Monica+Andy Baby\n            Registry.</p>\n              <a tabindex=\"0\" className=\"bookmarklet-link mt-1 text-sm\">I already have it</a>\n            </div>\n          </div>\n        </div>\n        <Modal\n          show={this.state.show}\n          updateModal={this.state.updateModal}\n          title={this.modalTitle}\n          titleContent={this.modalTitleContent}\n          footer={this.modalFooterButtons}\n          closeModal={this.modalCloseHandler}>\n          {this.modalBody}\n        </Modal>\n      </>\n    )\n  }\n}\n\nexport default BookmarkletSection;","import React from \"react\";\nimport \"./CategoryPill.scss\";\n\nconst CategoryPill = (props) => {\n  return (\n    <span className={[\"import-registry-category-pill text-sm p-1\", props.className ? props.className : \"\"].join(\" \")}>\n      {props.mainCategory+\": \"+props.name}\n      <i className=\"icon-close remove-category-pill-icon ml-2\" onClick={props.removeCategory}/>\n    </span>\n  );\n}\n\nexport default CategoryPill;\n","import React, {createRef, useState} from \"react\";\nimport {useDispatch, useSelector} from 'react-redux';\nimport \"./AddGiftAnotherStore.scss\";\nimport Counter from \"../../counter/Counter\";\nimport TogglePills from \"../toggle-pills/TogglePills\";\nimport RadioButton from \"../../radio-button/RadioButton\";\nimport SelectCategory from \"../../select-category/SelectCategory\";\nimport {setAnotherStoreProductInfo} from \"modules/my-registry/MyRegistryActions\";\nimport {getScrapedProduct} from \"api/axios\";\nimport {toast} from 'react-toastify';\nimport CategoryPill from \"../import-registry/category-pill/CategoryPill\";\nimport defaultData from \"data/ReducerDefaultData.json\";\n\nconst AddGiftAnotherStore = (props) => {\n\n  const MAX_IMAGE_SIZE = 5000000; // 5MB\n  const ACCEPTED_IMAGE_TYPE = [\n    'image/jpg',\n    'image/jpeg',\n    'image/png'\n  ]\n\n  const [categoryModalShow, setCategoryModalVisible] = useState(false);\n  const [hideProductDetails, setHideProductDetails] = useState(true);\n  const [showLoading, setshowLoading] = useState(false);\n\n  const [btnHasFocus, setBtnHasFocus] = useState(false)\n  const [inputHasFocus, setInputHasFocus] = useState(false)\n  const [itemUrl, setItemUrl] = useState(\"\")\n  const [currentItemLink, setCurrentItemLink] = useState(\"\")\n\n  let inputRef = React.createRef()\n\n  const dispatch = useDispatch();\n  const productInfo = useSelector(state => state.myRegistry.anotherStoreProduct)\n\n  const productImage = useSelector(state => state.myRegistry.anotherStoreProduct.productImage)\n  const productName = useSelector(state => state.myRegistry.anotherStoreProduct.productName)\n  const category = useSelector(state => state.myRegistry.anotherStoreProduct.category)\n  const quantity = useSelector(state => state.myRegistry.anotherStoreProduct.quantity)\n  const price = useSelector(state => state.myRegistry.anotherStoreProduct.price)\n  const howToGift = useSelector(state => state.myRegistry.anotherStoreProduct.howToGift)\n  const note = useSelector(state => state.myRegistry.anotherStoreProduct.note)\n  const mustHave = useSelector(state => state.myRegistry.anotherStoreProduct.mustHave)\n  const groupGift = useSelector(state => state.myRegistry.anotherStoreProduct.groupGift)\n\n  const imageInput = createRef()\n\n  const howToGiftOptions = [\n    {\n      id: 1,\n      text: \"Get cash equivalent for this gift\"\n    },\n    {\n      id: 2,\n      text: \"Direct guest to store website to buy and ship themselves\"\n    }\n  ]\n\n  // Update state function\n  const changeProductUrl = (url) => {\n    let prodInfo = {...productInfo};\n    prodInfo.productUrl = url;\n    dispatch(setAnotherStoreProductInfo(prodInfo));\n  }\n\n  const changeProductImage = (image) => {\n    let prodInfo = {...productInfo};\n    prodInfo.productImage = image;\n    dispatch(setAnotherStoreProductInfo(prodInfo));\n  }\n\n  const changeProductName = (name) => {\n    let prodInfo = {...productInfo};\n    prodInfo.productName = name;\n    dispatch(setAnotherStoreProductInfo(prodInfo));\n  }\n\n  const setCategory = (category) => {\n    let prodInfo = {...productInfo};\n    prodInfo.category = category;\n    dispatch(setAnotherStoreProductInfo(prodInfo));\n  }\n\n  const setQuantity = (quantity) => {\n    let prodInfo = {...productInfo};\n    prodInfo.quantity = quantity;\n    dispatch(setAnotherStoreProductInfo(prodInfo));\n  }\n\n  const changePrice = (price) => {\n    let prodInfo = {...productInfo};\n    prodInfo.price = price;\n    dispatch(setAnotherStoreProductInfo(prodInfo));\n  }\n\n  const changeHowToGift = (howToGift) => {\n    let prodInfo = {...productInfo};\n    prodInfo.howToGift = howToGift;\n    dispatch(setAnotherStoreProductInfo(prodInfo));\n  }\n\n  const changeNote = (note) => {\n    let prodInfo = {...productInfo};\n    prodInfo.note = note;\n    dispatch(setAnotherStoreProductInfo(prodInfo));\n  }\n\n  const toggleMustHave = (mustHave) => {\n    let prodInfo = {...productInfo};\n    prodInfo.mustHave = mustHave;\n    dispatch(setAnotherStoreProductInfo(prodInfo));\n  }\n\n  const toggleGroupGift = (groupGift) => {\n    let prodInfo = {...productInfo};\n    prodInfo.groupGift = groupGift;\n    dispatch(setAnotherStoreProductInfo(prodInfo));\n  }\n\n  const openCategorySelect = (ev) => {\n    ev.preventDefault();\n    setCategoryModalVisible(true);\n  }\n\n  const incrementQuantity = () => {\n    setQuantity(quantity + 1)\n  }\n\n  const decrementQuantity = () => {\n    if (quantity - 1 > 0) {\n      setQuantity(quantity - 1)\n    }\n  }\n\n  const priceChangeHandler = (ev) => {\n    ev.persist();\n\n    if (ev.target.value.length > 0) {\n      const newPrice = Number(ev.target.value);\n\n      if (newPrice >= 0) {\n        changePrice(ev.target.value);\n      }\n    } else {\n      changePrice(\"\")\n    }\n  }\n\n  const productNameChangeHandler = (ev) => {\n    ev.persist();\n    changeProductName(ev.target.value)\n  }\n\n  const noteChangeHandler = (ev) => {\n    ev.persist();\n    changeNote(ev.target.value);\n  }\n\n\n  const selectFileHandler = (ev) => {\n    if (imageInput.current && imageInput.current.files.length > 0) {\n      const file = imageInput.current.files[0]\n\n      // Verifying file is image\n      if (ACCEPTED_IMAGE_TYPE.includes(file.type)) {\n        if (file.size <= MAX_IMAGE_SIZE) {\n          let reader = new FileReader();\n\n          reader.onload = function (e) {\n            const newProductImage = {\n              type: \"custom\",\n              value: e.target.result,\n              file: file,\n              fileType: file.type,\n              fileName: file.name\n            }\n            changeProductImage(newProductImage);\n          }\n\n          reader.readAsDataURL(file); // Converting to base64 string\n        } else {\n          toast.error(\"File size exceeds the limit\");\n        }\n      } else {\n        toast.error(\"Please select valid image.\");\n      }\n    }\n  }\n\n  const getRefinedPrice = (price) => {\n    let newPrice = \"\";\n    for (let char of price) {\n      if (char !== \".\") {\n        if (Number.isInteger(Number(char))) {\n          newPrice += char\n        }\n      } else {\n        newPrice += char\n      }\n    }\n\n    return newPrice;\n  }\n\n  const fetchProductDetail = (itemUrl) => {\n\n    try {\n      new URL(itemUrl);\n    } catch {\n      toast.error(\"Invalid Store Url\")\n      return;\n    }\n    setCurrentItemLink(itemUrl)\n    changeProductUrl(itemUrl);\n    const reqData = {\n      item_url: itemUrl\n    }\n    let ctgry = category;\n    let data = defaultData.myRegistry.defaultAnotherStoreProductInfo;\n    data.category = ctgry\n    dispatch(setAnotherStoreProductInfo(data))\n    setshowLoading(true);\n    setHideProductDetails(true);\n    getScrapedProduct(reqData).then(res => {\n      const resData = res.data;\n      if (resData) {\n        let prodInfo = {...productInfo};\n        prodInfo.productUrl = itemUrl;\n        prodInfo.productImage = {\n          type: \"url\",\n          value: resData.img\n        };\n        prodInfo.productName = resData.title;\n        prodInfo.price = getRefinedPrice(resData.price);\n        dispatch(setAnotherStoreProductInfo(prodInfo));\n        setshowLoading(false);\n        setHideProductDetails(false);\n      }\n    }).catch(err => {\n      setshowLoading(false);\n      toast.error(\"Invalid Store Url\")\n      return false;\n    })\n  }\n\n  const checkUrlAndGetRegistryItems = () => {\n    // Checking for valid url\n    try {\n      new URL(itemUrl);\n    } catch {\n      toast.error(\"Invalid Store Url\")\n      return;\n    }\n\n    setBtnHasFocus(false)\n    fetchProductDetail(itemUrl)\n  }\n\n  const submitStoreUrl = (ev) => {\n    ev.persist();\n    ev.preventDefault();\n    if (ev.keyCode === 13) { //Enter keycode is 13\n      setBtnHasFocus(false)\n      ev.target.blur()\n      fetchProductDetail(itemUrl)\n    }\n  }\n\n  const removeSelectedCategory = (categoryId) => {\n    if (productInfo.category.length) {\n      let finalcategory = productInfo.category.filter(category => category.id !== categoryId);\n      let prodInfo = {...productInfo};\n      prodInfo.category = finalcategory;\n      dispatch(setAnotherStoreProductInfo(prodInfo));\n    }\n  }\n\n  // Setting default HowToGiftOption\n  if (!howToGift.id) {\n    changeHowToGift(howToGiftOptions[1])\n  }\n\n  const changeItemUrl = (e) => {\n    e.preventDefault();\n    if (inputRef.current) {\n      inputRef.current.disabled = false;\n      inputRef.current.focus();\n    }\n  }\n\n  return (\n    <>\n      <div className=\"row add-gift-another-store\">\n        <div className=\"col\">\n          <div className=\"row\">\n            <div className=\"col m-a-input-container\">\n              <p className=\"text-sm font-medium add-gift-store-label\">Store</p>\n              <div className=\"position-relative mt-1\">\n                <input type=\"text\" className=\"w-100 pl-2 pr-14 py-1 text-body input-background change-link-input\"\n                       placeholder=\"Paste a product link that you want to add in your Monica and Andy Registry\"\n                       onKeyUp={(ev) => submitStoreUrl(ev)}\n                       onChange={(ev) => setItemUrl(ev.target.value)}\n                       onFocus={() => {\n                         setInputHasFocus(true);\n                         setBtnHasFocus(true)\n                       }}\n                       onBlur={() => setInputHasFocus(false)}\n                       ref={inputRef}\n                       value={itemUrl}\n                />\n                {/* <a className=\"text-sm\" href=\"#\">Change</a> */}\n                {itemUrl.length > 0 && !inputHasFocus && !btnHasFocus?\n                  <a tabindex\n                     className=\"add-gift-another-store-change-link text-sm font-medium import-registry-category-link\"\n                     href=\"#\"\n                     onClick={(e) => changeItemUrl(e)}>Change</a> : null}\n\n                {itemUrl.length > 0 && btnHasFocus ?\n                  <div className=\"add-gift-another-store-submit-url-section\">\n                    {/*TODO: Change icons once added to global icons*/}\n                    <button className=\"icon-close mr-3\"\n                            onClick={() => {\n                              setItemUrl(\"\");\n                              setBtnHasFocus(false);\n                            }}\n                    />\n                    <button className=\"icon-check\" onClick={checkUrlAndGetRegistryItems}/>\n                  </div>\n                  : null}\n              </div>\n            </div>\n          </div>\n\n          <div className={[\"row mt-4\", hideProductDetails ? \"\" : \"pt-6\"].join(\" \")}>\n            {hideProductDetails ? showLoading ?\n              <div className=\"col text-center\">\n                <div className=\"hide-product-view py-13\">\n                  <div class=\"spinner-border\" role=\"status\">\n                    <span class=\"sr-only\">Loading...</span>\n                  </div>\n                  <h4 className=\"hide-product-details m-auto\">Please wait while we fetch the product details</h4>\n                </div>\n              </div>\n              :\n              <div className=\"col text-center\">\n                <div className=\"hide-product-view py-13\">\n                  <h4 className=\"hide-product-details m-auto\">Please paste product link above to view details here</h4>\n                </div>\n              </div>\n              :\n              <>\n                <div className=\"col-12 col-md-5 add-gift-image-select\">\n                  <div className=\"mr-3\">\n                    {productImage?.value ?\n                      <img\n                        src={productImage.value}\n                        alt=\"Product Image\"\n                      />\n                      : null}\n\n                    <i className=\"icon-preview p-1\" onClick={() => {\n                      imageInput.current.click()\n                    }}/>\n                    {/* TODO: Change above icon to camera icon */}\n\n                    <input type=\"file\" className=\"d-none\" accept={ACCEPTED_IMAGE_TYPE.join(\",\")} ref={imageInput}\n                           onChange={(ev) => selectFileHandler(ev)}/>\n                  </div>\n                </div>\n                <div className=\"col-12 col-md-7\">\n                  <div className=\"ml-3\">\n                    <div className=\"row\">\n                      <div className=\"col m-a-input-container\">\n                        <p className=\"text-sm font-medium add-gift-store-label\">Product Name</p>\n                        <textarea\n                          className=\"w-100 mt-1 h1 p-2\"\n                          rows=\"2\"\n                          value={productInfo.productName}\n                          onChange={(ev) => productNameChangeHandler(ev)}\n                        />\n                      </div>\n                    </div>\n\n                    <div className=\"row mt-4\">\n                      <div className=\"col\">\n                        <div className=\"m-a-input-container mr-2\">\n                          <p className=\"text-sm font-medium add-gift-store-label\">Price</p>\n                          <div className=\"price-input mt-1\">\n                            <input\n                              type=\"text\"\n                              className=\"w-100 pl-2 pr-1 py-1 text-body pl-5\"\n                              value={price}\n                              onChange={(ev) => priceChangeHandler(ev)}\n                            />\n                          </div>\n                          {/*<span className=\"price-input text-body\">$</span>*/}\n                        </div>\n                      </div>\n                      <div className=\"col\">\n                        <div className=\"m-a-input-container\">\n                          <p className=\"text-sm font-medium add-gift-store-label\">Quantity</p>\n                          <Counter\n                            className=\"mt-2\"\n                            counter={quantity}\n                            incrementHandler={incrementQuantity}\n                            decrementHandler={decrementQuantity}\n                          />\n                        </div>\n                      </div>\n                    </div>\n\n                    {!props.addMyOwn ?\n                      <>\n                        <div className=\"row mt-5\">\n                          <div className=\"col d-flex\">\n                            <p className=\"text-sm add-gift-store-label font-medium mb-1\">Category</p>\n                            <a className=\"text-sm ml-2 add-gift-link font-medium\" href=\"#\" tabindex=\"0\"\n                               onClick={(ev) => openCategorySelect(ev)}>Add</a>\n                            {/* <div className=\"position-relative\">\n                            <input type=\"text\" value={category.displayName} readOnly={true}\n                                   className=\"w-100 pl-2 pr-12 py-1 text-body input-background change-link-input\"/>\n                          </div> */}\n                          </div>\n                        </div>\n                        <div className=\"row mt-2\">\n                          <div className=\"col\">\n                            {category.map(cat => (\n                              <CategoryPill\n                                key={cat.id}\n                                mainCategory={cat.mainCategory}\n                                name={cat.categoryName}\n                                removeCategory={() => removeSelectedCategory(cat.id)}\n                                className=\"mt-2 mr-3\"\n                              />\n                            ))}\n                          </div>\n                        </div>\n                      </>\n                      : null}\n\n                    <div className=\"row mt-5\">\n                      <div className=\"col d-flex\">\n                        <TogglePills\n                          iconClass=\"icon-heart\"\n                          activeClass={mustHave ? \"active-must-have\" : null}\n                          onClick={() => toggleMustHave(!mustHave)}\n                          text=\"Must Have\"\n                          className=\"mr-2\"/>\n                        <TogglePills\n                          iconClass=\"icon-guest\"\n                          activeClass={groupGift ? \"active-group-gift\" : null}\n                          onClick={() => toggleGroupGift(!groupGift)}\n                          text=\"Group Gift\"\n                          className=\"mr-2\"/>\n                        {/* TODO: Change above guest icon one added */}\n                      </div>\n                    </div>\n\n                    <div className=\"row mt-5\">\n                      <div className=\"col m-a-input-container\">\n                        <p className=\"text-sm font-medium add-gift-store-label\">How to gift?</p>\n                        {howToGiftOptions.map((option, index) => (\n                          <div className={index === 0 ? \"mt-1\" : \"mt-3\"} key={\"how-to-gift-option-\" + option.id}>\n                            <RadioButton\n                              name=\"how-to-gift\"\n                              textClass=\"text-sm\"\n                              display={option.text}\n                              checked={option.id === howToGift.id ? true : null}\n                              changeHandler={() => changeHowToGift(option)}\n                              centerText=\"false\"/>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n\n                    <div className=\"row mt-5\">\n                      <div className=\"col m-a-input-container\">\n                        <p className=\"text-sm font-medium add-gift-store-label\">Notes</p>\n                        <textarea className=\"w-100 mt-1 text-body p-1 m-a-resize-textarea mb-2\"\n                                  rows=\"2\"\n                                  placeholder=\"Write a note for your friends and family\"\n                                  value={note}\n                                  onChange={(ev) => noteChangeHandler(ev)}\n                        />\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </>\n            }\n          </div>\n        </div>\n      </div>\n      <SelectCategory\n        showModal={categoryModalShow}\n        closeModal={setCategoryModalVisible}\n        currentCategory={category}\n        changeCurrentCategory={setCategory}\n      />\n    </>\n  )\n}\n\nexport default AddGiftAnotherStore;","import React, { Component } from 'react';\nimport {\n  incrementQuantity,\n  decrementQuantity,\n  clearAnotherStoreProductInfo,\n  setAnotherStoreProductInfo,\n  setActiveRecommandationVariant,\n} from \"../../../my-registry/MyRegistryActions\";\nimport CardItem from \"modules/commons/components/card-item/CardItem\";\nimport { connect } from \"react-redux\";\nimport \"./ViewRecommend.scss\";\nimport MoreOption from \"../more-option/MoreOption\";\nimport { ADD_REGISTRY_ITEM, UPDATE_REGISTRY_ITEM } from 'api/queries';\nimport { graphQL } from 'api/axios';\nimport Slider from \"react-slick\";\n// Import css files\nimport \"slick-carousel/slick/slick.css\";\nimport \"slick-carousel/slick/slick-theme.css\";\nimport { toast } from \"react-toastify\";\nimport { ADD_REGISTRY_ITEM as ADD_REGISTRY_ITEM_MUTATION } from 'api/mutations';\nimport BookmarkletSection from \"../add-gift/bookmarklet-section/BookmarkletSection\";\nimport AddGiftAnotherStore from \"../add-gift/add-gift-another-store/AddGiftAnotherStore\";\nimport Button from \"../button-component/ButtonComponent\";\nimport Modal from \"../modal-component/ModalComponent\";\nimport { getProducts as commonGetProducts, getCategories as commonGetCategories } from \"../../../../utils/commonFunction\";\nimport { addProductHandler } from 'utils/commonFunction';\n\nclass ViewRecommend extends Component {\n\n  state = {\n    show: false,\n    updateModal: false,\n    viewDetailsBtn: true,\n  }\n  modalTitle = \"\"\n  modalBody = \"\"\n  modalTitleContent = \"\"\n  cardRef = React.createRef()\n\n  clearModalData = () => {\n    this.modalTitle = \"\"\n    this.modalBody = \"\"\n    this.modalTitleContent = \"\"\n\n    this.props.dispatch(clearAnotherStoreProductInfo());\n  }\n\n  modalCloseHandler = () => {\n    this.clearModalData()\n    this.setState({\n      show: false\n    })\n  }\n\n  moreOptionsData = [\n    // TODO add option list\n    {\n      name: \"View Item\",\n      action: () => alert(\"Clicked\")\n    },\n  ]\n  getCategoryId = () => {\n    const currentRecommendation = this.props.stateActiveRecommandation;\n    for (let parentCategory of this.props.stateChecklist) {\n      if (parentCategory.categoryName === currentRecommendation) {\n        return parentCategory.id\n      }\n      for (let childCategory of parentCategory.subCategories) {\n        if (childCategory.categoryName === currentRecommendation) {\n          return childCategory.id\n        }\n      }\n    }\n  }\n\n  // Checking if product data is valid or not\n  checkDataValidity = (storeProduct) => {\n\n    // Valid store URL\n    try {\n      new URL(storeProduct.productUrl);\n    } catch {\n      alert(\"Invalid Store Url\");\n      return false;\n    }\n\n    // Valid Product Name\n    if (storeProduct.productName.length <= 0) {\n      alert(\"Invalid Product Name\");\n      return false;\n    }\n\n    // Valid Price\n    if (storeProduct.price.length <= 0) {\n      alert(\"Invalid Price\");\n      return false;\n    }\n\n    // Valid Quantity\n    if (storeProduct.quantity < 1) {\n      alert(\"Invalid Quantity\");\n      return false;\n    }\n\n    // // Valid Category\n    // if (!storeProduct.category.id) {\n    //   alert(\"Invalid Category\");\n    //   return false;\n    // }\n\n    return true;\n  }\n\n  // Adding Add on my own product to registry\n  addItemToRegistry = () => {\n    const storeProduct = this.props.stateAnotherStoreProduct;\n    const isValidData = this.checkDataValidity(storeProduct);\n    if (!isValidData) {\n      return;\n    }\n\n    let storeUrl = new URL(storeProduct.productUrl);\n    storeUrl = storeUrl.hostname.split(\".\")\n    const storeName = storeUrl[storeUrl.length - 2]\n\n    let formData = new FormData()\n\n    let data = {\n      query: ADD_REGISTRY_ITEM_MUTATION,\n      operationName: \"addRegistryItems\",\n      variables: {\n        \"registryId\": this.props.stateRegistryInfo.id,\n        \"input\": [{\n          \"storeName\": storeName,\n          \"items\": [{\n            \"title\": storeProduct.productName,\n            // TODO: change category\n            \"registryCategories\": storeProduct.category.length > 0 ? storeProduct.category.map(category => Number(category.id)) : null,\n            \"tags\": [],\n            \"storeItemUrl\": storeProduct.productUrl,\n            \"price\": storeProduct.price,\n            \"quantity\": storeProduct.quantity,\n            \"mostWanted\": storeProduct.mustHave,\n            \"isGroupGift\": storeProduct.groupGift,\n            \"note\": storeProduct.note\n          }]\n        }]\n      }\n    }\n\n    if (storeProduct.productImage.type === \"custom\") {\n      let map = {\n        images: [\"variables.input.0.items.0.images\"]\n      }\n      data.variables.input[0].items[0]['images'] = null;\n      formData.append(\"map\", JSON.stringify(map))\n      formData.append(\"images\", this.dataURItoBlob(storeProduct.productImage.value, storeProduct.productImage.fileType, storeProduct.productImage.fileName))\n    } else {\n      data.variables.input[0].items[0]['imageUrl'] = this.props.stateAnotherStoreProduct.productImage.value;\n    }\n\n    formData.append(\"operations\", JSON.stringify(data))\n\n    graphQL(formData).then(res => {\n      if (res.status === 200) {\n        // Successfully added product\n        commonGetProducts(this.props.stateRegistryInfo.id, this.props.dispatch);\n        commonGetCategories(this.props.stateRegistryInfo.id, this.props.dispatch);\n\n        toast.success((\n          <p><b>{storeProduct.productName}</b> added to your registry!</p>\n        ))\n        this.clearModalData();\n        this.modalCloseHandler();\n      }\n    }).catch(err => {\n      toast.error(\"Some error occurred.\");\n      console.error(err.message)\n    })\n  }\n\n  anotherStoreItemViewDetail = (storeProduct) => {\n    if (storeProduct.productUrl) {\n      window.open(storeProduct.productUrl, '_blank');\n    }\n  }\n\n  // Popping up Add on my own modal\n  addOnMyOwnClickHandler = (category) => {\n    this.clearModalData()\n    let newCategory = [{\n      ...category,\n      displayName: category.parentCategory + \" : \" + category.categoryName\n    }]\n    let prodInfo = { ...this.props.stateAnotherStoreProduct };\n    prodInfo.category = newCategory;\n    this.props.dispatch(setAnotherStoreProductInfo(prodInfo));\n\n    this.modalTitle = `Add my own ${category && category.isSubProduct && category.parentCategory ? `${category.parentCategory} (${category.categoryName})` : category.categoryName}`\n    // this.modalTitle = `Add my own ${category && category.parentCategory ? category.parentCategory: \"\"}${category ? category.categoryName.toLowerCase() : \"\"}`\n    this.modalTitleContent = (\n      <div className=\"row mt-2 mb-4\">\n        <div className=\"col\">\n          <BookmarkletSection />\n        </div>\n      </div>\n    )\n    this.modalBody = <AddGiftAnotherStore addMyOwn={true} />\n\n    this.setState((prevState, props) => ({\n      show: !prevState.show\n    }))\n  }\n\n  setActiveRecommandationVariantHandler = (productID, variant) => {\n    this.props.dispatch(setActiveRecommandationVariant(productID, variant));\n  }\n\n  render() {\n\n    const settings = {\n      dots: true,\n      infinite: false,\n      speed: 500,\n      slidesToShow: 3.2,\n      slidesToScroll: 1,\n      prevArrow: <button type=\"button\" class=\"slick-prev slick-prev-btn\"><i className=\"icon-chevron-left slick-icon\" />\n      </button>,\n      nextArrow: <button type=\"button\" class=\"slick-next slick-next-btn\"><i className=\"icon-chevron-right slick-icon\" />\n      </button>,\n      responsive: [{\n        breakpoint: 576,\n        settings : {\n          slidesToShow: 1.1,\n          prevArrow: false,\n          nextArrow: false,\n          arrows: false\n        }\n      }],\n    };\n\n    let modalFooterButtons = (\n      <>\n        <Button\n          variant=\"secondary\"\n          className=\"px-3 py-1 font-weight-bold font-medium text-body\"\n          onClick={() => this.anotherStoreItemViewDetail(this.props.stateAnotherStoreProduct)}\n          disabled={this.props.stateAnotherStoreProduct && this.props.stateAnotherStoreProduct.productName ? false : true}\n        >View Details</Button>\n        <Button\n          variant=\"primary\"\n          className=\"px-4 py-1 font-weight-bold font-medium text-body\"\n          onClick={this.addItemToRegistry}\n          disabled={this.props.stateAnotherStoreProduct && this.props.stateAnotherStoreProduct.productName ? false : true}\n        >Save & Close</Button>\n      </>\n    )\n    return (\n      <>\n        <div className=\"recommended-cart my-6\">\n          <div className=\"row\">\n            <div className=\"col title\"><h2>{this.props.title}\n              {/* <span className=\"text-sm sub-title\">Recommended </span> */}\n            </h2>\n            </div>\n          </div>\n          <div className=\"pt-6\">\n            <Slider {...settings}>\n              {this.props.products.map((card, index) =>\n                // <div><>{index}</></div>\n                <div className=\"cart-view\" ref={this.cardRef}>\n                  <CardItem\n                    className=\"mr-4\"\n                    data={card}\n                    activeVariant={card.activeVariant}\n                    key={\"CardItem-\" + index}\n                    incrementQuantityHandler={() => this.props.dispatch(incrementQuantity(card.id, 1))}\n                    decrementQuantityHandler={() => this.props.dispatch(decrementQuantity(card.id, 1))}\n                    addProductHandler={() => addProductHandler(card, this.props.stateAddedProducts, this.props.stateRegistryInfo, this.props.dispatch)}\n                    setActiveRecommandationVariantHandler={(variant) => this.setActiveRecommandationVariantHandler(card.id, variant)}\n                  />\n                </div>\n              )}\n              <div>\n                <div className=\"add-my-own-card mr-4 d-flex flex-column align-items-center justify-content-center\"\n                  style={{ height: this.cardRef.current ? this.cardRef.current.offsetHeight + 'px' : '200px' }}\n                  onClick={() => this.addOnMyOwnClickHandler(this.props.category)}\n                >\n                  <button className=\"add-my-own-button\" />\n                  <p className=\"text-body font-medium mt-5\">Add my own</p>\n                </div>\n              </div>\n            </Slider>\n          </div>\n          <div className=\"mt-6 card-buttom d-flex\">\n            {/* TODO: Change text to dynamic */}\n            <div>\n              <img className=\"blog-img\"\n                src=\"https://cdn.shopify.com/s/files/1/2338/2917/files/maedit_submenu.jpg?v=1588207400\"\n                alt={this.props.title} />\n            </div>\n            <div className=\"pl-2 pl-md-4 my-auto\">\n              <div className=\"text-body\">How to pick up a perfect crib mattress?</div>\n              <div className=\"card-buttom-subtext text-sm d-none d-md-inline-block\">by Joanna Lee, March 13, 2020</div>\n            </div>\n            <div className=\"text-sm my-auto mr-6 ml-md-auto ml-0 d-none d-md-inline-block\">\n              <a href=\"\" className=\"read-more \" tabindex=\"0\">Read more</a>\n            </div>\n          </div>\n        </div>\n\n        <Modal\n          show={this.state.show}\n          updateModal={this.state.updateModal}\n          title={this.modalTitle}\n          titleContent={this.modalTitleContent}\n          footer={modalFooterButtons}\n          closeModal={this.modalCloseHandler}>\n          {this.modalBody}\n        </Modal>\n      </>\n    )\n      ;\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    stateAddedProducts: state.myRegistry.addedProducts,\n    stateActiveRecommandation: state.myRegistry.activeRecommandation,\n    stateChecklist: state.myRegistry.checkList,\n    stateRegistryInfo: state.registry.info,\n    stateAnotherStoreProduct: state.myRegistry.anotherStoreProduct,\n  }\n}\n\nexport default connect(mapStateToProps)(ViewRecommend)","import React, {useState} from 'react'\nimport \"./Filter.scss\";\nimport RadioButton from 'modules/commons/components/radio-button/RadioButton';\nimport CheckBox from 'modules/commons/components/check-box/CheckBox';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setParentFilter, setChildFilter, clearFilter } from '../../MyRegistryActions.js';\nimport Button from \"../../../commons/components/button-component/ButtonComponent\";\nimport Modal from '../../../commons/components/modal-component/ModalComponent';\n\n\nconst Filter = () => {\n\n  const dispatch = useDispatch()\n\n  const filterData = useSelector(state => state.myRegistry.filterCategory)\n  let tempParentFilterId = useSelector(state => state.myRegistry.filterApplied.parentFilter)\n  let tempChildFilterIds = useSelector(state => state.myRegistry.filterApplied.childFilter)\n  let [showFilterModal, setShowFilterModal] = useState(false);\n\n  const filterContentRef = React.createRef();\n\n  const toggleFilterContent = () => {\n    filterContentRef.current.classList.toggle(\"show\");\n  }\n\n  // Change event handlers\n\n  const parentChangeHandler = (parent) => {\n    dispatch(setParentFilter(parent.id))\n    if (parent.child) {\n      dispatch(setChildFilter(parent.child.map(child => child.id)))\n    } else {\n      dispatch(setChildFilter([]))\n    }\n  }\n\n  const childChangeHandler = (childId, parentId) => {\n\n    if (parentId !== tempParentFilterId) {\n      dispatch(setParentFilter(parentId))\n      if (tempChildFilterIds.length > 0) {\n        dispatch(setChildFilter([]))\n      }\n    }\n\n    const childIndex = tempChildFilterIds.indexOf(childId)\n\n    if (childIndex === -1) {\n      dispatch(setChildFilter([...tempChildFilterIds, childId]))\n    } else {\n      let newChildArray = [...tempChildFilterIds]\n      newChildArray.splice(childIndex, 1)\n      dispatch(setChildFilter(newChildArray))\n    }\n  }\n  \n  // Click Handler\n\n  const doneClickHandler = () => {\n    toggleFilterContent()\n  }\n  \n\n  const clearClickHandler = () => {\n    dispatch(clearFilter())\n    toggleFilterContent()\n  }\n\n  const doneModalClickHandler = () => {\n    setShowFilterModal(false);\n  }\n  \n\n  const clearModalClickHandler = () => {\n    dispatch(clearFilter())\n    setShowFilterModal(false);\n  }\n\n  const filterContent = (\n    <div className=\"d-flex flex-column px-5\">\n      {filterData.map(parentFilter => (\n        <div className=\"filter-item mb-3\" key={\"filter-\" + parentFilter.id}>\n          {/* Parent filter */}\n          <RadioButton\n            {...parentFilter}\n            textClass=\"text-body\"\n            centerText=\"true\"\n            name=\"parentFilter\"\n            key={parentFilter.id}\n            checked={parentFilter.id === tempParentFilterId ? true : null}\n            changeHandler={() => parentChangeHandler(parentFilter)}\n          />\n\n          {/* Child filter */}\n          {parentFilter.child ? (\n            <div className=\"d-flex flex-column mt-2 pl-5\" key={\"child-filter-\" + parentFilter.id}>\n              {parentFilter.child.map(childFilter => (\n                <CheckBox\n                  {...childFilter}\n                  key={childFilter.id}\n                  className=\"mb-4\"\n                  checked={tempChildFilterIds.includes(childFilter.id) ? true : null}\n                  changeHandler={() => childChangeHandler(childFilter.id, parentFilter.id)}\n                />\n              ))}\n            </div>\n          )\n            : null}\n        </div>\n      ))}\n    </div>\n  )\n\n  const footerButton = (\n    <div className=\"d-flex filter-content-bottom-buttons\">\n      <Button className=\"text-body py-1 px-5 mr-2 font-medium\"\n        onClick={clearModalClickHandler}\n        variant=\"secondary\"\n      >Clear\n          </Button>\n      <Button\n        className=\"text-body py-1 px-3 font-medium\"\n        onClick={doneModalClickHandler}\n        variant=\"primary\"\n      >Done\n          </Button>\n    </div>\n  )\n  \n\n  return (\n    <div className=\"filter-section-filter\">\n      <Button className=\"px-1 py-1 px-md-3 d-none d-md-inline-block\" variant=\"secondary\" onClick={toggleFilterContent}>\n        <div className=\"d-flex\">\n          <i className=\"icon-filter-1 mr-1 filter-icon\" />\n          <span className=\"font-medium \">Filter</span>\n        </div>\n      </Button>\n      <Button className=\"px-1 py-1 px-md-3 d-inline-block d-md-none\" variant=\"secondary\" onClick={()=>setShowFilterModal(true)}>\n        <div className=\"d-flex\">\n          <i className=\"icon-filter-1 filter-icon\" />\n        </div>\n      </Button>\n      <div className=\"filter-content py-4\" ref={filterContentRef}>\n        {filterContent}\n        <div className=\"d-flex filter-content-bottom-buttons px-5 pt-4\">\n          <Button className=\"text-body py-1 px-5 mr-2 font-medium\"\n            onClick={clearClickHandler}\n            variant=\"secondary\"\n          >Clear\n          </Button>\n          <Button\n            className=\"text-body py-1 px-3 font-medium\"\n            onClick={doneClickHandler}\n            variant=\"primary\"\n          >Done\n          </Button>\n        </div>\n      </div>\n      <Modal\n        show={showFilterModal}\n        title=\"Filters\"\n        footer={footerButton}\n        closeModal={()=> setShowFilterModal(false)}>\n        {filterContent}\n      </Modal>\n    </div>\n  )\n}\n\nexport default Filter;","import React from 'react';\nimport \"./FilterItemChip.scss\";\n\nconst FilterItemChip = (props) => {\n  return (\n    <span className={[\"filter-item-chip px-2 mb-1\", props.className ? props.className : ''].join(\" \")}><span className=\"text-sm\">{props.text}</span><i className=\"icon-close ml-1\" onClick={props.deleteHandler}></i></span>\n  )\n}\n\nexport default FilterItemChip;","import React from \"react\";\nimport \"./ImportGiftCard.scss\";\n\nconst ImportGiftCard = (props) => {\n  return (\n    <div className=\"import-gift-card d-flex py-2\" onClick={props.onClick}>\n        <i className={[props.iconClass, \"import-gift-card-icon mx-5 align-self-center\"].join(\" \")}/>\n        <div className=\"mr-3\">\n          <h4>{props.title}</h4>\n          <p className=\"text-sm mt-1\">{props.text}</p>\n        </div>\n    </div>\n  )\n}\n\nexport default ImportGiftCard;","import React from \"react\";\nimport \"./ImportRegistry.scss\";\nimport {getAnotherRegistryProducts} from \"../../../../../api/axios\";\nimport {toast} from \"react-toastify\";\nimport SelectCategory from \"../../select-category/SelectCategory\";\nimport CategoryPill from \"./category-pill/CategoryPill\";\nimport {connect} from \"react-redux\";\nimport {setAnotherStoreRegistryItems} from \"../../../../my-registry/MyRegistryActions\";\n\nclass ImportRegistry extends React.Component {\n  state = {\n    registryUrl: \"\",\n    errorMessage: \"\",\n    loading: false,\n    categoryModalShow: false,\n    activeCategoryProductIndex: null,\n    currentRegistryLink: \"\",\n    inputHasFocus: false,\n    currentCategory: [],\n    btnHasFocus: false\n  }\n\n  inputRef = React.createRef()\n\n  setCategoryModalVisible = () => {\n    this.setState({categoryModalShow: false, currentCategory: []})\n  }\n\n  changeLoadingState = (value) => {\n    this.setState({\n      loading: value\n    })\n  }\n\n  registryUrlChangeHandler = (ev) => {\n    this.setState({\n      registryUrl: ev.target.value,\n      errorMessage: \"\"\n    })\n  }\n\n  checkUrlAndGetRegistryItems = () => {\n    // Checking for valid url\n    try {\n      new URL(this.state.registryUrl);\n    } catch {\n      toast.error(\"Invalid Store Url\")\n      return;\n    }\n    this.setState({\n      btnHasFocus: false,\n      errorMessage: \"\"\n    })\n    this.getAnotherRegistryProductsInfo();\n  }\n\n  registryUrlKeyUpHandler = (ev) => {\n    ev.persist();\n    ev.preventDefault();\n    if (ev.keyCode === 13) { //Enter keycode is 13\n      this.checkUrlAndGetRegistryItems()\n    }\n  }\n\n  getAnotherRegistryProductsInfo = () => {\n\n    this.setState({\n      currentRegistryLink: this.state.registryUrl\n    })\n    if (this.inputRef.current) {\n      this.inputRef.current.disabled = true;\n    }\n\n    const registryUrl = new URL(this.state.registryUrl);\n    const storeName = registryUrl.hostname.split(\".\")[1]\n\n    const reqData = {\n      store_name: storeName,\n      store_url: this.state.registryUrl\n    }\n\n    this.changeLoadingState(true);\n\n    getAnotherRegistryProducts(reqData).then(res => {\n      try {\n        if (res.data) {\n          const products = res.data.products;\n          const registry = res.data.registry;\n\n          if (products && registry) {\n            let newProducts = products.filter(product => product.title)\n            newProducts = newProducts.map(product => {\n              product.categories = [];\n              return product;\n            })\n            this.props.dispatch(setAnotherStoreRegistryItems(newProducts))\n            // this.setState({\n            //   products: newProducts\n            // })\n          } else {\n            this.setState({\n              errorMessage: \"Looks like this registry is not publically accessible. Please change the settings and try again.\"\n            })\n            this.props.dispatch(setAnotherStoreRegistryItems([]))\n          }\n        }\n      } catch (e) {\n        console.error(e)\n        toast.error(\"Some error occurred while reading registry products.\")\n      }\n\n    }).catch(err => {\n      toast.error(\"Some error occurred while fetching registry.\")\n      console.error(err);\n    }).finally(() => {\n      this.changeLoadingState(false)\n    })\n  }\n\n  openSelectCategoryModal = (ev, productIndex) => {\n    ev.preventDefault()\n    if (this.props.stateAnotherStoreRegistry[productIndex]) {\n      this.setState({\n        activeCategoryProductIndex: productIndex,\n        categoryModalShow: true,\n        currentCategory: this.props.stateAnotherStoreRegistry[productIndex].categories\n      })\n    } else {\n      console.log(\"Invalid Product Index\");\n    }\n  }\n\n  setProductCategories = (categories) => {\n    // Saving categories passed from SelectCategory Modal\n    if (Number.isInteger(this.state.activeCategoryProductIndex) && this.props.stateAnotherStoreRegistry[this.state.activeCategoryProductIndex]) {\n      let newProductState = [...this.props.stateAnotherStoreRegistry];\n      // TODO: Change this to support multiple categories\n      newProductState[this.state.activeCategoryProductIndex].categories = categories;\n      this.props.dispatch(setAnotherStoreRegistryItems(newProductState))\n      this.setState({\n        activeCategoryProductIndex: null\n      })\n    }\n  }\n\n  removeSelectedCategory = (productIndex, categoryId) => {\n    if (this.props.stateAnotherStoreRegistry[productIndex]) {\n      let newProducts = [...this.props.stateAnotherStoreRegistry]\n      newProducts[productIndex].categories = newProducts[productIndex].categories.filter(category => category.id !== categoryId);\n      this.props.dispatch(setAnotherStoreRegistryItems(newProducts))\n      // this.setState({\n      //   products: newProducts\n      // })\n    }\n  }\n\n  changeRegistryUrl = (e) => {\n    e.preventDefault();\n    if (this.inputRef.current) {\n      this.inputRef.current.disabled = false;\n      this.inputRef.current.focus();\n    }\n  }\n\n  render() {\n    return (\n      <>\n        <div className=\"baby-registry-import-registry\">\n          <div className=\"row mt-5\">\n            <div className=\"col d-flex flex-column\">\n              <span className=\"baby-registry-required-field text-sm font-medium\">Registry URL</span>\n              <div className=\"position-relative mt-1\">\n                <input type=\"text\"\n                       className={[\"import-registry-input-field w-100 mb-0 mw-100 text-body pl-2 py-1 pr-14\", this.state.errorMessage ? \"import-registry-error-field\" : \"\"].join(\" \")}\n                       placeholder=\"Paste your registry URL here to import.  Please ensure it's publicly accessible.\"\n                       value={this.state.registryUrl}\n                       ref={this.inputRef}\n                       onChange={this.registryUrlChangeHandler.bind(this)}\n                       onFocus={() => this.setState({inputHasFocus: true, btnHasFocus: true})}\n                       onBlur={() => this.setState({inputHasFocus: false})}\n                />\n                {this.state.registryUrl.length > 0 && this.state.currentRegistryLink === this.state.registryUrl && !this.state.inputHasFocus ?\n                  <a tabindex className=\"import-registry-change-link text-sm font-medium import-registry-category-link\"\n                     href=\"#\"\n                     onClick={(e) => this.changeRegistryUrl(e)}>Change</a> : null}\n\n                {this.state.registryUrl.length > 0 && (this.state.btnHasFocus) ?\n                  <div className=\"import-registry-submit-url-section\">\n                    {/*TODO: Change icons once added to global icons*/}\n                    <button className=\"icon-close mr-3\"\n                            onClick={() => this.setState({registryUrl: \"\",btnHasFocus: false,errorMessage: \"\"})}\n                    />\n                    <button className=\"icon-check\" onClick={this.checkUrlAndGetRegistryItems}/>\n                  </div>\n                  : null}\n              </div>\n              {this.state.errorMessage ?\n                <span className=\"import-registry-input-error-message text-body mt-1\">{this.state.errorMessage}</span>\n                : null}\n            </div>\n          </div>\n\n          <div className=\"row baby-registry-import-section mt-6\">\n            <div className=\"col\">\n              {this.props.stateAnotherStoreRegistry.length <= 0 || this.state.loading ?\n                // When no product exists\n                <div className=\"py-20 text-center import-registry-main-content\">\n                  {this.state.loading ?\n                    <>\n                      <div className=\"spinner-border import-registry-spinner\" role=\"status\">\n                        <span className=\"sr-only\">Loading...</span>\n                      </div>\n                      <h4 className=\"mt-1 mx-auto import-registry-loading-text\">Please wait while were importing your\n                        registry</h4>\n                    </>\n                    :\n                    <h4 className=\"mx-auto import-registry-no-content-text\">\n                      Please paste your publicly accessible\n                      registry URL above to import items\n                      to M+A.\n                    </h4>\n                  }\n                </div>\n                :\n                // When products is filled\n                <div className=\"row\">\n                  <div className=\"col\">\n                    <div className=\"import-registry-main-content d-flex flex-column import-registry-products\">\n                      <div className=\"d-flex import-registry-products-column \">\n                        <div className=\"w-50 pt-2 pb-1 px-3\">\n                          <p className=\"text-sm font-medium\">Items</p>\n                        </div>\n                        <div className=\"w-50 pt-2 pb-1 px-3\">\n                          <p className=\"text-sm font-medium\">Category: Item</p>\n                        </div>\n                      </div>\n\n\n                      {this.props.stateAnotherStoreRegistry.map((product, index) => (\n                        <div className=\"d-flex import-registry-products-column\" key={\"Product-\" + index}>\n                          <div className=\"w-50 px-3\">\n                            <p className=\"py-3 text-body\">{product.title}</p>\n                          </div>\n                          <div className=\"w-50 px-3\">\n                            {product.categories.length <= 0 ?\n                              <div className=\"py-3\">\n                                <a tabindex href=\"#\" className=\"import-registry-category-link font-medium text-sm\"\n                                   onClick={(ev) => this.openSelectCategoryModal(ev, index)}>Select category</a>\n                              </div>\n                              :\n                              <div className=\"pb-2\">\n                                {product.categories.map(category => (\n                                  <CategoryPill\n                                    key={category.id}\n                                    name={category.categoryName}\n                                    mainCategory={category.mainCategory}\n                                    removeCategory={() => this.removeSelectedCategory(index, category.id)}\n                                    className=\"mt-2 mr-3\"\n                                  />\n                                ))}\n\n                                <a tabindex href=\"#\" className=\"import-registry-category-link font-medium text-sm\"\n                                   onClick={(ev) => this.openSelectCategoryModal(ev, index)}>Add</a>\n                              </div>\n                            }\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n              }\n            </div>\n          </div>\n        </div>\n        <SelectCategory\n          showModal={this.state.categoryModalShow}\n          closeModal={this.setCategoryModalVisible}\n          changeCurrentCategory={this.setProductCategories}\n          currentCategory={this.state.currentCategory}\n        />\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    stateAnotherStoreRegistry: state.myRegistry.anotherStoreRegistry\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(ImportRegistry);","import React from \"react\";\nimport \"./TogglePills.scss\";\n\nconst TogglePills = (props) => {\n    return (\n        <div\n          onClick={props.onClick}\n          className={[\"cash-fund-toggle-pills px-2 py-1\", props.className ? props.className : \"\", props.selectedClass ? props.selectedClass : \"\"].join(\" \")}>\n            <i className={[\"cash-fund-toggle-icon float-left\", props.iconClass ? props.iconClass : null].join(\" \")} />\n            <span className=\"text-sm ml-2\">{props.text}</span>\n        </div>\n    )\n}\n\nexport default TogglePills;","import React from \"react\";\nimport \"./AddCashFundModal.scss\";\nimport Modal from \"../../modal-component/ModalComponent\";\nimport Button from \"../../button-component/ButtonComponent\";\nimport {toast} from \"react-toastify\";\nimport TogglePills from \"./toggle-pills/TogglePills\";\nimport {connect} from \"react-redux\";\nimport {graphQL, graphQLMultipart} from \"../../../../../api/axios\";\nimport {GET_CASH_FUND_CATEGORIES, GET_DEFAULT_CASH_FUND_IMAGE} from \"../../../../../api/queries\";\nimport {ADD_REGISTRY_ITEM} from \"../../../../../api/mutations\";\nimport {setCashFundCategories} from \"../../../../my-registry/MyRegistryActions\";\nimport {M_A_STORE_NAME} from \"../../../../../utils/constants\";\nimport {dataURItoBlob, getCategories, getProducts, fetchDefaultCashFundImage} from \"../../../../../utils/commonFunction\";\nimport {Dropdown} from 'reactjs-dropdown-component';\n\nclass AddCashFundModal extends React.Component {\n\n  PRICE_REGEX = /(^[0-9]+(.?[0-9]{1,2})?$)/g\n  PRICE_REGEX_WHILE_ENTERING = /^[0-9]+.{0,1}[0-9]{0,2}?$/g\n\n  API_CALLED = false\n\n  // Accepted Image input types for Cash fund image\n  ACCEPTED_IMAGE_TYPE = [\n    'image/jpg',\n    'image/jpeg',\n    'image/png'\n  ]\n  MAX_IMAGE_SIZE = 5000000; // 5MB\n\n  // Cash Fund data\n  state = {\n    cashFundImage: {},\n    cashFundName: this.props.categoryData ? this.props.categoryData.registryCategories[0].category.categoryName : \"\",\n    cashFundAmount: \"\",\n    hideTotal: false,\n    cashFundType: {},\n    cashFundDefaultImage: \"\",\n    cashFundNote: \"\",\n    mustHave: false,\n    markCompleted: false,\n    categories: [],\n    errors: {}\n  }\n\n  imageRef = React.createRef()\n\n  modalCloseHandler = () => {\n    this.props.closeModal();\n  }\n\n  validateCashFundData = () => {\n    let valid = true;\n    let errors = {}\n    if (this.state.cashFundName.length <= 0) {\n      errors['cashFundName'] = \"Please enter Cash Fund Name.\"\n      valid = false;\n      // toast.error(\"Please enter Cash Fund Name.\")\n      // return false;\n    }\n\n    if (this.state.cashFundAmount.length <= 0) {\n      errors['cashFundAmount'] = \"Please enter Cash Fund Amount\"\n      valid = false;\n      // toast.error(\"Please enter Cash Fund Amount\")\n      // return false;\n    } else if (!this.state.cashFundAmount.match(this.PRICE_REGEX)){\n      valid = false;\n      errors['cashFundAmount'] = \"Please enter valid amount\"\n    }\n\n    let selectedCat = this.state.categories.find(category => category.selected)\n    if (!selectedCat) {\n      errors['cashFundType'] = \"Please select Cash Fund Type.\"\n      valid = false;\n      // toast.error(\"Please select Cash Fund Type.\")\n      // return false;\n    }\n\n    this.setState({\n      errors: errors\n    })\n\n    return valid;\n  }\n\n  // Adding Cash Fund\n  addCashFundClickHandler = () => {\n    if (this.validateCashFundData() && !this.API_CALLED) {\n      let formData = new FormData()\n      let selectedCat = this.state.categories.find(category => category.selected)\n      let reqData = {\n        query: ADD_REGISTRY_ITEM,\n        operationName: \"addRegistryItems\",\n        variables: {\n          registryId: this.props.stateRegistryInfo.id,\n          input: [{\n            storeName: M_A_STORE_NAME,\n            items: [{\n              title: this.state.cashFundName,\n              price: this.state.cashFundAmount,\n              mostWanted: this.state.mustHave,\n              tags: [],\n              quantity: 1,\n              isGroupGift: true,\n              hideTotal: this.state.hideTotal,\n              markAsCompleted: this.state.markCompleted,\n              note: this.state.cashFundNote,\n              registryCategories: [Number(selectedCat.id)],\n              isCashFund: true\n            }]\n          }]\n        }\n      }\n\n      if (this.state.cashFundImage.type === \"custom\") {\n        let map = {\n          images: [\"variables.input.0.items.0.images\"]\n        }\n        reqData.variables.input[0].items[0]['images'] = null;\n        formData.append(\"map\", JSON.stringify(map))\n        formData.append(\"images\", dataURItoBlob(this.state.cashFundImage.value, this.state.cashFundImage.fileType, this.state.cashFundImage.fileName))\n      } else {\n        reqData.variables.input[0].items[0]['imageUrl'] = this.state.cashFundImage.value ? this.state.cashFundImage.value : this.state.cashFundDefaultImage;\n      }\n\n      formData.append(\"operations\", JSON.stringify(reqData))\n      this.API_CALLED = true\n      graphQLMultipart(formData).then(res => {\n        if (res.data.data && res.data.data.addRegistryItems) {\n          // Successfully added product\n          getProducts(this.props.stateRegistryInfo.id, this.props.dispatch);\n          getCategories(this.props.stateRegistryInfo.id, this.props.dispatch);\n\n          toast.success((\n            <p><b>{this.state.cashFundName}</b> added to your registry!</p>\n          ))\n          this.modalCloseHandler()\n        } else if (res.data.errors) {\n          this.API_CALLED = true\n        }\n      }).catch(err => {\n        this.API_CALLED = true\n        console.error(err.response)\n      })\n    }\n  }\n\n  presentCategories = (allCategories) => {\n    let categories = allCategories.map(category => {\n      let categoryData = {\n        id: category.id,\n        title: category.categoryName,\n        selected: this.state.cashFundType && this.state.cashFundType.id === category.id,\n        key: \"categories\"\n      }\n      if (category.catId) {\n        categoryData['catId'] = category.catId\n      }\n      return categoryData\n    })\n    this.setState({categories: [...categories]})\n    if (this.state.cashFundType && this.state.cashFundType.catId) {\n      this.fetchDefaultImage(this.state.cashFundType.catId);\n    }\n  }\n\n  resetThenSet = (id, key) => {\n    if (this.state.errors.cashFundType) {\n      let newErrorState = {...this.state.errors}\n      delete newErrorState.cashFundType\n      this.setState({\n        errors: newErrorState\n      })\n    }\n    this.setState({\n      categories: this.state.categories.map(category => {\n        category.selected = category.id === id;\n        return category;\n      })\n    })\n    let cashFund = this.state.categories.find(category => category.id === id)\n    if (cashFund.catId) {\n      this.fetchDefaultImage(cashFund.catId)\n    }\n  }\n\n  // Modal Data\n  modalTitle = \"Add Cash Fund\";\n  modalFooterButton = (\n    <Button\n      variant=\"primary\"\n      className=\"px-5 py-1 font-medium text-body\"\n      onClick={this.addCashFundClickHandler}\n    >Add & Close</Button>\n  )\n\n  // Handling custom image selection\n  selectFileHandler = (ev) => {\n    if (ev.target && ev.target.files.length > 0) {\n      const file = ev.target.files[0]\n\n      // Verifying file is image\n      if (this.ACCEPTED_IMAGE_TYPE.includes(file.type)) {\n        if (file.size <= this.MAX_IMAGE_SIZE) {\n          let reader = new FileReader();\n\n          reader.onload = (e) => {\n            const newProductImage = {\n              type: \"custom\",\n              value: e.target.result,\n              fileType: file.type,\n              fileName: file.name\n            }\n            this.setState({\n              cashFundImage: newProductImage\n            })\n          }\n\n          reader.readAsDataURL(file); // Converting to base64 string\n        } else {\n          toast.error(\"File size exceeds the limit\");\n        }\n      } else {\n        toast.error(\"Please select valid image.\");\n      }\n    }\n  }\n\n\n  // Input change handlers\n  cashFundNameChangeHandler = (ev) => {\n    if (this.state.errors.cashFundName) {\n      let newErrorState = {...this.state.errors}\n      delete newErrorState.cashFundName\n      this.setState({\n        errors: newErrorState\n      })\n    }\n\n    this.setState({\n      cashFundName: ev.target.value\n    })\n  }\n\n  cashFundAmountChangeHandler = (ev) => {\n\n    if ((ev.target.value.length > 0 && (Number(ev.target.value[ev.target.value.length - 1]) >= 0 || ev.target.value[ev.target.value.length - 1] === \".\")) && ev.target.value.match(this.PRICE_REGEX_WHILE_ENTERING) || ev.target.value.length <= 0) {\n      if (this.state.errors.cashFundAmount) {\n        let newErrorState = {...this.state.errors}\n        delete newErrorState.cashFundAmount\n        this.setState({\n          errors: newErrorState\n        })\n      }\n\n      this.setState({\n        cashFundAmount: ev.target.value\n      })\n    }\n  }\n\n  cashFundHideTotalChangeHandler = (_) => {\n    this.setState((prevState, _) => ({\n      hideTotal: !prevState.hideTotal\n    }))\n  }\n\n  cashFundTypeChangeHandler = (ev) => {\n    if (this.props.stateCashFundCategories.length > 0) {\n      const changedCategory = this.props.stateCashFundCategories.find(category => Number(category.id) === Number(ev.target.value))\n      if (changedCategory.id) {\n        this.setState({\n          cashFundType: changedCategory\n        })\n      }\n    }\n  }\n\n  cashFundNoteChangeHandler = (ev) => {\n    this.setState({\n      cashFundNote: ev.target.value\n    })\n  }\n\n  mustHaveClickHandler = () => {\n    this.setState((prevState, _) => ({\n      mustHave: !prevState.mustHave\n    }))\n  }\n\n  markCompletedClickHandler = () => {\n    this.setState((prevState, _) => ({\n      markCompleted: !prevState.markCompleted\n    }))\n  }\n\n  // Fetch DEFAULT IMAGE of category\n\n  fetchDefaultImage = async (categoryId) => {\n    if (!this.state.cashFundImage.value) {\n      let result = fetchDefaultCashFundImage(categoryId)\n      result.then(res => {\n        if (res.status === \"success\"){\n          this.setState({\n            cashFundDefaultImage: res.data\n          })\n        }\n      })\n    }\n  }\n\n  render() {\n    if (this.props.imageUrl && !this.state.cashFundImage.value && this.state.cashFundImage.value !== this.props.imageUrl) {\n      this.setState({\n        cashFundImage: {\n          type: \"url\",\n          value: this.props.imageUrl\n        }\n      })\n    }\n\n    if (this.props.stateCashFundCategories.length > 0 && this.state.categories.length <= 0) {\n      this.presentCategories(this.props.stateCashFundCategories)\n    }\n\n    if (this.props.stateCashFundCategories.length <= 0) {\n      // Fetching all cash fund categories\n      const reqData = {\n        query: GET_CASH_FUND_CATEGORIES,\n        operationName: \"getCashFund\",\n        variables: {\n          registryId: this.props.stateRegistryInfo.id\n        }\n      }\n\n      graphQL(reqData).then(res => {\n        if (res.data.data && res.data.data.cashFundCategories) {\n          let allCashFundCategories = res.data.data.cashFundCategories.map(cat => {\n            cat.category['catId'] = cat.category.id\n            cat.category.id = cat.id\n            return cat.category\n          })\n          this.presentCategories(allCashFundCategories);\n          this.props.dispatch(setCashFundCategories(allCashFundCategories))\n        }\n      }).catch(err => {\n        console.error(err.response)\n      })\n    }\n\n\n    if (!this.state.cashFundType.id && this.props.stateCashFundCategories.length > 0) {\n      let foundCategory = false\n      if (this.props.categoryData?.registryCategories && this.props.categoryData.registryCategories.length > 0) {\n        for (let cashFundCategory of this.props.stateCashFundCategories) {\n          if (Number(this.props.categoryData.registryCategories[0].category.id) === Number(cashFundCategory.id)) {\n            foundCategory = true;\n            (\n              async () => {\n                await this.setState({\n                  cashFundType: cashFundCategory\n                })\n                this.presentCategories(this.props.stateCashFundCategories)\n              }\n            )()\n            break\n          }\n        }\n      }\n      //For future ref\n      //Default category will be first\n      // if (!foundCategory) {\n      //   (\n      //     async () => {\n      //       await this.setState({\n      //         cashFundType: this.props.stateCashFundCategories[0]\n      //       })\n      //       this.presentCategories(this.props.stateCashFundCategories)\n      //     }\n      //   )()\n      // }\n    }\n\n    return (\n      <>\n        <Modal\n          show={this.props.show}\n          title={this.modalTitle}\n          footer={this.modalFooterButton}\n          closeModal={this.modalCloseHandler}>\n\n          <div className=\"row cash-fund-modal-content\">\n            <div className=\"col-12 col-md-5\">\n              <div className=\"cash-fund-modal-image-section mr-1\">\n                {this.state.cashFundImage.type ?\n                  <img src={this.state.cashFundImage.value} alt=\"Cash Fund\" className=\"cash-fund-modal-image\"/>\n                  :\n                  this.state.cashFundDefaultImage ?\n                    <img src={this.state.cashFundDefaultImage} alt=\"Cash Fund\" className=\"cash-fund-modal-image\"/>\n                    :\n                    <div className=\"cash-fund-modal-no-image\"/>\n                }\n                <i\n                  className=\"icon-preview change-cash-fund-image-icon p-1\"\n                  onClick={() => {\n                    this.imageRef.current.click()\n                  }}\n                />\n                <input\n                  type=\"file\"\n                  className=\"d-none\"\n                  ref={this.imageRef}\n                  accept={this.ACCEPTED_IMAGE_TYPE.join(\",\")}\n                  onChange={(ev) => this.selectFileHandler(ev)}\n                />\n              </div>\n            </div>\n            <div className=\"col-12 col-md-7 cash-fund-input-section\">\n              <div className=\"ml-3 mr-6\">\n\n                {/* Cash Fund name */}\n                <div className=\"row\">\n                  <div className=\"col cash-fund-input-container\">\n                    <p className=\"cash-fund-input-label text-sm font-medium mt-2 mt-md-0\">Cash Fund Name<label\n                      className=\"asterik\">*</label></p>\n                    <input\n                      className={[\"cash-fund-input h2 mt-1 w-100 mw-100 p-2\", this.state.errors.cashFundName ? \"cash-fund-input-error\" : \"\"].join(\" \")}\n                      type=\"text\"\n                      value={this.state.cashFundName}\n                      onChange={(ev) => this.cashFundNameChangeHandler(ev)}\n                    />\n                    {this.state.errors.cashFundName ? <label\n                        className=\"text-sm cash-fund-input-error-text\">{this.state.errors.cashFundName}</label>\n                      : null}\n                  </div>\n                </div>\n\n                {/* Cash Fund type */}\n                <div className=\"row mt-5\">\n                  <div className=\"col cash-fund-input-container\">\n                    <p className=\"cash-fund-input-label text-sm font-medium mb-1\">Type<label\n                      className=\"asterik\">*</label></p>\n                    <div\n                      className={[\"cash-fund-select w-100 mw-100\", this.state.errors.cashFundType ? \"cash-fund-input-error\" : \"\"].join(\" \")}>\n                      <Dropdown\n                        title=\"Select category\"\n                        list={this.state.categories}\n                        resetThenSet={this.resetThenSet}\n                      />\n                    </div>\n                    {this.state.errors.cashFundType ? <label\n                        className=\"text-sm cash-fund-input-error-text\">{this.state.errors.cashFundType}</label>\n                      : null}\n                  </div>\n                </div>\n\n\n                <div className=\"row mt-5\">\n\n                  <div className=\"col cash-fund-input-container\">\n                    <p className=\"cash-fund-input-label text-sm font-medium mb-1\">Total Amount<label\n                      className=\"asterik\">*</label></p>\n                    <div className=\"row\">\n\n                      {/* Cash fund amount */}\n                      <div className=\"col\">\n                        <div className=\"position-relative\">\n                          <input\n                            className={[\"cash-fund-input w-100 mw-100 p-1 pl-5 text-body\", this.state.errors.cashFundAmount ? \"cash-fund-input-error\" : \"\"].join(\" \")}\n                            type=\"text\"\n                            value={this.state.cashFundAmount}\n                            onChange={(ev) => this.cashFundAmountChangeHandler(ev)}\n                          />\n                          <span className=\"cash-fund-price-input-currency text-body\">$</span>\n                        </div>\n                      </div>\n\n                      {/* Cash fund hidden option */}\n                      <div className=\"col align-self-center\">\n                        <label\n                          className=\"checkbox d-flex align-items-center\">\n                          <span className=\"checkbox__input mr-2\">\n                            <input\n                              type=\"checkbox\"\n                              onChange={(ev) => this.cashFundHideTotalChangeHandler(ev)}\n                            />\n                            <span className=\"checkbox__control d-flex justify-content-center align-items-center\">\n                              <i className=\"icon-check\"/>\n                            </span>\n                          </span>\n                          <span\n                            className=\"radio__label text-sm\">Hide total from guests</span>\n                        </label>\n                      </div>\n                    </div>\n                    {this.state.errors.cashFundAmount ? <label\n                        className=\"text-sm cash-fund-input-error-text\">{this.state.errors.cashFundAmount}</label>\n                      : null}\n                  </div>\n                </div>\n\n                <div className=\"row mt-5\">\n                  <div className=\"col\">\n                    <TogglePills\n                      text=\"Must Have\"\n                      iconClass=\"icon-heart\"\n                      selectedClass={this.state.mustHave ? \"cash-fund-must-have-selected\" : null}\n                      onClick={this.mustHaveClickHandler}\n                    />\n                    {/* TODO: Change below icon to rounded correct when added */}\n                    <TogglePills\n                      text=\"Mark As Completed\"\n                      iconClass=\"icon-check\"\n                      className=\"ml-2\"\n                      selectedClass={this.state.markCompleted ? \"cash-fund-completed-selected\" : null}\n                      onClick={this.markCompletedClickHandler}\n                    />\n                  </div>\n                </div>\n\n\n                {/* Cash fund note */}\n                <div className=\"row mt-5\">\n                  <div className=\"col cash-fund-input-container\">\n                    <p className=\"cash-fund-input-label text-sm font-medium\">Notes</p>\n                    <textarea\n                      placeholder=\"Write a note for your friends and family\"\n                      className=\"cash-fund-textarea w-100 mw-100 mt-1 w-100 mw-100 p-1 text-body\"\n                      value={this.state.cashFundNote}\n                      onChange={(ev) => this.cashFundNoteChangeHandler(ev)}\n                      rows={2}/>\n                  </div>\n                </div>\n\n              </div>\n            </div>\n          </div>\n        </Modal>\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    stateCashFundCategories: state.myRegistry.cashFundCategories,\n    stateRegistryInfo: state.registry.info\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(AddCashFundModal);","import React from 'react';\nimport \"./AddGift.scss\";\nimport {connect} from 'react-redux';\nimport Button from '../button-component/ButtonComponent';\nimport Modal from \"../modal-component/ModalComponent\";\nimport BookmarkletSection from \"./bookmarklet-section/BookmarkletSection\";\nimport ImportGiftCard from \"./import-gift-card/ImportGiftCard\";\nimport AddGiftAnotherStore from \"./add-gift-another-store/AddGiftAnotherStore\";\nimport ImportRegistry from \"./import-registry/ImportRegistry\";\nimport {clearAnotherStoreProductInfo, setAnotherStoreRegistryItems} from \"modules/my-registry/MyRegistryActions\";\nimport {ADD_REGISTRY_ITEM, SAVE_REGISTRY_DATA} from \"../../../../api/mutations\";\nimport {graphQLMultipart as graphQL, graphQL as jsonGraphQL} from \"../../../../api/axios\";\nimport {getProducts, getCategories} from \"utils/commonFunction\";\nimport {toast} from \"react-toastify\";\nimport {IMPORT_REGISTRY_EMAIL} from \"../../../../utils/constants\";\nimport {dataURItoBlob} from \"../../../../utils/commonFunction\";\nimport AddCashFundModal from \"../../../commons/components/cash-fund-card/add-cash-fund-modal/AddCashFundModal\";\n\nclass AddGift extends React.Component {\n  // Variable declarations\n  state = {\n    show: false,\n    updateModal: false,\n    showCashFundModal: false,\n    cashFundProduct: null,\n    currentContent: \"\",\n  }\n\n  addAnotherGiftApiCalled = false\n  addImportRegistryApiCalled = false\n\n  modalTitle = \"\"\n  modalBody = \"\"\n  modalTitleContent = \"\"\n  modalFooterButtons = \"\"\n\n  //TODO: List to be populated from the API\n  categoryList = [\n    {\n      name: \"Nursery\",\n      description: \"A curated collection of our favorite nursery must-haves.\",\n      // imageUrl: \"https://cdn.shopify.com/s/files/1/2338/2917/files/nursery_nav_220x280.jpg?4104111\"\n      imageUrl: \"https://raw.githack.com/HetPatel-Aubergine/testCDNRepo/master/assets/Rectangle 1685@2x 2.png\"\n    },\n    {\n      name: \"Activity Equipment + Toys\",\n      description: \"The best playthings to help babies learn, grow and have fun.\",\n      imageUrl: \"https://raw.githack.com/HetPatel-Aubergine/testCDNRepo/master/assets/image 2@2x.png\"\n      // imageUrl: \"https://cdn.shopify.com/s/files/1/2338/2917/files/nursery_nav_220x280.jpg?4104111\"\n    },\n    {\n      name: \"Gear + Travel\",\n      description: \"Everything your baby needs when you're on the go.\",\n      imageUrl: \"https://raw.githack.com/HetPatel-Aubergine/testCDNRepo/master/assets/Rectangle 1685@2x.png\"\n      // imageUrl: \"https://cdn.shopify.com/s/files/1/2338/2917/files/baby-nav-callout.jpg?v=1594915209\"\n    },\n    {\n      name: \"Feeding\",\n      description: \"Meal time essentials from bottles to baby food makers.\",\n      imageUrl: \"https://raw.githack.com/HetPatel-Aubergine/testCDNRepo/master/assets/image 1@2x.png\"\n      // imageUrl: \"https://cdn.shopify.com/s/files/1/2338/2917/files/for_mom_nav_220x280.jpg?4104102\"\n    }\n  ]\n\n  // Helper function\n\n  clearModalData = () => {\n    this.modalTitle = \"\"\n    this.modalBody = \"\"\n    this.modalTitleContent = \"\"\n    this.modalFooterButtons = \"\"\n\n    this.props.dispatch(clearAnotherStoreProductInfo());\n    this.props.dispatch(setAnotherStoreRegistryItems([]));\n  }\n\n\n  checkDataValidity = (storeProduct) => {\n\n    // Valid store URL\n    try {\n      new URL(storeProduct.productUrl);\n    } catch {\n      toast.error(\"Invalid Store Url\")\n      return false;\n    }\n\n    // Valid Product Name\n    if (storeProduct.productName.length <= 0) {\n      toast.error(\"Invalid Product Name\");\n      return false;\n    }\n\n    // Valid Price\n    if (storeProduct.price.length <= 0) {\n      toast.error(\"Invalid Price\");\n      return false;\n    }\n\n    // Valid Quantity\n    if (storeProduct.quantity < 1) {\n      toast.error(\"Invalid Quantity\");\n      return false;\n    }\n\n    // TODO: if necessary Valid Category\n    // if (!storeProduct.category.id) {\n    //   toast.error(\"Invalid Category\");\n    //   return false;\n    // }\n\n    return true;\n  }\n\n  addItemToRegistry = () => {\n    const storeProduct = this.props.stateAnotherStoreProduct;\n    const isValidData = this.checkDataValidity(storeProduct);\n    if (!isValidData) {\n      return;\n    }\n\n    let storeUrl = new URL(storeProduct.productUrl);\n    storeUrl = storeUrl.hostname.split(\".\")\n    const storeName = storeUrl[storeUrl.length - 2]\n\n    let formData = new FormData()\n    let data = {\n      query: ADD_REGISTRY_ITEM,\n      operationName: \"addRegistryItems\",\n      variables: {\n        \"registryId\": this.props.stateRegistryInfo.id,\n        \"input\": [{\n          \"storeName\": storeName,\n          \"items\": [{\n            \"title\": storeProduct.productName,\n            \"registryCategories\": storeProduct.category.length > 0 ? storeProduct.category.map(category => Number(category.id)) : null,\n            \"tags\": [],\n            \"storeItemUrl\": storeProduct.productUrl,\n            \"price\": storeProduct.price,\n            \"quantity\": storeProduct.quantity,\n            \"isCashAcceptedOnly\": storeProduct.howToGift.id === 1 ? true : false,\n            \"mostWanted\": storeProduct.mustHave,\n            \"isGroupGift\": storeProduct.groupGift,\n            \"note\": storeProduct.note\n          }]\n        }]\n      }\n    }\n\n    if (storeProduct.productImage.type === \"custom\") {\n      let map = {\n        images: [\"variables.input.0.items.0.images\"]\n      }\n      data.variables.input[0].items[0]['images'] = null;\n      formData.append(\"map\", JSON.stringify(map))\n      formData.append(\"images\", dataURItoBlob(storeProduct.productImage.value, storeProduct.productImage.fileType, storeProduct.productImage.fileName))\n    } else {\n      data.variables.input[0].items[0]['imageUrl'] = this.props.stateAnotherStoreProduct.productImage.value;\n    }\n\n    formData.append(\"operations\", JSON.stringify(data))\n    if (!this.addAnotherGiftApiCalled){\n      this.addAnotherGiftApiCalled = true\n      graphQL(formData).then(res => {\n      if (res.status === 200) {\n        // Successfully added product\n        getProducts(this.props.stateRegistryInfo.id, this.props.dispatch);\n        getCategories(this.props.stateRegistryInfo.id, this.props.dispatch);\n\n        toast.success((\n          <p><b>{storeProduct.productName}</b> added to your registry!</p>\n        ))\n\n        this.clearModalData();\n        this.modalCloseHandler();\n      }\n    }).catch(err => {\n      this.addAnotherGiftApiCalled = false\n      toast.error(\"Some error occurred.\");\n      console.error(err.message)\n    })\n    }\n  }\n\n  // Event Handlers\n\n  modalCloseHandler = () => {\n    this.clearModalData()\n    this.setState({\n      show: false,\n      currentContent: \"\"\n    })\n  }\n\n  openCashFundModal = () => {\n    this.modalCloseHandler();\n    this.setState({\n      showCashFundModal: true\n    })\n  }\n\n  closeCashFundModal = () => {\n    this.setState({\n      showCashFundModal: false\n    })\n  }\n\n  openAddGiftModal = () => {\n    this.clearModalData()\n    this.modalTitle = \"Add gift\"\n    this.setState((prevState, props) => ({\n      show: true,\n      updateModal: !prevState.updateModal\n    }))\n\n    this.modalBody = (\n      <div className=\"row\">\n        <div className=\"col\">\n          <h4 className=\"font-weight-bold\">M+A Store</h4>\n          <div className=\"card-deck mt-2\">\n            <div className=\"card m-a-cards\"><p className=\"m-auto text-body font-medium\">New Arrivals</p></div>\n            <div className=\"card m-a-cards\"><p className=\"m-auto text-body font-medium\">Most Popular Gifts</p></div>\n            <div className=\"card m-a-cards\" onClick={this.openCashFundModal}><p\n              className=\"m-auto text-body font-medium\">Cash Funds</p>\n            </div>\n          </div>\n          <div className=\"card-deck mt-4\">\n            {this.categoryList.map(category =>\n                <div className=\"card m-a-category-card\" key={\"category-\" + category.name}>\n                  <img src={category.imageUrl} alt={category.name}/>\n                  <div className=\"px-2 my-3\">\n                    <p className=\"text-sm font-medium\">{category.name}</p>\n                    <p className=\"text-sm mt-1\">{category.description}</p>\n                  </div>\n                </div>\n            )}\n          </div>\n          <h4 className=\"font-weight-bold mt-5\">Another Store</h4>\n          <div className=\"row mt-2\">\n            <div className=\"col\">\n              <BookmarkletSection/>\n            </div>\n          </div>\n          <div className=\"row\">\n            <div className=\"col-sm-12 col-md-6 mt-5\">\n              <ImportGiftCard\n                iconClass=\"icon-shopping-cart\"\n                title=\"Add Gift from another store\"\n                text=\"You can add links from other online store and save in your registry.\"\n                onClick={this.importGiftAnotherStoreHandler}\n              />\n            </div>\n            <div className=\"col-sm-12 col-md-6 mt-5\">\n              <ImportGiftCard\n                iconClass=\"icon-import\"\n                title=\"Import\"\n                text=\"You can import a gift or an entire registry from another store\"\n                onClick={this.importRegistry}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  anotherStoreItemViewDetail = (storeProduct) => {\n    if (storeProduct.productUrl) {\n      window.open(storeProduct.productUrl, '_blank');\n    }\n  }\n\n  validImportRegistryData = (registryItems) => {\n    if (registryItems.length <= 0) {\n      toast.error(\"No Item found\");\n      return false;\n    }\n    // TODO: if necessary Valid Category\n    // for (const item of registryItems) {\n    //   if (item.categories.length <= 0) {\n    //     toast.error(\"Please select category for all product\");\n    //     return false;\n    //   }\n    // }\n    return true;\n  }\n\n  getRefinedPrice = (price) => {\n    let newPrice = \"\";\n    for (let char of price) {\n      if (char !== \".\") {\n        if (Number.isInteger(Number(char))) {\n          newPrice += char\n        }\n      } else {\n        newPrice += char\n      }\n    }\n\n    return newPrice;\n  }\n\n  getCleanedRegistryItems = (registryItems) => {\n    let cleanedRegistryItems = []\n    for (const item of registryItems) {\n      // TODO: Handle multiple store for single product\n      const itemStore = item.stores[0]\n      if (cleanedRegistryItems.find(el => el.storeName ? el.storeName === itemStore.name : false)) {\n        cleanedRegistryItems = cleanedRegistryItems.map(el => {\n          if (el.storeName === itemStore.name) {\n            if (el.items) {\n              el.items.push({\n                title: item.title,\n                // TODO: change category\n                registryCategories: item.categories.length > 0 ? item.categories.map(category => Number(category.id)) : null,\n                quantity: 1,\n                tags: [],\n                price: this.getRefinedPrice(itemStore.price)\n              })\n            } else {\n              el['items'] = [{\n                title: item.title,\n                // TODO: change category\n                registryCategories: item.categories.length > 0 ? item.categories.map(category => Number(category.id)) : null,\n                quantity: 1,\n                tags: [],\n                price: this.getRefinedPrice(itemStore.price)\n              }]\n            }\n            if (item.img) {\n              el.items[el.items.length - 1]['imageUrl'] = item.img\n            }\n          }\n          return el;\n        })\n      } else {\n        let newStore = {\n          storeName: itemStore.name,\n          items: [{\n            title: item.title,\n            // TODO: change category\n            registryCategories: item.categories.length > 0 ? item.categories.map(category => Number(category.id)) : null,\n            quantity: 1,\n            tags: [],\n            price: this.getRefinedPrice(itemStore.price)\n          }]\n        }\n\n        if (item.img) {\n          newStore.items[newStore.items.length - 1]['imageUrl'] = item.img\n        }\n        cleanedRegistryItems.push(newStore)\n      }\n    }\n\n    return cleanedRegistryItems;\n  }\n\n  importRegistryClickHandler = () => {\n    if (!this.validImportRegistryData(this.props.stateAnotherStoreRegistry)) {\n      return;\n    }\n\n    const registryItems = this.getCleanedRegistryItems(this.props.stateAnotherStoreRegistry)\n    if (registryItems.length > 0) {\n      const reqData = {\n        query: ADD_REGISTRY_ITEM,\n        operationName: \"addRegistryItems\",\n        variables: {\n          \"registryId\": this.props.stateRegistryInfo.id,\n          \"input\": registryItems\n        }\n      }\n      if (!this.addImportRegistryApiCalled) {\n        this.addImportRegistryApiCalled = true\n        jsonGraphQL(reqData).then(res => {\n          if (res.data.data.addRegistryItems) {\n            getProducts(this.props.stateRegistryInfo.id, this.props.dispatch);\n            getCategories(this.props.stateRegistryInfo.id, this.props.dispatch);\n            toast.success(\"Registry items imported successfully\");\n            this.clearModalData();\n            this.modalCloseHandler();\n          }\n        }).catch(err => {\n          this.addImportRegistryApiCalled = false\n          toast.error(\"Error occurred while adding items to registry\")\n          console.error(err);\n        })\n      }\n    }\n  }\n\n  importGiftAnotherStoreHandler = () => {\n    this.clearModalData()\n    this.modalTitle = \"Add gift from another store\"\n    this.modalTitleContent = (\n      <div className=\"row mt-2 mb-4\">\n        <div className=\"col\">\n          <BookmarkletSection/>\n        </div>\n      </div>\n    )\n    this.modalBody = <AddGiftAnotherStore/>\n\n    this.setState((prevState, props) => ({\n      updateModal: !prevState.updateModal,\n      currentContent: \"anotherStoreProduct\"\n    }))\n  }\n\n  importRegistry = () => {\n    this.clearModalData()\n    this.modalTitle = \"Import Registry\"\n    this.modalBody = <ImportRegistry/>\n\n    this.setState((prevState, _) => ({\n      updateModal: !prevState.updateModal,\n      currentContent: \"importRegistry\"\n    }))\n  }\n\n  render() {\n\n    if (this.props.stateAnotherStoreProduct && this.state.currentContent === \"anotherStoreProduct\") {\n      this.modalFooterButtons = (\n        <>\n          <Button\n            variant=\"secondary\"\n            className=\"px-3 py-1 font-weight-bold font-medium text-body\"\n            disabled={!this.props.stateAnotherStoreProduct.productName}\n            onClick={() => this.anotherStoreItemViewDetail(this.props.stateAnotherStoreProduct)}\n          >View Details</Button>\n          <Button\n            variant=\"primary\"\n            className=\"px-4 py-1 font-weight-bold font-medium text-body\"\n            disabled={!this.props.stateAnotherStoreProduct.productName}\n            onClick={this.addItemToRegistry}\n          >Save & Close</Button>\n        </>\n      )\n    }\n\n    if (this.props.stateAnotherStoreRegistry && this.state.currentContent === \"importRegistry\") {\n      this.modalFooterButtons = (\n        <>\n          {/*TODO: change href of email us link*/}\n          <a href={\"mailto:\" + IMPORT_REGISTRY_EMAIL} tabindex=\"0\" target='_blank'\n             className=\"mr-auto import-registry-email-link text-sm font-medium\">Email Us For Help</a>\n          {/*TODO: Integrate API when multiple category is supported*/}\n          <Button\n            variant=\"primary\"\n            className=\"px-4 py-1 font-weight-bold font-medium text-body\"\n            disabled={this.props.stateAnotherStoreRegistry.length <= 0}\n            onClick={this.importRegistryClickHandler}\n          >Import</Button>\n        </>\n      )\n    }\n\n    return (\n      <>\n        <Button\n          variant=\"primary\"\n          className=\"px-3 py-1 font-weight-bold font-medium m-a-popover m-a-popover-top-right\"\n          onClick={this.openAddGiftModal}\n        >\n          <span className=\"text-body\">Add Gift</span>\n          <div className=\"m-a-popover-content px-3 py-2\">\n            <span className=\"font-medium text-sm\">What is Add Gift?</span>\n            <p className=\"text-sm font-weight-normal m-a-popover-content-desc\">You can add gift from our store and save\n              in your registry.</p>\n          </div>\n        </Button>\n\n        <Modal\n          show={this.state.show}\n          updateModal={this.state.updateModal}\n          title={this.modalTitle}\n          titleContent={this.modalTitleContent}\n          footer={this.modalFooterButtons}\n          closeModal={this.modalCloseHandler}>\n          {this.modalBody}\n        </Modal>\n\n        {this.state.showCashFundModal ?\n          <AddCashFundModal\n            show={this.state.showCashFundModal}\n            closeModal={this.closeCashFundModal}\n            categoryData={this.state.cashFundProduct}\n          />\n          : null}\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    stateAnotherStoreProduct: state.myRegistry.anotherStoreProduct,\n    stateAnotherStoreRegistry: state.myRegistry.anotherStoreRegistry,\n    stateRegistryInfo: state.registry.info\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(AddGift);","import React from 'react';\nimport './FilterSection.scss';\nimport Filter from '../filter/Filter';\nimport { connect } from 'react-redux';\nimport FilterItemChip from '../filter/filter-item-chip/FilterItemChip';\nimport { clearFilter, setChildFilter } from \"../../MyRegistryActions\"\nimport AddGift from \"../../../commons/components/add-gift/AddGift\";\n\nclass FilterSection extends React.Component {\n\n  // Filter chips close handler\n  deleteChipHandler = (isParent, childId) => {\n    if (isParent) {\n      this.props.dispatch(clearFilter())\n    } else {\n      const newChildArray = this.props.stateFilterApplied.childFilter.filter(element => {\n        return element !== childId\n      })\n      this.props.dispatch(setChildFilter(newChildArray))\n    }\n  }\n\n  //Clear filter state\n  clearFilterHandler = (ev) => {\n    ev.preventDefault()\n    this.props.dispatch(clearFilter())\n  }\n\n  render() {\n    // Get all the filter chips from the state based on id\n    let filterChips = {}\n    if (this.props.stateFilterApplied) {\n      let allChild = []\n      if (this.props.stateFilterApplied.parentFilter) {\n        filterChips.parentFilter = this.props.stateFilterCategory.find(element => {\n          return element.id === this.props.stateFilterApplied.parentFilter\n        })\n        allChild = filterChips.parentFilter.child\n      }\n      if (this.props.stateFilterApplied.childFilter) {\n        filterChips.childFilter = this.props.stateFilterApplied.childFilter.map(item => {\n          return allChild.find(element => {\n            return element.id === item\n          })\n        })\n      }\n    }\n\n    return (\n      <div className=\"row mb-5 align-items-center align-items-md-start\">\n        <div className=\"col\">\n          <h4 className=\"font-weight-bold mr-2 filter-section-total-items\">{this.props.productCount} {this.props.productCount === 1 ? \"item\" : \"items\"}</h4>\n          <div className=\"filtered-items\">\n            {filterChips.parentFilter ?\n              <FilterItemChip text={filterChips.parentFilter.display} className=\"mr-2\"\n                deleteHandler={() => this.deleteChipHandler(true, null)} />\n              : null}\n            {filterChips.childFilter ?\n              filterChips.childFilter.map(item =>\n                <FilterItemChip\n                  text={item.display}\n                  className=\"mr-2\"\n                  key={filterChips.parentFilter.id + \"-\" + item.id}\n                  deleteHandler={() => this.deleteChipHandler(false, item.id)} />)\n              : null}\n            {filterChips.parentFilter ?\n              <a className=\"font-medium text-sm filter-clear-link\" href=\"#\" tabindex=\"0\"\n                onClick={(ev) => this.clearFilterHandler(ev)}>Clear\n                all</a>\n              : null}\n          </div>\n        </div>\n        <div className=\"col-8 col-md-4 d-flex justify-content-end text-align-right\">\n          <div className=\" mr-3\">\n            <Filter />\n          </div>\n          <div className=\"position-relative\">\n            <AddGift />\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\n\nconst mapStateToProps = state => {\n  return {\n    stateFilterApplied: state.myRegistry.filterApplied,\n    stateFilteredProducts: state.myRegistry.filteredProducts,\n    stateFilterCategory: state.myRegistry.filterCategory\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(FilterSection);\n","import React from \"react\";\nimport \"./CashFundCardNotAdded.scss\";\n\nclass CashFundCardNotAdded extends React.Component {\n  render() {\n    return (\n      <div\n        className={[\"baby-registry-cash-fund-card py-3 mb-2 px-2 px-md-0\", this.props.className ? this.props.className : \"\"].join(\" \")}>\n        <div className=\"row\">\n          <div className=\"col-12 col-md-2\">\n\n            <div className=\"pl-0 pl-md-3\">\n              {this.props.data.item.imageUrl ?\n                <img className=\"cash-fund-image d-block mx-auto\" src={this.props.data.item.imageUrl}/>\n                :\n                <div className=\"baby-registry-cash-fund-no-image\" />\n              }\n            </div>\n\n          </div>\n          <div className=\"col\">\n            <div className=\"float-left my-2 my-md-0\">\n              <p className=\"text-body font-medium\">{this.props.data.registryCategories[0].category.categoryName}</p>\n              <p\n                className=\"text-sm cash-fund-description\">{this.props.data.registryCategories[0].category.description}</p>\n            </div>\n            <button className=\"cash-fund-add-btn float-md-right float-left mr-6 my-2 my-md-0 \" onClick={this.props.addButtonClickHandler}/>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default CashFundCardNotAdded;","import React from \"react\";\nimport CashFundCardNotAdded from \"./cash-fund-card-not-added/CashFundCardNotAdded\";\n\nclass CashFundCard extends React.Component {\n  render() {\n    return <CashFundCardNotAdded data={this.props.data} addButtonClickHandler={this.props.addButtonClickHandler}/>\n  }\n}\n\nexport default CashFundCard;","import React, { Component } from 'react'\nimport { connect } from \"react-redux\";\nimport AddedCard from \"modules/commons/components/added-card/AddedCard\";\nimport {\n  toggleMustHaveProduct,\n  addRecommendedProduct,\n  setFilterCategory,\n} from \"../../MyRegistryActions\";\nimport CheckList from \"modules/my-registry/components/checkList/CheckList\";\nimport CheckListItems from \"modules/my-registry/components/checkList/CheckListItems\";\nimport ViewRecommend from 'modules/commons/components/view-recommend/ViewRecommend';\nimport FilterSection from '../../components/filter-section/FilterSection';\nimport { graphQL, getRecommendation } from 'api/axios';\nimport { GET_RECOMMENDATIONS } from 'api/queries';\nimport { TOGGLE_MUST_HAVE } from 'api/mutations';\nimport { getProducts, removeProductFromCartHandler, getCategories } from \"utils/commonFunction\";\nimport { Cookies } from \"react-cookie\";\nimport config from \"api/config\";\nimport axios from \"axios\";\nimport CashFundCard from \"../../../commons/components/cash-fund-card/CashFundCard\";\nimport Button from \"../../../commons/components/button-component/ButtonComponent\";\nimport AddCashFundModal from \"../../../commons/components/cash-fund-card/add-cash-fund-modal/AddCashFundModal\";\nimport \"./Everything.scss\"\n\nclass Everything extends Component {\n\n  state = {\n    showCashFundModal: false,\n    cashFundProduct: null\n  }\n  checkListRef = React.createRef();\n\n  openCashFundModal = () => {\n    this.setState({\n      showCashFundModal: true\n    })\n  }\n\n  setCashFundCategoryAndOpenModal = (product) => {\n    this.setState({\n      cashFundProduct: { ...product }\n    })\n    this.openCashFundModal()\n  }\n\n  closeCashFundModal = () => {\n    this.setState({\n      showCashFundModal: false,\n      cashFundProduct: null\n    })\n  }\n\n  componentDidMount() {\n    getCategories(this.props.stateRegistryInfo.id, this.props.dispatch);\n    getProducts(this.props.stateRegistryInfo.id, this.props.dispatch);\n  }\n\n\n  // Updating product count in filter categories\n  updateFilterList = (addedProducts) => {\n    const newFilterList = [\n      {\n        id: \"giftsAdded\",\n        display: \"Gifts added\",\n        count: addedProducts.length,\n        child: [\n          {\n            id: \"mustHave\",\n            display: \"Must have\",\n            count: addedProducts.filter(product => product.mostWanted).length\n          },\n          {\n            id: \"purchased\",\n            display: \"Purchased\",\n            count: addedProducts.filter(product => product.isPurchased).length\n          },\n          {\n            id: \"reserved\",\n            display: \"Reserved\",\n            count: addedProducts.filter(product => product.isReserved).length\n          },\n          {\n            id: \"available\",\n            display: \"Available\",\n            count: 0\n          }\n        ]\n      },\n      {\n        id: \"giftsToAdd\",\n        display: \"Gifts to add\",\n        count: 0\n      }\n    ]\n\n    this.props.dispatch(setFilterCategory(newFilterList))\n  }\n\n  toggleMustHaveProduct = (e, product) => {\n    e.stopPropagation()\n    let data = {\n      query: TOGGLE_MUST_HAVE,\n      variables: {\n        productId: product.id,\n        mustHaveValue: !product.mostWanted,\n        quantity: product.quantity\n      }\n    }\n    graphQL(data).then(res => {\n      if (res.status === 200) {\n        this.props.dispatch(toggleMustHaveProduct(product.item.id))\n      }\n    }).catch(err => {\n      console.error(err.message)\n    })\n  }\n\n\n  setAllRecommendation = async (categories) => {\n    let recommendedCategory = []\n    for (let parentCat of categories) {\n      for (let category of parentCat.subCategories) {\n        if (category.subProductTypes.length) {\n          for (let subProduct of category.subProductTypes) {\n            recommendedCategory.push({\n              ...subProduct,\n              isSubProduct: true,\n              parentCategory: category.categoryName,\n            })\n          }\n        } else {\n          recommendedCategory.push({\n            ...category,\n            parentCategory: parentCat.categoryName,\n          })\n        }\n      }\n    }\n\n    for (let recommendedCat of [...recommendedCategory]) {\n      let data = {\n        query: GET_RECOMMENDATIONS,\n        variables: {\n          registryId: Number(this.props.stateRegistryInfo.id),\n          categoryId: Number(recommendedCat.category.id),\n        }\n      }\n      const apiURL = process.env.NODE_ENV === 'production' ? config.PRODUCTION_API_URL : config.LOCAL_API_URL;\n      const cookies = new Cookies();\n\n      await axios.get(apiURL + 'graphql', {\n        params: data,\n        headers: { \"Authorization\": cookies.get(\"access_token\") ? \"Token \" + cookies.get(\"access_token\") : \"\" }\n      })\n        .then(res => {\n          let rData = res.data.data.itemRecommendations.map(item => {\n            let resData = { ...item }\n            resData['quantity'] = 1\n            resData['category'] = recommendedCat\n            if (item.maItemVariantItemRecommendation.length) {\n              resData['activeVariant'] = item.maItemVariantItemRecommendation[0]\n            }\n            else {\n              resData['activeVariant'] = null\n            }\n            return resData\n          })\n          // count = count + 1;\n          if (rData.length !== 0) {\n            this.props.dispatch(addRecommendedProduct(rData))\n          }\n        }).catch(err => {\n          console.error(err.message)\n        })\n    }\n  }\n\n  getSortedProducts = (addedProducts, stateCategories, stateRecommendedProducts, stateFilterApplied) => {\n    const cashFundCategory = stateCategories.find(category => category.categoryType && Number(category.categoryType.id) === 2)\n    // for future ref : let cashFundCount = 0\n    if (cashFundCategory) {\n      let productsToAppend = []\n      for (let subCategory of cashFundCategory.subCategories) {\n        if (Number(subCategory.addedItemsCount) === 0) {\n          //for future ref :  cashFundCount++;\n          productsToAppend.push({\n            item: {\n              imageUrl: \"\"\n            },\n            registryCategories: [{\n              id: subCategory.id,\n              category: {\n                ...subCategory\n              }\n            }]\n          })\n        }\n      }\n      addedProducts = [...addedProducts, ...productsToAppend]\n    }\n\n    let allProducts = []\n    let productCount = 0;\n    let productIds = [];\n    let categories = []\n    for (let parentCat of stateCategories) {\n      if (!parentCat.isParent) {\n        categories.push({\n          id: parentCat.id,\n          name: parentCat.categoryName,\n          added: parentCat.addedItemsCount,\n          total: parentCat.totalItemsCount,\n          isSubProductTypes: false,\n          parentCategory: {\n            id: parentCat.id,\n            name: parentCat.categoryName\n          },\n          superParentCat: null,\n          categoryType: parentCat.categoryType,\n        })\n      } else {\n        for (let category of parentCat.subCategories) {\n          if (category.subProductTypes.length) {\n            for (let subProduct of category.subProductTypes) {\n              categories.push({\n                id: subProduct.id,\n                name: subProduct.categoryName,\n                added: subProduct.addedItemsCount,\n                total: subProduct.totalItemsCount,\n                isSubProductTypes: true,\n                parentCategory: {\n                  id: category.id,\n                  name: category.categoryName,\n                },\n                superParentCat: {\n                  id: parentCat.id,\n                  name: parentCat.categoryName\n                },\n                categoryType: category.categoryType,\n              })\n            }\n          } else {\n            categories.push({\n              id: category.id,\n              name: category.categoryName,\n              added: category.addedItemsCount,\n              total: category.totalItemsCount,\n              isSubProductTypes: false,\n              parentCategory: {\n                id: parentCat.id,\n                name: parentCat.categoryName\n              },\n              superParentCat: null,\n              categoryType: category.categoryType,\n            })\n          }\n        }\n      }\n    }\n\n\n    for (let category of categories) {\n      let products = []\n      let recommendations = []\n\n      // Getting filtered Products and recommendations\n      if (stateFilterApplied.parentFilter) {\n        if (stateFilterApplied.parentFilter === \"giftsAdded\") {\n          if (stateFilterApplied.childFilter.length > 0) {\n            const childFilterArray = stateFilterApplied.childFilter\n\n            for (let product of addedProducts) {\n              let categoryFound = false\n              for (let cat of product.registryCategories) {\n                if (cat.id === category.id) {\n                  categoryFound = true\n                  break\n                }\n              }\n              if (\n                ((childFilterArray.includes(\"mustHave\") && product.mostWanted) ||\n                  (childFilterArray.includes(\"purchased\") && product.isPurchased) ||\n                  // TODO: change category\n                  (childFilterArray.includes(\"reserved\") && product.isReserved)) && categoryFound\n              ) {\n                products.push(product)\n                // filteredProductsId.push(product.id)\n              }\n            }\n          } else {\n            // TODO: change category\n            products.push(...addedProducts.filter(el => {\n              let categoryFound = false\n              for (let cat of el.registryCategories) {\n                if (cat.id === category.id) {\n                  categoryFound = true\n                  break\n                }\n              }\n              return categoryFound;\n            }))\n          }\n        } else if (stateFilterApplied.parentFilter === \"giftsToAdd\") {\n          let addedRecommendations = []\n          recommendations = stateRecommendedProducts.filter(el => {\n            if (el.category.id === category.id && !addedRecommendations.includes(el.id)) {\n              addedRecommendations.push(el.id)\n              return true;\n            }\n            return false;\n          })\n        }\n      } else {\n        // TODO: Change this condition(el.item.category.length)\n        // TODO: change category\n        products.push(...addedProducts.filter(el => {\n          let categoryFound = false\n          for (let cat of el.registryCategories) {\n            if (cat.id === category.id) {\n              categoryFound = true\n              break\n            }\n          }\n          return categoryFound && el.registryCategories.length\n        }))\n        let addedRecommendations = []\n        recommendations = stateRecommendedProducts.filter(el => {\n          if (el.category.id === category.id && !addedRecommendations.includes(el.id)) {\n            addedRecommendations.push(el.id)\n            return true;\n          }\n          return false;\n        })\n      }\n\n      if (products.length > 0) {\n        for (let item of products) {\n          if (!productIds.includes(item.id) && item.id !== undefined) {\n            productIds.push(item.id)\n          }\n        }\n      }\n\n      // for future ref : productCount += products.length;\n      allProducts.push({\n        category: category,\n        products: products,\n        recommendations: (category.added < category.total || category.total === 0) ? recommendations : []\n      })\n    }\n\n    // Grouping products based on parent category\n    let groupedProducts = []\n    for (const product of allProducts) {\n      let foundCategory = false;\n      groupedProducts = groupedProducts.map(el => {\n\n        if(product.category.superParentCat) {\n          if (el.id === product.category.superParentCat.id) {\n            foundCategory = true;\n            el.allProducts.push(product);\n          }\n        }\n        else if (el.id === product.category.parentCategory.id) {\n          foundCategory = true;\n          el.allProducts.push(product);\n        }\n        return el;\n      })\n\n      if (!foundCategory) {\n        groupedProducts.push({\n          ...product.category.parentCategory,\n          allProducts: [product]\n        })\n      }\n    }\n\n    // Adding total products and recommendations\n    groupedProducts = groupedProducts.map(el => {\n      let productCount = 0;\n      let recommendationCount = 0;\n\n      for (let product of el.allProducts) {\n        productCount += product.products.length;\n        recommendationCount += product.recommendations.length;\n      }\n\n      el['totalProducts'] = productCount;\n      el['totalRecommendations'] = recommendationCount;\n      return el;\n    })\n\n    // Removing items that does not have products or recommendations based on filters\n    if (stateFilterApplied.parentFilter) {\n      if (stateFilterApplied.parentFilter === \"giftsAdded\") {\n        groupedProducts = groupedProducts.filter(product => product.totalProducts > 0)\n      } else if (stateFilterApplied.parentFilter === \"giftsToAdd\") {\n        groupedProducts = groupedProducts.filter(product => product.totalRecommendations > 0)\n      }\n    } else {\n      groupedProducts = groupedProducts.filter(product => (product.totalProducts > 0 || product.totalRecommendations > 0))\n    }\n\n    // for future ref :\n    // if (!stateFilterApplied.parentFilter) {\n    //   productCount -= cashFundCount\n    // }\n\n    productCount = productIds.length;\n    return { groupedProducts, productCount };\n  }\n\n  getChecklistPercentage = (checklistItems) => {\n    let totalItems = 0;\n    let addedItems = 0;\n    for (let category of checklistItems) {\n      totalItems += category.totalItemsCount;\n      addedItems += category.addedItemsCount;\n    }\n\n    return (addedItems / totalItems) * 100;\n  }\n\n  handleToggleEvent = () => {\n    const checkListIconEl = this.checkListRef.current;\n    // checkListIconEl.classList.toggle(\"closed\");\n    checkListIconEl.classList.toggle(\"opened\");\n  }\n\n  render() {\n    if (this.props.stateRecommendedProducts.length === 0 && this.props.stateCheckList.length > 0) {\n      this.setAllRecommendation(this.props.stateCheckList);\n    }\n    this.updateFilterList(this.props.stateAddedProducts)\n    let { groupedProducts, productCount } = this.getSortedProducts(this.props.stateAddedProducts, this.props.stateCheckList, this.props.stateRecommendedProducts, this.props.stateFilterApplied)\n\n    return (\n      <>\n        <div className=\"container\">\n          <div className=\"row mt-3 mt-md-6\">\n            {/* View CheckList */}\n            <div className=\"col-sm-12 col-md-3 px-0 px-md-2 checklist-container\" ref={this.checkListRef}>\n              <div className=\"d-flex align-items justify-content-between px-4 w-100 checklist-header\" >\n                <CheckList percentage={this.getChecklistPercentage(this.props.stateCheckList)} />\n                <span  className=\"checklist-container-icon-arrow mr-2\" onClick={this.handleToggleEvent}></span>\n              </div>\n              <div className=\"divider-div d-inline-block d-md-none my-2\"/>\n              <div className=\"checklist-items-continer px-4\">\n                {this.props.stateCheckList.map(item => <CheckListItems key={item.categoryName} item={item}\n                  dispatch={this.props.dispatch} />)}\n              </div>\n            </div>\n            <div className=\"col-12 col-sm-9 mb-11 px-3 px-sm-3 px-md-0\">\n\n              {/* Top Filter Section */}\n              <FilterSection productCount={productCount} />\n              <div className=\"mt-5 px-2 px-md-0\">\n                {groupedProducts.map(el => {\n                  let hasCashFund = false;\n                  return (<>\n                    <h4 className=\"text-uppercase my-4\">{el.name}</h4>\n                    {el.allProducts.map((product, i) => (\n                      <div id={product.category.parentCategory.name + '(' + product.category.name + ')'}>\n                        {product.products.map((card, index) => {\n                          if (Number(card.registryCategories[0].category.categoryType.id) === 2) {\n                            hasCashFund = true\n                          }\n                          if (Number(card.registryCategories[0].category.categoryType.id) === 2 && Number(card.registryCategories[0].category.addedItemsCount) === 0) {\n                            return (\n                              <CashFundCard\n                                data={card}\n                                key={\"cashFund\" + index}\n                                className=\"mt-2\"\n                                addButtonClickHandler={() => this.setCashFundCategoryAndOpenModal(card)}\n                              />\n                            )\n                          } else {\n                            return (\n                              <AddedCard\n                                data={card} key={\"addedCard\" + index}\n                                multipleCategories={card.registryCategories.length > 1 ? card.registryCategories.find((cat, index) => Number(cat.id) === Number(product.category.id) && index != 0) : null}\n                                toggleMustHave={(ev) => this.toggleMustHaveProduct(ev, card)}\n                                removeProductFromCartHandler={() => removeProductFromCartHandler(card, this.props.stateRegistryInfo.id, this.props.dispatch)}\n                              />\n                            )\n                          }\n                        })}\n                        {product.recommendations.length > 0 ?\n                          <ViewRecommend\n                            // title={product.recommendations[0].category.categoryName}\n                            title={product.category.isSubProductTypes ? product.category.parentCategory.name + ' (' + product.category.name + ')' : product.recommendations[0].category.categoryName}\n                            category={product.recommendations[0].category}\n                            products={product.recommendations} />\n                          : null}\n                      </div>\n                    ))}\n                    {hasCashFund ?\n                      <div className=\"my-2\">\n                        <Button\n                          variant=\"secondary\"\n                          className=\" w-100 py-1 text-body font-medium\"\n                          onClick={this.openCashFundModal}\n                        >Add my own</Button>\n                      </div>\n                      : null}\n                  </>\n                  )\n                })}\n              </div>\n            </div>\n          </div>\n        </div>\n        {this.state.showCashFundModal ?\n          <AddCashFundModal\n            show={this.state.showCashFundModal}\n            closeModal={this.closeCashFundModal}\n            categoryData={this.state.cashFundProduct}\n          />\n          : null}\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    stateProducts: state.myRegistry.products,\n    stateAddedProducts: state.myRegistry.addedProducts,\n    stateFilterApplied: state.myRegistry.filterApplied,\n    stateActiveRecommandation: state.myRegistry.activeRecommandation,\n    stateRecommendedProducts: state.myRegistry.recommendedProducts,\n    stateCheckList: state.myRegistry.checkList,\n    stateRegistryInfo: state.registry.info\n  }\n}\n\n\nexport default connect(\n  mapStateToProps\n)(Everything);\n","import React from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\nimport route from \"utils/routes\";\nimport Everything from \"../Everything/Everything\";\n\nclass MainContent extends React.Component {\n    render() {\n        return (\n            <Switch>\n                <Route exact path={route.MY_REGISTRY.HOME} component={Everything} />\n            </Switch>\n        )\n    }\n}\n\nexport default MainContent;","import React from \"react\";\nimport MainContent from './containers/MainContent/MainContent';\n\n\nconst MyRegistry = (props) => {\n    return (\n        <>\n            <MainContent />\n        </>\n    )\n}\n\nexport default MyRegistry;\n","import React, {useState, useEffect, useRef, useCallback} from \"react\";\nimport ReactCrop from 'react-image-crop';\nimport 'react-image-crop/lib/ReactCrop.scss';\n\nconst CropImage = (props) => {\n\n  // DEFAULT CONSTANTS\n  const ASPECT_RATIO = {\n    width: 16,\n    height: 5\n  }\n  const CROPPED_IMAGE_FORMAT = \"image/jpeg\";\n  const COVER_IMAGE_NAME = \"cover.jpeg\";\n\n  // VARIABLE INITIALIZATION\n  const imgRef = useRef(null);\n  const [crop, setCrop] = useState({\n    aspect: ASPECT_RATIO.width / ASPECT_RATIO.height\n  });\n  const [completedCrop, setCompletedCrop] = useState(null);\n\n  // SET IMGREF TO LOADED IMAGE\n  const onLoad = useCallback((img) => {\n    imgRef.current = img;\n  }, []);\n\n  // RETURN BLOB OF CROPPED IMAGE\n  const getCroppedImg = (image, crop, fileName) => {\n    const canvas = document.createElement('canvas');\n    const scaleX = image.naturalWidth / image.width;\n    const scaleY = image.naturalHeight / image.height;\n    canvas.width = crop.width;\n    canvas.height = crop.height;\n    const ctx = canvas.getContext('2d');\n\n    ctx.drawImage(\n      image,\n      crop.x * scaleX,\n      crop.y * scaleY,\n      crop.width * scaleX,\n      crop.height * scaleY,\n      0,\n      0,\n      crop.width,\n      crop.height,\n    );\n\n    return new Promise((resolve, reject) => {\n      canvas.toBlob(blob => {\n        if (blob) {\n          blob.name = fileName;\n          resolve(blob);\n        } else {\n          reject(\"Blob is null\");\n        }\n      }, CROPPED_IMAGE_FORMAT, 1);\n    });\n  }\n\n  // SET CROPPED IMAGE TO PARENT STATE\n  useEffect(() => {\n    if (!completedCrop || !imgRef.current) {\n      return;\n    }\n    let croppedImage = getCroppedImg(imgRef.current, completedCrop, COVER_IMAGE_NAME)\n    croppedImage.then(blob => {\n      props.setCroppedImage(blob);\n    }).catch(_ => {})\n  }, [completedCrop]);\n\n  return (\n    <>\n      <ReactCrop\n        src={props.src}\n        crop={crop}\n        crossorigin=\"anonymous\"\n        onImageLoaded={onLoad}\n        onChange={newCrop => setCrop(newCrop)}\n        onComplete={(c) => setCompletedCrop(c)}\n      />\n    </>\n  );\n}\n\nexport default CropImage;","import React from \"react\";\nimport \"./UploadImageCard.scss\";\n\nconst UploadImageCard = (props) => {\n  return (\n    <div className=\"upload-image-card d-flex align-items-center px-5 py-3\" onClick={props.onClick}>\n      <div className=\"export-image-icon mr-5\"><i className=\"icon-export\" /></div>\n      <div>\n        <h4>Upload Image</h4>\n        <p className=\"text-sm\">Upload your own image, recommended size 1600px x 250px</p>\n      </div>\n    </div>\n  );\n}\n\nexport default UploadImageCard;","import React from \"react\";\nimport \"./DefaultImage.scss\";\n\nconst DefaultImage = (props) => {\n  return (\n    <div className=\"default-image-card\" data-selected={props.selected} onClick={props.onClick}>\n      <img src={props.src} alt=\"Default\"/>\n      {props.selected ? <i className=\"icon-check selected-image p-1\"/> : null}\n    </div>\n  )\n}\n\nexport default DefaultImage;","import React, {useEffect, useState, createRef} from \"react\";\nimport \"./CoverImagePicker.scss\";\nimport Modal from \"../../../commons/components/modal-component/ModalComponent\";\nimport {useSelector, useDispatch} from \"react-redux\";\nimport CropImage from \"./crop-image/CropImage\";\nimport Button from \"../../../commons/components/button-component/ButtonComponent\";\nimport UploadImageCard from \"./upload-image-card/UploadImageCard\";\nimport {graphQL, graphQLMultipart} from \"api/axios\";\nimport {GET_REGISTRY_IMAGES} from \"api/queries\";\nimport {MEDIA_URL_PREFIX} from \"../../../../utils/constants\";\nimport DefaultImage from \"./default-image/DefaultImage\";\nimport {UPDATE_REGISTRY} from \"../../../../api/mutations\";\nimport {updateRegistryDetail} from \"../../../../utils/commonFunction\";\nimport {toast} from \"react-toastify\";\n\nconst CoverImagePicker = (props) => {\n\n  const MAX_IMAGE_SIZE = 5000000; // 5MB\n  const ACCEPTED_IMAGE_TYPE = [\n    'image/jpg',\n    'image/jpeg',\n    'image/png'\n  ]\n  const dispatch = useDispatch();\n  const registryInfo = useSelector(state => state.registry.info);\n  const fileRef = createRef();\n  const [croppedImage, setCroppedImage] = useState(null);\n  const [uploadImage, setUploadImage] = useState(false);\n  const [defaultImage, setDefaultImage] = useState([]);\n  const [customImage, setCustomImage] = useState(null);\n  let modalBody = null;\n  let modalTitle = null;\n  let modalTitleContent = null;\n  let modalFooter = null;\n\n  // Fetching default images\n  const getDefaultCoverImages = () => {\n    const data = {\n      query: GET_REGISTRY_IMAGES,\n      variables: {\n        registryId: registryInfo.id\n      }\n    }\n\n    graphQL(data).then(res => {\n      try {\n        if (res.data.data.registryImages) {\n          // Use below line to get only default images\n          // let defaultImages = res.data.data.registryImages.filter(image => image.isDefault);\n          let defaultImages = res.data.data.registryImages;\n          setDefaultImage(defaultImages.map(image => {\n            image.image = (MEDIA_URL_PREFIX.LOCAL_MEDIA_URL ? MEDIA_URL_PREFIX.LOCAL_MEDIA_URL : \"\") + image.image\n            return image;\n          }));\n        }\n      } catch (e) {\n        console.log(e)\n      }\n    }).catch(err => {\n      console.error(err);\n    })\n  }\n\n  useEffect(() => {\n    if (defaultImage.length === 0) {\n      getDefaultCoverImages();\n    }\n  });\n\n  // Setting default images selected by user\n  const selectDefaultImage = (imageId) => {\n    if (!registryInfo.id) {\n      console.log(\"No registry found\");\n      return;\n    }\n\n    let data = {\n      query: UPDATE_REGISTRY,\n      operationName: \"updateRegistryDetail\",\n      variables: {\n        \"registryId\": registryInfo.id,\n        \"input\": {\n          image: imageId\n        }\n      }\n    }\n\n    graphQL(data).then(res => {\n      try {\n        if (res.data.data.updateRegistry.registry) {\n          toast.success(\"Successfully changed cover image\");\n          updateRegistryDetail(dispatch);\n          closeModalHandler()\n        } else {\n          console.log(res.data.data.updateRegistry.errors);\n          toast.error(\"Some error occurred\");\n          console.error(\"Some error occurred\");\n        }\n      } catch (e) {\n        toast.error(\"Some error occurred\");\n        console.error(e);\n      }\n    }).catch(err => {\n      toast.error(\"Some error occurred\");\n      console.error(err.message)\n    })\n  }\n\n  const openFileSelector = () => {\n    if (fileRef) {\n      fileRef.current.click();\n    }\n  }\n\n  const fileChangeHandler = (e) => {\n    e.persist();\n    if (fileRef.current && fileRef.current.files.length > 0) {\n      const file = fileRef.current.files[0]\n\n      // Verifying file is image\n      if (ACCEPTED_IMAGE_TYPE.includes(file.type)) {\n        if (file.size <= MAX_IMAGE_SIZE) {\n          let reader = new FileReader();\n\n          reader.onload = function (e) {\n            setCustomImage(e.target.result);\n            setUploadImage(true);\n          }\n\n          reader.readAsDataURL(file); // Converting to base64 string\n        } else {\n          toast.error(\"File size exceeds the limit\");\n        }\n      } else {\n        toast.error(\"Please select valid image.\");\n      }\n    }\n  }\n\n  const blobToFile = (blob) => {\n    return new File([blob], blob.name, {\n      type: blob.type\n    })\n  }\n\n  // Setting Custom Image\n  const saveCustomImage = () => {\n    if (!croppedImage) {\n      toast.error(\"Please crop the image\");\n      return;\n    }\n\n    if (!registryInfo.id) {\n      console.log(\"No registry found\");\n      return;\n    }\n\n    let formData = new FormData()\n    let data = {\n      query: UPDATE_REGISTRY,\n      operationName: \"updateRegistryDetail\",\n      variables: {\n        \"registryId\": registryInfo.id,\n        \"input\": {\n          registryImage: null\n        }\n      }\n    }\n\n    formData.append(\"operations\", JSON.stringify(data))\n    let map = {\n      registryImage: [\"variables.input.registryImage\"]\n    }\n    formData.append(\"map\", JSON.stringify(map))\n    formData.append(\"registryImage\", blobToFile(croppedImage))\n\n    graphQLMultipart(formData).then(res => {\n      try {\n        if (res.data.data.updateRegistry.registry) {\n          toast.success(\"Successfully changed cover image\");\n          updateRegistryDetail(dispatch);\n          closeModalHandler()\n          setUploadImage(false);\n        } else {\n          toast.error(\"Some error occurred\");\n          console.log(res.data.data.updateRegistry.errors);\n          console.error(\"Some error occurred\");\n        }\n      } catch (e) {\n        toast.error(\"Some error occurred\");\n        console.error(e);\n      }\n    }).catch(err => {\n      toast.error(\"Some error occurred\");\n      console.error(err.message)\n    })\n\n  }\n\n  const closeCropImageModalHandler = () => {\n    props.closeCoverImagePicker();\n    setUploadImage(false);\n  }\n\n  //modal close method\n  const closeModalHandler = () => {\n    getDefaultCoverImages();\n    props.closeCoverImagePicker();\n    setCroppedImage(null)\n    setCustomImage(null)\n    setUploadImage(false);\n  }\n  if (uploadImage === false) {\n    modalBody = (\n      <div className=\"row cover-image-picker\">\n        <div className=\"col\">\n          <div className=\"row\">\n            <div className=\"col\">\n              <UploadImageCard onClick={openFileSelector}/>\n              <input\n                type=\"file\"\n                className=\"d-none\"\n                ref={fileRef}\n                accept={ACCEPTED_IMAGE_TYPE.join(\",\")}\n                onChange={(e) => fileChangeHandler(e)}/>\n            </div>\n          </div>\n          <div className=\"row\">\n            {defaultImage.map(image => (\n              <div className=\"col-sm-12 col-md-6 mt-5\" key={\"Image-Id-\" + image.id}>\n                <DefaultImage\n                  src={image.image}\n                  selected={image.id === registryInfo.image.id}\n                  onClick={() => selectDefaultImage(image.id)}\n                />\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    )\n    modalTitle = \"Upload or Select an image\";\n  } else {\n    modalBody = (\n      <CropImage\n        src={customImage}\n        setCroppedImage={setCroppedImage}\n      />\n    )\n    modalTitle = \"Crop Image\";\n    modalTitleContent = (\n      <p className=\"text-sm mt-1\">Drag the box to crop the image</p>\n    )\n    modalFooter = (\n      <>\n        <Button variant='secondary' className=\"px-3 py-1 font-medium\"\n                onClick={closeCropImageModalHandler}>Cancel</Button>\n        <Button variant='primary' className=\"px-3 py-1 font-medium\" onClick={saveCustomImage}>Save & Close</Button>\n      </>\n    )\n  }\n\n  return (\n    <>\n      <Modal\n        show={props.show}\n        closeModal={closeModalHandler}\n        updateModal={uploadImage}\n        title={modalTitle}\n        titleContent={modalTitleContent}\n        footer={modalFooter}\n        size=\"lg\"\n      >\n        {modalBody}\n      </Modal>\n    </>\n  )\n}\n\nexport default CoverImagePicker;","import React, { useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport Modal from \"../../../commons/components/modal-component/ModalComponent\";\nimport \"./EditViewRegistryDetail.scss\";\nimport Button from \"../../../commons/components/button-component/ButtonComponent\";\nimport { UPDATE_REGISTRY } from \"../../../../api/mutations\";\nimport { graphQL } from \"../../../../api/axios\";\nimport { updateRegistryDetail } from \"utils/commonFunction\";\nimport { toast } from 'react-toastify';\n\nconst EditViewRegistryDetail = (props) => {\n\n  const MAX_LENGTH_GREETINGS = 280;\n\n  const dispatch = useDispatch();\n  const [registryName, changeRegistryName] = useState(props.info.displayName)\n  const [greeting, changeGreeting] = useState(props.info.greeting)\n\n  const greetingChangeHandler = (ev) => {\n    if (ev.target.value.length <= MAX_LENGTH_GREETINGS) {\n      changeGreeting(ev.target.value);\n    }\n  }\n\n  // SAVE & CLOSE BUTTON CLICK HANDLER\n  const saveRegistryDetail = () => {\n\n    if (registryName.length <= 0) {\n      toast.error(\"Registry Name cannot be empty\");\n      return;\n    }\n\n    let data = {\n      query: UPDATE_REGISTRY,\n      operationName: \"updateRegistryDetail\",\n      variables: {\n        \"registryId\": Number(props.info.id),\n        \"input\": {\n          displayName: registryName,\n          name: props.info.name,\n          greeting: greeting,\n          dueDate: props.info.dueDate,\n          image: props.info.image ? props.info.image.id : null\n        }\n      }\n    }\n\n    graphQL(data).then(res => {\n      try {\n        if (res.data.data.updateRegistry.registry) {\n          toast.success(\"Successfully updated registry information\");\n          updateRegistryDetail(dispatch);\n          props.closeEditRegistryDetail();\n        } else {\n          console.log(res.data.data.updateRegistry.errors);\n          toast.error(\"Some error occurred\");\n        }\n      } catch (e) {\n        console.error(e);\n        toast.error(\"Some error occurred\");\n      }\n    }).catch(err => {\n      console.error(err.message)\n    })\n  }\n\n  let modalTitle = \"Edit Registry Details\";\n  let modalBody = (\n    <>\n      <div className=\"row\">\n        <div className=\"col edit-view-detail\">\n          <span className=\"text-sm font-medium edit-view-detail-required\">Registry Name</span>\n          <textarea\n            className=\"w-100 mt-1 h1 p-2 resize-none\"\n            value={registryName}\n            onChange={(ev) => changeRegistryName(ev.target.value)}\n            rows=\"2\" />\n        </div>\n      </div>\n      <div className=\"row mt-3\">\n        <div className=\"col edit-view-detail\">\n          <span className=\"text-sm font-medium\">Add Greeting</span>\n          <span className=\"float-right text-sm edit-view-detail-max-char\">Max. {MAX_LENGTH_GREETINGS} chars</span>\n          <textarea\n            className=\"w-100 mt-1 text-body px-2 py-1\"\n            placeholder=\"Write a greeting for your guests\"\n            maxLength={MAX_LENGTH_GREETINGS}\n            value={greeting}\n            onChange={(ev) => greetingChangeHandler(ev)}\n            rows=\"2\" />\n        </div>\n      </div>\n    </>\n  );\n  let modalFooter = (\n    <>\n      <Button variant=\"secondary\" className=\"py-1 px-3 mr-3 font-medium\"\n        onClick={props.closeEditRegistryDetail}>Cancel</Button>\n      <Button variant=\"primary\" className=\"py-1 px-3 font-medium\" onClick={saveRegistryDetail}>Save & Close</Button>\n    </>\n  );\n\n  return (\n    <Modal\n      show={props.show}\n      closeModal={props.closeEditRegistryDetail}\n      title={modalTitle}\n      footer={modalFooter}\n      size=\"md\"\n    >\n      {modalBody}\n    </Modal>\n  )\n}\n\nexport default EditViewRegistryDetail;","import React, {useState, createRef} from \"react\";\nimport {useDispatch} from \"react-redux\";\nimport \"./ShareRegistry.scss\";\nimport Modal from \"../../../commons/components/modal-component/ModalComponent\";\nimport {UPDATE_REGISTRY, UPDATE_REGISTRY_URL} from \"../../../../api/mutations\";\nimport {graphQL} from \"../../../../api/axios\";\nimport {updateRegistryDetail} from \"../../../../utils/commonFunction\";\nimport {updateRegistryInfo} from \"../../../registry/RegistryActions\";\nimport Button from \"../../../commons/components/button-component/ButtonComponent\";\nimport {toast} from \"react-toastify\";\nimport routes from \"../../../../utils/routes\";\n\nconst ShareRegistry = (props) => {\n\n  const siteHostName = window.location.host + routes.REGISTRY.HOME;\n  // const siteHostName = \"monicaandandy.com\";\n  const dispatch = useDispatch()\n  const [registryInfoUrl, setRegistryInfoUrl] = useState(props.registryInfo.urlSlug);\n  const [registryVisibility, setRegistryVisibility] = useState(props.registryInfo.isPublic)\n  const [registryUrl, setRegistryUrl] = useState(registryInfoUrl)\n  const [registryError, setRegistryError] = useState(\"\")\n  const inputContainerRef = createRef();\n\n  const closeModal = () => {\n    setRegistryUrl(props.registryInfo.urlSlug)\n    props.closeShareRegistry();\n  }\n\n  const changeRegistryVisibility = (value) => {\n    if (value === registryVisibility) {\n      return;\n    }\n\n    if (!props.registryInfo.id) {\n      console.log(\"No registry found!\");\n      return;\n    }\n\n    setRegistryVisibility(value);\n\n    let data = {\n      query: UPDATE_REGISTRY,\n      operationName: \"updateRegistryDetail\",\n      variables: {\n        \"registryId\": props.registryInfo.id,\n        \"input\": {\n          isPublic: value\n        }\n      }\n    }\n\n    graphQL(data).then(res => {\n      try {\n        if (res.data.data.updateRegistry.registry) {\n          let newRegistry = props.registryInfo\n          newRegistry.isPublic = value\n          dispatch(updateRegistryInfo(newRegistry))\n        } else {\n          console.log(res.data.data.updateRegistry.errors);\n          setRegistryVisibility(!value);\n          toast.error(\"Some error occurred\");\n        }\n      } catch (e) {\n        setRegistryVisibility(!value);\n        toast.error(\"Some error occurred\");\n        console.error(e);\n      }\n    }).catch(err => {\n      setRegistryVisibility(!value);\n      toast.error(\"Some error occurred\");\n      console.error(err.message)\n    })\n  }\n\n  const registryUrlChangeHandler = (ev) => {\n    if (registryError) {\n      setRegistryError(\"\")\n    }\n    setRegistryUrl(ev.target.value);\n  }\n\n  const checkUrlAvailability = () => {\n    if (registryUrl === props.registryInfo.urlSlug) {\n      return\n    }\n\n    if (registryUrl.length <= 0) {\n      toast.error(\"Registry URL cannot be empty!\");\n      return;\n    }\n\n    let data = {\n      query: UPDATE_REGISTRY_URL,\n      operationName: \"updateRegistryUrl\",\n      variables: {\n        \"registryId\": props.registryInfo.id,\n        \"urlSlug\": registryUrl\n      }\n    }\n\n    graphQL(data).then(res => {\n      try {\n        if (res.data.data.checkUpdateRegistryUrlSlug.message) {\n          let newRegistry = props.registryInfo\n          newRegistry.urlSlug = registryUrl\n          setRegistryInfoUrl(registryUrl);\n          setRegistryError(\"\")\n          dispatch(updateRegistryInfo(newRegistry))\n        } else {\n          setRegistryError(`${registryUrl} is not available. Please try something else.`)\n          console.log(res.data.data.checkUpdateRegistryUrlSlug.errors);\n          toast.error(\"Some error occurred\");\n        }\n      } catch (e) {\n        toast.error(\"Some error occurred\");\n        console.error(e);\n      }\n    }).catch(err => {\n      if (err.response.status === 400) {\n        setRegistryError(`${registryUrl} is not available. Please try something else.`)\n      } else {\n        toast.error(\"Some error occurred\");\n      }\n      console.error(err.response.data)\n    })\n  }\n\n  const copyRegistryClickHandler = () => {\n    const el = document.createElement('textarea');\n    el.value = `${siteHostName}/${registryUrl}`;\n    document.body.appendChild(el);\n    el.select();\n    document.execCommand('copy');\n    document.body.removeChild(el);\n    toast.success(\"Copied to clipboard\");\n  }\n\n  const modalTitle = \"Share Registry\";\n  const modalBody = (\n    <>\n      <div className=\"row\">\n        <div className=\"col d-flex flex-column\">\n          <span className=\"section-title-share-registry text-body font-medium\">Status</span>\n          <div className=\"visibility-status-btn mt-1\">\n            <button className={[\"text-sm p-2 mr-1\", registryVisibility ? \"active\" : \"\"].join(\" \")}\n                    onClick={() => changeRegistryVisibility(true)}>Visible\n            </button>\n            <button className={[\"text-sm p-2\", !registryVisibility ? \"active\" : \"\"].join(\" \")}\n                    onClick={() => changeRegistryVisibility(false)}>Secret\n            </button>\n          </div>\n          <p\n            className=\"text-sm mt-1\">{registryVisibility ? \"Guests can access this registry\" : \"Guests cant access this registry unless you set to visible.\"}</p>\n        </div>\n      </div>\n\n      <div className=\"row mt-6 align-items-end\">\n        <div className=\"col d-flex flex-column\">\n          <span className=\"section-title-share-registry text-sm font-medium\">Link</span>\n          <div className=\"mt-1 d-flex align-items-baseline\">\n            <div className=\"d-inline-block w-100\">\n              <div\n                className={[\"registry-url-section d-flex text-body\", registryError ? \"error-input-container\" : \"\"].join(\" \")}\n                ref={inputContainerRef}>\n                <input\n                  className=\"disabled-input-share-registry py-1 px-2\"\n                  value={siteHostName + \"/\"}\n                  readOnly/>\n                <input\n                  className=\"registry-url-input py-1 px-2 w-100\"\n                  value={registryUrl}\n                  onFocus={() => inputContainerRef.current.classList.add('focused-input-container')}\n                  onBlur={() => inputContainerRef.current.classList.remove('focused-input-container')}\n                  onChange={(ev) => registryUrlChangeHandler(ev)}\n                />\n              </div>\n              {registryError ?\n                <span className=\"text-sm input-error-message\">{registryError}</span>\n                : null}\n            </div>\n            {registryUrl !== registryInfoUrl ?\n              <Button variant=\"primary\" className=\"px-2 py-1 text-body font-medium ml-3\"\n                      onClick={checkUrlAvailability}>Check</Button>\n              :\n              <Button variant=\"primary\" className=\"px-2 py-1 text-body font-medium ml-3\"\n                      onClick={copyRegistryClickHandler}>Copy</Button>\n            }\n\n          </div>\n        </div>\n      </div>\n\n      <div className=\"row mt-10\">\n        <div className=\"col\">\n          <span className=\"text-sm font-medium section-title-share-registry\">Share on Social Media</span>\n          <div className=\"mt-2 d-flex\">\n            {registryVisibility ?\n              <>\n                {/*TODO: Add click handler*/}\n                <img className=\"mr-3 social-btn\"\n                     src=\"https://rawcdn.githack.com/HetPatel-Aubergine/testCDNRepo/6a0d2589fd206a08f206e4470985a18782213334/icons/facebook.svg\"/>\n                <img className=\"mr-3 social-btn\"\n                     src=\"https://rawcdn.githack.com/HetPatel-Aubergine/testCDNRepo/6a0d2589fd206a08f206e4470985a18782213334/icons/instagram .svg\"/>\n                <img className=\"social-btn\"\n                     src=\"https://rawcdn.githack.com/HetPatel-Aubergine/testCDNRepo/6a0d2589fd206a08f206e4470985a18782213334/icons/twitter.svg\"/>\n              </>\n              :\n              <>\n                <img className=\"mr-3 social-btn\"\n                     src=\"https://rawcdn.githack.com/HetPatel-Aubergine/testCDNRepo/6a0d2589fd206a08f206e4470985a18782213334/icons/facebook_disabled.svg\"/>\n                <img className=\"mr-3 social-btn\"\n                     src=\"https://rawcdn.githack.com/HetPatel-Aubergine/testCDNRepo/6a0d2589fd206a08f206e4470985a18782213334/icons/instagram _disabled.svg\"/>\n                <img className=\"social-btn\"\n                     src=\"https://rawcdn.githack.com/HetPatel-Aubergine/testCDNRepo/6a0d2589fd206a08f206e4470985a18782213334/icons/twitter_disabled.svg\"/>\n              </>\n            }\n          </div>\n        </div>\n      </div>\n    </>\n  );\n\n  return (\n    <Modal\n      show={props.show}\n      closeModal={closeModal}\n      title={modalTitle}\n      size=\"md\"\n    >\n      {modalBody}\n    </Modal>\n  )\n}\n\nexport default ShareRegistry;","import React from \"react\";\nimport \"./ViewRegistryHeader.scss\";\nimport Button from \"../../../commons/components/button-component/ButtonComponent\";\nimport MoreOption from \"../../../commons/components/more-option/MoreOption\";\nimport CoverImagePicker from \"../../components/cover-image-picker/CoverImagePicker\";\nimport { connect } from \"react-redux\";\nimport { toast } from 'react-toastify';\nimport EditViewRegistryDetail from \"../../components/edit-view-registry-detail/EditViewRegistryDetail\";\nimport { setguestViewRegistry } from \"modules/view-registry/ViewRegistryActions\";\nimport ShareRegistry from \"../../components/share-registry/ShareRegistry\";\nimport { updateGuestViewRegistry } from 'utils/commonFunction';\nimport {withRouter} from \"react-router\";\n\nclass ViewRegistryHeader extends React.Component {\n\n  state = {\n    showCoverImagePicker: false,\n    showEditRegistryDetail: false,\n    showShareRegistry: false\n  }\n\n  componentDidMount() {\n    let queryParams = new URLSearchParams(window.location.search)\n    if (queryParams.has('share')){\n      this.setState({\n        showShareRegistry: true\n      })\n      queryParams.delete('share')\n      this.props.history.replace({\n        search: queryParams.toString(),\n      })\n    }\n    if (!this.props.guestViewRegistryState.urlSlug) {\n      updateGuestViewRegistry(this.props.stateRegistryInfo.urlSlug, this.props.dispatch)\n    }\n  }\n\n  closeCoverImagePicker = () => {\n    this.setState({ showCoverImagePicker: false })\n  }\n\n  closeShareRegistry = () => {\n    this.setState({ showShareRegistry: false })\n  }\n\n  closeEditRegistryDetail = () => {\n    this.setState({ showEditRegistryDetail: false })\n  }\n\n  changeRegistryDetail = (ev) => {\n    ev.preventDefault();\n    this.setState({ showEditRegistryDetail: true })\n  }\n\n  handleGuestView = () => {\n    toast.success(\"Viewing registry as guest\")\n    this.props.dispatch(setguestViewRegistry(true))\n  }\n\n  handleDisableViewGuest = () => {\n    this.props.dispatch(setguestViewRegistry(false))\n  }\n\n  COVER_PIC_OPTIONS = [\n    {\n      name: \"Replace Background\",\n      action: () => {\n        this.setState({ showCoverImagePicker: true })\n      }\n    }\n  ]\n\n\n  render() {\n    // const style = {\n    //   backgroundImage: 'url(' + this.props.stateRegistryInfo.image.image + ')'\n    // }\n    return (\n      <>\n        {this.props.stateGuestViewRegistry ?\n          <div className=\"view-guest-header text-body py-2\">\n            <div className=\"container d-flex flex-wrap justify-content-between\" onClick={this.handleDisableViewGuest}>\n              <div className=\"d-flex align-items-center view-guest-link order-1 order-md-1 mb-2 mb-md-0\">\n                <i className=\"icon-chevron-left view-guest-text mr-2\" />\n                <a className=\"view-guest-text\" tabindex=\"0\">Back To View Registry</a>\n              </div>\n              <div className=\"view-guest-text order-3 order-md-2 ml-4 ml-md-0\">This is how your guests will see your registry</div>\n              <a className=\"view-guest-text view-guest-link order-2 order-md-3 mb-2 mb-md-0\">Share</a>\n            </div>\n          </div> : null\n        }\n        <div className=\"view-registry-header\" style={{ backgroundImage: 'url(' + this.props.stateRegistryInfo.image.image + ')' }}>\n\n          {/*TODO: Change icon-preview to icon-camera when updated*/}\n          {!this.props.stateGuestViewRegistry ?\n            <div className=\"cover-pic-update-options\">\n              <div className=\"container\">\n                <div className=\"row\">\n                  <div className=\"col d-flex justify-content-end\">\n                    <MoreOption\n                      data={this.COVER_PIC_OPTIONS}\n                      iconClass=\"icon-preview\"\n                      activeOptionClass=\"view-registry-cover-option-active\"\n                      buttonClass=\"update-cover-options p-1\" />\n                  </div>\n                </div>\n              </div>\n            </div> : null\n          }\n\n          <div className=\"header-registry-detail\">\n            <div className=\"container my-4\">\n              <div className=\"row\">\n                <div className=\"col\">\n                  <div className=\"d-flex align-items-center justify-content-between justify-content-md-start\">\n                    <h2>{this.props.stateRegistryInfo.displayName ? this.props.stateRegistryInfo.displayName : \"\"}</h2>\n                    {!this.props.stateGuestViewRegistry ?\n                      <i className=\"icon-pencil ml-1 edit-name-icon\" onClick={(ev) => this.changeRegistryDetail(ev)} />\n                      : null\n                    }\n                  </div>\n                  {this.props.stateRegistryInfo.greeting ?\n                    <span\n                      className=\"text-sm view-registry-header-greeting\">{this.props.stateRegistryInfo.greeting}</span>\n                    :\n                    !this.props.stateGuestViewRegistry ?\n                      <a className=\"add-greeting-link text-sm font-medium\" href=\"#\" tabindex=\"0\"\n                        onClick={(ev) => this.changeRegistryDetail(ev)}>Add a greeting</a> : null\n                  }\n                </div>\n                {!this.props.stateGuestViewRegistry ?\n                  <div className=\"col-12 col-md-3 header-buttons\">\n                    <Button variant=\"secondary\" className=\"font-medium text-body py-1 px-3 mr-3 d-none d-md-inline-block \"\n                      onClick={this.handleGuestView}>View as Guest</Button>\n                    <Button variant=\"primary\" className=\"font-medium text-body py-1 px-3 d-none d-md-inline-block\"\n                      onClick={() => this.setState({showShareRegistry: true})}>Share</Button>\n                    <a className=\"view-and-share-link text-sm font-medium mr-3 d-inline-block d-md-none\" href=\"#\" tabindex=\"0\"\n                      onClick={this.handleGuestView}>View as Guest</a>\n                    <a className=\"view-and-share-link text-sm font-medium d-inline-block d-md-none\" href=\"#\" tabindex=\"0\"\n                      onClick={() => this.setState({showShareRegistry: true})}>Share</a>\n                  </div> : null\n                }\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <CoverImagePicker\n          show={this.state.showCoverImagePicker}\n          closeCoverImagePicker={this.closeCoverImagePicker}\n        />\n\n        {this.state.showEditRegistryDetail ?\n          <EditViewRegistryDetail\n            show={this.state.showEditRegistryDetail}\n            closeEditRegistryDetail={this.closeEditRegistryDetail}\n            info={this.props.stateRegistryInfo}\n          /> : null}\n\n        <ShareRegistry\n          show={this.state.showShareRegistry}\n          closeShareRegistry={this.closeShareRegistry}\n          registryInfo={this.props.stateRegistryInfo}\n        />\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    stateRegistryInfo: state.registry.info,\n    stateGuestViewRegistry: state.viewRegistry.guestViewRegistry,\n    guestViewRegistryState: state.guestView.info,\n  }\n}\n\n\nexport default connect(\n  mapStateToProps\n)(withRouter(ViewRegistryHeader));","import React from 'react';\nimport \"./SortFilter.scss\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport { activeSortFilter } from '../../ViewRegistryActions';\n\nconst SortFilter = () => {\n\n  const dispatch = useDispatch()\n  const activeSortFilterState = useSelector(state => state.viewRegistry.activeSortFilter)\n  const filterContentRef = React.createRef();\n\n  const toggleFilterContent = () => {\n    filterContentRef.current.classList.toggle(\"show\");\n  }\n\n\n  const handleSortSelection = (sortItem) => {\n    dispatch(activeSortFilter(sortItem))\n    filterContentRef.current.classList.toggle(\"show\");\n  }\n\n  const sortByList = [\n    {\n      sortId: 1,\n      sortTitle: 'Featured'\n    },\n    {\n      sortId: 2,\n      sortTitle: 'Price: Low to High'\n    },\n    {\n      sortId: 3,\n      sortTitle: 'Price: High to Low'\n    }\n  ]\n\n  return (\n    <div className=\"sort-section-filter\">\n      <div className=\"sort-filter-btn px-2 d-flex justify-content-between py-1\" onClick={toggleFilterContent}>\n        <span className=\"font-body selected-sort-text text-body\">{activeSortFilterState.sortTitle}</span>\n        <i className=\"icon-filter-1 pl-1 mr-1 icon-chevron-down\" />\n      </div>\n      <div className=\"filter-content\" ref={filterContentRef}>\n        <div className=\"d-flex flex-column\">\n          {sortByList.map(sortItem => {\n            return (\n              <div className=\"filter-item py-2 px-2\" key={\"sortid-\" + sortItem.sortId} onClick={() => handleSortSelection(sortItem)}>\n                <div className=\"text-sm\">{sortItem.sortTitle}</div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default SortFilter;\n","import React, {useEffect, useState} from 'react';\nimport \"./SortFilterMobile.scss\";\nimport {useSelector, useDispatch} from 'react-redux';\nimport {activeSortFilter} from '../../ViewRegistryActions';\nimport Accordion from 'react-bootstrap/Accordion';\nimport Card from 'react-bootstrap/Card';\nimport RadioButton from '../../../commons/components/radio-button/RadioButton';\n\nconst SortFilterMobile = () => {\n\n  const dispatch = useDispatch()\n  const activeSortFilterState = useSelector(state => state.viewRegistry.activeSortFilter)\n  const [currentSort, setCurrentSort] = useState(1)\n  const filterContentMobileRef = React.createRef();\n\n  useEffect(() => {\n    setCurrentSort(activeSortFilterState.sortId);\n  })\n  const toggleFilterContent = () => {\n    const checkListIconEl = filterContentMobileRef.current.firstChild;\n    checkListIconEl.classList.toggle(\"closed\");\n    checkListIconEl.classList.toggle(\"opened\");\n  }\n\n\n  const handleSortSelection = (sortItem) => {\n    if (currentSort !== sortItem.id) {\n      setCurrentSort(sortItem.sortId)\n      dispatch(activeSortFilter(sortItem))\n    }\n  }\n\n  const sortByList = [\n    {\n      sortId: 1,\n      sortTitle: 'Featured'\n    },\n    {\n      sortId: 2,\n      sortTitle: 'Price: Low to High'\n    },\n    {\n      sortId: 3,\n      sortTitle: 'Price: High to Low'\n    }\n  ]\n\n  return (\n    <div className=\"sort-section-mobile-filter w-100\">\n      <Accordion className=\"accordion-list mb-5\">\n        <Card>\n          <Accordion.Toggle\n            onClick={() => toggleFilterContent()}\n            as={Card.Header}\n            id=\"view-sort-filter\"\n            eventKey=\"view-sort-filter\"\n          >\n            <div ref={filterContentMobileRef} className='d-flex icon-checklist'>\n              <span className=\"checklist-icon-arrow\" />\n              <div className=\"ml-3 mt-1 w-100\">\n                <div className=\"text-body\">Sort By</div>\n              </div>\n            </div>\n          </Accordion.Toggle>\n          <Accordion.Collapse className='ml-6 mt-3' eventKey=\"view-sort-filter\">\n            <Card.Body className=\"text-sm\">\n              {sortByList.map(sortItem => {\n                return (\n                  <div className=\"mb-1\"> <RadioButton\n                    centerText=\"true\"\n                    textClass=\"text-body\"\n                    name=\"viewSortFilter\"\n                    key={sortItem.sortId}\n                    checked={sortItem.sortId === currentSort ? true : null}\n                    changeHandler={() => handleSortSelection(sortItem)} >\n                    {sortItem.sortTitle}\n                  </RadioButton>\n                  </div>\n                );\n              })}\n            </Card.Body>\n          </Accordion.Collapse>\n        </Card>\n      </Accordion>\n    </div>\n  )\n}\n\nexport default SortFilterMobile;\n","import React, {useState, useEffect} from 'react'\nimport \"./ViewFilterMobile.scss\";\nimport {useSelector, useDispatch} from 'react-redux';\nimport {setChildViewFilter, clearViewFilter, setViewFilterCategory} from '../../ViewRegistryActions';\nimport {FILTERS} from \"utils/constants\";\nimport Accordion from 'react-bootstrap/Accordion';\nimport Card from 'react-bootstrap/Card';\nimport SortFilterMobile from '../sort-filter/SortFilterMobile';\n\nconst ViewFilterMobile = () => {\n\n\tconst dispatch = useDispatch()\n\tlet tempParentFilterId = useSelector(state => state.viewRegistry.viewFilterApplied.parentFilter)\n\tlet tempChildFilterIds = useSelector(state => state.viewRegistry.viewFilterApplied.childFilter)\n\tlet stateAddedProducts = useSelector(state => state.myRegistry.addedProducts)\n\tconst stateCategoriesInfo = useSelector(state => state.myRegistry.checkList)\n\tconst stateGuestViewRegistry = useSelector(state => state.viewRegistry.guestViewRegistry)\n\tlet stateFilterCategories = useSelector(state => state.viewRegistry.filterCategory)\n\tlet filterCountState = useSelector(state => state.myRegistry.filterCount)\n\tlet [filterCategoryLimit, setFilterCategoryLimit] = useState([])\n\n\n\t// Constant variables for filters\n\tconst AVAILABLE = \"available\"\n\tconst RESERVED = \"reserved\"\n\tconst PURCHASED = \"purchased\"\n\tconst PRICE_1 = \"price-1\"\n\tconst PRICE_2 = \"price-2\"\n\tconst PRICE_3 = \"price-3\"\n\tconst MONICA_AND_ANDY = \"monicaandandy\"\n\tconst ELSEWHERE = \"elsewhere\"\n\n\n\tconst getLimitOfFliter = (parentId) => {\n\t\tlet limit = null\n\t\tconst filterCategory = [...filterCategoryLimit]\n\t\tfor (let category of filterCategory) {\n\t\t\tif (parentId === category.id && category.limit) {\n\t\t\t\tlimit = category.limit\n\t\t\t}\n\t\t}\n\t\treturn limit\n\t}\n\n\t// Updating product count in filter categories\n\tconst updateFilterList = (addedProducts) => {\n\n\t\tlet newFilterList = [\n\t\t\t{\n\t\t\t\tid: \"categories\",\n\t\t\t\tdisplay: FILTERS.CATEGORIES_DISPLAY,\n\t\t\t\tlimit: getLimitOfFliter(\"categories\") ? getLimitOfFliter(\"categories\") : 6,\n\t\t\t\tchild: [...stateCategoriesInfo].filter(category => {\n\t\t\t\t\tif (category.addedItemsCount > 0) {\n\t\t\t\t\t\treturn true\n\t\t\t\t\t}\n\t\t\t\t}).map(category => {\n\t\t\t\t\tlet newCategory = {...category}\n\t\t\t\t\tnewCategory.id = category.category.id\n\t\t\t\t\tnewCategory['display'] = newCategory.categoryName\n\t\t\t\t\tnewCategory['count'] = newCategory.addedItemsCount\n\t\t\t\t\treturn newCategory\n\t\t\t\t})\n\t\t\t\t// count: 0\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"price\",\n\t\t\t\tdisplay: FILTERS.PRICE_DISPLAY,\n\t\t\t\tchild: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: PRICE_1,\n\t\t\t\t\t\tdisplay: FILTERS.PRICE_DISPLAY_1,\n\t\t\t\t\t\tcount: filterCountState.under50\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: PRICE_2,\n\t\t\t\t\t\tdisplay: FILTERS.PRICE_DISPLAY_2,\n\t\t\t\t\t\tcount: filterCountState.between50100\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: PRICE_3,\n\t\t\t\t\t\tdisplay: FILTERS.PRICE_DISPLAY_3,\n\t\t\t\t\t\tcount: filterCountState.moreThan100\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"store\",\n\t\t\t\tdisplay: FILTERS.STORE_DISPLAY,\n\t\t\t\tchild: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: MONICA_AND_ANDY,\n\t\t\t\t\t\tdisplay: FILTERS.MONICA_AND_ANDY_DISPLAY,\n\t\t\t\t\t\tcount: filterCountState.maStoreItems\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: ELSEWHERE,\n\t\t\t\t\t\tdisplay: FILTERS.ELSEWHERE_DISPLAY,\n\t\t\t\t\t\tcount: filterCountState.otherStoreItems\n\t\t\t\t\t},\n\t\t\t\t]\n\t\t\t},\n\n\t\t]\n\t\tif (!stateGuestViewRegistry) {\n\t\t\tconst giftStatus = {\n\t\t\t\tid: \"giftStatus\",\n\t\t\t\tdisplay: \"Gift Status\",\n\t\t\t\tchild: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: AVAILABLE,\n\t\t\t\t\t\tdisplay: FILTERS.AVAILABLE_DISPLAY,\n\t\t\t\t\t\tcount: filterCountState.totalAvailable\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: RESERVED,\n\t\t\t\t\t\tdisplay: FILTERS.RESERVED_DISPLAY,\n\t\t\t\t\t\tcount: filterCountState.totalReserved\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: PURCHASED,\n\t\t\t\t\t\tdisplay: FILTERS.PURCHASED_DISPLAY,\n\t\t\t\t\t\tcount: filterCountState.totalPurchased\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t\tnewFilterList.splice(0, 0, giftStatus)\n\t\t}\n\t\tdispatch(setViewFilterCategory(newFilterList))\n\t\treturn newFilterList\n\t}\n\n\tuseEffect(() => {\n\t\tif (tempChildFilterIds.length === 0) {\n\t\t\tupdateFilterList(stateAddedProducts)\n\t\t}\n\t}, [stateAddedProducts, stateCategoriesInfo, tempChildFilterIds])\n\n\n\t// Change event handlers\n\n\t// TDOD: Add this if needed\n\t// const parentChangeHandler = (parent) => {\n\t//   dispatch(setParentViewFilter(parent.id))\n\t//   if (parent.child) {\n\t//     dispatch(setChildViewFilter(parent.child.map(child => child.id)))\n\t//   } else {\n\t//     dispatch(setChildViewFilter([]))\n\t//   }\n\t// }\n\n\tconst childChangeHandler = (childId, parentId) => {\n\n\t\tif (parentId !== tempParentFilterId) {\n\t\t\tif (tempChildFilterIds.length > 0) {\n\t\t\t\tdispatch(setChildViewFilter([]))\n\t\t\t}\n\t\t}\n\n\t\tconst childIndex = tempChildFilterIds.indexOf(childId)\n\n\t\tif (childIndex === -1) {\n\t\t\tdispatch(setChildViewFilter([...tempChildFilterIds, childId]))\n\t\t} else {\n\t\t\tlet newChildArray = [...tempChildFilterIds]\n\t\t\tnewChildArray.splice(childIndex, 1)\n\t\t\tdispatch(setChildViewFilter(newChildArray))\n\t\t}\n\t}\n\n\tconst changeParentLimitHandler = (parentFilterID) => {\n\t\tlet limitLength = null\n\t\tlet filterCategory = [...stateFilterCategories].map(parentFilter => {\n\t\t\tif (parentFilter.id === parentFilterID) {\n\t\t\t\tparentFilter.limit = parentFilter.child.length\n\t\t\t\tlimitLength = parentFilter.child.length\n\t\t\t}\n\t\t\treturn parentFilter\n\t\t})\n\t\tdispatch(setViewFilterCategory(filterCategory))\n\n\t\tlet isFound = false\n\t\tlet newFilterCateoryLimit = [...filterCategoryLimit].map(categorylimit => {\n\t\t\tif (categorylimit.id === parentFilterID) {\n\t\t\t\tcategorylimit.limit = limitLength\n\t\t\t\tisFound = true\n\t\t\t\treturn categorylimit\n\t\t\t}\n\t\t\treturn categorylimit\n\t\t})\n\n\t\tif (!isFound) {\n\t\t\tnewFilterCateoryLimit.push({'id': parentFilterID, 'limit': limitLength})\n\t\t}\n\t\tsetFilterCategoryLimit(newFilterCateoryLimit)\n\t}\n\n\tconst handleMobileToggleEvent = (ref) => {\n\t\t// if (id) {\n\t\t// \t// console.log(document.getElementById(`${id}`))\n\t\t// }\n\t\t// console.log(id)\n\t\tconst checkListIconEl = ref.current.firstChild;\n\t\tcheckListIconEl.classList.toggle(\"closed\");\n\t\tcheckListIconEl.classList.toggle(\"opened\");\n\t}\n\n\n\treturn (\n\t\t<div className=\"view-mobile-filter\">\n\t\t\t<div className=\"d-flex flex-column\">\n\t\t\t\t<SortFilterMobile />\n\t\t\t\t{[...stateFilterCategories].map(parentFilter => {\n\t\t\t\t\t// console.log(\"*****\",parentFilter.id)\n\t\t\t\t\tlet accordionRef = React.createRef();\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Accordion className=\"accordion-list mb-5\">\n\t\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t\t<Accordion.Toggle\n\t\t\t\t\t\t\t\t\tonClick={()=> handleMobileToggleEvent(accordionRef)}\n\t\t\t\t\t\t\t\t\tas={Card.Header}\n\t\t\t\t\t\t\t\t\tid={parentFilter.id}\n\t\t\t\t\t\t\t\t\teventKey={parentFilter.display}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div ref={accordionRef} className='d-flex icon-checklist'>\n\t\t\t\t\t\t\t\t\t\t<span className=\"checklist-icon-arrow\" />\n\t\t\t\t\t\t\t\t\t\t<div className=\"ml-3 mt-1 w-100\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-body\">{parentFilter.display}</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Accordion.Toggle>\n\t\t\t\t\t\t\t\t<Accordion.Collapse className='ml-6 mt-4' eventKey={parentFilter.display}>\n\t\t\t\t\t\t\t\t\t<Card.Body>\n\t\t\t\t\t\t\t\t\t\t{parentFilter.child ? (\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"d-flex flex-column\" key={\"child-filter-\" + parentFilter.id}>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"fliter-checkbox-section\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{parentFilter.child.map((childFilter, index) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tchildFilter.count > 0 ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tindex < (parentFilter.limit ? parentFilter.limit : parentFilter.child.length) ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"view-fliter-checkbox d-flex align-items-center mb-3\" key={childFilter.id}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"checkbox__input mr-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"checkbox\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname={childFilter.display}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={childFilter.display}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchecked={tempChildFilterIds.includes(childFilter.id) ? \"checked\" : \"\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={() => childChangeHandler(childFilter.id, parentFilter.id)} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"checkbox__control d-flex justify-content-center align-items-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"icon-check\"></i>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p class=\"radio__label text-sm\"><div>{childFilter.display} {childFilter.count > 0 ? <>({childFilter.count})</> : null}</div></p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: null\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{(parentFilter.limit && (parentFilter.limit !== parentFilter.child.length) && (parentFilter.child.length - parentFilter.limit) > 0) ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"filter-clear-all text-sm font-medium ml-4 pb-3\" onClick={() => changeParentLimitHandler(parentFilter.id)}>Show {parentFilter.child.length - parentFilter.limit} more</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t\t\t\t</Card.Body>\n\t\t\t\t\t\t\t\t</Accordion.Collapse>\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t</Accordion>\n\t\t\t\t\t)\n\t\t\t\t})}\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default ViewFilterMobile;\n","import React from 'react';\nimport {connect} from \"react-redux\";\nimport AddGift from \"modules/commons/components/add-gift/AddGift\";\nimport SortFilter from \"../sort-filter/SortFilter\";\nimport './SortFilterSection.scss';\nimport {isGotIt, clearViewFilter, setChildViewFilter} from \"modules/view-registry/ViewRegistryActions\";\nimport {UPDATE_REGISTRY} from \"api/mutations\";\nimport {graphQL} from \"api/axios\";\nimport {updateRegistryDetail} from \"utils/commonFunction\";\nimport FilterItemChip from \"modules/my-registry/components/filter/filter-item-chip/FilterItemChip\";\nimport Button from \"../../../commons/components/button-component/ButtonComponent\";\nimport Modal from \"../../../commons/components/modal-component/ModalComponent\";\nimport ViewFilterMobile from \"../view-filter/ViewFilterMobile\";\n\nclass SortFilterSection extends React.Component {\n  state = {\n    showFilterModal: false,\n    parentFilter: \"\",\n    childFilter: []\n  }\n\n  doneViewFilterModal = () => {\n    this.setState({showFilterModal: false})\n  }\n  \n  clearViewFilterModal = () =>{\n    this.props.dispatch(clearViewFilter())\n    this.doneViewFilterModal()\n  }\n  \n  closeViewFilterModal = () =>{\n    this.props.dispatch(setChildViewFilter([...this.state.childFilter]));\n    this.setState({showFilterModal: false})\n  }\n\n  handleIsGotIt = () => {\n    let data = {\n      query: UPDATE_REGISTRY,\n      operationName: \"updateRegistryDetail\",\n      variables: {\n        \"registryId\": this.props.stateRegistryInfo.id,\n        \"input\": {\n          isFeaturedNoticeRead: true\n        }\n      }\n    }\n    graphQL(data).then(res => {\n      try {\n        if (res.data.data.updateRegistry.registry) {\n          // this.props.dispatch(isGotIt(true))\n          updateRegistryDetail(this.props.dispatch);\n        } else {\n          console.log(res.data.data.updateRegistry.errors);\n          console.error(\"Some error occurred\");\n        }\n      } catch (e) {\n        console.error(e);\n      }\n    }).catch(err => {\n      console.error(err.message)\n    })\n  }\n\n  // Filter chips\n  getFilterChips = (stateFilterApplied) => {\n    let filterChips = {}\n    if (stateFilterApplied) {\n      let allChild = []\n      for (let filterCat of this.props.stateFilterCategory) {\n        for (let childCat of filterCat.child) {\n          allChild.push(childCat)\n        }\n      }\n      if (stateFilterApplied.childFilter) {\n        filterChips.childFilter = [...stateFilterApplied.childFilter].map(item => {\n          let finalAllChild = [...allChild].find(element => {\n            return element.id === item\n          })\n          return finalAllChild\n        })\n      }\n    }\n    return filterChips;\n  }\n\n  // Filter chips close handler\n  deleteChipHandler = async (isParent, childId) => {\n    if (isParent) {\n      await this.props.dispatch(clearViewFilter())\n    } else {\n      const newChildArray = this.props.stateFilterApplied.childFilter.filter(element => {\n        return element !== childId\n      })\n      await this.props.dispatch(setChildViewFilter(newChildArray))\n    }\n    await this.props.setFilterhandler()\n  }\n\n  //Clear filter state\n  clearFilterHandler = async (ev) => {\n    ev.preventDefault()\n    await this.props.dispatch(clearViewFilter())\n    await this.props.setFilterhandler()\n  }\n  \n  \n  //filter previous states\n  viewFilterStateHandler = () =>{\n    this.setState({parentFilter: this.props.stateFilterApplied.parentFilter})\n    this.setState({childFilter: this.props.stateFilterApplied.childFilter});\n    this.setState({showFilterModal: true});\n  }\n\n  //open modal\n  modalFooterButtons = (\n\t\t<>\n\t\t\t<Button\n\t\t\t\tvariant=\"secondary\"\n\t\t\t\tclassName=\"px-3 py-1 font-weight-bold font-medium text-body\"\n\t\t\t\tdisabled={false}\n\t\t\t\tonClick={this.clearViewFilterModal}\n\t\t\t>Clear</Button>\n\t\t\t<Button\n\t\t\t\tvariant=\"primary\"\n\t\t\t\tclassName=\"px-4 py-1 font-weight-bold font-medium text-body\"\n\t\t\t\tdisabled={false}\n\t\t\t\tonClick={this.doneViewFilterModal}\n\t\t\t>Done</Button>\n\t\t</>\n\t)\n\n  render() {\n    let filterChips = this.getFilterChips(this.props.stateFilterApplied)\n\n    return (\n      <>\n        <div className=\"row align-items-center align-items-md-start\">\n          <div className=\"col-3 col-md-7\">\n            <h4 className=\"font-weight-bold mr-2 filter-section-total-items\">{this.props.productCount} {this.props.productCount === 1 ? \"Gift\" : \"Gifts\"}</h4>\n          </div>\n          <div className=\"col-9 col-md-5 filter-sort-section\">\n            <div className=\"d-flex justify-content-end\">\n              <div>\n                <Button className=\"px-1 pt-1 px-md-3 d-inline-block d-md-none mr-1\" variant=\"secondary\" onClick={this.viewFilterStateHandler}>\n                  <i className=\"icon-filter-1 filter-icon\" />\n                </Button>\n              </div>\n              <div className=\"text-sm sort-by-text mr-2 align-self-center d-none d-md-inline-block\">Sort by</div>\n              <div className=\"d-none d-md-inline-block\"><SortFilter /></div>\n              {this.props.stateGuestViewRegistry ?\n                <></> :\n                <div className=\"ml-0 ml-md-4 filter-add-gift-btn\"><AddGift /></div>}\n            </div>\n\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col-7\">\n            <div className=\"filtered-items\">\n              {filterChips.childFilter ?\n                filterChips.childFilter.map(item =>\n                  item ?\n                    <FilterItemChip\n                      text={item.display}\n                      className=\"mr-2\"\n                      key={filterChips.id + \"-\" + item.id}\n                      deleteHandler={() => this.deleteChipHandler(false, item.id)} /> : null )\n                : null}\n              {this.props.stateFilterApplied.childFilter.length > 0 ?\n                <a className=\"font-medium text-sm filter-clear-link\" href=\"#\" tabindex=\"0\"\n                  onClick={(ev) => this.clearFilterHandler(ev)}>Clear\n                all</a>\n                : null}\n            </div>\n          </div>\n        </div>\n        {this.props.stateRegistryInfo.isFeaturedNoticeRead === false && this.props.stateActiveSortFilter.sortId !== 1 && !this.props.stateGuestViewRegistry ?\n          <div className=\"row mt-2 mb-3\">\n            <div className=\"col\">\n              <div className=\"text-sm py-2 d-flex flex-wrap justify-content-center sort-filter-warning\">\n                <div>Enable rearrange gifts by</div>\n                <div className=\"font-weight-bold px-1\">clearing your filters</div>\n                <div>and setting to</div>\n                <div className=\"font-weight-bold px-1\">Sort by: Featured.</div>\n                <div className=\"sort-filter-warning-btn\" onClick={this.handleIsGotIt}>Ok, got it.</div>\n              </div>\n            </div>\n          </div> : <></>\n        }\n\n        <Modal\n          show={this.state.showFilterModal}\n          title={\"Filters\"}\n          closeModal={this.closeViewFilterModal}\n          footer={this.modalFooterButtons}\n          >\n          <ViewFilterMobile />\n        </Modal>\n      </>\n    )\n  }\n}\n\n\nconst mapStateToProps = state => {\n  return {\n    stateViewRegistryProducts: state.viewRegistry.viewRegistryProducts,\n    stateActiveSortFilter: state.viewRegistry.activeSortFilter,\n    stateGuestViewRegistry: state.viewRegistry.guestViewRegistry,\n    stateRegistryInfo: state.registry.info,\n    stateFilterApplied: state.viewRegistry.viewFilterApplied,\n    stateFilterCategory: state.viewRegistry.filterCategory\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(SortFilterSection);\n","import React, { useState, useEffect } from 'react'\nimport \"./ViewFilter.scss\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setChildViewFilter, clearViewFilter, setViewFilterCategory } from '../../ViewRegistryActions';\nimport { FILTERS } from \"utils/constants\"\n\nconst ViewFilter = (props) => {\n\n  const dispatch = useDispatch()\n  let tempParentFilterId = useSelector(state => state.viewRegistry.viewFilterApplied.parentFilter)\n  let tempChildFilterIds = useSelector(state => state.viewRegistry.viewFilterApplied.childFilter)\n  let stateAddedProducts = useSelector(state => state.myRegistry.addedProducts)\n  const stateCategoriesInfo = useSelector(state => state.myRegistry.checkList)\n  const stateGuestViewRegistry = useSelector(state => state.viewRegistry.guestViewRegistry)\n  let stateFilterCategories = useSelector(state => state.viewRegistry.filterCategory)\n  let filterCountState = useSelector(state => state.myRegistry.filterCount)\n  let [filterCategoryLimit, setFilterCategoryLimit] = useState([])\n\n  // Constant variables for filters\n  const AVAILABLE = \"available\"\n  const RESERVED = \"reserved\"\n  const PURCHASED = \"purchased\"\n  const PRICE_1 = \"price-1\"\n  const PRICE_2 = \"price-2\"\n  const PRICE_3 = \"price-3\"\n  const MONICA_AND_ANDY = \"monicaandandy\"\n  const ELSEWHERE = \"elsewhere\"\n\n  const getLimitOfFliter = (parentId) => {\n    let limit = null\n    const filterCategory = [...filterCategoryLimit]\n    for (let category of filterCategory) {\n      if (parentId === category.id && category.limit) {\n        limit = category.limit\n      }\n    }\n    return limit\n  }\n\n  // Updating product count in filter categories\n  const updateFilterList = (addedProducts) => {\n\n    let newFilterList = [\n      {\n        id: \"categories\",\n        display: FILTERS.CATEGORIES_DISPLAY,\n        limit: getLimitOfFliter(\"categories\") ? getLimitOfFliter(\"categories\") : 6,\n        child: [...stateCategoriesInfo].filter(category => {\n          let id = category.category.id\n          let count = filterCountState.categoryData[id]\n          if (count > 0) {\n            return true\n          }\n        }).map(category => {\n          let newCategory = { ...category }\n          let id = category.category.id\n          newCategory.id = category.category.id\n          newCategory['display'] = newCategory.categoryName\n          newCategory['count'] = filterCountState.categoryData[id]\n          return newCategory\n        })\n      },\n      {\n        id: \"price\",\n        display: FILTERS.PRICE_DISPLAY,\n        child: [\n          {\n            id: PRICE_1,\n            display: FILTERS.PRICE_DISPLAY_1,\n            count: filterCountState.registryItemsAnalysisCount.under50\n          },\n          {\n            id: PRICE_2,\n            display: FILTERS.PRICE_DISPLAY_2,\n            count: filterCountState.registryItemsAnalysisCount.between50100\n          },\n          {\n            id: PRICE_3,\n            display: FILTERS.PRICE_DISPLAY_3,\n            count: filterCountState.registryItemsAnalysisCount.moreThan100\n          }\n        ]\n      },\n      {\n        id: \"store\",\n        display: FILTERS.STORE_DISPLAY,\n        child: [\n          {\n            id: MONICA_AND_ANDY,\n            display: FILTERS.MONICA_AND_ANDY_DISPLAY,\n            count: filterCountState.registryItemsAnalysisCount.maStoreItems\n          },\n          {\n            id: ELSEWHERE,\n            display: FILTERS.ELSEWHERE_DISPLAY,\n            count: filterCountState.registryItemsAnalysisCount.otherStoreItems\n          },\n        ]\n      },\n\n    ]\n    if (!stateGuestViewRegistry) {\n      const giftStatus = {\n        id: \"giftStatus\",\n        display: \"Gift Status\",\n        child: [\n          {\n            id: AVAILABLE,\n            display: FILTERS.AVAILABLE_DISPLAY,\n            count: filterCountState.registryItemsAnalysisCount.totalAvailable\n          },\n          {\n            id: RESERVED,\n            display: FILTERS.RESERVED_DISPLAY,\n            count: filterCountState.registryItemsAnalysisCount.totalReserved\n          },\n          {\n            id: PURCHASED,\n            display: FILTERS.PURCHASED_DISPLAY,\n            count: filterCountState.registryItemsAnalysisCount.totalPurchased\n          }\n        ]\n      }\n      newFilterList.splice(0, 0, giftStatus)\n    }\n    dispatch(setViewFilterCategory(newFilterList))\n    return newFilterList\n  }\n\n  useEffect(() => {\n    if (tempChildFilterIds.length === 0) {\n      updateFilterList(stateAddedProducts)\n    }\n  }, [stateAddedProducts, stateCategoriesInfo])\n\n\n  // Change event handlers\n\n  // TDOD: Add this if needed\n  // const parentChangeHandler = (parent) => {\n  //   dispatch(setParentViewFilter(parent.id))\n  //   if (parent.child) {\n  //     dispatch(setChildViewFilter(parent.child.map(child => child.id)))\n  //   } else {\n  //     dispatch(setChildViewFilter([]))\n  //   }\n  // }\n\n  const childChangeHandler = async (childId, parentId) => {\n\n    if (parentId !== tempParentFilterId) {\n      if (tempChildFilterIds.length > 0) {\n        await dispatch(setChildViewFilter([]))\n      }\n    }\n\n    const childIndex = tempChildFilterIds.indexOf(childId)\n    let childFilter = []\n    if (childIndex === -1) {\n      childFilter = [...tempChildFilterIds, childId]\n      await dispatch(setChildViewFilter([...tempChildFilterIds, childId]))\n    } else {\n      let newChildArray = [...tempChildFilterIds]\n      newChildArray.splice(childIndex, 1)\n      childFilter = [...newChildArray]\n      await dispatch(setChildViewFilter(newChildArray))\n    }\n\t\tawait props.setFilterhandler(childFilter)\n  }\n\n  const clearClickHandler = async () => {\n    await dispatch(clearViewFilter())\n\t\tawait props.setFilterhandler([])\n  }\n\n  const changeParentLimitHandler = (parentFilterID) => {\n    let limitLength = null\n    let filterCategory = [...stateFilterCategories].map(parentFilter => {\n      if (parentFilter.id === parentFilterID) {\n        parentFilter.limit = parentFilter.child.length\n        limitLength = parentFilter.child.length\n      }\n      return parentFilter\n    })\n    dispatch(setViewFilterCategory(filterCategory))\n\n    let isFound = false\n    let newFilterCateoryLimit = [...filterCategoryLimit].map(categorylimit => {\n      if (categorylimit.id === parentFilterID) {\n        categorylimit.limit = limitLength\n        isFound = true\n        return categorylimit\n      }\n      return categorylimit\n    })\n\n    if (!isFound) {\n      newFilterCateoryLimit.push({ 'id': parentFilterID, 'limit': limitLength })\n    }\n    setFilterCategoryLimit(newFilterCateoryLimit)\n  }\n\n  return (\n    <div className=\"view-filter\">\n      <div className=\"view-filter-heading pb-1 d-flex align-items-baseline\">\n        <h4 className=\"font-weight-bold\">Filters</h4>\n        {tempChildFilterIds.length !== 0 ?\n          <a tabindex='0' className=\"filter-clear-all text-sm font-medium ml-auto\" onClick={() => clearClickHandler()}>Clear all</a> : null\n        }\n      </div>\n      <div className=\"d-flex flex-column\">\n        {[...stateFilterCategories].map(parentFilter => (\n          <div className=\"filter-item\" key={\"filter-\" + parentFilter.id}>\n            {/* Parent filter */}\n            <div className=\"text-body filter-title pt-5 d-flex\">{parentFilter.display}</div>\n\n            {/* Child filter */}\n            {parentFilter.child ? (\n              <div className=\"d-flex flex-column mt-2\" key={\"child-filter-\" + parentFilter.id}>\n                <div className=\"mt-3 fliter-checkbox-section\">\n                  {parentFilter.child.map((childFilter, index) => (\n                    childFilter.count > 0 ?\n                      index < (parentFilter.limit ? parentFilter.limit : parentFilter.child.length) ?\n                        <label class=\"view-fliter-checkbox d-flex align-items-center mb-4\" key={childFilter.id}>\n                          <span class=\"checkbox__input mr-2\">\n                            <input type=\"checkbox\"\n                              name={childFilter.display}\n                              value={childFilter.display}\n                              checked={tempChildFilterIds.includes(childFilter.id) ? \"checked\" : \"\"}\n                              onChange={() => childChangeHandler(childFilter.id, parentFilter.id)} />\n                            <span class=\"checkbox__control d-flex justify-content-center align-items-center\">\n                              <i class=\"icon-check\"></i>\n                            </span>\n                          </span>\n                          <p class=\"radio__label text-sm\"><div>{childFilter.display} {childFilter.count > 0 ? <>({childFilter.count})</> : null}</div></p>\n                        </label>\n                        : null\n                      : null\n\n                  ))}\n                  {(parentFilter.limit && (parentFilter.limit !== parentFilter.child.length) && (parentFilter.child.length - parentFilter.limit) > 0) ?\n                    <div className=\"filter-clear-all text-sm font-medium ml-4 pb-3\" onClick={() => changeParentLimitHandler(parentFilter.id)}>Show {parentFilter.child.length - parentFilter.limit} more</div>\n                    : null\n                  }\n                </div>\n              </div>\n            )\n              : null}\n          </div>\n        ))}\n      </div>\n    </div>\n  )\n}\n\nexport default ViewFilter;\n","import React, { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport { setAlreadyBoughtProductInfo } from 'modules/guest-view/GuestViewAction';\nimport ProductDetailsModel from '../product-details-model/ProductDetailsModel';\nimport Counter from \"../counter/Counter\";\nimport { store } from \"store/Store\";\nimport './AlreadyBoughtProduct.scss';\nimport { LOCAL_STORAGE_GUEST_GIFT_BUY_KEY } from 'utils/constants';\n\nconst AlreadyBoughtProduct = (props) => {\n\n  const dispatch = useDispatch();\n  const stateRegistryInfo = useSelector(state => state.guestView.info)\n  const productInfo = useSelector(state => state.guestView.alreadyBoughtProduct)\n  const quantity = useSelector(state => state.guestView.alreadyBoughtProduct.quantity)\n  const name = useSelector(state => state.guestView.alreadyBoughtProduct.name)\n  const email = useSelector(state => state.guestView.alreadyBoughtProduct.email)\n  const orderNumber = useSelector(state => state.guestView.alreadyBoughtProduct.orderNumber)\n  const storeName = useSelector(state => state.guestView.alreadyBoughtProduct.storeName)\n  const giftMessage = useSelector(state => state.guestView.alreadyBoughtProduct.giftMessage)\n\n  useEffect(() => {\n    let jsonVisitedItems = JSON.parse(localStorage.getItem(LOCAL_STORAGE_GUEST_GIFT_BUY_KEY))\n    // Setting default value for email and quantity\n    if (jsonVisitedItems) {\n      for (let item of jsonVisitedItems) {\n        if (Number(item.rId) === Number(stateRegistryInfo.id)) {\n          if (Number(item.pId) === Number(props.data.id)) {\n            setInfo(item.email, item.quantity, props.data.item.store.storeName)\n          }\n        }\n      }\n    }\n  }, [])\n\n  const setInfo = async (email, quantity, storeName) => {\n    let prodInfo = { ...productInfo };\n    prodInfo.email = email;\n    prodInfo.storeName = storeName;\n    prodInfo.quantity = quantity;\n    await dispatch(setAlreadyBoughtProductInfo(prodInfo));\n  }\n\n  const setQuantity = async (quantity) => {\n    let prodInfo = { ...productInfo };\n    prodInfo.quantity = quantity;\n    dispatch(setAlreadyBoughtProductInfo(prodInfo));\n  }\n\n  const incrementQuantity = () => {\n    if (quantity < props.data.quantityStatus.still_needed) {\n      setQuantity(quantity + 1)\n    }\n  }\n\n  const decrementQuantity = () => {\n    if (quantity - 1 > 0) {\n      setQuantity(quantity - 1)\n    }\n  }\n\n  const nameChangeHandler = (ev) => {\n    ev.persist();\n    let prodInfo = { ...productInfo };\n    props.onFocusHandler('name')\n    prodInfo.name = ev.target.value;\n    dispatch(setAlreadyBoughtProductInfo(prodInfo));\n  }\n\n\n  const emailChangeHandler = (ev) => {\n    ev.persist();\n    let prodInfo = { ...productInfo };\n    props.onFocusHandler('email')\n    prodInfo.email = ev.target.value;\n    dispatch(setAlreadyBoughtProductInfo(prodInfo));\n  }\n\n  const storeNameChangeHandler = (ev) => {\n    ev.persist();\n    let prodInfo = { ...productInfo };\n    props.onFocusHandler('storeName')\n    prodInfo.storeName = ev.target.value;\n    dispatch(setAlreadyBoughtProductInfo(prodInfo));\n  }\n\n  const orderNumberChangeHandler = (ev) => {\n    ev.persist();\n    let prodInfo = { ...productInfo };\n    prodInfo.orderNumber = ev.target.value;\n    dispatch(setAlreadyBoughtProductInfo(prodInfo));\n  }\n\n  const giftMessageChangeHandler = (ev) => {\n    ev.persist();\n    let prodInfo = { ...productInfo };\n    prodInfo.giftMessage = ev.target.value;\n    dispatch(setAlreadyBoughtProductInfo(prodInfo));\n  }\n\n  return (\n    <div className=\"row add-gift-another-store\">\n      <div className=\"col\">\n        <div className=\"row pb-2\">\n          <div className=\"col-12 col-md-5 py-4 add-gift-image-select\">\n            <div className=\"mr-3\">\n              <ProductDetailsModel data={props.data} />\n            </div>\n          </div>\n          {/* // I Bought This Already Model Body */}\n          <div className=\"col-12 col-md-7 mt-4\">\n            <div className=\"ml-3\">\n              <div className=\"row col\">\n                <div className=\"col\">\n                  <p className=\"font-body font-medium\">Great! Lets update their registry.</p>\n                  <p className=\"text-sm mt-1\">This information will help {stateRegistryInfo.user.firstName} {stateRegistryInfo.user.partnerUser ? 'and' + stateRegistryInfo.user.partnerUser.firstName : ''} keep track of all their gifts.</p>\n                </div>\n              </div>\n              <div className=\"row col mt-4\">\n                <div className=\"col m-a-input-container\">\n                  <p className=\"text-sm font-medium add-gift-store-label guest-view-required\">Name</p>\n                  <input\n                    className={[\"w-100 mt-1 mb-0 px-2 py-1\", props.fieldErrors.name ? \"already-bought-input-error\" : \"\"].join(\" \")}\n                    type='text'\n                    placeholder='John Doe'\n                    value={name}\n                    onChange={(ev) => nameChangeHandler(ev)}\n                  />\n                  {props.fieldErrors.name ?\n                    <span\n                      className=\"text-sm already-bought-input-error-text\">{props.fieldErrors.name}</span>\n                    : null}\n                </div>\n              </div>\n              <div className=\"row col mt-4\">\n                <div className=\"col m-a-input-container\">\n                  <p className=\"text-sm font-medium add-gift-store-label guest-view-required\">Email Address</p>\n                  <input\n                    className={[\"w-100 mt-1 mb-0 px-2 py-1\", props.fieldErrors.email ? \"already-bought-input-error\" : \"\"].join(\" \")}\n                    type='text'\n                    placeholder='johndoe@email.com'\n                    value={email}\n                    onChange={(ev) => emailChangeHandler(ev)}\n                  />\n                  {props.fieldErrors.email ?\n                    <span\n                      className=\"text-sm already-bought-input-error-text\">{props.fieldErrors.email}</span>\n                    : null}\n                </div>\n              </div>\n              <div className=\"row col mt-5\">\n                <div className=\"col m-a-input-container\">\n                  <p className=\"text-sm font-medium add-gift-store-label\">Quantity</p>\n                  <Counter\n                    className=\"mt-2\"\n                    counter={quantity}\n                    incrementHandler={incrementQuantity}\n                    decrementHandler={decrementQuantity}\n                  />\n                </div>\n              </div>\n              <div className=\"row col mt-4\">\n                <div className=\"col m-a-input-container\">\n                  <p className=\"text-sm font-medium add-gift-store-label\">Store Name</p>\n                  <input\n                    className={[\"w-100 mt-1 mb-0 px-2 py-1\", props.fieldErrors.storeName ? \"already-bought-input-error\" : \"\"].join(\" \")}\n                    type='text'\n                    placeholder='Eg. Target'\n                    value={storeName}\n                    onChange={(ev) => storeNameChangeHandler(ev)}\n                  />\n                  {props.fieldErrors.storeName ?\n                    <span\n                      className=\"text-sm already-bought-input-error-text\">{props.fieldErrors.storeName}</span>\n                    : null}\n                </div>\n                <div className=\"col m-a-input-container ml-3\">\n                  <p className=\"text-sm font-medium add-gift-store-label\">Order Number</p>\n                  <input\n                    className=\"w-100 mt-1 mb-0 px-2 py-1\"\n                    type='text'\n                    placeholder='0012345'\n                    value={orderNumber}\n                    onChange={(ev) => orderNumberChangeHandler(ev)}\n                  />\n                </div>\n              </div>\n              <div className=\"row col mt-4\">\n                <div className=\"col m-a-input-container\">\n                  <p className=\"text-sm font-medium add-gift-store-label\">Gift Message</p>\n                  <textarea className=\"w-100 mt-1 text-body p-1 m-a-resize-textarea mb-2\"\n                    rows=\"2\"\n                    placeholder=\"Write a message for gift receiver\"\n                    value={giftMessage}\n                    onChange={(ev) => giftMessageChangeHandler(ev)}\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default AlreadyBoughtProduct;","import React, { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport { setCashContributedAlreadyInfo } from 'modules/guest-view/GuestViewAction';\nimport ProductDetailsModel from '../product-details-model/ProductDetailsModel';\nimport Counter from \"../counter/Counter\";\nimport { store } from \"store/Store\";\n// import './AlreadyBoughtProduct.scss';\nimport { LOCAL_STORAGE_GUEST_GIFT_BUY_KEY } from 'utils/constants';\n\nconst CashContributedAlready = (props) => {\n\n  const dispatch = useDispatch();\n  const stateRegistryInfo = useSelector(state => state.guestView.info)\n  const productInfo = useSelector(state => state.guestView.cashContributedAlready)\n  const amount = useSelector(state => state.guestView.cashContributedAlready.amount)\n  const name = useSelector(state => state.guestView.cashContributedAlready.name)\n  const email = useSelector(state => state.guestView.cashContributedAlready.email)\n  const giftMessage = useSelector(state => state.guestView.cashContributedAlready.giftMessage)\n\n  const nameChangeHandler = (ev) => {\n    ev.persist();\n    let prodInfo = { ...productInfo };\n    props.onFocusHandler('name')\n    prodInfo.name = ev.target.value;\n    dispatch(setCashContributedAlreadyInfo(prodInfo));\n  }\n\n  const emailChangeHandler = (ev) => {\n    ev.persist();\n    let prodInfo = { ...productInfo };\n    props.onFocusHandler('email')\n    prodInfo.email = ev.target.value;\n    dispatch(setCashContributedAlreadyInfo(prodInfo));\n  }\n\n  const amountChangeHandler = (ev) => {\n    ev.persist();\n    let prodInfo = { ...productInfo };\n    props.onFocusHandler('amount')\n    if (ev.target.value.length > 0) {\n\t\t\tconst newPrice = Number(ev.target.value);\n\t\t\tconst hasDecimal = (ev.target.value.split('.').length === 2 ? ev.target.value.split('.')[1].length <= 2 : true)\n\t\t\tif ((newPrice >= 0) && hasDecimal) {\n        prodInfo.amount = ev.target.value;\n\t\t\t}\n\t\t} else {\n      prodInfo.amount = '';\n\t\t}\n    dispatch(setCashContributedAlreadyInfo(prodInfo));\n  }\n\n  const giftMessageChangeHandler = (ev) => {\n    ev.persist();\n    let prodInfo = { ...productInfo };\n    prodInfo.giftMessage = ev.target.value;\n    dispatch(setCashContributedAlreadyInfo(prodInfo));\n  }\n\n  return (\n    <div className=\"row add-gift-another-store\">\n      <div className=\"col\">\n        <div className=\"row pb-2\">\n          <div className=\"col-12 col-md-5 py-4 add-gift-image-select\">\n            <div className=\"mr-3\">\n              <ProductDetailsModel data={props.data} />\n            </div>\n          </div>\n          {/* // I Bought This Already Model Body */}\n          <div className=\"col-12 col-md-7 mt-4\">\n            <div className=\"ml-3\">\n              <div className=\"row col\">\n                <div className=\"col\">\n                  <p className=\"font-body font-medium\">Great, lets update their registry.</p>\n                  <p className=\"text-sm mt-1\">This info will help {stateRegistryInfo.user.firstName} {stateRegistryInfo.user.partnerUser ? 'and' + stateRegistryInfo.user.partnerUser.firstName : ''} keep track of all their gifts.</p>\n                </div>\n              </div>\n              <div className=\"row col mt-4\">\n                <div className=\"col m-a-input-container\">\n                  <p className=\"text-sm font-medium add-gift-store-label guest-view-required\">Name</p>\n                  <input\n                    className={[\"w-100 mt-1 px-2 mb-0 py-1\", props.fieldErrors.name ? \"already-bought-input-error\" : \"\"].join(\" \")}\n                    type='text'\n                    placeholder='John Doe'\n                    value={name}\n                    onChange={(ev) => nameChangeHandler(ev)}\n                  />\n                  {props.fieldErrors.name ?\n                    <span\n                      className=\"text-sm already-bought-input-error-text\">{props.fieldErrors.name}</span>\n                    : null}\n                </div>\n              </div>\n              <div className=\"row col mt-4\">\n                <div className=\"col m-a-input-container\">\n                  <p className=\"text-sm font-medium add-gift-store-label guest-view-required\">Email Address</p>\n                  <input\n                    className={[\"w-100 mt-1 px-2 mb-0 py-1\", props.fieldErrors.email ? \"already-bought-input-error\" : \"\"].join(\" \")}\n                    type='text'\n                    placeholder='johndoe@email.com'\n                    value={email}\n                    onChange={(ev) => emailChangeHandler(ev)}\n                  />\n                  {props.fieldErrors.email ?\n                    <span\n                      className=\"text-sm already-bought-input-error-text\">{props.fieldErrors.email}</span>\n                    : null}\n                </div>\n              </div>\n              <div className=\"row col mt-4\">\n                <div className=\"col m-a-input-container\">\n                  <p className=\"text-sm font-medium add-gift-store-label guest-view-required\">Amount</p>\n                  <div className=\"price-input mt-1\">\n                    <input\n                      type=\"text\"\n                      className={[\"w-100 pl-2 pr-1 py-1 mb-0 text-body pl-5\", props.fieldErrors.amount ? \"already-bought-input-error\" : \"\"].join(\" \")}\n                      value={amount}\n                      onChange={(ev) => amountChangeHandler(ev)}\n                    />\n                  </div>\n                  {props.fieldErrors.amount ?\n                    <span\n                      className=\"text-sm already-bought-input-error-text\">{props.fieldErrors.amount}</span>\n                    : null}\n                  {/*<span className=\"price-input text-body\">$</span>*/}\n                </div>\n              </div>\n              <div className=\"row col mt-4\">\n                <div className=\"col m-a-input-container\">\n                  <p className=\"text-sm font-medium add-gift-store-label\">Gift Message</p>\n                  <textarea className=\"w-100 mt-1 mb-0 text-body p-1\"\n                    rows=\"2\"\n                    placeholder=\"Write a message for gift receiver\"\n                    value={giftMessage}\n                    onChange={(ev) => giftMessageChangeHandler(ev)}\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default CashContributedAlready;","import React, { useState } from 'react';\nimport \"./GiveMAGiftModel.scss\";\nimport Button from '../button-component/ButtonComponent';\nimport Modal from \"../modal-component/ModalComponent\";\nimport Counter from \"../counter/Counter\";\nimport ProductDetailsModel from '../product-details-model/ProductDetailsModel'\nimport { connect } from \"react-redux\";\nimport AlreadyBoughtProduct from \"modules/commons/components/already-bought-product/AlreadyBoughtProduct\";\nimport CashContributedAlready from \"modules/commons/components/cash-contributed-already/CashContributedAlready\";\nimport { graphQL } from \"api/axios\";\nimport { MARK_AS_PURCHASED_BY_GUEST, GIVE_GROUP_GIFT_GUEST, CASH_FUND_GIFT_GUEST, CASH_AND_LEAVE, CASH_FUND_CONTRIBUTION_GUEST } from \"api/mutations\";\nimport { toast } from \"react-toastify\";\nimport { withRouter } from 'react-router-dom';\nimport { clearViewGuestPaginationInfo, setGuestViewProducts } from \"modules/guest-view/GuestViewAction\";\nimport { addProductToCart } from \"utils/commonFunction\";\nimport { M_A_STORE_NAME } from 'utils/constants';\n\nclass GiveMAGiftModel extends React.Component {\n\t// Variable declarations\n\tstate = {\n\t\tupdateModal: false,\n\t\tmodalTitle: '',\n\t\tquantity: 1,\n\t\tisBoughtThisAlready: false,\n\t\tisContributedAlready: false,\n\t\tname: null,\n\t\temail: null,\n\t\tstoreName: null,\n\t\torderNumber: null,\n\t\tgiftMessage: null,\n\t\tamount: \"0.00\",\n\t\terrors: {}\n\t}\n\n\tmodalTitleContent = \"\"\n\n\tEMAIL_RE = /^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$/g\n\n\tcomponentDidMount = () => {\n\t\tthis.setModalData()\n\t}\n\n\tincrementQuantity = () => {\n\t\tif (this.state.quantity < this.props.data.quantityStatus.still_needed)\n\t\t\tthis.setState(() => ({\n\t\t\t\tquantity: this.state.quantity + 1\n\t\t\t}))\n\t}\n\n\tdecrementQuantity = () => {\n\t\tif (this.state.quantity > 1) {\n\t\t\tthis.setState(() => ({\n\t\t\t\tquantity: this.state.quantity - 1\n\t\t\t}))\n\t\t}\n\t}\n\n\tiBoughtThisAlready = () => {\n\t\tthis.setState(() => ({\n\t\t\tisBoughtThisAlready: true,\n\t\t\tmodalTitle: 'I bought this already',\n\t\t}))\n\t}\n\n\tisContributedAlready = () => {\n\t\tthis.setState(() => ({\n\t\t\tisContributedAlready: true,\n\t\t\tmodalTitle: 'I contributed already',\n\t\t}))\n\t}\n\n\tnameChangeHandler = (ev) => {\n\t\tev.persist();\n\t\tthis.setState({\n\t\t\tname: ev.target.value\n\t\t})\n\t}\n\n\temailChangeHandler = (ev) => {\n\t\tev.persist();\n\t\tthis.setState({\n\t\t\temail: ev.target.value\n\t\t})\n\t}\n\n\tstoreNameChangeHandler = (ev) => {\n\t\tev.persist();\n\t\tthis.setState({\n\t\t\tstoreName: ev.target.value\n\t\t})\n\t}\n\n\torderNumberChangeHandler = (ev) => {\n\t\tev.persist();\n\t\tthis.setState({\n\t\t\torderNumber: ev.target.value\n\t\t})\n\t}\n\n\tgiftMessageChangeHandler = (ev) => {\n\t\tev.persist();\n\t\tthis.setState({\n\t\t\tgiftMessage: ev.target.value\n\t\t})\n\t}\n\n\tamountChangeHandler = (ev) => {\n\t\tthis.onFocusCashFundHandler('amount')\n\t\tif (ev.target.value.length > 0) {\n\t\t\tconst newPrice = Number(ev.target.value);\n\t\t\tconst hasDecimal = (ev.target.value.split('.').length === 2 ? ev.target.value.split('.')[1].length <= 2 : true)\n\t\t\tif ((newPrice >= 0) && hasDecimal) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tamount: ev.target.value\n\t\t\t\t})\n\t\t\t}\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\tamount: ''\n\t\t\t})\n\t\t}\n\t}\n\n\tvalidBoughtThisAlreadyData = () => {\n\t\tlet valid = true\n\t\tlet errors = {}\n\t\t// validate fields\n\t\tif (this.props.productBoughtAlreadyInfo.name.length <= 0) {\n\t\t\terrors['name'] = \"Name is required field\"\n\t\t\tvalid = false\n\t\t}\n\n\t\tif (this.props.productBoughtAlreadyInfo.email.length <= 0) {\n\t\t\terrors['email'] = \"Email address is required field\"\n\t\t\tvalid = false\n\t\t} else {\n\t\t\tif (!this.props.productBoughtAlreadyInfo.email.match(this.EMAIL_RE)) {\n\t\t\t\terrors['email'] = \"Invalid Email address\"\n\t\t\t\tvalid = false\n\t\t\t}\n\t\t}\n\n\t\tthis.setState({\n\t\t\terrors: errors\n\t\t})\n\n\t\treturn valid\n\t}\n\n\tonFocusBoughtThisAlreadyHandler = (fieldName) => {\n\t\tlet errors = { ...this.state.errors }\n\t\t// Remove the errors while typing\n\t\tif (this.state.errors.email && fieldName === 'email') {\n\t\t\tdelete errors.email\n\t\t}\n\t\tif (this.state.errors.name && fieldName === 'name') {\n\t\t\tdelete errors.name\n\t\t}\n\t\tif (this.state.errors.storeName && fieldName === 'storeName') {\n\t\t\tdelete errors.storeName\n\t\t}\n\t\tthis.setState({\n\t\t\terrors: errors\n\t\t})\n\t}\n\n\tvalidCashContributedAlreadyData = () => {\n\t\tlet valid = true\n\t\tlet errors = {}\n\t\t// validate fields\n\t\tif (this.props.cashContributedAlreadyInfo.name.length <= 0) {\n\t\t\terrors['name'] = \"Name is required field\"\n\t\t\tvalid = false\n\t\t}\n\n\t\tif (this.props.cashContributedAlreadyInfo.email.length <= 0) {\n\t\t\terrors['email'] = \"Email address is required field\"\n\t\t\tvalid = false\n\t\t} else {\n\t\t\tif (!this.props.cashContributedAlreadyInfo.email.match(this.EMAIL_RE)) {\n\t\t\t\terrors['email'] = \"Invalid Email address\"\n\t\t\t\tvalid = false\n\t\t\t}\n\t\t}\n\n\t\tif (Number(this.props.cashContributedAlreadyInfo.amount) === 0 || this.props.cashContributedAlreadyInfo.amount === '') {\n\t\t\terrors['amount'] = \"Amount can't be 0\"\n\t\t\tvalid = false\n\t\t}\n\t\telse if (Number(this.props.cashContributedAlreadyInfo.amount) > this.props.data.item.price) {\n\t\t\terrors['amount'] = \"Amount can't be greater than required amount\"\n\t\t\tvalid = false\n\t\t}\n\n\t\tthis.setState({\n\t\t\terrors: errors\n\t\t})\n\n\t\treturn valid\n\t}\n\n\tonFocusCashContributedAlreadyHandler = (fieldName) => {\n\t\tlet errors = { ...this.state.errors }\n\t\t// Remove the errors while typing\n\t\tif (this.state.errors.email && fieldName === 'email') {\n\t\t\tdelete errors.email\n\t\t}\n\t\tif (this.state.errors.name && fieldName === 'name') {\n\t\t\tdelete errors.name\n\t\t}\n\t\tif (this.state.errors.amount && fieldName === 'amount') {\n\t\t\tdelete errors.amount\n\t\t}\n\t\tthis.setState({\n\t\t\terrors: errors\n\t\t})\n\t}\n\n\tvalidCashFundData = () => {\n\t\tlet valid = true\n\t\tlet errors = {}\n\t\t// validate fields\n\t\tif (Number(this.state.amount) === 0) {\n\t\t\terrors['amount'] = \"Amount can't be 0\"\n\t\t\tvalid = false\n\t\t}\n\t\telse if (Number(this.state.amount) > (this.props.data.item.price * this.props.data.quantityStatus.still_needed)) {\n\t\t\terrors['amount'] = \"Amount can't be greater than required amount\"\n\t\t\tvalid = false\n\t\t}\n\n\t\tthis.setState({\n\t\t\terrors: errors\n\t\t})\n\n\t\treturn valid\n\t}\n\n\tonFocusCashFundHandler = (fieldName) => {\n\t\tlet errors = { ...this.state.errors }\n\t\t// Remove the errors while typing\n\t\tif (this.state.errors.amount && fieldName === 'amount') {\n\t\t\tdelete errors.amount\n\t\t}\n\t\tthis.setState({\n\t\t\terrors: errors\n\t\t})\n\t}\n\n\tmodalCloseHandler = () => {\n\t\tthis.setState({\n\t\t\terrors: {}\n\t\t})\n\t\tthis.props.close()\n\t}\n\n\taddProductToCartHandler = (quantity, id) => {\n\t\t// For Ref\n\t\t// ('/cart/add.js', {\n\t\t//   items: [\n\t\t//     {\n\t\t//       quantity: 1,\n\t\t//       id: 31643811020880,\n\t\t//     }\n\t\t//   ]\n\t\t// });\n\t\tlet data = {\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\tquantity: quantity,\n\t\t\t\t\t// id: id ? Number(id) : 4777708191824,\n\t\t\t\t\tid: id\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\n\t\t// This function return a promise with object that container response status\n\t\taddProductToCart(data).then(res => {\n\t\t\tif (res && res.status !== 200) {\n\t\t\t\ttoast.error(res.description ? res.description : \"Some error occurred while adding product to cart\");\n\t\t\t} else if (res && res.status === 200) {\n\t\t\t\ttoast.success(\"Product added to cart successfully.\")\n\t\t\t\tthis.props.close()\n\t\t\t} else {\n\t\t\t\ttoast.error(\"Some unexpected error has occurred\");\n\t\t\t}\n\t\t});\n\t}\n\n\tsubmitDataHandler = async () => {\n\t\t// Todo: API calls\n\t\t// For Bought this gift already\n\t\tif (this.state.isBoughtThisAlready) {\n\t\t\t// Vaidating data\n\t\t\tif (!this.validBoughtThisAlreadyData()) {\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\tlet data = {\n\t\t\t\tquery: MARK_AS_PURCHASED_BY_GUEST,\n\t\t\t\tvariables: {\n\t\t\t\t\tregistryUrlSlug: this.props.stateRegistryInfo.urlSlug,\n\t\t\t\t\tregistryItemId: this.props.data.id,\n\t\t\t\t\tisPurchased: true,\n\t\t\t\t\tstoreName: this.props.productBoughtAlreadyInfo.storeName,\n\t\t\t\t\tpurchasedQuantity: this.props.productBoughtAlreadyInfo.quantity,\n\t\t\t\t\t// contributionAmount: null,\n\t\t\t\t\tgiftMessage: this.props.productBoughtAlreadyInfo.giftMessage,\n\t\t\t\t\torderNumber: this.props.productBoughtAlreadyInfo.orderNumber,\n\t\t\t\t\tname: this.props.productBoughtAlreadyInfo.name,\n\t\t\t\t\temail: this.props.productBoughtAlreadyInfo.email\n\t\t\t\t},\n\t\t\t}\n\t\t\tawait graphQL(data).then(async res => {\n\t\t\t\tif (res.data.errors || res.data.error) {\n\t\t\t\t\t// TODO: Add toast proper toast msg\n\t\t\t\t\tconsole.log('Something went wrong-->', res.data.errors)\n\t\t\t\t\ttoast.error((\n\t\t\t\t\t\t<p>Something went wrong</p>\n\t\t\t\t\t))\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\t// Getting Update Product\n\t\t\t\t\tawait this.props.dispatch(clearViewGuestPaginationInfo())\n\t\t\t\t\tawait this.props.updateGuestViewProduct(this.props.match.params.registrySlug, this.props.stateAddedProducts.length, true)\n\t\t\t\t\ttoast.success((\n\t\t\t\t\t\t<p><b>{this.props.data.title}</b> Purchased!</p>\n\t\t\t\t\t))\n\t\t\t\t\tthis.modalCloseHandler()\n\t\t\t\t}\n\t\t\t}).catch(err => {\n\t\t\t\t// TODO: Add toast proper toast msg\n\t\t\t\tconsole.log('Something went wrong-->', err)\n\t\t\t\ttoast.error((\n\t\t\t\t\t<p>Something went wrong</p>\n\t\t\t\t))\n\t\t\t})\n\t\t}\n\t\t// For Cash Fund Contributed Already\n\t\telse if (this.state.isContributedAlready) {\n\t\t\tif (!this.validCashContributedAlreadyData()) {\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\tlet data = {\n\t\t\t\tquery: CASH_FUND_CONTRIBUTION_GUEST,\n\t\t\t\tvariables: {\n\t\t\t\t\tregistryUrlSlug: this.props.stateRegistryInfo.urlSlug,\n\t\t\t\t\tregistryItemId: this.props.data.id,\n\t\t\t\t\tisPurchased: true,\n\t\t\t\t\tcontributionAmount: Number(this.props.cashContributedAlreadyInfo.amount),\n\t\t\t\t\t// contributionAmount: null,\n\t\t\t\t\tgiftMessage: this.props.cashContributedAlreadyInfo.giftMessage,\n\t\t\t\t\tname: this.props.cashContributedAlreadyInfo.name,\n\t\t\t\t\temail: this.props.cashContributedAlreadyInfo.email\n\t\t\t\t},\n\t\t\t}\n\t\t\tawait graphQL(data).then(async res => {\n\t\t\t\tif (res.data.errors || res.data.error) {\n\t\t\t\t\t// TODO: Add toast proper toast msg\n\t\t\t\t\tconsole.log('Something went wrong-->', res.data.errors)\n\t\t\t\t\ttoast.error((\n\t\t\t\t\t\t<p>Something went wrong</p>\n\t\t\t\t\t))\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\t// Getting Update Product\n\t\t\t\t\tawait this.props.dispatch(clearViewGuestPaginationInfo())\n\t\t\t\t\tawait this.props.updateGuestViewProduct(this.props.match.params.registrySlug, this.props.stateAddedProducts.length, true)\n\t\t\t\t\ttoast.success((\n\t\t\t\t\t\t<p><b>{this.props.data.title}</b> Purchased!</p>\n\t\t\t\t\t))\n\t\t\t\t\tthis.modalCloseHandler()\n\t\t\t\t}\n\t\t\t}).catch(err => {\n\t\t\t\t// TODO: Add toast proper toast msg\n\t\t\t\tconsole.log('Something went wrong-->', err)\n\t\t\t\ttoast.error((\n\t\t\t\t\t<p>Something went wrong</p>\n\t\t\t\t))\n\t\t\t})\n\t\t}\n\t\t// For Group Gift\n\t\telse if (this.props.isGroupGift && !this.props.data.item.isCashFund) {\n\t\t\tif (!this.validCashFundData()) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t\tlet data = {\n\t\t\t\tquery: GIVE_GROUP_GIFT_GUEST,\n\t\t\t\tvariables: {\n\t\t\t\t\tregistryId: this.props.stateRegistryInfo.id,\n\t\t\t\t\tregistryItemId: this.props.data.id,\n\t\t\t\t\tcontributionAmount: Number(this.state.amount)\n\t\t\t\t},\n\t\t\t}\n\t\t\tawait graphQL(data).then(async res => {\n\t\t\t\tif (res.data.errors || res.data.error) {\n\t\t\t\t\t// TODO: Add toast proper toast msg\n\t\t\t\t\tconsole.log('Something went wrong-->', res.data.errors)\n\t\t\t\t\ttoast.error((\n\t\t\t\t\t\t<p>Something went wrong</p>\n\t\t\t\t\t))\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\t// Getting Update Product\n\t\t\t\t\tawait this.props.dispatch(clearViewGuestPaginationInfo())\n\t\t\t\t\tawait this.props.updateGuestViewProduct(this.props.match.params.registrySlug, this.props.stateAddedProducts.length, true)\n\t\t\t\t\tthis.addProductToCartHandler(1, res.data.data.giveGroupGift.variantId)\n\t\t\t\t\ttoast.success((\n\t\t\t\t\t\t<p><b>{this.props.data.title}</b> added to Cart!</p>\n\t\t\t\t\t))\n\t\t\t\t\t// this.modalCloseHandler()\n\t\t\t\t}\n\t\t\t}).catch(err => {\n\t\t\t\t// TODO: Add toast proper toast msg\n\t\t\t\tconsole.log('Something went wrong-->', err)\n\t\t\t\ttoast.error((\n\t\t\t\t\t<p>Something went wrong</p>\n\t\t\t\t))\n\t\t\t})\n\t\t}\n\t\t// For cash and leave\n\t\telse if (this.props.isCashAcceptedOnly) {\n\t\t\tlet data = {\n\t\t\t\tquery: CASH_AND_LEAVE,\n\t\t\t\tvariables: {\n\t\t\t\t\tregistryId: this.props.stateRegistryInfo.id,\n\t\t\t\t\tregistryItemId: this.props.data.id,\n\t\t\t\t\tpurchasedQuantity: this.state.quantity\n\t\t\t\t},\n\t\t\t}\n\t\t\tawait graphQL(data).then(async res => {\n\t\t\t\tif (res.data.errors || res.data.error) {\n\t\t\t\t\t// TODO: Add toast proper toast msg\n\t\t\t\t\tconsole.log('Something went wrong-->', res.data.errors)\n\t\t\t\t\ttoast.error((\n\t\t\t\t\t\t<p>Something went wrong</p>\n\t\t\t\t\t))\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\t// Getting Update Product\n\t\t\t\t\tawait this.props.dispatch(clearViewGuestPaginationInfo())\n\t\t\t\t\tawait this.props.updateGuestViewProduct(this.props.match.params.registrySlug, this.props.stateAddedProducts.length, true)\n\t\t\t\t\tthis.addProductToCartHandler(this.state.quantity, res.data.data.cashInLieu.variantId)\n\t\t\t\t\ttoast.success((\n\t\t\t\t\t\t<p><b>{this.props.data.title}</b> added to Cart!</p>\n\t\t\t\t\t))\n\t\t\t\t\t// this.modalCloseHandler()\n\t\t\t\t}\n\t\t\t}).catch(err => {\n\t\t\t\t// TODO: Add toast proper toast msg\n\t\t\t\tconsole.log('Something went wrong-->', err)\n\t\t\t\ttoast.error((\n\t\t\t\t\t<p>Something went wrong</p>\n\t\t\t\t))\n\t\t\t})\n\t\t}\n\t\t// For Cash Fund\n\t\telse if (this.props.data.item.isCashFund && this.props.isGroupGift) {\n\t\t\tif (!this.validCashFundData()) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t\tlet data = {\n\t\t\t\tquery: CASH_FUND_GIFT_GUEST,\n\t\t\t\tvariables: {\n\t\t\t\t\tregistryId: this.props.stateRegistryInfo.id,\n\t\t\t\t\tregistryItemId: this.props.data.id,\n\t\t\t\t\tcontributionAmount: Number(this.state.amount)\n\t\t\t\t},\n\t\t\t}\n\t\t\tawait graphQL(data).then(async res => {\n\t\t\t\tif (res.data.errors || res.data.error) {\n\t\t\t\t\t// TODO: Add toast proper toast msg\n\t\t\t\t\tconsole.log('Something went wrong-->', res.data.errors)\n\t\t\t\t\ttoast.error((\n\t\t\t\t\t\t<p>Something went wrong</p>\n\t\t\t\t\t))\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\t// Getting Update Product\n\t\t\t\t\tawait this.props.dispatch(clearViewGuestPaginationInfo())\n\t\t\t\t\tawait this.props.updateGuestViewProduct(this.props.match.params.registrySlug, this.props.stateAddedProducts.length, true)\n\t\t\t\t\tthis.addProductToCartHandler(1, res.data.data.cashFundGift.variantId)\n\t\t\t\t\ttoast.success((\n\t\t\t\t\t\t<p><b>{this.props.data.title}</b> added to Cart!</p>\n\t\t\t\t\t))\n\t\t\t\t\t// this.modalCloseHandler()\n\t\t\t\t}\n\t\t\t}).catch(err => {\n\t\t\t\t// TODO: Add toast proper toast msg\n\t\t\t\tconsole.log('Something went wrong-->', err)\n\t\t\t\ttoast.error((\n\t\t\t\t\t<p>Something went wrong</p>\n\t\t\t\t))\n\t\t\t})\n\t\t}\n\t\t// If M-A product: Adding to cart\n\t\telse if (this.props.data.item.store.storeName === M_A_STORE_NAME &&\n\t\t\t!this.props.isGroupGift &&\n\t\t\t!this.props.isCashAcceptedOnly) {\n\t\t\tthis.addProductToCartHandler(this.state.quantity, this.props.data.item.shopifyItemVariantId)\n\t\t}\n\t}\n\n\tsetModalData = () => {\n\t\tthis.clearModalData()\n\t\tthis.setState({\n\t\t\tmodalTitle: this.props.title\n\t\t})\n\t}\n\n\tclearModalData = () => {\n\t\tthis.state.modalTitle = \"\"\n\t\tthis.modalBody = \"\"\n\t\tthis.modalTitleContent = \"\"\n\t\tthis.modalFooterButtons = \"\"\n\t}\n\n\tcontributeRestHandler = (data) => {\n\t\tlet contributeAmount = data.purchasedRegistryItem.length ? Math.round((data.item.price * data.quantityStatus.still_needed - data.purchasedRegistryItem[0].groupGift.amountReceived % data.item.price) * 100) / 100 : Math.round(data.item.price * data.quantityStatus.still_needed * 100) / 100\n\t\tthis.setState({\n\t\t\tamount: contributeAmount\n\t\t})\n\t}\n\n\trender() {\n\t\t// Body for modal\n\t\tlet modalBody = (\n\t\t\t<>\n\t\t\t\t{/* Give M+A Gift Model Body */}\n\t\t\t\t{!this.state.isBoughtThisAlready && !this.state.isContributedAlready ?\n\t\t\t\t\t<div className=\"row add-gift-another-store\">\n\t\t\t\t\t\t<div className=\"col\">\n\t\t\t\t\t\t\t<div className=\"row\">\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<div className=\"col-12 col-md-5 py-4 add-gift-image-select\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"mr-3\">\n\t\t\t\t\t\t\t\t\t\t\t<ProductDetailsModel data={this.props.data} />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{!this.props.isGroupGift ?\n\t\t\t\t\t\t\t\t\t\t<div className=\"col-12 col-md-7 mt-4\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"ml-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"row col\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"col\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"font-body font-medium\">Buy this gift for {this.props.stateRegistryInfo.user.firstName} {this.props.stateRegistryInfo.user.partnerUser ? 'and' + this.props.stateRegistryInfo.user.partnerUser.firstName : ''}</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm mt-1\">Well keep this gift available in the registry until you check out.{this.props.isCashAcceptedOnly ? \" This gift will be shipped to registrant at their convenience.\" : ''}</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"row col mt-4\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"col m-a-input-container\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm font-medium add-gift-store-label\">Quantity</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Counter\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"mt-2\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcounter={this.state.quantity}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tincrementHandler={this.incrementQuantity}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdecrementHandler={this.decrementQuantity}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t// For group gift\n\t\t\t\t\t\t\t\t\t\t<div className=\"col-7 mt-4\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"ml-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"row col\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"col\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"font-body font-medium\">How much do you want to contribute?</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm mt-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{this.props.stateRegistryInfo.user.firstName} {this.props.stateRegistryInfo.user.partnerUser ? 'and' + this.props.stateRegistryInfo.user.partnerUser.firstName : ''} will be able to buy the gift themselves once they receive the funds.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t{this.props.data.isGroupGift ?\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.props.data.item.hideTotal ? null :\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"row col mt-4 give-gift-model\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"col\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm font-medium received-amount\">Received ${this.props.data.purchasedRegistryItem.length ? Math.round((this.props.data.purchasedRegistryItem[0].groupGift.amountReceived % this.props.data.item.price) * 100) / 100 : 0} </span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm total-amount\"> of ${Math.round(this.props.data.item.price * this.props.data.quantityStatus.still_needed * 100) / 100}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"group-gift-background\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"group-gift-progress mw-100\" style={{ width: `${this.props.data.purchasedRegistryItem.length ? ((this.props.data.purchasedRegistryItem[0].groupGift.amountReceived % this.props.data.item.price) * 100) / (this.props.data.item.price * this.props.data.quantity) : 0}%` }} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"mt-4 ml-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"row col\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"col\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"m-a-input-container mr-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm font-medium add-gift-store-label guest-view-required\">Amount</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"price-input mt-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={[\"w-100 pl-2 pr-1 py-1 mb-0 text-body pl-5\", this.state.errors.amount ? \"already-bought-input-error\" : \"\"].join(\" \")}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.amount}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(ev) => this.amountChangeHandler(ev)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{this.state.errors.amount ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-sm already-bought-input-error-text\">{this.state.errors.amount}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/*<span className=\"price-input text-body\">$</span>*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{this.props.data.item.hideTotal ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnull : <p className=\"mt-3 text-sm give-gift-text-link font-medium\" onClick={() => this.contributeRestHandler(this.props.data)}>Contribute the rest</p>}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div> :\n\t\t\t\t\t// For Cash fund\n\t\t\t\t\tthis.state.isContributedAlready ?\n\t\t\t\t\t\t<CashContributedAlready\n\t\t\t\t\t\t\tdata={this.props.data}\n\t\t\t\t\t\t\tvalidData={this.validCashContributedAlreadyData}\n\t\t\t\t\t\t\tonFocusHandler={this.onFocusCashContributedAlreadyHandler}\n\t\t\t\t\t\t\tfieldErrors={this.state.errors} />\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<AlreadyBoughtProduct\n\t\t\t\t\t\t\tdata={this.props.data}\n\t\t\t\t\t\t\tvalidBoughtThisAlreadyData={this.validBoughtThisAlreadyData}\n\t\t\t\t\t\t\tonFocusHandler={this.onFocusBoughtThisAlreadyHandler}\n\t\t\t\t\t\t\tfieldErrors={this.state.errors} />\n\t\t\t\t}\n\t\t\t</>\n\t\t)\n\n\t\t// Modal buttons\n\t\tlet modalFooterButtons = (\n\t\t\t<>\n\t\t\t\t{!this.state.isBoughtThisAlready && !this.state.isContributedAlready ?\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\tclassName=\"MA-gift-footer-btn px-3 py-1 font-medium text-body\"\n\t\t\t\t\t\tonClick={!this.props.data.item.isCashFund ? () => this.iBoughtThisAlready() : () => this.isContributedAlready()}\n\t\t\t\t\t>{!this.props.data.item.isCashFund ? \"I Bought This Already\" : \"I Contributed Already\"}</Button> : null}\n\t\t\t\t{/* For Contributed Already */}\n\t\t\t\t{!this.state.isContributedAlready ?\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\tclassName=\"MA-gift-footer-btn px-4 py-1 font-medium text-body\"\n\t\t\t\t\t\tdisabled={(this.state.isBoughtThisAlready && (this.props.productBoughtAlreadyInfo.name.length === 0 || this.props.productBoughtAlreadyInfo.email.length === 0)) || (!this.state.isBoughtThisAlready && this.props.isGroupGift && Number(this.state.amount) === 0) ? true : false}\n\t\t\t\t\t\tonClick={() => this.submitDataHandler()}\n\t\t\t\t\t>{!this.state.isBoughtThisAlready ? this.props.isGroupGift ? 'Contribute' : 'Add To Cart' : 'Save & Close'}</Button>\n\t\t\t\t\t:\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\tclassName=\"MA-gift-footer-btn px-4 py-1 font-medium text-body\"\n\t\t\t\t\t\tdisabled={(this.props.cashContributedAlreadyInfo.name.length === 0 || this.props.cashContributedAlreadyInfo.name.length === 0 || Number(this.props.cashContributedAlreadyInfo.amount) === 0 ) ? true : false}\n\t\t\t\t\t\tonClick={() => this.submitDataHandler()}\n\t\t\t\t\t>Save & Close</Button>\n\t\t\t\t}\n\t\t\t</>\n\t\t)\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Modal\n\t\t\t\t\tshow={this.props.show}\n\t\t\t\t\tupdateModal={this.state.updateModal}\n\t\t\t\t\ttitle={this.state.modalTitle}\n\t\t\t\t\ttitleContent={this.modalTitleContent}\n\t\t\t\t\tfooter={modalFooterButtons}\n\t\t\t\t\tnoBodyPadding={true}\n\t\t\t\t\tcloseModal={this.props.close}>\n\t\t\t\t\t{modalBody}\n\t\t\t\t</Modal>\n\t\t\t</>\n\t\t)\n\t}\n}\nconst mapStateToProps = state => {\n\treturn {\n\t\tstateRegistryInfo: state.guestView.info,\n\t\tproductBoughtAlreadyInfo: state.guestView.alreadyBoughtProduct,\n\t\tcashContributedAlreadyInfo: state.guestView.cashContributedAlready,\n\t\tstateAddedProducts: state.guestView.product\n\t}\n}\n\nexport default connect(\n\tmapStateToProps\n)(withRouter(GiveMAGiftModel));","import React, { useState } from 'react';\nimport \"./GiveGiftFromAnotherStore.scss\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from 'react-router-dom';\nimport Modal from \"../modal-component/ModalComponent\";\nimport Button from '../button-component/ButtonComponent';\nimport Counter from \"../counter/Counter\";\nimport ProductDetailsModel from '../product-details-model/ProductDetailsModel';\nimport AlreadyBoughtProduct from \"modules/commons/components/already-bought-product/AlreadyBoughtProduct\";\nimport { LOCAL_STORAGE_GUEST_GIFT_BUY_KEY } from 'utils/constants';\nimport { setGuestGiftsRedirectionInfo } from 'modules/guest-view/GuestViewAction';\nimport { MARK_AS_PURCHASED_BY_GUEST, RESERVE_REGISTRY_ITEM_GUEST, REMOVE_RESERVED_ITEM_GUEST } from \"api/mutations\";\nimport { toast } from \"react-toastify\";\nimport { graphQL } from \"api/axios\";\nimport { clearViewGuestPaginationInfo } from \"modules/guest-view/GuestViewAction\";\n\nclass GiveGiftFromAnotherStore extends React.Component {\n  // Variable declarations\n  state = {\n    updateModal: false,\n    quantity: 1,\n    isBoughtThisAlready: false,\n    name: null,\n    email: '',\n    registeredEmail: '',\n    storeName: null,\n    orderNumber: null,\n    giftMessage: null,\n    currentView: 1,\n    errors: {}\n  }\n\n  EMAIL_RE = /^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$/g\n\n  componentDidMount = () => {\n    this.setModalData()\n    this.buyNowClickHandler(true)\n  }\n\n  incrementQuantity = () => {\n    if (this.state.quantity < this.props.data.quantityStatus.still_needed)\n      this.setState(() => ({\n        quantity: this.state.quantity + 1\n      }))\n  }\n\n  decrementQuantity = () => {\n    if (this.state.quantity > 1) {\n      this.setState(() => ({\n        quantity: this.state.quantity - 1\n      }))\n    }\n  }\n\n  emailChangeHandler = (ev) => {\n    ev.persist();\n    this.setState({\n      email: ev.target.value\n    })\n    let errors = { ...this.state.errors }\n\n    // Remove the errors while typing\n    if (this.state.errors.email) {\n      delete errors.email\n    }\n    this.setState({\n      errors: errors\n    })\n  }\n\n  iBoughtThisAlready = () => {\n    this.setState(() => ({\n      isBoughtThisAlready: true,\n      modalTitle: 'I Bought This Already',\n    }))\n  }\n\n  validEmail = () => {\n    let valid = true\n    let errors = {}\n    // validate fields\n    if (this.state.email.length <= 0) {\n      errors['email'] = \"Email address is required field\"\n      valid = false\n    } else {\n      if (!this.state.email.match(this.EMAIL_RE)) {\n        errors['email'] = \"Invalid Email address\"\n        valid = false\n      }\n    }\n\n    this.setState({\n      errors: errors\n    })\n\n    return valid\n  }\n\n  validBoughtThisAlreadyData = () => {\n    let valid = true\n    let errors = {}\n    // validate fields\n    if (this.props.productBoughtAlreadyInfo.name.length <= 0) {\n      errors['name'] = \"Name is required field\"\n      valid = false\n    }\n\n    if (this.props.productBoughtAlreadyInfo.email.length <= 0) {\n      errors['email'] = \"Email address is required field\"\n      valid = false\n    } else {\n      if (!this.props.productBoughtAlreadyInfo.email.match(this.EMAIL_RE)) {\n        errors['email'] = \"Invalid Email address\"\n        valid = false\n      }\n    }\n\n    this.setState({\n      errors: errors\n    })\n\n    return valid\n  }\n\n  onFocusBoughtThisAlreadyHandler = (fieldName) => {\n    let errors = { ...this.state.errors }\n    // Remove the errors while typing\n    if (this.state.errors.email && fieldName === 'email') {\n      delete errors.email\n    }\n    if (this.state.errors.name && fieldName === 'name') {\n      delete errors.email\n    }\n    if (this.state.errors.storeName && fieldName === 'storeName') {\n      delete errors.storeName\n    }\n    this.setState({\n      errors: errors\n    })\n  }\n\n  buyNowClickHandler = (onLoad = false) => {\n    let createNewRecord = false\n    let updateProduct = false\n    let openModal = false\n    let jsonVisitedItems = JSON.parse(localStorage.getItem(LOCAL_STORAGE_GUEST_GIFT_BUY_KEY))\n\n    if (jsonVisitedItems) {\n      for (let item of jsonVisitedItems) {\n        if (Number(item.rId) === Number(this.props.stateRegistryInfo.id)) {\n          if (Number(item.pId) === Number(this.props.data.id)) {\n            this.setState({\n              currentView: 3,\n            })\n          } else {\n            updateProduct = true;\n            createNewRecord = true;\n          }\n        } else {\n          updateProduct = true;\n          createNewRecord = true;\n        }\n      }\n    } else {\n      createNewRecord = true;\n    }\n\n    // TODO: If Reserved Based on TimeStamp\n    // if (jsonVisitedItems) {\n    //   for (let item of jsonVisitedItems) {\n\n    //     // If registry doesn't match then delete old and create new record\n    //     if (Number(item.rId) === Number(this.props.stateRegistryInfo.id)) {\n    //       if (Number(item.pId) === Number(this.props.data.id)) {\n\n    //         let productTimestamp = new Date(item.timestamp)\n    //         let currentDate = new Date()\n\n    //         // Resetting hours because only checking the dates\n    //         productTimestamp.setHours(0, 0, 0, 0)\n    //         currentDate.setHours(0, 0, 0, 0)\n\n    //         // Checking if current date is same as product time stamp\n    //         // After 1 day, this product entry will be invalid\n    //         if (currentDate - productTimestamp === 0) {\n    //           openModal = true\n    //         } else {\n    //           updateProduct = true;\n    //           createNewRecord = true;\n    //         }\n    //         break;\n    //       } else {\n    //         updateProduct = true;\n    //         createNewRecord = true;\n    //       }\n    //     } else {\n    //       createNewRecord = true;\n    //       break;\n    //     }\n    //   }\n    // } else {\n    //   createNewRecord = true;\n    // }\n\n    if (createNewRecord && !openModal && !onLoad) {\n      const newVisitedItemsData = {\n        rId: this.props.stateRegistryInfo.id,\n        pId: this.props.data.id,\n        email: this.state.email,\n        quantity: this.state.quantity,\n        timestamp: new Date()\n      }\n\n      let foundProduct = false\n      let newData = null\n      if (jsonVisitedItems) {\n        newData = jsonVisitedItems.map(item => {\n          if (Number(item.rId) === Number(this.props.stateRegistryInfo.id) && Number(item.pId) === Number(this.props.data.id)) {\n            foundProduct = true\n            return newVisitedItemsData\n          }\n          return item\n        })\n        if (!foundProduct) {\n          newData.push(newVisitedItemsData)\n        } else {\n          this.setState({\n            currentView: 3\n          })\n        }\n      }\n\n      // Updating localStorage\n      localStorage.setItem(LOCAL_STORAGE_GUEST_GIFT_BUY_KEY, JSON.stringify(updateProduct ? newData : [newVisitedItemsData]))\n\n      //Setting Redirection Store\n      this.props.dispatch(setGuestGiftsRedirectionInfo({ store: this.props.data.item?.store?.storeName }))\n\n      window.open(this.props.data.item.storeItemUrl, \"_blank\")\n\n    }\n  }\n\n  removeProductFromList = () => {\n    let jsonVisitedItems = JSON.parse(localStorage.getItem(LOCAL_STORAGE_GUEST_GIFT_BUY_KEY))\n    let updatedProducts = jsonVisitedItems.filter(product => product.pId !== this.props.data.id)\n    localStorage.setItem(LOCAL_STORAGE_GUEST_GIFT_BUY_KEY, JSON.stringify(updatedProducts))\n  }\n\n  modalCloseHandler = () => {\n    this.setState({\n      errors: {}\n    })\n    this.props.close()\n  }\n\n  // Remove Reserved Product then Marking product as purchased\n  removeReservedAndAddProducts = async () => {\n    let email = null\n    let jsonVisitedItems = JSON.parse(localStorage.getItem(LOCAL_STORAGE_GUEST_GIFT_BUY_KEY))\n    // getting default value for email and quantity\n    if (jsonVisitedItems) {\n      for (let item of jsonVisitedItems) {\n        if (Number(item.rId) === Number(this.props.stateRegistryInfo.id)) {\n          if (Number(item.pId) === Number(this.props.data.id)) {\n            email = item.email\n            break\n          }\n        }\n      }\n    }\n    let data = {\n      query: REMOVE_RESERVED_ITEM_GUEST,\n      variables: {\n        registryId: this.props.stateRegistryInfo.id,\n        registryItemId: this.props.data.id,\n        email: email ? email : this.props.productBoughtAlreadyInfo.email\n      },\n    }\n    await graphQL(data).then(async res => {\n      if (res.data.errors || res.data.error) {\n        // TODO: Add toast proper toast msg\n        console.log('Something went wrong-->', res.data.errors)\n        toast.error((\n          <p>Something went wrong</p>\n        ))\n        return;\n      } else {\n        // Marking product as purchased\n        let data = {\n          query: MARK_AS_PURCHASED_BY_GUEST,\n          variables: {\n            registryUrlSlug: this.props.stateRegistryInfo.urlSlug,\n            registryItemId: this.props.data.id,\n            isPurchased: true,\n            storeName: this.props.productBoughtAlreadyInfo.storeName,\n            purchasedQuantity: this.props.productBoughtAlreadyInfo.quantity,\n            // contributionAmount: null,\n            giftMessage: this.props.productBoughtAlreadyInfo.giftMessage,\n            orderNumber: this.props.productBoughtAlreadyInfo.orderNumber,\n            name: this.props.productBoughtAlreadyInfo.name,\n            email: this.props.productBoughtAlreadyInfo.email\n          },\n        }\n        await graphQL(data).then(async res => {\n          if (res.data.errors || res.data.error) {\n            // TODO: Add toast proper toast msg\n            console.log('Something went wrong-->', res.data.errors)\n            toast.error((\n              <p>Something went wrong</p>\n            ))\n            return;\n          } else {\n            // Getting Update Product\n            await this.props.dispatch(clearViewGuestPaginationInfo())\n            await this.props.updateGuestViewProduct(this.props.match.params.registrySlug, this.props.stateAddedProducts.length, true)\n            this.removeProductFromList()\n            toast.success((\n              <p><b>{this.props.data.title}</b> Purchased!</p>\n            ))\n            this.modalCloseHandler()\n          }\n        }).catch(err => {\n          // TODO: Add toast proper toast msg\n          console.log('Something went wrong-->', err)\n          toast.error((\n            <p>Something went wrong</p>\n          ))\n        })\n      }\n    }).catch(err => {\n      // TODO: Add toast proper toast msg\n      console.log('Something went wrong-->', err)\n      toast.error((\n        <p>Something went wrong</p>\n      ))\n    })\n  }\n\n  submitDataHandler = async () => {\n    // Todo: API calls\n    // For Bought this gift already \n    if (this.state.isBoughtThisAlready) {\n      // Vaidating data\n      if (!this.validBoughtThisAlreadyData()) {\n        return false\n      }\n      // Removing reversed product\n      this.removeReservedAndAddProducts()\n    }\n    if (this.state.currentView === 2) {\n      if (!this.validEmail()) {\n        return false\n      }\n      // Reserveing product\n      let name = this.state.email.split('@')\n      let data = {\n        query: RESERVE_REGISTRY_ITEM_GUEST,\n        variables: {\n          registryId: this.props.stateRegistryInfo.id,\n          registryItemId: this.props.data.id,\n          isReserved: true,\n          isPurchased: false,\n          purchasedQuantity: Number(this.state.quantity),\n          name: name[0],\n          email: this.state.email\n        },\n      }\n      await graphQL(data).then(async res => {\n        if (res.data.errors || res.data.error) {\n          // TODO: Add toast proper toast msg\n          console.log('Something went wrong-->', res.data.errors)\n          toast.error((\n            <p>Something went wrong</p>\n          ))\n          return;\n        } else {\n          this.buyNowClickHandler()\n        }\n      }).catch(err => {\n        // TODO: Add toast proper toast msg\n        console.log('Something went wrong-->', err)\n        toast.error((\n          <p>Something went wrong</p>\n        ))\n      })\n    }\n    if (this.state.currentView < 5 && this.state.currentView !== 2) {\n      this.setState({\n        currentView: this.state.currentView + 1,\n      })\n    }\n  }\n\n  copyAddress = (ev) => {\n    ev.preventDefault();\n    const el = document.createElement('textarea');\n    el.value = `\n    ${this.props.stateRegistryInfo.user.defaultAddress.address1},\n    ${this.props.stateRegistryInfo.user.defaultAddress.address2},\n    ${this.props.stateRegistryInfo.user.defaultAddress.city},\n    ${this.props.stateRegistryInfo.user.defaultAddress.province},\n    ${this.props.stateRegistryInfo.user.defaultAddress.country} ${this.props.stateRegistryInfo.user.defaultAddress.zip}\n    `;\n    document.body.appendChild(el);\n    el.select();\n    document.execCommand('copy');\n    document.body.removeChild(el);\n    toast.success(\"Copied to clipboard\");\n  }\n\n  setModalData = () => {\n    this.clearModalData()\n    this.setState({\n      modalTitle: this.props.title\n    })\n  }\n\n  clearModalData = () => {\n    this.modalBody = \"\"\n    this.modalTitleContent = \"\"\n    this.modalFooterButtons = \"\"\n    this.setState({\n      currentView: 1,\n      isBoughtThisAlready: false\n    })\n  }\n\n  render() {\n\n    let modalLeftView = null\n    let modalSecondaryBtn = (\n      !this.state.isBoughtThisAlready ?\n        <Button\n          variant=\"secondary\"\n          className=\"MA-gift-footer-btn px-3 py-1 font-medium text-body\"\n          onClick={() => this.iBoughtThisAlready()}\n        >I Bought This Already</Button> : null\n    )\n    let modalPrimaryBtn = null\n\n    if (this.state.currentView === 1) {\n      modalLeftView = (\n        <div className=\"col-7 mt-4\">\n          <div className=\"ml-3\">\n            <div className=\"row col\">\n              <div className=\"col\">\n                <p className=\"font-body font-medium\">Buy this gift for {this.props.stateRegistryInfo.user.firstName} {this.props.stateRegistryInfo.user.partnerUser ? 'and' + this.props.stateRegistryInfo.user.partnerUser.firstName : ''}</p>\n                <p className=\"text-sm mt-1\">You will be able to buy this gift from {this.props.data.item.store.storeName}.</p>\n              </div>\n            </div>\n            <div className=\"row col mt-4\">\n              <div className=\"col m-a-input-container\">\n                <p className=\"text-sm font-medium add-gift-store-label\">Quantity</p>\n                <Counter\n                  className=\"mt-2\"\n                  counter={this.state.quantity}\n                  incrementHandler={this.incrementQuantity}\n                  decrementHandler={this.decrementQuantity}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      )\n      modalPrimaryBtn = (\n        <Button\n          variant=\"primary\"\n          className=\"MA-gift-footer-btn px-4 py-1 font-medium text-body guest-footer-btn\"\n          disabled={(this.state.isBoughtThisAlready && (this.props.productBoughtAlreadyInfo.name.length === 0 || this.props.productBoughtAlreadyInfo.email.length === 0)) || (this.props.isGroupGift && Number(this.state.amount)) === 0 ? true : false}\n          onClick={() => this.submitDataHandler()}\n        >{!this.state.isBoughtThisAlready ? `Buy On ${this.props.data.item.store.storeName}` : 'Save & Close'}</Button>\n      )\n    } else if (this.state.currentView === 2) {\n      modalLeftView = (\n        <div className=\"col-7 mt-4\">\n          <div className=\"ml-3\">\n            <div className=\"row col\">\n              <div className=\"col\">\n                <p className=\"font-body font-medium\">Whats your email address?</p>\n                <p className=\"text-sm mt-1\">Well reserve this gift to make sure no one else tries to buy it until we confitm if youve bought this.</p>\n              </div>\n            </div>\n            <div className=\"row col mt-4\">\n              <div className=\"col m-a-input-container\">\n                <p className=\"text-sm font-medium add-gift-store-label guest-view-required\">Email Address</p>\n                <input\n                  className={[\"w-100 mt-1 mb-0 px-2 py-1\", this.state.errors.email ? \"already-bought-input-error\" : \"\"].join(\" \")}\n                  type='text'\n                  placeholder='johndoe@email.com'\n                  value={this.state.email}\n                  onChange={(ev) => this.emailChangeHandler(ev)}\n                />\n                {this.state.errors.email ?\n                  <span\n                    className=\"text-sm already-bought-input-error-text\">{this.state.errors.email}</span>\n                  : null}\n              </div>\n            </div>\n            {this.props.stateRegistryInfo.user.defaultAddress ?\n              <div className=\"row col mt-4\">\n                <div className=\"col m-a-input-container\">\n                  <p className=\"text-sm font-medium add-gift-store-label\">Ship To Them Directly</p>\n                  <div className=\"text-body guest-address-section px-2 py-1 mt-1 d-flex\">\n                    <div>\n                      {this.props.stateRegistryInfo.user.defaultAddress.address1 ? <p>{this.props.stateRegistryInfo.user.defaultAddress.address1},</p> : null}\n                      {this.props.stateRegistryInfo.user.defaultAddress.address2 ? <p>{this.props.stateRegistryInfo.user.defaultAddress.address2},</p> : null}\n                      {this.props.stateRegistryInfo.user.defaultAddress.city ? <p>{this.props.stateRegistryInfo.user.defaultAddress.city},</p> : null}\n                      {this.props.stateRegistryInfo.user.defaultAddress.province ? <p>{this.props.stateRegistryInfo.user.defaultAddress.province},</p> : null}\n                      {this.props.stateRegistryInfo.user.defaultAddress.country ? <p>{this.props.stateRegistryInfo.user.defaultAddress.country} {this.props.stateRegistryInfo.user.defaultAddress.zip ? this.props.stateRegistryInfo.user.defaultAddress.zip : null}</p> : null}\n                    </div>\n                    <div className=\"ml-auto\"><a className=\"address-copy-link font-medium text-sm mt-1\" href=\"#\" onClick={(ev) => this.copyAddress(ev)}>Copy</a></div>\n                  </div>\n                </div>\n              </div> : null}\n            <div className=\"row col mt-4\">\n              <div className=\"col\">\n                <p className=\"text-sm mt-1\">Come back to M+A Registry to tell us if you bought this, so we can help keep track of all their gifts</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      )\n      modalPrimaryBtn = (\n        <Button\n          variant=\"primary\"\n          className=\"MA-gift-footer-btn px-4 py-1 font-medium text-body guest-footer-btn\"\n          disabled={this.state.email.length === 0 || (this.state.isBoughtThisAlready && (this.props.productBoughtAlreadyInfo.name.length === 0 || this.props.productBoughtAlreadyInfo.email.length === 0)) || (this.props.isGroupGift && Number(this.state.amount)) === 0 ? true : false}\n          onClick={() => this.submitDataHandler()}\n        >{!this.state.isBoughtThisAlready ? `Go To  ${this.props.data.item.store.storeName}` : 'Save & Close'}</Button>\n      )\n    } else if (this.state.currentView === 3) {\n      modalLeftView = (\n        <div className=\"col-7 mt-4\">\n          <div className=\"ml-3\">\n            <div className=\"row col\">\n              <div className=\"col\">\n                <p className=\"font-body font-medium\">Did you buy this gift?</p>\n                <p className=\"text-sm mt-1\">Well reserve this gift to make sure no one else tries to buy it until we confitm if youve bought this.</p>\n              </div>\n            </div>\n            <div className=\"row col\">\n              <div className=\"col\">\n                <p className=\"text-sm mt-5\">\n                  Still want to buy? <a className=\"guest-link font-medium\" href={this.props.data.item.storeItemUrl} target=\"_blank\">Return to Amazon</a>\n                </p>\n              </div>\n            </div>\n            {this.props.stateRegistryInfo.user.defaultAddress ?\n              <div className=\"row col mt-5\">\n                <div className=\"col m-a-input-container\">\n                  <p className=\"text-sm font-medium add-gift-store-label\">Ship To Them Directly</p>\n                  <div className=\"text-body guest-address-section px-2 py-1 mt-1 d-flex\">\n                    <div>\n                      {this.props.stateRegistryInfo.user.defaultAddress.address1 ? <p>{this.props.stateRegistryInfo.user.defaultAddress.address1},</p> : null}\n                      {this.props.stateRegistryInfo.user.defaultAddress.address2 ? <p>{this.props.stateRegistryInfo.user.defaultAddress.address2},</p> : null}\n                      {this.props.stateRegistryInfo.user.defaultAddress.city ? <p>{this.props.stateRegistryInfo.user.defaultAddress.city},</p> : null}\n                      {this.props.stateRegistryInfo.user.defaultAddress.province ? <p>{this.props.stateRegistryInfo.user.defaultAddress.province},</p> : null}\n                      {this.props.stateRegistryInfo.user.defaultAddress.country ? <p>{this.props.stateRegistryInfo.user.defaultAddress.country} {this.props.stateRegistryInfo.user.defaultAddress.zip ? this.props.stateRegistryInfo.user.defaultAddress.zip : null}</p> : null}\n                    </div>\n                    <div className=\"ml-auto\"><a className=\"address-copy-link font-medium text-sm mt-1\" href=\"#\" onClick={(ev) => this.copyAddress(ev)}>Copy</a></div>\n                  </div>\n                </div>\n              </div> : null}\n          </div>\n        </div>\n      )\n      modalPrimaryBtn = (\n        <Button\n          variant=\"primary\"\n          className=\"MA-gift-footer-btn px-4 py-1 font-medium text-body guest-footer-btn\"\n          disabled={(this.state.isBoughtThisAlready && (this.props.productBoughtAlreadyInfo.name.length === 0 || this.props.productBoughtAlreadyInfo.email.length === 0)) || (this.props.isGroupGift && Number(this.state.amount)) === 0 ? true : false}\n          onClick={!this.state.isBoughtThisAlready ? () => this.iBoughtThisAlready() : () => this.submitDataHandler()}\n        >{!this.state.isBoughtThisAlready ? 'Yes. I Bought It' : 'Save & Close'}</Button>\n      )\n      modalSecondaryBtn = (\n        <Button\n          variant=\"secondary\"\n          className=\"MA-gift-footer-btn px-3 py-1 font-medium text-body\"\n          onClick={() => this.modalCloseHandler()}\n        >No, I Didnt</Button>\n      )\n    }\n\n    // Body for modal\n    let modalBody = (\n      <>\n        {/* Give M+A Gift Model Body */}\n        {!this.state.isBoughtThisAlready ?\n          <div className=\"row add-gift-another-store\">\n            <div className=\"col\">\n              <div className=\"row\">\n                <>\n                  <div className=\"col-5 py-4 add-gift-image-select\">\n                    <div className=\"mr-3\">\n                      <ProductDetailsModel data={this.props.data} />\n                    </div>\n                  </div>\n                  {modalLeftView}\n                </>\n              </div>\n            </div>\n          </div>\n          :\n          <AlreadyBoughtProduct\n            data={this.props.data}\n            validBoughtThisAlreadyData={this.validBoughtThisAlreadyData}\n            onFocusHandler={this.onFocusBoughtThisAlreadyHandler}\n            fieldErrors={this.state.errors} />\n        }\n      </>\n    )\n\n    // Modal buttons\n    let modalFooterButtons = (\n      <>\n        {modalSecondaryBtn}\n        {modalPrimaryBtn}\n      </>\n    )\n\n    return (\n      <>\n        <Modal\n          show={this.props.show}\n          updateModal={this.state.updateModal}\n          title={this.state.modalTitle}\n          titleContent={this.modalTitleContent}\n          footer={modalFooterButtons}\n\t\t\t\t\tnoBodyPadding={true}\n\n          closeModal={this.props.close}>\n          {modalBody}\n        </Modal>\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    stateRegistryInfo: state.guestView.info,\n    productBoughtAlreadyInfo: state.guestView.alreadyBoughtProduct,\n    stateAddedProducts: state.guestView.product\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(withRouter(GiveGiftFromAnotherStore));","import React, { useState } from 'react'\nimport \"./GuestViewCard.scss\";\nimport {\n\tsortableHandle,\n} from 'react-sortable-hoc';\nimport { useSelector, useDispatch } from 'react-redux';\nimport Button from \"../../commons/components/button-component/ButtonComponent\";\nimport GiftStatusPill from \"../../commons/components/gift-status-pill/GiftStatusPill\";\nimport GiveMAGiftModel from \"modules/commons/components/give-MA-gift-model/GiveMAGiftModel\";\nimport { clearAlreadyBoughtProductInfo, clearCashContributedAlreadyInfo } from '../GuestViewAction';\nimport { M_A_STORE_NAME } from 'utils/constants';\nimport GiveGiftFromAnotherStore from \"modules/commons/components/give-gift-from-another-store/GiveGiftFromAnotherStore\";\n\n\nconst GuestViewCard = (props) => {\n\n\tconst dispatch = useDispatch();\n\tconst stateFilterApplied = useSelector(state => state.viewRegistry.viewFilterApplied.childFilter)\n\tconst [showMAGiftmodel, setMAGiftModel] = useState(false)\n\tconst [showAnotherStoreGiftmodel, setAnotherStoreGiftmodel] = useState(false)\n\tconst [isGroupGift, setIsGroupGift] = useState(false)\n\tconst [isCashAcceptedOnly, setIsCashAcceptedOnly] = useState(false)\n\tconst [modelTitle, setModelTitle] = useState('')\n\n\tconst modalCloseHandler = () => {\n\t\tdispatch(clearAlreadyBoughtProductInfo())\n\t\tdispatch(clearCashContributedAlreadyInfo())\n\t\tsetMAGiftModel(false)\n\t\tsetAnotherStoreGiftmodel(false)\n\t}\n\n\t// Handle drag\n\t// TODO: Change Draggable icon\n\tconst DragHandle = sortableHandle(() => <i\n\t\tclassName={[\"ml-4 drag-icon m-a-popover m-a-popover-top-right\", (props.disabledDrag || stateFilterApplied.length !== 0) ? \"disabled-drag\" : \"\"].join(\" \")}>\n\t\t<div className=\"m-a-popover-content drag-drop-popover w-auto px-3 py-2\">\n\t\t\t<p className=\"text-sm font-weight-normal m-a-popover-content-desc\">Rearrange</p>\n\t\t</div>\n\t</i>);\n\n\tconst openModelHandler = () => {\n\t\t// TODO: Conditions for different data model\n\t\t// For ma product which is not Grop Gift\n\t\tif (props.data.item.store.storeName === M_A_STORE_NAME && !props.data.isGroupGift) {\n\t\t\tsetMAGiftModel(true)\n\t\t}\n\t\t// For Group Gift\n\t\telse if (props.data.isGroupGift) {\n\t\t\tsetIsGroupGift(true)\n\t\t\tsetMAGiftModel(true)\n\t\t}\n\t\telse if (props.data.isCashAcceptedOnly) {\n\t\t\tsetIsCashAcceptedOnly(true)\n\t\t\tsetMAGiftModel(true)\n\t\t}\n\t\telse if (props.data.item.store.storeName !== M_A_STORE_NAME) {\n\t\t\tsetAnotherStoreGiftmodel(true)\n\t\t}\n\t\tsetModelTitle('Give this gift')\n\t\t// modelTitle = 'Give This Gift'\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{!props.data.isPurchased ?\n\t\t\t\t<>\n\t\t\t\t\t<div className=\"added-card py-5 pr-2\" onClick={() => openModelHandler()}>\n\t\t\t\t\t\t<div className=\"row pl-3\">\n\t\t\t\t\t\t\t<div className=\"col-6 col-md-2 mb-3 mb-md-0 guest-card-image\">\n\t\t\t\t\t\t\t\t{props.data?.item.imageUrl ?\n\t\t\t\t\t\t\t\t\t<img className=\"product-img d-block mx-auto\" src={props.data?.item.imageUrl} alt={props.data?.title} />\n\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t<div className=\"guest-added-card-no-product-image\" />\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t{props.data.mostWanted ?\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName=\"d-flex align-items-center guest-must-have added-gift-must-have-btn px-1 guest-added-gift-must-have-active\">\n\t\t\t\t\t\t\t\t\t\t<i className=\"icon mr-1 d-block heart-fill\" />\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm added-gift-must-have-text\">Must Have</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t: <></>}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"col-12 col-md\">\n\t\t\t\t\t\t\t\t{/* <div className=\"text-sm category\">{props.data.registryCategories[0].category.categoryName}</div> */}\n\t\t\t\t\t\t\t\t<h2>{props.data.title}</h2>\n\t\t\t\t\t\t\t\t<div className=\"d-flex mt-2\">\n\t\t\t\t\t\t\t\t\t<div className=\"\">${props.data.item.price}</div>\n\t\t\t\t\t\t\t\t\t{/*/!* TODO: Add Strikeout price dynamic *!/*/}\n\t\t\t\t\t\t\t\t\t{/*<div className=\"text-sm my-auto ml-1 strick-price\">$257.99</div>*/}\n\t\t\t\t\t\t\t\t\t{/* {props.data.quantity > 1 ?\n\t\t\t\t\t\t\t\t<div className=\"ml-4 text-body d-flex\">\n\t\t\t\t\t\t\t\t\tQty:{props.data.quantity}\n\t\t\t\t\t\t\t\t\t<div className=\"quantity-mul-text\"> (${props.data.item.price} * {props.data.quantity})</div>\n\t\t\t\t\t\t\t\t</div> : <></>} */}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"d-flex mt-3 flex-wrap\">\n\t\t\t\t\t\t\t\t\t{props.data.quantityStatus.purchased_quantity && !props.data.item.isCashFund ?\n\t\t\t\t\t\t\t\t\t\t<GiftStatusPill className=\"mr-1\" variant=\"purchased\" text={props.data.quantityStatus.purchased_quantity + \" Purchased\"} />\n\t\t\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t\t\t\t{props.data.quantityStatus.reserved_quantity && !props.data.item.isCashFund ?\n\t\t\t\t\t\t\t\t\t\t<GiftStatusPill className=\"mr-1\" variant=\"reserved\" text={props.data.quantityStatus.reserved_quantity + \" Reserved\"} />\n\t\t\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t\t\t\t{props.data.quantityStatus.still_needed && !props.data.item.isCashFund ?\n\t\t\t\t\t\t\t\t\t\t<GiftStatusPill className=\"mr-1\" variant=\"default\" text={`${props.data.quantityStatus.still_needed} ${props.data.quantityStatus.purchased_quantity === 0 ? \" Requested\" : \" Still Needed\"}`} />\n\t\t\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t\t\t\t{props.data.isGroupGift ?\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"guest-toggle-pills px-1 mr-3 d-flex align-items-center mt-md-2 mt-lg-0\">\n\t\t\t\t\t\t\t\t\t\t\t\t<i className=\"guest-icon-active mr-1\" />\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm guest-icon-text\">Group Gift</span>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t{props.data.item.hideTotal ? null :\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"mt-md-2 mt-lg-0\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm font-medium received-amount\">Received ${props.data.purchasedRegistryItem.length ? Math.round((props.data.purchasedRegistryItem[0].groupGift.amountReceived % props.data.item.price) * 100) / 100 : 0} </span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm total-amount\">of ${Math.round(props.data.item.price * props.data.quantityStatus.still_needed * 100) / 100}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"group-gift-background\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"group-gift-progress mw-100\" style={{ width: `${props.data.purchasedRegistryItem.length ? (props.data.purchasedRegistryItem[0].groupGift.amountReceived % props.data.item.price * 100) / (props.data.item.price * props.data.quantity) : 0}%` }} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className={[\n\t\t\t\t\t\t\t\tprops.draggable ? \"col-12 col-md-4 give-this-gift-button-container\" : \"col-12 col-md-3 give-this-gift-button-container\",\n\t\t\t\t\t\t\t].join(\" \")}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div className=\"d-flex align-items-baseline justify-content-end mr-1\">\n\t\t\t\t\t\t\t\t\t<Button variant=\"secondary\" className=\"give-this-gift-btn font-medium text-body py-1 px-3 mr-3\"\n\t\t\t\t\t\t\t\t\t\tonClick={() => openModelHandler()}\n\t\t\t\t\t\t\t\t\t>Give This Gift</Button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{/* TODO: change category */}\n\t\t\t\t\t<div className=\"row\">\n\t\t\t\t\t\t<div className=\"col\">\n\t\t\t\t\t\t\t{props.data.registryCategories.length > 1 ?\n\t\t\t\t\t\t\t\tprops.data.registryCategories.map(category =>\n\t\t\t\t\t\t\t\t\tprops.data.registryCategories[0].id !== category.id ?\n\t\t\t\t\t\t\t\t\t\t<div className=\"text-body font-medium p-6 added-card-other-category\" onClick={() => openModelHandler()}>\n\t\t\t\t\t\t\t\t\t\t\tYou have added {props.data.item.quantity > 1 ? props.data.item.quantity : null} {category.category.parentCategory && category.category.parentCategory.parentCategory !== null ? category.category.parentCategory.categoryName + \" (\" + category.category.categoryName + \")\" : category.category.categoryName} as part of <a className=\"title-link\" tabIndex=\"true\">{props.data.title}</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</> :\n\t\t\t\t<div className=\"guest-purchased-card py-3 pl-6\">\n\t\t\t\t\t<p className=\"guest-purchased-card-title font-medium\">{props.data.title}</p>\n\t\t\t\t\t{props.data.quantityStatus.purchased_quantity ?\n\t\t\t\t\t\t<GiftStatusPill className=\"mr-1\" variant=\"purchased\" text={props.data.quantityStatus.purchased_quantity + \" Purchased\"} />\n\t\t\t\t\t\t: null}\n\t\t\t\t</div>\n\t\t\t}\n\t\t\t{showMAGiftmodel ?\n\t\t\t\t<GiveMAGiftModel\n\t\t\t\t\tshow={showMAGiftmodel}\n\t\t\t\t\tclose={modalCloseHandler}\n\t\t\t\t\ttitle={modelTitle}\n\t\t\t\t\tdata={props.data}\n\t\t\t\t\tisGroupGift={isGroupGift}\n\t\t\t\t\tisCashAcceptedOnly={isCashAcceptedOnly}\n\t\t\t\t\tupdateGuestViewProduct={props.updateGuestViewProduct}\n\t\t\t\t/> : null}\n\n\t\t\t{showAnotherStoreGiftmodel ?\n\t\t\t\t<GiveGiftFromAnotherStore\n\t\t\t\t\tshow={showAnotherStoreGiftmodel}\n\t\t\t\t\tclose={modalCloseHandler}\n\t\t\t\t\ttitle={modelTitle}\n\t\t\t\t\tdata={props.data}\n\t\t\t\t\tupdateGuestViewProduct={props.updateGuestViewProduct}\n\t\t\t\t/> : null}\n\t\t</>\n\t)\n}\n\nexport default GuestViewCard","import React, { useEffect, useState } from \"react\";\nimport ViewRegistryHeader from \"../view-registry-header/ViewRegistryHeader\";\nimport AddedCard from \"modules/commons/components/added-card/AddedCard\";\nimport { toggleMustHaveProduct, removeProductFromCartHandler, getProducts, updateViewRegistryPosition, getCategories } from \"utils/commonFunction\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport SortFilterSection from '../../components/sort-filter-section/SortFilterSection';\nimport { setViewRegistryProducts, clearViewFilter, setViewFilterCategory, setChildViewFilter } from '../../ViewRegistryActions';\nimport {\n  sortableContainer,\n  sortableElement,\n} from 'react-sortable-hoc';\nimport arrayMove from 'array-move';\nimport './ViewRegistryHome.scss';\nimport ViewFilter from \"modules/view-registry/components/view-filter/ViewFilter\";\nimport Button from \"modules/commons/components/button-component/ButtonComponent\";\nimport { FILTERS } from \"utils/constants\"\nimport { MEDIA_URL_PREFIX } from \"utils/constants\";\nimport { graphQL } from 'api/axios';\nimport { GET_PRODUCTS } from 'api/queries';\nimport GuestViewCard from \"modules/guest-view/components/GuestViewCard\";\n\nconst ViewRegistryHome = () => {\n\n  const dispatch = useDispatch()\n  let stateAddedProducts = useSelector(state => state.myRegistry.addedProducts)\n  let stateViewRegistryProducts = useSelector(state => state.viewRegistry.viewRegistryProducts)\n  const activeSortFilterState = useSelector(state => state.viewRegistry.activeSortFilter)\n  const stateFilterApplied = useSelector(state => state.viewRegistry.viewFilterApplied.childFilter)\n  const stateRegistryInfo = useSelector(state => state.registry.info)\n  const stateCategoriesInfo = useSelector(state => state.myRegistry.checkList)\n  const stateGuestViewRegistry = useSelector(state => state.viewRegistry.guestViewRegistry)\n  let filterCountState = useSelector(state => state.myRegistry.filterCount)\n  const [localAddedProductState, handleFilterProductChange] = useState([])\n  let [filterCategoryLimit, setFilterCategoryLimit] = useState([])\n\n  // Constant variables for filters\n  const AVAILABLE = \"available\"\n  const RESERVED = \"reserved\"\n  const PURCHASED = \"purchased\"\n  const PRICE_1 = \"price-1\"\n  const PRICE_2 = \"price-2\"\n  const PRICE_3 = \"price-3\"\n  const MONICA_AND_ANDY = \"monicaandandy\"\n  const ELSEWHERE = \"elsewhere\"\n\n  // Updating product count in filter categories\n  const updateFilterList = (registryItemsAnalysisCount, categoryData, filterApplied) => {\n\n    let newFilterList = [\n      {\n        id: \"giftStatus\",\n        display: \"Gift Status\",\n        child: [\n          {\n            id: AVAILABLE,\n            display: FILTERS.AVAILABLE_DISPLAY,\n            count: registryItemsAnalysisCount.totalAvailable\n          },\n          {\n            id: RESERVED,\n            display: FILTERS.RESERVED_DISPLAY,\n            count: registryItemsAnalysisCount.totalReserved\n          },\n          {\n            id: PURCHASED,\n            display: FILTERS.PURCHASED_DISPLAY,\n            count: registryItemsAnalysisCount.totalPurchased\n          }\n        ]\n      },\n      {\n        id: \"categories\",\n        display: FILTERS.CATEGORIES_DISPLAY,\n        // limit: getLimitOfFliter(\"categories\") ? getLimitOfFliter(\"categories\") : 6,\n        child: [...stateCategoriesInfo].filter(category => {\n          let id = category.category.id\n          let count = categoryData[id]\n          if (count > 0) {\n            return true\n          }\n        }).map(category => {\n          let newCategory = { ...category }\n          let id = category.category.id\n          newCategory.id = category.category.id\n          newCategory['display'] = newCategory.categoryName\n          newCategory['count'] = categoryData[id]\n          return newCategory\n        })\n      },\n      {\n        id: \"price\",\n        display: FILTERS.PRICE_DISPLAY,\n        child: [\n          {\n            id: PRICE_1,\n            display: FILTERS.PRICE_DISPLAY_1,\n            count: registryItemsAnalysisCount.under50\n          },\n          {\n            id: PRICE_2,\n            display: FILTERS.PRICE_DISPLAY_2,\n            count: registryItemsAnalysisCount.between50100\n          },\n          {\n            id: PRICE_3,\n            display: FILTERS.PRICE_DISPLAY_3,\n            count: registryItemsAnalysisCount.moreThan100\n          }\n        ]\n      },\n      {\n        id: \"store\",\n        display: FILTERS.STORE_DISPLAY,\n        child: [\n          {\n            id: MONICA_AND_ANDY,\n            display: FILTERS.MONICA_AND_ANDY_DISPLAY,\n            count: registryItemsAnalysisCount.maStoreItems\n          },\n          {\n            id: ELSEWHERE,\n            display: FILTERS.ELSEWHERE_DISPLAY,\n            count: registryItemsAnalysisCount.otherStoreItems\n          },\n        ]\n      },\n\n    ]\n\n    // Removing All other applied filters\n    let allChildFilterCat = []\n    for (let filterCat of newFilterList) {\n      for (let childCat of filterCat.child) {\n        allChildFilterCat.push(childCat)\n      }\n    }\n    let finalFilterApplied = []\n    for (let item of filterApplied) {\n      for (let ele of allChildFilterCat) {\n        if(ele.id === item && ele.count > 0) {\n          finalFilterApplied.push(item)\n        }\n      }\n    }\n    dispatch(setChildViewFilter(finalFilterApplied))\n    dispatch(setViewFilterCategory(newFilterList))\n    return newFilterList\n  }\n\n  const getFiltersApplied = (stateFilterApplied, activeSortFilterState) => {\n    const childFilterArray = [...stateFilterApplied]\n    let filterApplied = {}\n    // For Gift Status\n    if (childFilterArray.includes(AVAILABLE)) {\n      filterApplied.isAvailable = true\n    }\n    if (childFilterArray.includes(RESERVED)) {\n      filterApplied.isReserved = true\n    }\n    if (childFilterArray.includes(PURCHASED)) {\n      filterApplied.isPurchased = true\n    }\n\n    // For Sort\n    if (activeSortFilterState.sortId === 2) {\n      filterApplied.sortBy = 'item__price'\n    } else if (activeSortFilterState.sortId === 3) {\n      filterApplied.sortBy = '-item__price'\n    }\n\n    // For Store\n    let store = []\n    if (childFilterArray.includes(MONICA_AND_ANDY)) {\n      store.push(MONICA_AND_ANDY)\n    }\n    if (childFilterArray.includes(ELSEWHERE)) {\n      store.push(ELSEWHERE)\n    }\n    if (store.length) {\n      filterApplied.store = store\n    }\n\n    let lessThanEqual = 0\n    let greaterThanEqual = 0\n    let hasPriceFilter = false\n    // For Price\n    if (childFilterArray.includes(PRICE_1) &&\n      childFilterArray.includes(PRICE_2) &&\n      childFilterArray.includes(PRICE_3)) {\n      greaterThanEqual = 0\n      hasPriceFilter = true\n    }\n    else if (childFilterArray.includes(PRICE_1) &&\n      childFilterArray.includes(PRICE_2)) {\n      lessThanEqual = 100\n      hasPriceFilter = true\n    }\n    else if (childFilterArray.includes(PRICE_1) &&\n      childFilterArray.includes(PRICE_3)) {\n      lessThanEqual = 49\n      greaterThanEqual = 100\n      hasPriceFilter = true\n    }\n    else if (childFilterArray.includes(PRICE_2) &&\n      childFilterArray.includes(PRICE_3)) {\n      greaterThanEqual = 50\n      hasPriceFilter = true\n    }\n    else if (childFilterArray.includes(PRICE_1)) {\n      lessThanEqual = 49\n      hasPriceFilter = true\n    }\n    else if (childFilterArray.includes(PRICE_2)) {\n      greaterThanEqual = 50\n      lessThanEqual = 100\n      hasPriceFilter = true\n    }\n    else if (childFilterArray.includes(PRICE_3)) {\n      greaterThanEqual = 100\n      hasPriceFilter = true\n    }\n    if (hasPriceFilter) {\n      filterApplied.price_Lte = lessThanEqual\n      filterApplied.price_Gte = greaterThanEqual\n    }\n\n    let categories = []\n    // For categories\n    for (let cat of [...stateCategoriesInfo]) {\n      if (childFilterArray.includes(cat.category.id)) {\n        categories.push(cat.category.id)\n      }\n    }\n    if (categories.length) {\n      filterApplied.categories = categories\n    }\n\n    return filterApplied\n  }\n\n  const toggleMustHave = (ev, card, dispatch) => {\n    ev.stopPropagation()\n    toggleMustHaveProduct(card, dispatch)\n  }\n\n  const SortableItem = sortableElement(({ card, index }) => (\n    <li className=\"card-list-item\">\n      <AddedCard\n        data={card} key={\"addedCard\" + index}\n        isViewCard={true}\n        toggleMustHave={(e) => toggleMustHave(e, card, dispatch)}\n        draggable={true}\n        disabledDrag={card.disabledDrag}\n        removeProductFromCartHandler={() => removeProductFromCartHandler(card, stateRegistryInfo.id, dispatch)}\n      />\n    </li>\n  ));\n\n  let onSortEnd = ({ oldIndex, newIndex }) => {\n    let itemsOldPosition = arrayMove([...stateViewRegistryProducts], oldIndex, oldIndex)\n    let items = arrayMove([...stateViewRegistryProducts], oldIndex, newIndex)\n    dispatch(setViewRegistryProducts(items))\n    updateViewRegistryPosition(stateRegistryInfo.id, items, itemsOldPosition, dispatch)\n  };\n\n  const SortableContainer = sortableContainer(({ children }) => {\n    return <ul className=\"p-0\">{children}</ul>;\n  });\n\n  const getSortedProductsByFilters = async (addedProducts, filterApplied) => {\n    let finalFilterProduct = []\n    let filtersApplied = getFiltersApplied(filterApplied, activeSortFilterState)\n    let reqData = {\n      query: GET_PRODUCTS,\n      variables: {\n        registryId: stateRegistryInfo.id,\n        ...filtersApplied\n      }\n    }\n\n    await graphQL(reqData).then(res => {\n      if (res.data.data.registryItems) {\n        // Storing Product of GuestView\n        let responseData = [...res.data.data.registryItems.registryItems.edges].map(item => {\n          let newItemObj = { ...item.node }\n          delete newItemObj.registryitemImage;\n          if (item.node.registryitemImage.length > 0) {\n            newItemObj.item.imageUrl = (MEDIA_URL_PREFIX.LOCAL_MEDIA_URL ? MEDIA_URL_PREFIX.LOCAL_MEDIA_URL : \"\") + item.node.registryitemImage[0].image;\n          }\n          return newItemObj;\n        })\n        let finalData = responseData.filter(product => product.registryCategories.length > 0)\n        updateFilterList({ ...res.data.data.registryItems.registryItemsAnalysisCount }, { ...res.data.data.registryItems.categoryData }, filterApplied)\n\n        finalFilterProduct = finalData\n        return finalData\n      }\n    }).catch(err => {\n\n      if (err.response && err.response.data.errors) {\n        for (const error of err.response.data.errors) {\n          // TODO: Implement toast if necessary\n          console.log(error.message)\n        }\n      }\n    })\n    return finalFilterProduct\n  }\n\n  const getParentCategory = (id) => {\n    return [...stateCategoriesInfo].find((parentCategory) => parentCategory.subCategories.find((subCategory) => subCategory.id === id))\n  }\n\n  const getSortedFilteredProducts = async (addedProducts, activeSortFilterState, viewRegistryProducts, registryInfo, filterApplied = [...stateFilterApplied]) => {\n    let sortedProducts = [];\n    let sortedData = null;\n    let newSortedProducts = null\n    if (filterApplied.length > 0) {\n      newSortedProducts = await getSortedProductsByFilters(addedProducts, filterApplied)\n    }\n    else {\n      await updateFilterList({ ...filterCountState.registryItemsAnalysisCount }, { ...filterCountState.categoryData }, filterApplied)\n      newSortedProducts = [...addedProducts]\n    }\n\n    if (activeSortFilterState.sortId === 1) {\n      if (filterApplied.length > 0) {\n        sortedData = newSortedProducts\n      }\n      else if (registryInfo.isFeatured) {\n        sortedData = viewRegistryProducts ? [...viewRegistryProducts] : [];\n      }\n      else {\n        sortedData = sortByMustHave([...newSortedProducts])\n        if (sortedData.length > 0) {\n          let viewRegistryProductsId = sortedData.map((productData, index) => {\n            return { 'id': productData.id }\n          })\n        }\n      }\n    }\n\n    else if (activeSortFilterState.sortId === 2) {\n      sortedData = sortByLowToHigh([...newSortedProducts])\n    }\n    else if (activeSortFilterState.sortId === 3) {\n      sortedData = sortByHighToLow([...newSortedProducts])\n    }\n\n    let viewRegistryProductsId = sortedData.map((productData, index) => {\n      return { 'id': productData.id }\n    })\n\n    for (let product of viewRegistryProductsId) {\n      for (let addProduct of addedProducts) {\n        if (product.id === addProduct.id) {\n          sortedProducts.push(addProduct);\n          break;\n        }\n      }\n    }\n    handleFilterProductChange([...sortedProducts])\n    return sortedProducts;\n  }\n\n  const sortByMustHave = (productList) => {\n    return productList.sort(function (a, b) { return b.mostWanted - a.mostWanted });\n  }\n\n  const sortByFeatured = (productList) => {\n    return productList.sort(function (a, b) { return a.isFeatured - b.isFeatured });\n  }\n\n  const sortByLowToHigh = (productList) => {\n    return productList.sort((a, b) => { return a.item.price - b.item.price });\n  }\n\n  const sortByHighToLow = (productList) => {\n    return productList.sort((a, b) => { return b.item.price - a.item.price });\n  }\n\n  //Clear filter state\n  const clearFilterHandler = (ev) => {\n    ev.preventDefault()\n    dispatch(clearViewFilter())\n  }\n\n  useEffect(() => {\n    let sortedData = sortByFeatured([...stateAddedProducts])\n    let viewRegistryProducts = sortedData.map((productData, index) => {\n      return { 'id': productData.id }\n    })\n    dispatch(setViewRegistryProducts(viewRegistryProducts))\n  }, [stateAddedProducts])\n\n  useEffect(() => {\n    let filteredSortProducts = getSortedFilteredProducts(stateAddedProducts, activeSortFilterState, stateViewRegistryProducts, stateRegistryInfo)\n    filteredSortProducts.then(product => {\n      handleFilterProductChange(product)\n    })\n  }, [stateAddedProducts, activeSortFilterState, stateViewRegistryProducts, stateRegistryInfo])\n\n  // TODO: Remove comments if needed\n  // let filteredSortProducts = getSortedFilteredProducts(stateAddedProducts, activeSortFilterState, stateViewRegistryProducts,  stateRegistryInfo)\n\n  return (\n    <>\n      <ViewRegistryHeader />\n      <div className=\"container mt-7\">\n        <div className=\"row\">\n          <div className=\"col-12 col-md-2 d-none d-md-inline-block\">\n            <ViewFilter \n              setFilterhandler={(filterApplied) => { getSortedFilteredProducts(stateAddedProducts, activeSortFilterState, stateViewRegistryProducts, stateRegistryInfo, filterApplied) }}\n            />\n          </div>\n          <div className=\"col\"></div>\n          <div className=\"col-12 col-md-9 px-3 px-mb-0\">\n\n            {/* Top Filter Section */}\n            <SortFilterSection \n              productCount={localAddedProductState.length} \n              setFilterhandler={() => { getSortedFilteredProducts(stateAddedProducts, activeSortFilterState, stateViewRegistryProducts, stateRegistryInfo) }}\n            />\n            {/* Added Products */}\n            {!stateGuestViewRegistry ?\n              localAddedProductState.length > 0 ?\n                <div className=\"mt-2 mt-md-5\">\n                  <SortableContainer onSortEnd={onSortEnd} helperClass=\"drag-add-card\" axis=\"y\" lockAxis=\"y\" useDragHandle>\n                    {localAddedProductState.map((card, index) =>\n                      <SortableItem key={`item-${index}`} index={index} card={{ ...card, disabledDrag: activeSortFilterState.sortId !== 1 }} disabled={activeSortFilterState.sortId !== 1 || stateFilterApplied.length !== 0} />\n                    )}\n                  </SortableContainer>\n                </div> :\n                <div className=\"d-flex flex-column empty-filter mt-6 pb-8\">\n                  <div className=\"font-body empty-filter-title text-center mx-auto mt-10\">\n                    <p>We couldnt find any gifts that matches your filters...</p>\n                    <p>Please try clearing Filters to view gifts.</p>\n                  </div>\n                  <div className=\"mx-auto mt-3\">\n                    <Button\n                      variant=\"primary\"\n                      className=\"px-3 py-1 font-medium empty-filter-title text-body\"\n                      onClick={(ev) => clearFilterHandler(ev)}\n                    >\n                      Clear Filters\n                  </Button>\n                  </div>\n                </div> :\n              // Guest View Cards\n              localAddedProductState.length > 0 ?\n                localAddedProductState.map((card, index) =>\n                  <GuestViewCard\n                    data={card} key={\"addedCard\" + index}\n                  />) : null\n            }\n          </div>\n        </div>\n      </div>\n    </>\n  )\n}\n\nexport default ViewRegistryHome;","import React from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\nimport route from \"utils/routes\";\nimport ViewRegistryHome from \"./containers/view-registry-home/ViewRegistryHome\";\n\nclass ViewRegistry extends React.Component {\n    render() {\n        return (\n            <Switch>\n                <Route exact path={route.VIEW_REGISTRY.HOME} component={ViewRegistryHome} />\n            </Switch>\n        )\n    }\n}\n\nexport default ViewRegistry;","import React from \"react\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport 'react-toastify/dist/ReactToastify.css';\nimport './Toast.scss';\n\nconst Toast = () => {\n  const closeToastMessage = (parentId) => {\n    toast.dismiss(parentId);\n  }\n\n  return (\n    <ToastContainer\n      position=\"top-center\"\n      className=\"m-a-toast-container\"\n      toastClassName=\"m-a-toast\"\n      autoClose={4000}\n      hideProgressBar={true}\n      newestOnTop={true}\n      draggable={false}\n      closeOnClick={false}\n      closeButton={<i className=\"icon-close m-a-toast-close\" onClick={(event) => closeToastMessage(event.target.parentElement.id)} />}\n    />\n  )\n}\n\nexport default Toast;","import React from \"react\";\nimport \"./TodoWidget.scss\";\nimport {connect} from \"react-redux\";\nimport {getTodoList} from \"../../../../utils/commonFunction\";\n\nclass TodoWidget extends React.Component {\n\n  performTodoAction = todo => {\n    //  Perform action related to to-do\n    if (todo.redirect){\n      window.open(todo.redirectUrl, \"_self\")\n    }\n  }\n\n  render() {\n    if (this.props.stateTodo.length <= 0 && this.props.stateRegistryInfo.id) {\n      getTodoList(this.props.stateRegistryInfo.id, this.props.dispatch)\n    }\n\n    return (\n      <div className=\"baby-registry-todo-widget\">\n        {this.props.stateTodo.length > 0 ?\n          (\n            //  When there is To-do\n            <div className=\"baby-registry-todo-section\">\n              <button className=\"baby-steps-button d-flex align-items-center pt-1 pt-md-3 pb-0 pb-md-3 pl-1 pl-md-4 pr-1 pr-md-8\">\n                <i className=\"baby-steps-icon\"/>\n                <div className=\"ml-5 baby-steps-text\">\n                  <p className=\"text-body font-medium\">{this.props.stateTodo.length} Baby Steps</p>\n                  <p className=\"text-sm text-left\">to take next!</p>\n                </div>\n              </button>\n\n              <div className=\"baby-steps-todo-content p-2\">\n                {this.props.stateTodo.map(todo => (\n                  <div className=\"baby-step-todo d-flex justify-content-between py-2 align-items-center\">\n                    <p className=\"text-body mr-3\">{todo.label}</p>\n                    <button className=\"baby-step-action-btn\"\n                            onClick={() => this.performTodoAction(todo)}/>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )\n          :\n          (\n            //  When there is no To-do\n            <div className=\"baby-registry-no-todo-section d-flex align-items-center py-4\">\n              <i className=\"no-todo-icon\"/>\n              <div className=\"ml-2\">\n                <p className=\"text-body font-medium\">Great job!</p>\n                <p className=\"text-sm\">More to come, soon.</p>\n              </div>\n            </div>\n          )\n        }\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  stateTodo: state.registry.todo,\n  stateRegistryInfo: state.registry.info\n})\n\nexport default connect(\n  mapStateToProps\n)(TodoWidget);","import React from \"react\";\nimport \"./Filters.scss\";\nimport {connect} from 'react-redux';\nimport CheckBox from \"../../../commons/components/check-box/CheckBox\";\nimport {setTrackGiftsFilters} from \"../../TrackGiftsAction\";\nimport {getTrackGiftsProduct} from \"../../../../utils/commonFunction\";\nimport defaultData from \"data/ReducerDefaultData.json\"\n\nclass Filters extends React.Component {\n\n  filterChangeHandler = async filterId => {\n    let allUnselected = true\n    let newFilters = this.props.stateFilters.map(filter => {\n      let newFilter = {...filter}\n      if (newFilter.id === filterId) {\n        newFilter.selected = !newFilter.selected\n      }\n      if (newFilter.count > 0 && newFilter.selected) {\n        allUnselected = false\n      }\n      return newFilter\n    })\n\n    // Resetting filter to default when all filter are unselected\n    if (allUnselected){\n      newFilters = defaultData.trackGifts.filters\n    }\n\n    await this.props.dispatch(setTrackGiftsFilters(newFilters))\n    getTrackGiftsProduct(true, newFilters, this.props.stateTrackGiftsProducts, this.props.stateTrackGiftsPagination, this.props.stateTrackGiftsView, this.props.stateRegistryInfo, this.props.stateTrackGiftsSearch, this.props.dispatch)\n  }\n\n  render() {\n    return (\n      <div className=\"track-gifts-filters\">\n        <p className=\"text-sm\">Filters</p>\n        <div className=\"mt-3\">\n          {this.props.stateFilters.map(filter => (\n            filter.count > 0 ?\n              <CheckBox\n                display={filter.text}\n                count={filter.count}\n                checked={filter.selected ? \"checked\" : \"\"}\n                id={`trackGiftFilter-${filter.id}`}\n                className=\"mb-3\"\n                textClass=\"track-gifts-filter-text\"\n                changeHandler={() => this.filterChangeHandler(filter.id)}\n              />\n              :\n              null\n          ))}\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  stateFilters: state.trackGifts.filters,\n  stateTrackGiftsView: state.trackGifts.activeView,\n  stateTrackGiftsProducts: state.trackGifts.products,\n  stateTrackGiftsPagination: state.trackGifts.paginationInfo,\n  stateRegistryInfo: state.registry.info,\n  stateTrackGiftsSearch: state.trackGifts.search\n})\n\nexport default connect(\n  mapStateToProps\n)(Filters);","import React from \"react\";\nimport \"./ThankYouList.scss\"\nimport {downloadThankYouList} from \"../../../../api/axios\";\nimport {connect} from 'react-redux';\nimport {withRouter} from \"react-router\";\n\nclass ThankYouList extends React.Component {\n\n  componentDidMount() {\n    let queryParams = new URLSearchParams(window.location.search)\n    if (queryParams.has('download-thank-you-list')) {\n      this.downloadClickHandler()\n      this.setState({\n        showShareRegistry: true\n      })\n      queryParams.delete('download-thank-you-list')\n      this.props.history.replace({\n        search: queryParams.toString(),\n      })\n    }\n  }\n\n  saveData = (function () {\n    const a = document.createElement(\"a\");\n    document.body.appendChild(a);\n    a.style = \"display: none\";\n    return function (data, fileName) {\n      const blob = new Blob([data], {type: \"octet/stream\"}),\n        url = window.URL.createObjectURL(blob);\n      a.href = url;\n      a.download = fileName;\n      a.click();\n      window.URL.revokeObjectURL(url);\n    };\n  }());\n\n  downloadClickHandler = (ev = null) => {\n    if (ev) {\n      ev.preventDefault()\n    }\n    downloadThankYouList(this.props.stateRegistryInfo.id).then(res => {\n      if (res.data) {\n        // Converting csv response to downloaded file\n        this.saveData(res.data, `${this.props.stateRegistryInfo.displayName}-thank-you-list.csv`);\n      }\n\n    }).catch(err => {\n      console.error({...err.response.data})\n    })\n  }\n\n  render() {\n    return (\n      <div className=\"track-gifts-thank-you-list p-4 mr-0 mr-md-5\">\n        <img src=\"https://raw.githack.com/HetPatel-Aubergine/testCDNRepo/master/icons/file_heart.svg\"\n             alt=\"Thank you list\"/>\n        <p className=\"mt-2 text-body font-medium\">Thank you list</p>\n        <p className=\"mt-1 text-sm track-gifts-thank-you-desc\">Let your gift-givers know that you are thankful to\n          them.</p>\n        <a href=\"#\" onClick={(ev) => this.downloadClickHandler(ev)}\n           className=\"mt-1 track-gifts-thank-you-link text-sm\">Download</a>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  stateRegistryInfo: state.registry.info\n})\n\nexport default connect(\n  mapStateToProps\n)(withRouter(ThankYouList));","import React from \"react\";\nimport ViewBy from \"../../components/view-by/ViewBy\";\nimport Filters from \"../../components/filters/Filters\";\nimport ThankYouList from \"../../components/thank-you-list/ThankYouList\";\n\nclass TrackGiftsSidebar extends React.Component {\n  render() {\n    return (\n      <>\n        <ViewBy/>\n        <div className=\"mt-4\">\n          <Filters/>\n        </div>\n        <div className=\"mt-4 d-none d-md-inline-block\">\n          <ThankYouList />\n        </div>\n      </>\n    );\n  }\n}\n\nexport default TrackGiftsSidebar;","import React from \"react\";\nimport \"./Search.scss\";\nimport {connect} from \"react-redux\";\nimport {setTrackGiftsSearch} from \"../../TrackGiftsAction\";\nimport {getTrackGiftsProduct} from \"../../../../utils/commonFunction\";\n\nclass Search extends React.Component {\n  inputRef = React.createRef()\n  inputContainer = React.createRef()\n\n  applySearch = () => {\n    let searchState = {...this.props.stateTrackGiftsSearch}\n    searchState.searched = true\n    getTrackGiftsProduct(true, this.props.stateTrackGiftsFilters, this.props.stateTrackGiftsProducts, this.props.stateTrackGiftsPagination, this.props.stateTrackGiftsView, this.props.stateRegistryInfo, this.props.stateTrackGiftsSearch, this.props.dispatch)\n    this.props.dispatch(setTrackGiftsSearch(searchState))\n    if (this.props.componentRef) {\n      this.props.componentRef.current.classList.toggle(\"track-gifts-show-search-dialog\")\n    }\n  }\n\n  searchInputChangeHandler = async () => {\n    if (this.inputRef.current && this.inputContainer.current) {\n      let searchInput = this.inputRef.current\n      if (searchInput.value.length > 0) {\n        if (!this.inputContainer.current.classList.contains(\"track-gifts-search-container-focus\")) {\n          //Adding class to increase width\n          this.inputContainer.current.classList.add(\"track-gifts-search-container-focus\")\n        }\n      }\n\n      await this.props.dispatch(setTrackGiftsSearch({\n        searched: false,\n        searchText: searchInput.value\n      }))\n    }\n  }\n\n  searchInputFocusHandler = () => {\n    if (this.inputContainer.current) {\n      if (!this.inputContainer.current.classList.contains(\"track-gifts-search-container-focus\")) {\n        //Adding class to increase width\n        this.inputContainer.current.classList.add(\"track-gifts-search-container-focus\")\n      }\n    }\n  }\n\n  searchInputBlurHandler = () => {\n    if (this.inputRef.current && this.inputContainer.current) {\n      let searchInput = this.inputRef.current\n      if (searchInput.value.length <= 0) {\n        if (this.inputContainer.current.classList.contains(\"track-gifts-search-container-focus\")) {\n          //Removing class to decrease width\n          this.inputContainer.current.classList.remove(\"track-gifts-search-container-focus\")\n        }\n      }\n\n      if (searchInput.value.length >= 3 && !this.props.stateTrackGiftsSearch.searched) {\n        this.applySearch()\n      }\n    }\n  }\n\n  clearClickHandler = async ev => {\n    ev.preventDefault()\n    await this.props.dispatch(setTrackGiftsSearch({\n      searched: false,\n      searchText: \"\"\n    }))\n    if (this.inputRef.current) {\n      this.inputRef.current.focus()\n    }\n\n    this.applySearch()\n  }\n\n  searchClickHandler = async ev => {\n    ev.preventDefault()\n    this.applySearch()\n  }\n\n  searchOnEnter = (ev) => {\n    ev.persist();\n    ev.preventDefault();\n    if (ev.keyCode === 13) { //Enter keycode is 13\n      this.applySearch()\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"ml-auto track-gifts-search-container\" ref={this.inputContainer}>\n        <input\n          type=\"text\"\n          ref={this.inputRef}\n          placeholder=\"Search\"\n          value={this.props.stateTrackGiftsSearch.searchText}\n          onKeyUp={(ev) => this.searchOnEnter(ev)}\n          onChange={this.searchInputChangeHandler}\n          onFocus={this.searchInputFocusHandler}\n          onBlur={this.searchInputBlurHandler}\n          className={[\"m-a-unset-line-height track-gifts-search-input pl-6 text-body py-1 w-100 mw-100\", this.props.stateTrackGiftsSearch.searched && this.props.stateTrackGiftsSearch.searchText.length > 0 ? \"pr-10\" : \"pr-12\"].join(\" \")}\n        />\n        <i className=\"icon-search track-gifts-search-icon\"/>\n        {!this.props.stateTrackGiftsSearch.searched && this.props.stateTrackGiftsSearch.searchText.length > 0 ?\n          <a className=\"track-gifts-search-input-link text-body\" href=\"#\"\n             onClick={(ev) => this.searchClickHandler(ev)}>Search</a>\n          : null}\n        {this.props.stateTrackGiftsSearch.searched && this.props.stateTrackGiftsSearch.searchText.length > 0 ?\n          <a className=\"track-gifts-search-input-link text-body\" href=\"#\"\n             onClick={(ev) => this.clearClickHandler(ev)}>Clear</a>\n          : null}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  stateTrackGiftsSearch: state.trackGifts.search,\n  stateTrackGiftsFilters: state.trackGifts.filters,\n  stateTrackGiftsView: state.trackGifts.activeView,\n  stateTrackGiftsProducts: state.trackGifts.products,\n  stateTrackGiftsPagination: state.trackGifts.paginationInfo,\n  stateRegistryInfo: state.registry.info\n})\n\nexport default connect(\n  mapStateToProps\n)(Search);","import React from \"react\";\nimport \"./AddGift.scss\";\nimport Button from \"../../../commons/components/button-component/ButtonComponent\";\nimport Modal from \"../../../commons/components/modal-component/ModalComponent\";\nimport {graphQL} from \"../../../../api/axios\";\nimport {connect} from 'react-redux'\nimport {TRACK_GIFTS_ADD_GIFT} from \"../../../../api/mutations\";\nimport {getTrackGiftsProduct} from \"../../../../utils/commonFunction\";\nimport {toast} from \"react-toastify\";\n\nconst EMAIL_RE = /^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$/g\n\nclass AddGift extends React.Component {\n  state = {\n    show: false,\n    giftName: \"\",\n    storeName: \"\",\n    orderNumber: \"\",\n    userName: \"\",\n    userEmail: \"\",\n    errors: {}\n  }\n\n  openAddGiftModal = () => {\n\n    this.setState({\n      show: true,\n      giftName: \"\",\n      storeName: \"\",\n      orderNumber: \"\",\n      userName: \"\",\n      userEmail: \"\",\n      errors: {}\n    })\n  }\n\n  modalCloseHandler = () => {\n    this.setState({\n      show: false\n    })\n  }\n\n  validData = () => {\n    let valid = true\n    let errors = {}\n\n    if (this.state.giftName.length <= 0) {\n      errors['giftName'] = \"Gift Name is required field\"\n      valid = false\n    }\n\n    if (this.state.userName.length <= 0) {\n      errors['userName'] = \"Name is required field\"\n      valid = false\n    }\n\n    if (this.state.userEmail.length <= 0) {\n      errors['userEmail'] = \"Email address is required field\"\n      valid = false\n    } else {\n      if (!this.state.userEmail.match(EMAIL_RE)) {\n        errors['userEmail'] = \"Invalid Email address\"\n        valid = false\n      }\n    }\n\n    this.setState({\n      errors: errors\n    })\n\n    return valid\n  }\n\n  addGiftClickHandler = () => {\n    if (!this.validData()) {\n      return false\n    }\n\n    let reqData = {\n      query: TRACK_GIFTS_ADD_GIFT,\n      variables: {\n        registryId: this.props.stateRegistryInfo?.id,\n        gifts: [{\n          guestName: this.state.userName ? this.state.userName : null,\n          guestEmail: this.state.userEmail ? this.state.userEmail : null,\n          items: [{\n            title: this.state.giftName ? this.state.giftName : null,\n            quantity: 1,\n            price: 0.0\n          }]\n        }]\n      }\n    }\n\n    if (this.state.storeName) {\n      reqData.variables.gifts['storeName'] = this.state.storeName\n    }\n\n    if (this.state.orderNumber) {\n      reqData.variables.gifts['orderNo'] = this.state.orderNumber\n    }\n\n    graphQL(reqData).then(res => {\n      if (res.data.data.addGift) {\n        toast.success(<p><b>{this.state.giftName} gift added.</b></p>)\n        getTrackGiftsProduct(true, this.props.stateTrackGiftsFilters, this.props.stateTrackGiftsProducts, this.props.stateTrackGiftsPagination, this.props.stateTrackGiftsView, this.props.stateRegistryInfo, this.props.stateTrackGiftsSearch, this.props.dispatch)\n        this.modalCloseHandler()\n      } else if (res.data.errors) {\n        toast.error(\"Some error occurred.\")\n        console.error({...res.data.errors})\n      }\n    }).catch(err => {\n      toast.error(\"Some error occurred.\")\n      console.error(err.response)\n    })\n\n  }\n\n  // Input Change Handlers\n  giftNameChangeHandler = ev => {\n    if (this.state.errors.giftName) {\n      let newErrorState = {...this.state.errors}\n      delete newErrorState.giftName\n      this.setState({\n        errors: newErrorState\n      })\n    }\n\n    this.setState({\n      giftName: ev.target.value\n    })\n  }\n\n  storeNameChangeHandler = ev => {\n    this.setState({\n      storeName: ev.target.value\n    })\n  }\n\n  orderNumberChangeHandler = ev => {\n    this.setState({\n      orderNumber: ev.target.value\n    })\n  }\n\n  userNameChangeHandler = ev => {\n    if (this.state.errors.userName) {\n      let newErrorState = {...this.state.errors}\n      delete newErrorState.userName\n      this.setState({\n        errors: newErrorState\n      })\n    }\n    this.setState({\n      userName: ev.target.value\n    })\n  }\n\n  userEmailChangeHandler = ev => {\n    if (this.state.errors.userEmail) {\n      let newErrorState = {...this.state.errors}\n      delete newErrorState.userEmail\n      this.setState({\n        errors: newErrorState\n      })\n    }\n    this.setState({\n      userEmail: ev.target.value\n    })\n  }\n\n  render() {\n    return (\n      <div className=\"track-gifts-add-gift-container\">\n\n        <Button\n          variant=\"primary\"\n          className=\"px-3 py-1 text-body font-medium track-gifts-add-gift-button\"\n          onClick={this.openAddGiftModal}\n        >Add Gift</Button>\n\n        <Modal\n          show={this.state.show}\n          title=\"Add Gift\"\n          size=\"md\"\n          footer={\n            <Button\n              variant=\"primary\"\n              onClick={this.addGiftClickHandler}\n              className=\"px-5 py-1 text-body font-medium track-gifts-add-gift-button\"\n            >Add & Close</Button>\n          }\n          closeModal={this.modalCloseHandler}>\n          <div className=\"track-gifts-add-gift-form\">\n\n            {/* Gift Name */}\n            <div className=\"row\">\n              <div className=\"col\">\n                <div className=\"track-gifts-add-gift-input-container\">\n                  <label\n                    className=\"track-gifts-add-gift-input-label track-gifts-add-gift-required text-sm font-medium mb-1\">Gift\n                    Name</label>\n                  <input\n                    type=\"text\"\n                    name=\"gift-name\"\n                    value={this.state.giftName}\n                    onChange={(ev) => this.giftNameChangeHandler(ev)}\n                    placeholder=\"Eg. Coming Home Blanket by Monica+Andy\"\n                    className={[\"m-a-unset-line-height track-gifts-add-gift-input d-block w-100 mw-100 px-2 py-1 text-body mb-0\", this.state.errors.giftName ? \"track-gifts-add-gift-input-error\" : \"\"].join(\" \")}/>\n                  {this.state.errors.giftName ?\n                    <label\n                      className=\"text-sm track-gifts-add-gift-input-error-text\">{this.state.errors.giftName}</label>\n                    : null}\n                </div>\n              </div>\n            </div>\n\n            <div className=\"row mt-2\">\n              {/* Store Name */}\n              <div className=\"col-6\">\n                <div className=\"track-gifts-add-gift-input-container\">\n                  <label className=\"track-gifts-add-gift-input-label text-sm font-medium mb-1\">Store Name</label>\n                  <input\n                    type=\"text\"\n                    name=\"store-name\"\n                    value={this.state.storeName}\n                    onChange={(ev) => this.storeNameChangeHandler(ev)}\n                    className=\"m-a-unset-line-height track-gifts-add-gift-input d-block w-100 mw-100 px-2 py-1 text-body mb-0\"\n                    placeholder=\"Eg. Target\"/>\n                </div>\n              </div>\n\n              {/* Order Number */}\n              <div className=\"col-6\">\n                <div className=\"track-gifts-add-gift-input-container\">\n                  <label className=\"track-gifts-add-gift-input-label text-sm font-medium mb-1\">Order number</label>\n                  <input\n                    type=\"text\"\n                    name=\"order-number\"\n                    value={this.state.orderNumber}\n                    onChange={(ev) => this.orderNumberChangeHandler(ev)}\n                    className=\"m-a-unset-line-height track-gifts-add-gift-input d-block w-100 mw-100 px-2 py-1 text-body mb-0\"\n                    placeholder=\"00012345\"/>\n                </div>\n              </div>\n            </div>\n\n            {/* User Info */}\n            <div className=\"row mt-5\">\n              <div className=\"col\">\n                <p className=\"text-body font-medium\">Gifted By</p>\n              </div>\n            </div>\n\n            {/* User Name */}\n            <div className=\"row mt-2\">\n              <div className=\"col\">\n                <div className=\"track-gifts-add-gift-input-container\">\n                  <label\n                    className=\"track-gifts-add-gift-input-label track-gifts-add-gift-required text-sm font-medium mb-1\">Name</label>\n                  <input\n                    type=\"text\"\n                    name=\"user-name\"\n                    placeholder=\"John Doe\"\n                    value={this.state.userName}\n                    onChange={(ev) => this.userNameChangeHandler(ev)}\n                    className={[\"m-a-unset-line-height track-gifts-add-gift-input d-block w-100 mw-100 px-2 py-1 text-body mb-0\", this.state.errors.userName ? \"track-gifts-add-gift-input-error\" : \"\"].join(\" \")}\n                  />\n                  {this.state.errors.userName ?\n                    <label\n                      className=\"text-sm track-gifts-add-gift-input-error-text\">{this.state.errors.userName}</label>\n                    : null}\n                </div>\n              </div>\n            </div>\n\n            {/* User email */}\n            <div className=\"row mt-2 mb-1\">\n              <div className=\"col\">\n                <div className=\"track-gifts-add-gift-input-container\">\n                  <label\n                    className=\"track-gifts-add-gift-input-label track-gifts-add-gift-required text-sm font-medium mb-1\">Email\n                    address</label>\n                  <input\n                    type=\"text\"\n                    name=\"user-email\"\n                    placeholder=\"johndoe@email.com\"\n                    value={this.state.userEmail}\n                    onChange={(ev) => this.userEmailChangeHandler(ev)}\n                    className={[\"m-a-unset-line-height track-gifts-add-gift-input d-block w-100 mw-100 px-2 py-1 text-body mb-0\", this.state.errors.userEmail ? \"track-gifts-add-gift-input-error\" : \"\"].join(\" \")}\n                  />\n                  {this.state.errors.userEmail ?\n                    <label\n                      className=\"text-sm track-gifts-add-gift-input-error-text\">{this.state.errors.userEmail}</label>\n                    : null}\n                </div>\n              </div>\n            </div>\n\n          </div>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  stateTrackGiftsFilters: state.trackGifts.filters,\n  stateTrackGiftsView: state.trackGifts.activeView,\n  stateTrackGiftsProducts: state.trackGifts.products,\n  stateTrackGiftsPagination: state.trackGifts.paginationInfo,\n  stateRegistryInfo: state.registry.info,\n  stateTrackGiftsSearch: state.trackGifts.search\n})\n\nexport default connect(\n  mapStateToProps\n)(AddGift);","import React from \"react\";\nimport TrackGiftsSidebar from \"./containers/track-gifts-sidebar/TrackGiftsSidebar\";\nimport TrackGiftsContent from \"./containers/track-gifts-content/TrackGiftsContent\";\nimport Search from \"./components/search/Search\";\nimport AddGift from \"./components/add-gift/AddGift\";\nimport Button from \"../commons/components/button-component/ButtonComponent\";\nimport Modal from \"../commons/components/modal-component/ModalComponent\";\nimport \"./TrackGifts.scss\";\nimport ThankYouList from \"../track-gifts/components/thank-you-list/ThankYouList\";\n\nclass TrackGifts extends React.Component {\n\n  state = {\n    showTrackFilterModal: false,\n    showSearchPopUp: false\n  }\n\n  searchRef = React.createRef();\n\n  closeTrackFilterModal = () => {\n    this.setState({showTrackFilterModal: false})\n  }\n\n  toggleSearchBar = e => {\n    e.preventDefault()\n    if (this.searchRef.current) {\n      this.searchRef.current.classList.toggle(\"track-gifts-show-search-dialog\")\n    }\n  }\n\n  trackFilterModalFooterButtons =\n    (\n      <>\n        <Button\n          variant=\"secondary\"\n          className=\"px-3 py-1 font-weight-bold font-medium text-body\"\n          disabled={false}\n          onClick={this.closeTrackFilterModal}\n        >Close</Button>\n      </>\n    )\n\n  render() {\n    return (\n      <div className=\"container track-gifts-container mt-2 mt-md-8\">\n        <div className=\"row\">\n\n          {/* Sidebar content */}\n          <div className=\"col-2 d-none d-md-inline-block\">\n            <div className=\"row mb-5\">\n              <div className=\"col\">\n                <h4 className=\"font-medium\">View</h4>\n              </div>\n            </div>\n            <div className=\"row\">\n              <div className=\"col\">\n                <TrackGiftsSidebar />\n              </div>\n            </div>\n          </div>\n\n          {/* Main Content */}\n          <div className=\"col-12 col-md-10\">\n            <div className=\"row mb-0 mb-md-5 align-items-center\">\n              <div className=\"col-2 col-md\">\n                <h4 className=\"font-medium\">Gifts</h4>\n              </div>\n              <div className=\"col-10 justify-content-end d-md-none d-block d-flex align-items-center mb-2\">\n                <Button className=\"d-flex py-1 mr-2\" variant=\"secondary\" onClick={(e) => this.toggleSearchBar(e)}>\n                  <i className=\"icon-search search-icon-mobile\" />\n                </Button>\n                <div ref={this.searchRef} className=\"track-gifts-search-box-container\">\n                  <Search componentRef={this.searchRef} />\n                </div>\n                <Button className=\"d-flex py-1 mr-1\" variant=\"secondary\" onClick={() => {this.setState({showTrackFilterModal: true})}}>\n                  <i className=\"icon-filter-1 filter-icon\" />\n                </Button>\n                <AddGift />\n              </div>\n              <div className=\"col-5 d-none d-md-inline-block\">\n                <Search />\n              </div>\n              <div className=\"col-2 d-none d-md-inline-block\">\n                <AddGift />\n              </div>\n            </div>\n\n            <div className=\"row\">\n              <div className=\"divider-div d-inline-block d-md-none my-2\" />\n              <div className=\"col\">\n                <TrackGiftsContent />\n              </div>\n            </div>\n            <div className=\"d-inline-block d-md-none mb-11 mt-3\">\n              <ThankYouList />\n            </div>\n          </div>\n        </div>\n        <Modal\n          show={this.state.showTrackFilterModal}\n          title={\"Filters\"}\n          closeModal={this.closeTrackFilterModal}\n        >\n          <TrackGiftsSidebar />\n        </Modal>\n      </div>\n    );\n  }\n}\n\nexport default TrackGifts;","import React from \"react\";\nimport \"./RedirectionScreen.scss\";\n\nconst RedirectionScreen = props => {\n  return (\n    <div className=\"track-gifts-redirection-screen text-center pt-12 mx-auto\">\n      <h1 className=\"track-gifts-redirection-screen-title\">{`Youre on your way to ${props.store}`}</h1>\n      <h4 className=\"mt-1 track-gifts-redirection-screen-desc\">Dont forget to come back to Monica+Andy to tell us if you bought this gift. Well make sure it doesnt get bought twice.</h4>\n    </div>\n  )\n}\n\nexport default RedirectionScreen;","import React from 'react';\nimport {NavLink, Switch, Route, Redirect} from 'react-router-dom';\nimport MyRegistry from '../my-registry/MyRegistry';\nimport ViewRegistry from \"../view-registry/ViewRegistry\";\nimport {useTranslation} from \"react-i18next\";\nimport route from \"utils/routes\";\nimport RegistryHeroData from \"data/RegistryHero.json\";\nimport './RegistryHero.scss';\nimport {useSelector} from 'react-redux';\nimport Toast from \"modules/commons/components/toast/Toast\";\nimport TodoWidget from \"./component/todo-widget/TodoWidget\";\nimport TrackGifts from \"../track-gifts/TrackGifts\";\nimport RedirectionScreen from \"../track-gifts/components/redirection-screen/RedirectionScreen\";\nimport moment from 'moment';\n\nconst RegistryHero = (props) => {\n\n  const stateGuestViewRegistry = useSelector(state => state.viewRegistry.guestViewRegistry)\n  const stateRegistryInfo = useSelector(state => state.registry.info)\n  const stateTrackGiftsRedirectionInfo = useSelector(state => state.trackGifts.redirectionInfo)\n  const {t} = useTranslation();\n  const registryData = RegistryHeroData\n\n  if (!stateRegistryInfo.id && stateRegistryInfo.notFound) {\n    return <Redirect to={route.ONBOARDING.HOME}/>\n  }\n\n  return (\n    <>{stateTrackGiftsRedirectionInfo.store ?\n      <RedirectionScreen store={stateTrackGiftsRedirectionInfo.store}/>\n      :\n      <>\n        {!stateGuestViewRegistry ?\n          <div className=\"registry-hero\">\n            <div className=\"container pt-3 pt-md-6\">\n              <div className=\"row mb-5 mb-md-0\">\n                <div className=\"col d-flex justify-content-between align-items-center align-items-md-start\">\n                  <div className=\"d-flex align-items-end\">\n                    <h1 className=\"registry-name-header\">{stateRegistryInfo.name}</h1>\n                    <span className=\"text-sm ml-1 registry-due-date-text\">{stateRegistryInfo.dueDate !== null ? t(\"registryHeader.subTitle\")+\" \"+moment(stateRegistryInfo.dueDate).format(\"MMM Do YYYY\"):\"\"}</span>\n                  </div>\n                  <div>\n                    <TodoWidget/>\n                  </div>\n                </div>\n              </div>\n              <div className=\"row\">\n                <div className=\"col\">\n                  <div className=\"d-flex registry-hero-navigation-links\">\n                    <NavLink to={route.MY_REGISTRY.HOME} className=\"registry-header-link\">\n                      <h4>{t(\"registryHeader.link.myRegistry\")}</h4></NavLink>\n\n                    <NavLink to={route.VIEW_REGISTRY.HOME} className=\"registry-header-link\">\n                      <h4>{t(\"registryHeader.link.viewRegistry\")}</h4></NavLink>\n\n                    <NavLink to={route.TRACK_GIFTS.HOME} className=\"registry-header-link\">\n                      <h4>{t(\"registryHeader.link.trackGifts\")}</h4></NavLink>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div> : null}\n\n        {/* Registry Nav Routes */}\n        {stateRegistryInfo.id ?\n          <Switch>\n            <Route exact path={route.REGISTRY.HOME}><Redirect to={route.MY_REGISTRY.HOME}/></Route>\n            <Route exact path={route.MY_REGISTRY.HOME} component={MyRegistry}/>\n            <Route exact path={route.VIEW_REGISTRY.HOME} component={ViewRegistry}/>\n            <Route exact path={route.TRACK_GIFTS.HOME} component={TrackGifts}/>\n          </Switch>\n\n          : null}\n      </>\n    }\n\n\n      <Toast/>\n    </>\n  )\n}\n\nexport default RegistryHero;","import React from \"react\";\nimport \"./Option.scss\";\n\nconst Option = (props) => {\n  return (\n    <div\n      className={[\"px-3 px-md-4 py-2 py-md-3 baby-registry-question-option\", props.className ? props.className : \"\"].join(\" \")}\n      onClick={props.onClick}>{props.children}</div>\n  );\n}\n\nexport default Option;","import React from \"react\";\nimport \"./Onboarding.scss\";\nimport {connect} from \"react-redux\";\nimport {Redirect} from \"react-router\";\nimport routes from \"utils/routes\";\nimport Option from \"../commons/components/questions/option/Option\";\nimport {addQuestionAnswer, updateQuestionAnswer} from \"./OnboardingAction\";\nimport Button from \"../commons/components/button-component/ButtonComponent\";\nimport {toast, ToastContainer} from \"react-toastify\";\nimport {\n  REGISTER_USER,\n  SAVE_QUESTION_RESPONSE,\n  LOGIN_USER,\n  ADD_PARTNER_ACCOUNT,\n  CREATE_REGISTRY,\n  SAVE_SINGLE_QUESTION_RESPONSE\n} from \"../../api/mutations\";\nimport {graphQLNoToken, graphQLNoHeader} from \"../../api/axios\";\nimport {Cookies} from \"react-cookie\";\nimport {setLoggingStatus, setOnboardingRegistry} from \"../registry/RegistryActions\";\nimport {getOnboardingQuestions} from \"../../utils/commonFunction\";\nimport {GET_REGISTRIES} from \"../../api/queries\";\nimport {M_A_FORGOT_PASSWORD_LINK} from \"../../utils/constants\";\n\nclass Onboarding extends React.Component {\n\n  //EMAIL PATTERN\n  MAIL_FORMAT = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/;\n\n  // Static titles\n  LOGIN_TITLE = \"Already have an M+A account? Use the same login to get started on your registry.\"\n  SIGNUP_TITLE = \"Lets make it official. Time to create your account.\"\n  PARTNER_TITLE = \"Your partners details please\"\n\n  // Answer type mapping\n  RADIO = \"Radio\"\n  LOGIN = \"Login\"\n  PARTNER = \"Partner\"\n\n  // Data to remove Both option\n  LITTLE_ONCE_ID = {\n    questionId: 5,\n    optionId: 7\n  }\n\n  BOTH_OPTION_ID = {\n    questionId: 6,\n    optionId: 13\n  }\n\n  SKIP_BOTH_OPTION = false\n\n  state = {\n    parentId: null,\n    question: {},\n    login: false,\n    toastMessage: \"\",\n    signUpErrors: {},\n    signInErrors: {},\n    submitAnswer: false,\n    bulkSaved: true\n  }\n\n  componentDidMount() {\n    window.onpopstate = () => {\n      if (this.props.location.pathname.search(routes.ONBOARDING.HOME) >= 0) {\n        this.setQuestionBasedOnId(this.props.match.params['questionId'])\n        this.clearToastMessage()\n      }\n    }\n  }\n\n  clearErrorState = () => {\n    this.setState({\n      signUpErrors: {},\n      signInErrors: {}\n    })\n  }\n\n  createRegistry = () => {\n    let cookies = new Cookies();\n    graphQLNoHeader({query: CREATE_REGISTRY}, {\n      headers: {\"Authorization\": cookies.get(\"access_token\") ? \"Token \" + cookies.get(\"access_token\") : \"\"}\n    }).then(res => {\n      if (res.data.data) {\n        let registryId = res.data.data.createRegistry.registry.id\n        if (registryId) {\n          this.props.dispatch(setOnboardingRegistry(registryId))\n          this.submitAllAnswers(registryId, true)\n        }\n      }\n    }).catch(err => {\n      console.error(err.response)\n    })\n  }\n\n  checkValidEmail = (email) => {\n    return email.match(this.MAIL_FORMAT)\n  }\n\n  submitAllAnswers = async (optionalRegistryId = null, submitBulk = false) => {\n    if (this.state.submitAnswer || submitBulk) {\n      if (this.props.stateOnboardingAnswers.length > 0 && (this.props.stateOnboardingRegistry || optionalRegistryId)) {\n        const registryId = optionalRegistryId ? optionalRegistryId : this.props.stateOnboardingRegistry;\n        let action = null;\n        let returnToURL = null;\n\n        const cookies = new Cookies();\n        const token = cookies.get(\"access_token\") ? \"Token \" + cookies.get(\"access_token\") : \"\"\n\n        if (submitBulk) {\n          // Submitting all answers at once\n\n          const response = this.props.stateOnboardingAnswers.map(answer => {\n            return {\n              question: answer.question,\n              questionOptionInput: [\n                {\n                  option: answer.response.option,\n                  optionText: answer.response.optionText\n                }\n              ]\n            }\n          })\n          let reqData = {\n            query: SAVE_QUESTION_RESPONSE,\n            operationName: \"addRegistryQuestionOption\",\n            variables: {\n              registryId: registryId,\n              answers: response\n            }\n          }\n\n          await graphQLNoHeader(reqData, {\n            headers: {\"Authorization\": token}\n          }).then(res => {\n            if (res.data.data.addRegistryMultipleQuestionOption) {\n              console.log(\"Saved\")\n            }\n          }).catch(err => {\n            toast.error(\"Answer is not saved.\")\n            console.error(err.response);\n          }).finally(async () => {\n            await this.setState({\n              submitAnswer: false\n            })\n          })\n        } else {\n          //  Submitting single answer at once\n\n          let response = null\n\n          if (this.props.stateOnboardingAnswers.length > 0) {\n            const answer = this.props.stateOnboardingAnswers[this.props.stateOnboardingAnswers.length - 1]\n            action = answer.response.action ? answer.response.action : null;\n            response = {\n              question: answer.question,\n              questionOptionInput: [\n                {\n                  option: answer.response.option,\n                  optionText: answer.response.optionText\n                }\n              ]\n            }\n          }\n\n          if (action) {\n            switch (action) {\n              case \"build-registry\":\n                returnToURL = window.location.origin + routes.MY_REGISTRY.HOME\n                break\n              case \"registry-quiz\":\n                returnToURL = window.location.origin + routes.PERSONALIZE.HOME\n                break\n              default:\n                returnToURL = window.location.origin + routes.REGISTRY.HOME\n                break\n            }\n          }\n\n          if (response) {\n            let reqData = {\n              query: SAVE_SINGLE_QUESTION_RESPONSE,\n              operationName: \"updateOrCreateRegistrySingleQuestionOption\",\n              variables: {\n                registryId: registryId,\n                registryQuestionOptionInput: response\n              }\n            }\n\n            if (action && returnToURL) {\n              reqData.variables['returnTo'] = returnToURL\n            }\n\n            graphQLNoHeader(reqData, {\n              headers: {\"Authorization\": token}\n            }).then(res => {\n              if (res.data.data.updateOrCreateRegistrySingleQuestionOption) {\n                console.log(\"Saved\")\n                if (res.data.data.updateOrCreateRegistrySingleQuestionOption.redirectionUrl) {\n                  window.open(res.data.data.updateOrCreateRegistrySingleQuestionOption.redirectionUrl, \"_self\")\n                }\n              }\n            }).catch(err => {\n              console.error(err);\n            }).finally(() => {\n              this.setState({\n                submitAnswer: false\n              })\n            })\n          }\n        }\n\n      }\n    }\n  }\n\n  clearToastMessage = () => {\n    this.setState({\n      toastMessage: \"\"\n    })\n  }\n\n  setToastMessage = () => {\n    if (this.state.question.toastMessage) {\n      this.setState({\n        toastMessage: this.state.question.toastMessage\n      })\n    } else {\n      this.clearToastMessage()\n    }\n  }\n\n  gotoNextQuestion = (question, parentId, option = {}) => {\n    let nextQuestionId = null;\n    let returnNext = false;\n    let nextFullQuestion = null;\n    const idToMatch = parentId ? parentId : question.id;\n    // Only works for 1 follow up question\n    if (option.followUpQuestions && option.followUpQuestions.length > 0) {\n      nextQuestionId = option.followUpQuestions[0].question.id;\n    } else {\n      for (let ques of this.props.stateOnboardingQuestions) {\n        if (returnNext) {\n          nextQuestionId = ques.id\n          nextFullQuestion = ques\n          break\n        }\n        if (ques.id === idToMatch) {\n          returnNext = true;\n        }\n      }\n    }\n\n    if (nextQuestionId === null && returnNext) {\n      //  This is last question\n      if (this.props.stateLoggedIn && this.state.redirectionUrl) {\n        // window.open(this.state.redirectionUrl, \"_self\")\n      }\n    } else if (nextQuestionId) {\n      this.setState({\n        parentId: null\n      })\n\n      if (nextFullQuestion && nextFullQuestion.answers.length > 0 && (nextFullQuestion.options.length > 0 && !nextFullQuestion.options[0].action)) {\n        this.gotoNextQuestion(nextFullQuestion, null)\n        return;\n      } else {\n        this.setQuestionBasedOnId(nextQuestionId)\n        this.setToastMessage()\n        this.props.history.push(routes.ONBOARDING.HOME + `/${nextQuestionId}`)\n      }\n\n\n    }\n  }\n\n  setQuestionBasedOnId = (questionId) => {\n    if (questionId) {\n      let finalQuestion = {};\n      let foundQuestion = false;\n      let parentId = null;\n      for (const question of this.props.stateOnboardingQuestions) {\n        if (foundQuestion) {\n          break;\n        }\n        if (question.id === questionId) {\n          finalQuestion = question;\n          foundQuestion = true;\n          break;\n        }\n        for (const option of question.options) {\n          if (option.followUpQuestions.length > 0) {\n            for (const followUpQuestion of option.followUpQuestions) {\n              if (followUpQuestion.question.id === questionId) {\n                finalQuestion = followUpQuestion.question;\n                parentId = followUpQuestion.parentQuestion;\n                foundQuestion = true\n                break;\n              }\n            }\n          }\n        }\n      }\n\n      if (finalQuestion.id) {\n        this.setState({\n          question: finalQuestion,\n          parentId: parentId\n        })\n      } else {\n        console.log(\"No Question Found\");\n      }\n    }\n  }\n\n  addAnswerToState = async (questionId, response, option = null) => {\n    const alreadyAnswered = this.props.stateOnboardingAnswers.find(el => el.question === this.state.question.id)\n\n\n    if (alreadyAnswered) {\n      // This will delete the answers that were given after the matched response\n      let newState = []\n      for (let answer of this.props.stateOnboardingAnswers) {\n        if (answer.question === this.state.question.id) {\n          answer.response = response;\n          newState.push(answer)\n          break;\n        }\n        newState.push(answer)\n      }\n      await this.props.dispatch(updateQuestionAnswer(newState))\n    } else {\n      await this.props.dispatch(addQuestionAnswer({question: questionId, response: response}))\n    }\n    await this.setState({\n      submitAnswer: true\n    })\n\n    if (option) {\n      if (option.toastMessage) {\n        this.setState({\n          toastMessage: option.toastMessage\n        })\n      }\n    }\n\n    this.submitAllAnswers(null, false)\n  }\n\n  answerRadioQuestion = (questionId, option) => {\n    if (Number(this.state.question.id) === this.LITTLE_ONCE_ID.questionId && Number(option.id) === this.LITTLE_ONCE_ID.optionId) {\n      this.SKIP_BOTH_OPTION = true\n    } else if (this.SKIP_BOTH_OPTION) {\n      this.SKIP_BOTH_OPTION = false\n    }\n    this.addAnswerToState(questionId, {option: option.id, optionText: option.value, action: option.action}, option);\n    this.gotoNextQuestion(this.state.question, this.state.parentId, option);\n  }\n\n  watchNextBtn = (ev) => {\n    this.setState({\n      nextBtnState: ev.target.value.length <= 0\n    })\n  }\n\n  answerDataQuestion = (questionId, response, dateCheck) => {\n    if (dateCheck) {\n      var now = new Date();\n      var day = (\"0\" + now.getDate()).slice(-2);\n      var month = (\"0\" + (now.getMonth() + 1)).slice(-2);\n      var currentDate = now.getFullYear() + \"-\" + (month) + \"-\" + (day);\n      if (currentDate <= response) {\n        this.addAnswerToState(questionId, {option: 0, optionText: response})\n        this.gotoNextQuestion(this.state.question, this.state.parentId);\n      } else {\n        toast.error(\"Invalid date\")\n      }\n    } else {\n      this.addAnswerToState(questionId, {option: 0, optionText: response})\n      this.gotoNextQuestion(this.state.question, this.state.parentId);\n    }\n  }\n\n  textInputTypeChangeHandler = (ev, inputRefs) => {\n    let enableBtn = false;\n\n    for (const inputRef of inputRefs) {\n      if (inputRef.current.value.length <= 0) {\n        enableBtn = true\n        break\n      }\n    }\n\n    this.setState({\n      nextBtnState: enableBtn\n    })\n  }\n\n  changeLoginState = (ev, value, refs) => {\n    ev.preventDefault()\n    for (let ref of refs) {\n      if (ref.current) {\n        ref.current.value = \"\"\n      }\n    }\n    this.setState({\n      login: value\n    })\n  }\n\n  setErrorBasedOnResponse = (err, type) => {\n    if (err.response.data && err.response.data.errors) {\n      for (let error of err.response.data.errors) {\n        let parentErrors = err.response.data.errors\n\n        if (parentErrors.length > 0) {\n          for (const subErrors of parentErrors) {\n            if (subErrors.errors && (subErrors.errors instanceof Array ? subErrors.errors.length > 0 : true)) {\n              let newErrorState = {}\n              for (const error in subErrors.errors) {\n                newErrorState[error] = subErrors.errors[error].length > 0 ? subErrors.errors[error][0] : \"\"\n              }\n              switch (type) {\n                case \"signUp\":\n                  this.setState({\n                    signUpErrors: newErrorState\n                  })\n                  break\n                case \"signIn\":\n                  this.setState({\n                    signInErrors: newErrorState\n                  })\n                  break\n              }\n            } else {\n              toast.error(error.message)\n            }\n          }\n        }\n      }\n    }\n    console.error(err.response)\n  }\n\n  signInClickHandler = (emailRef, passwordRef) => {\n    if (emailRef.current.value.length <= 0 || passwordRef.current.value.length <= 0) {\n      toast.error(\"Please enter all fields\")\n      return;\n    }\n\n    // Checking for valid email\n    if (!this.checkValidEmail(emailRef.current.value)) {\n      this.setState({\n        signInErrors: {\n          email: \"Invalid email address\"\n        }\n      })\n      return;\n    }\n\n    let reqData = {\n      query: LOGIN_USER,\n      operationName: \"login_user\",\n      variables: {\n        email: emailRef.current.value,\n        password: passwordRef.current.value\n      }\n    }\n\n    graphQLNoToken(reqData).then(async res => {\n      if (res.data.data.loginUser) {\n        const cookies = new Cookies();\n        cookies.set(\"access_token\", res.data.data.loginUser.token, {path: \"/\"})\n\n        // Checking if user has registry\n        let data = {\n          query: GET_REGISTRIES\n        }\n        await graphQLNoHeader(data, {headers: {\"Authorization\": \"Token \" + res.data.data.loginUser.token}}).then(async registryRes => {\n          if (registryRes.data.data.registries.edges.length > 0) {\n            // TODO: Set currently active registry\n            let activeRegistry = registryRes.data.data.registries.edges[registryRes.data.data.registries.edges.length - 1]\n            let token = cookies.get(\"access_token\")\n            if (activeRegistry.node.id && token) {\n              await this.props.dispatch(setOnboardingRegistry(activeRegistry.node.id))\n              await getOnboardingQuestions(this.props.dispatch, activeRegistry.node.id, token)\n            }\n            if (res.data.data.loginUser.redirectionUrl) {\n              // window.open(res.data.data.loginUser.redirectionUrl, \"_self\")\n            }\n            // window.open(routes.MY_REGISTRY.HOME, \"_self\")\n            // updateRegistryDetailState(this.props.dispatch, registryRes.data.data.registries.edges);\n          } else {\n            // Creating Registry\n            this.createRegistry()\n          }\n\n        }).catch(err => {\n          console.error(err);\n        })\n        this.setState({\n          redirectionUrl: res.data.data.loginUser.redirectionUrl\n        })\n        this.props.dispatch(setLoggingStatus(true))\n        this.submitAllAnswers(null, true)\n      }\n    }).catch(err => {\n      if (err.response.status === 401) {\n        toast.error(\"Invalid email or password\");\n        return;\n      }\n      this.setErrorBasedOnResponse(err, \"signIn\")\n    })\n  }\n\n  getSignInContent = () => {\n    const emailRef = React.createRef()\n    const passwordRef = React.createRef()\n    return (\n      <>\n        <div className=\"d-flex flex-column mb-4\">\n          <span className=\"text-sm font-medium onboarding-required-field\">Email Address</span>\n          <input\n            className={[\"onboarding-input py-1 px-2 text-body mb-0 mt-1\", this.state.signInErrors.email ? \"onboarding-input-error\" : \"\"].join(\" \")}\n            type=\"email\"\n            name=\"signIn-email\"\n            ref={emailRef}\n            placeholder=\"johndoe@email.com\"\n          />\n          {this.state.signInErrors.email ?\n            <p className=\"text-sm onboarding-error-message mt-1\">{this.state.signInErrors.email}</p>\n            : null}\n        </div>\n        <div className=\"d-flex flex-column mb-1\">\n          <span className=\"text-sm font-medium onboarding-required-field\">Password</span>\n          <input\n            className={[\"onboarding-input py-1 px-2 text-body mb-0 mt-1\", this.state.signInErrors.password ? \"onboarding-input-error\" : \"\"].join(\" \")}\n            type=\"password\"\n            name=\"signIn-password\"\n            ref={passwordRef}\n            placeholder=\"Password\"\n          />\n          {this.state.signInErrors.password ?\n            <p className=\"text-sm onboarding-error-message mt-1\">{this.state.signInErrors.password}</p>\n            : null}\n        </div>\n        <div className=\"d-flex flex-column mb-4\">\n          <a className=\"text-body font-medium onboarding-link-text\" href={M_A_FORGOT_PASSWORD_LINK} target=\"_blank\">Forgot\n            Password</a>\n        </div>\n        <Button\n          variant=\"primary\"\n          className=\"px-3 py-1 font-medium onboarding-next-button\"\n          onClick={() => this.signInClickHandler(emailRef, passwordRef)}\n        >Sign In</Button>\n        {/*TODO : Add Api on Onclick of the button above*/}\n        <h4 className=\"mt-11\">Don't have an account? <a href=\"#\" className=\"font-medium onboarding-link-text\"\n                                                        onClick={(ev) => this.changeLoginState(ev, false, [emailRef, passwordRef])}\n        >Sign Up</a></h4>\n      </>\n    )\n  }\n\n  signUpClickHandler = (firstNameRef, lastNameRef, emailRef, passwordRef) => {\n    let errors = {}\n    let valid = true\n    if (firstNameRef.current.value.length <= 0) {\n      errors['firstName'] = \"This field is required\"\n      valid = false\n    }\n\n    if (lastNameRef.current.value.length <= 0) {\n      errors['lastName'] = \"This field is required\"\n      valid = false\n    }\n\n    if (emailRef.current.value.length <= 0) {\n      errors['email'] = \"This field is required\"\n      valid = false\n    } else if (!this.checkValidEmail(emailRef.current.value)) {\n      errors['email'] = \"Invalid email address\"\n      valid = false\n    }\n\n    if (passwordRef.current.value.length <= 0) {\n      errors['password'] = \"This field is required\"\n      valid = false\n    }\n\n    this.setState({\n      signUpErrors : errors\n    })\n\n    if (!valid) {\n      return\n    }\n\n    // Clearing all error messages\n    this.clearErrorState()\n\n    let reqData = {\n      query: REGISTER_USER,\n      operationName: \"register_user\",\n      variables: {\n        name: `${firstNameRef.current.value} ${lastNameRef.current.value}`,\n        email: emailRef.current.value,\n        password: passwordRef.current.value\n      }\n    }\n\n    graphQLNoToken(reqData).then(res => {\n      if (res.data.data.registerUser) {\n        const cookies = new Cookies();\n        cookies.set(\"access_token\", res.data.data.registerUser.token, {path: \"/\"})\n        this.setState({\n          redirectionUrl: res.data.data.registerUser.redirectionUrl\n        })\n        this.createRegistry()\n        this.submitAllAnswers(null, true)\n        this.props.dispatch(setLoggingStatus(true))\n      }\n    }).catch(err => {\n      this.setErrorBasedOnResponse(err, \"signUp\")\n    })\n  }\n\n  getSignUpContent = () => {\n    let firstNameRef = React.createRef()\n    let lastNameRef = React.createRef()\n    let emailRef = React.createRef()\n    let passwordRef = React.createRef()\n    return (\n      <>\n        <div className=\"row\">\n          <div className=\"col-12 col-md-6 d-flex flex-column mb-4\">\n            <span className=\"text-sm font-medium onboarding-required-field\">First Name</span>\n            <input\n              className={[\"onboarding-input py-1 px-2 text-body mb-0 mt-1 w-100\", this.state.signUpErrors.firstName ? \"onboarding-input-error\" : \"\"].join(\" \")}\n              type=\"text\"\n              name=\"first-name\"\n              placeholder=\"John\"\n              ref={firstNameRef}\n            />\n            {this.state.signUpErrors.firstName ?\n              <p className=\"text-sm onboarding-error-message mt-1\">{this.state.signUpErrors.firstName}</p>\n              : null}\n          </div>\n          <div className=\"col-12 col-md-6 d-flex flex-column mb-4\">\n            <span className=\"text-sm font-medium onboarding-required-field\">Last Name</span>\n            <input\n              className={[\"onboarding-input py-1 px-2 text-body mb-0 mt-1 w-100\", this.state.signUpErrors.lastName ? \"onboarding-input-error\" : \"\"].join(\" \")}\n              type=\"text\"\n              name=\"last-name\"\n              placeholder=\"Doe\"\n              ref={lastNameRef}\n            />\n            {this.state.signUpErrors.lastName ?\n              <p className=\"text-sm onboarding-error-message mt-1\">{this.state.signUpErrors.lastName}</p>\n              : null}\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col-12 col-md-6 d-flex flex-column mb-4\">\n            <span className=\"text-sm font-medium onboarding-required-field\">Email Address</span>\n            <input\n              className={[\"onboarding-input py-1 px-2 text-body mb-0 mt-1 w-100\", this.state.signUpErrors.email ? \"onboarding-input-error\" : \"\"].join(\" \")}\n              type=\"email\"\n              name=\"email\"\n              placeholder=\"johndoe@email.com\"\n              ref={emailRef}\n            />\n            {this.state.signUpErrors.email ?\n              <p className=\"text-sm onboarding-error-message mt-1\">{this.state.signUpErrors.email}</p>\n              : null}\n          </div>\n          <div className=\"col-12 col-md-6 d-flex flex-column mb-4\">\n            <span className=\"text-sm font-medium onboarding-required-field\">Password</span>\n            <input\n              className={[\"onboarding-input py-1 px-2 text-body mb-0 mt-1 w-100\", this.state.signUpErrors.password ? \"onboarding-input-error\" : \"\"].join(\" \")}\n              type=\"password\"\n              name=\"password\"\n              placeholder=\"Password\"\n              ref={passwordRef}\n            />\n            {this.state.signUpErrors.password ?\n              <p className=\"text-sm onboarding-error-message mt-1\">{this.state.signUpErrors.password}</p>\n              : null}\n          </div>\n        </div>\n        <Button\n          variant=\"primary\"\n          className=\"px-3 py-1 font-medium onboarding-next-button\"\n          onClick={() => this.signUpClickHandler(firstNameRef, lastNameRef, emailRef, passwordRef)}\n        >Sign Up</Button>\n        <h4 className=\"mt-11\">Already have an account? <a href=\"#\" className=\"font-medium onboarding-link-text\"\n                                                          tabindex=\"0\"\n                                                          onClick={(ev) => this.changeLoginState(ev, true, [firstNameRef, lastNameRef, emailRef, passwordRef])}>Sign\n          In</a></h4>\n      </>\n    )\n  }\n\n  savePartnerDetail = (nameRef, emailRef) => {\n    if (nameRef.current.value.length <= 0 || emailRef.current.value.length <= 0) {\n      toast.error(\"Please enter all fields\")\n      return\n    }\n\n    // Checking for valid email\n    if (!this.checkValidEmail(emailRef.current.value)) {\n      toast.error(\"Invalid email address\");\n      return;\n    }\n\n    const cookies = new Cookies();\n    let reqData = {\n      query: ADD_PARTNER_ACCOUNT,\n      operationName: \"addPartner\",\n      variables: {\n        partnerDetail: {\n          email: emailRef.current.value,\n          name: nameRef.current.value\n        }\n      }\n    }\n    graphQLNoHeader(reqData, {\n      headers: {\"Authorization\": cookies.get(\"access_token\") ? \"Token \" + cookies.get(\"access_token\") : \"\"}\n    }).then(res => {\n      if (res.data.data.addPartnerAccount) {\n        this.gotoNextQuestion(this.state.question, this.state.parentId);\n      } else {\n        toast.error(\"Some error occurred\");\n      }\n    }).catch(err => {\n      toast.error(\"Some error occurred\");\n      console.error(err.response.data);\n    })\n  }\n\n  getPartnerContent = () => {\n    const nameRef = React.createRef()\n    const emailRef = React.createRef()\n    return (\n      <>\n        <div className=\"d-flex flex-column mb-4\">\n          <span className=\"text-sm font-medium onboarding-required-field\">Name</span>\n          <input\n            className=\"onboarding-input py-1 px-2 text-body mb-0 mt-1\"\n            type=\"text\"\n            name=\"name\"\n            placeholder=\"Name\"\n            ref={nameRef}\n            onChange={(ev) => this.textInputTypeChangeHandler(ev, [nameRef, emailRef])}\n          />\n        </div>\n        <div className=\"d-flex flex-column mb-4\">\n          <span className=\"text-sm font-medium onboarding-required-field\">Email Address</span>\n          <input\n            className=\"onboarding-input py-1 px-2 text-body mt-1 mb-0\"\n            type=\"email\"\n            name=\"email\"\n            placeholder=\"Your Email\"\n            ref={emailRef}\n            onChange={(ev) => this.textInputTypeChangeHandler(ev, [nameRef, emailRef])}\n          />\n        </div>\n        <Button\n          variant=\"primary\"\n          disabled={this.state.nextBtnState !== undefined ? this.state.nextBtnState : true}\n          className=\"px-3 py-1 font-medium onboarding-next-button\"\n          onClick={() => this.savePartnerDetail(nameRef, emailRef)}\n        >Next</Button>\n      </>\n    )\n  }\n\n  render() {\n    // if (this.props.stateOnboardingAnswers) {\n    //   this.submitAllAnswers(null, false)\n    // }\n\n    // Redirecting user to registry home if registry found\n    if (this.props.stateRegistryInfo.id) {\n      return <Redirect to={routes.MY_REGISTRY.HOME}/>\n    }\n\n    // Redirecting to first question if not answered any\n    if (this.props.stateOnboardingQuestions.length > 0\n      && this.props.stateOnboardingAnswers.length <= 0\n      && this.props.location.pathname !== routes.ONBOARDING.HOME + `/${this.props.stateOnboardingQuestions[0].id}`) {\n      return <Redirect to={routes.ONBOARDING.HOME + `/${this.props.stateOnboardingQuestions[0].id}`}/>\n    }\n\n    if (!this.state.question.title && this.props.stateOnboardingQuestions.length > 0 && this.props.stateRouter.location.pathname !== routes.ONBOARDING.HOME + `/${this.state.question.id}`) {\n      this.setQuestionBasedOnId(this.props.match.params['questionId'])\n    }\n\n    // Skipping Login Question if user is already logged in\n    if (this.props.stateLoggedIn && this.state.question.answerInputType === this.LOGIN) {\n      // If user already logged into M&A Store\n      this.setState((prevState, _) => ({\n        redirectionUrl: prevState.redirectionUrl ? prevState.redirectionUrl : routes.MY_REGISTRY.HOME\n      }))\n      this.gotoNextQuestion(this.state.question, null);\n    }\n\n    if (this.state.toastMessage) {\n      if (this.props.history.action === \"PUSH\") {\n        toast.dismiss()\n        toast.info(<h4 className=\"font-medium text-center\">{this.state.toastMessage}</h4>)\n        setTimeout(() => this.setState({toastMessage: \"\"}), 4000)\n      }\n    } else {\n      toast.dismiss()\n    }\n\n    // Setting all the options for the questions\n    let options = []\n    let staticQuestionTitle = \"\";\n    var now = new Date();\n    var day = (\"0\" + now.getDate()).slice(-2);\n    var month = (\"0\" + (now.getMonth() + 1)).slice(-2);\n    var today = now.getFullYear() + \"-\" + (month) + \"-\" + (day);\n\n    if (this.state.question.answerInputType === this.RADIO) {\n      for (const option of this.state.question.options) {\n        if (this.SKIP_BOTH_OPTION && Number(this.state.question.id) === this.BOTH_OPTION_ID.questionId && Number(option.id) === this.BOTH_OPTION_ID.optionId) {\n          this.SKIP_BOTH_OPTION = true\n        } else {\n          options.push(\n            <Option className=\"mb-2 mr-4\" onClick={() => this.answerRadioQuestion(this.state.question.id, option)}>\n              <h4 className=\"d-inline\">{option.value}</h4>{option.helpText ?\n              <span className=\"text-sm ml-1 onboarding-option-help-text\">{option.helpText}</span> : null}</Option>\n          )\n        }\n      }\n    } else if (this.state.question.answerInputType === \"Date\") {\n      let inputRef = React.createRef();\n      options.push(\n        <div className=\"d-flex flex-column\">\n          {/*TODO: Get placeholder from backend*/}\n          <input\n            type=\"date\"\n            className=\"onboarding-input py-1 px-2 text-body mb-0\"\n            placeholder=\"Date\"\n            ref={inputRef}\n            onChange={(ev) => this.watchNextBtn(ev)}\n            min={today}\n            max=\"9999-12-12\"\n          />\n          <Button\n            variant=\"primary\"\n            disabled={this.state.nextBtnState !== undefined ? this.state.nextBtnState : true}\n            onClick={() => this.answerDataQuestion(this.state.question.id, inputRef.current.value, true)}\n            className=\"px-3 py-1 font-medium mt-4 onboarding-next-button\"\n          >Next</Button>\n        </div>\n      )\n    } else if (this.state.question.answerInputType === \"Text\") {\n      let inputRefs = []\n      const inputRef = React.createRef()\n      inputRefs.push(inputRef)\n      options.push(\n        // TODO: Update this part if there is a Text type question\n        <div className=\"d-flex flex-column\">\n          <input\n            className=\"onboarding-input py-1 px-2 text-body mb-0 mt-1\"\n            type=\"Text\"\n            name=\"Answer\"\n            ref={inputRef}\n            onChange={(ev) => this.textInputTypeChangeHandler(ev, inputRefs)}\n          />\n          <Button\n            variant=\"primary\"\n            disabled={this.state.nextBtnState !== undefined ? this.state.nextBtnState : true}\n            onClick={() => this.answerDataQuestion(this.state.question.id, inputRef.current ? inputRef.current.value : \"\", false)}\n            className=\"mt-4 px-3 py-1 font-medium onboarding-next-button\"\n          >Next</Button>\n        </div>\n      )\n    } else if (this.state.question.answerInputType === this.LOGIN) {\n      let content = null;\n      if (this.state.login) {\n        staticQuestionTitle = this.LOGIN_TITLE\n        content = this.getSignInContent()\n      } else {\n        staticQuestionTitle = this.SIGNUP_TITLE\n        content = this.getSignUpContent()\n      }\n\n      options.push(content)\n    } else if (this.state.question.answerInputType === this.PARTNER) {\n      staticQuestionTitle = this.PARTNER_TITLE;\n      options.push(this.getPartnerContent())\n    }\n\n    return (\n      <>\n        <div className=\"baby-registry-onboarding container\">\n          <div className=\"row justify-content-center mt-24\">\n            <div className=\"col-12 col-md-6\">\n              <span\n                className=\"font-body onboading-question\">{[this.LOGIN, this.PARTNER].indexOf(this.state.question.answerInputType) !== -1 ? staticQuestionTitle : this.state.question.title}</span>\n            </div>\n          </div>\n          <div className=\"row justify-content-center mt-6\">\n            <div\n              className={[\"col-12\", this.state.question.answerInputType === this.LOGIN && !this.state.login ? \"col-md-7 offset-md-1\" : \"col-md-6\"].join(\" \")}>\n              {options.map(option => option)}\n            </div>\n          </div>\n        </div>\n        <ToastContainer\n          position=\"top-center\"\n          className=\"onboarding-toast-container\"\n          toastClassName=\"onboarding-toast px-3 py-1\"\n          autoClose={4000}\n          hideProgressBar={true}\n          newestOnTop={true}\n          draggable={false}\n          closeOnClick={false}\n          closeButton={null}\n        />\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    stateRegistryInfo: state.registry.info,\n    stateLoggedIn: state.registry.loggedIn,\n    stateOnboardingQuestions: state.onboarding.questions,\n    stateOnboardingAnswers: state.onboarding.answers,\n    stateOnboardingRegistry: state.registry.onboardingRegistry,\n    stateRouter: state.router\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(Onboarding);","import axios from 'axios';\nimport { push } from \"connected-react-router\";\nimport { API_END_POINTS, API_URL } from '../../../utils/constants'\n\nexport const VERIFY_TOKEN_ACTION_TYPES = {\n    VERIFY_TOKEN: \"VERIFY_TOKEN\",\n    SET_CUSTOMER: \"SET_CUSTOMER\"\n}\n\nexport const setCustomer = (payload) => {\n    return {\n        type: VERIFY_TOKEN_ACTION_TYPES.SET_CUSTOMER,\n        payload: payload\n    }\n}\n\nexport const verifyTokenRequest = params => {\n    return dispatch => {\n        axios.post(API_URL + API_END_POINTS.VERIFY_TOKEN, {\n            token: params.token\n        }).then(response => {\n            dispatch(setCustomer({\n                customer: response.data.data.customer,\n                token: response.data.data.token\n            }))\n        }).then(() => {\n            dispatch(redirectVerifyToken())\n        }).catch(error => {\n            console.log(error);\n        })\n\n    }\n}\n\nexport const redirectVerifyToken = () => dispatch => {\n    dispatch(push(\"/another\"));\n};","import { Component } from \"react\";\nimport { connect } from 'react-redux';\n\nimport { verifyTokenRequest } from './VerifyTokenActions'\n\n\nclass VerifyToken extends Component {\n\n    componentDidMount() {\n        this.props.verifyToken({\n            token: this.props.match.params.token\n        })\n    }\n\n    render() {\n        return \"\"\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        verifyToken: (params) => dispatch(verifyTokenRequest(params))\n    };\n};\nexport default connect(null, mapDispatchToProps)(VerifyToken);","import React from 'react';\nimport \"./PersonaliseHeader.scss\";\nimport { withRouter } from \"react-router\";\nimport routes from \"utils/routes\";\n\n\nconst PersonaliseHeader = (props) => {\n    const closePersonalise = (event) => {\n        event.preventDefault();\n        props.history.push(routes.REGISTRY.HOME)\n    }\n    \n    return (\n        <div className=\"personalise-header\">\n            <div className=\"container\">\n                <div className=\"row\">\n                    <div className=\"col d-flex justify-content-between py-2\">\n                        <p className=\"text-body font-medium personalise-text\">My Registry Quiz</p>\n                        <i className=\"icon-close align-self-center personalise-close\" onClick={(e) => { closePersonalise(e) }} />\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default withRouter(PersonaliseHeader);","import React from 'react';\nimport \"./PersonaliseFooter.scss\";\n\n\nconst PersonaliseFooter = (props) => {\n  const closePersonalise = (event) => {\n    event.preventDefault();\n    // props.history.push(routes.REGISTRY.HOME)\n  }\n\n  return (\n    <div className=\"personalise-footer\">\n      <div className=\"container\">\n        <div className=\"row\">\n          <div className=\"col-4 justify-content-between pt-2 pb-4\">\n            <div className=\"mb-1\">\n              {props.percentage ? <p className=\"text-sm\">{props.percentage}% complete</p> : null}\n            </div>\n            <div className=\"personalise-progress-background\">\n              <div className=\"personalise-progress\" style={{ width: `${props.percentage}%` }} />\n            </div>\n          </div>\n          {/* <i className=\"icon-close align-self-center personalise-close\" onClick={(e) => { closePersonalise(e) }} /> */}\n          <div className=\"col d-flex justify-content-end\">\n            <i className=\"icon-chevron-left align-self-center personalise-footer-icon p-2\" onClick={props.prevQuestion} />\n            <i className=\"icon-chevron-right align-self-center personalise-footer-icon p-2 ml-2\" onClick={props.nextQuestion} />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default PersonaliseFooter;","import React, { createRef } from \"react\";\n// import \"./CheckListItems.scss\";\nimport { withTranslation } from \"react-i18next\";\nimport PersonaliseHeader from \"./components/personalise-header/PersonaliseHeader\";\nimport { getPersonalizeQuestions } from \"utils/commonFunction\";\nimport { connect } from \"react-redux\";\nimport PersonaliseFooter from \"./components/personalise-footer/PersonaliseFooter\";\nimport { toast, ToastContainer } from \"react-toastify\";\nimport Option from \"../commons/components/questions/option/Option\";\nimport { updatePersonalizeQuestionAnswer, addPersonalizeQuestionAnswer, addPersonalizeQuestion } from \"./PersonaliseCheckListActions\";\nimport \"./PersonaliseChecklist.scss\";\nimport Button from \"modules/commons/components/button-component/ButtonComponent\";\nimport routes from \"utils/routes\";\nimport { SAVE_SINGLE_QUESTION_RESPONSE } from 'api/mutations';\nimport { graphQL } from 'api/axios';\n\nclass PersonaliseChecklist extends React.Component {\n\n  state = {\n    parentId: null,\n    prevQuestionId: [],\n    question: {},\n    activeQuestionId: null,\n    toastMessage: \"\",\n    percentage: 0,\n    checkBoxSelected: []\n  }\n\n  // Answer type mapping\n  RADIO = \"Radio\"\n  CHECKBOX = \"Checkbox\"\n\n  componentDidMount() {\n    // getPersonalizeQuestions(this.props.stateRegistryInfo.id, this.props.dispatch)\n    this.setQuestionBasedOnId(this.props.match.params['questionId'])\n    this.clearToastMessage()\n  }\n\n  calulatePercentage = (answerQuestionCount, totalQuestionCount) => {\n    let totalAnwer = 0;\n\n    const questions = [...this.props.statePersonaliseQuestions]\n    for (let question of questions) {\n      if (question.answers.length > 0) {\n        totalAnwer++;\n      }\n      if (questions.followUpQuestion) {\n        for (let subQuestion of question.followUpQuestions) {\n          if (subQuestion.answers.length > 0) {\n            totalAnwer++;\n          }\n        }\n      }\n    }\n    return this.props.statePersonaliseQuestions.length ? Math.ceil(totalAnwer * 100 / totalQuestionCount) : 0;\n  }\n\n  gotoNextQuestion = (question, parentId, option = {}) => {\n    if (this.state.question.answerInputType === this.CHECKBOX) {\n      this.answerCheckBoxQuestion(this.state.question.id, this.state.checkBoxSelected)\n    }\n    let nextQuestionId = null;\n    let returnNext = false;\n    const idToMatch = parentId ? parentId : question.id;\n    // Only works for 1 follow up question\n    if (option.followUpQuestions && option.followUpQuestions.length > 0) {\n      nextQuestionId = option.followUpQuestions[0].question.id;\n    } else {\n      for (let ques of this.props.statePersonaliseQuestions) {\n        if (returnNext) {\n          nextQuestionId = ques.id\n          break\n        }\n        if (ques.id === idToMatch) {\n          returnNext = true;\n        }\n      }\n    }\n\n    if (nextQuestionId === null && returnNext) {\n      //  This is last question\n      console.log(\"Last Question\");\n      this.props.history.push(routes.PERSONALIZE.CHECKLIST)\n    } else if (nextQuestionId) {\n      this.setState({\n        parentId: null,\n        prevQuestionId: this.isActiveIdPresent() ? [...this.state.prevQuestionId, this.state.activeQuestionId] : this.state.prevQuestionId,\n        activeQuestionId: nextQuestionId\n      })\n      this.setQuestionBasedOnId(nextQuestionId)\n      // this.clearToastMessage();\n    }\n  }\n\n  gotoPrevQuestion = (prevQuestionId) => {\n    this.setQuestionBasedOnId(prevQuestionId);\n    if (this.state.prevQuestionId.length > 1) {\n      let popPrevQuestionId = [...this.state.prevQuestionId];\n      popPrevQuestionId.pop();\n      this.clearToastMessage();\n      this.setState({\n        prevQuestionId: popPrevQuestionId,\n        activeQuestionId: popPrevQuestionId.length > 0 ? popPrevQuestionId[popPrevQuestionId.length - 1] : this.state.activeQuestionId\n      })\n    }\n  }\n\n  setQuestionBasedOnId = (questionId) => {\n    if (questionId) {\n      let finalQuestion = {};\n      let foundQuestion = false;\n      let parentId = null;\n      for (const question of this.props.statePersonaliseQuestions) {\n        if (foundQuestion) {\n          break;\n        }\n        if (question.id === questionId) {\n          finalQuestion = question;\n          foundQuestion = true;\n          break;\n        }\n        for (const option of question.options) {\n          if (option.followUpQuestions.length > 0) {\n            for (const followUpQuestion of option.followUpQuestions) {\n              if (followUpQuestion.question.id === questionId) {\n                finalQuestion = followUpQuestion.question;\n                parentId = followUpQuestion.parentQuestion;\n                foundQuestion = true\n                break;\n              }\n            }\n          }\n        }\n      }\n\n      if (finalQuestion.id) {\n        this.setState({\n          question: finalQuestion,\n          parentId: parentId,\n        })\n      } else {\n        console.log(\"No Question Found\");\n      }\n    }\n  }\n\n  addAnswerToState = (response) => {\n    const alreadyAnswered = this.props.statePersonaliseAnswers.find(el => el.question === this.state.question.id)\n    if (alreadyAnswered) {\n      // This will delete the answers that were given after the matched response\n      let newState = []\n      for (let answer of this.props.statePersonaliseAnswers) {\n        if (answer.question === this.state.question.id) {\n          answer.response = response;\n          newState.push(answer)\n        }\n        else {\n          newState.push(answer)\n        }\n      }\n      this.props.dispatch(updatePersonalizeQuestionAnswer(newState))\n    } else {\n      this.props.dispatch(addPersonalizeQuestionAnswer({ question: this.state.question.id, response: response }))\n    }\n  }\n\n  isActiveIdPresent = () => {\n    for (let prevQuestion of this.state.prevQuestionId) {\n      if (prevQuestion === this.state.activeQuestionId) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  answerRadioQuestion = (questionId, option) => {\n    this.addAnswerToState(option);\n    this.gotoNextQuestion(this.state.question, this.state.parentId, option);\n    // this.calulatePercentage();\n    if (this.isActiveIdPresent) {\n      this.setState({\n        prevQuestionId: this.isActiveIdPresent() ? [...this.state.prevQuestionId, this.state.activeQuestionId] : this.state.prevQuestionId,\n      })\n    }\n\n    let finalAnswer = [{\n      option: option.id,\n      optionText: option.value\n    }]\n    this.submitQuestionAnswer(questionId, finalAnswer, option);\n  }\n\n  answerCheckBoxQuestion = (questionId, option) => {\n    this.addAnswerToState(option[0]);\n    // this.calulatePercentage();\n    if (this.isActiveIdPresent) {\n      this.setState({\n        prevQuestionId: this.isActiveIdPresent() ? [...this.state.prevQuestionId, this.state.activeQuestionId] : this.state.prevQuestionId,\n      })\n    }\n\n    // let finalAnswer = [{\n    //   option: option.id,\n    //   optionText: option.value\n    // }]\n\n    let finalAnswer = []\n\n    for (let op of option) {\n      finalAnswer.push({option: op.id, optionText: op.value})\n    }\n    this.submitQuestionAnswer(questionId, finalAnswer, option);\n  }\n\n  selectCheckboxAnswer = (event, checkBoxRef, option) => {\n    checkBoxRef.current.classList.toggle(\"personalise-checkbox-selected\");\n    if (event.target.checked) {\n      this.setState({\n        // checkBoxSelected: selectedOption.push(option)\n        checkBoxSelected: [...this.state.checkBoxSelected, option]\n      })\n    }\n    else {\n      var removeIndex = this.state.checkBoxSelected.map(function (item) {return item.id;}).indexOf(option.id);\n      this.state.checkBoxSelected.splice(removeIndex, 1);\n    }\n  }\n\n  submitQuestionAnswer = (questionId, answer, option = null) => {\n\n    if (option?.toastMessage) {\n      this.setState({\n        toastMessage: option.toastMessage\n      })\n    } else {\n      this.setToastMessage()\n    }\n    let questionOptionInput = {\n      question: questionId,\n      questionOptionInput: answer\n    }\n    let reqData = {\n      query: SAVE_SINGLE_QUESTION_RESPONSE,\n      variables: {\n        registryId: this.props.stateRegistryInfo.id,\n        registryQuestionOptionInput: questionOptionInput\n      }\n    }\n\n    graphQL(reqData).then(res => {\n      if (res.data.data) {\n        console.log('Answer Done')\n        this.setStateQuestionWithSelectedAnswer(questionId, answer)\n      }\n    }).catch(err => {\n      toast.error(\"Error occurred while fetching questions\");\n      console.error(err);\n    })\n  }\n\n  setStateQuestionWithSelectedAnswer = (questionId, answer) => {\n    let answerOpt = []\n    for (let ans of answer) {\n      answerOpt.push({ questionOption: { id: ans.option }, optionText: ans.optionText })\n    }\n\n    // Setting question state with selected answer\n    const questions = [...this.props.statePersonaliseQuestions].map(question => {\n\n      if (question.id === questionId) {\n        question.answers = answerOpt\n      }\n      question.options = question.options.map(opt => {\n        if (opt.followUpQuestions.length > 0) {\n          opt.followUpQuestions.map(followUpQuestion => {\n            if (opt.id === questionId) {\n              opt.answers = answerOpt\n            }\n          })\n        }\n        return opt;\n      })\n      question.isAnswered = false;\n      return question;\n    })\n    this.props.dispatch(addPersonalizeQuestion(questions))\n  }\n\n  clearToastMessage = () => {\n    this.setState({\n      toastMessage: \"\"\n    })\n  }\n\n  setToastMessage = () => {\n    let question = { ...this.state.question }\n    if (question.toastMessage) {\n      this.setState({\n        toastMessage: question.toastMessage\n      })\n    } else {\n      this.clearToastMessage()\n    }\n  }\n\n  selectedColorSchemes = (data) => {\n    if (this.state.checkBoxSelected.length <= 0) {\n      this.setState({\n        checkBoxSelected: [...data]\n      })\n    }\n  }\n\n  render() {\n\n    if (!this.state.question.id && this.props.statePersonaliseQuestions.length > 0) {\n      let prevQuestionID = []\n      let currentQuestion = null\n      for (let question of this.props.statePersonaliseQuestions){\n        if (!question.isPersonalize) {\n          prevQuestionID.push(question.id)\n        }\n        else {\n          currentQuestion = question\n          break\n        }\n      }\n      this.setState({\n        prevQuestionId: prevQuestionID,\n        activeQuestionId: currentQuestion.id,\n        question: currentQuestion\n      })\n\n    }\n\n    if (this.state.toastMessage) {\n      toast.dismiss()\n      toast.info(<h4 className=\"font-medium text-center\">{this.state.toastMessage}</h4>)\n    } else {\n      toast.dismiss()\n    }\n\n    // Setting all the options for the questions\n    let options = []\n    let staticQuestionTitle = \"\";\n\n    if (this.state.question.answerInputType === this.RADIO) {\n      const selectedOptionID = this.state.question.answers?.length > 0 ? this.state.question.answers[0].questionOption.id : null\n      options = this.state.question.options.map(option => (\n        <Option className={[\"mb-2 mr-4\", selectedOptionID === option.id ? \"answer-selected\" : \"\"].join(\" \")} onClick={() => this.answerRadioQuestion(this.state.question.id, option)}>\n          <h4 className=\"d-inline\">{option.value}</h4>{option.helpText ?\n            <div className=\"text-sm onboarding-option-help-text\">{option.helpText}</div> : null}</Option>\n      ))\n    } else if (this.state.question.answerInputType === this.CHECKBOX) {\n      // TODO: If it is selected\n      const selectedOptionID = []\n      if (this.state.question.answers?.length > 0) {\n        for (let ans of this.state.question.answers) {\n          if (!selectedOptionID.includes(ans.questionOption.id)) {\n            selectedOptionID.push(ans.questionOption.id)\n          }\n        }\n        const selectOptions = []\n        for (let selectedOption of this.state.question.options) {\n          if (selectedOptionID.includes(selectedOption.id)) {\n            selectOptions.push(selectedOption)\n          }\n        }\n        this.selectedColorSchemes(selectOptions);\n      }\n      options = this.state.question.options.map(option => {\n        let checkBoxRef = createRef();\n        return (\n          <div\n            className={[\"personalise-checkbox mr-3 mb-3\", selectedOptionID.includes(option.id) ? \"personalise-checkbox-selected\" : \"\"].join(\" \")} ref={checkBoxRef}>\n            <label className=\"checkbox d-flex align-items-center pb-0 mb-0\">\n              <span className=\"checkbox__input p-2\">\n                <input\n                  type=\"checkbox\"\n                  name={option.id}\n                  value={option.id}\n                  onChange={(e) => this.selectCheckboxAnswer(e, checkBoxRef, option)}\n                  defaultChecked={selectedOptionID.includes(option.id)}\n                />\n                <span className=\"checkbox__control d-flex justify-content-center align-items-center\">\n                  <i className=\"icon-check\"></i>\n                </span>\n              </span>\n              <h4 className=\"radio__label pr-2\">{option.value}</h4>\n            </label>\n          </div>\n        )\n      })\n      options.push(\n        // <div>\n        //   <Button\n        //     variant=\"primary\"\n        //     className=\"px-3 py-1 font-medium onboarding-next-button\"\n        //     onClick={() => this.answerCheckBoxQuestion(this.state.question.id, this.state.checkBoxSelected)}\n        //   >Done</Button>\n        // </div>\n      );\n    }\n\n    return (\n      <>\n        <div className=\"personalise\">\n          {/* Personalise Header */}\n          <PersonaliseHeader />\n\n          {/* Personalise Body */}\n          <div className=\"baby-registry-onboarding container mb-15\">\n            <div className=\"row justify-content-center mt-12 mt-md-24\">\n              <div className=\"col-12 col-md-6\">\n                <span\n                  className=\"font-body onboading-question\">{this.state.question.title}</span>\n              </div>\n            </div>\n            <div className=\"row justify-content-center mt-6\">\n              <div className=\"col-12 col-md-6\">\n                {options.map(option => option)}\n              </div>\n            </div>\n          </div>\n\n          {/* Personalise Footer */}\n          <PersonaliseFooter\n            percentage={this.calulatePercentage(this.props.statePersonaliseAnswers.length, this.props.statePersonaliseQuestions.length)}\n            prevQuestion={() => { this.gotoPrevQuestion(this.state.prevQuestionId[this.state.prevQuestionId.length - 1]) }}\n            nextQuestion={() => { this.gotoNextQuestion(this.state.question, this.state.parentId) }}\n          />\n        </div>\n\n        <ToastContainer\n          position=\"top-center\"\n          className=\"personalise-toast-container\"\n          toastClassName=\"personalise-toast px-3 py-1\"\n          autoClose={4000}\n          hideProgressBar={true}\n          newestOnTop={true}\n          draggable={false}\n          closeOnClick={false}\n          closeButton={null}\n        />\n      </>\n    );\n  }\n};\n\nconst mapStateToProps = state => {\n  return {\n    stateRegistryInfo: state.registry.info,\n    stateLoggedIn: state.registry.loggedIn,\n    stateCheckList: state.personaliseCheckList.editedPersonaliseCheckList,\n    statePersonaliseQuestions: state.personaliseCheckList.questions,\n    statePersonaliseAnswers: state.personaliseCheckList.answers,\n  }\n}\n\n\nexport default connect(\n  mapStateToProps\n)(PersonaliseChecklist);","import React, { useState } from \"react\";\nimport { GET_CATEGORIES } from \"../../../../api/queries\";\nimport { graphQL } from \"../../../../api/axios\";\nimport { setPersonaliseCheckListItems } from \"../../PersonaliseCheckListActions\";\nimport { connect } from \"react-redux\";\nimport './EditChecklist.scss';\nimport Counter from \"../../../commons/components/counter/Counter\";\nimport {\n  incrementCheckListQuantity,\n  setIsActiveCheckList,\n  decrementCheckListQuantity\n} from \"../../PersonaliseCheckListActions\";\nimport Button from \"../../../commons/components/button-component/ButtonComponent\";\nimport routes from \"utils/routes\";\nimport { SAVE_UPDATED_CHECKLIST } from \"api/mutations\";\nimport { toast } from \"react-toastify\";\nimport Toast from \"modules/commons/components/toast/Toast\";\nimport { getAllCategories } from 'utils/commonFunction';\nimport Modal from \"../../../commons/components/modal-component/ModalComponent\";\n\n// import {setCheckListItems} from \"../../../my-registry/MyRegistryActions\";\n\nclass PersonaliseChecklist extends React.Component {\n  state = {\n\t  showOverrideModal: false\n\t};\n\n  componentDidMount() {\n    this.getAllCategories(this.props.stateRegistryInfo.id, this.props.dispatch);\n  }\n\n  getAllCategories = (registryId, dispatch) => {\n    let data = {\n      query: GET_CATEGORIES,\n      variables: {\n        registryId: parseInt(registryId)\n      },\n    }\n    graphQL(data).then(res => {\n      if (res.data.errors || res.data.error) {\n        // TODO: Add toast\n        console.log('Something went wrong-->', res.data.errors)\n        return;\n      } else {\n        let resData = getAllCategories(res.data.data.registryCategories, true)\n        let finalCheckList = []\n        // For Parent categories\n        for (let category of resData) {\n          let finalSubCategory = []\n\n          if (category.subCategories.length) {\n            // For Sub-Categories\n            for (let subCategory of category.subCategories) {\n              let tempSubCategory = []\n              if (subCategory.subProductTypes.length) {\n\n                // For subProductType\n                for (let subProductType of subCategory.subProductTypes) {\n                  subProductType.categoryName = subCategory.categoryName + ' (' + subProductType.categoryName + ')'\n                  if (subProductType.isExcluded) {\n                    subProductType.totalItemsCount = 1\n                    subProductType['isAdded'] = false\n                  } else {\n                    subProductType['isAdded'] = true\n                  }\n                  tempSubCategory.push(subProductType)\n                }\n              }\n              else {\n                if (subCategory.isExcluded) {\n                  subCategory.totalItemsCount = 1\n                  subCategory['isAdded'] = false\n                } else {\n                  subCategory['isAdded'] = true\n                }\n                tempSubCategory.push(subCategory)\n              }\n              finalSubCategory.push(...tempSubCategory)\n            }\n            let tempCategory = { ...category }\n            tempCategory.subCategories = finalSubCategory\n            finalCheckList.push(tempCategory)\n          }\n\n        }\n        dispatch(setPersonaliseCheckListItems(finalCheckList))\n      }\n    }).catch(err => {\n      console.error('Something went wrong-->', err);\n    })\n  }\n\n  closeAndSavePersonaliseCheckList = (event) => {\n    event.preventDefault();\n    let finalCheckListData = []\n    let tempStateCheckList = [...this.props.stateCheckList]\n    for (let category of tempStateCheckList) {\n      for (let subCategory of category.subCategories) {\n        // let tempData = null\n        let tempData = {\n          registryCategoryId: subCategory.id,\n          itemsCount: subCategory.totalItemsCount,\n          isExcluded: !subCategory.isAdded\n        }\n        finalCheckListData.push(tempData)\n      }\n    }\n\n    let registryId = this.props.stateRegistryInfo.id\n    let data = {\n      query: SAVE_UPDATED_CHECKLIST,\n      variables: {\n        registryId: registryId,\n        itemCountData: finalCheckListData\n      },\n    }\n\n    graphQL(data).then(res => {\n      if (res.data) {\n        toast.success((\n          <p>Personalise Checklist Updated Successfully</p>\n        ))\n        this.props.history.push(routes.REGISTRY.HOME)\n      }\n\n    }).catch(err => {\n      console.error(err.message)\n      toast.error((\n        <p>Some error occurred.</p>\n      ))\n    })\n  }\n\n  gotoPersonaliseQuestions = (event) => {\n    event.preventDefault();\n    this.props.history.push(routes.PERSONALIZE.HOME)\n  }\n\n  removeConfirmFooter = (\n    <>\n\t  <Button className='py-1 px-3 font-medium' variant='secondary' onClick={() => {\n\t  this.props.history.push(routes.REGISTRY.HOME)\n\t  this.setState({showOverrideModal:false})\n\t  }}>Do Not Override</Button>\n      <Button className='py-1 px-3 font-medium' variant='primary' onClick={(e) => {\n\t\tthis.closeAndSavePersonaliseCheckList(e)\n\t\tthis.setState({showOverrideModal:false});\n      }}>Yes, Please Override</Button>\n    </>\n  )\n\n  render() {\n    return (\n\t  // TODO: API call\n\t  <>\n      <div className=\"personalise-checklist\">\n        {/* Header */}\n        <div className=\"py-2 personalise-checklist-header font-body font-medium\">\n          <div className=\"container\">\n            <div className=\"row align-items-center\">\n              <div className=\"col-12 col-md-6 \">Edit Checklist</div>\n              <div className=\"col-12 col-md-6 d-flex align-items-center justify-content-start justify-content-md-end\">\n                <a className=\"mr-6 personalise-header-link\" tabindex=\"0\" onClick={(e) => { this.gotoPersonaliseQuestions(e) }}>Take our quiz</a>\n                <div>\n                  <Button\n                    variant=\"primary\"\n                    className=\"px-3 py-1  font-medium done-btn\"\n                    onClick={()=>this.setState({showOverrideModal:true})}\n                  >Save & Close</Button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* All categries selection body */}\n        {this.props.stateCheckList.map((parentCategories, i) => (\n          <div className=\"mt-17 mt-md-6 container\" key={parentCategories.categoryName + \"-\" + i}>\n            <div className=\"checklist-title pb-4 body-text\">\n              {parentCategories.categoryName}\n            </div>\n            <div className=\"row mt-4\">\n              {parentCategories.subCategories.map((subCategories, i) => (\n                <div className=\"col-12 col-md-6 col-lg-3 mb-5\" key={subCategories.id}>\n                  <div className={[\"checklist-card pl-2 pr-3 py-3\",\n                    !subCategories.isAdded ? \"add-checklist-bg\" : \"\"].join(' ')\n                  }>\n                    <div className=\"d-flex mb-4 checklist-action-btn\">\n                      <div className=\"text-body font-medium align-self-center\">{subCategories.categoryName}</div>\n                      {subCategories.addedItemsCount <= 0 ?\n                        <div className=\"ml-auto\">\n                          <button className={[\"checklist-add-btn\",\n                            !subCategories.isAdded ? \"checklist-icon-plus\" : \"icon-close\"].join(' ')}\n                            onClick={() => this.props.dispatch(setIsActiveCheckList(subCategories.id, !subCategories.isAdded))} />\n                        </div>\n                        : null\n                      }\n                    </div>\n                    <div className=\"d-flex align-items-center\">\n                      <Counter\n                        counter={subCategories.totalItemsCount}\n                        incrementHandler={() => this.props.dispatch(incrementCheckListQuantity(subCategories.id, 1))}\n                        decrementHandler={() => this.props.dispatch(decrementCheckListQuantity(subCategories.id, 1))}\n                      />\n                      {subCategories.addedItemsCount > 0 ?\n                        <span className=\"ml-auto text-sm item-count-label\">{subCategories.addedItemsCount} added</span>\n                        : null\n                      }\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        ))}\n        <Toast />\n      </div>\n\t  <Modal\n        show={this.state.showOverrideModal}\n        size=\"lg\"\n        footer={this.removeConfirmFooter}\n      >\n        <h2 className=\"mb-1\">Changing your quiz answers will override the previous edits to your checklist.</h2>\n\t\t    <label className=\"text-sm\">If you do not want to change, click on Do not override, which will take you back to your registry and the changes you made to the quiz will be discarded.</label>\n      </Modal>\n\t  </>\n    );\n  }\n\n};\n\nconst mapStateToProps = state => {\n  return {\n    stateCheckList: state.personaliseCheckList.editedPersonaliseCheckList,\n    stateRegistryInfo: state.registry.info\n  }\n}\n\n\nexport default connect(\n  mapStateToProps\n)(PersonaliseChecklist);","import React from \"react\";\nimport \"./GuestViewHeader.scss\";\nimport Button from \"../../../commons/components/button-component/ButtonComponent\";\nimport MoreOption from \"../../../commons/components/more-option/MoreOption\";\nimport { connect } from \"react-redux\";\nimport { toast } from 'react-toastify';\n\n\nclass GuestViewHeader extends React.Component {\n\n  state = {\n    showEditRegistryDetail: false,\n  }\n\n  closeEditRegistryDetail = () => {\n    this.setState({ showEditRegistryDetail: false })\n  }\n\n  changeRegistryDetail = (ev) => {\n    ev.preventDefault();\n    this.setState({ showEditRegistryDetail: true })\n  }\n\n  render() {\n    return (\n      <>\n        <div className=\"view-registry-header\" style={{ backgroundImage: 'url(' + this.props.stateGuestViewRegistry.image.image + ')' }}>\n\n          <div className=\"header-registry-detail\">\n            <div className=\"container my-4\">\n              <div className=\"row\">\n                <div className=\"col\">\n                  <div className=\"d-flex align-items-center\">\n                    <h2>{this.props.stateGuestViewRegistry.displayName ? this.props.stateGuestViewRegistry.displayName : \"\"}</h2>\n                  </div>\n                  {this.props.stateGuestViewRegistry.greeting ?\n                    <span\n                      className=\"text-sm view-registry-header-greeting\">{this.props.stateGuestViewRegistry.greeting}</span>\n                    :\n                    null\n                  }\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    stateRegistryInfo: state.registry.info,\n    stateGuestViewRegistry: state.guestView.info\n  }\n}\n\n\nexport default connect(\n  mapStateToProps\n)(GuestViewHeader);","import React from 'react';\nimport \"./GuestSortFilter.scss\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport { activeGuestSortFilter } from '../../GuestViewAction';\n\nconst GuestSortFilter = () => {\n\n  const dispatch = useDispatch()\n  const activeSortFilterState = useSelector(state => state.guestView.activeGuestSortFilter)\n  const filterContentRef = React.createRef();\n\n  const toggleFilterContent = () => {\n    filterContentRef.current.classList.toggle(\"show\");\n  }\n\n\n  const handleSortSelection = (sortItem) => {\n    dispatch(activeGuestSortFilter(sortItem))\n    filterContentRef.current.classList.toggle(\"show\");\n  }\n\n  const sortByList = [\n    {\n      sortId: 1,\n      sortTitle: 'Featured'\n    },\n    {\n      sortId: 2,\n      sortTitle: 'Price: Low to High'\n    },\n    {\n      sortId: 3,\n      sortTitle: 'Price: High to Low'\n    }\n  ]\n\n  return (\n    <div className=\"sort-section-filter\">\n      <div className=\"sort-filter-btn px-2 d-flex justify-content-between py-1\" onClick={toggleFilterContent}>\n        <span className=\"font-body selected-sort-text text-body\">{activeSortFilterState.sortTitle}</span>\n        <i className=\"icon-filter-1 pl-1 mr-1 icon-chevron-down\" />\n      </div>\n      <div className=\"filter-content\" ref={filterContentRef}>\n        <div className=\"d-flex flex-column\">\n          {sortByList.map(sortItem => {\n            return (\n              <div className=\"filter-item py-2 px-2\" key={\"sortid-\" + sortItem.sortId} onClick={() => handleSortSelection(sortItem)}>\n                <div className=\"text-sm\">{sortItem.sortTitle}</div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default GuestSortFilter;\n","import React from 'react';\nimport { connect } from \"react-redux\";\nimport GuestSortFilter from \"../guest-sort-filter/GuestSortFilter\";\nimport './GuestSortSection.scss';\nimport { clearGuestViewFilter, setChildGuestViewFilter, setGuestViewProducts, clearViewGuestPaginationInfo } from \"../../GuestViewAction\";\nimport FilterItemChip from \"modules/my-registry/components/filter/filter-item-chip/FilterItemChip\"\n\nclass GuestSortSection extends React.Component {\n\n  // Filter chips close handler\n  deleteChipHandler = async (isParent, childId) => {\n    if (isParent) {\n      await this.props.dispatch(clearGuestViewFilter())\n    } else {\n      const newChildArray = this.props.stateFilterApplied.childFilter.filter(element => {\n        return element !== childId\n      })\n      await this.props.dispatch(setChildGuestViewFilter(newChildArray))\n    }\n    await this.props.dispatch(clearViewGuestPaginationInfo())\n    await this.props.dispatch(setGuestViewProducts([]))\n    await this.props.setFilterhandler()\n  }\n\n  // Filter chips\n  getFilterChips = (stateFilterApplied) => {\n    let filterChips = {}\n    if (stateFilterApplied) {\n      let allChild = []\n      for (let filterCat of this.props.stateFilterCategory) {\n        for (let childCat of filterCat.child) {\n          allChild.push(childCat)\n        }\n      }\n      if (stateFilterApplied.childFilter) {\n        filterChips.childFilter = [...stateFilterApplied.childFilter].map(item => {\n          let finalAllChild = [...allChild].find(element => {\n            return element.id === item\n          })\n          return finalAllChild\n        })\n      }\n    }\n    return filterChips;\n  }\n\n  //Clear filter state\n  clearFilterHandler = async (ev) => {\n    ev.preventDefault()\n    await this.props.dispatch(clearGuestViewFilter())\n    await this.props.dispatch(clearViewGuestPaginationInfo())\n\t\tawait this.props.dispatch(setGuestViewProducts([]))\n    await this.props.setFilterhandler()\n  }\n\n  render() {\n    let filterChips = this.getFilterChips(this.props.stateFilterApplied)\n\n    return (\n      <>\n        <div className=\"row\">\n          <div className=\"col\">\n            <h4 className=\"font-weight-bold mr-2 filter-section-total-items\">{this.props.productCount} {this.props.productCount === 1 ? \"Gift\" : \"Gifts\"}</h4>\n          </div>\n          <div className=\"col-5 filter-sort-section\">\n            <div className=\"d-flex justify-content-end\">\n              <div className=\"text-sm sort-by-text mr-2 align-self-center\">Sort by</div>\n              <GuestSortFilter />\n            </div>\n\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col-7\">\n            <div className=\"filtered-items\">\n              {filterChips.childFilter ?\n                filterChips.childFilter.map(item =>\n                  item ?\n                    <FilterItemChip\n                      text={item.display}\n                      className=\"mr-2\"\n                      key={filterChips.id + \"-\" + item.id}\n                      deleteHandler={() => this.deleteChipHandler(false, item.id)} /> : null)\n                : null}\n              {this.props.stateFilterApplied.childFilter.length > 0 ?\n                <a className=\"font-medium text-sm filter-clear-link\" href=\"#\" tabindex=\"0\"\n                  onClick={(ev) => this.clearFilterHandler(ev)}>Clear\n                all</a>\n                : null}\n            </div>\n          </div>\n        </div>\n      </>\n    )\n  }\n}\n\n\nconst mapStateToProps = state => {\n  return {\n    stateViewRegistryProducts: state.guestView.product,\n    stateActiveSortFilter: state.guestView.activeGuestSortFilter,\n    stateGuestViewRegistry: state.guestView.guestViewRegistry,\n    stateRegistryInfo: state.guestView.info,\n    stateFilterApplied: state.guestView.guestViewFilterApplied,\n    stateFilterCategory: state.guestView.guestFilterCategory\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(GuestSortSection);\n","import React, { useState } from 'react'\nimport \"./GuestFilter.scss\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setChildGuestViewFilter, clearGuestViewFilter, setGuestViewFilterCategory, setGuestViewProducts, clearViewGuestPaginationInfo } from '../../GuestViewAction';\nimport { FILTERS } from \"utils/constants\";\n\nconst GuestFilter = (props) => {\n\n\tconst dispatch = useDispatch()\n\tlet tempParentFilterId = useSelector(state => state.guestView.guestViewFilterApplied.parentFilter)\n\tlet tempChildFilterIds = useSelector(state => state.guestView.guestViewFilterApplied.childFilter)\n\tlet stateAddedProducts = useSelector(state => state.guestView.product)\n\tconst stateCategoriesInfo = useSelector(state => state.guestView.checkList)\n\tlet stateFilterCategories = useSelector(state => state.guestView.guestFilterCategory)\n\tlet [filterCategoryLimit, setFilterCategoryLimit] = useState([])\n\n\tconst childChangeHandler = async (childId, parentId) => {\n\n\t\tif (parentId !== tempParentFilterId) {\n\t\t\tif (tempChildFilterIds.length > 0) {\n\t\t\t\tawait dispatch(setChildGuestViewFilter([]))\n\t\t\t}\n\t\t}\n\n\t\tconst childIndex = tempChildFilterIds.indexOf(childId)\n\n\t\tif (childIndex === -1) {\n\t\t\tawait dispatch(setChildGuestViewFilter([...tempChildFilterIds, childId]))\n\t\t} else {\n\t\t\tlet newChildArray = [...tempChildFilterIds]\n\t\t\tnewChildArray.splice(childIndex, 1)\n\t\t\tawait dispatch(setChildGuestViewFilter(newChildArray))\n\t\t}\n\t\tawait dispatch(clearViewGuestPaginationInfo())\n\t\tawait dispatch(setGuestViewProducts([]))\n\t\tprops.setFilterhandler()\n\t}\n\n\tconst clearClickHandler = async () => {\n\t\tawait dispatch(clearGuestViewFilter())\n\t\tawait dispatch(clearViewGuestPaginationInfo())\n\t\tawait dispatch(setGuestViewProducts([]))\n\t\tawait props.setFilterhandler()\n\t}\n\n\tconst changeParentLimitHandler = (parentFilterID) => {\n\t\tlet limitLength = null\n\t\tlet filterCategory = [...stateFilterCategories].map(parentFilter => {\n\t\t\tif (parentFilter.id === parentFilterID) {\n\t\t\t\tparentFilter.limit = parentFilter.child.length\n\t\t\t\tlimitLength = parentFilter.child.length\n\t\t\t}\n\t\t\treturn parentFilter\n\t\t})\n\t\tdispatch(setGuestViewFilterCategory(filterCategory))\n\n\t\tlet isFound = false\n\t\tlet newFilterCateoryLimit = [...filterCategoryLimit].map(categorylimit => {\n\t\t\tif (categorylimit.id === parentFilterID) {\n\t\t\t\tcategorylimit.limit = limitLength\n\t\t\t\tisFound = true\n\t\t\t\treturn categorylimit\n\t\t\t}\n\t\t\treturn categorylimit\n\t\t})\n\n\t\tprops.categoryFilterLimit(newFilterCateoryLimit);\n\t\tif (!isFound) {\n\t\t\tnewFilterCateoryLimit.push({ 'id': parentFilterID, 'limit': limitLength })\n\t\t}\n\t\tsetFilterCategoryLimit(newFilterCateoryLimit)\n\t}\n\n\treturn (\n\t\t<div className=\"view-filter\">\n\t\t\t<div className=\"view-filter-heading pb-1 d-flex align-items-baseline\">\n\t\t\t\t<h4 className=\"font-weight-bold\">Filters</h4>\n\t\t\t\t{tempChildFilterIds.length !== 0 ?\n\t\t\t\t\t<a tabindex='0' className=\"filter-clear-all text-sm font-medium ml-auto\" onClick={() => clearClickHandler()}>Clear all</a> : null\n\t\t\t\t}\n\t\t\t</div>\n\t\t\t<div className=\"d-flex flex-column\">\n\t\t\t\t{[...stateFilterCategories].map(parentFilter => (\n\t\t\t\t\t<div className=\"filter-item\" key={\"filter-\" + parentFilter.id}>\n\t\t\t\t\t\t{/* Parent filter */}\n\t\t\t\t\t\t<div className=\"text-body filter-title pt-5 d-flex\">{parentFilter.display}</div>\n\n\t\t\t\t\t\t{/* Child filter */}\n\t\t\t\t\t\t{parentFilter.child ? (\n\t\t\t\t\t\t\t<div className=\"d-flex flex-column mt-2\" key={\"child-filter-\" + parentFilter.id}>\n\t\t\t\t\t\t\t\t<div className=\"mt-3 fliter-checkbox-section\">\n\t\t\t\t\t\t\t\t\t{parentFilter.child.map((childFilter, index) => (\n\t\t\t\t\t\t\t\t\t\tchildFilter.count > 0 ?\n\t\t\t\t\t\t\t\t\t\t\tindex < (parentFilter.limit ? parentFilter.limit : parentFilter.child.length) ?\n\t\t\t\t\t\t\t\t\t\t\t\t<label className=\"view-fliter-checkbox d-flex align-items-center mb-4\" key={childFilter.id}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"checkbox__input mr-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"checkbox\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname={childFilter.display}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={childFilter.display}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchecked={tempChildFilterIds.includes(childFilter.id) ? \"checked\" : \"\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={() => childChangeHandler(childFilter.id, parentFilter.id)} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"checkbox__control d-flex justify-content-center align-items-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i className=\"icon-check\"></i>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"radio__label text-sm\">{childFilter.display} {childFilter.count > 0 ? <>({childFilter.count})</> : null}</p>\n\t\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t\t\t\t\t: null\n\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t{(parentFilter.limit && (parentFilter.limit !== parentFilter.child.length) && (parentFilter.child.length - parentFilter.limit) > 0) ?\n\t\t\t\t\t\t\t\t\t\t<div className=\"filter-clear-all text-sm font-medium ml-4 pb-3\" onClick={() => changeParentLimitHandler(parentFilter.id)}>Show {parentFilter.child.length - parentFilter.limit} more</div>\n\t\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)\n\t\t\t\t\t\t\t: null}\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default GuestFilter;\n","import React from \"react\";\nimport \"./GuestView.scss\";\nimport { connect } from \"react-redux\";\nimport { updateGuestViewRegistry, getGuestCategories } from \"../../utils/commonFunction\";\nimport Button from \"../commons/components/button-component/ButtonComponent\";\nimport GuestViewHeader from \"./containers/guest-view-header/GuestViewHeader\";\nimport GuestSortSection from \"./containers/guest-sort/GuestSortSection\";\nimport GuestViewCard from \"./components/GuestViewCard\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport { VIEW_GIFT_PRODUCTS_PER_REQUEST } from \"utils/constants\";\nimport { setGuestViewProducts, setViewGuestPaginationInfo, updateGuestViewInfo, setGuestViewFilterCategory, clearViewGuestPaginationInfo, setChildGuestViewFilter } from './GuestViewAction';\nimport { GET_GUEST_REGISTRY_PRODUCT } from 'api/queries';\nimport { MEDIA_URL_PREFIX } from \"utils/constants\";\nimport { graphQL } from 'api/axios';\nimport GuestFilter from './containers/guest-filter/GuestFilter';\nimport { FILTERS } from \"utils/constants\";\nimport Toast from \"modules/commons/components/toast/Toast\";\nimport RedirectionScreen from \"modules/track-gifts/components/redirection-screen/RedirectionScreen\";\nimport { M_A_BABY_PRODUCT_LINK } from 'utils/constants';\nimport Modal from \"modules/commons/components/modal-component/ModalComponent\";\n\n\nclass GuestView extends React.Component {\n\n  state = {\n    isFirstTime: true,\n    filterCategoryLimit: [],\n    isSendMessageModalOpen: false,\n    errors: {},\n    subject: '',\n    message: '',\n    totalProductCount: null\n  }\n\n  BABY_GIFTS_URL = \"https://monicaandandy.com/collections/baby-gifts\"\n\n  // Constant variables for filters\n  AVAILABLE = \"available\"\n  RESERVED = \"reserved\"\n  PURCHASED = \"purchased\"\n  PRICE_1 = \"price-1\"\n  PRICE_2 = \"price-2\"\n  PRICE_3 = \"price-3\"\n  MONICA_AND_ANDY = \"monicaandandy\"\n  ELSEWHERE = \"elsewhere\"\n\n  getLimitOfFliter = (parentId) => {\n    let limit = null\n    const filterCategory = [...this.state.filterCategoryLimit]\n    for (let category of filterCategory) {\n      if (parentId === category.id && category.limit) {\n        limit = category.limit\n      }\n    }\n    return limit\n  }\n\n  // Updating product count in filter categories\n  updateFilterList = (registryItemsAnalysisCount, categoryData) => {\n\n    let newFilterList = [\n      {\n        id: \"giftStatus\",\n        display: \"Gift Status\",\n        child: [\n          {\n            id: this.AVAILABLE,\n            display: FILTERS.AVAILABLE_DISPLAY,\n            count: registryItemsAnalysisCount.totalAvailable\n          },\n          {\n            id: this.RESERVED,\n            display: FILTERS.RESERVED_DISPLAY,\n            count: registryItemsAnalysisCount.totalReserved\n          },\n          {\n            id: this.PURCHASED,\n            display: FILTERS.PURCHASED_DISPLAY,\n            count: registryItemsAnalysisCount.totalPurchased\n          }\n        ]\n      },\n      {\n        id: \"categories\",\n        display: FILTERS.CATEGORIES_DISPLAY,\n        limit: this.getLimitOfFliter(\"categories\") ? this.getLimitOfFliter(\"categories\") : 6,\n        child: [...this.props.stateCategoriesInfo].filter(category => {\n          let id = category.category.id\n          let count = categoryData[id]\n          if (count > 0) {\n            return true\n          }\n        }).map(category => {\n          let newCategory = { ...category }\n          let id = category.category.id\n          newCategory.id = category.category.id\n          newCategory['display'] = newCategory.categoryName\n          newCategory['count'] = categoryData[id]\n          return newCategory\n        })\n      },\n      {\n        id: \"price\",\n        display: FILTERS.PRICE_DISPLAY,\n        child: [\n          {\n            id: this.PRICE_1,\n            display: FILTERS.PRICE_DISPLAY_1,\n            count: registryItemsAnalysisCount.under50\n          },\n          {\n            id: this.PRICE_2,\n            display: FILTERS.PRICE_DISPLAY_2,\n            count: registryItemsAnalysisCount.between50100\n          },\n          {\n            id: this.PRICE_3,\n            display: FILTERS.PRICE_DISPLAY_3,\n            count: registryItemsAnalysisCount.moreThan100\n          }\n        ]\n      },\n      {\n        id: \"store\",\n        display: FILTERS.STORE_DISPLAY,\n        child: [\n          {\n            id: this.MONICA_AND_ANDY,\n            display: FILTERS.MONICA_AND_ANDY_DISPLAY,\n            count: registryItemsAnalysisCount.maStoreItems\n          },\n          {\n            id: this.ELSEWHERE,\n            display: FILTERS.ELSEWHERE_DISPLAY,\n            count: registryItemsAnalysisCount.otherStoreItems\n          },\n        ]\n      },\n\n    ]\n\n    // Removing All other applied filters\n    let allChildFilterCat = []\n    for (let filterCat of newFilterList) {\n      for (let childCat of filterCat.child) {\n        allChildFilterCat.push(childCat)\n      }\n    }\n    let finalFilterApplied = []\n    for (let item of this.props.stateFilterApplied) {\n      for (let ele of allChildFilterCat) {\n        if (ele.id === item && ele.count > 0) {\n          finalFilterApplied.push(item)\n        }\n      }\n    }\n    // Setting total Product Count\n    this.setState({\n      totalProductCount: (registryItemsAnalysisCount.maStoreItems + registryItemsAnalysisCount.otherStoreItems)\n    })\n    this.props.dispatch(setChildGuestViewFilter(finalFilterApplied))\n\n    this.props.dispatch(setGuestViewFilterCategory(newFilterList))\n    return newFilterList\n  }\n\n  getFiltersApplied = (stateFilterApplied, activeSortFilterState) => {\n    const childFilterArray = [...stateFilterApplied]\n    let filterApplied = {}\n    // For Gift Status\n    if (childFilterArray.includes(this.AVAILABLE)) {\n      filterApplied.isAvailable = true\n    }\n    if (childFilterArray.includes(this.RESERVED)) {\n      filterApplied.isReserved = true\n    }\n    if (childFilterArray.includes(this.PURCHASED)) {\n      filterApplied.isPurchased = true\n    }\n\n    // For Sort\n    if (activeSortFilterState.sortId === 2) {\n      filterApplied.sortBy = 'item__price'\n    } else if (activeSortFilterState.sortId === 3) {\n      filterApplied.sortBy = '-item__price'\n    }\n\n    // For Store\n    let store = []\n    if (childFilterArray.includes(this.MONICA_AND_ANDY)) {\n      store.push(this.MONICA_AND_ANDY)\n    }\n    if (childFilterArray.includes(this.ELSEWHERE)) {\n      store.push(this.ELSEWHERE)\n    }\n    if (store.length) {\n      filterApplied.store = store\n    }\n\n    let lessThanEqual = 0\n    let greaterThanEqual = 0\n    let hasPriceFilter = false\n    // For Price\n    if (childFilterArray.includes(this.PRICE_1) &&\n      childFilterArray.includes(this.PRICE_2) &&\n      childFilterArray.includes(this.PRICE_3)) {\n      greaterThanEqual = 0\n      hasPriceFilter = true\n    }\n    else if (childFilterArray.includes(this.PRICE_1) &&\n      childFilterArray.includes(this.PRICE_2)) {\n      lessThanEqual = 100\n      hasPriceFilter = true\n    }\n    else if (childFilterArray.includes(this.PRICE_1) &&\n      childFilterArray.includes(this.PRICE_3)) {\n      lessThanEqual = 49\n      greaterThanEqual = 100\n      hasPriceFilter = true\n    }\n    else if (childFilterArray.includes(this.PRICE_2) &&\n      childFilterArray.includes(this.PRICE_3)) {\n      greaterThanEqual = 50\n      hasPriceFilter = true\n    }\n    else if (childFilterArray.includes(this.PRICE_1)) {\n      lessThanEqual = 49\n      hasPriceFilter = true\n    }\n    else if (childFilterArray.includes(this.PRICE_2)) {\n      greaterThanEqual = 50\n      lessThanEqual = 100\n      hasPriceFilter = true\n    }\n    else if (childFilterArray.includes(this.PRICE_3)) {\n      greaterThanEqual = 100\n      hasPriceFilter = true\n    }\n    if (hasPriceFilter) {\n      filterApplied.price_Lte = lessThanEqual\n      filterApplied.price_Gte = greaterThanEqual\n    }\n\n    let categories = []\n    // For categories\n    for (let cat of [...this.props.stateCategoriesInfo]) {\n      if (childFilterArray.includes(cat.category.id)) {\n        categories.push(cat.category.id)\n      }\n    }\n    if (categories.length) {\n      filterApplied.categories = categories\n    }\n\n    return filterApplied\n  }\n\n  updateGuestViewRegistryProduct = async (urlSlug, first = VIEW_GIFT_PRODUCTS_PER_REQUEST, emptyAllProduct = false) => {\n    let filtersApplied = this.getFiltersApplied(this.props.stateFilterApplied, this.props.activeSortFilterState)\n    let clearAllProduct = false\n    if (emptyAllProduct) {\n      await this.props.dispatch(clearViewGuestPaginationInfo())\n      await this.props.dispatch(setGuestViewProducts([]))\n    }\n    if (this.props.stateGuestViewPagination.endCursor === null) {\n      clearAllProduct = true\n    }\n    let reqData = {\n      query: GET_GUEST_REGISTRY_PRODUCT,\n      variables: {\n        urlSlug: urlSlug,\n        after: this.props.stateGuestViewPagination.endCursor,\n        first: first,\n        ...filtersApplied\n      }\n    }\n\n    await graphQL(reqData).then(async res => {\n      if (res.data.data.registryAsGuest) {\n        if (emptyAllProduct || this.props.stateGuestViewPagination.endCursor === null) {\n          await this.props.dispatch(setGuestViewProducts([]))\n        }\n\n        // Storing Product of GuestView\n        let responseData = [...res.data.data.registryAsGuest.registryItems.edges].map(item => {\n          let newItemObj = { ...item.node }\n          delete newItemObj.registryitemImage;\n          if (item.node.registryitemImage.length > 0) {\n            newItemObj.item.imageUrl = (MEDIA_URL_PREFIX.LOCAL_MEDIA_URL ? MEDIA_URL_PREFIX.LOCAL_MEDIA_URL : \"\") + item.node.registryitemImage[0].image;\n          }\n          return newItemObj;\n        })\n        let finalData = responseData.filter(product => product.registryCategories.length > 0)\n        if (!(emptyAllProduct || this.props.stateGuestViewPagination.endCursor === null || clearAllProduct)) {\n          finalData = [...this.props.stateAddedProducts, ...finalData]\n        }\n        await this.props.dispatch(setGuestViewProducts([...finalData]))\n\n        // Storing PagenationInfo\n        let pagenationInfo = { ...res.data.data.registryAsGuest.registryItems.pageInfo }\n        await this.props.dispatch(setViewGuestPaginationInfo(pagenationInfo))\n\n        this.updateFilterList({ ...res.data.data.registryAsGuest.registryItemsAnalysisCount }, { ...res.data.data.registryAsGuest.categoryData })\n      }\n    }).catch(err => {\n      this.props.dispatch(updateGuestViewInfo({ notFound: true }))\n      if (err.response && err.response.data.errors) {\n        for (const error of err.response.data.errors) {\n          // TODO: Implement toast if necessary\n          console.log(error.message)\n        }\n      }\n    })\n  }\n\n  filterCategoryLimitHandler = (limitData) => {\n    this.setState({ filterCategoryLimit: limitData })\n  }\n\n  sortByHighToLow = (productList) => {\n    return productList.sort((a, b) => { return b.item.price - a.item.price });\n  }\n\n  sortByLowToHigh = (productList) => {\n    return productList.sort((a, b) => { return a.item.price - b.item.price });\n  }\n\n  getSortedFilteredProducts = (guestProducts, activeSortFilterState, filterApplied) => {\n    let sortedProducts = [];\n    if (activeSortFilterState.sortId === 1) {\n      sortedProducts = [...guestProducts]\n    }\n\n    else if (activeSortFilterState.sortId === 2) {\n      sortedProducts = this.sortByLowToHigh([...guestProducts])\n    }\n    else if (activeSortFilterState.sortId === 3) {\n      sortedProducts = this.sortByHighToLow([...guestProducts])\n    }\n\n    return sortedProducts;\n  }\n\n  getdataForFirstTime = async () => {\n    await getGuestCategories(this.props.match.params.registrySlug, this.props.dispatch)\n    await this.props.dispatch(clearViewGuestPaginationInfo())\n    await this.updateGuestViewRegistryProduct(this.props.match.params.registrySlug, VIEW_GIFT_PRODUCTS_PER_REQUEST, true)\n  }\n\n  // Validate Send message data\n  validSendMessageData = () => {\n    let errors = {}\n    let valid = true\n    if (this.state.subject.length <= 0) {\n      errors['subject'] = \"This field is mandatory\"\n      valid = false\n    }\n\n    if (this.state.message.length <= 0) {\n      errors['message'] = \"This field is mandatory\"\n      valid = false\n    }\n\n    this.setState({\n      errors: errors\n    })\n    return valid\n  }\n\n  subjectChangeHandler = (ev) => {\n    let errors = { ...this.state.errors }\n    if (errors.subject) {\n      delete errors.subject\n    }\n\n    ev.persist();\n    this.setState({\n      subject: ev.target.value\n    })\n  }\n\n  messageChangeHandler = (ev) => {\n    let errors = { ...this.state.errors }\n    if (errors.message) {\n      delete errors.message\n    }\n\n    ev.persist();\n    if (ev.target.value.length <= 280) {\n      this.setState({\n        message: ev.target.value\n      })\n    }\n  }\n\n  sendMessageHandler = () => {\n    if (!this.validSendMessageData()) {\n      return false\n    }\n    // TODO: API call when its done\n  }\n\n  render() {\n\n    if (this.props.stateGuestGiftsRedirectionInfo.store) {\n      return (\n        <RedirectionScreen store={this.props.stateGuestGiftsRedirectionInfo.store} />\n      )\n    }\n\n    if (this.props.stateGuestViewRegistry.urlSlug !== this.props.match.params.registrySlug) {\n      updateGuestViewRegistry(this.props.match.params.registrySlug, this.props.dispatch)\n    }\n\n    // When registry doesn't exists\n    if (this.props.stateGuestViewRegistry.notFound) {\n      return <h1>Registry not found</h1>;\n    }\n\n    if (this.props.stateGuestViewRegistry.id) {\n      // When registry exists and it is not public\n      if (this.props.stateGuestViewRegistry.isPublic === false) {\n        let registryUsers = [this.props.stateGuestViewRegistry.user.firstName]\n        if (this.props.stateGuestViewRegistry.user.partnerUser) {\n          registryUsers.push(this.props.stateGuestViewRegistry.user.partnerUser.firstName)\n        }\n        return (\n          <div className=\"container mt-17\">\n            <div className=\"row\">\n              <div className=\"col text-center\">\n                <h1>{this.props.stateGuestViewRegistry.displayName}</h1>\n                {/*TODO: Display partner name as well below*/}\n                {registryUsers.length === 1 ? <h4 className=\"guest-view-curator-names mt-2\"><span className=\"text-capitalize\">{registryUsers[0]}</span> is still curating their baby registry.</h4> : null}\n                {registryUsers.length === 2 ? <h4 className=\"guest-view-curator-names mt-2\"><span className=\"text-capitalize\">{registryUsers[0]}</span> and <span className=\"text-capitalize\">{registryUsers[1]}</span> are still curating their baby registry.</h4> : null}\n\n                <Button\n                  variant=\"primary\"\n                  className=\"py-1 px-2 mt-3 text-body font-medium\"\n                  onClick={() => window.location.href = this.BABY_GIFTS_URL}\n                >Shop baby Gifts</Button>\n              </div>\n            </div>\n          </div>\n        )\n      } else {\n\n        let filteredSortProducts = this.getSortedFilteredProducts(this.props.stateAddedProducts, this.props.activeSortFilterState, this.props.stateFilterApplied)\n\n        // Fetching product for first time\n        if (this.state.isFirstTime && this.props.stateAddedProducts.length <= 0 && this.props.stateGuestViewRegistry.urlSlug) {\n          this.setState({\n            isFirstTime: false\n          })\n          this.getdataForFirstTime()\n          // this.updateFilterList(this.props.stateAddedProducts)\n        }\n\n        let modalTitle = (\n          <div className=\"font-heading\">Send a message</div>\n        )\n        let modalBody = (\n          <>\n            <div className=\"row mt-3\">\n              <div className=\"col m-a-input-container\">\n                <p className=\"text-sm mb-1 font-medium add-gift-store-label guest-view-required\">Subject</p>\n                <input\n                  type=\"text\"\n                  className={[\"w-100 mt-1 px-2 py-1 mb-0 text-body\", this.state.errors.subject ? \"already-bought-input-error\" : \"\"].join(\" \")}\n                  value={this.state.subject}\n                  onChange={(ev) => this.subjectChangeHandler(ev)}\n                />\n                {this.state.errors.subject ?\n                  <span\n                    className=\"text-sm already-bought-input-error-text\">{this.state.errors.subject}</span>\n                  : null}\n              </div>\n            </div>\n            <div className=\"row\">\n              <div className=\"col mt-6 m-a-input-container\">\n                <div className=\"d-flex mb-1\">\n                  <p className=\"text-sm font-medium add-gift-store-label guest-view-required\">Message</p>\n                  <p className=\"text-sm ml-auto send-massagee-txt-secondary\">Max. 280 chars</p>\n                </div>\n                <textarea className=\"w-100 text-body p-1 mb-6 m-a-resize-textarea\"\n                  rows=\"2\"\n                  placeholder={('Write a message for ') + (this.props.stateGuestViewRegistry.user.firstName ? this.props.stateGuestViewRegistry.user.firstName : '') + (this.props.stateGuestViewRegistry.user.partnerUser ? ' and' + this.props.stateGuestViewRegistry.user.partnerUser.firstName : '') + '.'}\n                  value={this.state.message}\n                  onChange={(ev) => this.messageChangeHandler(ev)}\n                />\n                {this.state.errors.message ?\n                  <span\n                    className=\"text-sm already-bought-input-error-text\">{this.state.errors.subject}</span>\n                  : null}\n              </div>\n            </div>\n            <div className=\"text-right\">\n              <Button\n                variant=\"primary\"\n                disabled={this.state.subject.length <= 0 || this.state.message.length <= 0}\n                className=\"py-1 px-2 text-body font-medium\"\n                onClick={() => this.sendMessageHandler()}\n              >Send & Close</Button>\n            </div>\n          </>\n        )\n\n        // When registry exists and it is public\n        return (\n          <>\n            <GuestViewHeader />\n            <div className=\"container mt-7\">\n              <div className=\"row\">\n                <div className=\"col-2\">\n                  <GuestFilter setFilterhandler={() => this.updateGuestViewRegistryProduct(this.props.match.params.registrySlug)} categoryFilterLimit={this.filterCategoryLimitHandler} />\n                </div>\n                <div className=\"col\"></div>\n                <div className=\"col-9\">\n                  {/* When all products are purchased */}\n                  {this.props.stateGuestViewRegistry.isAllGiftsPurchased ?\n                    <div className=\"my-7 pt-6 pb-7 guest-all-purchased-card text-center text-center\">\n                      <div className=\"font-heading guest-all-purchased-card-heading mx-auto\">100% complete! {this.props.stateGuestViewRegistry.user.firstName} {this.props.stateGuestViewRegistry.user.partnerUser ? 'and' + this.props.stateGuestViewRegistry.user.partnerUser.firstName : ''} have received everything on their registry.</div>\n                      <div className=\"d-flex mt-4 justify-content-center align-items-center\">\n                        <h4>\n                          <a\n                            className=\"font-medium guest-all-purchased-card-link\"\n                            tabindex=\"0\"\n                            onClick={() => this.setState({ isSendMessageModalOpen: true })}\n                          >Send A Message</a>\n                        </h4>\n                        <h4 className=\"ml-1 guest-all-purchased-card-txt\">or</h4>\n                        <a\n                          className=\"ml-3 px-3 py-1 guest-all-purchased-card-btn text-body font-medium d-inline-block\"\n                          href={M_A_BABY_PRODUCT_LINK}\n                          target='_blank'\n                          tabindex=\"0\"\n                        >Shop Baby Gifts</a>\n                      </div>\n                    </div> : null}\n                  <GuestSortSection\n                    productCount={this.state.totalProductCount}\n                    setFilterhandler={() => this.updateGuestViewRegistryProduct(this.props.match.params.registrySlug)}\n                  />\n\n                  <div className=\"mt-5\">\n                    <InfiniteScroll\n                      next={() => this.updateGuestViewRegistryProduct(this.props.match.params.registrySlug)}\n                      hasMore={this.props.stateGuestViewPagination.hasNextPage}\n                      loader={<h4>Loading...</h4>}\n                      dataLength={this.props.stateAddedProducts.length}\n                      style={{ overflow: \"hidden\" }}\n                    >\n\n                      {filteredSortProducts.length > 0 ?\n                        filteredSortProducts.map((card, index) =>\n                          <GuestViewCard\n                            data={card}\n                            key={\"addedCard\" + index}\n                            updateGuestViewProduct={this.updateGuestViewRegistryProduct}\n                          />) : null}\n                    </InfiniteScroll>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <Toast />\n            <Modal\n              size='md'\n              show={this.state.isSendMessageModalOpen}\n              title={modalTitle}\n              closeModal={() => this.setState({ isSendMessageModalOpen: false })}>\n              {modalBody}\n            </Modal>\n          </>\n        )\n      }\n    }\n\n\n    // Default return\n    return <></>\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    stateGuestViewRegistry: state.guestView.info,\n    stateAddedProducts: state.guestView.product,\n    activeSortFilterState: state.guestView.activeGuestSortFilter,\n    stateFilterApplied: state.guestView.guestViewFilterApplied.childFilter,\n    stateGuestViewPagination: state.guestView.paginationInfo,\n    stateCategoriesInfo: state.guestView.checkList,\n    stateGuestGiftsRedirectionInfo: state.guestView.redirectionInfo,\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(GuestView);","import React, {useState} from \"react\";\nimport \"./FindRegistry.scss\";\nimport {FIND_REGISTRY} from \"api/queries\";\nimport {graphQL} from 'api/axios';\nimport moment from 'moment';\nimport {IMPORT_REGISTRY_EMAIL} from \"utils/constants\";\n\nconst FindRegistry = () => {\n  const [searchName, setSearchName] = useState('')\n  const [allRegistry, setAllRegistry] = useState([])\n  const [hasRegistry, setHasRegistry] = useState(true)\n\n  const findRegistry = (registryName) => {\n    let reqData = {\n      query: FIND_REGISTRY,\n      variables: {\n        registryName: registryName\n      }\n    }\n    graphQL(reqData).then(res => {\n      if (res.data.data.findRegistry) {\n        let registries = [...res.data.data.findRegistry.edges]\n        setAllRegistry(registries)\n        if (registries.length > 0) {\n          setHasRegistry(true)\n        } else {\n          setHasRegistry(false)\n        }\n      }\n    }).catch(err => {\n      setHasRegistry(false)\n    })\n  }\n\n  const handleClearSearch = () => {\n    setSearchName('')\n    setAllRegistry([])\n  }\n\n  const findRegistryHandler = async (ev) => {\n    ev.persist();\n    await setSearchName(ev.target.value)\n    await findRegistry(ev.target.value)\n  }\n\n  const handleRegistryUrlSlug = (urlSlug) => {\n    window.open(urlSlug)\n  }\n\n  return (\n    <div className=\"mt-10 find-registry\">\n      <div className=\"row\">\n        <div className=\"col-4 offset-4\">\n          <div className=\"find-registry-header text-center\">Find a Baby Registry</div>\n          <div className=\"mt-6 find-registry-search-container mx-auto\">\n            <input\n              type=\"text\"\n              placeholder=\"Search registry...\"\n              value={searchName}\n              onChange={(ev) => findRegistryHandler(ev)}\n              className=\"find-registry-search-input pl-6 text-body py-1 w-100 mw-100 pr-10 m-a-unset-line-height\"\n            />\n            <i className=\"icon-search find-registry-search-icon\"/>\n            {searchName.length > 0 ?\n              <a className=\"find-registry-search-input-link text-body\" href=\"#\"\n                 onClick={() => {\n                   handleClearSearch()\n                 }}>Clear</a>\n              : null}\n          </div>\n\n\n        </div>\n      </div>\n      <div className={[\"row\", allRegistry.length ? \"mb-4 mt-10\" : \"\"].join(\" \")}>\n        <div className=\"col-10 offset-1\">\n          {[...allRegistry].map(data => (\n            <div className=\"p-4 find-registry-card mx-5\" key={data.node.urlSlug}>\n              <div className=\"d-flex align-items-center\">\n                <div className=\"d-flex align-items-baseline\">\n                  <h3 className=\"find-registry-displayName\">{data.node.displayName}</h3>\n                  <p className=\"ml-2 find-registry-content\">{data.node.dueDate !== null ? moment(data.node.dueDate).format('MMM DD, YYYY') : \"\"}</p>\n                </div>\n                <div className=\"ml-auto\">\n                  <button className=\"find-registry-action-btn p-2\"\n                          onClick={() => handleRegistryUrlSlug(data.node.urlSlug)}/>\n                </div>\n              </div>\n              {data.node.user.defaultAddress ?\n                <p\n                  className=\"mt-1 find-registry-content\">{data.node.user.defaultAddress?.city}, {data.node.user.defaultAddress?.province}</p>\n                : null}\n            </div>\n          ))}\n\n        </div>\n      </div>\n      <div className=\"row\">\n        <div className=\"col\">\n          <div className=\"mt-6 text-center\">\n            {searchName.length > 0 ?\n              hasRegistry ?\n                // If has registries in list\n                <div className=\"find-registry-content\">\n                  <h4>Didnt find the registry that you are looking for?</h4>\n                  <h4 className=\"mb-2\">Check with the family or shower host for <a\n                    href={\"mailto:\" + IMPORT_REGISTRY_EMAIL} className=\"find-registry-email-link\" tabIndex\n                    target='_blank'>direct link</a> or</h4>\n                  <a\n                    className=\"px-3 py-1 find-registry-help-disable-btn text-body font-medium d-inline-block\"\n                    href={\"mailto:\" + IMPORT_REGISTRY_EMAIL}\n                    target='_blank'\n                    tabindex=\"0\"\n                  >Email Us For Help</a>\n                </div>\n                :\n                // If has no registries in list\n                <div className=\"find-registry-content\">\n                  <h4>We couldnt find any registries that match your search...</h4>\n                  <h4 className=\"mb-2\">Check with the family or shower host for <a\n                    href={\"mailto:\" + IMPORT_REGISTRY_EMAIL} className=\"find-registry-email-link\" tabIndex\n                    target='_blank'>direct link</a> or</h4>\n                  <a\n                    className=\"px-3 py-1 find-registry-help-primary-btn text-body font-medium d-inline-block\"\n                    href={\"mailto:\" + IMPORT_REGISTRY_EMAIL}\n                    target='_blank'\n                    tabindex=\"0\"\n                  >Email Us For Help</a>\n                </div>\n              :\n              // Search is not been started yet\n              <div className=\"font-medium find-registry-content\">\n                <p>Looking for Monica+Andy baby registry?</p>\n                <p>Begin typing to search</p>\n              </div>\n            }\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default FindRegistry;","import React from \"react\";\nimport {Redirect, Route, Switch} from \"react-router-dom\";\nimport route from \"utils/routes\";\nimport {connect} from \"react-redux\";\nimport RegistryHero from '../registry-hero/RegistryHero';\nimport Onboarding from \"../onboarding/Onboarding\";\nimport VerifyToken from '../Login/VerifyToken/VerifyToken'\nimport {\n  updateRegistryDetail,\n  getOnboardingQuestions,\n  createRegistry,\n  getPersonalizeQuestions,\n  getCategories,\n  getProducts\n} from \"utils/commonFunction\";\nimport {Cookies} from \"react-cookie\";\nimport {verifyAccessToken} from \"../../api/axios\";\nimport {setLoggingStatus, updateRegistryInfo} from \"../registry/RegistryActions\";\nimport PersonaliseChecklist from \"../personalise-checklist/PersonaliseChecklist\";\nimport EditChecklist from \"modules/personalise-checklist/components/edit-checklist/EditChecklist\";\nimport GuestView from \"../guest-view/GuestView\";\nimport MyRegistry from \"../my-registry/MyRegistry\";\nimport ViewRegistry from \"../view-registry/ViewRegistry\";\nimport FindRegistry from \"modules/find-registry/FindRegistry\";\n\nclass ViewsContainer extends React.Component {\n\n  state = {\n    displayContent: false,\n    foundRegistry: false\n  }\n\n  componentDidMount() {\n    const cookies = new Cookies();\n    const access_token = cookies.get(\"access_token\")\n    if (access_token) {\n      verifyAccessToken(access_token).then(res => {\n        if (res.data.data.customer) {\n          this.props.dispatch(setLoggingStatus(true))\n          if (res.data.data.registries.length > 0) {\n            this.setState({\n              foundRegistry: true\n            })\n            updateRegistryDetail(this.props.dispatch);\n            // TODO: Get products of active registry\n            getCategories(res.data.data.registries[res.data.data.registries.length - 1].id, this.props.dispatch);\n            // TODO: Get categories of active registry\n            getProducts(res.data.data.registries[res.data.data.registries.length - 1].id, this.props.dispatch);\n          } else {\n            this.props.dispatch(updateRegistryInfo({notFound: true}))\n\n            //  Creating New Registry\n            createRegistry(this.props.dispatch)\n          }\n        }\n      }).catch(err => {\n        console.error(err)\n        this.props.dispatch(setLoggingStatus(false))\n        this.props.dispatch(updateRegistryInfo({notFound: true}))\n      }).finally(() => {\n        this.setState({\n          displayContent: true\n        })\n      })\n    } else {\n      this.setState({\n        displayContent: true\n      })\n      this.props.dispatch(updateRegistryInfo({notFound: true}))\n    }\n  }\n\n  render() {\n\n    // if (this.props.stateRouter.location.pathname.search(route.GUEST_VIEW.HOME) !== -1) {\n    //   console.log(route.GUEST_VIEW.HOME+\"/:registryName\")\n    //   return <Redirect to={this.props.stateRouter.location.pathname}/>\n    // }\n\n    // Redirecting user to onboarding is no registry found\n    // if (this.props.stateRouter.location.pathname.search(route.ONBOARDING.HOME) === -1 && !this.props.stateRegistryInfo.id && !this.state.foundRegistry && this.state.displayContent) {\n    //   console.log(this.props.stateRouter.location.pathname)\n    //   return <Redirect to={route.ONBOARDING.HOME}/>\n    // }\n\n    if (this.props.stateOnboardingQuestions.length <= 0) {\n      getOnboardingQuestions(this.props.dispatch)\n    }\n\n    if (this.props.stateRegistryInfo.id && this.props.statePersonaliseQuestions.length <= 0) {\n      getPersonalizeQuestions(this.props.stateRegistryInfo.id, this.props.dispatch)\n    }\n\n    return (\n      <>\n        {this.state.displayContent ?\n          <Switch>\n            <Route exact path={route.PERSONALIZE.CHECKLIST} component={EditChecklist}/>\n            <Route exact path={route.PERSONALIZE.HOME} component={PersonaliseChecklist}/>\n            <Route exact path={route.FIND_REGISTRY.HOME} component={FindRegistry}/>\n            <Route exact path={route.ONBOARDING.HOME + \"/:questionId?\"} component={Onboarding}/>\n            <Route exact path={route.MY_REGISTRY.HOME} component={RegistryHero}/>\n            <Route exact path={route.VIEW_REGISTRY.HOME} component={RegistryHero}/>\n            <Route exact path={route.TRACK_GIFTS.HOME} component={RegistryHero}/>\n            <Route exact path={route.GUEST_VIEW.HOME + \"/:registrySlug\"} component={GuestView}/>\n            <Route path={route.REGISTRY.HOME} component={RegistryHero}/>\n            <Route path={route.LOGIN.VERIFY_TOKEN} component={VerifyToken}/>\n            <Route render={() => <div>DEFAULT</div>}/>\n          </Switch>\n          : null}\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    stateRegistryInfo: state.registry.info,\n    stateOnboardingQuestions: state.onboarding.questions,\n    stateRouter: state.router,\n    statePersonaliseQuestions: state.personaliseCheckList.questions,\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(ViewsContainer);\n","import {ApolloClient, HttpLink, InMemoryCache} from '@apollo/client';\nimport {onError} from '@apollo/client/link/error';\nimport {ApolloLink} from '@apollo/client/link/core/ApolloLink';\n// import {API_URL} from '../utils/constants';\n\nconst cache = new InMemoryCache();\n\n\nconst errorLink = onError(({graphQLErrors, networkError}) => {\n  if (graphQLErrors)\n    graphQLErrors.map(({message, locations, path}) =>\n      console.log(\n        `[GraphQL error]: Message: ${message}, Location: ${locations}, Path: ${path}`,\n        // TODO: Add pop-up alert error message for GraphQL error\n      ),\n    );\n  if (networkError) {\n    console.log(`[Network error]: ${networkError}`);\n    // TODO: Add pop-up alert error message for network error\n  }\n});\n\n\nconst httpLink = new HttpLink({\n//  TODO: Add dynamic api url\n//  uri: API_URL,\n    uri: 'http://127.0.0.1:8000/graphql',\n});\n\nconst link = ApolloLink.from([errorLink, httpLink]);\n\nexport default new ApolloClient({\n  link,\n  cache,  \n  \n// TODO: Add store to header if any\n//   headers: {\n//     authorization: store.getState()?.auth?.token\n//       ? `Bearer ${store.getState()?.auth?.token}`\n//       : null,\n//     language: AppString.getLanguage() ?? 'en',\n//   },\n});","import React from \"react\";\nimport { Provider } from \"react-redux\";\nimport { ConnectedRouter } from \"connected-react-router\";\nimport { store, history } from \"./store/Store\";\nimport { I18nextProvider } from \"react-i18next\";\nimport i18n from \"./utils/i18n\";\nimport ViewsContainer from \"./modules/commons/ViewsContainer\";\nimport client from '../src/api';\n\nimport { ApolloProvider } from '@apollo/client';\n// Bootstrap\nimport \"./assets/scss/main.scss\";\n\n\nconst App = () => (\n  <Provider store={store}>\n    <I18nextProvider i18n={i18n}>\n      <ConnectedRouter history={history}>\n        <ApolloProvider client={client}>\n          <ViewsContainer />\n        </ApolloProvider>\n      </ConnectedRouter>\n    </I18nextProvider>\n  </Provider>\n);\n\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport registerServiceWorker from './registerServiceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\nregisterServiceWorker();\n"],"sourceRoot":""}