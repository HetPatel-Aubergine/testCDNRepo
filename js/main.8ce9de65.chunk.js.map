{"version":3,"sources":["modules/my-registry/MyRegistryActions.js","modules/my-registry/MyRegistryReducer.js","modules/view-registry/ViewRegistryActions.js","modules/view-registry/ViewRegistryReducer.js","modules/registry/RegistryActions.js","modules/registry/RegistryReducer.js","modules/personalise-checklist/PersonaliseCheckListActions.js","modules/personalise-checklist/PersonaliseCheckListReducer.js","modules/onboarding/OnboardingAction.js","modules/onboarding/OnboardingReducer.js","modules/guest-view/GuestViewAction.js","modules/guest-view/GuestViewReducer.js","modules/track-gifts/TrackGiftsAction.jsx","modules/track-gifts/components/view-by/ViewBy.jsx","modules/track-gifts/TrackGiftsReducer.jsx","store/Store.js","utils/i18n.js","locales/index.js","locales/en.js","locales/es.js","utils/routes.js","modules/commons/components/more-option/MoreOption.jsx","modules/commons/components/modal-component/ModalComponent.jsx","modules/commons/components/counter/Counter.jsx","modules/commons/components/button-component/ButtonComponent.jsx","modules/commons/components/add-gift/toggle-pills/TogglePills.jsx","modules/commons/components/edit-gift/category-pill/CategoryPill.jsx","api/config.js","api/queries.js","api/axios.js","api/mutations.js","modules/track-gifts/components/gift-card-pill/GiftCardPill.jsx","modules/commons/components/gift-status-pill/GiftStatusPill.jsx","modules/commons/components/product-details-model/ProductDetailsModel.jsx","modules/track-gifts/components/buy-now/BuyNow.jsx","modules/commons/components/mark-as-purchased/MarkAsPurchased.jsx","modules/track-gifts/components/mark-purchased/MarkPurchased.jsx","modules/track-gifts/components/gift-card/GiftCard.jsx","modules/track-gifts/containers/track-gifts-content/TrackGiftsContent.jsx","utils/cdn-assets-links.js","utils/commonFunction.js","utils/constants.js","modules/commons/components/radio-button/RadioButton.jsx","modules/commons/components/check-box/CheckBox.jsx","modules/commons/components/loader/Loader.jsx","modules/commons/components/select-category/SelectCategory.jsx","modules/commons/components/tour-card/TourCard.jsx","modules/commons/components/variants-modal/VariantsModal.jsx","modules/commons/components/card-item/CardItem.jsx","modules/commons/components/confirm-url-change-modal/ConfirmUrlChangeModal.jsx","modules/commons/components/edit-gift/EditGift.jsx","modules/commons/components/cash-fund-card/add-cash-fund-modal/toggle-pills/TogglePills.jsx","modules/commons/components/cash-fund-card/add-cash-fund-modal/AddCashFundModal.jsx","modules/commons/components/added-card/AddedCard.jsx","modules/my-registry/components/checkList/CheckList.jsx","modules/my-registry/components/checkList/CheckListItems.jsx","modules/commons/components/add-gift/bookmarklet-section/BookmarkletSection.jsx","modules/commons/components/add-gift/import-registry/category-pill/CategoryPill.jsx","modules/commons/components/add-gift/add-gift-another-store/AddGiftAnotherStore.jsx","modules/commons/components/view-recommend/ViewRecommend.jsx","modules/my-registry/components/filter/Filter.jsx","modules/my-registry/components/filter/filter-item-chip/FilterItemChip.jsx","modules/commons/components/add-gift/import-gift-card/ImportGiftCard.jsx","modules/commons/components/add-gift/import-registry/ImportRegistry.jsx","modules/commons/components/add-gift/AddGift.jsx","modules/view-registry/components/cover-image-picker/crop-image/CropImage.jsx","modules/commons/components/publish-registry/PublishRegistry.jsx","modules/my-registry/components/filter-section/FilterSection.jsx","modules/commons/components/cash-fund-card/cash-fund-card-not-added/CashFundCardNotAdded.jsx","modules/commons/components/cash-fund-card/CashFundCard.jsx","modules/commons/components/skeleton-recommendation-loader/SkeletonRecommendationLoader.jsx","modules/my-registry/containers/Everything/Everything.jsx","modules/my-registry/containers/MainContent/MainContent.jsx","modules/my-registry/MyRegistry.jsx","modules/view-registry/components/cover-image-picker/upload-image-card/UploadImageCard.jsx","modules/view-registry/components/cover-image-picker/default-image/DefaultImage.jsx","modules/view-registry/components/cover-image-picker/CoverImagePicker.jsx","modules/view-registry/components/edit-view-registry-detail/EditViewRegistryDetail.jsx","modules/commons/components/skeleton/registry-image-header-skeleton/RegistryImageHeaderSkeleton.jsx","modules/commons/components/skeleton/gift-card-skeleton/GiftCardSkeleton.jsx","modules/commons/components/skeleton/share-registry-skeleton/ShareRegistrySkeleton.jsx","modules/view-registry/components/share-registry/ShareRegistry.jsx","modules/view-registry/containers/view-registry-header/ViewRegistryHeader.jsx","modules/view-registry/components/sort-filter/SortFilter.jsx","modules/view-registry/components/sort-filter/SortFilterMobile.jsx","modules/view-registry/components/view-filter/ViewFilterMobile.jsx","modules/view-registry/components/sort-filter-section/SortFilterSection.jsx","modules/view-registry/components/view-filter/ViewFilter.jsx","modules/commons/components/already-bought-product/AlreadyBoughtProduct.jsx","modules/commons/components/cash-contributed-already/CashContributedAlready.jsx","modules/commons/components/give-MA-gift-model/GiveMAGiftModel.jsx","modules/commons/components/give-gift-from-another-store/GiveGiftFromAnotherStore.jsx","modules/guest-view/components/GuestViewCard.jsx","modules/guest-view/containers/guest-view-header/GuestViewHeader.jsx","modules/guest-view/containers/guest-sort-filter/GuestSortFilter.jsx","modules/guest-view/containers/guest-sort-filter/GuestSortFilterMobile.jsx","modules/guest-view/containers/guest-filter/GuestFilterMobile.jsx","modules/guest-view/containers/guest-sort/GuestSortSection.jsx","modules/guest-view/containers/guest-filter/GuestFilter.jsx","modules/commons/components/toast/Toast.jsx","modules/track-gifts/components/redirection-screen/RedirectionScreen.jsx","modules/commons/components/product-loader/ProductLoader.jsx","modules/guest-view/components/GuestTileCard/GuestTileCard.jsx","modules/commons/components/cancel-reservation/CancelReservation.jsx","modules/commons/components/email-already-bought-product-modal/EmailAlreadyBoughtProductModal.jsx","modules/guest-view/GuestView.jsx","modules/view-registry/containers/view-registry-home/ViewRegistryHome.jsx","modules/view-registry/ViewRegistry.jsx","modules/registry-hero/component/todo-widget/TodoWidget.jsx","modules/track-gifts/components/filters/Filters.jsx","modules/track-gifts/components/thank-you-list/ThankYouList.jsx","modules/track-gifts/containers/track-gifts-sidebar/TrackGiftsSidebar.jsx","modules/track-gifts/components/search/Search.jsx","modules/track-gifts/components/add-gift/AddGift.jsx","modules/track-gifts/TrackGifts.jsx","modules/registry-hero/RegistryHero.jsx","modules/commons/components/questions/option/Option.jsx","modules/commons/components/questionnair-progress-bar/QuestionnairProgressBar.jsx","modules/onboarding/Onboarding.jsx","modules/Login/VerifyToken/VerifyTokenActions.js","modules/Login/VerifyToken/VerifyToken.jsx","modules/personalise-checklist/components/personalise-header/PersonaliseHeader.jsx","modules/personalise-checklist/components/personalise-footer/PersonaliseFooter.jsx","modules/personalise-checklist/PersonaliseChecklist.jsx","modules/personalise-checklist/components/edit-checklist/EditChecklist.jsx","modules/find-registry/FindRegistry.jsx","modules/commons/components/back-to-top/BackToTop.jsx","modules/unsubscribe/Unsubscribe.jsx","modules/commons/ViewsContainer.jsx","api/index.js","App.jsx","registerServiceWorker.js","index.js"],"names":["MY_REGISTRY_ACTION_TYPES","ADD_RECOMMENDED_PRODUCT","INCREMENT_QUANTITY","DECREMENT_QUANTITY","SET_REGISTRY_PRODUCTS","TOGGLE_MUST_HAVE_PRODUCT","ADD_PRODUCT_TO_CART","REMOVE_PRODUCT_FROM_CART","SET_ACTIVE_RECOMMANDATION","SET_ACTIVE_RECOMMANDATION_VARIANT","SET_ACTIVE_RECOMMANDATION_SIZE_VARIANT","SET_ALL_RECOOMANDATION_VARIANT_BY_SIZE","SET_FILTER_CATEGORY","SET_PARENT_FILTER","SET_CHILD_FILTER","CLEAR_FILTER","SET_FILTERED_PRODUCTS","GET_CHECKLIST_ITEMS","GET_ALL_CHECKLIST_ITEMS","SET_ANOTHER_STORE_PRODUCT_INFO","CLEAR_ANOTHER_STORE_PRODUCT_INFO","SET_ANOTHER_STORE_REGISTRY_ITEMS","SET_CASH_FUND_CATEGORIES","SET_FILTER_PRODUCT_COUNT","ADD_BLOGS","PUBLISH_REGISTRY","addRecommendedProduct","params","type","payload","setActiveRecommandationVariant","productID","variantID","setActiveRecommandationSizeVariant","variant","setActiveRecommandationVariantBySize","allVariantBySize","toggleMustHaveProduct","setFilterCategory","setParentFilter","setChildFilter","clearFilter","setCheckListItems","setAnotherStoreProductInfo","clearAnotherStoreProductInfo","setAnotherStoreRegistryItems","addBlogs","addPublishRegistryDetails","incrementProductQuantity","state","id","quantity","stateInc","newState","product","push","decrementProductQuantity","stateDec","setActiveRecommandationVariantID","activeVariant","setRecommandationVariantBySize","newVariants","maItemVariantItemRecommendation","variantId","allSizeVariant","isAllVariantFetch","title","size","activeSizeVariant","setActiveRecommandationVariantSize","finalVariants","vrt","selected","toggleMustHave","item","mostWanted","addProductToCart","length","variants","edges","node","price","category","parentFilter","childFilter","combineReducers","recommendedProducts","action","addedProducts","filter","_","activeCategory","filterCategory","filteredProducts","filterApplied","defaultData","myRegistry","defaultFilter","checkList","anotherStoreProduct","defaultAnotherStoreProductInfo","anotherStoreRegistry","cashFundCategories","filterCount","allCheckList","blogs","publishRegistry","VIEW_REGISTRY_ACTION_TYPES","setViewRegistryProducts","activeSortFilter","setguestViewRegistry","setViewFilterCategory","setChildViewFilter","clearViewFilter","viewRegistryProducts","sortId","sortTitle","guestViewRegistry","viewFilterApplied","REGISTRY_ACTION_TYPES","updateRegistryInfo","setLoggingStatus","setOnboardingRegistry","setLoader","info","loggedIn","todo","onboardingRegistry","loader","user","seo","PERSONALISE_CHECKLIST_ACTION_TYPES","setPersonaliseCheckListItems","addPersonalizeQuestion","addPersonalizeQuestionAnswer","updatePersonalizeQuestionAnswer","newSubCategory","subCategories","subCategory","totalItemsCount","setIsAddedCheckList","isAdded","editedPersonaliseCheckList","questions","answers","ONBOARDING_ACTION_TYPES","addOnboardingQuestion","addQuestionAnswer","updateQuestionAnswer","GUEST_VIEW_ACTION_TYPES","updateGuestViewInfo","setGuestViewProducts","activeGuestSortFilter","setChildGuestViewFilter","clearGuestViewFilter","setGuestViewFilterCategory","setViewGuestPaginationInfo","clearViewGuestPaginationInfo","setAlreadyBoughtProductInfo","clearAlreadyBoughtProductInfo","setGuestGiftsRedirectionInfo","setCashContributedAlreadyInfo","clearCashContributedAlreadyInfo","updated","guestViewFilterApplied","guestFilterCategory","paginationInfo","trackGifts","pagination","alreadyBoughtProduct","defaultAlreadyBoughtProductInfo","redirectionInfo","cashContributedAlready","defaultCashContributedAlready","TRACK_GIFTS_ACTION_TYPES","setTrackGiftsProduct","setTrackGiftsPaginationInfo","setTrackGiftsFilters","setTrackGiftsSearch","setTrackGiftsRedirectionInfo","TRACK_GIFTS_VIEWS","ViewBy","activeView","useSelector","dispatch","useDispatch","changeTrackGiftView","view","className","join","onClick","getFilterDefaultData","newFilters","filters","URLSearchParams","window","location","search","has","map","newFilter","products","history","createBrowserHistory","rootReducer","registry","registryInfo","MyRegistryReducers","viewRegistry","ViewRegistryReducers","personaliseCheckList","PersonaliseCheckListReducer","onboarding","Onboarding","TrackGiftsReducer","guestView","GuestViewReducer","router","connectRouter","middlewares","routerMiddleware","thunk","composeEnhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","options","interpolation","escapeValue","resources","en","translation","home","redirect","today","button","values","getUser","another","personalize","registryHeader","subTitle","visible","link","shower","announcements","more","toDos","es","i18next","use","LanguageDetector","init","APP_HOME_ROUTE","routes","LOGIN","VERIFY_TOKEN","REGISTRY","HOME","MY_REGISTRY","GIFTS_ADDED","GIFT_TO_ADD","GIFT_VIEW","SHOWER","ANNOUNCEMENTS","MORE","TO_DOS","VIEW_REGISTRY","TRACK_GIFTS","ONBOARDING","PERSONALIZE","CHECKLIST","GUEST_VIEW","FIND_REGISTRY","UNSUBSCRIBE","MoreOption","props","tabIndex","buttonClass","iconClass","data","e","ev","stopPropagation","option","document","querySelector","classList","contains","target","blur","remove","add","optionDropdownClickHandler","preventDefault","onBlur","removeExtraOptionClass","index","key","name","ModalComponent","Modal","show","modalClassName","noFullSizeMobile","titleContent","Header","headerContent","closeIconClass","closeModal","Body","noBodyPadding","children","footer","Footer","Counter","decrementHandler","counter","incrementHandler","ButtonComponent","React","forwardRef","ref","btnVariantClass","disabled","TogglePills","activeClass","data-tut","dataTut","text","CategoryPill","backendId","gql","GET_CATEGORIES","GET_PRODUCTS","GET_RECOMMENDATIONS","ADD_REGISTRY_ITEM","UPDATE_REGISTRY_ITEM","GET_REGISTRIES","GET_QUESTIONS","GET_PERSONALIZE_QUESTIONS","GET_TRACK_GIFTS","GET_GUEST_REGISTRY_PRODUCT","GET_MA_VARIANT_BY_SIZE","GET_PUBLISH_REGISTRY_DETAILS","GET_TAGS","cookies","Cookies","apiURL","config","PRODUCTION_API_URL","AuthToken","get","axios","require","axiosInstance","create","baseURL","headers","axiosInstanceNoToken","axiosInstanceNoHeader","graphQLNoToken","post","graphQLNoHeader","graphQL","getScrapedProduct","getAnotherRegistryProducts","axiosInstanceMultipart","graphQLMultipart","downloadThankYouList","registryId","unsubscribe","TOGGLE_MUST_HAVE","UPDATE_REGISTRY","REGISTER_USER","SAVE_QUESTION_RESPONSE","LOGIN_USER","ADD_PARTNER_ACCOUNT","SAVE_UPDATED_CHECKLIST","UPDATE_REGISTRY_ITEMS","SAVE_SINGLE_QUESTION_RESPONSE","CREATE_REGISTRY","TRACK_GIFTS_ADD_GIFT","MARK_AS_PURCHASED_BY_GUEST","GIVE_GROUP_GIFT_GUEST","CASH_FUND_GIFT_GUEST","MARK_AS_PURCHASED","CASH_AND_LEAVE","CASH_FUND_CONTRIBUTION_GUEST","RESERVE_REGISTRY_ITEM_GUEST","REMOVE_RESERVED_ITEM_GUEST","TOUR_UPDATE_FLAG","UPDATE_MA_BUTTON_CONFIGURED","TRACK_GIFTS_BUY_NOW","SEND_ALL_PURCHASED_EMAIL","CANCEL_RESERVATION_VIA_LINK","CREATE_PUBLISH_REGISTRY_DETAILS","UPDATE_PUBLISH_REGISTRY_DETAILS","GiftCardPill","amount","GiftStatusPill","pillVariantClass","ProductDetailsModel","imageUrl","src","onError","productImageLoadErrorHandler","onLoad","productImageLoadHandler","alt","isCashFund","href","storeItemUrl","isGroupGift","hideTotal","formatPrice","note","notFromGuestView","quantityStatus","total_contribution_amount","CURRENCY","purchased_quantity","Number","registryCategories","categoryType","isPurchased","alreadyBoughtProductsQuantity","purchasedQuantity","style","width","isCashAcceptedOnly","buyable_quantity","still_needed","reserved_quantity","BuyNow","storeName","orderNumber","guestName","guestEmail","errors","modalCloseHandler","setState","incrementQuantity","prevState","productData","decrementQuantity","storeNameChangeHandler","isInputTextValid","value","orderNumberChangeHandler","guestNameChangeHandler","errorState","guestEmailChangeHandler","validData","saveClickHandler","split","reqData","query","variables","stateRegistryInfo","registryItemId","buyRegistryItemInput","orderNo","then","res","buyNow","toast","success","message","getTrackGiftsProduct","stateTrackGiftsFilters","stateTrackGiftsProducts","stateTrackGiftsPagination","stateTrackGiftsView","stateTrackGiftsSearch","getCategories","getProducts","getTodoList","catch","err","console","error","response","log","buyNowClickHandler","createNewRecord","updateProduct","openModal","jsonVisitedItems","JSON","parse","localStorage","getItem","LOCAL_STORAGE_TRACK_GIFT_BUY_KEY","rId","pId","productTimestamp","Date","timestamp","currentDate","setHours","newVisitedItemsData","foundProduct","newData","setItem","stringify","setTimeout","BUYNOW_REDIRECTION_TIME","open","this","onChange","placeholder","Component","connect","MarkAsPurchased","PRICE_REGEX","PRICE_REGEX_WHILE_ENTERING","email","contributionAmount","backendErrors","contribution_amount","closeModalHandler","valid","match","EMAIL_RE","String","nameChangeHandler","emailChangeHandler","noteChangeHandler","contributionAmountChangeHandler","persist","purchasedRegistryItemInput","giftMessage","guestUserInput","markAsPurchased","Object","keys","fieldError","indexOf","rows","MarkPurchased","openPurchasedModal","GiftCard","friendsDetailRef","createRef","toggleGiftModalHandler","toggleFriendsDetialsModalHandler","toggleFriendsDetail","current","display","closeFriendsDetail","giftModalCloseHandler","giftModalOpenHandler","friendsDetailsOpenModalHandler","friendsDetailsCloseModalHandler","filterOrderNumber","toString","slice","checkIsCashFund","showMarkPurchased","purchasedRegistryItem","isAmountReceived","loading","guestUser","firstName","lastName","groupGift","amountReceived","isReserved","Math","abs","createdTs","moment","format","otherUsers","LOCAL_2_API_FILTERS_MAPPING","4","1","3","2","5","NoRecordFound","TrackGiftsContent","currentView","fetchAvailableFromAddedProducts","newProduct","getAvailableProduct","stateProducts","availableProducts","otherSelected","count","getUniqueListBy","arr","Map","getUniqueListByGroupGift","finalGroupedProduct","groupedProduct","finalProduct","groupGiftAndCILIDs","includes","getProductsBasedOnView","guestUsersEmails","refinedProducts","skipCashFund","userProducts","currentProduct","newUsers","productIdToRemove","newProducts","partiallyPurchasedGroupGift","groupUser","searched","searchedText","searchText","toLowerCase","groupProduct","userLastName_products","userFirstName_products","sort","a","b","aLastName","bLastName","localeCompare","aFirstname","bFirstname","noPurchasedProduct","hasNextPage","overflow","next","hasMore","dataLength","CDN_BASE_URL","ROUTES","Rectangle_1685_2x_2","image_2_2x","Rectangle_1685_2x","image_1_2x","MA_LOGO","MA_ELEPHANT_LOGO","MA_DEFAULT_PRODUCT_BROKEN","BOOKMARKLET_EXAMPLE","gift_icon","file_heart_svg","facebook","instagram","twitter","facebook_disabled","instagram_disabled","twitter_disabled","pinterest","pinterest_disabled","DEFAULT_VARIANT_PATTARN","gift_icon_s3_bucket","icon_rearrange_s3_bucket","parseInt","categoryData","registryItems","registryItemsAnalysisCount","finalData","newItemObj","registryitemImage","MEDIA_URL_PREFIX","LOCAL_MEDIA_URL","image","addAlreadyBoughtProductQuantity","setRegistryProducts","removeProductFromCartHandler","card","getState","operationName","isPublic","updateRegistry","newRegistry","changeRegistryVisibility","updateRegistryDetail","getRefinedCategory","parentCategory","categoryName","description","isDesired","isExcluded","addedItemsCount","isParent","getAllCategories","getAll","parentCategories","subCategoriesIsExcluded","newParentCategory","newSubCategories","registrySubCategories","cat","newSubCategoriesAddedItemsCount","newAddedItemsCount","refinedSubCate","subProductTypes","registrySubProductTypes","subProduct","returnStatus","resCategories","finalCategories","allCategories","registries","registryData","currentRegistryInfo","notFound","updateRegistryDetailState","addProductToRegistry","checkForBankAccount","updateProductToRegistry","addProductHandler","stateAddedProducts","isMaItem","existingProduct","sku","storeUrl","parseFloat","compareAtPrice","shopifyVariantId","shopifyItemId","isBundleProduct","bundleProduct","itemRecommendationCategoryItemRecommendation","categoryId","itemsCount","registryCategoryId","tags","shopifyItemVariantId","giftNote","hasMultiCategories","categories","getOnboardingQuestions","token","isPersonalize","getAnswerResponse","question","isFollowUp","questionOption","optionText","alreadyAnswered","followUpAnswers","currentQuestionOptionAnswerId","isAnswered","currentQuestionAnswer","followUpQuestions","followUpQuestion","updateGuestViewRegistry","urlSlug","registryAsGuest","guestViewInfo","getSeo","createRegistry","dataURItoBlob","dataURI","fileType","fileName","byteString","atob","ab","ArrayBuffer","ia","Uint8Array","i","charCodeAt","blob","Blob","File","getGuestCategories","registryCategoriesAsGuest","getTrackGiftsFilterStatus","filterString","trackGiftsFilter","alreadyBoughtProducts","purchasedItem","newPurchasedItem","clearProducts","trackGiftsFilters","trackGiftsProduct","trackGiftsPagination","trackGiftsView","trackGiftsSearch","first","TRACK_GIFTS_PRODUCTS_PER_REQUEST","giftGivers","after","endCursor","searchKeyword","isAvailable","isFundsReceived","isReturned","registryGifts","registryGiftItemsCount","allFilterCounts","gifts","pageInfo","returnRes","addProductToCartAPI","registryTodoSteps","fetchDefaultCashFundImage","result","cashFundDefaultImage","status","UpdateBuildTourFlag","isBuildRegistryVisited","isViewAsGuestVisited","isFeaturedOrderApplied","isGroupGiftApplied","isViewRegistryVisited","isMustHaveApplied","updateMushHaveTourFlag","doNotUpdateAddress","updateGroupGiftTourFlag","getMAVariant","returnValue","categoryIds","maItemVariants","currency","toFixed","replace","pageMetaDetails","formattedMetaInfo","pageSlug","setMetaInfoToDom","metaInfo","pageName","titleTag","getElementsByTagName","getAttribute","existingMetaTag","getElementsByName","descriptionMetaTag","metaTag","tagName","setAttribute","newMetaTag","createElement","head","appendChild","isCashInLieu","bankAccounts","isCashFundItemAdded","isCashInLieuItemAdded","isGroupGiftItemAdded","getRefinedPrice","trim","newPrice","char","isInteger","onerror","viewRegistryTourPosition","top","left","body","offsetWidth","tourEl","markPositionY","getBoundingClientRect","y","markPositionLeft","offsetHeight","right","transform","onVariantImgLoadErrorHandler","removeFixedRegistryHero","registryHeroEl","checklistEl","getElementById","visibility","paddingTop","NAME_RE","API_END_POINTS","API_URL","BACKEND_URL","FILTERS","BOOKMARKLET_SCRIPT","SETTINGS_LINKS","BUILD_REGISTRY_STEPS","selector","content","observe","checkListEl","position","MUST_HAVE_STEPS","VIEW_REGISTRY_STEPS","GROUP_GIFT_STEPS","ADD_GIFT_LINKS","URL_RE","HTTPS_REGEX","ONBOARDING_ANIMATION_DELAY","M_A_BUTTON_CONTENT","ONBOARDING_SEO","SHARE_REGISTRY_SKELETON_SIZE","RadioButton","labelRef","centerText","checked","changeHandler","click","textClass","for","subContent","CheckBox","Loader","role","SelectCategory","useState","setCategories","setSearched","searchedCategories","setSearchedCategories","currentCategory","selectedCategory","setSelectedCategory","fetchingAPI","localLoader","useEffect","showModal","resData","finalCheckList","finalSubCategory","tempSubCategory","subProductType","tempCategory","getCategoriesToDisplay","find","allSelectedCategory","handleSelectionCategory","categorySelectBody","modalFooter","changeCurrentCategory","searchInputRef","changeLinkRef","searchLinkRef","searchCategory","searchMatched","onKeyUp","keyCode","searchOnEnter","focus","searchCategoryInputChangeHandler","onFocus","searchInputFocusHandler","searchInputBlurHandler","tabindex","changeLinkClickHandler","searchLinkClickHandler","TourCard","dotsArray","totalSteps","el","markmain","fill","mask","rect","stroke","strokeWidth","bgDivEl","color","opacity","close","gotoStep","VariantsModal","mustHave","groupedGift","productTitle","productLink","tempStoreItemUrl","storeUrlInputHasFocus","productPrice","howToGift","isCashAccepted","showCategoryModal","productCategories","learnMoreCashAccept","showLearnMore","closeTempModal","isTourOpen","isMustHaveTour","isGroupGiftTour","steps","productUrlRef","productNameChangeHandler","productStoreUrlChangeHandler","productNoteChangeHandler","setGiftNote","resetStoreItemUrlClickHandler","inputRef","confirmStoreItemUrlClickHandler","storeUrlChangeClickHandler","storeItemUrlBlurHandler","productPriceChangeHandler","howToGiftOptions","learnMoreLinkClickHandler","learnMoreContent","changeHowToGift","addTheProduct","productDataUpdate","openSelectCategoryModal","closeCategoryModal","setCategory","refinedCategory","stateAllCategories","catToPush","subCat","newSubCat","unshift","foundCategory","mainCategory","displayName","cashAcceptedLearnMore","closeLearnMoreModalHandler","handleVariantChange","activeSizeVariantId","setActiveRecommandationVariantHandler","getAllVarient","setActiveVariantSize","closeTour","anotherStoreItemViewDetail","variantModalCloseHandler","strikedPrice","incrementQuantityHandler","decrementQuantityHandler","OverlayTrigger","placement","overlay","pattern","Tooltip","random","iconUrl","productMustHave","productGroupedGift","highlightedMaskClassName","isOpen","CustomHelper","onRequestClose","stateCategories","CardItem","setOpenModal","productMostWanted","setProductMostWanted","setProductGroupedGift","currentRecommendProduct","setCurrentRecommendProduct","onCardClick","setMostWanted","setGroupedGift","list","resetThenSet","ConfirmUrlChangeModal","confirmClickHandler","EditGift","OTHER_CATEOGRY_ID","M_A_STORE_NAME","MAX_IMAGE_SIZE","ACCEPTED_IMAGE_TYPE","storeItemUrlInputRef","showRemoveModal","btnStoreActive","giftImage","giftTitle","giftPrice","giftQuantity","giftCategories","giftMustHave","giftGroupGift","giftPurchased","closeMainModalTemp","giftVariants","currentVariant","editGiftErrors","confirmUrlChangeModalShow","isCustomFetched","setLocalLoader","imageInputRef","CUSTOM_PIC_OPTIONS","selectFileHandler","files","file","reader","FileReader","onload","newProductImage","readAsDataURL","toggleGroupGift","togglePurchased","removeItemClickHandler","openConfirmURLChangeModal","closeConfirmUrlChangeModal","relatedTarget","url","URL","fetchChangedProduct","itemUrl","item_url","newProductInfo","img","error_message","finally","validateData","saveItemClickHandler","openRemoveModal","fd","FormData","cashAcceptedOnly","itemData","append","images","stateErrors","foundError","changeCurrentVariantClickHandler","inputKeyUpHandler","closeRemoveProductModal","removeProductModalClickHandler","tempArray","editableItem","removeConfirmFooter","activeOptionClass","accept","selectedClass","AddCashFundModal","API_CALLED","INITIAL_IMAGE_SET","cashFundImage","cashFundName","edit","cashFundAmount","cashFundType","cashFundNote","imageRef","closeAll","fromAddGift","validateCashFundData","addCashFundClickHandler","formData","selectedCat","mutationCalled","input","items","presentCategories","catId","fetchDefaultImage","newErrorState","cashFund","modalTitle","modalFooterButton","cashFundNameChangeHandler","cashFundAmountChangeHandler","cashFundHideTotalChangeHandler","cashFundTypeChangeHandler","stateCashFundCategories","changedCategory","cashFundNoteChangeHandler","mustHaveClickHandler","allCashFundCategories","cashFundCategory","draggable","AddedCard","stateGuestViewRegistry","stateRecommendedProducts","stateFilterApplied","setRecommendedProducts","setShow","categoryTitle","showRemoveModel","setShowRemoveModel","showEditModal","setShowEditModal","updateModal","setUpdateModal","setShowMarkPurchased","showCashFundModal","setShowCashFundModal","moreOptionsData","addRemoveOption","showRemoveModelPopUp","showMarkPurchasedOption","showMarkAsPurchasedModal","categoryRecommended","showRecommendation","openEditModal","showEditModalLocal","DragHandle","sortableHandle","disabledDrag","multipleCategories","hasHoverClass","isViewCard","itemRecommendationId","originalRecommandtionId","maItemVariantId","maItemVariantsBySize","finalVariant","cardId","newRecommended","productId","sizeVariant","CheckList","gotoPersonalize","event","isQuizPending","editablePersonalizeQuestions","t","percentage","totalItems","addedItems","withTranslation","withRouter","CheckListItems","getOffset","scrollX","scrollY","scrollToCategory","categorySection","offset","scrollTo","handleScroll","elements","getElementsByClassName","otherEl","targetEl","getSubList","data-cardid","handleToggleEvent","checkListIconEl","checkListHeader","firstChild","toggle","currentIndex","allElement","subListItem","Card","Accordion","Toggle","as","eventKey","defaultActiveKey","data-index","Collapse","BookmarkletSection","modalBody","modalTitleContent","modalFooterButtons","changeTempCloseModal","doneBookmarkletHandler","maButtonConfiguredhandler","isMaButtonConfigured","openAddBookmarkletModal","getContentBasedOnBrowser","CDNImages","userAgentString","navigator","userAgent","chromeAgent","edgeAgent","firefoxAgent","safariAgent","removeCategory","AddGiftAnotherStore","categoryModalShow","setCategoryModalVisible","hideProductDetails","setHideProductDetails","showLoading","setshowLoading","btnHasFocus","setBtnHasFocus","inputHasFocus","setInputHasFocus","setItemUrl","setCurrentItemLink","setShowLearnMore","setLearnMoreCashAccept","changeUrlConfirmationModal","setChangeUrlConfirmationModal","backendError","setBackendError","productInfo","productImage","productName","setIsTourOpen","setIsMustHaveTour","setIsGroupGiftTour","setSteps","imageInput","doNotSearch","setQuantity","prodInfo","priceChangeHandler","changePrice","changeProductName","changeNote","changeProductImage","fetchProductDetail","productUrl","changeProductUrl","ctgry","addMyOwn","checkUrlAndGetRegistryItems","closeChangeConfirmModal","changeItemUrl","setInputFocus","submitStoreUrl","inputOnBlurHandler","openChangeConfirmModal","class","fieldErrors","openCategorySelect","finalcategory","removeSelectedCategory","ViewRecommend","viewDetailsBtn","AddGiftAnotherStoreErrors","cardRef","clearModalData","alert","getCategoryId","currentRecommendation","stateActiveCategory","stateChecklist","childCategory","checkDataValidity","storeProduct","addItemToRegistry","stateAnotherStoreProduct","hostname","ADD_REGISTRY_ITEM_MUTATION","commonGetProducts","commonGetCategories","addOnMyOwnClickHandler","newCategory","isSubProduct","collectionUrl","isSubProductTypes","settings","dots","infinite","speed","slidesToShow","slidesToScroll","afterChange","slickEl","slickDotEl","lastChild","childNodes","prevArrow","nextArrow","responsive","breakpoint","arrows","stepTwoForTour","height","originalSrc","authorV2","publishedAt","Filter","filterData","tempParentFilterId","tempChildFilterIds","showFilterModal","setShowFilterModal","filterContentRef","toggleFilterContent","parentChangeHandler","parent","child","childChangeHandler","childId","parentId","childIndex","newChildArray","splice","getFilterContent","radioName","modal","footerButton","FilterItemChip","deleteHandler","ImportGiftCard","ImportRegistry","REGISTRY_STORE_ALTERNATIVE_NAME","tgt","registryUrl","errorMessage","activeCategoryProductIndex","currentRegistryLink","changeLoadingState","registryUrlChangeHandler","getAnotherRegistryProductsInfo","registryUrlKeyUpHandler","refineProductForBabyList","stores","store_name","store_url","productIndex","stateAnotherStoreRegistry","setProductCategories","newProductState","changeRegistryUrl","removeProductFromRegistry","newRegistryProduct","notLoadingContent","bind","AddGift","cashFundProduct","currentContent","addAnotherGiftApiCalled","addImportRegistryApiCalled","categoryList","categorySectionId","reduce","ac","cv","scrollToDoc","openAddGiftModal","openCashFundModal","closeCashFundModal","importGiftAnotherStoreHandler","importRegistry","validImportRegistryData","getCleanedRegistryItems","cleanedRegistryItems","newItem","importRegistryClickHandler","jsonGraphQL","addRegistryItems","queryParams","decodeURI","delete","CropImage","imgRef","useRef","crop","setCrop","completedCrop","setCompletedCrop","useCallback","unit","x","aspect","canvas","scaleX","naturalWidth","scaleY","naturalHeight","getContext","drawImage","Promise","resolve","reject","toBlob","getCroppedImg","setCroppedImage","crossorigin","backgroundColor","onImageLoaded","keepSelection","newCrop","onComplete","c","PublishRegistry","registryImages","publishRegistryName","publishRegistryDescription","uploadImage","customImage","croppedImage","isPublished","isRegistryDataChange","allTags","MAX_LENGTH_DESCRIPTION","fileRef","componentDidMount","getPublishRegistry","getTags","COVER_PIC_OPTIONS","modalOpenHandler","statePublishRegistry","tag","label","publishRegistryTags","blobToFile","curatorRegistryDetail","manangeCuratorRegistry","operation","isEdit","curatorRegistryDetailId","createCuratorRegistry","updateCuratorRegistryDetails","setIsRegistryDataChange","descriptionChangeHandler","fileChangeHandler","setCustomImage","setUploadImage","saveCustomImage","createObjectURL","tagChangeHandler","backgroundImage","isMulti","maxLength","FilterSectionChips","filterChips","deleteChipHandler","clearFilterHandler","FilterSection","element","allChild","stateFilterCategory","productCount","isCurator","stateFilteredProducts","CashFundCardNotAdded","addButtonClickHandler","CashFundCard","SkeletonRecommendationLoader","Everything","recommendedCashFundImage","updateTour","checkListRef","recommendationAPICalled","blogsAPICalled","isRecommendationLoaderActive","updateRecommendedCashFundImage","toastDisplayed","checkListHeightFromTop","lastScrollTop","rootInViewRef","setCashFundCategoryAndOpenModal","getProductCountByQuantity","totalSum","updateFilterList","newFilterList","mustHaveValue","setCategoryOnRecommandation","recommendations","stateCheckList","finalSubCategoryType","rec","tempSubProductType","setAllRecommendation","getRecommendation","urlParams","pathname","sameVariantshopifyItemId","rData","totalRecommendations","recommendedCategory","stateAllCheckList","parentCat","activeHorizonalVariantIndex","visibleCategory","tempCat","isVisibleProduct","recommendationCat","recCat","allVariants","dictPattern","itemvariant","activeVariantId","itemRecommendations","addedRecommendations","categoryRecommandations","pendingRecommandations","hasItemFound","activeIndex","setAllBlogs","recommendedCat","GET_BLOGS","articles","blog","blogCategory","cashFundImageApiCalled","getSortedProducts","stateBlogs","productsToAppend","currentCashFundImage","imageApiCalled","allProducts","productIds","totalProductQuantity","added","total","superParentCat","childFilterArray","categoryFound","recommendationProduct","undefined","productToPush","groupedProducts","recommendationCount","totalProducts","getChecklistPercentage","checklistItems","scrollAreaEl","scrollTop","showToast","toastMessage","registryContainer","bottom","innerHeight","scrollObserver","inView","entry","scrollarea","checkListCard","nextSibling","scrollIntoView","block","deleteParamsFromUrl","param","addEventListener","stateSeo","stateLoader","elIndex","hasCashFund","rootMargin","closeWithMask","disableInteraction","MainContent","exact","path","route","component","MyRegistry","UploadImageCard","DefaultImage","data-selected","CoverImagePicker","defaultImage","setDefaultImage","defaultImageApiCalled","getDefaultCoverImages","defaultImages","setRegistryDefaultImages","parentRegistryDefaultImages","closeCoverImagePicker","imageId","registryImage","EditViewRegistryDetail","registryName","changeRegistryName","greeting","changeGreeting","greetingChangeHandler","closeEditRegistryDetail","dueDate","RegistryImageHeaderSkeleton","headerImage","crossOrigin","GiftCardSkeleton","ShareRegistrySkeleton","elementId","gift","ShareRegistry","siteHostName","host","registryInfoUrl","setRegistryInfoUrl","registryVisibility","setRegistryVisibility","setRegistryUrl","registryError","setRegistryError","registryUrlAvailable","setRegistryUrlAvailable","inputContainerRef","isPublicError","sharingText","sharingUrl","origin","facebookShareLink","encodeURI","twitterShareLink","pinterestShareLink","toggleVisibilityOfShareSkeleton","closeShareRegistry","hasNoProducts","xDown","yDown","canChangeRegistryVisibility","pinterestShareClickHandler","html2canvas","allowTaint","useCORS","windowWidth","windowHeight","complete","base64Image","valueOf","image_url","pinterestUrl","onTouchStart","evt","touches","Array","from","touch","clientX","clientY","handleTouchStart","onTouchMove","xUp","yUp","xDiff","yDiff","handleTouchMove","readOnly","available","checkUpdateRegistryUrlSlug","removeAttribute","select","execCommand","removeChild","copyRegistryClickHandler","rel","CDN_ROUTES","ViewRegistryHeader","showCoverImagePicker","showEditRegistryDetail","showShareRegistry","registryDefaultImages","fixedViewRegistryHeader","changeRegistryDetail","handleGuestView","handleDisableViewGuest","shareHandler","viewRegistryHeaderObserverChange","boundingClientRect","guestViewRegistryState","disableScroll","registryNameRender","registryButtonsRender","threshold","SortFilter","activeSortFilterState","sortBtnRef","dropdownClickHandler","sortItem","handleSortSelection","SortFilterMobile","currentSort","setCurrentSort","filterContentMobileRef","ViewFilterMobile","stateCategoriesInfo","stateFilterCategories","filterCountState","filterCategoryLimit","setFilterCategoryLimit","getLimitOfFliter","limit","under50","between50100","moreThan100","maStoreItems","otherStoreItems","giftStatus","totalAvailable","totalReserved","totalPurchased","accordionRef","handleMobileToggleEvent","parentFilterID","limitLength","isFound","newFilterCateoryLimit","categorylimit","changeParentLimitHandler","SortFilterSection","doneViewFilterModal","setFilterhandler","clearViewFilterModal","closeViewFilterModal","handleIsGotIt","isFeaturedNoticeRead","getFilterChips","filterCat","childCat","viewFilterStateHandler","stateActiveSortFilter","stateViewRegistryProducts","ViewFilter","clearClickHandler","AlreadyBoughtProduct","stateUserInfo","reservedQuantity","setReservedQuantity","fromMail","setInfo","reservedEmail","maxAllowedQuantity","foundUserData","partnerUser","onFocusHandler","totalQuantityAvalible","giftMessageChangeHandler","CashContributedAlready","hasDecimal","amountChangeHandler","GiveMAGiftModel","isBoughtThisAlready","isContributedAlready","setModalData","iBoughtThisAlready","onFocusCashFundHandler","validBoughtThisAlreadyData","productBoughtAlreadyInfo","onFocusBoughtThisAlreadyHandler","fieldName","validCashContributedAlreadyData","cashContributedAlreadyInfo","onFocusCashContributedAlreadyHandler","validCashFundData","round","addProductToCartHandler","properties","_registry_item_id","defaultAddress","cart","submitDataHandler","registryUrlSlug","updateGuestViewProduct","giveGroupGift","cashInLieu","cashFundGift","contributeRestHandler","contributeAmount","GiveGiftFromAnotherStore","registeredEmail","validEmail","removeProductFromList","updatedProducts","purchaseProduct","removeReservedAndAddProducts","emailFound","removeProductReservation","copyAddress","address1","address2","city","province","country","zip","modalLeftView","modalSecondaryBtn","modalPrimaryBtn","GuestViewCard","showMAGiftmodel","setMAGiftModel","showAnotherStoreGiftmodel","setAnotherStoreGiftmodel","setIsGroupGift","setIsCashAcceptedOnly","modelTitle","setModelTitle","openModelHandler","hasUserReservedProduct","hideDetails","GuestViewHeader","isGuestViewRegistry","GuestSortFilter","isListViewActive","setGuestLayout","GuestSortFilterMobile","GuestFilterMobile","categoryFilterLimit","GuestSortSection","showGuestFilterModal","guestChildFilter","guestFilterProducts","totalFilteredProducts","clearGuestFilterHandlerMobile","viewGuestFilterStateHandler","currTotalCount","doneGuestViewFilterModal","clearGuestViewFilterModal","closeGuestViewFilterModal","changeTotalCount","GuestFilter","Toast","toastClassName","autoClose","hideProgressBar","newestOnTop","closeOnClick","closeButton","parentElement","dismiss","RedirectionScreen","ProductLoader","GuestTileCard","CancelReservation","cancelReservationItem","showCancelReservation","quantityToCancel","cancelReservationClickHandler","registryItem","removeReservedQuantity","keepReservedQuantity","removeReservedRegistryItem","itemId","tempToken","replaceAll","localCancelReservationItem","verifyCancelReservationToken","EmailAlreadyBoughtProductModal","showAlreadyBoughtProduct","localAlreadyBoughtItem","verifyAlreadyBoughtToken","GuestView","isFirstTime","isSendMessageModalOpen","subject","totalProductCount","reservedAndPurchasedProducts","nonReservedAndPurchasedProducts","showLoader","BABY_GIFTS_URL","AVAILABLE","RESERVED","PURCHASED","PRICE_1","PRICE_2","PRICE_3","MONICA_AND_ANDY","ELSEWHERE","allChildFilterCat","finalFilterApplied","ele","totalAddedGifts","getFiltersApplied","sortBy","lessThanEqual","greaterThanEqual","hasPriceFilter","price_Lte","price_Gte","hasGuestReservedProduct","filterProductsOnPurchased","allProduct","nonReservedAndPurchasedProduct","reservedAndPurchasedProduct","floor","updateGuestViewRegistryProduct","emptyAllProduct","filtersApplied","clearAllProduct","stateGuestViewPagination","responseData","pagenationInfo","isAllGiftsPurchased","filterCategoryLimitHandler","limitData","sortByHighToLow","productList","sortByLowToHigh","getSortedFilteredProducts","guestProducts","sortedProducts","getdataForFirstTime","registrySlug","validSendMessageData","subjectChangeHandler","messageChangeHandler","sendMessageHandler","setTotalCount","num","cancelReservation","stateGuestViewRootRegistry","emailAlreadyBoughtProductModal","stateIsGuestViewRegistry","stateGuestGiftsRedirectionInfo","filteredSortProducts","scrollThreshold","registryUsers","ViewRegistryHome","localAddedProductState","handleFilterProductChange","setTotalProductCount","toggleMustHaveProductAction","SortableItem","sortableElement","SortableContainer","sortableContainer","getSortedProductsByFilters","finalFilterProduct","sortedData","newSortedProducts","isFeatured","sortByMustHave","viewRegistryProductsId","addProduct","EmptyAddedCard","onSortEnd","oldIndex","newIndex","itemsOldPosition","arrayMove","oldPosition","updateViewRegistryPosition","helperClass","axis","lockAxis","useWindowAsScrollContainer","disableAutoscroll","useDragHandle","updateViewRegistryTourFlag","ViewRegistry","TodoWidget","performTodoAction","redirectUrl","todoButtonClickHandler","buttonEl","contentEl","removeExtraTodoContentClass","stateTodo","Filters","filterChangeHandler","filterId","stateFilters","ThankYouList","saveData","download","revokeObjectURL","downloadClickHandler","displayThankYou","TrackGiftsSidebar","Search","inputContainer","applySearch","searchState","componentRef","searchInputChangeHandler","searchInput","searchClickHandler","giftName","userName","userEmail","addGiftClickHandler","addGift","giftNameChangeHandler","userNameChangeHandler","userEmailChangeHandler","TrackGifts","showTrackFilterModal","showSearchPopUp","searchRef","closeTrackFilterModal","toggleSearchBar","trackFilterModalFooterButtons","stateTrackGiftsRedirectionInfo","stateBuildRegistryFilterApplies","stateRouter","useTranslation","stickyNav","isOnboardingCompleted","to","onpopstate","buildFilterEl","innerWidth","parentWidth","Option","QuestionnaireProgressBar","ceil","completed","CustomDateInput","ref1","LOGIN_TITLE","SIGNUP_TITLE","PARTNER_TITLE","RADIO","PARTNER","LITTLE_ONCE_ID","questionId","optionId","BOTH_OPTION_ID","SKIP_BOTH_OPTION","ANIMATED","BUILD_REGISTRY_CASE","REGISTRY_QUIZ_CASE","login","signUpErrors","signInErrors","partnerErrors","submitAnswer","bulkSaved","signInRedirectionUrl","currentAnswer","totalQuestions","directLogin","localLoggedIn","dateInputValue","isActiveToast","totalToSubtract","getQuestionApiCalled","alreadyAnsweredFollowUp","maRePrURL","hasRedirected","clearErrorState","hasRedirectedTOAddToRegistry","submitAllAnswers","checkValidEmail","optionalRegistryId","submitBulk","stateOnboardingAnswers","stateOnboardingRegistry","returnToURL","answer","questionOptionInput","isFromOnboarding","addRegistryMultipleQuestionOption","registryQuestionOptionInput","updateOrCreateRegistrySingleQuestionOption","redirectionUrl","clearToastMessage","setToastMessage","formattedToastMessage","gotoNextQuestion","nextQuestionId","returnNext","nextFullQuestion","idToMatch","stateOnboardingQuestions","ques","stateLoggedIn","setQuestionBasedOnId","finalQuestion","foundQuestion","parentQuestion","newTotalQuestions","addAnswerToState","followUpsToSubtract","dontAddToNewState","answerRadioQuestion","isFollowUpQuestion","watchNextBtn","nextBtnState","answerDataQuestion","dateCheck","dateArray","dateString","textInputTypeChangeHandler","inputRefs","field","enableBtn","changeLoginState","refs","setErrorBasedOnResponse","parentErrors","subErrors","signInEmailInputChangeHandler","signInPasswordInputChangeHandler","password","validateSignInInputs","emailRef","passwordRef","signInClickHandler","loginAnswered","returnTo","loginUser","cookie","registryRes","activeRegistry","getSignInContent","loginInputKeyUpHandler","signUpFirstNameChangeHandler","signUpLastNameChangeHandler","signUpEmailChangeHandler","signUpPasswordChangeHandler","signUpClickHandler","firstNameRef","lastNameRef","registerUser","getSignUpContent","savePartnerDetail","nameRef","partnerDetail","addPartnerAccount","getPartnerContent","dateInputChange","date","inputref","getDateFromString","str","darr","alreadyHaveAccountSignInClickHandler","prevQuestion","reverse","q","access_token","loginChecked","localTotalGifts","toUpperCase","toastMessageToDisplay","loginQuestion","answerInputType","answeredOption","set","staticQuestionTitle","helpText","questionOptions","minDate","dateFormat","customInput","defaultValue","el1_toast","el2_question","el3_options","onAnimationEnd","animationDelay","dangerouslySetInnerHTML","__html","VERIFY_TOKEN_ACTION_TYPES","verifyTokenRequest","customer","redirectVerifyToken","VerifyToken","verifyToken","openEditChecklist","closePersonalise","PersonaliseFooter","nextQuestion","SkipQuestionLink","linkClickHandler","PersonaliseChecklist","prevQuestionId","activeQuestionId","checkBoxSelected","headerHeightFromTop","isAnsweredChanged","CHECKBOX","DATE","calulatePercentage","answerQuestionCount","totalQuestionCount","totalAnwer","statePersonaliseQuestions","doNotRedirect","answerCheckBoxQuestion","answerId","tempOption","ans","isActiveIdPresent","gotoPrevQuestion","popPrevQuestionId","pop","statePersonaliseAnswers","finalAnswer","submitQuestionAnswer","op","hasAnswerChanged","prevAnswer","foundAnswer","selectCheckboxAnswer","checkBoxRef","removeIndex","quizMode","setStateQuestionWithSelectedAnswer","answerOpt","opt","selectedColorSchemes","handleKeyboardNavigation","prevQuestionID","currentQuestion","selectedOptionID","selectOptions","selectedOption","defaultChecked","meta","colors","existingDate","showOverrideModal","showAlertQuestion","isCheckListEdited","hasCategoryApiCalled","closeAndSavePersonaliseCheckList","finalCheckListData","tempStateCheckList","tempData","itemCountData","gotoPersonaliseQuestions","quizModalFooter","handleGotoTakeQuiz","handleSaveAndCloseEditChecklist","FindRegistry","searchName","setSearchName","allRegistry","setAllRegistry","hasRegistry","setHasRegistry","searchRegistry","setSearchRegistry","textChangeHandler","findRegistryHandler","findRegistry","BackToTop","Unsubscribe","unsubscribeClickHandler","textAreaEl","unsubscribed_reason","parseUrlToken","ViewsContainer","displayContent","foundRegistry","seoApiCalled","url_slug","is_curator_user","onscroll","documentElement","EditChecklist","RegistryHero","render","cache","InMemoryCache","errorLink","graphQLErrors","networkError","locations","httpLink","HttpLink","uri","ApolloLink","ApolloClient","App","I18nextProvider","i18n","client","isLocalhost","Boolean","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","ReactDOM","process","fetch","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.8ce9de65.chunk.js","sourcesContent":["export const MY_REGISTRY_ACTION_TYPES = {\n\t// Recommended Product\n\tADD_RECOMMENDED_PRODUCT: \"ADD_RECOMMENDED_PRODUCT\",\n\tINCREMENT_QUANTITY: \"INCREMENT_QUANTITY\",\n\tDECREMENT_QUANTITY: \"DECREMENT_QUANTITY\",\n\n\t// Registry product\n\tSET_REGISTRY_PRODUCTS: \"SET_REGISTRY_PRODUCTS\",\n\tTOGGLE_MUST_HAVE_PRODUCT: \"TOGGLE_MUST_HAVE_PRODUCT\",\n\tADD_PRODUCT_TO_CART: \"ADD_PRODUCT_TO_CART\",\n\tREMOVE_PRODUCT_FROM_CART: \"REMOVE_PRODUCT_FROM_CART\",\n\n\t// CheckList\n\tSET_ACTIVE_RECOMMANDATION : \"SET_ACTIVE_RECOMMANDATION\",\n\tSET_ACTIVE_RECOMMANDATION_VARIANT : \"SET_ACTIVE_RECOMMANDATION_VARIANT\",\n\tSET_ACTIVE_RECOMMANDATION_SIZE_VARIANT : \"SET_ACTIVE_RECOMMANDATION_SIZE_VARIANT\",\n\tSET_ALL_RECOOMANDATION_VARIANT_BY_SIZE : \"SET_ALL_RECOOMANDATION_VARIANT_BY_SIZE\",\n\n\t// Filter Category\n\tSET_FILTER_CATEGORY: \"SET_FILTER_CATEGORY\",\n\n\t// Filter\n\tSET_PARENT_FILTER: \"SET_PARENT_FILTER\",\n\tSET_CHILD_FILTER: \"SET_CHILD_FILTER\",\n\tCLEAR_FILTER: \"CLEAR_FILTER\",\n\n\t// Filtered Products\n\tSET_FILTERED_PRODUCTS : \"SET_FILTERED_PRODUCTS\",\n\tGET_CHECKLIST_ITEMS: \"GET_CHECKLIST_ITEMS\",\n\tGET_ALL_CHECKLIST_ITEMS: \"GET_ALL_CHECKLIST_ITEMS\",\n\n  //ANOTHER STORE PRODUCT\n  SET_ANOTHER_STORE_PRODUCT_INFO : \"SET_ANOTHER_STORE_PRODUCT_INFO\",\n  CLEAR_ANOTHER_STORE_PRODUCT_INFO : \"CLEAR_ANOTHER_STORE_PRODUCT_INFO\",\n\n  // ANOTHER STORE REGISTRY\n  SET_ANOTHER_STORE_REGISTRY_ITEMS: \"SET_ANOTHER_STORE_REGISTRY_ITEMS\",\n\n  // SET CASH FUND CATEGORIES\n\tSET_CASH_FUND_CATEGORIES: \"SET_CASH_FUND_CATEGORIES\",\n\t\n\t// SET FILTER COUNT\n\tSET_FILTER_PRODUCT_COUNT: \"SET_FILTER_PRODUCT_COUNT\",\n\n\t// ADD BLOGS\n\tADD_BLOGS:  \"ADD_BLOGS\",\n\n\t// PUBLISH REGISTRY DETAILS\n\tPUBLISH_REGISTRY: \"PUBLISH_REGISTRY\",\n}\n\nexport const addRecommendedProduct = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.ADD_RECOMMENDED_PRODUCT,\n\t\tpayload: params\n\t}\n}\n\nexport const incrementQuantity = (id, quantity) => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.INCREMENT_QUANTITY,\n\t\tpayload: { id, quantity }\n\t}\n}\n\nexport const decrementQuantity = (id, quantity) => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.DECREMENT_QUANTITY,\n\t\tpayload: { id, quantity }\n\t}\n}\n\n//Set Active recommandation variant\nexport const setActiveRecommandationVariant = (productID, variantID) => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.SET_ACTIVE_RECOMMANDATION_VARIANT,\n\t\tpayload: { productID, variantID }\n\t}\n}\n\n\n//Set Active recommandation variant\nexport const setActiveRecommandationSizeVariant = (productID, variant) => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.SET_ACTIVE_RECOMMANDATION_SIZE_VARIANT,\n\t\tpayload: { productID, variant }\n\t}\n}\n\n// Set recommandation variant by size\nexport const setActiveRecommandationVariantBySize = (productID, variantID, allVariantBySize) => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.SET_ALL_RECOOMANDATION_VARIANT_BY_SIZE,\n\t\tpayload: { productID, variantID, allVariantBySize }\n\t}\n}\n\nexport const toggleMustHaveProduct = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.TOGGLE_MUST_HAVE_PRODUCT,\n\t\tpayload: params\n\t}\n}\n\nexport const setRegistryProducts = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.SET_REGISTRY_PRODUCTS,\n\t\tpayload: params\n\t}\n}\n\nexport const addProductToCart = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.ADD_PRODUCT_TO_CART,\n\t\tpayload: params\n\t}\n}\n\nexport const removeProduct = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.REMOVE_PRODUCT,\n\t\tpayload: params\n\t}\n}\n\nexport const removeProductFromCart = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.REMOVE_PRODUCT_FROM_CART,\n\t\tpayload: params\n\t}\n}\n\nexport const setActiveRecommandation = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.SET_ACTIVE_RECOMMANDATION,\n\t\tpayload: params\n\t}\n}\n\n// Filter Category Section\nexport const setFilterCategory = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.SET_FILTER_CATEGORY,\n\t\tpayload: params\n\t}\n}\n\n// Filter Section\n\nexport const setParentFilter = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.SET_PARENT_FILTER,\n\t\tpayload: params\n\t}\n}\n\nexport const setChildFilter = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.SET_CHILD_FILTER,\n\t\tpayload: params\n\t}\n}\n\nexport const clearFilter = () => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.CLEAR_FILTER,\n\t}\n}\n\n// Filtered Products\nexport const setFilteredProduct = (params) => {\n  return {\n    type: MY_REGISTRY_ACTION_TYPES.SET_FILTERED_PRODUCTS,\n    payload: params\n  }\n}\n\nexport const setCheckListItems = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.GET_CHECKLIST_ITEMS,\n\t\tpayload: params\n\t}\n}\n\nexport const setAllCheckListItems = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.GET_ALL_CHECKLIST_ITEMS,\n\t\tpayload: params\n\t}\n}\n\n// Another store product info\nexport const setAnotherStoreProductInfo = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.SET_ANOTHER_STORE_PRODUCT_INFO,\n\t\tpayload: params\n\t}\n}\n\nexport const clearAnotherStoreProductInfo = () => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.CLEAR_ANOTHER_STORE_PRODUCT_INFO,\n\t}\n}\n\n//Another store Registry Items\nexport const setAnotherStoreRegistryItems = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.SET_ANOTHER_STORE_REGISTRY_ITEMS,\n\t\tpayload: params\n\t}\n}\n\n//Set Cash Fund Categories\nexport const setCashFundCategories = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.SET_CASH_FUND_CATEGORIES,\n\t\tpayload: params\n\t}\n}\n\n//Set filter count\nexport const setFilterProductCount = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.SET_FILTER_PRODUCT_COUNT,\n\t\tpayload: params\n\t}\n}\n\n// For Blogs\nexport const addBlogs = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.ADD_BLOGS,\n\t\tpayload: params\n\t}\n}\n\n// PUBLISH REGISTRY DETAILS\nexport const addPublishRegistryDetails = params => {\n\treturn {\n\t\ttype: MY_REGISTRY_ACTION_TYPES.PUBLISH_REGISTRY,\n\t\tpayload: params\n\t}\n}","import { MY_REGISTRY_ACTION_TYPES } from \"./MyRegistryActions\";\nimport { combineReducers } from \"redux\";\nimport defaultData from \"data/ReducerDefaultData.json\";\n\n// Functions\nconst incrementProductQuantity = (state, payload) => {\n  let {\n    id,\n    quantity\n  } = payload;\n\n  let stateInc = [...state];\n  let newState = [];\n  for (let product of stateInc) {\n    if (product.id === id) {\n      product.quantity += quantity;\n    }\n    newState.push(product);\n  }\n  return newState;\n}\n\nconst decrementProductQuantity = (state, payload) => {\n  let {\n    id,\n    quantity\n  } = payload;\n  let stateDec = [...state];\n  let newState = [];\n  for (let product of stateDec) {\n    if (product.id === id && product.quantity - quantity > 0) {\n      product.quantity -= quantity;\n    }\n    newState.push(product);\n  }\n  return newState;\n}\n\nconst setActiveRecommandationVariantID = (state, payload) => {\n  let {\n    productID,\n    variantID\n  } = payload;\n\n  let stateInc = [...state];\n  let newState = [];\n  for (let product of stateInc) {\n    if (product.id === productID) {\n      product.activeVariant = variantID;\n    }\n    newState.push(product);\n  }\n  return newState;\n}\n\nconst setRecommandationVariantBySize = (state, payload) => {\n  let {\n    productID,\n    variantID,\n    allVariantBySize\n  } = payload;\n\n  let stateInc = [...state];\n  let newState = [];\n  for (let product of stateInc) {\n    if (product.id === productID) {\n      let newVariants = []\n      for (let variant of product.maItemVariantItemRecommendation) {\n        if (variant.variantId === variantID) {\n          variant.allSizeVariant = allVariantBySize\n          variant.isAllVariantFetch = true\n          variant.title = variant.size\n          product.activeVariant = variant\n          product.activeVariant.activeSizeVariant = variant\n        }\n        newVariants.push(variant)\n      }\n      product.maItemVariantItemRecommendation = newVariants\n    }\n    newState.push(product);\n  }\n  return newState;\n}\n\n// setActiveRecommandationVariantSize\nconst setActiveRecommandationVariantSize = (state, payload) => {\n  let {\n    productID,\n    variant\n  } = payload;\n  let stateInc = [...state];\n  let newState = [];\n  for (let product of stateInc) {\n    if (product.id === productID) {\n      product.activeVariant.activeSizeVariant = variant;\n      let finalVariants = []\n      for (let vrt of product.activeVariant.allSizeVariant) {\n        vrt.selected = variant.variantId === vrt.variantId\n        finalVariants.push(vrt)\n      }\n      product.activeVariant.allSizeVariant = finalVariants\n    }\n    newState.push(product);\n  }\n  return newState;\n}\n\nconst toggleMustHave = (state, payload) => {\n  let newState = [];\n  for (let product of state) {\n    if (product.item.id === payload) {\n      product.mostWanted = !product.mostWanted\n    }\n    newState.push(product);\n  }\n  return newState;\n}\n\nconst addProductToCart = (state, payload) => {\n  for (let product of state) {\n    if (product.item.id === payload.id) {\n      return state\n    }\n  }\n\n  let product = {}\n  product['id'] = payload.id;\n  product['isGroupGift'] = false;\n  product['isReserved'] = false;\n  product['quantity'] = payload.quantity;\n  product['mostWanted'] = false;\n  product['orderNo'] = null;\n  product['giftMessage'] = null;\n  product['isAmountReceived'] = false;\n  product['isPurchased'] = false;\n  product['featuredOrder'] = state.length;\n\n  // TODO: Make item_id dynamic after calling POST API for adding it\n  let item = {}\n  item['id'] = payload.id;\n  item['title'] = payload.title;\n  item['shopifyItemId'] = product['id'];\n  item['note'] = null;\n  item['price'] = payload.variants.edges[0].node.price;\n\n  // TODO: Make category dynamic after POST API call\n  let category = {}\n  category['id'] = 2;\n  category['categoryName'] = 'Bassinet';\n  category['isRoot'] = false;\n\n  item['category'] = category;\n  product['item'] = item;\n\n\n  return [...state, product];\n}\n\n\nconst setParentFilter = (state, payload) => {\n  let newState = { ...state }\n  newState.parentFilter = payload\n  newState.childFilter = [...state.childFilter]\n\n  return newState\n}\n\n\nconst setChildFilter = (state, payload) => {\n  let newState = { ...state }\n  newState.childFilter = [...payload]\n\n  return newState\n}\n\n\n// Reducers\n\n// const products = (state = defaultData.myRegistry.defaultProduct, action) => {\nconst recommendedProducts = (state = [], action) => {\n  switch (action.type) {\n    case MY_REGISTRY_ACTION_TYPES.ADD_RECOMMENDED_PRODUCT:\n      return [...action.payload];\n    case MY_REGISTRY_ACTION_TYPES.INCREMENT_QUANTITY:\n      return incrementProductQuantity(state, action.payload);\n    case MY_REGISTRY_ACTION_TYPES.DECREMENT_QUANTITY:\n      return decrementProductQuantity(state, action.payload);\n    case MY_REGISTRY_ACTION_TYPES.SET_ACTIVE_RECOMMANDATION_VARIANT:\n      return setActiveRecommandationVariantID(state, action.payload);\n    case MY_REGISTRY_ACTION_TYPES.SET_ALL_RECOOMANDATION_VARIANT_BY_SIZE:\n      return setRecommandationVariantBySize(state, action.payload);\n    case MY_REGISTRY_ACTION_TYPES.SET_ACTIVE_RECOMMANDATION_SIZE_VARIANT:\n      return setActiveRecommandationVariantSize(state, action.payload);\n    default:\n      return state;\n  }\n}\n\n// const addedProducts = (state = defaultData.myRegistry.defaultAddedProduct, action) => {\nconst addedProducts = (state = [], action) => {\n  switch (action.type) {\n    case MY_REGISTRY_ACTION_TYPES.SET_REGISTRY_PRODUCTS:\n      return action.payload;\n    case MY_REGISTRY_ACTION_TYPES.TOGGLE_MUST_HAVE_PRODUCT:\n      return toggleMustHave([...state], action.payload);\n    case MY_REGISTRY_ACTION_TYPES.ADD_PRODUCT_TO_CART:\n      return addProductToCart([...state], action.payload);\n    case MY_REGISTRY_ACTION_TYPES.REMOVE_PRODUCT_FROM_CART:\n      return state.filter((product, _) => {\n        return product.item.id !== action.payload\n      })\n    default:\n      return state;\n  }\n}\n\nconst activeCategory = (state = \"\", action) => {\n  switch (action.type) {\n    case MY_REGISTRY_ACTION_TYPES.SET_ACTIVE_RECOMMANDATION:\n      return action.payload;\n    default:\n      return state;\n  }\n}\n\nconst filteredProducts = (state = [], action) => {\n  switch (action.type) {\n    case MY_REGISTRY_ACTION_TYPES.SET_FILTERED_PRODUCTS:\n      return [...action.payload]\n    default:\n      return state\n  }\n}\n\nconst filterCategory = (state = [], action) => {\n  switch (action.type) {\n    case MY_REGISTRY_ACTION_TYPES.SET_FILTER_CATEGORY:\n      return action.payload\n    default:\n      return state\n  }\n}\n\nconst filterApplied = (state = defaultData.myRegistry.defaultFilter, action) => {\n  switch (action.type) {\n    case MY_REGISTRY_ACTION_TYPES.SET_PARENT_FILTER:\n      return setParentFilter(state, action.payload)\n    case MY_REGISTRY_ACTION_TYPES.SET_CHILD_FILTER:\n      return setChildFilter(state, action.payload)\n    case MY_REGISTRY_ACTION_TYPES.CLEAR_FILTER:\n      return defaultData.myRegistry.defaultFilter\n    default:\n      return state;\n  }\n}\n\nconst checkList = (state = [], action) => {\n  switch (action.type) {\n    case MY_REGISTRY_ACTION_TYPES.GET_CHECKLIST_ITEMS:\n      return action.payload;\n    default:\n      return state;\n  }\n}\n\nconst allCheckList = (state = [], action) => {\n  switch (action.type) {\n    case MY_REGISTRY_ACTION_TYPES.GET_ALL_CHECKLIST_ITEMS:\n      return action.payload;\n    default:\n      return state;\n  }\n}\n\nconst anotherStoreProduct = (state = defaultData.myRegistry.defaultAnotherStoreProductInfo, action) => {\n  switch (action.type) {\n    case MY_REGISTRY_ACTION_TYPES.SET_ANOTHER_STORE_PRODUCT_INFO:\n      return { ...action.payload };\n    case MY_REGISTRY_ACTION_TYPES.CLEAR_ANOTHER_STORE_PRODUCT_INFO:\n      return defaultData.myRegistry.defaultAnotherStoreProductInfo;\n    default:\n      return state;\n  }\n}\n\nconst anotherStoreRegistry = (state = [], action) => {\n  switch (action.type) {\n    case MY_REGISTRY_ACTION_TYPES.SET_ANOTHER_STORE_REGISTRY_ITEMS:\n      return [...action.payload];\n    default:\n      return state;\n  }\n}\n\nconst cashFundCategories = (state = [], action) => {\n  switch (action.type) {\n    case MY_REGISTRY_ACTION_TYPES.SET_CASH_FUND_CATEGORIES:\n      return [...action.payload];\n    default:\n      return state;\n  }\n}\n\nconst filterCount = (state = defaultData.filterCount, action) => {\n  switch (action.type) {\n    case MY_REGISTRY_ACTION_TYPES.SET_FILTER_PRODUCT_COUNT:\n      return action.payload;\n    default:\n      return state;\n  }\n}\n\nconst blogs = (state = [], action) => {\n  switch (action.type) {\n    case MY_REGISTRY_ACTION_TYPES.ADD_BLOGS:\n      return state.length === 0 ? [...action.payload] : [...state, ...action.payload];\n    default:\n      return state;\n  }\n}\n\nconst publishRegistry = (state = null, action) => {\n  switch (action.type) {\n    case MY_REGISTRY_ACTION_TYPES.PUBLISH_REGISTRY:\n      return { ...action.payload };\n    default:\n      return state;\n  }\n}\n\nexport default combineReducers({\n  recommendedProducts,\n  addedProducts,\n  activeCategory,\n  filterCategory,\n  filteredProducts,\n  filterApplied,\n  checkList,\n  anotherStoreProduct,\n  anotherStoreRegistry,\n  cashFundCategories,\n  filterCount,\n  allCheckList,\n  blogs,\n  publishRegistry\n})","export const VIEW_REGISTRY_ACTION_TYPES = {\n\t// View Registry product\n  VIEW_REGISTRY_PRODUCTS: \"VIEW_REGISTRY_PRODUCTS\",\n  \n  // Filtered Products\n  SET_SORTED_PRODUCTS: \"SET_SORTED_PRODUCTS\",   \n  ACTIVE_SORT_FILTER: \"ACTIVE_SORT_FILTER\",\n  IS_GUEST_VIEW: \"IS_GUEST_VIEW\",\n  SET_VIEW_FILTER_CATEGORY: \"SET_VIEW_FILTER_CATEGORY\",\n\n  // Filter\n\tSET_VIEW_PARENT_FILTER: \"SET_VIEW_PARENT_FILTER\",\n\tSET_VIEW_CHILD_FILTER: \"SET_VIEW_CHILD_FILTER\",\n\tCLEAR_VIEW_FILTER: \"CLEAR_VIEW_FILTER\",\n}\n\nexport const setViewRegistryProducts = params => {\n\treturn {\n\t\ttype: VIEW_REGISTRY_ACTION_TYPES.VIEW_REGISTRY_PRODUCTS,\n\t\tpayload: params\n    }\n}\n\nexport const setSortedFilteredProduct = (params) => {\n  return {\n    type: VIEW_REGISTRY_ACTION_TYPES.SET_SORTED_PRODUCTS,\n    payload: params\n  }\n}\n\nexport const activeSortFilter = (params) => {\n  return {\n    type: VIEW_REGISTRY_ACTION_TYPES.ACTIVE_SORT_FILTER,\n    payload: params\n  }\n}\n\nexport const setguestViewRegistry = (params) => {\n  return {\n    type: VIEW_REGISTRY_ACTION_TYPES.IS_GUEST_VIEW,\n    payload: params\n  }\n}\n\n// View Filter Category Section\nexport const setViewFilterCategory = params => {\n\treturn {\n\t\ttype: VIEW_REGISTRY_ACTION_TYPES.SET_VIEW_FILTER_CATEGORY,\n\t\tpayload: params\n\t}\n}\n\n\n// Filter Section\n\nexport const setParentViewFilter = params => {\n\treturn {\n\t\ttype: VIEW_REGISTRY_ACTION_TYPES.SET_VIEW_PARENT_FILTER,\n\t\tpayload: params\n\t}\n}\n\nexport const setChildViewFilter = params => {\n\treturn {\n\t\ttype: VIEW_REGISTRY_ACTION_TYPES.SET_VIEW_CHILD_FILTER,\n\t\tpayload: params\n\t}\n}\n\nexport const clearViewFilter = () => {\n\treturn {\n\t\ttype: VIEW_REGISTRY_ACTION_TYPES.CLEAR_VIEW_FILTER,\n\t}\n}","import {VIEW_REGISTRY_ACTION_TYPES} from \"./ViewRegistryActions\";\nimport {combineReducers} from \"redux\";\nimport defaultData from \"data/ReducerDefaultData.json\";\n\nconst setParentFilter = (state, payload) => {\n  let newState = {...state}\n  newState.parentFilter = payload\n  newState.childFilter = [...state.childFilter]\n\n  return newState\n}\n\n\nconst setChildFilter = (state, payload) => {\n  let newState = {...state}\n  newState.childFilter = [...payload]\n\n  return newState\n}\n\nconst viewRegistryProducts = (state = [], action) => {\n    switch (action.type) {\n      case VIEW_REGISTRY_ACTION_TYPES.VIEW_REGISTRY_PRODUCTS:\n          return [...action.payload];\n      default:\n          return state;\n    }\n}\n\nconst activeSortFilter = (state = {sortId: 1, sortTitle: 'Featured'}, action) => {\n    switch (action.type) {\n      case VIEW_REGISTRY_ACTION_TYPES.ACTIVE_SORT_FILTER:\n        return {...action.payload};\n      default:\n        return state;\n    }\n  }\n\nconst guestViewRegistry = (state = false, action) => {\n  switch (action.type) {\n    case VIEW_REGISTRY_ACTION_TYPES.IS_GUEST_VIEW:\n      return action.payload;\n    default:\n      return state;\n  }\n}\n\nconst filterCategory = (state = [], action) => {\n  switch (action.type) {\n    case VIEW_REGISTRY_ACTION_TYPES.SET_VIEW_FILTER_CATEGORY:\n      return [...action.payload]\n    default:\n      return state\n  }\n}\n\nconst viewFilterApplied = (state = defaultData.myRegistry.defaultFilter, action) => {\n  switch (action.type) {\n    case VIEW_REGISTRY_ACTION_TYPES.SET_VIEW_PARENT_FILTER:\n      return setParentFilter(state, action.payload)\n    case VIEW_REGISTRY_ACTION_TYPES.SET_VIEW_CHILD_FILTER:\n      return setChildFilter(state, action.payload)\n    case VIEW_REGISTRY_ACTION_TYPES.CLEAR_VIEW_FILTER:\n      return defaultData.myRegistry.defaultFilter\n    default:\n      return state;\n  }\n}\n\nexport default combineReducers({\n    viewRegistryProducts,\n    activeSortFilter,\n    guestViewRegistry,\n    filterCategory,\n    viewFilterApplied\n})\n","export const REGISTRY_ACTION_TYPES = {\n  UPDATE_REGISTRY_INFO: \"UPDATE_REGISTRY_INFO\",\n  SET_LOGGING_STATUS: \"SET_LOGGING_STATUS\",\n  SET_TODO : \"SET_TODO\",\n  SET_ONBOARDING_REGISTRY: \"SET_ONBOARDING_REGISTRY\",\n\n  // For Loader\n  SET_LOADER: 'SET_LOADER',\n\n  // For login user\n  SET_USER_INFO: 'SET_USER_INFO',\n\n  // For meta title description\n  SET_META_INFORMATION: \"SET_META_INFORMATION\"\n}\n\nexport const updateRegistryInfo = (params) => {\n  return {\n    type: REGISTRY_ACTION_TYPES.UPDATE_REGISTRY_INFO,\n    payload: params\n  }\n}\n\nexport const setLoggingStatus = (params) => {\n  return {\n    type: REGISTRY_ACTION_TYPES.SET_LOGGING_STATUS,\n    payload: params\n  }\n}\n\nexport const setTodo = (params) => {\n  return {\n    type: REGISTRY_ACTION_TYPES.SET_TODO,\n    payload: params\n  }\n}\n\nexport const setOnboardingRegistry = (params) => {\n  return {\n    type: REGISTRY_ACTION_TYPES.SET_ONBOARDING_REGISTRY,\n    payload: params\n  }\n}\n\nexport const setLoader = (params) => {\n  return {\n    type: REGISTRY_ACTION_TYPES.SET_LOADER,\n    payload: params\n  }\n}\n\nexport const setUserInfo = (params) => {\n  return {\n    type: REGISTRY_ACTION_TYPES.SET_USER_INFO,\n    payload: params\n  }\n}\n\nexport const setMetaInformation = (params) => {\n  return {\n    type: REGISTRY_ACTION_TYPES.SET_META_INFORMATION,\n    payload: params\n  }\n}\n","import {REGISTRY_ACTION_TYPES} from \"./RegistryActions\"\nimport {combineReducers} from \"redux\";\nimport defaultData from \"data/ReducerDefaultData.json\";\n\nconst registryInfo = (state = {}, action) => {\n  switch (action.type) {\n    case REGISTRY_ACTION_TYPES.UPDATE_REGISTRY_INFO:\n      return action.payload\n    default:\n      return state\n  }\n}\n\nconst loggedIn = (state = false, action) => {\n  switch (action.type) {\n    case REGISTRY_ACTION_TYPES.SET_LOGGING_STATUS:\n      return action.payload\n    default:\n      return state\n  }\n}\n\nconst todo = (state = null, action) => {\n  switch (action.type) {\n    case REGISTRY_ACTION_TYPES.SET_TODO:\n      return [...action.payload]\n    default:\n      return state\n  }\n}\n\nconst onboardingRegistry = (state = \"\", action) => {\n  switch (action.type) {\n    case REGISTRY_ACTION_TYPES.SET_ONBOARDING_REGISTRY:\n      return action.payload\n    default:\n      return state\n  }\n}\n\nconst loader = (state = false, action) => {\n  switch (action.type) {\n    case REGISTRY_ACTION_TYPES.SET_LOADER:\n      return action.payload\n    default:\n      return state\n  }\n}\n\nconst user = (state = {}, action) => {\n  switch (action.type) {\n    case REGISTRY_ACTION_TYPES.SET_USER_INFO:\n      return action.payload\n    default:\n      return state\n  }\n}\n\nconst metaInformation = (state = null, action) => {\n  switch (action.type) {\n    case REGISTRY_ACTION_TYPES.SET_META_INFORMATION:\n      return {...action.payload}\n    default:\n      return state\n  }\n}\n\nexport default combineReducers({\n  info: registryInfo,\n  loggedIn,\n  todo,\n  onboardingRegistry,\n  loader,\n  user,\n  seo: metaInformation\n});","export const PERSONALISE_CHECKLIST_ACTION_TYPES = {\n\n\tGET_ALL_CHECKLIST_ITEMS: \"GET_ALL_CHECKLIST_ITEMS\",\n\tINCREMENT_CHECKLIST_QUANTITY: \"INCREMENT_CHECKLIST_QUANTITY\",\n\tDECREMENT_CHECKLIST_QUANTITY: \"DECREMENT_CHECKLIST_QUANTITY\",\n\tCHECKLIST_ADDED: \"CHECKLIST_ADDED\",\n\n\tPERSONALISE_ADD_QUESTION: \"PERSONALISE_ADD_QUESTION\",\n    PERSONALISE_ADD_ANSWER: \"PERSONALISE_ADD_ANSWER\",\n    PERSONALISE_UPDATE_ANSWER: \"PERSONALISE_UPDATE_ANSWER\"\n}\n\nexport const incrementCheckListQuantity = (id, quantity) => {\n\treturn {\n\t\ttype: PERSONALISE_CHECKLIST_ACTION_TYPES.INCREMENT_CHECKLIST_QUANTITY,\n\t\tpayload: { id, quantity }\n\t}\n}\n\nexport const decrementCheckListQuantity = (id, quantity) => {\n\treturn {\n\t\ttype: PERSONALISE_CHECKLIST_ACTION_TYPES.DECREMENT_CHECKLIST_QUANTITY,\n\t\tpayload: { id, quantity }\n\t}\n}\n\n\nexport const setPersonaliseCheckListItems = params => {\n\treturn {\n\t\ttype: PERSONALISE_CHECKLIST_ACTION_TYPES.GET_ALL_CHECKLIST_ITEMS,\n\t\tpayload: params\n\t}\n}\n\nexport const setIsActiveCheckList = (id, isAdded) => {\n\treturn {\n\t\ttype: PERSONALISE_CHECKLIST_ACTION_TYPES.CHECKLIST_ADDED,\n\t\tpayload: { id, isAdded }\n\t}\n}\n\nexport const addPersonalizeQuestion = (params) => {\n\treturn {\n\t  type: PERSONALISE_CHECKLIST_ACTION_TYPES.PERSONALISE_ADD_QUESTION,\n\t  payload: params\n\t}\n  }\n  \n  export const addPersonalizeQuestionAnswer = (params) => {\n\treturn {\n\t  type: PERSONALISE_CHECKLIST_ACTION_TYPES.PERSONALISE_ADD_ANSWER,\n\t  payload: params\n\t}\n  }\n  \n  export const updatePersonalizeQuestionAnswer = (params) => {\n\treturn {\n\t  type: PERSONALISE_CHECKLIST_ACTION_TYPES.PERSONALISE_UPDATE_ANSWER,\n\t  payload: params\n\t}\n  }","import {PERSONALISE_CHECKLIST_ACTION_TYPES} from \"./PersonaliseCheckListActions\";\nimport {combineReducers} from \"redux\";\n\n// Functions\nconst incrementProductQuantity = (state, payload) => {\n  let {\n    id,\n    quantity\n  } = payload;\n\n  let stateInc = [...state];\n  let newState = [];\n  for (let category of stateInc) {\n    let newSubCategory = []\n    for (let subCategory of category.subCategories) {\n      if (subCategory.id === id) {\n        subCategory.totalItemsCount += quantity;\n      }\n      newSubCategory.push(subCategory)\n    }\n    category.subCategories = newSubCategory\n    newState.push(category)\n  }\n  return newState;\n}\n\nconst decrementProductQuantity = (state, payload) => {\n  let {\n    id,\n    quantity\n  } = payload;\n\n  let stateInc = [...state];\n  let newState = [];\n  for (let category of stateInc) {\n    let newSubCategory = []\n    for (let subCategory of category.subCategories) {\n      if (subCategory.id === id && subCategory.totalItemsCount > 1) {\n        subCategory.totalItemsCount -= quantity;\n      }\n      newSubCategory.push(subCategory)\n    }\n    category.subCategories = newSubCategory\n    newState.push(category)\n  }\n  return newState;\n}\n\nconst setIsAddedCheckList = (state, payload) => {\n  let {\n    id,\n    isAdded\n  } = payload;\n\n  let stateInc = [...state];\n  let newState = [];\n  for (let category of stateInc) {\n    let newSubCategory = []\n    for (let subCategory of category.subCategories) {\n      if (subCategory.id === id) {\n        subCategory.isAdded = isAdded;\n      }\n      newSubCategory.push(subCategory)\n    }\n    category.subCategories = newSubCategory\n    newState.push(category)\n  }\n  return newState;\n}\n\n// Reducers\nconst editedPersonaliseCheckList = (state = [], action) => {\n  switch (action.type) {\n    case PERSONALISE_CHECKLIST_ACTION_TYPES.GET_ALL_CHECKLIST_ITEMS:\n      return [...action.payload];\n    case PERSONALISE_CHECKLIST_ACTION_TYPES.INCREMENT_CHECKLIST_QUANTITY:\n      return incrementProductQuantity(state, action.payload);\n    case PERSONALISE_CHECKLIST_ACTION_TYPES.DECREMENT_CHECKLIST_QUANTITY:\n      return decrementProductQuantity(state, action.payload);\n      case PERSONALISE_CHECKLIST_ACTION_TYPES.CHECKLIST_ADDED:\n        return setIsAddedCheckList(state, action.payload);\n    default:\n      return state;\n  }\n}\n\nconst questions = (state = [], action) => {\n  switch (action.type) {\n    case PERSONALISE_CHECKLIST_ACTION_TYPES.PERSONALISE_ADD_QUESTION:\n      return action.payload\n    default:\n      return state\n  }\n}\n\nconst answers = (state = [], action) => {\n  switch (action.type) {\n    case PERSONALISE_CHECKLIST_ACTION_TYPES.PERSONALISE_ADD_ANSWER:\n      return [...state, action.payload]\n    case PERSONALISE_CHECKLIST_ACTION_TYPES.PERSONALISE_UPDATE_ANSWER:\n      return [...action.payload]\n    default:\n      return state\n  }\n}\n\nexport default combineReducers({\n  editedPersonaliseCheckList,\n  questions,\n  answers\n})","export const ONBOARDING_ACTION_TYPES = {\n  ADD_QUESTION: \"ADD_QUESTION\",\n  ADD_ANSWER: \"ADD_ANSWER\",\n  UPDATE_ANSWER: \"UPDATE_ANSWER\"\n}\n\nexport const addOnboardingQuestion = (params) => {\n  return {\n    type: ONBOARDING_ACTION_TYPES.ADD_QUESTION,\n    payload: params\n  }\n}\n\nexport const addQuestionAnswer = (params) => {\n  return {\n    type: ONBOARDING_ACTION_TYPES.ADD_ANSWER,\n    payload: params\n  }\n}\n\nexport const updateQuestionAnswer = (params) => {\n  return {\n    type: ONBOARDING_ACTION_TYPES.UPDATE_ANSWER,\n    payload: params\n  }\n}","import {ONBOARDING_ACTION_TYPES} from \"./OnboardingAction\";\nimport {combineReducers} from \"redux\";\n\n\nconst questions = (state = [], action) => {\n  switch (action.type) {\n    case ONBOARDING_ACTION_TYPES.ADD_QUESTION:\n      return [...action.payload]\n    default:\n      return state\n  }\n}\n\nconst answers = (state = [], action) => {\n  switch (action.type) {\n    case ONBOARDING_ACTION_TYPES.ADD_ANSWER:\n      return [...state, action.payload]\n    case ONBOARDING_ACTION_TYPES.UPDATE_ANSWER:\n      return [...action.payload]\n    default:\n      return state\n  }\n}\n\nexport default combineReducers({\n  questions,\n  answers\n});","export const GUEST_VIEW_ACTION_TYPES = {\n\tUPDATE_GUEST_VIEW_INFO: \"UPDATE_GUEST_VIEW_INFO\",\n\tSET_GUEST_VIEW_PRODUCT: \"SET_GUEST_VIEW_PRODUCT\",\n\tGUEST_ACTIVE_SORT_FILTER: \"GUEST_ACTIVE_SORT_FILTER\",\n\n\t// Filter\n\tSET_GUEST_VIEW_PARENT_FILTER: \"SET_GUEST_VIEW_PARENT_FILTER\",\n\tSET_GUEST_VIEW_CHILD_FILTER: \"SET_GUEST_VIEW_CHILD_FILTER\",\n\tCLEAR_GUEST_VIEW_FILTER: \"CLEAR_GUEST_VIEW_FILTER\",\n\n\tSET_GUEST_VIEW_FILTER_CATEGORY: \"SET_GUEST_VIEW_FILTER_CATEGORY\",\n\tGUEST_VIEW_SET_PAGINATION_INFO: \"GUEST_VIEW_SET_PAGINATION_INFO\",\n\tCLEAR_GUEST_PAGINATION_INFO: \"CLEAR_GUEST_PAGINATION_INFO\",\n\n\tGET_GUEST_CHECKLIST_ITEMS: \"GET_GUEST_CHECKLIST_ITEMS\",\n\n\t//I BOUGHT THIS ALREADY STORE PRODUCT\n  SET_ALREADY_BOUGHT_PRODUCT_INFO : \"SET_ALREADY_BOUGHT_PRODUCT_INFO\",\n\tCLEAR_ALREADY_BOUGHT_PRODUCT_INFO : \"CLEAR_ALREADY_BOUGHT_PRODUCT_INFO\",\n\n\t//CASH CONTRIBUTED ALREADY INFO\n  SET_CASH_CONTRIBUTED_ALREADY_INFO : \"SET_CASH_CONTRIBUTED_ALREADY_INFO\",\n\tCLEAR_CASH_CONTRIBUTED_ALREADY_INFO : \"CLEAR_CASH_CONTRIBUTED_ALREADY_INFO\",\n\t\n\tGUEST_GIFTS_SET_REDIRECTING_INFO: \"GUEST_GIFTS_SET_REDIRECTING_INFO\",\n}\n\nexport const updateGuestViewInfo = (params) => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.UPDATE_GUEST_VIEW_INFO,\n\t\tpayload: params\n\t}\n}\n\nexport const setGuestViewProducts = params => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.SET_GUEST_VIEW_PRODUCT,\n\t\tpayload: params\n\t}\n}\n\nexport const activeGuestSortFilter = (params) => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.GUEST_ACTIVE_SORT_FILTER,\n\t\tpayload: params\n\t}\n}\n\n// Filter Section\nexport const setParentGuestViewFilter = params => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.SET_GUEST_VIEW_PARENT_FILTER,\n\t\tpayload: params\n\t}\n}\n\nexport const setChildGuestViewFilter = params => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.SET_GUEST_VIEW_CHILD_FILTER,\n\t\tpayload: params\n\t}\n}\n\nexport const clearGuestViewFilter = () => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.CLEAR_GUEST_VIEW_FILTER,\n\t}\n}\n\n// View Filter Category Section\nexport const setGuestViewFilterCategory = params => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.SET_GUEST_VIEW_FILTER_CATEGORY,\n\t\tpayload: params\n\t}\n}\n\nexport const setViewGuestPaginationInfo = (params) => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.GUEST_VIEW_SET_PAGINATION_INFO,\n\t\tpayload: params\n\t}\n}\n\nexport const clearViewGuestPaginationInfo = () => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.CLEAR_GUEST_PAGINATION_INFO,\n\t}\n}\n\nexport const setGuestCheckListItems = params => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.GET_GUEST_CHECKLIST_ITEMS,\n\t\tpayload: params\n\t}\n}\n\n// I BOUGHT THIS ALREADY STORE PRODUCT\nexport const setAlreadyBoughtProductInfo = params => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.SET_ALREADY_BOUGHT_PRODUCT_INFO,\n\t\tpayload: params\n\t}\n}\n\nexport const clearAlreadyBoughtProductInfo = () => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.CLEAR_ALREADY_BOUGHT_PRODUCT_INFO,\n\t}\n}\n\n// For 3rd party Product\nexport const setGuestGiftsRedirectionInfo = (params) => {\n  return {\n    type: GUEST_VIEW_ACTION_TYPES.GUEST_GIFTS_SET_REDIRECTING_INFO,\n    payload: params\n  }\n}\n\n// Cash Contributed Already\nexport const setCashContributedAlreadyInfo = params => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.SET_CASH_CONTRIBUTED_ALREADY_INFO,\n\t\tpayload: params\n\t}\n}\n\nexport const clearCashContributedAlreadyInfo = () => {\n\treturn {\n\t\ttype: GUEST_VIEW_ACTION_TYPES.CLEAR_CASH_CONTRIBUTED_ALREADY_INFO,\n\t}\n}\n","import { GUEST_VIEW_ACTION_TYPES } from \"./GuestViewAction\";\nimport { combineReducers } from \"redux\";\nimport defaultData from \"data/ReducerDefaultData.json\";\n\nconst guestViewRegistry = (state = { updated: false }, action) => {\n  switch (action.type) {\n    case GUEST_VIEW_ACTION_TYPES.UPDATE_GUEST_VIEW_INFO:\n      return { ...action.payload }\n    default:\n      return state\n  }\n}\n\nconst addedGuestProducts = (state = [], action) => {\n  switch (action.type) {\n    case GUEST_VIEW_ACTION_TYPES.SET_GUEST_VIEW_PRODUCT:\n      return  [...action.payload];\n    default:\n      return state;\n  }\n}\n\nconst activeGuestSortFilter = (state = {sortId: 1, sortTitle: 'Featured'}, action) => {\n  switch (action.type) {\n    case GUEST_VIEW_ACTION_TYPES.GUEST_ACTIVE_SORT_FILTER:\n      return {...action.payload};\n    default:\n      return state;\n  }\n}\n\nconst setParentFilter = (state, payload) => {\n  let newState = {...state}\n  newState.parentFilter = payload\n  newState.childFilter = [...state.childFilter]\n\n  return newState\n}\n\nconst setChildFilter = (state, payload) => {\n  let newState = {...state}\n  newState.childFilter = [...payload]\n\n  return newState\n}\n\nconst guestViewFilterApplied = (state = defaultData.myRegistry.defaultFilter, action) => {\n  switch (action.type) {\n    case GUEST_VIEW_ACTION_TYPES.SET_GUEST_VIEW_PARENT_FILTER:\n      return setParentFilter(state, action.payload)\n    case GUEST_VIEW_ACTION_TYPES.SET_GUEST_VIEW_CHILD_FILTER:\n      return setChildFilter(state, action.payload)\n    case GUEST_VIEW_ACTION_TYPES.CLEAR_GUEST_VIEW_FILTER:\n      return defaultData.myRegistry.defaultFilter\n    default:\n      return state;\n  }\n}\n\nconst guestFilterCategory = (state = [], action) => {\n  switch (action.type) {\n    case GUEST_VIEW_ACTION_TYPES.SET_GUEST_VIEW_FILTER_CATEGORY:\n      return [...action.payload]\n    default:\n      return state\n  }\n}\n\nconst paginationInfo = (state = defaultData.trackGifts.pagination, action) => {\n  switch (action.type) {\n    case GUEST_VIEW_ACTION_TYPES.GUEST_VIEW_SET_PAGINATION_INFO:\n      return {...action.payload}\n    case GUEST_VIEW_ACTION_TYPES.CLEAR_GUEST_PAGINATION_INFO:\n      return defaultData.trackGifts.pagination\n    default:\n      return state\n  }\n}\n\nconst checkList = (state = [], action) => {\n  switch (action.type) {\n    case GUEST_VIEW_ACTION_TYPES.GET_GUEST_CHECKLIST_ITEMS:\n      return action.payload;\n    default:\n      return state;\n  }\n}\n\nconst alreadyBoughtProduct = (state = defaultData.defaultAlreadyBoughtProductInfo, action) => {\n  switch (action.type) {\n    case GUEST_VIEW_ACTION_TYPES.SET_ALREADY_BOUGHT_PRODUCT_INFO:\n      return {...action.payload};\n    case GUEST_VIEW_ACTION_TYPES.CLEAR_ALREADY_BOUGHT_PRODUCT_INFO:\n      return defaultData.defaultAlreadyBoughtProductInfo;\n    default:\n      return state;\n  }\n}\n\nconst redirectionInfo = (state = {}, action) => {\n  switch (action.type) {\n    case GUEST_VIEW_ACTION_TYPES.GUEST_GIFTS_SET_REDIRECTING_INFO:\n      return {...action.payload}\n    default:\n      return state\n  }\n}\n\nconst cashContributedAlready = (state = defaultData.defaultCashContributedAlready, action) => {\n  switch (action.type) {\n    case GUEST_VIEW_ACTION_TYPES.SET_CASH_CONTRIBUTED_ALREADY_INFO:\n      return {...action.payload};\n    case GUEST_VIEW_ACTION_TYPES.CLEAR_CASH_CONTRIBUTED_ALREADY_INFO:\n      return defaultData.defaultCashContributedAlready;\n    default:\n      return state;\n  }\n}\n\nexport default combineReducers({\n  info: guestViewRegistry,\n  product: addedGuestProducts,\n  activeGuestSortFilter,\n  guestViewFilterApplied,\n  guestFilterCategory,\n  paginationInfo,\n  checkList,\n  alreadyBoughtProduct,\n  redirectionInfo,\n  cashContributedAlready,\n});","export const TRACK_GIFTS_ACTION_TYPES = {\n  TRACK_GIFTS_ACTIVE_VIEW: \"TRACK_GIFTS_ACTIVE_VIEW\",\n\n  TRACK_GIFTS_SET_PRODUCT: \"TRACK_GIFTS_SET_PRODUCT\",\n\n  TRACK_GIFTS_SET_PAGINATION_INFO: \"TRACK_GIFTS_SET_PAGINATION_INFO\",\n\n  TRACK_GIFTS_SET_FILTERS: \"TRACK_GIFTS_SET_FILTERS\",\n\n  TRACK_GIFTS_SET_SEARCH: \"TRACK_GIFTS_SET_SEARCH\",\n\n  TRACK_GIFTS_SET_REDIRECTING_INFO: \"TRACK_GIFTS_SET_REDIRECTING_INFO\"\n}\n\nexport const setActiveView = (params) => {\n  return {\n    type: TRACK_GIFTS_ACTION_TYPES.TRACK_GIFTS_ACTIVE_VIEW,\n    payload: params\n  }\n}\n\nexport const setTrackGiftsProduct = (params) => {\n  return {\n    type: TRACK_GIFTS_ACTION_TYPES.TRACK_GIFTS_SET_PRODUCT,\n    payload: params\n  }\n}\n\nexport const setTrackGiftsPaginationInfo = (params) => {\n  return {\n    type: TRACK_GIFTS_ACTION_TYPES.TRACK_GIFTS_SET_PAGINATION_INFO,\n    payload: params\n  }\n}\n\nexport const setTrackGiftsFilters = (params) => {\n  return {\n    type: TRACK_GIFTS_ACTION_TYPES.TRACK_GIFTS_SET_FILTERS,\n    payload: params\n  }\n}\n\nexport const setTrackGiftsSearch = (params) => {\n  return {\n    type: TRACK_GIFTS_ACTION_TYPES.TRACK_GIFTS_SET_SEARCH,\n    payload: params\n  }\n}\n\nexport const setTrackGiftsRedirectionInfo = (params) => {\n  return {\n    type: TRACK_GIFTS_ACTION_TYPES.TRACK_GIFTS_SET_REDIRECTING_INFO,\n    payload: params\n  }\n}\n","import React from \"react\";\nimport \"./ViewBy.scss\";\nimport {useSelector, useDispatch} from \"react-redux\";\nimport {setActiveView} from \"../../TrackGiftsAction\";\n\nexport const TRACK_GIFTS_VIEWS = [\n  {\n    \"id\": 1,\n    \"text\": \"Gifts\"\n  },\n  {\n    \"id\": 2,\n    \"text\": \"Gift Givers\"\n  }\n]\n\nconst ViewBy = () => {\n  const activeView = useSelector(state => state.trackGifts.activeView);\n  const dispatch = useDispatch()\n\n  const changeTrackGiftView = view => {\n    dispatch(setActiveView(view))\n  }\n\n  return (\n    <div className=\"track-gift-view-by\">\n      <p className=\"text-sm\">View By</p>\n      <div className=\"view-by-toggle-section mt-1\">\n        <div\n          className={[\"view-by-toggle text-sm p-2\", activeView.id === TRACK_GIFTS_VIEWS[0].id ? \"active-view-toggle\" : \"\"].join(\" \")}\n          onClick={() => changeTrackGiftView(TRACK_GIFTS_VIEWS[0])}\n        >Gifts\n        </div>\n        <div\n          className={[\"view-by-toggle text-sm p-2\", activeView.id === TRACK_GIFTS_VIEWS[1].id ? \"active-view-toggle\" : \"\"].join(\" \")}\n          onClick={() => changeTrackGiftView(TRACK_GIFTS_VIEWS[1])}\n        >Gift\n          Givers\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default ViewBy;","import {TRACK_GIFTS_ACTION_TYPES} from \"./TrackGiftsAction\";\nimport {combineReducers} from \"redux\";\nimport {TRACK_GIFTS_VIEWS} from \"./components/view-by/ViewBy\";\nimport defaultData from \"data/ReducerDefaultData.json\";\n\n// By default \"Gifts\" are selected\nconst activeView = (state = TRACK_GIFTS_VIEWS[0], action) => {\n  switch (action.type) {\n    case TRACK_GIFTS_ACTION_TYPES.TRACK_GIFTS_ACTIVE_VIEW:\n      return {...action.payload}\n    default:\n      return state\n  }\n}\n\nconst products = (state = [], action) => {\n  switch (action.type) {\n    case TRACK_GIFTS_ACTION_TYPES.TRACK_GIFTS_SET_PRODUCT:\n      return [...action.payload]\n    default:\n      return state\n  }\n}\n\nconst paginationInfo = (state = defaultData.trackGifts.pagination, action) => {\n  switch (action.type) {\n    case TRACK_GIFTS_ACTION_TYPES.TRACK_GIFTS_SET_PAGINATION_INFO:\n      return {...action.payload}\n    default:\n      return state\n  }\n}\n\nconst getFilterDefaultData = () => {\n  let newFilters = defaultData.trackGifts.filters\n  let queryParams = new URLSearchParams(window.location.search)\n  if (queryParams.has('available')) {\n    newFilters = newFilters.map(filter => {\n      let newFilter = {...filter}\n      if (newFilter.id === 4) { // Available filter ID is 4\n        newFilter.selected = true\n      } else {\n        newFilter.selected = false\n      }\n      return newFilter\n    })\n  }\n  return newFilters\n}\n\n  const filters = (state = getFilterDefaultData(), action) => {\n    switch (action.type) {\n      case TRACK_GIFTS_ACTION_TYPES.TRACK_GIFTS_SET_FILTERS:\n        return [...action.payload]\n      default:\n        return state\n    }\n  }\n\n  const search = (state = defaultData.trackGifts.search, action) => {\n    switch (action.type) {\n      case TRACK_GIFTS_ACTION_TYPES.TRACK_GIFTS_SET_SEARCH:\n        return {...action.payload}\n      default:\n        return state\n    }\n  }\n\n  const redirectionInfo = (state = {}, action) => {\n    switch (action.type) {\n      case TRACK_GIFTS_ACTION_TYPES.TRACK_GIFTS_SET_REDIRECTING_INFO:\n        return {...action.payload}\n      default:\n        return state\n    }\n  }\n\n\n  export default combineReducers({\n    activeView,\n    products,\n    paginationInfo,\n    filters,\n    search,\n    redirectionInfo\n  });","import { createStore, applyMiddleware, combineReducers, compose } from \"redux\";\nimport thunk from \"redux-thunk\";\nimport { routerMiddleware, connectRouter } from 'connected-react-router'\nimport { createBrowserHistory } from \"history\";\nimport MyRegistryReducers from \"../modules/my-registry/MyRegistryReducer\";\nimport ViewRegistryReducers from \"modules/view-registry/ViewRegistryReducer\";\nimport registryInfo from \"../modules/registry/RegistryReducer\";\nimport PersonaliseCheckListReducer from \"../modules/personalise-checklist/PersonaliseCheckListReducer\";\nimport Onboarding from \"../modules/onboarding/OnboardingReducer\";\nimport GuestViewReducer from \"../modules/guest-view/GuestViewReducer\";\nimport TrackGiftsReducer from \"../modules/track-gifts/TrackGiftsReducer\";\n\nexport const history = createBrowserHistory();\n\nconst rootReducer = combineReducers({\n  registry: registryInfo,\n  myRegistry: MyRegistryReducers,\n  viewRegistry: ViewRegistryReducers,\n  personaliseCheckList: PersonaliseCheckListReducer,\n  onboarding: Onboarding,\n  trackGifts: TrackGiftsReducer,\n  guestView: GuestViewReducer,\n  router: connectRouter(history)\n})\n\nconst middlewares = [routerMiddleware(history), thunk];\n\nconst composeEnhancer = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose; // eslint-disable-line\n\nexport const store = createStore(\n  rootReducer,\n  composeEnhancer(applyMiddleware(...middlewares))\n);\n","import LanguageDetector from 'i18next-browser-languagedetector';\nimport i18next from 'i18next';\nimport { en, es } from '../locales';\n\nconst options = {\n  interpolation: {\n    escapeValue: false\n  },\n  resources: { en, es }\n};\n\ni18next.use(LanguageDetector).init(options);\n\nexport default i18next;\n","import enLocale from \"./en\";\nimport esLocale from \"./es\";\n\nexport const en = { translation: enLocale };\nexport const es = { translation: esLocale };\n","export default {\n  home: {\n    title: \"HOME\",\n    redirect: \"Redirect\",\n    today: \"Today is the day\",\n    button: \"Dispatch an example action\",\n    values: \"Values from the store (dispatch an action to load more)\",\n    getUser: \"Get Users by Apollo GraphQL queries:\"\n  },\n  another: {\n    title: \"ANOTHER VIEW\"\n  },\n  checkList: {\n    title: \"Checklist\",\n    personalize: \"Personalize\"\n  },\n  registryHeader: {\n    subTitle: \"Due on \",\n    visible: \"Visible\",\n    link:{\n      myRegistry: \"Build Registry\",\n      viewRegistry: \"View Registry\",\n      trackGifts: \"Track Gifts\",\n      shower: \"Baby Shower\",\n      announcements: \"Announcements\",\n      more: \"More\",\n      toDos: \"Here are your top to-dos\"\n    }\n  }\n};\n","export default {\n  home: {\n    title: \"INICIO\",\n    redirect: \"REDIRIGIR\",\n    today: \"Hoy es el da\",\n    button: \"Disparar accin de ejemplo\",\n    values: \"Resultado del store (disparar una accin para cargar ms)\",\n    getUser: \"Obtener usuarios mediante consultas de Apollo GraphQL:\"\n  },\n  another: {\n    title: \"OTRA VISTA\"\n  },\n  checkList: {\n    title: \"\",\n    personalize: \"\"\n  },\n  registryHeader: {\n    subTitle: \"\",\n    visible: \"\",\n    link:{\n      myRegistry: \"\",\n      guestView: \"\",\n      trackGifts: \"\",\n      shower: \"\",\n      announcements: \"\",\n      more: \"\",\n      toDos: \"\"\n    }\n  }\n};\n","let APP_HOME_ROUTE = \"/pages/registry\";\n\nlet routes = {\n  LOGIN: {\n    VERIFY_TOKEN: APP_HOME_ROUTE + \"/verify-token/:token\"\n  },\n  REGISTRY: {\n    HOME: APP_HOME_ROUTE\n  },\n\n  MY_REGISTRY: {\n    HOME: APP_HOME_ROUTE + \"/home\",\n    GIFTS_ADDED: APP_HOME_ROUTE + \"/~/gifts-added\",\n    GIFT_TO_ADD: APP_HOME_ROUTE + \"/~/gifts-to-add\",\n    GIFT_VIEW: APP_HOME_ROUTE + \"/guest-view\",\n    SHOWER: APP_HOME_ROUTE + \"/~/shower\",\n    ANNOUNCEMENTS: APP_HOME_ROUTE + \"/~/announcements\",\n    MORE: APP_HOME_ROUTE + \"/~/more\",\n    TO_DOS: APP_HOME_ROUTE + \"/~/to_dos\"\n  },\n\n  VIEW_REGISTRY: {\n    HOME: APP_HOME_ROUTE + \"/view-registry\"\n  },\n\n  TRACK_GIFTS: {\n    HOME: APP_HOME_ROUTE + \"/track-gifts\"\n  },\n\n  ONBOARDING: {\n    HOME: APP_HOME_ROUTE + \"/onboarding\"\n  },\n\n  PERSONALIZE:{\n    HOME: APP_HOME_ROUTE + \"/personalize-quiz\",\n    CHECKLIST: APP_HOME_ROUTE + \"/personalize-checklist\"\n  },\n\n  GUEST_VIEW: {\n    HOME: APP_HOME_ROUTE+\"\"\n  },\n\n  FIND_REGISTRY: {\n    HOME: APP_HOME_ROUTE + \"/find\"\n  },\n\n  UNSUBSCRIBE: {\n    HOME: APP_HOME_ROUTE + \"/unsubscribe\"\n  }\n}\nexport default routes;","import React from 'react';\nimport \"./MoreOption.scss\";\n\n\nconst MoreOption = (props) => {\n\n  const optionDropdownClickHandler = (ev) => {\n    ev.stopPropagation()\n    let option = document.querySelector(\".more-option-dropdown\");\n    if (option && option.classList.contains(\"remove-more-option\")){\n      ev.target.blur();\n      option.classList.remove(\"remove-more-option\");\n    } else {\n      option.classList.add(\"remove-more-option\");\n    }\n  }\n\n  const removeExtraOptionClass = () => {\n    let option = document.querySelector(\".more-option-dropdown\");\n    if (option.classList.contains(\"remove-more-option\")){\n      option.classList.remove(\"remove-more-option\");\n    }\n  }\n\n  return (\n    <div className={[\"more-option\", props.className ? props.className : null].join(\" \")}>\n      <a tabIndex={2} className={[\"more-option-dropbtn d-block my-auto\",!props.buttonClass ? \"px-1\" : \"\", props.iconClass, props.buttonClass ? props.buttonClass : \"\", props.data.length === 0 ? 'more-option-disable' : ''].join(\" \")}\n         onClick={props.data.length ? (e) => optionDropdownClickHandler(e) : (e) => {e.preventDefault()}}\n         onBlur={props.data.length ? () => removeExtraOptionClass() : () => {}}\n      />\n      {props.data.length ?\n        <div className={[\"more-option-dropdown\"].join(\" \")}>\n          <div className=\"more-option-content py-1\">\n            <ul className=\"p-0 m-0\">\n              {props.data ?\n                props.data.map((option, index) =>\n                  <li className=\"text-sm\" key={\"option-\" + index}>\n                    <button className=\"py-2 px-4 more-option-item\" onClick={option.action}>{option.name}</button>\n                  </li>\n                )\n                : null}\n            </ul>\n          </div>\n        </div>\n        : null}\n    </div>\n  );\n}\n\nexport default MoreOption;\n","import React from 'react';\nimport \"./ModalComponent.scss\";\nimport {Modal} from 'react-bootstrap';\n\nconst ModalComponent = (props) => {\n  return (\n    <Modal show={props.show} size={props.size ? props.size : \"xl\"} className={[\"m-a-modal\", props.modalClassName ? props.modalClassName : \"\", props.noFullSizeMobile ? \"no-full-size-modal-mobile\" : \"\"].join(\" \")}>\n      {props.title || props.titleContent ?\n        <Modal.Header className=\"px-3 pt-3 pb-1 d-block\">\n          <div>\n            <div className=\"d-flex justify-content-between\">\n              <h1>{props.title}</h1>\n              <div className=\"d-flex\">\n                {props.headerContent ? props.headerContent : null}\n                <i className={[\"icon-close m-a-modal-close align-self-center\", props.closeIconClass ? props.closeIconClass : \"\"].join(\" \")} onClick={props.closeModal}/>\n              </div>\n            </div>\n          </div>\n\n          {/* OPTIONAL CONTENT IN TITLE PORTION */}\n          {props.titleContent ? props.titleContent : null}\n\n        </Modal.Header> : null}\n      <Modal.Body className={[\"m-a-modal-content\", !props.noBodyPadding ? \"p-3\" : \"py-0 pr-3\"].join(\" \")}>\n        {/*<div className=\"row\">*/}\n        {/*  <div className=\"col\">*/}\n        {/* MODAL CONTENT GOES HERE */}\n        {props.children}\n        {/*  </div>*/}\n        {/*</div>*/}\n      </Modal.Body>\n      {props.footer ?\n        <Modal.Footer className=\"px-3 py-3 m-a-modal-footer\">\n          {/*  MODAL FOOTER BUTTONS GOES HERE*/}\n          {props.footer}\n        </Modal.Footer>\n        : null}\n    </Modal>\n\n\n  )\n}\n\nexport default ModalComponent;","import React from 'react'\nimport \"./Counter.scss\";\n\nconst Counter = (props) => {\n\treturn (\n\t\t<div className={[\"counter\", \"d-flex align-text-center text-center\", props.className ? props.className : \"\"].join(\" \")}>\n\t\t\t{props.type === 'square' ?\n\t\t\t\t<>\n\t\t\t\t\t<button className=\"icon-btn square-minus-icon pl-0\" onClick={props.decrementHandler}></button>\n\t\t\t\t\t<span className=\"p-2 text-body counter-text\">{props.counter}</span>\n\t\t\t\t\t<button className=\"icon-btn square-plus-icon pr-0\" onClick={props.incrementHandler}></button>\n\t\t\t\t</> :\n\t\t\t\t<>\n\t\t\t\t\t<button className=\"icon-btn icon-circle-minus pl-0\" onClick={props.decrementHandler}></button>\n\t\t\t\t\t<span className=\"mx-2\">{props.counter}</span>\n\t\t\t\t\t<button className=\"icon-btn icon-circle-plus pr-0\" onClick={props.incrementHandler}></button>\n\t\t\t\t</>\n\t\t\t}\n\t\t</div >\n\t);\n}\n\nexport default Counter;","import React from 'react';\nimport \"./ButtonComponent.scss\";\n\nconst ButtonComponent = React.forwardRef((props, ref) => {\n  let btnVariantClass = \"\"\n  if (props.variant === 'primary') {\n    btnVariantClass = \"m-a-primary-btn\";\n  } else if (props.variant === 'secondary') {\n    btnVariantClass = \"m-a-secondary-btn\";\n  }\n\n  return <button\n    className={[\"m-a-btn\", btnVariantClass, props.className].join(\" \")}\n    onClick={props.onClick}\n    ref={ref}\n    disabled={props.disabled ? props.disabled : false}\n  >{props.children}</button>\n})\n\nexport default ButtonComponent;","import React from \"react\";\nimport \"./TogglePills.scss\";\n\nconst TogglePills = (props) => {\n  return (\n    <div\n      className={[\"toggle-pills px-2 py-1 d-flex align-items-end\", props.activeClass, props.className ? props.className : \"\", props.iconClass].join(\" \")}\n      onClick={props.onClick}\n      data-tut={props.dataTut ? props.dataTut : ''}\n    >\n      <i className={[\"mr-2\"].join(\" \")}/>\n      <span className=\"text-sm\">{props.text}</span>\n    </div>\n  )\n}\n\nexport default TogglePills;","import React from \"react\";\nimport \"./CategoryPill.scss\";\n\nconst CategoryPill = (props) => {\n  return (\n    <div\n      className={[\"edit-gift-category-pill p-1 text-sm\", props.className ? props.className : \"\"].join(\" \")}>{props.text}</div>\n  )\n}\n\nexport default CategoryPill;","const backendId = \"https://registry-api.lilhathee.com\";\n// const backendId = \"http://localhost:8000\";\n\nexport default {\n  \"BACKEND_URL\": backendId,\n  \"LOCAL_API_URL\": backendId + \"/api/\",\n  \"PRODUCTION_API_URL\": backendId + \"/api/\"\n}","import { gql } from '@apollo/client';\n\n// Add queries\n\nconst GET_USERS = gql`\nquery getUsers {\n    users {\n        id,\n        email\n    }\n}\n`;\n\nconst GET_CATEGORIES = `\nquery getCategories($registryId: Int!){\n  registryCategories(registryId:$registryId){\n    id,\n    isExcluded,\n    itemsCount,\n    addedItemsCount,\n    totalItemsCount,\n    subCategoriesIsExcluded,\n    category{\n      id,\n      categoryName,\n      collectionUrl,\n      collectionHandle,\n      description,\n      categoryType {\n        id,\n        name\n      }\n      isParent,\n    },\n    registrySubCategories{\n      id,\n      isExcluded,\n      itemsCount,\n      addedItemsCount,\n      totalItemsCount,\n      subCategoriesIsExcluded,\n      category{\n        id,\n        categoryName,\n        collectionUrl,\n        collectionHandle,\n        description,\n        categoryType {\n          id,\n          name\n        }\n        isParent,\n      },\n      registrySubProductTypes{\n        id,\n        isExcluded,\n        itemsCount,\n        addedItemsCount,\n        totalItemsCount,\n        category{\n          id,\n          categoryName,\n          collectionUrl,\n          collectionHandle,\n          description,\n          categoryType {\n            id,\n            name\n          }\n          isParent,\n        },\n      }\n    }\n  }\n }\n`;\n\nconst GET_PRODUCTS = `\nquery registryItems(\n  $registryId:Int!\n  $after: String,\n  $first: Int,\n  $isReserved: Boolean,\n  $isPurchased: Boolean,\n  $isAvailable: Boolean,\n  $sortBy: String,\n  $categories:[Int],\n  $price_Lte: Float,\n  $price_Gte: Float,\n  $store: [String],\n  ){\n    registryItems(\n      registryId:$registryId\n      isReserved: $isReserved,\n      isPurchased: $isPurchased,\n      isAvailable: $isAvailable,\n      sortBy: $sortBy,\n      categories: $categories,\n      price_Lte: $price_Lte,\n      price_Gte: $price_Gte,\n      store: $store,\n      ){\n      registryItems(after: $after, first: $first) {\n        edges {\n          node {\n            id\n            registryitemImage {\n              image\n            }\n            isGroupGift\n            isReserved\n            quantity\n            mostWanted\n            featuredOrder\n            isReserved\n            isAmountReceived\n            isPurchased\n            title\n            imageUrl\n            isCashAcceptedOnly\n            quantityStatus\n            purchasedQuantity\n            isBundleProduct\n            purchasedRegistryItem{\n              id,\n              purchasedQuantity,\n              isPurchased,\n              isAmountReceived,\n              giftMessage,\n              orderNo,\n              storeName,\n              createdTs,\n              contributionAmount\n              groupGift{\n                amountReceived\n              }\n              guestUser{\n                email,\n                firstName,\n                lastName,\n              }\n            }\n            registryCategories {\n              id\n              category {\n                id\n                categoryName\n                categoryType {\n                  id\n                  name\n                }\n                isParent\n                parentCategory {\n                  id\n                  categoryName\n                  isParent\n                    parentCategory {\n                    categoryName\n                  }\n                }\n              }\n            }\n            note\n            item {\n              store {\n                id\n                storeName\n              }\n              id\n              shopifyItemId\n              shopifyItemVariantId\n              storeItemUrl\n              sku\n              compareAtPrice\n              price\n              hideTotal\n            }\n          }\n        }\n        pageInfo {\n          endCursor\n          hasNextPage\n        }\n      }\n      registryItemsAnalysisCount{\n        totalAvailable,\n        totalReserved,\n        totalPurchased,\n        maStoreItems,\n        otherStoreItems,\n        under50,\n        moreThan100,\n        between50100,\n        totalFundsReceived,\n        totalAddedGifts\n      }\n      categoryData\n    }\n  }\n`\n\nconst GET_RECOMMENDATIONS = `\nquery itemRecommendations($registryId: Int!){\n  itemRecommendations(registryId:$registryId){\n    id,\n    imageUrl,\n    title,\n    price,\n    isMaItem,\n    isEnable,\n    sku,\n    storeName,\n    description,\n    shopifyItemId,\n    storeUrl,\n    isBundleProduct,\n    itemRecommendationCategoryItemRecommendation{\n      id\n      isVisibleProduct\n      itemsCount\n      category{\n        id,\n        categoryName,\n        categoryType {\n          id,\n          name\n        }\n        isParent,\n      },\n    }\n    maItemVariantItemRecommendation{\n      id,\n      imageUrl,\n      pattern,\n      iconUrl,\n      size,\n      compareAtPrice,\n      variantId,\n      sku,\n      price,\n      isAvailable\n    }\n  }\n  }\n`;\n\nconst ADD_REGISTRY_ITEM = `\nmutation addRegistryItems(\n    $registryId:Int!,\n    $title:String!,\n    $category:[Int],\n    $tags:[Int]!,\n    $storeItemUrl:String!,\n    $shopifyItemVariantId: String,\n    $sku:String!,\n    $price:Float!,\n    $quantity:Int!,\n    $shopifyItemId:String,\n    $storeName:String!\n    $imageUrl: String,\n    $mostWanted: Boolean,\n    $isBundleProduct: Boolean!,\n    $isGroupGift: Boolean,\n    $bundleProduct: [BundleProductInput],\n    $note: String,\n    $compareAtPrice: Float,\n    $isCashAcceptedOnly: Boolean){\n  addRegistryItems(registryId:$registryId,\n  registryItems:[{\n    storeName: $storeName,\n    items: [{\n      title:$title,\n      registryCategories:$category,\n      tags:$tags,\n      storeItemUrl:$storeItemUrl,\n      sku:$sku,\n      price:$price,\n      compareAtPrice: $compareAtPrice,\n      quantity:$quantity,\n      shopifyItemId: $shopifyItemId,\n      imageUrl: $imageUrl,\n      isBundleProduct: $isBundleProduct,\n      bundleProduct: $bundleProduct,\n      shopifyItemVariantId: $shopifyItemVariantId,\n      mostWanted: $mostWanted,\n      isGroupGift: $isGroupGift,\n      note: $note,\n      isCashAcceptedOnly: $isCashAcceptedOnly\n    },]\n  }])\n  {\n    message\n  }\n}\n`;\n\nconst UPDATE_REGISTRY_ITEM = `\nmutation updateRegistryItems(\n  $registryItemId: Int!,\n  $quantity: Int!,\n  $title:String,\n  $category:[Int],\n  $storeItemUrl:String,\n  $price:Float,\n  $mostWanted: Boolean,\n  $isGroupGift: Boolean,\n  $note: String,\n  $isCashAcceptedOnly: Boolean){\n  updateRegistryItems(registryItemId:$registryItemId, registryItemData:{\n    quantity:$quantity,\n    title:$title,\n    registryCategories:$category,\n    storeItemUrl:$storeItemUrl,\n    price:$price,\n    isReserved:false,\n    mostWanted: $mostWanted,\n    isGroupGift: $isGroupGift,\n    note: $note,\n    isCashAcceptedOnly: $isCashAcceptedOnly\n  }){\n    message\n  }\n}\n`;\n\nconst REMOVE_REGISTRY_ITEM = `\nmutation deleteRegistryItems($registryItemId: Int!){\n  deleteRegistryItems(registryItemId:$registryItemId){\n    message\n  }\n}\n`;\n\nconst GET_REGISTRIES = `\nquery {\n  registries {\n    edges {\n      node {\n        id\n        name\n        urlSlug\n        greeting\n        displayName\n        isFeaturedNoticeRead\n        isFeatured\n        isMustHaveApplied\n        isMaButtonConfigured\n        isBuildRegistryVisited\n        isViewAsGuestVisited\n        isFeaturedOrderApplied\n        isGroupGiftApplied\n        isViewRegistryVisited\n        isCashInLieuItemAdded\n        isCashFundItemAdded\n        isGroupGiftItemAdded\n        isOnboardingCompleted\n        quizMode\n        image {\n          id\n          image\n        }\n        dueDate\n        isPublic\n        user{\n          isCurator\n          bankAccounts{\n            id\n          }\n          defaultAddress{\n            id\n            addressId\n            firstName\n            lastName\n            address1\n            address2\n            city\n            company\n            province\n            country\n            zip\n            phone\n            provinceCode\n            countryCode\n\n          }\n        }\n      }\n    }\n  }\n}\n`;\n\nconst GET_REGISTRY_IMAGES = `\n  query registryImages($registryId: Int!){\n    registryImages(registryId: $registryId) {\n      id\n      image\n      isDefault\n    }\n  }\n`;\n\nconst GET_QUESTIONS = `\n  query getQuestions($registryId: Int, $isPersonalize: Boolean!){\n  questions(registryId: $registryId, isPersonalize: $isPersonalize){\n    id,\n    title,\n    answerInputType,\n    fields,\n    toastMessage,\n    formattedToastMessage,\n    helpText,\n    answers{\n      questionOption{\n        id\n      },\n      optionText\n    },\n    options {\n      id,\n      value,\n      toastMessage,\n      helpText,\n      action,\n      followUpQuestions{\n         question{\n          id,\n          title,\n          fields,\n          answerInputType,\n          toastMessage,\n          formattedToastMessage,\n          options{\n            id\n            value\n            toastMessage\n            action\n          },\n          answers{\n            questionOption{\n              id\n            },\n            optionText\n          },\n        }\n      }\n    }\n  }\n}\n`\n\nconst GET_GUEST_REGISTRY = `\n  query getGuestRegistry($urlSlug: String!, $after: String, $first: Int){\n    registryAsGuest(urlSlug: $urlSlug){\n      id,\n      name,\n      displayName,\n      greeting,\n      isPublic,\n      isAllGiftsPurchased,\n      urlSlug,\n      image {\n        id\n        image\n      },\n      user {\n        firstName,\n        partnerUser {\n          firstName\n        },\n        defaultAddress{\n          id\n          addressId\n          firstName\n          lastName\n          address1\n          address2\n          city\n          company\n          province\n          country\n          zip\n          phone\n          provinceCode\n          countryCode\n        }\n      },\n      registryItems(after: $after, first: $first) {\n        edges{\n          node{\n            id,\n            registryitemImage{\n              image\n            }\n            isGroupGift,\n            isReserved,\n            quantity,\n            mostWanted,\n            featuredOrder,\n            isReserved,\n            isCashAcceptedOnly,\n            isAmountReceived,\n            isPurchased,\n            imageUrl,\n            title,\n            quantityStatus\n            purchasedRegistryItem{\n              id,\n              purchasedQuantity,\n              isPurchased,\n              giftMessage,\n              orderNo,\n              storeName,\n              createdTs,\n              contributionAmount\n              groupGift{\n                amountReceived\n              }\n              guestUser{\n                email,\n                firstName,\n                lastName,\n              }\n            }\n            registryCategories {\n              id,\n              category{\n                categoryName,\n              }\n            }\n            note,\n            item{\n              store{\n                id,\n                storeName\n              }\n              id,\n              shopifyItemId,\n              storeItemUrl,\n              sku,\n              price,\n              isCashFund,\n              hideTotal,\n            }\n          }\n        }\n        pageInfo{\n          endCursor,\n          hasNextPage\n        }\n      }\n    }\n  }\n`\n\nconst GET_PERSONALIZE_QUESTIONS = `\nquery editablePersonalizeQuestions($registryId: Int!){\n  editablePersonalizeQuestions(registryId: $registryId){\n    id,\n    title,\n    answerInputType,\n    fields,\n    isPersonalize,\n    toastMessage,\n    isEditableInPersonalize,\n    formattedToastMessage\n    answers{\n      questionOption{\n        id\n      },\n      optionText\n    },\n    options {\n      id,\n      value,\n      toastMessage,\n      helpText,\n      meta,\n      followUpQuestions{\n         question{\n          id,\n          title,\n          fields,\n          answerInputType,\n          toastMessage,\n          formattedToastMessage\n          isPersonalize,\n          options{\n            id\n            value\n            toastMessage\n          },\n          answers{\n            questionOption{\n              id\n            },\n            optionText\n          },\n        }\n      }\n    }\n  }\n}\n`\n\nconst GET_TRACK_GIFTS = `\nquery registryGifts($registryId: Int!, $giftGivers: Boolean!, $after: String, $first: Int, $isReserved: Boolean, $isAvailable: Boolean, $isPurchased: Boolean, $isFundsReceived: Boolean, $isReturned: Boolean, $searchKeyword: String) {\n  registryGifts(registryId: $registryId, giftGivers: $giftGivers, isReserved: $isReserved, isAvailable: $isAvailable, isPurchased: $isPurchased, isFundsReceived: $isFundsReceived, isReturned: $isReturned, searchKeyword: $searchKeyword) {\n    registryGiftItemsCount {\n      totalAvailable\n      totalPurchased\n      totalReserved\n      totalFundsReceived\n      totalReturned\n    }\n    gifts(after: $after, first: $first) {\n      edges {\n        node {\n          id\n          isGroupGift\n          registryitemImage {\n              image\n            }\n          featuredOrder\n          isReserved\n          isPurchased\n          quantity\n          isCashAcceptedOnly\n          isAmountReceived\n          purchasedQuantity,\n          imageUrl\n          item {\n            store {\n              id\n              storeName\n            }\n            storeItemUrl\n            price\n            isCashFund\n          }\n          registryCategories {\n              id\n              category {\n                id\n                categoryName\n                categoryType {\n                  id\n                  name\n                }\n                isParent\n                parentCategory {\n                  id\n                  categoryName\n                  isParent\n                    parentCategory {\n                    categoryName\n                  }\n                }\n              }\n            }\n          quantityStatus\n          purchasedRegistryItem {\n            id\n            purchasedQuantity\n            isAmountReceived\n            isPurchased\n            isReserved\n            giftMessage\n            orderNo\n            storeName\n            createdTs\n            contributionAmount\n            groupGift {\n              id\n              amountReceived\n              guestUser {\n                email\n                firstName\n                lastName\n                id\n              }\n            }\n            guestUser {\n              email\n              firstName\n              lastName\n              id\n            }\n          }\n          title\n        }\n      }\n      pageInfo {\n        endCursor\n        hasNextPage\n      }\n    }\n  }\n}\n`\n\nconst GET_CASH_FUND_CATEGORIES = `\nquery getCashFund($registryId: Int!){\n  cashFundCategories(registryId:$registryId){\n    id\n    category{\n      id\n      categoryName\n    }\n  }\n}\n`\n\nconst GET_GUEST_REGISTRY_PRODUCT = `\n  query getGuestRegistry(\n    $urlSlug: String!,\n    $after: String,\n    $first: Int,\n    $isReserved: Boolean,\n    $isPurchased: Boolean,\n    $isAvailable: Boolean,\n    $sortBy: String,\n    $categories:[Int],\n    $price_Lte: Float,\n    $price_Gte: Float,\n    $store: [String],\n    ){\n    registryAsGuest(\n      urlSlug: $urlSlug,\n      isReserved: $isReserved,\n      isPurchased: $isPurchased,\n      isAvailable: $isAvailable,\n      sortBy: $sortBy,\n      categories: $categories,\n      price_Lte: $price_Lte,\n      price_Gte: $price_Gte,\n      store: $store,\n      ){\n      isAllGiftsPurchased\n      registryItems(\n        after: $after,\n        first: $first,\n        ) {\n        edges{\n          node{\n            id,\n            registryitemImage{\n              image\n            }\n            isGroupGift,\n            isReserved,\n            quantity,\n            mostWanted,\n            featuredOrder,\n            isReserved,\n            isCashAcceptedOnly,\n            isAmountReceived,\n            isPurchased,\n            imageUrl,\n            purchasedQuantity\n            title,\n            quantityStatus\n            purchasedRegistryItem{\n              id,\n              purchasedQuantity,\n              isPurchased,\n              giftMessage,\n              orderNo,\n              isReserved,\n              storeName,\n              createdTs,\n              contributionAmount\n              groupGift{\n                amountReceived\n              }\n              guestUser{\n                email,\n                firstName,\n                lastName,\n              }\n            }\n            registryCategories {\n              id\n              category {\n                categoryName\n                categoryType {\n                  id\n                  name\n                }\n                isParent\n                parentCategory {\n                  categoryName\n                  isParent\n                    parentCategory {\n                    categoryName\n                  }\n                }\n              }\n            }\n            note,\n            item{\n              store{\n                id,\n                storeName\n              }\n              id,\n              shopifyItemId,\n              storeItemUrl,\n              shopifyItemVariantId,\n              sku,\n              price,\n              compareAtPrice,\n              isCashFund,\n              hideTotal,\n            }\n          }\n        }\n        pageInfo{\n          endCursor,\n          hasNextPage\n        }\n      }\n      registryItemsAnalysisCount{\n        totalAvailable,\n        totalReserved,\n        totalPurchased,\n        maStoreItems,\n        otherStoreItems,\n        under50,\n        moreThan100,\n        between50100,\n        totalFundsReceived,\n        totalAddedGifts\n      }\n      categoryData\n    }\n  }\n`;\n\nconst GET_GUEST_CHECKLIST = `\n  query registryCategoriesAsGuest($urlSlug: String!){\n    registryCategoriesAsGuest(urlSlug: $urlSlug){\n      id,\n      isExcluded,\n      itemsCount,\n      addedItemsCount,\n      totalItemsCount,\n       category{\n        id,\n        categoryName,\n        categoryType{\n          id,\n          name\n        }\n      },\n      registrySubCategories{\n        id,\n        isExcluded,\n        itemsCount,\n        addedItemsCount,\n        totalItemsCount,\n        category{\n          id,\n          categoryName\n        },\n        registrySubProductTypes{\n          id,\n          isExcluded,\n          itemsCount,\n          addedItemsCount,\n          totalItemsCount,\n          category{\n            id,\n            categoryName\n          },\n        }\n      }\n    }\n  }\n`;\n\nconst FIND_REGISTRY = `\n  query findRegistry($registryName: String!){\n    findRegistry(registryName: $registryName){\n      edges{\n        node{\n          id,\n          name,\n          displayName,\n          urlSlug,\n          createdTs,\n          dueDate,\n          user{\n            id,\n            defaultAddress{\n              city,\n              province\n            }\n          }\n        }\n      }\n    }\n  }\n`;\n\nconst GET_TODO = `\n  query registryTodoSteps($registryId: ID!){\n    registryTodoSteps(registryId: $registryId) {\n      label\n      redirect,\n      redirectUrl\n    }\n  }\n`\n\nconst GET_DEFAULT_CASH_FUND_IMAGE = `\n  query cashFundDefaultImage($categoryId: ID!) {\n    cashFundDefaultImage(categoryId: $categoryId)\n  }\n`\n\nconst GET_MA_VARIANT = `\n  query maItemVariants($registryId: Int!, $variantId: String!, $categoryIds: [Int]!){\n  maItemVariants(registryId:$registryId, variantId:$variantId, categoryIds: $categoryIds){\n    id,\n    iconUrl,\n    imageUrl,\n    pattern,\n    size,\n    variantId,\n    compareAtPrice,\n    sku,\n    price,\n    isAvailable\n  }\n}\n`\n\nconst GET_SEO = `\nquery pageMetaDetails($urlSlug: String!){\n  pageMetaDetails(urlSlug:$urlSlug){\n    title,\n    description,\n    pageSlug\n  }\n}\n`\n\nconst GET_MA_VARIANT_BY_SIZE = `\n  query maItemVariantsBySize($registryId: Int!, $itemRecommendationId: Int!, $maItemVariantId: Int!){\n    maItemVariantsBySize(registryId:$registryId, itemRecommendationId:$itemRecommendationId, maItemVariantId:$maItemVariantId){\n      id,\n      iconUrl,\n      imageUrl,\n      pattern,\n      size,\n      variantId,\n      compareAtPrice,\n      sku,\n      price,\n      isAvailable\n      registryCategoryId{\n        id\n      }\n    }\n  }\n`\n\nconst VERIFY_CANCEL_RESERVATION = `\n  query verifyCancelReservationToken($token: String!){\n  verifyCancelReservationToken(token:$token){\n      maxAllowedQuantity,\n      purchasedRegistryItem{\n        id\n        guestUser{\n          email\n        }\n        registryItem{\n          id\n          title\n          registry{\n            id\n            isPublic\n            user{\n              addressUser{\n                province\n              }\n            }\n          }\n          item{\n            id\n            price\n          }\n        }\n      }\n    }\n  }\n`\n\nconst VERIFY_ALREADY_BOUGHT = `\n  query verifyAlreadyBoughtToken($token: String!){\n    verifyAlreadyBoughtToken(token:$token){\n      maxAllowedQuantity,\n      purchasedRegistryItem{\n        id\n        storeName\n        guestUser{\n          email\n        }\n        registryItem {\n          id\n          isGroupGift\n          isReserved\n          quantity\n          mostWanted\n          featuredOrder\n          isReserved\n          isAmountReceived\n          isPurchased\n          title\n          imageUrl\n          isCashAcceptedOnly\n          quantityStatus\n          purchasedQuantity\n          isBundleProduct\n          note\n          item {\n            store {\n              id\n              storeName\n            }\n            id\n            shopifyItemId\n            shopifyItemVariantId\n            storeItemUrl\n            sku\n            compareAtPrice\n            price\n            hideTotal\n          }\n          registryCategories {\n            id\n            category {\n              categoryName\n              categoryType {\n                id\n                name\n              }\n            }\n          }\n          registry{\n            id\n            isPublic\n            user{\n              addressUser{\n                province\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n`;\n\nconst GET_PUBLISH_REGISTRY_DETAILS = `\n  query curatorRegistryDetail($registryId: Int!){\n    curatorRegistryDetail(registryId: $registryId){\n      id,\n      displayName,\n      description,\n      isPublished,\n      imageUrl,\n      image,\n      tags {\n        id,\n        tagName\n      },\n    }\n  }\n`\n\nconst GET_TAGS = `\n  query tags{\n    tags{\n      id,\n      tagName,\n    }\n  }\n`\n\nexport {\n  GET_USERS,\n  GET_CATEGORIES,\n  GET_PRODUCTS,\n  GET_RECOMMENDATIONS,\n  ADD_REGISTRY_ITEM,\n  UPDATE_REGISTRY_ITEM,\n  REMOVE_REGISTRY_ITEM,\n  GET_REGISTRIES,\n  GET_REGISTRY_IMAGES,\n  GET_QUESTIONS,\n  GET_GUEST_REGISTRY,\n  GET_PERSONALIZE_QUESTIONS,\n  GET_TRACK_GIFTS,\n  GET_CASH_FUND_CATEGORIES,\n  GET_GUEST_REGISTRY_PRODUCT,\n  GET_GUEST_CHECKLIST,\n  FIND_REGISTRY,\n  GET_TODO,\n  GET_DEFAULT_CASH_FUND_IMAGE,\n  GET_MA_VARIANT,\n  GET_SEO,\n  GET_MA_VARIANT_BY_SIZE,\n  VERIFY_CANCEL_RESERVATION,\n  VERIFY_ALREADY_BOUGHT,\n  GET_PUBLISH_REGISTRY_DETAILS,\n  GET_TAGS,\n};\n\n// Example to use queries added in home.jsx","import config from './config';\nimport {Cookies} from 'react-cookie';\n\n\nconst cookies = new Cookies();\n// For axios\nexport const apiURL = process.env.NODE_ENV === 'production' ? config.PRODUCTION_API_URL : config.LOCAL_API_URL;\nconst AuthToken = cookies.get('access_token') ? \"Token \" + cookies.get('access_token') : \"\"\n\nconst axios = require(\"axios\");\n\nconst axiosInstance = axios.create({\n  baseURL: apiURL,\n  // TODO: Change Auth Token dyanamic\n  // headers : cookies.get('header')\n  headers: {\"Authorization\": cookies.get('access_token') ? \"Token \" + cookies.get('access_token') : \"\"}\n});\n\nconst axiosInstanceNoToken = axios.create({\n  baseURL: apiURL\n});\n\nconst axiosInstanceNoHeader = axios.create({\n  baseURL: apiURL\n});\n\nexport function graphQLNoToken(data) {\n  return axiosInstanceNoToken.post(\"/graphql\", data);\n}\n\nexport function graphQLNoHeader(data, options) {\n  return axiosInstanceNoHeader.post(\"/graphql\", data, options);\n}\n\nexport function graphQL(data) {\n  return axiosInstance.post(\"/graphql\", data);\n}\n\nexport function getRecommendation(data) {\n  return axiosInstance.get(\"/items\", data);\n}\n\nexport function getScrapedProduct(data) {\n  return axiosInstance.post(\"/items/import_item/\", data);\n}\n\nexport function verifyAccessToken(token) {\n  return axiosInstanceNoToken.post(\"/user/verify/token\", {}, {\n    headers: {\n      'Authorization': `Token ${token}`\n    }\n  });\n}\n\nexport function getAnotherRegistryProducts(data) {\n  return axiosInstance.post(\"/registry/import\", data);\n}\n\nconst axiosInstanceMultipart = axios.create({\n  baseURL: apiURL,\n  headers: {\n    \"Authorization\": AuthToken,\n    'Content-Type': 'multipart/form-data'\n  }\n});\n\nexport function graphQLMultipart(data) {\n  return axiosInstanceMultipart.post(\"/graphql\", data);\n}\n\nexport function pinterestImageUpload(data) {\n  return axiosInstanceMultipart.post(\"/registry/pinterest/upload-image\", data);\n}\n\nexport function addProductToCart(data) {\n  return axios.post(\"/cart/add.js\", data);\n}\n\nexport function downloadThankYouList(registryId) {\n  return axiosInstance.post(`/registry/${registryId}/download/thanks-note`);\n}\n///\n\nexport function unsubscribe(data) {\n  return axiosInstanceNoToken.post(\"/user/unsubscribe-email\", data);\n}","const TOGGLE_MUST_HAVE = `\n   mutation ToggleMustHaveProduct($productId: Int!, $mustHaveValue: Boolean! $quantity: Int!) {\n    updateRegistryItems(registryItemId:$productId, registryItemData:{\n    quantity: $quantity,\n    mostWanted:$mustHaveValue,\n     }){\n      message\n    }\n   }\n`\n\nconst ADD_REGISTRY_ITEM = `\n   mutation addRegistryItems($registryId:Int!,$input: [StoreInput])\n   { addRegistryItems(registryId:$registryId,registryItems: $input) {\n     message\n     }\n   }\n`\n\nconst UPDATE_REGISTRY = `\n  mutation updateRegistryDetail($registryId: Int!, $input: RegistryInput!){\n    updateRegistry(registryId: $registryId, registryData: $input) {\n      registry{\n      name,\n      image{\n            id,image\n        },\n      isCashInLieuItemAdded,\n      isCashFundItemAdded,\n      isGroupGiftItemAdded\n      }\n    }\n  }\n`;\n\nconst UPDATE_VIEW_REGISTRY_POISTION = `\n  mutation registryItemsOrder($registryId:Int!, $registryItems: [RegistryItemOrderInput]){\n    registryItemsOrder(registryId: $registryId,registryItems: $registryItems){\n      message\n    }\n  }\n`;\n\nconst UPDATE_REGISTRY_URL = `\nmutation updateRegistryUrl($registryId:Int!, $urlSlug:String!){\n  checkUpdateRegistryUrlSlug(registryId:$registryId,urlSlugInput:{\n    urlSlug:$urlSlug\n  }){\n    message,\n    registry{\n      id\n    }\n  }\n}\n`\n\nconst REGISTER_USER = `\nmutation register_user($name: String!, $email: String!, $password: String!){\n  registerUser(registerInput:{\n      name:$name,\n      email:$email,\n      password:$password\n  }\n ){\n    user{\n      id\n    },\n    token,\n    redirectionUrl\n  }\n}\n`\nconst SAVE_QUESTION_RESPONSE = `\nmutation addRegistryQuestionOption($registryId: Int!, $answers: [RegistryQuestionOptionInput]!, $isFromOnboarding: Boolean){\n  addRegistryMultipleQuestionOption(registryId: $registryId, registryQuestionOptionInput: $answers, isFromOnboarding: $isFromOnboarding){\n    message\n  }\n}\n`\n\nconst SAVE_REGISTRY_DATA = `\nmutation saveRegistryData($registryData:RegistryInput!, $registryItems:[StoreInput]){\n  importRegistry(registryData: $registryData, registryItems: $registryItems) {\n    message\n  }\n}\n`\n\nconst LOGIN_USER = `\nmutation login_user($email: String!, $password: String!, $returnTo: String){\n  loginUser(loginInput:{\n      email:$email,\n      password:$password\n  },\n  returnTo: $returnTo\n ){\n    user{\n      id\n    },\n    registries\n    token,\n    redirectionUrl\n  }\n}\n`\n\nconst ADD_PARTNER_ACCOUNT = `\nmutation addPartner($partnerDetail: AddPartnerAccountInput!){\n  addPartnerAccount(addPartnerAccountInput:$partnerDetail){\n    message\n  }\n}\n`\n\nconst SAVE_UPDATED_CHECKLIST = `\nmutation addDesiredChecklistItemCount($registryId:Int!, $itemCountData:[DesiredItemCountInput]!){\n  addDesiredChecklistItemCount(registryId: $registryId, itemCountData: $itemCountData){\n    message\n  }\n}\n`\n\nconst UPDATE_REGISTRY_ITEMS = `\nmutation updateRegistryItem($itemId: Int!, $itemData: RegistryItemInput!){\n  updateRegistryItems(registryItemId: $itemId, registryItemData: $itemData) {\n    message\n  }\n}\n`\n\nconst SAVE_SINGLE_QUESTION_RESPONSE = `\nmutation updateOrCreateRegistrySingleQuestionOption($registryId:Int!, $registryQuestionOptionInput: RegistryQuestionOptionInput!, $returnTo: String, $isFromOnboarding: Boolean){\n  updateOrCreateRegistrySingleQuestionOption(registryId: $registryId, registryQuestionOptionInput: $registryQuestionOptionInput, returnTo: $returnTo, isFromOnboarding: $isFromOnboarding){\n    message,\n    redirectionUrl\n  }\n}\n`\n\nconst CREATE_REGISTRY = `\nmutation{\n  createRegistry{\n    registry{\n      id\n    },\n    message,\n    status\n  }\n}\n`\n\nconst TRACK_GIFTS_ADD_GIFT = `\nmutation addGift($registryId: Int!, $gifts: [GiftInput]){\n  addGift(registryId: $registryId, gifts: $gifts){\n   message,\n   status\n  }\n}\n`\n\nconst MARK_AS_PURCHASED_BY_GUEST = `\nmutation markAsPurchasedByGuest(\n  $registryUrlSlug: String!,\n  $registryItemId: Int!,\n  $isPurchased: Boolean!,\n  $storeName: String,\n  $purchasedQuantity: Int,\n  $contributionAmount: Float,\n  $name: String!,\n  $email: String!,\n  $giftMessage: String,\n  $orderNumber: String,\n  ){\n  markAsPurchasedByGuest(registryUrlSlug: $registryUrlSlug,registryItemId: $registryItemId ,purchasedRegistryItemInput:{\n    isPurchased: $isPurchased,\n    storeName: $storeName,\n    purchasedQuantity: $purchasedQuantity,\n    contributionAmount: $contributionAmount,\n    giftMessage: $giftMessage,\n    orderNo: $orderNumber,\n  },guestUserInput:{\n    name: $name,\n    email: $email\n  }){\n    message,\n    status\n  }\n}\n`;\n\nconst GIVE_GROUP_GIFT_GUEST = `\nmutation giveGroupGift(\n  $registryId: Int!,\n  $registryItemId: Int!,\n  $contributionAmount: Float!\n  ){\n  giveGroupGift(\n    registryId: $registryId,\n    registryItemId: $registryItemId,\n    contributionAmount: $contributionAmount\n    ){\n    message,\n    status,\n    variantId\n  }\n}\n`;\n\nconst CASH_FUND_GIFT_GUEST = `\nmutation cashFundGift(\n  $registryId: Int!,\n  $registryItemId: Int!,\n  $contributionAmount: Float!\n  ){\n    cashFundGift(\n    registryId: $registryId,\n    registryItemId: $registryItemId,\n    contributionAmount: $contributionAmount\n    ){\n    message,\n    status,\n    variantId\n  }\n}\n`;\n\nconst MARK_AS_PURCHASED = `\nmutation markAsPurchased($registryId: Int!, $registryItemId: Int!, $purchasedRegistryItemInput: PurchasedRegistryItemInput!, $guestUserInput: GuestUserInput!){\n  markAsPurchased(registryId:$registryId,registryItemId:$registryItemId,purchasedRegistryItemInput:$purchasedRegistryItemInput,guestUserInput:$guestUserInput){\n    message,\n    status\n  }\n}`;\n\nconst CASH_AND_LEAVE = `\nmutation cashInLieu(\n  $registryId: Int!,\n  $registryItemId: Int!,\n  $purchasedQuantity: Int!\n  ){\n    cashInLieu(\n    registryId: $registryId,\n    registryItemId: $registryItemId,\n    purchasedQuantity: $purchasedQuantity\n    ){\n    message,\n    status,\n    variantId\n  }\n}\n`;\n\nconst CASH_FUND_CONTRIBUTION_GUEST = `\nmutation cashFundContribution(\n  $registryUrlSlug: String!,\n  $registryItemId: Int!,\n  $isPurchased: Boolean!,\n  $contributionAmount: Float,\n  $name: String!,\n  $email: String!,\n  $giftMessage: String,\n  ){\n    cashFundContribution(registryUrlSlug: $registryUrlSlug,registryItemId: $registryItemId ,cashFundContributionInput:{\n    isPurchased: $isPurchased,\n    contributionAmount: $contributionAmount,\n    giftMessage: $giftMessage,\n  },guestUserInput:{\n    name: $name,\n    email: $email\n  }){\n    message,\n    status\n  }\n}\n`;\n\nconst RESERVE_REGISTRY_ITEM_GUEST = `\nmutation reserveRegistryItem(\n  $registryId: Int!,\n  $registryItemId: Int!,\n  $isReserved: Boolean!,\n  $isPurchased: Boolean!,\n  $purchasedQuantity: Int,\n  $name: String!,\n  $email: String!,\n  ){\n    reserveRegistryItem(registryId: $registryId,registryItemId: $registryItemId ,reservedRegistryItemInput:{\n    isReserved: $isReserved,\n    isPurchased: $isPurchased,\n    purchasedQuantity: $purchasedQuantity,\n  },\n    firstName: $name,\n    email: $email\n  ){\n    message,\n    status\n  }\n}\n`;\n\nconst REMOVE_RESERVED_ITEM_GUEST = `\nmutation removeReservedRegistryItem(\n  $registryId: Int!,\n  $registryItemId: Int!,\n  $email: String!\n  ){\n    removeReservedRegistryItem(\n    registryId: $registryId,\n    registryItemId: $registryItemId,\n    email: $email\n    ){\n    message,\n    status,\n  }\n}\n`;\n\nconst TOUR_UPDATE_FLAG = `\n  mutation updateRegistry($registryId: Int!,\n    $isMustHaveApplied: Boolean\n    $isBuildRegistryVisited: Boolean\n    $isViewAsGuestVisited: Boolean\n    $isFeaturedOrderApplied: Boolean\n    $isGroupGiftApplied: Boolean\n    $isViewRegistryVisited: Boolean\n    ) {\n    updateRegistry(registryId: $registryId, registryData:{\n      isMustHaveApplied: $isMustHaveApplied\n      isBuildRegistryVisited: $isBuildRegistryVisited\n      isViewAsGuestVisited: $isViewAsGuestVisited\n      isFeaturedOrderApplied: $isFeaturedOrderApplied\n      isGroupGiftApplied: $isGroupGiftApplied\n      isViewRegistryVisited: $isViewRegistryVisited\n    }){\n      registry{\n        id\n      }\n    }\n  }\n`;\n\nconst UPDATE_MA_BUTTON_CONFIGURED = `\n  mutation updateRegistry($registryId: Int!,\n    $isMaButtonConfigured: Boolean\n    ) {\n    updateRegistry(registryId: $registryId, registryData:{\n      isMaButtonConfigured: $isMaButtonConfigured\n    }){\n      registry{\n        id\n      }\n    }\n  }\n`\n\nconst TRACK_GIFTS_BUY_NOW = `\nmutation buyNow($registryId: Int!, $registryItemId: Int!, $buyRegistryItemInput: PurchasedRegistryItemInput!) {\n  buyNow(\n    registryId: $registryId,\n    registryItemId: $registryItemId,\n    buyRegistryItemInput: $buyRegistryItemInput\n  ){\n    message\n    status\n  }\n}\n`;\n\nconst SEND_ALL_PURCHASED_EMAIL = `\nmutation allGiftsPurchasedEmailSend(\n  $urlSlug: String!,\n  $message: String!,\n  $subject: String!,\n  ) {\n    allGiftsPurchasedEmailSend(urlSlug:$urlSlug ,message:$message, subject:$subject){\n      message,\n      status\n    }\n  }\n`;\n\nconst CANCEL_RESERVATION_VIA_LINK = `\n  mutation removeReservedRegistryItem($registryId: Int!, $registryItemId: Int!, $email: String!, $removeReservedQuantity: Int, $keepReservedQuantity: Int){\n    removeReservedRegistryItem(registryId:$registryId,registryItemId:$registryItemId, email:$email,removeReservedQuantity:$removeReservedQuantity,keepReservedQuantity:$keepReservedQuantity){\n        message,\n        status\n      }\n  }\n`\n\nconst CHECK_URL_SLUG_AVAILABILITY = `\n  mutation checkRegistryUrlSlugIsAvailable($registryId: Int!, $urlSlug: String!){\n    checkRegistryUrlSlugIsAvailable(registryId:$registryId,urlSlugInput:{\n      urlSlug:$urlSlug\n    }){\n      message\n      isAvailable\n    }\n  }\n`\n\nconst CREATE_PUBLISH_REGISTRY_DETAILS = `\n  mutation publishCuratorRegistry($registryId: Int!, \n    $input: CuratorRegistryDetailInput!\n    ){\n    publishCuratorRegistry(registryId:$registryId, curatorRegistryDetail:$input){\n      message\n    }\n  }\n`\n\nconst UPDATE_PUBLISH_REGISTRY_DETAILS = `\n  mutation editCuratorRegistryDetail($registryId: Int!, \n    $curatorRegistryDetailId: Int!\n    $input: CuratorRegistryDetailInput!\n    ){\n      editCuratorRegistryDetail(\n        registryId:$registryId, \n        curatorRegistryDetailId: $curatorRegistryDetailId, \n        curatorRegistryDetail:$input,\n        ){\n      message\n    }\n  }\n`;\n\nexport {\n  TOGGLE_MUST_HAVE,\n  ADD_REGISTRY_ITEM,\n  UPDATE_REGISTRY,\n  UPDATE_VIEW_REGISTRY_POISTION,\n  UPDATE_REGISTRY_URL,\n  SAVE_REGISTRY_DATA,\n  REGISTER_USER,\n  SAVE_QUESTION_RESPONSE,\n  LOGIN_USER,\n  SAVE_UPDATED_CHECKLIST,\n  UPDATE_REGISTRY_ITEMS,\n  ADD_PARTNER_ACCOUNT,\n  SAVE_SINGLE_QUESTION_RESPONSE,\n  CREATE_REGISTRY,\n  TRACK_GIFTS_ADD_GIFT,\n  MARK_AS_PURCHASED_BY_GUEST,\n  GIVE_GROUP_GIFT_GUEST,\n  CASH_FUND_GIFT_GUEST,\n  MARK_AS_PURCHASED,\n  CASH_AND_LEAVE,\n  CASH_FUND_CONTRIBUTION_GUEST,\n  RESERVE_REGISTRY_ITEM_GUEST,\n  REMOVE_RESERVED_ITEM_GUEST,\n  TOUR_UPDATE_FLAG,\n  UPDATE_MA_BUTTON_CONFIGURED,\n  TRACK_GIFTS_BUY_NOW,\n  SEND_ALL_PURCHASED_EMAIL,\n  CANCEL_RESERVATION_VIA_LINK,\n  CHECK_URL_SLUG_AVAILABILITY,\n  CREATE_PUBLISH_REGISTRY_DETAILS,\n  UPDATE_PUBLISH_REGISTRY_DETAILS,\n};\n","import React from \"react\";\nimport \"./GiftCardPill.scss\";\n\nconst GiftCardPill = (props) => {\n  let className = \"\"\n  let text = \"\"\n  switch (props.variant) {\n    case \"purchased\":\n      className = \"track-gifts-purchased-pill\"\n      text = \"Purchased\"\n      break\n    case \"reserved\":\n      className = \"track-gifts-reserved-pill\"\n      text = \"Reserved\"\n      break\n    case \"received\":\n      className = \"track-gifts-received-pill\"\n      text = \"Received\"\n      break\n    case \"available\":\n      className = \"track-gifts-available-pill\"\n      text = props.text\n      break\n    default:\n      className = \"\"\n      break\n  }\n\n  if (props.text) {\n    text = props.text\n  }\n\n  return (\n    <div className={[\"track-gifts-pills px-2 d-inline-block\", className, props.className ? props.className : ''].join(\" \")}>\n      <span className=\"text-sm font-medium\">{props.amount != null || undefined ? `${props.amount}` : null} {text}</span>\n    </div>\n  )\n}\n\nexport default GiftCardPill","import React from \"react\";\nimport \"./GiftStatusPill.scss\";\n\nconst GiftStatusPill = (props) => {\n  let pillVariantClass = \"\"\n\n  if (props.variant === 'purchased') {\n    pillVariantClass = \"purchased-pill\";\n  } else if (props.variant === 'reserved') {\n    pillVariantClass = \"reserved-pill\";\n  } else if (props.variant === 'group-gift') {\n    pillVariantClass = \"group-gift-pill\";\n  } else if (props.variant === 'default') {\n    //  Default is still needed\n    pillVariantClass = \"default-pill\";\n  } else {\n    pillVariantClass = \"default-pill\";\n  }\n\n  return (\n    <div\n      className={[\"gift-status-pill\", props.variant === 'group-gift' ? \"pl-5 pr-2\":\"px-3\", pillVariantClass, props.className ? props.className : \"\"].join(\" \")}>\n      <span className=\"text-sm font-medium\">{props.text}</span>\n    </div>\n  )\n}\n\nexport default GiftStatusPill;","import React from \"react\";\nimport './ProductDetailsModel.scss';\nimport GiftStatusPill from '../gift-status-pill/GiftStatusPill'\nimport {formatPrice, productImageLoadErrorHandler, productImageLoadHandler} from \"../../../../utils/commonFunction\";\nimport {CURRENCY} from \"../../../../utils/constants\";\n\nconst ProductDetailsModel = (props) => {\n  return (\n    <div className=\"row product-details-model\">\n      <div className=\"col-12 product-details-image\">\n        {props.data?.imageUrl ?\n          <img className=\"product-img d-block mx-auto\" src={props.data?.imageUrl}\n               onError={(ev) => productImageLoadErrorHandler(ev)}\n               onLoad={(ev) => productImageLoadHandler(ev)}\n               alt={props.data?.title}/>\n          :\n          <div className=\"added-card-no-product-image\"/>\n        }\n        {props.data.mostWanted ?\n          <div\n            className=\"d-flex align-items-center product-details-have product-details-must-have-btn px-1 added-gift-must-have-active\">\n            <i className=\"icon mr-1 d-block heart-fill\"/>\n            <p className=\"text-sm product-details-must-have-text\">Must Have</p>\n          </div>\n          : <></>}\n        <div className=\"px-3 mt-2\">\n          <p className=\"font-medium\">{props.data.title}</p>\n          {!props.data.item.isCashFund ?\n            <a className=\"product-detail-link text-sm font-medium mt-1\" href={props.data.item.storeItemUrl}\n               target=\"_blank\">View Details</a> : null}\n          <div className=\"d-flex align-items-baseline give-gift-model\">\n            {props.data.isGroupGift ?\n              <div className=\"guest-toggle-pills px-1 mr-1 d-flex align-items-center\">\n                <i className=\"guest-icon-active mr-1\"/>\n                <span className=\"text-sm guest-icon-text\">Group Gift</span>\n              </div> : null}\n            {props.data.item.hideTotal ? null : <p className=\"mt-2\">{formatPrice(props.data.item.price)}</p>}\n          </div>\n          {props.data.note ?\n            <>\n              <p className=\"mt-2 text-sm product-note font-medium\">Note:</p>\n              <p className=\"text-sm product-note\">{props.data.note}</p>\n            </>\n            : null}\n          <div className=\"d-flex mt-2 mb-3 flex-wrap align-items-end\">\n            {props.notFromGuestView ?\n              // When used in Track Gift\n              !props.data.isGroupGift ?\n                !props.data.isCashAcceptedOnly ?\n                  <>\n                    {props.data.quantityStatus.purchased_quantity > 0 ?\n                      <GiftStatusPill variant=\"purchased\"\n                                      text={`${props.data.purchasedQuantity} Purchased`}\n                                      className=\"d-inline-block mr-1 mt-2\"/>\n                      : null}\n                    {props.data.quantityStatus.reserved_quantity > 0 ?\n                      <GiftStatusPill variant=\"reserved\"\n                                      text={`${props.data.quantityStatus.reserved_quantity} Reserved`}\n                                      className=\"d-inline-block mr-1 mt-2\"/>\n                      : null}\n                    {props.data.quantityStatus.still_needed > 0 && !props.data.isPurchased ?\n                      <GiftStatusPill\n                        text={`${props.data.quantityStatus.still_needed} ${props.data.quantityStatus.still_needed === props.data.quantity ? 'Requested' : 'Still Needed'}`}\n                        className=\"d-inline-block mr-1 mt-2\"/>\n                      : null}\n                  </>\n                  :\n                  <>\n                    {(props.data.item.price * props.data.quantityStatus.buyable_quantity) > 0 ?\n                      <GiftStatusPill variant=\"purchased\"\n                                      text={`${formatPrice(props.data.item.price * props.data.quantityStatus.buyable_quantity)} ${props.data.purchasedQuantity - props.data.alreadyBoughtProductsQuantity > 0 ? 'Remaining' : 'Received'}`}\n                                      className=\"d-inline-block mr-1 mt-2\"/>\n                      : null}\n                    {props.data.purchasedQuantity > 0 ?\n                      <GiftStatusPill variant=\"purchased\"\n                                      text={`${props.data.purchasedQuantity} Purchased`}\n                                      className=\"d-inline-block mr-1 mt-2\"/>\n                      : null}\n                    {props.data.quantityStatus.still_needed > 0 ?\n                      <GiftStatusPill\n                        text={`${props.data.quantityStatus.still_needed} ${props.data.quantityStatus.still_needed === props.data.quantity ? 'Requested' : 'Still Needed'}`}\n                        className=\"d-inline-block mr-1 mt-2\"/>\n                      : null}\n                  </>\n                :\n                <div className=\"d-flex w-100 align-items-center flex-wrap\">\n                  {props.data.quantityStatus && props.data.quantityStatus.total_contribution_amount <= 0 ?\n                    <GiftStatusPill\n                      text={`${formatPrice(props.data.item.price * props.data.quantity, CURRENCY)} Requested`}\n                      className=\"d-inline-block mr-1 mt-2\"/>\n                    :\n                    props.data.quantity <= props.data.quantityStatus.purchased_quantity || (Number(props.data.registryCategories[0].category.categoryType.id) === 2 && props.data.isPurchased) ?\n                      props.data.quantityStatus.total_contribution_amount - (props.data.item.price * props.data.alreadyBoughtProductsQuantity) - (props.data.item.price * (props.data.purchasedQuantity - props.data.alreadyBoughtProductsQuantity)) > 0 ?\n                        <GiftStatusPill variant=\"purchased\"\n                          // text=\"Purchased\"\n                                        text={`${formatPrice(props.data.quantityStatus.total_contribution_amount - (props.data.item.price * props.data.alreadyBoughtProductsQuantity) - (props.data.item.price * (props.data.purchasedQuantity - props.data.alreadyBoughtProductsQuantity)), CURRENCY)} ${props.data.purchasedQuantity - props.data.alreadyBoughtProductsQuantity > 0 ? 'Remaining' : 'Received'}`}\n                                        className=\"d-inline-block mr-1 mt-2\"/>\n                        : null\n                      :\n                      <div className=\"flex-grow-1 mr-1\">\n                          <span\n                            className=\"text-sm font-medium\">{`Received ${formatPrice(props.data.quantityStatus.total_contribution_amount - (props.data.item.price * props.data.alreadyBoughtProductsQuantity), CURRENCY)}`}\n                          </span>\n                        <span\n                          className=\"text-sm\">{` of ${formatPrice(props.data.item.price * (props.data.quantity - props.data.alreadyBoughtProductsQuantity), CURRENCY)}`}\n                          </span>\n                        <div className=\"added-card-group-gift-progress-bar w-100\">\n                          <div className=\"added-card-group-gift-progress mw-100\"\n                               style={{width: `${((props.data.quantityStatus.total_contribution_amount - (props.data.item.price * props.data.alreadyBoughtProductsQuantity)) / (props.data.item.price * props.data.quantity)) * 100}%`}}/>\n                        </div>\n                      </div>\n                  }\n                  {props.data.purchasedQuantity > 0 && Number(props.data.registryCategories[0].category.categoryType.id) !== 2 ?\n                    <GiftStatusPill variant=\"purchased\"\n                                    text={`${props.data.purchasedQuantity} Purchased`}\n                                    className={[\"d-inline-block mr-1\", props.data.quantity <= props.data?.quantityStatus?.purchased_quantity ? \"mt-2\" : \"\"].join(\" \")}/>\n                    : null}\n                </div>\n\n              :\n              // When used in Guest View\n              <>\n                {props.data.quantityStatus.purchased_quantity ?\n                  <div>\n                    <GiftStatusPill className=\"mr-1\" variant=\"purchased\"\n                                    text={props.data.quantityStatus.purchased_quantity + \" Purchased\"}/>\n                  </div>\n                  : null}\n                {props.data.quantityStatus.reserved_quantity ?\n                  <div className=\"mr-1 mt-md-1 mt-lg-0\">\n                    <GiftStatusPill variant=\"reserved\"\n                                    text={props.data.quantityStatus.reserved_quantity + \" Reserved\"}/>\n                  </div>\n                  : null}\n                {props.data.quantityStatus.still_needed > 0 && props.data.registryCategories && props.data.registryCategories.length > 0 && Number(props.data.registryCategories[0].category.categoryType.id) !== 2 ?\n                  <div className=\"mr-1 mt-md-1 mt-lg-1\">\n                    <GiftStatusPill variant=\"default\"\n                                    text={`${props.data.quantityStatus.still_needed} ${props.data.quantityStatus.purchased_quantity === 0 ? \" Requested\" : \" Still Needed\"}`}/>\n                  </div>\n                  : null}\n              </>\n            }\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default ProductDetailsModel;","import React from \"react\";\nimport \"./BuyNow.scss\";\nimport Button from \"../../../commons/components/button-component/ButtonComponent\";\nimport {BUYNOW_REDIRECTION_TIME, LOCAL_STORAGE_TRACK_GIFT_BUY_KEY} from \"../../../../utils/constants\";\nimport {connect} from \"react-redux\";\nimport {setTrackGiftsRedirectionInfo} from \"../../TrackGiftsAction\";\nimport Modal from \"../../../commons/components/modal-component/ModalComponent\";\nimport ProductDetailsModel from \"../../../commons/components/product-details-model/ProductDetailsModel\";\nimport Counter from \"../../../commons/components/counter/Counter\";\nimport {toast} from \"react-toastify\";\nimport {EMAIL_RE} from \"utils/constants\";\nimport {TRACK_GIFTS_BUY_NOW} from \"../../../../api/mutations\";\nimport {graphQL} from \"../../../../api/axios\";\nimport {getCategories, getProducts, getTodoList, getTrackGiftsProduct, isInputTextValid} from \"../../../../utils/commonFunction\";\nimport {setLoader} from \"../../../registry/RegistryActions\";\n\nclass BuyNow extends React.Component {\n\n  state = {\n    show: false,\n    quantity: 1,\n    storeName: \"\",\n    orderNumber: \"\",\n    guestName: \"\",\n    guestEmail: \"\",\n    errors: {}\n  }\n\n  modalCloseHandler = () => {\n    this.setState({\n      show: false,\n      quantity: 1,\n      storeName: \"\",\n      orderNumber: \"\",\n      guestName: \"\",\n      guestEmail: \"\",\n      errors: {}\n    })\n  }\n\n  incrementQuantity = () => {\n    this.setState((prevState, _) => {\n      return {quantity: prevState.quantity + 1 <= this.props.productData.quantityStatus.buyable_quantity ? prevState.quantity + 1 : prevState.quantity}\n    })\n  }\n\n  decrementQuantity = () => {\n    this.setState((prevState, _) => ({\n      quantity: prevState.quantity - 1 > 0 ? prevState.quantity - 1 : 1\n    }))\n  }\n\n  storeNameChangeHandler = ev => {\n    if (!isInputTextValid(ev)) {\n      return;\n    }\n    this.setState({\n      storeName: ev.target.value\n    })\n  }\n\n  orderNumberChangeHandler = ev => {\n    if (!isInputTextValid(ev)) {\n      return;\n    }\n    this.setState({\n      orderNumber: ev.target.value\n    })\n  }\n\n  guestNameChangeHandler = ev => {\n    let errorState = {...this.state.errors}\n    if (this.state.errors.guestName) {\n      delete errorState.guestName\n    }\n\n    if (!isInputTextValid(ev)) {\n      return;\n    }\n    this.setState({\n      guestName: ev.target.value,\n      errors: errorState\n    })\n  }\n\n  guestEmailChangeHandler = ev => {\n    let errorState = {...this.state.errors}\n    if (this.state.errors.guestEmail) {\n      delete errorState.guestEmail\n    }\n    this.setState({\n      guestEmail: ev.target.value,\n      errors: errorState\n    })\n  }\n\n  validData = () => {\n    let errors = {}\n    let valid = true\n    // For future ref\n    // if (this.state.guestName.length <= 0) {\n    //   errors['guestName'] = \"This field is mandatory\"\n    //   valid = false\n    // }\n    //\n    // if (this.state.guestEmail.length <= 0) {\n    //   errors['guestEmail'] = \"This field is mandatory\"\n    //   valid = false\n    // } else if (!this.state.guestEmail.match(EMAIL_RE)) {\n    //   errors['guestEmail'] = \"Invalid Email address\"\n    //   valid = false\n    // }\n\n    this.setState({\n      errors: errors\n    })\n    return valid\n  }\n\n  saveClickHandler = () => {\n    if (!this.validData()) {\n      return false\n    }\n\n    let name = this.state.guestName.split(\" \")\n\n    let reqData = {\n      query: TRACK_GIFTS_BUY_NOW,\n      variables: {\n        // For future ref\n        // email: this.state.guestEmail,\n        // firstName: name.length > 0 ? name[0] : \"\",\n        // lastName: name.length > 1 ? name.slice(1, name.length).join(\" \") : \"\",\n        registryId: this.props.stateRegistryInfo.id,\n        registryItemId: this.props.productData.id,\n        buyRegistryItemInput: {\n          isPurchased: true,\n          orderNo: this.state.orderNumber,\n          storeName: this.state.storeName,\n          purchasedQuantity: this.state.quantity\n        }\n      }\n    }\n    this.props.dispatch(setLoader(true))\n    graphQL(reqData).then(res => {\n      this.props.dispatch(setLoader(false))\n\n      if (res && res.data?.data && res.data.data.buyNow) {\n        toast.success(res.data.data.buyNow.message)\n\n        //Fetching all current products\n        getTrackGiftsProduct(true, this.props.stateTrackGiftsFilters, this.props.stateTrackGiftsProducts, this.props.stateTrackGiftsPagination, this.props.stateTrackGiftsView, this.props.stateRegistryInfo, this.props.stateTrackGiftsSearch, this.props.dispatch, this.props.stateTrackGiftsProducts.length)\n        getCategories(this.props.stateRegistryInfo.id, this.props.dispatch)\n        getProducts(this.props.stateRegistryInfo.id, this.props.dispatch)\n        getTodoList(this.props.stateRegistryInfo.id, this.props.dispatch)\n        this.modalCloseHandler()\n      }\n    }).catch(err => {\n      this.props.dispatch(setLoader(false))\n\n      console.error({...err})\n      if (err.response && err.response.data.errors) {\n        for (const error of err.response.data.errors) {\n          console.log(error.message)\n        }\n      } else {\n        toast.error(\"Error occurred while buying the product\");\n      }\n    })\n  }\n\n  buyNowClickHandler = () => {\n    let createNewRecord = false\n    let updateProduct = false\n    let openModal = false\n    let jsonVisitedItems = JSON.parse(localStorage.getItem(LOCAL_STORAGE_TRACK_GIFT_BUY_KEY))\n\n    if (jsonVisitedItems) {\n      for (let item of jsonVisitedItems) {\n\n        // If registry doesn't match then delete old and create new record\n        if (Number(item.rId) === Number(this.props.stateRegistryInfo.id)) {\n          if (Number(item.pId) === Number(this.props.productData.id)) {\n\n            let productTimestamp = new Date(item.timestamp)\n            let currentDate = new Date()\n\n            // Resetting hours because only checking the dates\n            productTimestamp.setHours(0, 0, 0, 0)\n            currentDate.setHours(0, 0, 0, 0)\n\n            // Checking if current date is same as product time stamp\n            // After 1 day, this product entry will be invalid\n            if (currentDate - productTimestamp === 0) {\n              openModal = true\n            } else {\n              updateProduct = true;\n              createNewRecord = true;\n            }\n            break;\n          } else {\n            updateProduct = true;\n            createNewRecord = true;\n          }\n        } else {\n          createNewRecord = true;\n          break;\n        }\n      }\n    } else {\n      createNewRecord = true;\n    }\n\n    if (createNewRecord && !openModal) {\n      const newVisitedItemsData = {\n        rId: this.props.stateRegistryInfo.id,\n        pId: this.props.productData.id,\n        timestamp: new Date()\n      }\n\n      let foundProduct = false\n      let newData = null\n      if (jsonVisitedItems) {\n        newData = jsonVisitedItems.map(item => {\n          if (Number(item.rId) === Number(this.props.stateRegistryInfo.id) && Number(item.pId) === Number(this.props.productData.id)) {\n            foundProduct = true\n            return newVisitedItemsData\n          }\n          return item\n        })\n        if (!foundProduct) {\n          newData.push(newVisitedItemsData)\n        }\n      }\n\n      // Updating localStorage\n      localStorage.setItem(LOCAL_STORAGE_TRACK_GIFT_BUY_KEY, JSON.stringify(updateProduct ? newData : [newVisitedItemsData]))\n\n      //Setting Redirection Store\n      this.props.dispatch(setTrackGiftsRedirectionInfo({store: this.props.productData.item?.store?.storeName}))\n      setTimeout(() => {\n        this.props.dispatch(setTrackGiftsRedirectionInfo({}))\n      }, BUYNOW_REDIRECTION_TIME)\n\n      window.open(this.props.productData.item.storeItemUrl, \"_blank\")\n\n    } else {\n      this.setState({\n        show: true\n      })\n    }\n  }\n\n  render() {\n    return (\n      <>\n        <div className={[\"track-gifts-buy-now\", this.props.className ? this.props.className : \"\"].join(\" \")}>\n          <Button\n            variant=\"primary\"\n            onClick={this.buyNowClickHandler}\n            className=\"px-3 py-1 font-medium text-body track-gifts-buy-now-button\"\n          >Buy Now</Button>\n        </div>\n        {this.state.show ?\n          <Modal\n            show={this.state.show}\n            noBodyPadding={true}\n            title=\"Buy Now\"\n            footer={\n              <Button\n                variant=\"primary\"\n                onClick={this.saveClickHandler}\n                className=\"text-body font-medium py-1 px-3 track-gifts-buy-now-modal-button\"\n              >Save & Close</Button>\n            }\n            closeModal={this.modalCloseHandler}>\n            <div className=\"track-gifts-buy-now-modal\">\n              <div className=\"row\">\n\n                <div className=\"col-12 col-md-5 track-gifts-buy-now-product-detail\">\n                  <div className=\"mr-3\">\n                    <ProductDetailsModel data={this.props.productData} notFromGuestView={true}/>\n                  </div>\n                </div>\n\n                <div className=\"col-12 col-md-7\">\n                  <div className=\"ml-3 mr-5 pt-4\">\n\n                    <div className=\"row\">\n                      <div className=\"col\">\n                        <p className=\"text-body font-medium\">Record the purchase of this gift.</p>\n                        <p className=\"text-sm\">Keep track of your gifts by entering the store you purchased it from and\n                          the order number.</p>\n                      </div>\n                    </div>\n\n                    {/* For future ref */}\n                    {/*<div className=\"row mt-4\">*/}\n                    {/*  <div className=\"col\">*/}\n                    {/*    <div className=\"track-gifts-buy-now-modal-input-container\">*/}\n                    {/*      <label className=\"track-gifts-buy-now-label text-sm track-gifts-buy-now-required\">Name</label>*/}\n                    {/*      <input*/}\n                    {/*        type=\"text\"*/}\n                    {/*        name=\"name\"*/}\n                    {/*        value={this.state.guestName}*/}\n                    {/*        onChange={(ev) => this.guestNameChangeHandler(ev)}*/}\n                    {/*        className={[\"px-2 py-1 text-body track-gifts-buy-now-input w-100 mw-100 mb-0\", this.state.errors.guestName ? 'track-gifts-buy-now-input-error' : ''].join(\" \")}*/}\n                    {/*        placeholder=\"John Doe\"/>*/}\n                    {/*      {this.state.errors.guestName ?*/}\n                    {/*        <label*/}\n                    {/*          className=\"text-sm track-gifts-buy-now-input-error-text\">{this.state.errors.guestName}</label>*/}\n                    {/*        : null}*/}\n                    {/*    </div>*/}\n                    {/*  </div>*/}\n                    {/*</div>*/}\n\n                    {/*<div className=\"row mt-4\">*/}\n                    {/*  <div className=\"col\">*/}\n                    {/*    <div className=\"track-gifts-buy-now-modal-input-container\">*/}\n                    {/*      <label className=\"track-gifts-buy-now-label text-sm track-gifts-buy-now-required\">Email*/}\n                    {/*        Address</label>*/}\n                    {/*      <input*/}\n                    {/*        type=\"text\"*/}\n                    {/*        name=\"user-email\"*/}\n                    {/*        value={this.state.guestEmail}*/}\n                    {/*        onChange={(ev) => this.guestEmailChangeHandler(ev)}*/}\n                    {/*        className={[\"px-2 py-1 text-body track-gifts-buy-now-input w-100 mw-100 mb-0\", this.state.errors.guestEmail ? 'track-gifts-buy-now-input-error' : ''].join(\" \")}*/}\n                    {/*        placeholder=\"johndoe@email.com\"/>*/}\n                    {/*      {this.state.errors.guestEmail ?*/}\n                    {/*        <label*/}\n                    {/*          className=\"text-sm track-gifts-buy-now-input-error-text\">{this.state.errors.guestEmail}</label>*/}\n                    {/*        : null}*/}\n                    {/*    </div>*/}\n                    {/*  </div>*/}\n                    {/*</div>*/}\n\n                    <div className=\"row mt-4\">\n                      <div className=\"col\">\n                        <div className=\"track-gifts-buy-now-modal-input-container\">\n                          <label className=\"track-gifts-buy-now-label text-sm\">Quantity</label>\n                          <Counter\n                            className=\"mt-1\"\n                            counter={this.state.quantity}\n                            incrementHandler={this.incrementQuantity}\n                            decrementHandler={this.decrementQuantity}/>\n                        </div>\n                      </div>\n                    </div>\n\n                    <div className=\"row mt-4 pb-4\">\n                      <div className=\"col-6\">\n                        <div className=\"track-gifts-buy-now-modal-input-container\">\n                          <label className=\"track-gifts-buy-now-label text-sm\">Store Name</label>\n                          <input\n                            type=\"text\"\n                            name=\"storeName\"\n                            value={this.state.storeName}\n                            onChange={(ev) => this.storeNameChangeHandler(ev)}\n                            className=\"px-2 py-1 text-body track-gifts-buy-now-input w-100 mw-100 mb-0\"\n                            placeholder=\"Eg. Target\"/>\n                        </div>\n                      </div>\n                      <div className=\"col-6\">\n                        <div className=\"track-gifts-buy-now-modal-input-container\">\n                          <label className=\"track-gifts-buy-now-label text-sm\">Order Number</label>\n                          <input\n                            type=\"text\"\n                            name=\"orderNumber\"\n                            value={this.state.orderNumber}\n                            onChange={(ev) => this.orderNumberChangeHandler(ev)}\n                            className=\"px-2 py-1 text-body track-gifts-buy-now-input w-100 mw-100 mb-0\"\n                            placeholder=\"0012345\"/>\n                        </div>\n                      </div>\n                    </div>\n\n                  </div>\n                </div>\n\n              </div>\n            </div>\n          </Modal>\n          : null}\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  stateTrackGiftsFilters: state.trackGifts.filters,\n  stateTrackGiftsView: state.trackGifts.activeView,\n  stateTrackGiftsProducts: state.trackGifts.products,\n  stateTrackGiftsPagination: state.trackGifts.paginationInfo,\n  stateRegistryInfo: state.registry.info,\n  stateTrackGiftsSearch: state.trackGifts.search\n})\n\nexport default connect(\n  mapStateToProps\n)(BuyNow);","import React from \"react\";\nimport \"./MarkAsPurchased.scss\";\nimport {connect} from 'react-redux';\nimport Modal from \"../modal-component/ModalComponent\";\nimport ProductDetailsModel from \"../product-details-model/ProductDetailsModel\";\nimport Counter from \"../counter/Counter\";\nimport Button from \"../button-component/ButtonComponent\";\nimport {MARK_AS_PURCHASED} from \"../../../../api/mutations\";\nimport {graphQL} from \"../../../../api/axios\";\nimport {toast} from \"react-toastify\";\nimport {getTrackGiftsProduct, getCategories, getProducts, isInputTextValid} from \"../../../../utils/commonFunction\";\nimport {EMAIL_RE} from \"utils/constants\";\n\nclass MarkAsPurchased extends React.Component {\n\n  PRICE_REGEX = /(^[0-9]+(.?[0-9]{1,2})?$)/g\n  PRICE_REGEX_WHILE_ENTERING = /^[0-9]+.{0,1}[0-9]{0,2}?$/g\n\n  state = {\n    quantity: 1,\n    name: \"\",\n    email: \"\",\n    storeName: \"\",\n    orderNumber: \"\",\n    note: \"\",\n    errors: {},\n    contributionAmount: 0.00\n  }\n\n  backendErrors = {\n    contribution_amount: \"contributionAmount\",\n    name: \"name\",\n    email: \"email\"\n  }\n\n  closeModalHandler = () => {\n    this.setState({\n      quantity: 1,\n      name: \"\",\n      email: \"\",\n      storeName: \"\",\n      orderNumber: \"\",\n      note: \"\",\n      errors: {},\n      contributionAmount: 0.00\n    })\n    this.props.closeModal()\n  }\n\n  incrementQuantity = () => {\n    this.setState((prevState, _) => ({\n      quantity: prevState.quantity + 1 > this.props.data.quantityStatus.still_needed ? prevState.quantity : prevState.quantity + 1\n    }))\n  }\n\n  decrementQuantity = () => {\n    this.setState((prevState, _) => ({\n      quantity: prevState.quantity - 1 > 0 ? prevState.quantity - 1 : 1\n    }))\n  }\n\n  validData = () => {\n    let errors = {}\n    let valid = true\n    if (this.state.name.length <= 0) {\n      errors['name'] = \"This field is mandatory\"\n      valid = false\n    }\n\n    if (this.state.email.length <= 0) {\n      errors['email'] = \"This field is mandatory\"\n      valid = false\n    } else if (!this.state.email.match(EMAIL_RE)) {\n      errors['email'] = \"Invalid Email address\"\n      valid = false\n    }\n\n    if (this.props.data.isGroupGift) {\n      if (this.state.contributionAmount.length <= 0) {\n        errors['contributionAmount'] = \"This field is mandatory\"\n        valid = false\n      } else if (!String(this.state.contributionAmount).match(this.PRICE_REGEX) && Number(this.state.contributionAmount) <= 0) {\n        errors['contributionAmount'] = \"Please enter valid amount\"\n        valid = false\n      }\n    }\n\n    this.setState({\n      errors: errors\n    })\n    return valid\n  }\n\n  // Event Handlers\n  nameChangeHandler = (ev) => {\n    let errors = {...this.state.errors}\n    if (errors.name) {\n      delete errors.name\n    }\n\n    if (!isInputTextValid(ev)) {\n      return;\n    }\n    this.setState({\n      name: ev.target.value,\n      errors: errors\n    })\n  }\n\n  emailChangeHandler = (ev) => {\n    let errors = {...this.state.errors}\n    if (errors.email) {\n      delete errors.email\n    }\n\n    this.setState({\n      email: ev.target.value,\n      errors: errors\n    })\n  }\n\n  storeNameChangeHandler = (ev) => {\n    if (!isInputTextValid(ev)) {\n      return;\n    }\n    this.setState({\n      storeName: ev.target.value\n    })\n  }\n\n  orderNumberChangeHandler = (ev) => {\n    if (!isInputTextValid(ev)) {\n      return;\n    }\n    this.setState({\n      orderNumber: ev.target.value\n    })\n  }\n\n  noteChangeHandler = (ev) => {\n    if (!isInputTextValid(ev)) {\n      return;\n    }\n    this.setState({\n      note: ev.target.value\n    })\n  }\n\n  contributionAmountChangeHandler = (ev) => {\n    ev.persist();\n    let errors = {...this.state.errors}\n    if (errors.contributionAmount) {\n      delete errors.contributionAmount\n    }\n\n    if ((ev.target.value.length > 0 && (Number(ev.target.value[ev.target.value.length - 1]) >= 0 || ev.target.value[ev.target.value.length - 1] === \".\")) && ev.target.value.match(this.PRICE_REGEX_WHILE_ENTERING) || ev.target.value.length <= 0) {\n      this.setState({\n        contributionAmount: ev.target.value,\n        errors: errors\n      })\n    }\n  }\n\n  saveClickHandler = () => {\n    if (!this.validData()) {\n      return false\n    }\n\n    let reqData = {\n      query: MARK_AS_PURCHASED,\n      variables: {\n        registryId: Number(this.props.stateRegistryInfo.id),\n        registryItemId: Number(this.props.data.id),\n        purchasedRegistryItemInput: {\n          isPurchased: true,\n          storeName: this.state.storeName,\n          orderNo: this.state.orderNumber,\n          giftMessage: this.state.note\n        },\n        guestUserInput: {\n          name: this.state.name,\n          email: this.state.email\n        }\n      }\n    }\n\n    if (this.props.data.isGroupGift) {\n      reqData.variables.purchasedRegistryItemInput['contributionAmount'] = Number(this.state.contributionAmount)\n    } else {\n      reqData.variables.purchasedRegistryItemInput['purchasedQuantity'] = Number(this.state.quantity)\n    }\n\n    graphQL(reqData).then(res => {\n      if (res.data.data && res.data.data.markAsPurchased) {\n        toast.success(<p><b>{this.props.data.title}</b> updated successfully.</p>)\n\n        //Fetching all current products\n        getTrackGiftsProduct(true, this.props.stateTrackGiftsFilters, this.props.stateTrackGiftsProducts, this.props.stateTrackGiftsPagination, this.props.stateTrackGiftsView, this.props.stateRegistryInfo, this.props.stateTrackGiftsSearch, this.props.dispatch, this.props.stateTrackGiftsProducts.length)\n        getCategories(this.props.stateRegistryInfo.id, this.props.dispatch)\n        getProducts(this.props.stateRegistryInfo.id, this.props.dispatch)\n        this.closeModalHandler()\n      }\n    }).catch(err => {\n      if (err.response && err.response.data && err.response.data.errors) {\n        for (let error of err.response.data.errors) {\n          if (error.errors && Object.keys(error.errors).length > 0) {\n            for (let fieldError of Object.keys(error.errors)) {\n              if (Object.keys(this.backendErrors).indexOf(fieldError) !== -1) {\n                let errorState = {...this.state.errors}\n                if (error.errors[fieldError].length > 0) {\n                  errorState[this.backendErrors[fieldError]] = error.errors[fieldError][0]\n                } else {\n                  toast.error(\"Some error occurred while updating product.\")\n                }\n                this.setState({\n                  errors: errorState\n                })\n              }\n            }\n          } else {\n            toast(error.message, \"error\")\n          }\n        }\n      } else {\n        toast.error(\"Some error occurred while updating product.\")\n      }\n    })\n  }\n\n  render() {\n    return (\n      <>\n        <Modal\n          noBodyPadding={true}\n          show={this.props.show}\n          title={this.props.data.isGroupGift ? \"Record a contribution\" : \"Record a purchase\"}\n          footer={(\n            <Button\n              variant=\"primary\"\n              disabled={this.state.name.length <= 0 || this.state.email.length <= 0 || (this.props.data.isGroupGift && (this.state.contributionAmount.length <= 0 || Number(this.state.contributionAmount) <= 0))}\n              onClick={this.saveClickHandler}\n              className=\"font-medium text-body px-3 py-1\">Save & Close</Button>\n          )}\n          closeModal={this.closeModalHandler}>\n\n          <div className=\"row add-gift-another-store mark-as-purchased-modal\">\n            <div className=\"col-12 col-md-5 pt-4 add-gift-image-select\">\n              <div className=\"mr-3\">\n                <ProductDetailsModel data={this.props.data}/>\n              </div>\n            </div>\n            <div className=\"col-12 col-md-7 pt-4\">\n              <div className=\"mx-3\">\n\n                <div className=\"row\">\n                  <div className=\"col\">\n                    <p className=\"text-body font-medium\">Already got it?</p>\n                    <p className=\"text-sm\">Let guests know, so you dont get another.</p>\n                  </div>\n                </div>\n\n                <div className=\"row\">\n                  <div className=\"col mt-4 m-a-input-container\">\n                    <p className=\"text-sm font-medium add-gift-store-label ma-input-required\">Name</p>\n                    <input\n                      className={[\"w-100 mt-1 px-2 py-1 mb-0\", this.state.errors.name ? \"mark-as-purchased-error\" : \"\"].join(\" \")}\n                      type='text'\n                      placeholder='John Doe'\n                      value={this.state.name}\n                      onChange={(ev) => this.nameChangeHandler(ev)}\n                    />\n                    {this.state.errors.name ?\n                      <label className=\"text-sm mark-as-purchased-error-text\">{this.state.errors.name}</label>\n                      : null}\n                  </div>\n                </div>\n\n                <div className=\"row\">\n                  <div className=\"col mt-4 m-a-input-container\">\n                    <p className=\"text-sm font-medium add-gift-store-label ma-input-required\">Email Address</p>\n                    <input\n                      className={[\"w-100 mt-1 px-2 py-1 mb-0\", this.state.errors.email ? \"mark-as-purchased-error\" : \"\"].join(\" \")}\n                      type='text'\n                      placeholder='johndoe@email.com'\n                      value={this.state.email}\n                      onChange={(ev) => this.emailChangeHandler(ev)}\n                    />\n                    {this.state.errors.email ?\n                      <label className=\"text-sm mark-as-purchased-error-text\">{this.state.errors.email}</label>\n                      : null}\n                  </div>\n                </div>\n\n                {this.props.data.isGroupGift ?\n                  <div className=\"row\">\n                    <div className=\"col mt-4 m-a-input-container\">\n                      <p className=\"text-sm font-medium add-gift-store-label ma-input-required\">Amount</p>\n                      <div className=\"price-input mt-1\">\n                        <input\n                          type=\"text\"\n                          className={[\"w-100 pr-2 py-1 text-body pl-5 mb-0\", this.state.errors.contributionAmount ? \"mark-as-purchased-error\" : \"\"].join(\" \")}\n                          value={this.state.contributionAmount}\n                          onChange={(ev) => this.contributionAmountChangeHandler(ev)}\n                        />\n                      </div>\n                      {this.state.errors.contributionAmount ?\n                        <label\n                          className=\"text-sm mark-as-purchased-error-text\">{this.state.errors.contributionAmount}</label>\n                        : null}\n                    </div>\n                  </div>\n                  :\n                  <>\n                    <div className=\"row\">\n                      <div className=\"col mt-4 m-a-input-container\">\n                        <p className=\"text-sm font-medium add-gift-store-label\">Quantity</p>\n                        <Counter\n                          className=\"mt-2\"\n                          counter={this.state.quantity}\n                          incrementHandler={this.incrementQuantity}\n                          decrementHandler={this.decrementQuantity}\n                        />\n                      </div>\n                    </div>\n\n                    <div className=\"row\">\n                      <div className=\"col-6 mt-4 m-a-input-container\">\n                        <p className=\"text-sm font-medium add-gift-store-label\">Store Name</p>\n                        <input\n                          className=\"w-100 mt-1 px-2 py-1 mb-0\"\n                          type='text'\n                          placeholder='Eg. Target'\n                          value={this.state.storeName}\n                          onChange={(ev) => this.storeNameChangeHandler(ev)}\n                        />\n                      </div>\n                      <div className=\"col-6 mt-4 m-a-input-container\">\n                        <p className=\"text-sm font-medium add-gift-store-label\">Order Number</p>\n                        <input\n                          className=\"w-100 mt-1 px-2 py-1 mb-0\"\n                          type='text'\n                          placeholder='0012345'\n                          value={this.state.orderNumber}\n                          onChange={(ev) => this.orderNumberChangeHandler(ev)}\n                        />\n                      </div>\n                    </div>\n                  </>\n                }\n\n\n                <div className=\"row\">\n                  <div className=\"col mt-4 m-a-input-container\">\n                    <p className=\"text-sm font-medium add-gift-store-label\">Gift Message</p>\n                    <textarea className=\"w-100 mt-1 text-body p-1 mb-2 mark-as-purchased-resize-textarea\"\n                              rows=\"2\"\n                              placeholder=\"Write a message for gift receiver\"\n                              value={this.state.note}\n                              onChange={(ev) => this.noteChangeHandler(ev)}\n                    />\n                  </div>\n                </div>\n\n              </div>\n            </div>\n          </div>\n\n        </Modal>\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  stateTrackGiftsFilters: state.trackGifts.filters,\n  stateTrackGiftsView: state.trackGifts.activeView,\n  stateTrackGiftsProducts: state.trackGifts.products,\n  stateTrackGiftsPagination: state.trackGifts.paginationInfo,\n  stateRegistryInfo: state.registry.info,\n  stateTrackGiftsSearch: state.trackGifts.search\n})\n\nexport default connect(\n  mapStateToProps\n)(MarkAsPurchased);","import React from \"react\";\nimport \"./MarkPurchased.scss\";\nimport MarkAsPurchased from \"../../../commons/components/mark-as-purchased/MarkAsPurchased\";\n\nclass MarkPurchased extends React.Component{\n  state = {\n    show: false\n  }\n\n  modalCloseHandler = () => {\n    this.setState({\n      show: false\n    })\n  }\n\n  openPurchasedModal = (ev) => {\n    ev.preventDefault();\n    this.setState({\n      show: true\n    })\n  }\n\n  render() {\n    return (\n      <div>\n        <a\n          href=\"#\"\n          className=\"mark-purchased-link font-medium text-sm\"\n          onClick={(ev) => this.openPurchasedModal(ev)}>{`Record a ${this.props.data.isGroupGift ? 'contribution' : 'purchase'}`}</a>\n        <MarkAsPurchased\n          show={this.state.show}\n          closeModal={this.modalCloseHandler}\n          data={this.props.data}\n        />\n      </div>\n    );\n  }\n}\n\nexport default MarkPurchased;","import React from \"react\";\nimport \"./GiftCard.scss\";\nimport GiftCardPill from \"../gift-card-pill/GiftCardPill\";\nimport {CURRENCY} from \"../../../../utils/constants\";\nimport BuyNow from \"../buy-now/BuyNow\";\nimport MarkPurchased from \"../mark-purchased/MarkPurchased\";\nimport moment from 'moment';\nimport Modal from \"../../../commons/components/modal-component/ModalComponent\";\nimport {\n  formatPrice,\n  checkIsCashFund,\n  productImageLoadErrorHandler,\n  productImageLoadHandler\n} from \"../../../../utils/commonFunction\";\nimport GiftStatusPill from \"../../../commons/components/gift-status-pill/GiftStatusPill\";\n\nclass GiftCard extends React.Component {\n  friendsDetailRef = React.createRef()\n\n  state = {\n    toggleGiftModalHandler: false,\n    toggleFriendsDetialsModalHandler: false\n  }\n\n  toggleFriendsDetail = e => {\n    e.preventDefault()\n    if (this.friendsDetailRef.current) {\n      this.friendsDetailRef.current.style.display = \"block\"\n    }\n  }\n\n  closeFriendsDetail = e => {\n    e.preventDefault()\n    if (this.friendsDetailRef.current) {\n      this.friendsDetailRef.current.style.display = \"none\"\n    }\n  }\n\n  giftModalCloseHandler = () => {\n    this.setState({toggleGiftModalHandler: false})\n  }\n\n  giftModalOpenHandler = () => {\n    this.setState({toggleGiftModalHandler: true})\n  }\n\n  friendsDetailsOpenModalHandler = () => {\n    this.setState({toggleFriendsDetialsModalHandler: true})\n  }\n\n  friendsDetailsCloseModalHandler = () => {\n    this.setState({toggleFriendsDetialsModalHandler: false})\n  }\n\n  filterOrderNumber = (orderNo) => {\n    if (orderNo[0] === '#') {\n      orderNo = orderNo.toString().slice(1, orderNo.length)\n    }\n    return orderNo;\n  }\n\n  render() {\n    let isCashFund = checkIsCashFund(this.props.data.registryCategories)\n\n    let showMarkPurchased = false\n\n    if (this.props.data.isGroupGift) {\n      if (isCashFund) {\n        showMarkPurchased = !this.props.data.isPurchased\n      } else {\n        showMarkPurchased = this.props.data.quantity > this.props.data.quantityStatus.purchased_quantity\n      }\n    } else if (this.props.data.purchasedRegistryItem.length <= 0 && !this.props.data.isCashAcceptedOnly) {\n      showMarkPurchased = !this.props.data.isPurchased\n    } else if (this.props.data.isCashAcceptedOnly) {\n      showMarkPurchased = (this.props.data.quantityStatus.purchased_quantity < this.props.data.quantity) && (!this.props.data.isPurchased || !this.props.data.isAmountReceived)\n    }\n\n    return (\n      <div className=\"baby-registry-track-gifts-card pt-3 pb-2 pb-md-4\">\n        <div className=\"row\">\n\n          <div className=\"col-5 col-sm-3 col-md-1\">\n            {this.props.data.imageUrl ?\n              <img src={this.props.data.imageUrl}\n                   className=\"track-gifts-card-image\"\n                   loading=\"lazy\"\n                   onError={(ev) => productImageLoadErrorHandler(ev)}\n                   onLoad={(ev) => productImageLoadHandler(ev)}\n              />\n              :\n              <div className=\"track-gifts-no-product-image\"/>\n            }\n          </div>\n\n          <div className=\"col-12 col-md-5 my-3 my-md-0\">\n            <div className=\"track-gifts-product-description pl-1\">\n              <div className=\"d-flex\">\n                <h4\n                  className={[\"font-medium track-gifts-product-title\", !this.props.data.isGroupGift && !this.props.data.isCashAcceptedOnly && this.props.data.purchasedRegistryItem.length > 0 && this.props.data.purchasedRegistryItem[0].giftMessage && this.props.data.purchasedRegistryItem[0].guestUser ? \"mr-5\" : \"mr-9\"].join(\" \")}>\n                  {this.props.data.title}\n                </h4>\n                {!this.props.data.isGroupGift && !this.props.data.isCashAcceptedOnly && this.props.data.purchasedRegistryItem.length > 0 && this.props.data.purchasedRegistryItem[0].giftMessage && this.props.data.purchasedRegistryItem[0].guestUser ?\n                  <button\n                    className=\"ml-auto track-gifts-gift-message-container d-none d-md-inline-block text-left px-3\">\n                    <div className=\"track-gifts-gift-message-content p-5\">\n                      <h3>Gift Message</h3>\n                      <p\n                        className=\"text-body mt-5 track-gifts-gift-message\">{this.props.data.purchasedRegistryItem[0].giftMessage}</p>\n                      <p\n                        className=\"mt-3 text-sm font-medium\">{`${this.props.data.purchasedRegistryItem[0].guestUser.firstName} ${this.props.data.purchasedRegistryItem[0].guestUser.lastName ? `${this.props.data.purchasedRegistryItem[0].guestUser.lastName[0]}.` : ''}`}</p>\n                    </div>\n                  </button>\n                  : null}\n\n              </div>\n              {!this.props.data.isCashAcceptedOnly && this.props.data.purchasedRegistryItem.length > 0 && (this.props.data.purchasedRegistryItem[0].storeName || this.props.data.purchasedRegistryItem[0].orderNo) ?\n                <p\n                  className=\"text-body\">{this.props.data.purchasedRegistryItem[0].storeName ? this.props.data.purchasedRegistryItem[0].storeName : ''} {this.props.data.purchasedRegistryItem[0].orderNo ? '| #' + this.filterOrderNumber(this.props.data.purchasedRegistryItem[0].orderNo) : ''}</p>\n                : null}\n\n              {this.props.data.isGroupGift ?\n                <div className=\"d-block mt-2\">\n                  {this.props.data.purchasedRegistryItem.length > 0 ?\n                    this.props.data.quantity <= this.props.data.quantityStatus.purchased_quantity || (Number(this.props.data.registryCategories[0].category.categoryType.id) === 2 && this.props.data.isPurchased)\n                      ?\n                      this.props.data.quantityStatus.total_contribution_amount - (this.props.data.item.price * this.props.data.alreadyBoughtProductsQuantity) - (this.props.data.item.price * (this.props.data.purchasedQuantity - this.props.data.alreadyBoughtProductsQuantity)) > 0 ?\n                        <GiftStatusPill variant=\"purchased\"\n                                        text={`${formatPrice(this.props.data.quantityStatus.total_contribution_amount - (this.props.data.item.price * this.props.data.alreadyBoughtProductsQuantity) - (this.props.data.item.price * (this.props.data.purchasedQuantity - this.props.data.alreadyBoughtProductsQuantity)), CURRENCY)} ${this.props.data.purchasedQuantity - this.props.data.alreadyBoughtProductsQuantity > 0 ? 'Remaining' : 'Received'}`}\n                                        className=\"d-inline-block mr-2\"/>\n                        : null\n                      :\n                      this.props.data.purchasedRegistryItem[0].groupGift ? \n                        <div className=\"d-inline-block mr-2\">\n                        <span\n                          className=\"text-sm font-medium\">{formatPrice(this.props.data.purchasedRegistryItem[0].groupGift?.amountReceived)}</span>\n                          <span\n                            className=\"text-sm\">{` of ${formatPrice((this.props.data.quantity - this.props.data.alreadyBoughtProductsQuantity) * this.props.data.item.price)} received`}</span>\n                          <div className=\"track-gifts-cash-fund-progress-bar w-100 mr-2\">\n                            <div className=\"track-gifts-cash-fund-progress mw-100\"\n                                style={{width: `${(this.props.data.purchasedRegistryItem[0].groupGift.amountReceived / ((this.props.data.quantity - this.props.data.alreadyBoughtProductsQuantity) * this.props.data.item.price)) * 100}%`}}/>\n                          </div>\n                        </div> \n                      : null\n                    :\n                    <GiftCardPill variant=\"available\"\n                                  text={`${formatPrice(this.props.data.quantity * this.props.data.item.price)} Requested`}/>\n                  }\n                  {this.props.data.purchasedQuantity > 0 && Number(this.props.data.registryCategories[0].category.categoryType.id) !== 2 ?\n                    <GiftStatusPill variant=\"purchased\"\n                                    text={`${this.props.data.purchasedQuantity} Purchased`}\n                                    className=\"d-inline-block mr-2\"/>\n                    : null}\n\n                </div>\n                :\n                <div className=\"mt-1 mt-md-2\">\n                  {this.props.data.isCashAcceptedOnly && this.props.data.purchasedRegistryItem.length > 0 ?\n                    <>\n                      {this.props.data.item.price * this.props.data.quantityStatus.buyable_quantity > 0 ?\n                        <GiftCardPill variant=\"received\" className=\"mr-1\"\n                                      text={`${formatPrice(this.props.data.item.price * this.props.data.quantityStatus.buyable_quantity)} ${this.props.data.purchasedQuantity - this.props.data.alreadyBoughtProductsQuantity > 0 ? 'Remaining' : 'Received'}`}/>\n                        : null}\n                      {this.props.data.purchasedQuantity > 0 ?\n                        <GiftCardPill variant=\"purchased\" className=\"mr-1\"\n                                      amount={this.props.data.purchasedQuantity}/>\n                        : null}\n                       {this.props.data.quantityStatus.still_needed > 0 ?\n                        <GiftCardPill variant=\"available\" className=\"mr-1\"\n                                      text={`${this.props.data.quantityStatus.still_needed} Requested`}/> : null}\n                    </>\n                    :\n                    <>\n                      {this.props.data.purchasedRegistryItem.length > 0 && this.props.data.purchasedRegistryItem[0].isPurchased && !this.props.data.purchasedRegistryItem[0].isAmountReceived ?\n                        <GiftCardPill variant=\"purchased\" className=\"mr-1\"\n                                      amount={this.props.data.purchasedRegistryItem[0].purchasedQuantity > 1 ? this.props.data.purchasedRegistryItem[0].purchasedQuantity : null}/> : null}\n                      {this.props.data.purchasedRegistryItem.length > 0 && this.props.data.purchasedRegistryItem[0].isReserved ?\n                        <GiftCardPill variant=\"reserved\" className=\"mr-1\"/> : null}\n                      {this.props.data.purchasedRegistryItem.length <= 0 ?\n                        <GiftCardPill variant=\"available\" className=\"mr-1\"\n                                      text={`${this.props.data.quantityStatus ? this.props.data.quantity - Math.abs(this.props.data.quantityStatus.purchased_quantity + this.props.data.quantityStatus.reserved_quantity) : this.props.data.quantity} Requested`}/> : null}\n                    </>\n                  }\n\n                  {!this.props.data.isCashAcceptedOnly && this.props.data.purchasedRegistryItem.length > 0 && this.props.data.purchasedRegistryItem[0].createdTs ?\n                    <span\n                      className=\"text-sm track-gifts-purchased-time\">{moment(this.props.data.purchasedRegistryItem[0].createdTs).format('MMM DD, YYYY')}</span>\n                    : null}\n                </div>\n              }\n\n\n            </div>\n          </div>\n\n          <div className=\"col-12 col-md-6 d-flex flex-md-row flex-column\">\n            {this.props.data.isGroupGift || this.props.data.isCashAcceptedOnly ?\n              // Group Gift\n\n              (this.props.data.purchasedRegistryItem.length > 0 ?\n                <div className=\"track-gifts-group-users-details \">\n                  <p\n                    className=\"text-sm font-medium\">{`${this.props.data.purchasedRegistryItem[0].otherUsers.length} friend${this.props.data.purchasedRegistryItem[0].otherUsers.length > 1 ? 's' : ''}`}</p>\n                  <a href=\"#\"\n                     tabIndex={2}\n                     className=\"track-gifts-view-friends-link  text-sm d-none d-md-inline-block font-medium\"\n                     onClick={(e) => this.toggleFriendsDetail(e)}\n                     onBlur={(e) => this.closeFriendsDetail(e)}>View\n                  </a>\n\n                  <a href=\"#\" className=\"track-gifts-view-friends-link text-sm d-inline-block d-md-none font-medium\"\n                     onClick={this.friendsDetailsOpenModalHandler}>View</a>\n                  <div ref={this.friendsDetailRef} className=\"track-gifts-friends-detail pt-3 pb-1\">\n                    <div className=\"friends-detail-header d-flex pb-2 px-3\">\n                      <p\n                        className=\"text-sm font-medium\">{`${this.props.data.purchasedRegistryItem[0].otherUsers.length} friend${this.props.data.purchasedRegistryItem[0].otherUsers.length > 1 ? 's' : ''}`}</p>\n                      <i className=\"icon-close close-friends-detail-icon ml-auto\"\n                         onClick={(e) => this.closeFriendsDetail(e)}/>\n                    </div>\n                    <div className=\"px-3\">\n                      <table className=\"m-a-revert-all friends-detail-container\">\n                        {this.props.data.purchasedRegistryItem[0].otherUsers.map(user => (\n\n                          <tr className=\"friend-detail m-a-revert-all\">\n                            <td className=\"m-a-revert-all p-0\">\n                              <div className=\"py-2 mr-8\">\n                                <p\n                                  className=\"text-sm font-medium\">{`${user.guestUser.firstName ? user.guestUser.firstName : ''} ${user.guestUser.lastName ? user.guestUser.lastName : ''}`}</p>\n                                <p className=\"text-sm friend-user-email\">{user.guestUser.email}</p>\n                              </div>\n                            </td>\n                            <td className=\"text-right m-a-revert-all p-0\">\n                              <p\n                                className=\"text-sm font-medium friend-contribution-amount mr-1\">{formatPrice(user.contributionAmount)}</p>\n                            </td>\n                            <td className=\"m-a-revert-all p-0\">\n                              {user.createdTs ?\n                                <p\n                                  className=\"text-sm track-gifts-purchased-time\">{moment(user.createdTs).format('MMM DD, YYYY')}</p>\n                                : null}\n                            </td>\n                          </tr>\n                        ))}\n                      </table>\n                    </div>\n                  </div>\n                </div>\n                : null)\n              :\n              // Single guest User\n              (this.props.data.purchasedRegistryItem.length > 0 && !this.props.data.purchasedRegistryItem[0].isReserved ?\n                <div className=\"track-gifts-user-detail d-flex ml-1 ml-md-0\">\n                  <div className=\"w-100\">\n                    <p\n                      className=\"text-sm font-medium track-gift-user-info-name\">{`${this.props.data.purchasedRegistryItem[0].guestUser.firstName ? this.props.data.purchasedRegistryItem[0].guestUser.firstName : ''} ${this.props.data.purchasedRegistryItem[0].guestUser.lastName ? this.props.data.purchasedRegistryItem[0].guestUser.lastName : ''}`}</p>\n                    <p\n                      className=\"text-sm track-gifts-user-email track-gift-user-info-name\">{this.props.data.purchasedRegistryItem[0].guestUser.email}</p>\n                  </div>\n                  {!this.props.data.isGroupGift && this.props.data.purchasedRegistryItem.length > 0 && this.props.data.purchasedRegistryItem[0].giftMessage && this.props.data.purchasedRegistryItem[0].guestUser ?\n                    <button className=\"ml-auto track-gifts-gift-message-container text-left d-inline-block d-md-none\"\n                            onClick={this.giftModalOpenHandler}>\n                    </button>\n                    : null}\n                </div>\n                : null)\n\n            }\n            <div className=\"ml-auto d-flex align-items-baseline\">\n              {\n                (showMarkPurchased) ?\n                  <MarkPurchased data={this.props.data} className=\"mt-3 mt-md-0\"/>\n                  : null\n              }\n\n              {!this.props.data.isPurchased && ((this.props.data.isCashAcceptedOnly && this.props.data.purchasedRegistryItem.length > 0) || (this.props.data.isGroupGift)) && this.props.data.quantityStatus.buyable_quantity > 0 ?\n                <BuyNow productData={this.props.data} className=\"ml-4 mt-3 mt-md-0\"/> : null}\n\n            </div>\n          </div>\n        </div>\n        {!this.props.data.isGroupGift && !this.props.data.isCashAcceptedOnly && this.props.data.purchasedRegistryItem.length > 0 && this.props.data.purchasedRegistryItem[0].giftMessage && this.props.data.purchasedRegistryItem[0].guestUser ?\n          <Modal\n            show={this.state.toggleGiftModalHandler}\n            title=\"Gift Message\"\n            closeModal={this.giftModalCloseHandler}>\n            <p\n              className=\"text-body track-gifts-gift-message\">{this.props.data.purchasedRegistryItem[0].giftMessage}</p>\n            <p\n              className=\"mt-3 text-sm font-medium\">{`${this.props.data.purchasedRegistryItem[0].guestUser.firstName} ${this.props.data.purchasedRegistryItem[0].guestUser.lastName ? `${this.props.data.purchasedRegistryItem[0].guestUser.lastName[0]}.` : ''}`}</p>\n\n          </Modal> : null}\n        {(this.props.data.isGroupGift || this.props.data.isCashAcceptedOnly) && this.props.data.purchasedRegistryItem.length > 0 ?\n          <Modal\n            show={this.state.toggleFriendsDetialsModalHandler}\n            title={`${this.props.data.purchasedRegistryItem[0].otherUsers.length} Friends`}\n            closeModal={this.friendsDetailsCloseModalHandler}>\n            {this.props.data.purchasedRegistryItem[0].otherUsers.map(user => (\n              <div className=\"friend-detail-modal-container mb-3 pb-3\">\n                <div className=\"p-0\">\n                  <div className=\"py-2 mr-8\">\n                    <p\n                      className=\"text-sm font-medium\">{`${user.guestUser.firstName ? user.guestUser.firstName : ''} ${user.guestUser.lastName ? user.guestUser.lastName : ''}`}</p>\n                    <p className=\"text-sm friend-user-email\">{user.guestUser.email}</p>\n                  </div>\n                </div>\n                <div className=\"d-flex\">\n                  <div className=\"text-right p-0\">\n                    <p\n                      className=\"text-sm font-medium friend-contribution-amount mr-1\">{`${CURRENCY}${user.contributionAmount}`}</p>\n                  </div>\n                  <div className=\"p-0\">\n                    {user.createdTs ?\n                      <p\n                        className=\"text-sm track-gifts-purchased-time\">{moment(user.createdTs).format('MMM DD, YYYY')}</p>\n                      : null}\n                  </div>\n                </div>\n              </div>\n            ))}\n          </Modal> : null}\n      </div>\n    );\n  }\n}\n\nexport default GiftCard;","import React from \"react\";\nimport {connect} from \"react-redux\";\nimport {TRACK_GIFTS_VIEWS} from \"../../components/view-by/ViewBy\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport {getTrackGiftsProduct} from \"../../../../utils/commonFunction\";\nimport GiftCard from \"../../components/gift-card/GiftCard\";\nimport \"./TrackGiftContent.scss\";\n\nexport const LOCAL_2_API_FILTERS_MAPPING = {\n  4: \"totalAvailable\",\n  1: \"totalPurchased\",\n  3: \"totalReserved\",\n  2: \"totalFundsReceived\",\n  5: \"totalReturned\"\n}\n\n// Component for No registry Gifts Found\nconst NoRecordFound = () => {\n  return (\n    <h2>No purchased gifts found.</h2>\n  )\n}\n\nclass TrackGiftsContent extends React.Component {\n\n  state = {\n    currentView: null\n  }\n\n  fetchAvailableFromAddedProducts = (products) => {\n    let availableProducts = []\n    availableProducts = products.filter(product => {\n      if (product.isGroupGift) {\n        return !product.isPurchased\n      } else {\n        return !product.isPurchased && product.quantityStatus.still_needed > 0 && !product.isAmountReceived\n      }\n    })\n    availableProducts = availableProducts.map(product => {\n      let newProduct = {...product}\n      newProduct.purchasedRegistryItem = []\n      return newProduct\n    })\n    return availableProducts\n  }\n\n  // Separating available products\n  getAvailableProduct = (stateProducts) => {\n    let availableProducts = []\n    let otherSelected = false\n\n    let currentFilterCount = [...this.props.stateTrackGiftsFilters].filter(filter => filter.count > 0).length\n    let unselectedCount = [...this.props.stateTrackGiftsFilters].filter(filter => filter.count > 0 && !filter.selected).length\n\n    if (currentFilterCount === unselectedCount) {\n      otherSelected = true\n      availableProducts = this.fetchAvailableFromAddedProducts(stateProducts)\n    } else {\n      for (let filter of this.props.stateTrackGiftsFilters) {\n        if (filter.id === 4 && filter.selected) {\n          availableProducts = this.fetchAvailableFromAddedProducts(stateProducts)\n        } else if (filter.count > 0 && filter.selected) {\n          otherSelected = true\n        }\n      }\n    }\n\n\n    return {otherSelected, availableProducts}\n  }\n\n  // Getting unique objects from a list\n  getUniqueListBy = (arr, key) => {\n    return [...new Map(arr.map(item => [item[key], item])).values()]\n  }\n\n  // For Group Gift and CIL unique product\n  getUniqueListByGroupGift = (products) => {\n    let finalGroupedProduct = []\n    for (let groupedProduct of [...products]) {\n      let email = groupedProduct.user.guestUser.email\n      let finalProduct = []\n      let groupGiftAndCILIDs = []\n      for (let product of [...groupedProduct.products]) {\n        // For Group Gift and CIL\n        if (product.isGroupGift || product.isCashAcceptedOnly) {\n          if (!groupGiftAndCILIDs.includes(product.id)) {\n            finalProduct.push(product)\n            groupGiftAndCILIDs.push(product.id)\n          }\n        } else {\n          finalProduct.push(product)\n        }\n      }\n      groupedProduct.products = [...finalProduct]\n      finalGroupedProduct.push(groupedProduct)\n    }\n    return finalGroupedProduct\n  }\n\n  getProductsBasedOnView = (view, stateProducts) => {\n    let products = []\n    let guestUsersEmails = []\n    let refinedProducts = []\n    let skipCashFund = false;\n\n    for (const product of [...stateProducts]) {\n      if (product.purchasedRegistryItem.length <= 0) {\n        refinedProducts.push(product)\n      } else {\n        let userProducts = []\n        let currentProduct = {...product}\n        skipCashFund = false;\n        for (let user of product.purchasedRegistryItem) {\n          if (skipCashFund) {\n            skipCashFund = false\n            break\n          }\n          let newUsers = {...user}\n          let otherUsers = product.purchasedRegistryItem\n          newUsers['otherUsers'] = otherUsers\n          currentProduct.purchasedRegistryItem = [newUsers]\n          userProducts.push({...currentProduct})\n          currentProduct = {...product}\n          if ((product.isGroupGift || product.isCashAcceptedOnly )&& view?.id === TRACK_GIFTS_VIEWS[0].id) {\n            skipCashFund = true\n          }\n        }\n        refinedProducts.push(...userProducts)\n      }\n    }\n    console.log([...refinedProducts])\n    if (view?.id === TRACK_GIFTS_VIEWS[0].id) { // [0] index is Gifts\n      //  Gifts View\n      for (const product of refinedProducts) {\n        if (product.purchasedRegistryItem.length > 0) {\n          products.push({...product})\n        }\n      }\n\n      let {otherSelected, availableProducts} = this.getAvailableProduct(stateProducts)\n      \n      let productIdToRemove = []\n      let newProducts = products.filter(product => {\n        if ((product.isGroupGift || product.isCashAcceptedOnly) && product.purchasedRegistryItem.length > 0) {\n          productIdToRemove.push(product.id)\n          return true\n        }\n        return false\n      })\n\n      // Show Available products in Gifts View only if Available Filter is applied\n      if (!otherSelected && availableProducts.length > 0) {\n        // If only available is selected then show only available products\n        products = [...newProducts, ...availableProducts.filter(product => productIdToRemove.indexOf(product.id) === -1)]\n      } else if (availableProducts.length > 0) {\n        products.push(...availableProducts.filter(product => productIdToRemove.indexOf(product.id) === -1))\n      }\n\n    } else {\n\n      let partiallyPurchasedGroupGift = []\n\n      //  Gift Giver View\n      for (const product of refinedProducts) {\n\n        if (product.purchasedRegistryItem.length > 0) {\n          // Grouping Product\n          if (product.isGroupGift) {\n            if (product.purchasedRegistryItem.length > 0 && !product.isPurchased) {\n              partiallyPurchasedGroupGift.push({...product})\n            }\n\n            // Looping through each groupGift User\n            for (const groupUser of product.purchasedRegistryItem) {\n\n              // Removing unsearched user from group gift\n              if (this.props.stateTrackGiftsSearch.searched) {\n                if (groupUser.guestUser) {\n                  const user = groupUser.guestUser;\n                  const searchedText = this.props.stateTrackGiftsSearch.searchText;\n                  if (!(user.email && user.email.toLowerCase().match(searchedText)) && !(user.firstName && user.firstName.toLowerCase().match(searchedText)) && !(user.lastName && user.lastName.toLowerCase().match(searchedText))) {\n                    continue\n                  }\n                }\n              }\n\n              if (guestUsersEmails.indexOf(groupUser.guestUser.email) !== -1) {\n                let newProducts = products.map(groupedProduct => {\n                  if (groupedProduct.user.guestUser.email === groupUser.guestUser.email) {\n                    groupedProduct.products = [...groupedProduct.products, product]\n                  }\n                  return groupedProduct\n                })\n                products = [...newProducts]\n              } else {\n                products.push({\n                  user: {...groupUser},\n                  products: [{...product}]\n                })\n                guestUsersEmails.push(groupUser.guestUser.email)\n              }\n            }\n          } else {\n            //  Not a group Gift\n            if (product.isCashAcceptedOnly && product.purchasedRegistryItem.length > 0 && !product.isPurchased) {\n              partiallyPurchasedGroupGift.push({...product})\n            }\n            try {\n              if (guestUsersEmails.indexOf(product.purchasedRegistryItem[0].guestUser.email) !== -1) {\n                // User already have product\n                products = products.map(groupProduct => {\n                  if (groupProduct.user.guestUser.email === product.purchasedRegistryItem[0].guestUser.email) {\n                    groupProduct.products.push(product)\n                  }\n                  return groupProduct\n                })\n              } else {\n                // User doesn't have product\n                products.push({\n                  user: {...product.purchasedRegistryItem[0]},\n                  products: [{...product}]\n                })\n                guestUsersEmails.push(product.purchasedRegistryItem[0].guestUser.email)\n              }\n            } catch {\n              availableProducts.push({...product})\n            }\n          }\n        }\n      }\n\n      // products = products.map(product => {\n      //   product.products = this.getUniqueListBy([...product.products], \"id\")\n      //   return product\n      // })\n\n      let userLastName_products = []\n      let userFirstName_products = []\n\n      // Splitting Product based on empty Lastname\n      for (let product of products) {\n        if (product.user.guestUser.lastName) {\n          userLastName_products.push(product)\n        } else {\n          userFirstName_products.push(product)\n        }\n      }\n\n      // Sorting based on lastName\n      userLastName_products = userLastName_products.sort((a, b) => {\n        let aLastName = a.user.guestUser.lastName ? a.user.guestUser.lastName : \"\";\n        let bLastName = b.user.guestUser.lastName ? b.user.guestUser.lastName : \"\";\n\n        return aLastName.localeCompare(bLastName);\n      })\n\n      // Sorting based on firstName\n      userFirstName_products = userFirstName_products.sort((a, b) => {\n        let aFirstname = a.user.guestUser.firstName ? a.user.guestUser.firstName : \"\";\n        let bFirstname = b.user.guestUser.firstName ? b.user.guestUser.firstName : \"\";\n\n        return aFirstname.localeCompare(bFirstname);\n      })\n\n      // Combining sorted products\n      products = [...userLastName_products, ...userFirstName_products]\n\n      // Setting available products\n      let {otherSelected, availableProducts} = this.getAvailableProduct(stateProducts)\n      partiallyPurchasedGroupGift = this.getUniqueListBy([...partiallyPurchasedGroupGift], \"id\")\n      if (!otherSelected && availableProducts.length > 0) {\n        // If only available is selected then show only available products\n        let productIdToRemove = [...partiallyPurchasedGroupGift].map(product => product.id)\n        products = [{\n          availableProducts: true,\n          products: [...partiallyPurchasedGroupGift, ...availableProducts.filter(product => productIdToRemove.indexOf(product.id) === -1)]\n        }]\n\n      } else if (availableProducts.length > 0) {\n        let productIdToRemove = [...partiallyPurchasedGroupGift].map(product => product.id)\n        products.push({\n          availableProducts: true,\n          products: [...availableProducts.filter(product => productIdToRemove.indexOf(product.id) === -1)]\n        })\n      }\n      products = this.getUniqueListByGroupGift([...products])\n    }\n\n    return products\n  }\n\n  render() {\n    let noPurchasedProduct = true\n    for (let filter of this.props.stateTrackGiftsFilters) {\n      if (filter.id !== 4 && filter.count > 0) {\n        noPurchasedProduct = false\n        break;\n      }\n      if (filter.id === 4 && filter.selected) {\n        noPurchasedProduct = false\n        break;\n      }\n    }\n\n    if (this.props.stateTrackGiftsProducts.length <= 0 && this.state.currentView && this.props.stateTrackGiftsPagination.hasNextPage) {\n      getTrackGiftsProduct(true, this.props.stateTrackGiftsFilters, this.props.stateTrackGiftsProducts, this.props.stateTrackGiftsPagination, this.props.stateTrackGiftsView, this.props.stateRegistryInfo, this.props.stateTrackGiftsSearch, this.props.dispatch)\n    }\n\n    // Getting new products when new views are switched\n    if (this.state.currentView?.id !== this.props.stateTrackGiftsView?.id) {\n      this.setState({\n        currentView: {...this.props.stateTrackGiftsView}\n      })\n      getTrackGiftsProduct(true, this.props.stateTrackGiftsFilters, this.props.stateTrackGiftsProducts, this.props.stateTrackGiftsPagination, this.props.stateTrackGiftsView, this.props.stateRegistryInfo, this.props.stateTrackGiftsSearch, this.props.dispatch)\n    }\n\n    const products = this.getProductsBasedOnView(this.props.stateTrackGiftsView, this.props.stateTrackGiftsProducts)\n\n    // if (this.props.stateTrackGiftsProducts.length <= 0 && !this.props.stateTrackGiftsPagination.hasNextPage) {\n    if (noPurchasedProduct) {\n      return <NoRecordFound/>\n    } else if (this.props.stateTrackGiftsView?.id === TRACK_GIFTS_VIEWS[0].id) {\n\n      // For Gifts\n\n      return (\n        <div>\n          <div className=\"row mb-1 mb-md-2\">\n            <div className=\"col-6 d-none d-md-inline-block\">\n              <p className=\"text-sm font-medium\">Gift details</p>\n            </div>\n            <div className=\"col-6 d-none d-md-inline-block\">\n              <p className=\"text-sm font-medium\">Gifted by</p>\n            </div>\n            <div className=\"col-12 d-inline-block d-md-none\">\n              <p className=\"text-sm font-body\">Gift details | Gifted by</p>\n            </div>\n          </div>\n          <div className=\"row\">\n            <div className=\"col\">\n              <InfiniteScroll\n                style={{overflow: \"unset\"}}\n                next={() => getTrackGiftsProduct(false, this.props.stateTrackGiftsFilters, this.props.stateTrackGiftsProducts, this.props.stateTrackGiftsPagination, this.props.stateTrackGiftsView, this.props.stateRegistryInfo, this.props.stateTrackGiftsSearch, this.props.dispatch)}\n                hasMore={this.props.stateTrackGiftsPagination.hasNextPage}\n                loader={<h4>Loading...</h4>}\n                dataLength={this.props.stateTrackGiftsProducts.length}\n              >\n                {products.map(product => {\n                  // return <p className=\"my-5\">{product.title}</p>\n                  return <GiftCard data={product}/>\n                })}\n              </InfiniteScroll>\n            </div>\n          </div>\n        </div>\n      )\n    } else {\n\n      // For Gift Giver\n\n      return (\n        <div>\n          <InfiniteScroll\n            next={() => getTrackGiftsProduct(false, this.props.stateTrackGiftsFilters, this.props.stateTrackGiftsProducts, this.props.stateTrackGiftsPagination, this.props.stateTrackGiftsView, this.props.stateRegistryInfo, this.props.stateTrackGiftsSearch, this.props.dispatch)}\n            hasMore={this.props.stateTrackGiftsPagination.hasNextPage}\n            loader={<h4>Loading...</h4>}\n            dataLength={this.props.stateTrackGiftsProducts.length}\n            style={{overflow: \"unset\"}}\n          >\n            {products.map(groupedProduct => {\n              if (groupedProduct.products.length <= 0){\n                return null\n              }\n              return (\n                <div className=\"mb-4 track-gifts-gift-giver-view\">\n                  <div className=\"mb-2 d-flex\">\n                    <span\n                      className=\"text-body font-medium track-gifts-gift-giver-user-name\"\n                      title={groupedProduct.availableProducts ? \"Available\" : `${groupedProduct.user.guestUser.firstName ? groupedProduct.user.guestUser.firstName : \"\"} ${groupedProduct.user.guestUser.lastName ? groupedProduct.user.guestUser.lastName : \"\"}`}>{groupedProduct.availableProducts ? \"Available\" : `${groupedProduct.user.guestUser.firstName ? groupedProduct.user.guestUser.firstName : \"\"} ${groupedProduct.user.guestUser.lastName ? groupedProduct.user.guestUser.lastName : \"\"}`}\n                    </span>\n                    {!groupedProduct.availableProducts ?\n                      <span\n                        className=\"ml-1 text-body track-gifts-gift-giver-user-email\">{groupedProduct.user.guestUser.email}</span> : null}\n                    <span\n                      className=\"ml-1 text-body font-medium gift-givers-user-gift-count px-2\">{`${groupedProduct.products.length} gift${groupedProduct.products.length > 1 ? 's' : ''}`}</span>\n                  </div>\n                  <div>\n                    {groupedProduct.products.map(product => (\n                      <GiftCard data={product}/>\n                    ))}\n                  </div>\n                </div>\n              )\n            })}\n          </InfiniteScroll>\n        </div>\n      )\n    }\n  }\n}\n\nconst mapStateToProps = state => ({\n  stateTrackGiftsView: state.trackGifts.activeView,\n  stateTrackGiftsProducts: state.trackGifts.products,\n  stateTrackGiftsPagination: state.trackGifts.paginationInfo,\n  stateRegistryInfo: state.registry.info,\n  stateTrackGiftsFilters: state.trackGifts.filters,\n  stateTrackGiftsSearch: state.trackGifts.search\n})\n\nexport default connect(\n  mapStateToProps\n)(TrackGiftsContent);","export const CDN_BASE_URL = \"https://registry-cdn.monicaandandy.com\";\n\nexport const ROUTES = {\n    Rectangle_1685_2x_2: CDN_BASE_URL + \"/assets/Rectangle 1685@2x 2.png\",\n    image_2_2x: CDN_BASE_URL + \"/assets/image 2@2x.png\",\n    Rectangle_1685_2x: CDN_BASE_URL + \"/assets/Rectangle 1685@2x.png\",\n    image_1_2x: CDN_BASE_URL + \"/assets/image 1@2x.png\",\n    MA_LOGO: CDN_BASE_URL + \"/assets/MA-Logo1.5x.svg\",\n    MA_ELEPHANT_LOGO: CDN_BASE_URL + \"/assets/logo_elephant.svg\",\n    MA_DEFAULT_PRODUCT_BROKEN: CDN_BASE_URL + \"/assets/cuddles-big-2x.svg\",\n    BOOKMARKLET_EXAMPLE: CDN_BASE_URL + \"/assets/bookmarklet-example.png\",\n\n    gift_icon: CDN_BASE_URL + '/icons/gift_icon.svg',\n    file_heart_svg: CDN_BASE_URL + '/icons/file_heart.svg',\n    facebook: CDN_BASE_URL + '/icons/facebook.svg',\n    instagram: CDN_BASE_URL + '/icons/instagram .svg',\n    twitter: CDN_BASE_URL + '/icons/twitter.svg',\n    facebook_disabled: CDN_BASE_URL + '/icons/facebook_disabled.svg',\n    instagram_disabled: CDN_BASE_URL + '/icons/instagram _disabled.svg',\n    twitter_disabled: CDN_BASE_URL + '/icons/twitter_disabled.svg',\n    pinterest: CDN_BASE_URL + '/icons/pinterest.svg',\n    pinterest_disabled: CDN_BASE_URL + '/icons/pinterest_disabled.svg',\n    DEFAULT_VARIANT_PATTARN: CDN_BASE_URL + '/assets/default-variant-pattern.png',\n\n    gift_icon_s3_bucket: 'https://baby-registry-dev.s3.us-east-2.amazonaws.com/media/frontend_assets/gift_icon.svg',\n    icon_rearrange_s3_bucket: 'https://baby-registry-dev.s3.us-east-2.amazonaws.com/media/frontend_assets/icon_rearrange.svg',\n}","import React from \"react\";\nimport {\n    GET_PRODUCTS,\n    REMOVE_REGISTRY_ITEM,\n    GET_CATEGORIES,\n    GET_REGISTRIES,\n    ADD_REGISTRY_ITEM,\n    UPDATE_REGISTRY_ITEM,\n    GET_QUESTIONS,\n    GET_GUEST_REGISTRY,\n    GET_PERSONALIZE_QUESTIONS,\n    GET_GUEST_CHECKLIST, GET_TRACK_GIFTS, GET_TODO, GET_DEFAULT_CASH_FUND_IMAGE, GET_MA_VARIANT, GET_SEO,\n    GET_MA_VARIANT_BY_SIZE\n} from \"../api/queries\";\nimport {graphQL, graphQLNoHeader, graphQLNoToken, addProductToCart as addProductToCartAPI} from \"../api/axios\";\nimport {CURRENCY, MEDIA_URL_PREFIX, TRACK_GIFTS_PRODUCTS_PER_REQUEST, NAME_RE} from \"./constants\";\nimport {\n    setRegistryProducts,\n    setCheckListItems,\n    setAllCheckListItems,\n    toggleMustHaveProduct as toggleMustHaveProductAction,\n    setCashFundCategories,\n    setFilterProductCount,\n    setActiveRecommandationVariantBySize,\n    setActiveRecommandationSizeVariant\n} from \"../modules/my-registry/MyRegistryActions\";\nimport {\n    CREATE_REGISTRY,\n    TOGGLE_MUST_HAVE,\n    UPDATE_VIEW_REGISTRY_POISTION,\n    TOUR_UPDATE_FLAG,\n    UPDATE_REGISTRY\n} from \"../api/mutations\";\nimport {\n    setOnboardingRegistry,\n    setTodo,\n    updateRegistryInfo,\n    setLoader,\n    setMetaInformation\n} from \"../modules/registry/RegistryActions\";\nimport {setViewRegistryProducts} from \"../modules/view-registry/ViewRegistryActions\";\nimport {addOnboardingQuestion, updateQuestionAnswer} from \"../modules/onboarding/OnboardingAction\";\nimport {addPersonalizeQuestion} from \"../modules/personalise-checklist/PersonaliseCheckListActions\";\nimport {updateGuestViewInfo, setGuestCheckListItems} from \"../modules/guest-view/GuestViewAction\";\nimport {toast} from \"react-toastify\";\nimport reducerDefaultData from \"data/ReducerDefaultData.json\";\nimport {TRACK_GIFTS_VIEWS} from \"../modules/track-gifts/components/view-by/ViewBy\";\nimport {\n    setTrackGiftsFilters,\n    setTrackGiftsPaginationInfo,\n    setTrackGiftsProduct\n} from \"../modules/track-gifts/TrackGiftsAction\";\nimport {LOCAL_2_API_FILTERS_MAPPING} from \"../modules/track-gifts/containers/track-gifts-content/TrackGiftsContent\";\nimport {store} from \"../store/Store\";\nimport {ROUTES} from \"./cdn-assets-links\";\n\nexport const getProducts = (registryId, dispatch) => {\n    let data = {\n        query: GET_PRODUCTS,\n        variables: {\n            registryId: parseInt(registryId)\n        }\n    }\n    dispatch(setLoader(true))\n    graphQL(data).then(res => {\n        // Filter Count\n        let filterCount = {\n            categoryData: {...res.data.data.registryItems.categoryData},\n            registryItemsAnalysisCount: {...res.data.data.registryItems.registryItemsAnalysisCount}\n        }\n        dispatch(setFilterProductCount(filterCount))\n\n        let responseData = res.data.data.registryItems.registryItems.edges.map(item => {\n            // return { ...item.node }\n            let newItemObj = {...item.node}\n            delete newItemObj.registryitemImage;\n            if (item.node.registryitemImage.length > 0) {\n                newItemObj.imageUrl = (MEDIA_URL_PREFIX.LOCAL_MEDIA_URL ? MEDIA_URL_PREFIX.LOCAL_MEDIA_URL : \"\") + item.node.registryitemImage[0].image;\n            }\n            newItemObj = addAlreadyBoughtProductQuantity(newItemObj)\n\n            return newItemObj;\n        })\n\n        // TODO: change category\n        let finalData = responseData.filter(product => product.registryCategories.length > 0)\n        dispatch(setRegistryProducts(finalData))\n        dispatch(setLoader(false))\n    }).catch(err => {\n        dispatch(setLoader(false))\n        console.error(err.response)\n    })\n\n    getTodoList(registryId, dispatch)\n}\n\nexport const toggleMustHaveProduct = (product, dispatch) => {\n    let data = {\n        query: TOGGLE_MUST_HAVE,\n        variables: {\n            productId: product.id,\n            mustHaveValue: !product.mostWanted,\n            quantity: product.quantity\n        }\n    }\n    graphQL(data).then(res => {\n        if (res.status === 200) {\n            dispatch(toggleMustHaveProductAction(product.item.id))\n        }\n    }).catch(err => {\n        console.error(err.message)\n    })\n}\n\nconst changeRegistryVisibility = (value, registryInfo, dispatch) => {\n    let data = {\n        query: UPDATE_REGISTRY,\n        operationName: \"updateRegistryDetail\",\n        variables: {\n            \"registryId\": registryInfo.id,\n            \"input\": {\n                isPublic: value\n            }\n        }\n    }\n\n    graphQL(data).then(res => {\n        try {\n            if (res.data.data.updateRegistry.registry) {\n                let newRegistry = {...registryInfo}\n                newRegistry.isPublic = value\n                dispatch(updateRegistryInfo(newRegistry))\n                getTodoList(registryInfo.id, dispatch)\n            } else {\n                console.log(res.data.data.updateRegistry.errors);\n            }\n        } catch (e) {\n            console.error(e);\n        }\n    }).catch(err => {\n        console.error(err.message)\n    })\n\n}\n\nexport const removeProductFromCartHandler = (card, registryId, dispatch) => {\n    const state = store.getState()\n    let registryInfo = state.registry.info\n    let products = state.myRegistry.addedProducts\n    let registryItemId = card.id\n    let data = {\n        query: REMOVE_REGISTRY_ITEM,\n        variables: {\n            registryItemId: registryItemId\n        },\n    }\n    dispatch(setLoader(true))\n    graphQL(data).then(res => {\n        console.log({...res.data.data.errors})\n        if (res.data.errors && res.data.errors.length) {\n            for (let error of res.data.errors) {\n                toast.error(error.message)\n            }\n            return;\n        } else {\n            // dispatch(removeProductFromCart(card.item.id))\n            // this.getProducts();\n            if (products.length - 1 <= 0) {\n                changeRegistryVisibility(false, registryInfo, dispatch);\n            }\n            getProducts(registryId, dispatch);\n            getCategories(registryId, dispatch);\n            dispatch(setLoader(false))\n            toast.error((\n                <p><b>{card.title}</b> removed from your registry!</p>\n            ))\n            let isCashFund = false;\n            if (card.registryCategories.length > 0) {\n                for (let category of card.registryCategories) {\n                    if (Number(category.category.categoryType.id) === 2) {\n                        isCashFund = true;\n                        break;\n                    }\n                }\n            }\n            if (card.isGroupGift || card.isCashAcceptedOnly || isCashFund) {\n                updateRegistryDetail(dispatch)\n            }\n            // getCategories()\n        }\n\n    }).catch(err => {\n        dispatch(setLoader(false))\n        console.error(err.message)\n        toast.error((\n            <p>Some error occurred.</p>\n        ))\n    })\n}\n\n// While using this method. Plase mak sure of parentCategory Parameter\nexport const getRefinedCategory = (category, parentCategory = null) => {\n    return ({\n        id: category.id,\n        category: category.category,\n        categoryName: category.category.categoryName,\n        description: category.category.description,\n        categoryType: category.category.categoryType,\n        isDesired: category.isDesired,\n        isExcluded: category.isExcluded,\n        addedItemsCount: category.addedItemsCount < category.totalItemsCount || category.totalItemsCount <= 0 ? category.addedItemsCount : category.totalItemsCount,\n        totalItemsCount: category.totalItemsCount,\n        isParent: category.category.isParent,\n        parentCategory: parentCategory\n    })\n}\n\n\n// Get all categories\nexport const getAllCategories = (registryCategories, getAll) => {\n    // let finalCondition = category.subCategoriesIsExcluded ?\n    let parentCategories = [...registryCategories].filter(category => getAll ? true : (category.subCategoriesIsExcluded ? !category.subCategoriesIsExcluded : !category.isExcluded))\n    let finalCategories = [...parentCategories].map(parentCategory => {\n        let newParentCategory = getRefinedCategory({...parentCategory})\n        let subCategory = parentCategory.registrySubCategories;\n        // delete parentCategory.registrySubCategories\n        let newSubCategories = subCategory.filter(cat => getAll ? true : (cat.subCategoriesIsExcluded ? !cat.subCategoriesIsExcluded : !cat.isExcluded))\n        let newSubCategoriesAddedItemsCount = 0;\n        newSubCategories = newSubCategories.map(cat => {\n            let newAddedItemsCount = 0;\n            let refinedSubCate = getRefinedCategory({...cat}, {\n                id: parentCategory.category.id,\n                name: parentCategory.category.categoryName\n            })\n            let subProductTypes = cat.registrySubProductTypes.map(subProduct => getRefinedCategory(subProduct, {\n                id: cat.category.id,\n                name: cat.category.categoryName\n            }))\n\n            refinedSubCate['subProductTypes'] = subProductTypes.filter(category => {\n                let returnStatus = getAll ? true : !category.isExcluded\n                if (returnStatus) {\n                    newAddedItemsCount += category.addedItemsCount\n                }\n                return returnStatus\n            })\n            newSubCategoriesAddedItemsCount += refinedSubCate.subProductTypes.length ? newAddedItemsCount : refinedSubCate.addedItemsCount\n            refinedSubCate['addedItemsCount'] = refinedSubCate.subProductTypes.length ? newAddedItemsCount : refinedSubCate.addedItemsCount\n            return refinedSubCate\n        })\n        newParentCategory['subCategories'] = newSubCategories\n        newParentCategory['addedItemsCount'] = newParentCategory.subCategories.length ? newSubCategoriesAddedItemsCount : newParentCategory.addedItemsCount\n        return newParentCategory\n    })\n\n    return finalCategories\n}\n\nexport const getCategories = (registryId, dispatch) => {\n    let data = {\n        operationName: \"getCategories\",\n        query: GET_CATEGORIES,\n        variables: {\n            registryId: parseInt(registryId)\n        },\n    }\n    // dispatch(setLoader(true))\n    graphQL(data).then(res => {\n        if (res.data.errors || res.data.error) {\n            // TODO: Add toast\n            console.log('Something went wrong-->', res.data.errors)\n            return;\n        } else {\n            let resCategories = [...res.data.data.registryCategories]\n            let finalCategories = getAllCategories([...resCategories], false)\n            let allCategories = []\n            if (finalCategories.length === 0) {\n                allCategories = getAllCategories([...resCategories], true)\n                dispatch(setCheckListItems(allCategories))\n            } else {\n                dispatch(setCheckListItems(finalCategories))\n            }\n\n            dispatch(setLoader(false))\n            if (allCategories.length === 0) {\n                allCategories = getAllCategories([...resCategories], true)\n            }\n            // Setting all checklist items\n            dispatch(setAllCheckListItems(allCategories))\n            dispatch(setLoader(false))\n        }\n    })\n}\n\nexport const updateRegistryDetailState = (dispatch, registryData) => {\n    let currentRegistryInfo = null;\n\n    currentRegistryInfo = registryData[0].node;\n    if (currentRegistryInfo.image) {\n        currentRegistryInfo.image.image = (MEDIA_URL_PREFIX.LOCAL_MEDIA_URL ? MEDIA_URL_PREFIX.LOCAL_MEDIA_URL : \"\") + currentRegistryInfo.image.image;\n    }\n\n    if (currentRegistryInfo) {\n        dispatch(updateRegistryInfo({...currentRegistryInfo}))\n    } else {\n        dispatch(updateRegistryInfo({notFound: true}))\n        console.log(\"No registry found!\");\n    }\n}\n\nexport const updateRegistryDetail = (dispatch) => {\n    let data = {\n        query: GET_REGISTRIES\n    }\n\n    graphQL(data).then(res => {\n        try {\n            if (res.data.data.registries.edges) {\n                updateRegistryDetailState(dispatch, res.data.data.registries.edges)\n            } else {\n                dispatch(updateRegistryInfo({notFound: true}))\n            }\n        } catch (e) {\n            dispatch(updateRegistryInfo({notFound: true}))\n            console.error(e)\n        }\n    }).catch(err => {\n        dispatch(updateRegistryInfo({notFound: true}))\n        console.error(err.response ? err.response.data : null)\n    })\n}\n\nexport const updateViewRegistryPosition = (registryId, position, oldPosition, dispatch) => {\n    let data = {\n        query: UPDATE_VIEW_REGISTRY_POISTION,\n        variables: {\n            registryId: registryId,\n            registryItems: position\n        },\n    }\n    graphQL(data).then(res => {\n        if (res.data.error) {\n            dispatch(setViewRegistryProducts(oldPosition))\n            toast.error(\"Somerhing went wrong while re-arranging Products\")\n            console.log('Something went wrong-->', res.data.error)\n            return;\n        } else {\n            getProducts(registryId, dispatch)\n        }\n\n    }).catch(err => {\n        dispatch(setViewRegistryProducts(oldPosition))\n        console.error(err.message)\n    })\n}\n\nconst addProductToRegistry = (data, registryId, title, dispatch) => {\n    dispatch(setLoader(true))\n    graphQL(data).then(_ => {\n        dispatch(setLoader(false))\n        getProducts(registryId, dispatch);\n        getCategories(registryId, dispatch);\n\n        toast.success((\n            <p><b>{title}</b> added to your registry!</p>\n        ))\n\n        // Checking if cash in lieu of is added without bank account\n        if (data.variables.isCashAcceptedOnly || data.variables.isGroupGift) {\n            checkForBankAccount(false, data.variables.isCashAcceptedOnly, data.variables.isGroupGift, dispatch);\n        }\n    }).catch(err => {\n        dispatch(setLoader(false))\n        console.error(err.message)\n        toast.error((\n            <p>Some error occurred!</p>\n        ))\n    })\n}\n\nconst updateProductToRegistry = (data, registryId, title, dispatch) => {\n    graphQL(data).then(res => {\n        getProducts(registryId, dispatch);\n        getCategories(registryId, dispatch);\n\n        toast.success((\n            <p><b>{title}</b> added to your registry!</p>\n        ))\n    }).catch(err => {\n        console.error(err.message)\n\n        toast.error((\n            <p>Some error occurred!</p>\n        ))\n    })\n}\n\n\nexport const addProductHandler = (card, stateAddedProducts, stateRegistryInfo, dispatch) => {\n    // If its MA Product\n    const registryId = parseInt(stateRegistryInfo.id)\n    if (card.isMaItem && card.activeVariant) {\n        let existingProduct = [...stateAddedProducts].filter(product => product.item.sku === (card.activeVariant?.activeSizeVariant?.size ? card.activeVariant.activeSizeVariant.sku : card.activeVariant.sku))\n        if (existingProduct.length === 0) {\n            const title = card.title\n            const storeItemUrl = card.storeUrl\n            const sku = card.activeVariant?.activeSizeVariant?.size ? card.activeVariant.activeSizeVariant.sku : card.activeVariant.sku\n            const price = card.activeVariant?.activeSizeVariant?.size ? parseFloat(card.activeVariant.activeSizeVariant.price) : parseFloat(card.activeVariant.price)\n            const compareAtPrice = card.activeVariant?.activeSizeVariant?.size ? parseFloat(card.activeVariant.activeSizeVariant.compareAtPrice) : parseFloat(card.activeVariant.compareAtPrice)\n            const quantity = parseInt(card.quantity)\n            const imageUrl = (card.activeVariant?.activeSizeVariant?.size && card.activeVariant.activeSizeVariant.imageUrl) ? card.activeVariant.activeSizeVariant.imageUrl : (card.activeVariant.imageUrl && card.activeVariant.imageUrl !== \"\") ? card.activeVariant.imageUrl : card.imageUrl;\n            const shopifyVariantId = card.activeVariant?.activeSizeVariant?.size ? card.activeVariant.activeSizeVariant.variantId : card.activeVariant.variantId\n            const storeName = card.storeName\n            const mostWanted = card.mostWanted ? card.mostWanted : false\n            const isGroupGift = card.isGroupGift ? card.isGroupGift : false\n            const isCashAcceptedOnly = false\n            const shopifyItemId = card.shopifyItemId\n            const isBundleProduct = card.isBundleProduct ? card.isBundleProduct : false\n            let category = null\n            let bundleProduct = [...card.itemRecommendationCategoryItemRecommendation].map(cat => {\n                return {\n                    categoryId: cat.category.id,\n                    itemsCount: cat.itemsCount\n                }\n            })\n            if (card.isBundleProduct) {\n                category = [...card.itemRecommendationCategoryItemRecommendation].map(cat => Number(cat.id));\n            } else if (!category && card.activeVariant?.activeSizeVariant?.size && card.activeVariant?.activeSizeVariant.registryCategoryId.length) {\n                category = card.activeVariant?.activeSizeVariant.registryCategoryId.map(cat => Number(cat.id))\n            } else {\n                category = [Number(card.category.id)]\n            }\n\n            let data = {\n                query: ADD_REGISTRY_ITEM,\n                variables: {\n                    registryId: registryId,\n                    title: title,\n                    // TODO: change category\n                    category: category,\n                    tags: [],\n                    storeItemUrl: storeItemUrl ? storeItemUrl : '',\n                    sku: sku,\n                    price: price,\n                    quantity: quantity,\n                    imageUrl: imageUrl,\n                    shopifyItemVariantId: shopifyVariantId,\n                    storeName: storeName,\n                    mostWanted: mostWanted,\n                    isGroupGift: isGroupGift,\n                    //TODO: change this if requried\n                    // shopifyItemId: shopifyItemId,\n                    shopifyItemId: shopifyItemId,\n                    isCashAcceptedOnly: isCashAcceptedOnly,\n                    isBundleProduct: isBundleProduct,\n                    bundleProduct: bundleProduct,\n                    note: card.giftNote,\n                    compareAtPrice: compareAtPrice,\n                }\n            }\n            addProductToRegistry(data, registryId, card.title, dispatch)\n        } else {\n            let data = {\n                query: UPDATE_REGISTRY_ITEM,\n                variables: {\n                    registryItemId: existingProduct[0].id,\n                    quantity: parseInt(card.quantity) + parseInt(existingProduct[0].quantity),\n                    mostWanted: card.mostWanted ? card.mostWanted : existingProduct[0].mostWanted,\n                    isGroupGift: card.isGroupGift ? card.isGroupGift : existingProduct[0].isGroupGift,\n                    isCashAcceptedOnly: card.isCashAcceptedOnly ? card.isCashAcceptedOnly : existingProduct[0].isCashAcceptedOnly,\n                    title: existingProduct[0].title,\n                    storeItemUrl: existingProduct[0].storeItemUrl,\n                    price: existingProduct[0].price,\n                    category: [...existingProduct[0].registryCategories].map(cat => Number(cat.id)),\n                    note: card.giftNote ? card.giftNote : existingProduct[0].note,\n                }\n            }\n            updateProductToRegistry(data, registryId, card.title, dispatch)\n        }\n    }\n    // If its not MA Product\n    else {\n        let existingProduct = [...stateAddedProducts].filter(product => product.item.sku === card.sku)\n        if (existingProduct.length === 0) {\n            const title = card.title\n            const storeItemUrl = card.storeUrl\n            const sku = card.sku\n            const price = parseFloat(card.price)\n            const quantity = parseInt(card.quantity)\n            const imageUrl = card.imageUrl\n            const storeName = card.storeName\n            const mostWanted = card.mostWanted ? card.mostWanted : false\n            const isCashAcceptedOnly = card.isCashAcceptedOnly === false ? card.isCashAcceptedOnly : true\n            const isGroupGift = card.isGroupGift ? card.isGroupGift : false\n            const isBundleProduct = card.isBundleProduct ? card.isBundleProduct : false\n            const category = card.isBundleProduct ? [...card.itemRecommendationCategoryItemRecommendation].map(cat => Number(cat.id)) : card.hasMultiCategories ? card.categories : [Number(card.category.id)]\n            let bundleProduct = [...card.itemRecommendationCategoryItemRecommendation].map(cat => {\n                return {\n                    categoryId: cat.category.id,\n                    itemsCount: cat.itemsCount\n                }\n            })\n\n            let data = {\n                query: ADD_REGISTRY_ITEM,\n                variables: {\n                    registryId: registryId,\n                    title: title,\n                    // TODO: change category\n                    category: category,\n                    tags: [],\n                    storeItemUrl: storeItemUrl ? storeItemUrl : '',\n                    sku: sku,\n                    price: price,\n                    quantity: quantity,\n                    imageUrl: imageUrl,\n                    storeName: storeName,\n                    mostWanted: mostWanted,\n                    isGroupGift: isGroupGift,\n                    isCashAcceptedOnly: isCashAcceptedOnly,\n                    isBundleProduct: isBundleProduct,\n                    bundleProduct: bundleProduct,\n                    note: card.giftNote,\n                }\n            }\n            addProductToRegistry(data, registryId, card.title, dispatch)\n        } else {\n            let data = {\n                query: UPDATE_REGISTRY_ITEM,\n                variables: {\n                    registryItemId: existingProduct[0].id,\n                    title: card.title ? card.title : existingProduct[0].title,\n                    price: card.price ? card.price : existingProduct[0].price,\n                    storeItemUrl: card.storeItemUrl ? card.storeItemUrl : existingProduct[0].storeItemUrl,\n                    category: card.hasMultiCategories ? card.categories : card.isBundleProduct ? [...card.itemRecommendationCategoryItemRecommendation].map(cat => Number(cat.id)) : [Number(card.category.id)],\n                    quantity: parseInt(card.quantity) + parseInt(existingProduct[0].quantity),\n                    mostWanted: card.mostWanted ? card.mostWanted : existingProduct[0].mostWanted,\n                    isGroupGift: card.isGroupGift ? card.isGroupGift : existingProduct[0].isGroupGift,\n                    isCashAcceptedOnly: card.isCashAcceptedOnly ? card.isCashAcceptedOnly : existingProduct[0].isCashAcceptedOnly,\n                    note: card.giftNote ? card.giftNote : existingProduct[0].note,\n                }\n            }\n            updateProductToRegistry(data, registryId, card.title, dispatch)\n        }\n    }\n}\n\nexport const getOnboardingQuestions = async (dispatch, registryId = null, token = null) => {\n    let reqData = {\n        query: GET_QUESTIONS,\n        variables: {\n            isPersonalize: false,\n            registryId: registryId ? Number(registryId) : null\n        }\n    }\n    let options = {}\n    if (token) {\n        options = {headers: {\"Authorization\": \"Token \" + token}}\n    }\n\n    let getAnswerResponse = (question, isFollowUp = false) => {\n        let response = {\n            question: question.id,\n            response: {\n                option: question.answers[0].questionOption ? question.answers[0].questionOption.id : 0,\n                optionText: question.answers[0].optionText,\n                action: null\n            }\n        }\n        if (isFollowUp){\n            response.response['isFollowUp'] = true\n            delete response.response.action;\n        }\n        return response;\n    }\n\n    await graphQLNoHeader(reqData, options).then(async res => {\n        if (res.data.data.questions) {\n            let alreadyAnswered = []\n            const questions = res.data.data.questions.map(question => {\n                let followUpAnswers = []\n                let currentQuestionOptionAnswerId = null\n                question.isAnswered = question.answers.length > 0;\n\n                if (question.isAnswered) {\n                    const currentQuestionAnswer = getAnswerResponse(question)\n                    currentQuestionOptionAnswerId = currentQuestionAnswer.response.option\n                    alreadyAnswered.push(currentQuestionAnswer)\n                }\n                question.options = question.options.map(option => {\n                    if (option.followUpQuestions.length > 0) {\n                        option.followUpQuestions.map(followUpQuestion => {\n                            followUpQuestion['parentQuestion'] = question.id\n                            followUpQuestion.question['isAnswered'] = followUpQuestion.question.answers.length > 0\n\n                            if (followUpQuestion.question['isAnswered'] && option.id === currentQuestionOptionAnswerId){\n                                followUpAnswers.push(getAnswerResponse(followUpQuestion.question, true))\n                            }\n\n                            return followUpQuestion;\n                        })\n                    }\n                    return option;\n                })\n\n\n                if (followUpAnswers.length > 0){\n                    alreadyAnswered.push(...followUpAnswers)\n                }\n                return question;\n\n            })\n            dispatch(updateQuestionAnswer(alreadyAnswered))\n            await dispatch(addOnboardingQuestion(questions))\n        }\n    }).catch(err => {\n        // toast.error(\"Error occurred while fetching questions\");\n        console.error(err);\n    })\n}\n\n\nexport const getPersonalizeQuestions = (registryId, dispatch) => {\n    let reqData = {\n        query: GET_PERSONALIZE_QUESTIONS,\n        variables: {\n            registryId: registryId,\n        }\n    }\n\n    graphQL(reqData).then(res => {\n        if (res.data.data.editablePersonalizeQuestions) {\n            const questions = res.data.data.editablePersonalizeQuestions.map(question => {\n                question.options = question.options.map(option => {\n                    if (option.followUpQuestions.length > 0) {\n                        option.followUpQuestions.map(followUpQuestion => {\n                            followUpQuestion['parentQuestion'] = question.id\n                            return followUpQuestion;\n                        })\n                    }\n                    return option;\n                })\n                question.isAnswered = false;\n                question.toastMessage = question.toastMessage.replace(\"\\n\", '<br>')\n                return question;\n            })\n            dispatch(addPersonalizeQuestion(questions))\n        }\n    }).catch(err => {\n        toast.error(\"Error occurred while fetching questions\");\n        console.error(err);\n    })\n}\n\nexport const updateGuestViewRegistry = (urlSlug, dispatch) => {\n    let reqData = {\n        query: GET_GUEST_REGISTRY,\n        variables: {\n            urlSlug: urlSlug,\n        }\n    }\n\n    graphQL(reqData).then(res => {\n        if (res.data.data.registryAsGuest) {\n            let guestViewInfo = {...res.data.data.registryAsGuest}\n            if (guestViewInfo.image) {\n                guestViewInfo.image.image = (MEDIA_URL_PREFIX.LOCAL_MEDIA_URL ? MEDIA_URL_PREFIX.LOCAL_MEDIA_URL : \"\") + guestViewInfo.image.image;\n            }\n            delete guestViewInfo.registryItems\n            getSeo(urlSlug, dispatch)\n            dispatch(updateGuestViewInfo(guestViewInfo))\n        }\n    }).catch(err => {\n        dispatch(updateGuestViewInfo({notFound: true}))\n        if (err.response && err.response.data.errors) {\n            for (const error of err.response.data.errors) {\n                // TODO: Implement toast if necessary\n                console.log(error.message)\n            }\n        }\n    })\n}\n\nexport const createRegistry = (dispatch, updateRegistryInfo) => {\n    graphQL({query: CREATE_REGISTRY}).then(res => {\n        if (res.data.data) {\n            let registryId = res.data.data.createRegistry.registry.id\n            if (registryId) {\n                dispatch(setOnboardingRegistry(registryId))\n                // Update registry info\n                if (updateRegistryInfo) {\n                    updateRegistryDetail(dispatch)\n                }\n            }\n        }\n    }).catch(err => {\n        console.log(err.response)\n    })\n}\n\nexport const dataURItoBlob = (dataURI, fileType, fileName) => {\n    let byteString = atob(dataURI.split(',')[1]);\n    let ab = new ArrayBuffer(byteString.length);\n    let ia = new Uint8Array(ab);\n    for (let i = 0; i < byteString.length; i++) {\n        ia[i] = byteString.charCodeAt(i);\n    }\n\n    let blob = new Blob([ab], {type: fileType});\n    return new File([blob], fileName, {\n        type: fileType\n    })\n}\n\nexport const getGuestCategories = async (urlSlug, dispatch) => {\n    let reqData = {\n        query: GET_GUEST_CHECKLIST,\n        variables: {\n            urlSlug: urlSlug,\n        }\n    }\n    await graphQL(reqData).then(res => {\n        if (res.data.errors || res.data.error) {\n            // TODO: Add toast\n            console.log('Something went wrong-->', res.data.errors)\n            return;\n        } else {\n            let finalCategories = getAllCategories(res.data.data.registryCategoriesAsGuest, true)\n            dispatch(setGuestCheckListItems(finalCategories))\n            // dispatch(setCheckListItems(categoryToUpdate))\n        }\n    })\n}\n\nconst getTrackGiftsFilterStatus = (filterString, trackGiftsFilter) => {\n    let returnStatus = false\n    switch (filterString) {\n        case \"available\":\n            for (const filter of trackGiftsFilter) {\n                if (filter.id === 4 && filter.count > 0) {\n                    returnStatus = filter.selected\n                    break;\n                }\n            }\n            break\n        case \"purchased\":\n            for (const filter of trackGiftsFilter) {\n                if (filter.id === 1 && filter.count > 0) {\n                    returnStatus = filter.selected\n                    break;\n                }\n            }\n            break\n        case \"reserved\":\n            for (const filter of trackGiftsFilter) {\n                if (filter.id === 3 && filter.count > 0) {\n                    returnStatus = filter.selected\n                    break;\n                }\n            }\n            break\n        case \"fundsReceived\":\n            for (const filter of trackGiftsFilter) {\n                if (filter.id === 2 && filter.count > 0) {\n                    returnStatus = filter.selected\n                    break;\n                }\n            }\n            break\n        case \"returned\":\n            for (const filter of trackGiftsFilter) {\n                if (filter.id === 5 && filter.count > 0) {\n                    returnStatus = filter.selected\n                    break;\n                }\n            }\n            break\n        default:\n            returnStatus = false\n            break\n    }\n    return returnStatus;\n}\n\nexport const addAlreadyBoughtProductQuantity = (product) => {\n  if ((product.isGroupGift && !checkIsCashFund(product.registryCategories)) || product.isCashAcceptedOnly) {\n      let alreadyBoughtProducts = product.purchasedRegistryItem.filter(i => !i.isAmountReceived).length\n      product['alreadyBoughtProductsQuantity'] = alreadyBoughtProducts\n      if (alreadyBoughtProducts > 0 && product.isGroupGift) {\n          product.purchasedRegistryItem = product.purchasedRegistryItem.map(purchasedItem => {\n              let newPurchasedItem = {...purchasedItem}\n              if (newPurchasedItem.groupGift) {\n                newPurchasedItem.groupGift.amountReceived = newPurchasedItem.groupGift.amountReceived - (alreadyBoughtProducts * product.item.price)\n              }\n              return newPurchasedItem\n          })\n      }\n  } else {\n      product['alreadyBoughtProductsQuantity'] = 0\n  }\n  return product\n}\n\nexport const getTrackGiftsProduct = (clearProducts = false, trackGiftsFilters, trackGiftsProduct, trackGiftsPagination, trackGiftsView, registryInfo, trackGiftsSearch, dispatch, first = TRACK_GIFTS_PRODUCTS_PER_REQUEST) => {\n    dispatch(setLoader(true))\n    // TODO: Change this Function when Search API in implemented\n    let reqData = {\n        query: GET_TRACK_GIFTS,\n        operationName: \"registryGifts\",\n        variables: {\n            registryId: registryInfo?.id,\n            giftGivers: trackGiftsView?.id === TRACK_GIFTS_VIEWS[1].id,  // [1] index is Gift Giver\n            after: clearProducts ? null : trackGiftsPagination.endCursor,\n            first: first,\n            searchKeyword: trackGiftsSearch.searchText,\n            isReserved: getTrackGiftsFilterStatus(\"reserved\", trackGiftsFilters),\n            isAvailable: getTrackGiftsFilterStatus(\"available\", trackGiftsFilters),\n            isPurchased: getTrackGiftsFilterStatus(\"purchased\", trackGiftsFilters),\n            isFundsReceived: getTrackGiftsFilterStatus(\"fundsReceived\", trackGiftsFilters),\n            isReturned: getTrackGiftsFilterStatus(\"returned\", trackGiftsFilters),\n        }\n    }\n\n    graphQL(reqData).then(res => {\n        // Updating Track Gifts Filters\n        if (res.data.data.registryGifts && res.data.data.registryGifts.registryGiftItemsCount) {\n            const allFilterCounts = res.data.data.registryGifts.registryGiftItemsCount;\n            const newFilters = trackGiftsFilters.map(filter => {\n                filter.count = allFilterCounts[LOCAL_2_API_FILTERS_MAPPING[filter.id]] ? allFilterCounts[LOCAL_2_API_FILTERS_MAPPING[filter.id]] : 0\n                return filter\n            })\n\n            dispatch(setTrackGiftsFilters(newFilters))\n        }\n\n        // Updating Track Gifts Products\n        if (res.data.data.registryGifts && res.data.data.registryGifts.gifts) {\n            let registryGifts = res.data.data.registryGifts.gifts\n            let products = registryGifts.edges.map(item => {\n                let product = {...item.node}\n                if (product.registryitemImage.length > 0) {\n                    product.imageUrl = (MEDIA_URL_PREFIX.LOCAL_MEDIA_URL ? MEDIA_URL_PREFIX.LOCAL_MEDIA_URL : \"\") + product.registryitemImage[0].image;\n                }\n                product = addAlreadyBoughtProductQuantity(product)\n\n                return product\n            })\n            let pagination = null\n            if (registryGifts.pageInfo) {\n                pagination = {\n                    hasNextPage: registryGifts.pageInfo.hasNextPage,\n                    endCursor: registryGifts.pageInfo.endCursor,\n                }\n            }\n            if (pagination) {\n                dispatch(setTrackGiftsPaginationInfo({...pagination}))\n            }\n            if (clearProducts) {\n                dispatch(setTrackGiftsProduct([...products]))\n            } else {\n                dispatch(setTrackGiftsProduct([...trackGiftsProduct, ...products]))\n            }\n\n        } else {\n            dispatch(setTrackGiftsPaginationInfo({\n                hasNextPage: false,\n                endCursor: null\n            }))\n        }\n        dispatch(setLoader(false))\n    }).catch(err => {\n        dispatch(setTrackGiftsPaginationInfo({\n            hasNextPage: false,\n            endCursor: null\n        }))\n        console.error(err.response)\n        dispatch(setLoader(false))\n    })\n}\n\nexport const addProductToCart = async (data) => {\n    let returnRes = {}\n    await addProductToCartAPI(data).then(res => {\n        returnRes['status'] = 200\n        console.log('Added to cart ')\n    }).catch(err => {\n        returnRes = err.response.data\n        // if (typeof res !== 'object') {\n        //   returnRes = {status: 401}\n        // }\n        console.error(err.response.data)\n    })\n    return returnRes\n}\n\nexport const getTodoList = (registryId, dispatch) => {\n    let reqData = {\n        query: GET_TODO,\n        variables: {\n            registryId: registryId\n        }\n    }\n\n    graphQL(reqData).then(res => {\n        if (res.data.data && res.data.data.registryTodoSteps) {\n            dispatch(setTodo(res.data.data.registryTodoSteps))\n        }\n        if (res.data.errors) {\n            console.error({...res.data.errors})\n        }\n    }).catch(err => {\n        console.error(err.response)\n    })\n}\n\nexport const fetchDefaultCashFundImage = async (categoryId) => {\n    let result = null\n    const reqData = {\n        query: GET_DEFAULT_CASH_FUND_IMAGE,\n        variables: {\n            categoryId: categoryId\n        }\n    }\n\n    await graphQL(reqData).then(async res => {\n        if (res.data.data.cashFundDefaultImage) {\n            result = {\n                status: \"success\",\n                data: res.data.data.cashFundDefaultImage\n            }\n        } else if (res.data.errors) {\n            result = {\n                status: \"error\",\n                data: res.data.errors\n            }\n        }\n    }).catch(err => {\n        result = {\n            status: \"error\",\n            data: err.response\n        }\n        console.error(\"Unable to fetch cash fund default image\", {...err.response})\n    })\n\n    return result\n}\n\nexport const UpdateBuildTourFlag = (stateRegistryInfo, dispatch) => {\n    let data = {\n        query: TOUR_UPDATE_FLAG,\n        variables: {\n            registryId: stateRegistryInfo.id,\n            isBuildRegistryVisited: true,\n            isViewAsGuestVisited: stateRegistryInfo.isViewAsGuestVisited,\n            isFeaturedOrderApplied: stateRegistryInfo.isFeaturedOrderApplied,\n            isGroupGiftApplied: stateRegistryInfo.isGroupGiftApplied,\n            isViewRegistryVisited: stateRegistryInfo.isViewRegistryVisited,\n            isMustHaveApplied: stateRegistryInfo.isMustHaveApplied\n        }\n    }\n    graphQL(data).then(res => {\n        if (res.status === 200) {\n            console.log('Done..')\n        }\n    }).catch(err => {\n        console.error(err.message)\n    })\n    let registryInfo = {...stateRegistryInfo}\n    registryInfo.isBuildRegistryVisited = true\n    dispatch(updateRegistryInfo(registryInfo))\n}\n\nexport const updateMushHaveTourFlag = (stateRegistryInfo, dispatch, doNotUpdateAddress = false) => {\n    let data = {\n        query: TOUR_UPDATE_FLAG,\n        variables: {\n            registryId: stateRegistryInfo.id,\n            isBuildRegistryVisited: stateRegistryInfo.isBuildRegistryVisited,\n            isViewAsGuestVisited: stateRegistryInfo.isViewAsGuestVisited,\n            isFeaturedOrderApplied: stateRegistryInfo.isFeaturedOrderApplied,\n            isGroupGiftApplied: stateRegistryInfo.isGroupGiftApplied,\n            isViewRegistryVisited: stateRegistryInfo.isViewRegistryVisited,\n            isMustHaveApplied: true\n        }\n    }\n    graphQL(data).then(res => {\n        if (res.status === 200) {\n            console.log('Done..')\n        }\n    }).catch(err => {\n        console.error(err.message)\n    })\n    let registryInfo = doNotUpdateAddress ? stateRegistryInfo : {...stateRegistryInfo}\n    registryInfo.isMustHaveApplied = true\n    dispatch(updateRegistryInfo(registryInfo))\n}\n\nexport const updateViewRegistryTourFlag = (stateRegistryInfo, dispatch) => {\n    let data = {\n        query: TOUR_UPDATE_FLAG,\n        variables: {\n            registryId: stateRegistryInfo.id,\n            isBuildRegistryVisited: stateRegistryInfo.isBuildRegistryVisited,\n            isViewRegistryVisited: true,\n            isViewAsGuestVisited: stateRegistryInfo.isViewAsGuestVisited,\n            isFeaturedOrderApplied: stateRegistryInfo.isFeaturedOrderApplied,\n            isGroupGiftApplied: stateRegistryInfo.isGroupGiftApplied,\n            isMustHaveApplied: stateRegistryInfo.isMustHaveApplied\n        }\n    }\n    graphQL(data).then(res => {\n        if (res.status === 200) {\n            console.log('Done..')\n        }\n    }).catch(err => {\n        console.error(err.message)\n    })\n    let registryInfo = {...stateRegistryInfo}\n    registryInfo.isViewRegistryVisited = true\n    dispatch(updateRegistryInfo(registryInfo))\n}\n\nexport const updateGroupGiftTourFlag = (stateRegistryInfo, dispatch, doNotUpdateAddress = false) => {\n    let data = {\n        query: TOUR_UPDATE_FLAG,\n        variables: {\n            registryId: stateRegistryInfo.id,\n            isBuildRegistryVisited: stateRegistryInfo.isBuildRegistryVisited,\n            isViewAsGuestVisited: stateRegistryInfo.isViewAsGuestVisited,\n            isFeaturedOrderApplied: stateRegistryInfo.isFeaturedOrderApplied,\n            isGroupGiftApplied: true,\n            isViewRegistryVisited: stateRegistryInfo.isViewRegistryVisited,\n            isMustHaveApplied: stateRegistryInfo.isMustHaveApplied\n        }\n    }\n    graphQL(data).then(res => {\n        if (res.status === 200) {\n            console.log('Done..')\n        }\n    }).catch(err => {\n        console.error(err.message)\n    })\n    let registryInfo = doNotUpdateAddress ? stateRegistryInfo : {...stateRegistryInfo}\n    registryInfo.isGroupGiftApplied = true\n    dispatch(updateRegistryInfo(registryInfo))\n}\n\nexport const getMAVariant = async (registryId, variantId, productData) => {\n    let returnValue = null\n    if (!registryId || !variantId) {\n        return returnValue\n    }\n\n    let reqData = {\n        query: GET_MA_VARIANT,\n        variables: {\n            registryId: registryId,\n            variantId: variantId,\n            categoryIds: productData.registryCategories.length > 0 ? productData.registryCategories.map(cat => Number(cat.category.id)) : []\n        }\n    }\n\n    await graphQL(reqData).then(res => {\n        if (res.data && res.data.data.maItemVariants) {\n            returnValue = res.data.data.maItemVariants\n        } else if (res.errors) {\n            console.error(\"Error occurred while fetching variants\", res.errors)\n        }\n    })\n\n    return returnValue\n}\n\nexport const formatPrice = (price, currency = CURRENCY) => {\n    if (price) {\n        try {\n            if (String(price).split(\".\").length > 1) {\n                price = Number(price).toFixed(2);\n            }\n            price = String(price).replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")\n            return `${currency}${price}`\n        } catch {\n\n        }\n    }\n    return price\n}\n\nexport const getSeo = async (urlSlug, dispatch) => {\n    let reqData = {\n        query: GET_SEO,\n        variables: {\n            urlSlug: urlSlug\n        }\n    }\n\n    graphQL(reqData).then(res => {\n        if (res.data && res.data.data && res.data.data.pageMetaDetails) {\n            let pageMetaDetails = res.data.data.pageMetaDetails\n            let formattedMetaInfo = {}\n            // Formatting meta info\n            for (let info of pageMetaDetails) {\n                formattedMetaInfo[info.pageSlug] = info\n            }\n            dispatch(setMetaInformation(formattedMetaInfo))\n        }\n    }).catch(err => {\n        console.error(\"Unable to fetch SEO Information\", {...err.response})\n    })\n}\n\nexport const setMetaInfoToDom = (metaInfo, pageName) => {\n\n    let titleTag = document.getElementsByTagName(\"title\")\n    titleTag = titleTag.length > 0 ? titleTag[0] : null;\n\n    let setMetaInfo = titleTag && titleTag.getAttribute(\"data-page\") ? titleTag.getAttribute(\"data-page\") !== pageName : true\n\n    // Setting Meta description\n    if (setMetaInfo) {\n        // Fetching existing meta description tag\n        let existingMetaTag = document.getElementsByName(\"description\")\n        let descriptionMetaTag = null\n\n        if (existingMetaTag.length > 0) {\n            for (let metaTag of existingMetaTag) {\n                if (metaTag.tagName === \"META\") {\n                    descriptionMetaTag = metaTag\n                    break;\n                }\n            }\n        }\n        if (descriptionMetaTag) {\n            // Updating existing meta description tag\n            descriptionMetaTag.setAttribute(\"content\", metaInfo.description)\n        } else {\n\n            // Creating new meta description tag\n            let newMetaTag = document.createElement(\"meta\")\n            newMetaTag.setAttribute(\"name\", \"description\")\n            newMetaTag.setAttribute(\"content\", metaInfo.description)\n            document.head.appendChild(newMetaTag)\n        }\n        // Setting title\n        document.title = metaInfo.title\n        titleTag.setAttribute(\"data-page\", pageName)\n    }\n}\n\nexport const checkForBankAccount = (isCashFund, isCashInLieu, isGroupGift, dispatch) => {\n    const state = store.getState()\n    if (state.registry.info && state.registry.info.user && state.registry.info.user.bankAccounts.length <= 0 && state.registry.info.isPublic) {\n\n        let data = {\n            query: UPDATE_REGISTRY,\n            operationName: \"updateRegistryDetail\",\n            variables: {\n                \"registryId\": state.registry.info.id,\n                \"input\": {\n                    isPublic: false\n                }\n            }\n        }\n\n        graphQL(data).then(res => {\n            try {\n                if (res.data.data.updateRegistry.registry) {\n                    // TODO: Add msg to tell user that registry is been set to private\n                    console.log(\"Registry status is changed to Private.\")\n                    let newRegistry = state.registry.info;\n                    newRegistry.isPublic = false\n                    newRegistry.isCashFundItemAdded = res.data.data.updateRegistry.registry.isCashFundItemAdded\n                    newRegistry.isCashInLieuItemAdded = res.data.data.updateRegistry.registry.isCashInLieuItemAdded\n                    newRegistry.isGroupGiftItemAdded = res.data.data.updateRegistry.registry.isGroupGiftItemAdded\n                    dispatch(updateRegistryInfo(newRegistry))\n                    getTodoList(state.registry.info.id, dispatch)\n                } else {\n                    console.log(res.data.data.updateRegistry.errors);\n                }\n            } catch (e) {\n                toast.error(\"Some error occurred while changing status of registry\");\n                console.error(e);\n            }\n        }).catch(err => {\n            toast.error(\"Some error occurred while changing status of registry\");\n            console.error(err.message)\n        })\n\n        // let productMsg = isCashFund ? \"Cash Fund\" : isCashInLieu ? \"Cash In Lieu of product\" : isGroupGift ? \"Group Gift\" : \"\";\n        // toast.error(<p>{`You've added ${productMsg} without adding Bank Account. Please add bank account detail.`}</p>)\n    }\n}\n\nexport const getAllVarient = (card, registryInfo, dispatch) => {\n    if (card.activeVariant && !card.activeVariant.isAllVariantFetch) {\n        let data = {\n            query: GET_MA_VARIANT_BY_SIZE,\n            variables: {\n                registryId: registryInfo.id,\n                itemRecommendationId: card.originalRecommandtionId,\n                maItemVariantId: card.activeVariant.id\n            }\n        }\n        graphQL(data).then(res => {\n            if (res.status === 200) {\n                let resData = [...res.data.data.maItemVariantsBySize]\n                let finalData = []\n                for (let variant of resData) {\n                    let finalVariant = {...variant}\n                    finalVariant.title = variant.size\n                    finalVariant.selected = card.activeVariant.activeSizeVariant.id === variant.id\n                    finalData.push(finalVariant)\n                }\n                dispatch(setActiveRecommandationVariantBySize(card.id, card.activeVariant.variantId, finalData))\n            }\n        }).catch(err => {\n            console.error(err.message)\n        })\n    }\n}\n\nexport const setActiveVariantSize = (card, variantId, dispatch) => {\n    let sizeVariant = null\n    for (let variant of card.maItemVariantItemRecommendation) {\n        if (variant.variantId === card.activeVariant.variantId) {\n            for (let vrt of variant.allSizeVariant) {\n                if (vrt.id === variantId) {\n                    sizeVariant = {...vrt};\n                    delete sizeVariant.activeVariant;\n                    delete sizeVariant.allSizeVariant;\n                    delete sizeVariant.activeSizeVariant;\n                    break;\n                }\n            }\n        }\n        if (sizeVariant) {\n            break;\n        }\n    }\n    if (sizeVariant) {\n        dispatch(setActiveRecommandationSizeVariant(card.id, sizeVariant))\n    }\n}\n\n// Fetching lower price if price is in range\nexport const getRefinedPrice = (price) => {\n    price = price.split(\"-\")[0].trim()\n    let newPrice = \"\";\n    for (let char of price) {\n        if (char !== \".\") {\n            if (Number.isInteger(Number(char))) {\n                newPrice += char\n            }\n        } else {\n            newPrice += char\n        }\n    }\n\n    return newPrice;\n}\n\n// Setting default product image on error\nexport const productImageLoadErrorHandler = (ev) => {\n    ev.target.onerror = null;\n    ev.target.src = ROUTES.MA_DEFAULT_PRODUCT_BROKEN;\n    ev.target.classList.add(\"ma-product-img-default\")\n}\n\nexport const productImageLoadHandler = (ev) => {\n    {\n        if (ev.target.src !== ROUTES.MA_DEFAULT_PRODUCT_BROKEN) {\n            ev.target.classList.remove(\"ma-product-img-default\")\n        }\n    }\n}\n\nexport const checkIsCashFund = (registryCategories) => {\n    if (registryCategories) {\n        for (let cat of registryCategories) {\n            if (Number(cat.category.categoryType.id) === 2) {\n                return true\n            }\n        }\n    }\n    return false\n}\n\nexport const viewRegistryTourPosition = (node, top = 0, left = 0) => {\n    if (document.body.offsetWidth <= 786) {\n        let tourEl = document.querySelector('.reactour__helper')\n        let markPositionY = node.getBoundingClientRect().y\n        let markPositionLeft = node.getBoundingClientRect().left\n        let tourHeigt = null\n        if (tourEl) {\n            tourHeigt = tourEl.offsetHeight\n            tourEl.style.top = ((top !== false) ? (markPositionY - top) : (markPositionY * 2 - 40)) + 'px'\n            tourEl.style.left = (left !== false) ? (markPositionLeft - left) + 'px' : 'unset';\n            tourEl.style.right = (left === false) ? '12px' : 'unset';\n            tourEl.style.transform = `translate(0px,-100%)`;\n        }\n    }\n}\n\nexport const onVariantImgLoadErrorHandler = (ev, imageUrl) => {\n    if (ev.target.src === ROUTES.DEFAULT_VARIANT_PATTARN) {\n        ev.target.onerror = null;\n        return\n    }\n    if (ev.target.src !== imageUrl) {\n        ev.target.src = imageUrl ? imageUrl : ROUTES.DEFAULT_VARIANT_PATTARN;\n    } else {\n        ev.target.src = ROUTES.DEFAULT_VARIANT_PATTARN;\n    }\n}\n\nexport const removeFixedRegistryHero = () => {\n    // Removing Fixed Registry Hero\n    setTimeout(() => {\n        let registryHeroEl = document.querySelector('.fixed-registry-hero')\n        let checklistEl = document.getElementById('checklist-scrollarea');\n        if (registryHeroEl) {\n            registryHeroEl.classList.add(\"d-none\")\n            registryHeroEl.style.visibility = \"hidden\"\n        }\n        if (checklistEl && document.body.offsetWidth > 992) {\n            checklistEl.style.paddingTop = '12px';\n        }\n    }, 100);\n}\n\nexport const parseUrlToken = (token) => {\n  let tempToken = token.valueOf().replaceAll(\" \", \"+\")\n  return tempToken.slice(2, tempToken.length - 1)\n}\n\nexport const isInputTextValid = (ev) => {\n    // Validate value don't start with '='\n    if (!ev.target.value.match(NAME_RE)) {\n      ev.preventDefault();\n      return false;\n    }\n    return true;\n}","import React from 'react'\nimport config from \"api/config\";\nimport {viewRegistryTourPosition, removeFixedRegistryHero} from './commonFunction';\n\nexport const API_END_POINTS = {\n  VERIFY_TOKEN: \"/api/user/verify/token\"\n}\n\nexport const API_URL = config.BACKEND_URL\n\nexport const MEDIA_URL_PREFIX = {\n  LOCAL_MEDIA_URL: \"\"\n}\n\nexport const FILTERS = {\n  CATEGORIES_DISPLAY: \"Categories\",\n  PRICE_DISPLAY: \"Price\",\n  PRICE_DISPLAY_1: \"Under $50\",\n  PRICE_DISPLAY_2: \"$50 - $100\",\n  PRICE_DISPLAY_3: \"more than $100\",\n  STORE_DISPLAY: \"Store\",\n  MONICA_AND_ANDY_DISPLAY: \"Monica + Andy\",\n  ELSEWHERE_DISPLAY: \"Elsewhere\",\n  AVAILABLE_DISPLAY: \"Available\",\n  RESERVED_DISPLAY: \"Reserved\",\n  PURCHASED_DISPLAY: \"Purchased\",\n}\n\nexport const BOOKMARKLET_SCRIPT = \"javascript:(function()%7Blet%20script%20%3D%20document.createElement('script')%3Bscript.src%20%3D%20'https%3A%2F%2Fregistry-api.lilhathee.com%2Fbookmarklet.js'%3Bdocument.body.appendChild(script)%7D)()\"\n\nexport const IMPORT_REGISTRY_EMAIL = \"storks@monicaandandy.com\"\n\nexport const TRACK_GIFTS_PRODUCTS_PER_REQUEST = 20\nexport const M_A_STORE_NAME = \"monicaandandy\"\n\nexport const M_A_FORGOT_PASSWORD_LINK = \"https://monicaandandy-watertower.myshopify.com/account/login#recover\"\nexport const VIEW_GIFT_PRODUCTS_PER_REQUEST = 20\n\nexport const CURRENCY = \"$\"\n\nexport const LOCAL_STORAGE_TRACK_GIFT_BUY_KEY = \"babyRegistryVisitedItems\"\n\nexport const SETTINGS_LINKS = {\n  BANK_ACCOUNT: \"/account?content=bank-detail\"\n}\n\nexport const LOCAL_STORAGE_GUEST_GIFT_BUY_KEY = \"babyRegistryVisitedItemsByGuest\"\n\nexport const M_A_BABY_PRODUCT_LINK = \"https://monicaandandy.com/collections/baby-gifts\"\n\nexport const BUILD_REGISTRY_STEPS = [\n  {\n    selector: '[data-tut=\"build-step-one\"]',\n    content: () => {\n      return (\n        <>\n          <h4 className=\"font-medium\">An M+A Registry Tour</h4>\n          <p className=\"mt-2 mt-lg-3 text-sm\">\n            Planning for a baby can be overwhelming, that's why we've made managing your registry easyand fun!\n          </p>\n          <p className=\"mt-2 mt-lg-3 text-sm\">\n            The result?\n          </p>\n          <p className=\"mt-2 mt-lg-3 text-sm\">\n            A streamlined product checklist thats up-to-date, on-trend, and tailored to you and growing familydown to the number of bodysuits and pacis.\n          </p>\n        </>\n      )\n    },\n    title: 'An M+A Registry Tour',\n    children: 'top',\n    observe: '[data-tut=\"build-step-one\"]',\n    action: (node) => {\n      removeFixedRegistryHero()\n    },\n  },\n  {\n    selector: '[data-tut=\"build-step-two\"]',\n    content: () => {\n      return (\n        <>\n          <h4 className=\"font-medium\">Lets Get Personal</h4>\n          <p className=\"mt-2 mt-lg-3 text-sm\">\n            Our personalization engine helps us get to know you better.\n          </p>\n          <p className=\"mt-2 mt-lg-3 text-sm\">\n            Based on your M+A Registry set-up quiz, we tailor our recommendations to your lifethink which bodysuits youll need for a winter baby and how many youll need to get you through that stage.\n          </p>\n          <p className=\"mt-2 mt-lg-3 text-sm\">\n            So every pick is just for you.\n          </p>\n        </>\n      )\n    },\n    title: 'Lets Get Personal',\n    observe: '[data-tut=\"build-step-two\"]',\n    action: (node) => {\n      let checkListEl = document.querySelector('#checklist-container')\n      if (checkListEl && document.body.offsetWidth <= 786) {\n        checkListEl.style.display = 'none';\n      }\n      viewRegistryTourPosition(node, -250, 12)\n\n      removeFixedRegistryHero()\n    },\n    // position: [0, 0],\n  },\n  {\n    selector: '[data-tut=\"build-step-three\"]',\n    content: () => {\n      return (\n        <>\n          <h4 className=\"font-medium\">Add Any Items, From Any Store</h4>\n          <p className=\"mt-2 mt-lg-3 text-sm\">\n            Our registry is a universal registry.\n          </p>\n          <p className=\"mt-2 mt-lg-3 text-sm\">\n            You can add any products you love, from any online store, located anywhere on the internet. And you can manage them all in one place. Which makes it easier for you and easier for gift-givers.\n          </p>\n          <p className=\"mt-2 mt-lg-3 text-sm\">\n            So every pick is just for you.\n          </p>\n        </>\n      )\n    },\n    title: 'Add Any Items, From Any Store',\n    observe: '[data-tut=\"build-step-three\"]',\n    action: (node) => {\n      let checkListEl = document.querySelector('#checklist-container')\n      if (checkListEl && document.body.offsetWidth <= 786) {\n        checkListEl.style.display = 'block';\n      }\n      viewRegistryTourPosition(node, false, false)\n    },\n    position: 'bottom'\n  },\n];\n\nexport const MUST_HAVE_STEPS = [\n  {\n    selector: '[data-tut=\"must-have-tour\"]',\n    content: () => {\n      return (\n        <>\n          <h4 className=\"font-medium\">Must Have</h4>\n          <p className=\"mt-3 text-sm\">\n            Its a fave! Let your guests know its something you really want.\n          </p>\n        </>\n      )\n    },\n    title: 'Must Have',\n    children: 'top',\n  },\n];\n\nexport const VIEW_REGISTRY_STEPS = [\n  {\n    selector: '[data-tut=\"view-step-one\"]',\n    content: () => {\n      return (\n        <>\n          <h4 className=\"font-medium\">Make It Yours</h4>\n          <p className=\"mt-2 mt-lg-3 text-sm\">\n            You can customize your M+A Registry homepage by adding a cute image, changing the title, and leaving your guests a little welcome note.\n          </p>\n        </>\n      )\n    },\n    title: 'Make It Yours',\n    observe: '[data-tut=\"view-step-one\"]',\n    action: (node) => viewRegistryTourPosition(node, 13),\n  },\n  {\n    selector: '[data-tut=\"view-step-two\"]',\n    content: () => {\n      return (\n        <>\n          <h4 className=\"font-medium\">Prioritize Gifts</h4>\n          <p className=\"mt-2 mt-lg-3 text-sm\">\n            You can also change the order that your guests view your registry itemsgiving them a visual cue to what tops your list (hint, hint).\n          </p>\n        </>\n      )\n    },\n    title: 'Prioritize Gifts',\n    // position: [0, -52],\n    observe: '[data-tut=\"view-step-two\"]',\n    action: (node) => viewRegistryTourPosition(node, 13),\n  },\n  {\n    selector: '[data-tut=\"view-step-three\"]',\n    content: () => {\n      return (\n        <>\n          <h4 className=\"font-medium\">Preview + Share</h4>\n          <p className=\"mt-2 mt-lg-3 text-sm\">\n            When youre all set, preview your registry and see exactly what your guests will see when theyre shopping for you.\n          </p>\n          <p className=\"mt-2 mt-lg-3 text-sm\">\n            Looks good? Personalize a URL and share it, so they can get shopping.\n          </p>\n        </>\n      )\n    },\n    title: 'Preview + Share',\n    position: 'bottom',\n    observe: '[data-tut=\"view-step-three\"]',\n    action: (node) => viewRegistryTourPosition(node, 13, 12),\n  },\n]\n\nexport const GROUP_GIFT_STEPS = [\n  {\n    selector: '[data-tut=\"group-gift-step-one\"]',\n    content: () => {\n      return (\n        <>\n          <h4 className=\"font-medium\">Group Gift</h4>\n          <p className=\"mt-3 text-sm\">\n            The more the merrier! Let guests know this is a group gift and they can contribute any amount theyd like towards its purchase. We'll keep you posted on who contributes and how much they give. After you receive the full amount, you can buy the gift at your convenience.\n          </p>\n        </>\n      )\n    },\n    title: 'Group Gift',\n    children: 'top',\n  },\n];\n\nexport const BOOKMARKLET_STEP_THREE_PRODUCT_LINK = \"https://www.target.com/p/wubbanub-elephant-pacifier-gray/-/A-50806426\"\n\nexport const ADD_GIFT_LINKS = {\n  NEW_ARRIVALS: \"https://monicaandandy.com/collections/new-items?refinementList%5Boptions.pattern%5D%5B0%5D=Pizza%20Day&refinementList%5Boptions.pattern%5D%5B1%5D=Pink%20Le%20Macaron%20%2B%20Pink%20Cabana%20Stripe&refinementList%5Boptions.pattern%5D%5B2%5D=Starry%20Constellation\",\n  POPULAR_GIFTS: \"https://monicaandandy.com/collections/baby-gifts\",\n\n  NURSERY: \"https://monicaandandy.com/collections/nursery-furniture-decor\",\n  ACTIVITY_EXPERIMENT_TOY : \"https://monicaandandy.com/collections/play-learning\",\n  GEAR_TRAVEL : \"https://monicaandandy.com/collections/gear-travel\",\n  FEEDING: \"https://monicaandandy.com/collections/baby-burp-cloths-bibs?page=1&configure%5Bdistinct%5D=1&configure%5Bfilters%5D=collections%3Ababy-burp-cloths-bibs%20AND%20NOT%20named_tags.inventory_online%3A%220%22%20AND%20named_tags.inventory_online%20%21%3D%200&configure%5BhitsPerPage%5D=30\"\n}\n\nexport const IMPORT_REGISTRY_BABYLIST_TEXT = \"babylist\"\n\nexport const EMAIL_RE = /^[\\w-+\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$/g\nexport const URL_RE = /(http(s)?:\\/\\/.)(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)/g\nexport const HTTPS_REGEX = /^(https?:\\/\\/){1}.*/g\n\nexport const BUYNOW_REDIRECTION_TIME = 5000 // in milliseconds\n\n// This is a time to re-enable copy btn of share modal once clicked\nexport const TIME_TO_ENABLE_COPY_BTN = 6000 // in milliseconds\n\nexport const DEFAULT_BLOG_IMAGE = 'https://cdn.shopify.com/s/files/1/2338/2917/files/post_image.png?v=1587058155'\n\nexport const ONBOARDING_ANIMATION_DELAY = {\n  QUESTION_WITH_TOAST : \"1s\",\n  QUESTION_WITHOUT_TOAST : \"0s\",\n\n  OPTION_WITH_TOAST : \"1.3s\",\n  OPTION_WITHOUT_TOAST : \"0.3s\",\n}\n\n\nexport const M_A_BUTTON_CONTENT = {\n  \"Chrome\" : \"In your Chrome browser, go to the top right menu and select Settings. In the left navigation you will find Appearance. Inside it find Show Bookmarks bar then toggle to turn on.\",\n  \"Firefox\": \"In your Firefox browser, go to the top-right menu and select Customize. At the bottom, select Bookmarks Toolbar and then Always Show from the Toolbars drop-down box. Click on the Done button.\",\n  \"Edge\": \"In your IE Browser, left-click on more icon and click on the Appearance option. Select Always on the Show favorites bar.\",\n  \"Safari\": \"In your Safari Browser, select View from the top left charms bar. From this drop-down menu, click the Show Status bar.\"\n}\n\nexport const ONBOARDING_SEO = {\n  title: \"Baby Registry Sign-up | Monica + Andy\",\n  description: \"Answer a few simple questions to create your own unique, personalized baby registry.\"\n}\n\nexport const SHARE_REGISTRY_SKELETON_SIZE = {\n  width: 1255,\n  height: 810\n}\n\nexport const MA_ADD_ITEM_TO_REGISTRY = \"maRePrURL\"\n\nexport const NAME_RE = /^(?!=).*$/g\n","import React from 'react';\nimport \"./RadioButton.scss\";\n\nconst RadioButton = (props) => {\n  const labelRef = React.createRef()\n  const spanClickHandler = () => {\n    if (labelRef.current){\n      labelRef.current.click()\n    }\n  }\n\n  return (\n    <div className={[\"radio d-flex mb-0 \", props.centerText ? \"align-items-center\" : \"align-items-start\"].join(\" \")}>\n      <input\n        type=\"radio\"\n        name={props.name}\n        id={props.id}\n        checked={props.checked ? \"checked\" : \"\"}\n        onChange={props.changeHandler}\n      />\n      <span className=\"radio-checkmark\" onClick={spanClickHandler}/>\n      <div className=\"d-flex flex-column ml-2 \">\n        <label className={[\"mb-0\", props.textClass ? props.textClass : \"\"].join(\" \")}\n               ref={labelRef}\n               for={props.id}>{props.children}{props.display} {props.count ? \"(\" + props.count + \")\" : null}</label>\n        {props.subContent ?\n          <div>\n            {props.subContent}\n          </div>\n          : null}\n      </div>\n    </div>\n  )\n}\n\nexport default RadioButton;","import React from 'react';\nimport \"./CheckBox.scss\";\n\nconst CheckBox = (props) => {\n  return (\n    <label className={[\"checkbox d-flex align-items-center\", props.className ? props.className : \"\"].join(\" \")}>\n      <span className=\"checkbox__input mr-2\">\n        <input\n          type=\"checkbox\"\n          name={props.id}\n          value={props.id}\n          checked={props.checked ? \"checked\" : \"\"}\n          onChange={props.changeHandler}\n        />\n        <span className=\"checkbox__control d-flex justify-content-center align-items-center\">\n          <i className=\"icon-check\"></i>\n        </span>\n      </span>\n      <span className={[\"radio__label text-sm\", props.textClass ? props.textClass : \"\"].join(\" \")}>{props.display} {props.count ? \"(\" + props.count + \")\" : null}</span>\n    </label>\n  )\n}\n\nexport default CheckBox;","import React from \"react\";\nimport \"./Loader.scss\";\n\nconst Loader = () => {\n  return (\n    <div className=\"MA-loader\">\n      <div className=\"MA-spinner spinner-border\" role=\"status\">\n        <span className=\"sr-only\">Loading...</span>\n      </div>\n    </div>\n  )\n}\n\nexport default Loader;","import React, {useState, useEffect} from \"react\";\nimport \"./SelectCategory.scss\";\nimport Modal from \"../modal-component/ModalComponent\";\nimport {GET_CATEGORIES} from \"../../../../api/queries\";\nimport {graphQL} from \"../../../../api/axios\";\nimport Button from \"../button-component/ButtonComponent\";\nimport {useSelector, useDispatch} from \"react-redux\";\nimport {getAllCategories} from \"../../../../utils/commonFunction\";\nimport CheckBox from \"../check-box/CheckBox\";\nimport { setLoader } from \"modules/registry/RegistryActions\";\nimport Loader from \"../loader/Loader\";\n\n// TODO: Change this Component to handle multiple categories\nconst SelectCategory = (props) => {\n\n  const dispatch = useDispatch()\n  const registryInfo = useSelector(state => state.registry.info)\n  const [categories, setCategories] = useState([]);\n  const [searched, setSearched] = useState(false)\n  const [searchedCategories, setSearchedCategories] = useState([]);\n  const [selectedCategory, setSelectedCategory] = useState(props.currentCategory ? props.currentCategory : []);\n  // const [selectedCategory, setSelectedCategory] = useState([]);\n  // let [localLoader, setLocalLoader] = useState(false);\n  let fetchingAPI = false\n  let localLoader = false\n\n  const getCategories = () => {\n    let data = {\n      query: GET_CATEGORIES,\n      variables: {\n        registryId: parseInt(registryInfo.id)\n      },\n    }\n    // dispatch(setLoader(true))\n    // setLocalLoader(true)\n    localLoader = true\n    graphQL(data).then(res => {\n      if (res.data.data.registryCategories) {\n        fetchingAPI = false\n        let resData = getAllCategories(res.data.data.registryCategories, true)\n        let finalCheckList = []\n\n        // For Parent categories\n        for (let category of resData) {\n          if (category.categoryType && Number(category.categoryType.id) === 2) {\n            continue\n          }\n\n          let finalSubCategory = []\n          if (category.subCategories.length) {\n            // For Sub-Categories\n            for (let subCategory of category.subCategories) {\n              let tempSubCategory = []\n              if (subCategory.subProductTypes.length) {\n\n                // For subProductType\n                for (let subProductType of subCategory.subProductTypes) {\n                  subProductType.categoryName = subCategory.categoryName + ' (' + subProductType.categoryName + ')'\n                  tempSubCategory.push(subProductType)\n                }\n              } else {\n                tempSubCategory.push(subCategory)\n              }\n              finalSubCategory.push(...tempSubCategory)\n            }\n            let tempCategory = {...category}\n            tempCategory.subCategories = finalSubCategory\n            finalCheckList.push(tempCategory)\n          }\n        }\n        setCategories(finalCheckList);\n        localLoader = false\n        // dispatch(setLoader(false))\n      }\n    }).catch(err => {\n      localLoader = false\n      // dispatch(setLoader(false))\n      console.error(err.message)\n    })\n  }\n\n  const closeModal = () => {\n    setSelectedCategory(props.currentCategory);\n    props.closeModal(false);\n  }\n\n  const saveSelectedCategory = () => {\n    props.changeCurrentCategory(selectedCategory)\n    props.closeModal(false);\n  }\n\n  const handleSelectionCategory = (category, subCategory) => {\n    subCategory = {\n      ...subCategory,\n      \"mainCategory\": category\n    }\n    let sameCatagory = [...selectedCategory].find(category => subCategory.id === category.id)\n    if (sameCatagory) {\n      let allSelectedCategory = selectedCategory.filter(category => subCategory.id !== category.id)\n      setSelectedCategory(allSelectedCategory)\n    } else {\n      let allSelectedCategory = [...selectedCategory, subCategory]\n      setSelectedCategory(allSelectedCategory)\n    }\n  }\n\n  useEffect(() => {\n    if (props.currentCategory) {\n      setSelectedCategory(props.currentCategory)\n    } else {\n      setSelectedCategory([])\n    }\n  }, [props.currentCategory])\n\n  if (categories.length === 0 && props.showModal) {\n    if (!fetchingAPI) {\n      fetchingAPI = true;\n      getCategories();\n    }\n  }\n\n  const getCategoriesToDisplay = (cat) => {\n    return (\n      <div className=\"col\">\n        {cat.map(category => {\n          return (\n            <div className=\"mb-6\" key={\"select-\" + category.categoryName}>\n              <h4 className=\"parent-category mb-3 font-medium px-2\">{category.categoryName}</h4>\n              <div className=\"category-columns\">\n                {category.subCategories ?\n                  category.subCategories.map(subCategory =>\n                    <div className=\"w-100 category-column\">\n                      <label className=\"checkbox d-flex align-items-center py-1 px-2 m-0\">\n                        <span className=\"checkbox__input mr-2\">\n                          <input\n                            type=\"checkbox\"\n                            name={subCategory.id}\n                            value={subCategory.id}\n                            checked={selectedCategory.find(category => category.id === subCategory.id) ? \"checked\" : \"\"}\n                            onChange={() => handleSelectionCategory(category.categoryName, subCategory)}\n                          />\n                          <span className=\"checkbox__control d-flex justify-content-center align-items-center\">\n                            <i className=\"icon-check\"></i>\n                          </span>\n                        </span>\n                        <span className=\"select_category_radio__label text-body\">{subCategory.categoryName}</span>\n                      </label>\n                    </div>\n                  )\n                  : null}\n              </div>\n\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n\n  const categorySelectBody = (\n    <div className=\"row select-category-body\">\n      {searched ? (searchedCategories.length > 0 ? getCategoriesToDisplay(searchedCategories) : getCategoriesToDisplay([])) : getCategoriesToDisplay(categories)}\n    </div>\n  )\n\n  const modalFooter = (\n    <div className=\"categories-modal-footer\">\n      <label>{selectedCategory.length > 0 ? selectedCategory.length + ' selected' : null}</label>\n      <Button\n        variant=\"primary\"\n        className=\"font-medium p-1\"\n        onClick={saveSelectedCategory}\n      >Done</Button>\n    </div>\n  )\n\n  // Search Category Section\n  const searchInputRef = React.createRef()\n  const changeLinkRef = React.createRef()\n  const searchLinkRef = React.createRef()\n\n  const focusSearchCategoryInput = () => {\n    if (searchInputRef.current) {\n      searchInputRef.current.focus();\n    }\n  }\n\n  const searchInputFocusHandler = (e) => {\n    if (!e.target.classList.contains(\"search-category-input-focus\")) {\n      e.target.classList.add(\"search-category-input-focus\");\n    }\n  }\n\n  const searchInputBlurHandler = (e) => {\n    if (e.target.value.length > 0) {\n      return\n    }\n\n    if (e.target.classList.contains(\"search-category-input-focus\")) {\n      e.target.classList.remove(\"search-category-input-focus\");\n    }\n  }\n\n  const searchCategory = (searchText) => {\n    //  Searching through the category\n    let finalCategories = []\n    for (const parentCategory of categories) {\n      let newParentCategory = {...parentCategory}\n      newParentCategory.subCategories = []\n      let searchMatched = false\n\n      for (const subCategory of parentCategory.subCategories) {\n        if (subCategory.categoryName.toLowerCase().match(searchText.toLowerCase())) {\n          searchMatched = true\n          newParentCategory.subCategories.push(subCategory)\n        }\n      }\n\n      if (searchMatched) {\n        finalCategories.push(newParentCategory)\n        searchMatched = false\n      }\n    }\n    changeLinkRef.current.style.display = \"block\";\n    searchLinkRef.current.style.display = \"none\";\n    setSearchedCategories(finalCategories)\n  }\n\n  const searchCategoryInputChangeHandler = (e) => {\n    // setSearched(true)\n    if (e.target.value.length > 0) {\n      searchLinkRef.current.style.display = \"block\";\n      changeLinkRef.current.style.display = \"none\";\n      // searchCategory(e.target.value)\n    } else {\n      setSearched(false)\n      if (searchInputRef.current) {\n        if (searchInputRef.current.value.length > 0) {\n          searchInputRef.current.value = \"\"\n        }\n        searchLinkRef.current.style.display = \"none\";\n        changeLinkRef.current.style.display = \"none\";\n        searchInputRef.current.focus()\n        setSearchedCategories([])\n      }\n    }\n  }\n\n  const changeLinkClickHandler = (e) => {\n    e.preventDefault();\n    setSearched(false)\n    if (searchInputRef.current) {\n      if (searchInputRef.current.value.length > 0) {\n        searchInputRef.current.value = \"\"\n      }\n      changeLinkRef.current.style.display = \"none\";\n      searchInputRef.current.focus()\n      setSearchedCategories([])\n    }\n  }\n\n  const searchOnEnter = (e) => {\n    e.persist()\n    if (e.keyCode === 13 && searchInputRef.current && searchInputRef.current.value.length > 0){\n      setSearched(true)\n      searchCategory(searchInputRef.current.value)\n    }\n  }\n\n  const searchLinkClickHandler = (e) => {\n    e.preventDefault()\n    if (searchInputRef.current) {\n      setSearched(true)\n      searchCategory(searchInputRef.current.value)\n    }\n  }\n\n  const headerContent = (\n    <div className=\"align-self-center d-flex position-relative select-category-search-section mr-3\">\n      <input\n        type=\"text\"\n        placeholder=\"Search category...\"\n        className=\"search-category-input pl-5 py-1 pr-1 text-body m-0\"\n        ref={searchInputRef}\n        onKeyUp={(e) => searchOnEnter(e)}\n        onChange={(e) => searchCategoryInputChangeHandler(e)}\n        onFocus={(e) => searchInputFocusHandler(e)}\n        onBlur={(e) => searchInputBlurHandler(e)}\n      />\n      <i className=\"icon-search search-category-icon\" onClick={focusSearchCategoryInput}/>\n      <a\n        tabindex='0'\n        className=\"search-category-clear-link text-sm font-medium\"\n        href=\"#\"\n        onClick={(e) => changeLinkClickHandler(e)}\n        ref={changeLinkRef}>Clear all</a>\n      <a\n        tabIndex='0'\n        className=\"search-category-clear-link text-sm font-medium\"\n        href=\"#\"\n        onClick={(e) => searchLinkClickHandler(e)}\n        ref={searchLinkRef}>Search</a>\n    </div>\n  )\n\n  return (\n    <>\n    <Modal\n      show={props.showModal}\n      title=\"Select Category\"\n      footer={modalFooter}\n      headerContent={headerContent}\n      closeModal={closeModal}>\n      {categorySelectBody}\n    </Modal>\n      {localLoader ? <Loader/>: null}\n      </>\n  )\n}\n\nexport default SelectCategory;","import React from 'react';\nimport './TourCard.scss';\n\n\nconst TourCard = (props) => {\n  // { current, content, totalSteps, gotoStep, close }\n\n  let dotsArray = []\n  if (props.totalSteps > 1) {\n    for (let i = 0; i < props.totalSteps; i++) {\n      if (i <= props.current) {\n        dotsArray.push(true)\n      } else {\n        dotsArray.push(false)\n      }\n    }\n  }\n\n  let el = document.getElementById('___reactour');\n  if(el) {\n    let markmain = el.querySelector('[mask=\"url(#mask-main)\"]')\n    if(markmain) {\n      markmain.style.fill = \"#89d6d7\"\n    }\n\n    let mask = document.getElementById('mask-main')\n    if(mask) {\n      let rect = mask.querySelector(\"rect[fill='black']\")\n      rect.style.stroke = \"#89d6d7\"\n      rect.style.strokeWidth= \"12px\"\n    }\n\n    let bgDivEl = document.querySelector('.kWwJhA');\n    if(bgDivEl) {\n      bgDivEl.style.color = \"#fff\";\n      bgDivEl.style.opacity = \"0.8\";\n    }\n  }\n\n  return (\n    <div className=\"p-4 p-lg-6 tour-card\">\n      <div className=\"d-none d-lg-flex mb-2\">\n        {/* {[...dotsArray].map((dotsData, index) =>\n          // <div className={['tour-card-dots', dotsData ? 'visited' : ''].join(\" \")}>\n          // </div>\n          <div\n            className={['mr-1 text-sm tour-card-number', index === props.current ? 'font-medium' : ''].join(\" \")}\n            onClick={() => props.gotoStep(index)}\n          >\n            {index + 1}</div>\n        )} */}\n        <div className=\"tour-card-number text-sm\">{props.current + 1}/{props.totalSteps}</div>\n      </div>\n      {props.content}\n      <div\n        className=\"mt-3 mt-lg-4 py-1 px-3 tour-card-btn font-medium\"\n        onClick={() => props.current === Number(props.totalSteps - 1) ? props.close() : props.gotoStep(props.current + 1)}\n      >\n        {props.totalSteps === 1 ? 'Ok, Got It!' : props.current === Number(props.totalSteps - 1) ? \"Lets Get Started\" : \"Next\"}\n      </div>\n    </div>\n  )\n}\n\nexport default TourCard;\n\n","import React from \"react\";\nimport Modal from \"../modal-component/ModalComponent\";\nimport Counter from \"../counter/Counter\";\nimport Button from \"../button-component/ButtonComponent\";\nimport './VariantsModal.scss'\nimport TogglePills from \"../add-gift/toggle-pills/TogglePills\";\nimport CategoryPills from \"../edit-gift/category-pill/CategoryPill\";\nimport {SETTINGS_LINKS} from \"../../../../utils/constants\";\nimport RadioButton from \"../../components/radio-button/RadioButton\";\nimport SelectCategory from \"../select-category/SelectCategory\";\nimport {connect} from \"react-redux\";\nimport Tour from 'reactour';\nimport TourCard from 'modules/commons/components/tour-card/TourCard';\nimport {MUST_HAVE_STEPS, GROUP_GIFT_STEPS} from 'utils/constants';\nimport {updateMushHaveTourFlag, updateGroupGiftTourFlag} from 'utils/commonFunction';\nimport {ROUTES} from 'utils/cdn-assets-links';\nimport {Tooltip} from \"react-bootstrap\";\nimport OverlayTrigger from \"react-bootstrap/OverlayTrigger\";\nimport {\n  productImageLoadErrorHandler,\n  productImageLoadHandler,\n  onVariantImgLoadErrorHandler,\n  isInputTextValid\n} from \"../../../../utils/commonFunction\";\n\nclass VariantsModal extends React.Component {\n\n  state = {\n    mustHave: false,\n    groupedGift: false,\n    productTitle: \"\",\n    productLink: \"\",\n    tempStoreItemUrl: \"\",\n    storeUrlInputHasFocus: false,\n    productPrice: \"\",\n    howToGift: {},\n    isCashAccepted: false,\n    showCategoryModal: false,\n    productCategories: [],\n    learnMoreCashAccept: false,\n    showLearnMore: false,\n    closeTempModal: false,\n    isTourOpen: false,\n    isMustHaveTour: false,\n    isGroupGiftTour: false,\n    steps: [],\n    giftNote: null,\n  }\n  productUrlRef = React.createRef()\n\n  componentDidMount() {\n    // states only used for non-ma products\n    let currentCategory = []\n    if (this.props.data.itemRecommendationCategoryItemRecommendation.length) {\n      for (let category of [...this.props.data.itemRecommendationCategoryItemRecommendation]) {\n        currentCategory.push(this.getRefinedCategory(category))\n      }\n    } else if (currentCategory.length === 0 && this.props.data.category) {\n      currentCategory.push(this.getRefinedCategory(this.props.data.category))\n    }\n\n    this.setState({\n      productTitle: this.props.data.title,\n      tempStoreItemUrl: this.props.data.storeUrl,\n      productPrice: this.props.data.price,\n      isCashAccepted: this.props.data.isMaItem ? false : true,\n      howToGift: this.howToGiftOptions[0],\n      productCategories: [...currentCategory]\n    })\n  }\n\n  //change product name\n  productNameChangeHandler = (e) => {\n    if (!isInputTextValid(e)) {\n      return;\n    }\n    this.setState({\n      productTitle: e.target.value\n    })\n  }\n\n  //change product Url\n  productStoreUrlChangeHandler = (e) => {\n    this.setState({\n      tempStoreItemUrl: e.target.value\n    })\n  }\n\n  // Change product Note\n  productNoteChangeHandler = (e) => {\n    if (!isInputTextValid(e)) {\n      return;\n    }\n    this.setState({\n      giftNote: e.target.value\n    })\n    this.props.setGiftNote(e.target.value)\n  }\n\n  resetStoreItemUrlClickHandler = inputRef => {\n    this.setState((prevState, _) => ({\n      tempStoreItemUrl: prevState.storeItemUrl\n    }))\n    if (inputRef.current) {\n      inputRef.current.disabled = true;\n      inputRef.current.blur();\n    }\n  }\n\n  confirmStoreItemUrlClickHandler = inputRef => {\n    this.setState((prevState, _) => ({\n      storeItemUrl: prevState.tempStoreItemUrl\n    }))\n    if (inputRef.current) {\n      inputRef.current.disabled = true;\n      inputRef.current.blur();\n    }\n  }\n\n  variantModalCloseHandler(ev) {\n    ev.preventDefault();\n    this.props.closeModal();\n  }\n\n  storeUrlChangeClickHandler = (e, inputRef) => {\n    e.preventDefault();\n    if (inputRef.current) {\n      inputRef.current.disabled = false;\n      inputRef.current.focus();\n    }\n  }\n\n  //navigate to another store link\n  anotherStoreItemViewDetail(link) {\n    window.open(link, \"_blank\")\n  }\n\n  storeItemUrlBlurHandler = e => {\n    e.preventDefault();\n    setTimeout(() => {\n      this.setState({\n        storeUrlInputHasFocus: false\n      })\n    }, 100)\n    e.target.disabled = true;\n  }\n\n  //function for must have\n  async productMustHave() {\n    await this.props.mostWanted();\n    await this.setState((prevState, _) => ({mustHave: !prevState.mustHave}))\n    if (!this.props.stateRegistryInfo.isMustHaveApplied) {\n      let steps = {...MUST_HAVE_STEPS}\n      steps[0].selector = '[data-tut=\"must-have-tour\"]';\n      steps.length = 1;\n      this.setState({\n        isMustHaveTour: true,\n        steps: steps,\n        isTourOpen: true\n      })\n    }\n  }\n\n  //function for grouped gift\n  async productGroupedGift() {\n    await this.props.groupedGift();\n    await this.setState((prevState, _) => ({groupedGift: !prevState.groupedGift}))\n    if (!this.props.stateRegistryInfo.isGroupGiftApplied) {\n      let steps = {...GROUP_GIFT_STEPS}\n      steps[0].selector = '[data-tut=\"group-gift-tour\"]';\n      steps.length = 1;\n      this.setState({\n        isGroupGiftTour: true,\n        steps: steps,\n        isTourOpen: true\n      })\n    }\n  }\n\n  //price change handler\n  productPriceChangeHandler = (ev) => {\n    if ((ev.target.value.length > 0 && (Number(ev.target.value[ev.target.value.length - 1]) >= 0 || ev.target.value[ev.target.value.length - 1] === \".\")) && ev.target.value.match(this.PRICE_REGEX_WHILE_ENTERING) || ev.target.value.length <= 0) {\n      this.setState({\n        productPrice: ev.target.value\n      })\n    }\n  }\n\n  //how to gift options\n  howToGiftOptions = [\n    {\n      id: 1,\n      text: \"Get cash equivalent for this gift\",\n      content: (\n        <div>\n          <p className=\"text-body\">Get cash equivalent for this gift</p>\n          <p className=\"text-sm mt-1\">Choose this option for the best purchase experience.</p>\n        </div>\n      ),\n      subContent: (\n        <div>\n          {this.props.stateRegistryInfo?.user?.bankAccounts.length <= 0 ?\n            <a className=\"text-sm edit-gift-links mt-1 mr-3\" href={SETTINGS_LINKS.BANK_ACCOUNT}>Add bank details</a>\n            : null}\n          <a className=\"text-sm edit-gift-links mt-1\" href=\"#\"\n             onClick={(ev) => this.learnMoreLinkClickHandler(ev, true)}>Learn More</a>\n        </div>\n      ),\n      learnMoreContent: (\n        <>\n          <p className=\"text-body edit-gift-learn-more-modal-text mt-3\">When you choose this option, the money for\n            the gift (including shipping) will be transferred to your\n            bank account.</p>\n\n          <p className=\"text-body edit-gift-learn-more-modal-text mt-4\">When the time is right for you, youll click\n            through to order directly from the website and have it\n            delivered to your home.</p>\n\n          <p className=\"text-body edit-gift-learn-more-modal-text mt-4\">This helps decrease the number of duplicate\n            gifts, keeps your returns to a minimum, and gives you control\n            over when you receive the gift.</p>\n\n          <p className=\"text-body edit-gift-learn-more-modal-text mt-4\"><a href={SETTINGS_LINKS.BANK_ACCOUNT}\n                                                                           target=\"_blank\"\n                                                                           className=\"edit-gift-links\">Connect your\n            bank account to your profile,</a> if you havent already.</p>\n        </>\n      )\n    },\n    {\n      id: 2,\n      text: \"Send your guests to the stores website to purchase and ship now.\",\n      content: (\n        <div>\n          <p className=\"text-body\">Send your guests to the stores website to purchase and ship now.</p>\n        </div>\n      ),\n      subContent: (\n        <a className=\"text-sm edit-gift-links mt-1\" href=\"#\"\n           onClick={(ev) => this.learnMoreLinkClickHandler(ev, false)}>Learn More</a>\n      ),\n      learnMoreContent: (\n        <p className=\"text-body edit-gift-learn-more-modal-text mt-1\">Please note, M+A is unable to accept returns\n          or manage shipping when you choose this option.</p>\n      )\n    }\n  ]\n\n  //change how to gift handler\n  changeHowToGift = option => {\n    this.setState({\n      howToGift: {...option}\n    })\n  }\n\n  //adding product to registry\n  addTheProduct = async () => {\n    if (!this.props.data.isMaItem) {\n      if (this.state.howToGift.id) {\n        this.state.isCashAccepted = this.state.howToGift.id === 1\n      }\n      let categories = [];\n      if (this.state.productCategories.length) {\n        this.state.productCategories.map(cat => {\n          categories.push(Number(cat.id))\n        })\n      }\n\n      await this.props.productDataUpdate({\n        ...this.props.data,\n        hasMultiCategories: true,\n        categories: categories.length > 0 ? categories : null,\n        title: this.state.productTitle,\n        storeItemUrl: this.state.tempStoreItemUrl,\n        price: this.state.productPrice,\n        storeUrl: this.state.tempStoreItemUrl,\n        isCashAcceptedOnly: this.state.isCashAccepted,\n      })\n    }\n    this.props.addProductHandler()\n  }\n\n  openSelectCategoryModal = (e) => {\n    e.preventDefault()\n    this.setState({\n      showCategoryModal: true\n    })\n  }\n\n  closeCategoryModal = (value) => {\n    this.setState({\n      showCategoryModal: value\n    })\n  }\n\n  setCategory = categories => {\n    this.setState({\n      productCategories: [...categories]\n    })\n  }\n\n  getRefinedCategory = (category) => {\n    let refinedCategory = null;\n    for (let parentCategory of [...this.props.stateAllCategories]) {\n      let newParentCategory = {...parentCategory}\n      newParentCategory.subCategories = []\n      for (let subCategory of parentCategory.subCategories) {\n        let newSubCategory = {...subCategory}\n        let catToPush = []\n        if (newSubCategory.subProductTypes && newSubCategory.subProductTypes.length > 0) {\n          catToPush = newSubCategory.subProductTypes.map(subCat => {\n            let newSubCat = {...subCat}\n            newSubCat.categoryName = newSubCategory.categoryName + \" (\" + newSubCat.categoryName + \")\";\n            return newSubCat;\n          })\n        }\n        delete newSubCategory.subProductTypes\n        catToPush.unshift(newSubCategory)\n        newParentCategory.subCategories.push(...catToPush)\n      }\n      let foundCategory = newParentCategory.subCategories.filter(subCat => subCat.id === category.id);\n      if (foundCategory.length === 1) {\n        refinedCategory = {\n          ...foundCategory[0],\n          mainCategory: parentCategory.categoryName,\n          displayName: parentCategory.categoryName + \": \" + foundCategory[0].categoryName\n        }\n        break\n      }\n    }\n\n    return refinedCategory;\n  }\n\n  learnMoreLinkClickHandler = (ev, cashAcceptedLearnMore) => {\n    ev.preventDefault()\n    ev.stopPropagation()\n\n    this.setState({\n      learnMoreCashAccept: cashAcceptedLearnMore,\n      showLearnMore: true,\n      closeTempModal: true\n    })\n  }\n\n  closeLearnMoreModalHandler = () => {\n    this.setState({\n      closeTempModal: false,\n      showLearnMore: false\n    })\n  }\n\n  handleVariantChange = async (variant) => {\n    let activeSizeVariantId = this.props.activeVariant.activeSizeVariant.id\n    await this.props.setActiveRecommandationVariantHandler(variant)\n    if (this.props.activeVariant && this.props.activeVariant.activeSizeVariant && this.props.activeVariant.activeSizeVariant.size) {\n      await this.props.getAllVarient()\n      await this.props.setActiveVariantSize(activeSizeVariantId)\n    }\n  }\n\n  // For Tour\n  closeTour = () => {\n    // For must-have\n    if (this.state.isMustHaveTour && !this.state.isGroupGiftTour) {\n      this.setState({isMustHaveTour: false})\n      updateMushHaveTourFlag(this.props.stateRegistryInfo, this.props.dispatch)\n    }\n\n    // For Group Gift\n    if (!this.state.isMustHaveTour && this.state.isGroupGiftTour) {\n      this.setState({isGroupGiftTour: false})\n      updateGroupGiftTourFlag(this.props.stateRegistryInfo, this.props.dispatch)\n    }\n\n    this.setState({\n      isTourOpen: false\n    })\n  }\n\n  render() {\n    const modalFooter = (\n      <>\n        <Button\n          variant=\"secondary\"\n          className=\"px-3 py-1 font-weight-bold font-medium text-body\"\n          onClick={() => this.anotherStoreItemViewDetail(this.props.data.storeUrl)}\n        >View Details</Button>\n        <Button\n          variant=\"primary\"\n          className=\"px-4 py-1 font-weight-bold font-medium text-body\"\n          onClick={this.addTheProduct}\n        >Add & Close</Button>\n      </>\n    )\n    return (\n      <>\n        <Modal\n          show={this.props.show}\n          title=\"Add item\"\n          noBodyPadding={true}\n          footer={modalFooter}\n          modalClassName={this.state.closeTempModal ? \"d-none\" : \"d-block\"}\n          closeModal={(ev) => this.variantModalCloseHandler(ev)}\n        >\n          <div className=\"row variant-product-content\">\n            <div className=\"col-12 col-md-5 pr-3 pt-4 variant-product-image-container\">\n              <div className=\"pb-5 image w-100\">\n                <img className=\"mx-auto variant-product-image\"\n                     src={this.props.data.activeVariant === null ? this.props.data.imageUrl : this.props.data.activeVariant.imageUrl}\n                     onError={(ev) => productImageLoadErrorHandler(ev)}\n                     onLoad={(ev) => productImageLoadHandler(ev)}\n                />\n              </div>\n              <div className=\"product-sub-text-heading mt-3 text-sm font-medium\">\n                <span>M+A Approved</span>\n              </div>\n\n              <div className=\"product-sub-text-description text-sm text-sm\">\n                <span>{this.props.data.description}\n                  {/* TODO: Uncomment this if needed */}\n                  {/* <a\n                  href={this.props.data.storeUrl}\n                  className=\"read-more\"\n                  tabindex=\"0\"\n                  target=\"_blank\">Read more</a> */}\n                </span>\n              </div>\n            </div>\n            <div className=\"col-12 col-md-7 variant-product-detail variant-modal-border-left h-100 pt-4 pl-md-5 pl-md-0 mt-3 mt-md-0\">\n              {this.props.data.isMaItem ?\n                <label className=\"w-100 mw-100 h2 edit-gift-resize-none mb-7\">{this.props.data.title}</label>\n                :\n                <div className=\"recommend-product-input-container\">\n                  <p className=\"recommend-product-input-label text-sm font-medium mb-1\">Product Name</p>\n                  <textarea\n                    rows={2}\n                    className=\"w-100 mw-100 recommend-product-input h2 p-2 edit-gift-resize-none\"\n                    value={this.state.productTitle}\n                    onChange={(e) => this.productNameChangeHandler(e)}\n                  />\n                </div>\n              }\n\n\n              {this.props.data.isMaItem ?\n                null\n                : <div className=\"row my-5 \">\n                  <div className=\"col\">\n                    {/* When store is not M&A */}\n                    <div className=\"recommend-product-input-container\">\n                      <p className=\"recommend-product-input-label text-sm font-medium mb-1\">Store</p>\n                      <div className=\"position-relative\">\n                        <input\n                          className=\"w-100 mw-100 recommend-product-input text-body py-1 pl-2 pr-14\"\n                          value={this.state.tempStoreItemUrl}\n                          ref={this.productUrlRef}\n                          disabled={true}\n                          onFocus={() => this.setState({storeUrlInputHasFocus: true})}\n                          onBlur={(e) => this.storeItemUrlBlurHandler(e)}\n                          onChange={(e) => this.productStoreUrlChangeHandler(e)}\n                        />\n                        {!this.state.storeUrlInputHasFocus ?\n                          <a className=\"recommned-product-input-change-url edit-gift-links font-medium text-sm\" href=\"#\"\n                             onClick={(e) => this.storeUrlChangeClickHandler(e, this.productUrlRef)}>Change</a>\n                          :\n                          <div className=\"recommned-product-store-url-submit\">\n                            {/*TODO: Change icons once added to global icons*/}\n                            <button className=\"url_edit_icons_cancel mr-3\"\n                                    onClick={() => this.resetStoreItemUrlClickHandler(this.productUrlRef)}/>\n                            <button className=\"url_edit_icons_check\"\n                                    onClick={() => this.confirmStoreItemUrlClickHandler(this.productUrlRef)}/>\n                          </div>\n                        }\n\n                      </div>\n                    </div>\n                  </div>\n                </div>}\n              <div className=\"row mb-6\">\n                <div className=\"col-6\">\n                  <div className=\"text-sm font-medium\">Price</div>\n                  {this.props.data.isMaItem ?\n                    <div className=\"product-price  d-flex\">\n                      <h5>{this.props.activeVariant ? '$' + this.props.activeVariant.price : '$' + this.props.data.price}</h5>\n                      {this.props.data.strikedPrice ?\n                        <span className=\"strike-price ml-1\">{this.props.data.strikedPrice}</span> : null}\n                    </div> :\n                    <div className=\"recommned-product-input-overlay recommend-product-input-container\">\n                      <input\n                        type=\"text\"\n                        className=\"w-100 mw-100 recommend-product-input py-1 text-body pl-5\"\n                        value={this.state.productPrice}\n                        onChange={(e) => this.productPriceChangeHandler(e)}/>\n                      <span className=\"text-body recommned-price-currency\">$</span>\n                    </div>\n                  }\n                </div>\n                <div className=\"col-6\">\n                  <div className=\"text-sm font-medium mb-1\">Quantity</div>\n                  <Counter\n                    counter={this.props.data.quantity}\n                    type='square'\n                    incrementHandler={this.props.incrementQuantityHandler}\n                    decrementHandler={this.props.decrementQuantityHandler}/>\n                </div>\n              </div>\n\n              {this.props.data.maItemVariantItemRecommendation.length > 0 ?\n                <>\n                  <div className=\"text-sm font-medium mb-1\">Colors</div>\n                  <div className=\"d-flex flex-wrap mb-5\">\n                    {this.props.data.maItemVariantItemRecommendation.map(variant =>\n                      <OverlayTrigger\n                        placement=\"top\"\n                        overlay={(props) => (\n                          variant.pattern ?\n                            <Tooltip\n                              id={\"v\" + variant.variantId + `${Math.random() * 1000}`} {...props}>{variant.pattern}</Tooltip>\n                            : <div {...props}/>\n                        )}\n                      >\n                        <div\n                          className={[\n                            \"mr-1 mb-1 product-variant-circle-disk\",\n                            variant.isAvailable ? 'product-variant-avalible' : 'product-variant-disabled',\n                            (this.props.data.activeVariant && this.props.data.activeVariant.variantId === variant.variantId) ? \"active-variant-product\" : \"\"\n                          ].join(\" \")}\n                          key={variant.variantId + ':' + variant.sku}\n                          onClick={variant.isAvailable ? () => this.handleVariantChange(variant) : () => {\n                          }}\n                        >\n                          <img\n                            className=\"product-variant-image\"\n                            src={variant.iconUrl ? variant.iconUrl : variant.imageUrl}\n                            alt={variant.pattern}\n                            onError={(ev) => onVariantImgLoadErrorHandler(ev, variant.imageUrl)}/>\n                        </div>\n                      </OverlayTrigger>\n                    )}\n                  </div>\n                  {this.props.activeVariant?.activeSizeVariant?.size ?\n                    <>\n                      <div className=\"text-sm font-medium\">Size</div>\n                      <div className=\"mb-5 variant-size-section\">\n                        {[...this.props.activeVariant.allSizeVariant].map(variant =>\n                          <div\n                            className={[\"py-1 px-2 mt-1 mr-1 size-section-pill\", this.props.activeVariant.activeSizeVariant.variantId === variant.variantId ? \"active-size-variant\" : \"\"].join(\" \")}\n                            key={'variant-' + variant.id}\n                            onClick={() => this.props.setActiveVariantSize(variant.id)}>\n                            {variant.size}\n                          </div>\n                        )}\n                      </div>\n                    </> : null}\n                </> : null}\n\n              <div className=\"mb-5\">\n                <div className=\"text-sm font-medium mb-1 d-flex\">Category\n                  {!(this.props.data.isMaItem || this.props.data.isBundleProduct) ?\n                    <a href=\"#\" className=\"edit-gift-links font-medium text-sm ml-2\"\n                       onClick={(e) => this.openSelectCategoryModal(e)}>Add</a>\n                    : null}\n                </div>\n                {this.state.productCategories.map(category => {\n                  return <CategoryPills text={`${category.mainCategory} : ${category.categoryName}`}\n                                        className=\"mt-1 mr-1\"\n                                        key={'cat' + category.id}/>\n                })}\n              </div>\n              <div className=\"mb-5 d-flex\">\n                <TogglePills\n                  dataTut=\"must-have-tour\"\n                  iconClass=\"custom-icon-heart\"\n                  activeClass={this.state.mustHave ? 'add-product-active-must-have custom-icon-heart-filled' : null}\n                  onClick={() => this.productMustHave()}\n                  text=\"Must Have\"\n                  className=\"mr-2\"/>\n                <TogglePills\n                  dataTut=\"group-gift-tour\"\n                  iconClass=\"custom-icon-group-gift\"\n                  activeClass={this.state.groupedGift ? 'add-product-active-group-gift custom-icon-group-gift-filled' : null}\n                  onClick={() => this.productGroupedGift()}\n                  text=\"Group Gift\"\n                  className=\"mr-2\"/>\n              </div>\n\n              {this.props.data.isMaItem ? null :\n                <div className=\"row mt-5\">\n                  <div className=\"col\">\n                    <div className=\"recommend-product-input-container\">\n                      <p className=\"recommend-product-input-label text-sm font-medium\">How to gift?</p>\n                      {this.howToGiftOptions.map((option, index) => (\n                        <div className={[index === 0 ? \"mt-1\" : \"mt-2\"].join(\" \")}\n                             key={\"how-to-gift-option-\" + option.id}>\n                          <RadioButton\n                            name=\"how-to-gift\"\n                            id={`variant-modal-how-to-gift-${index}`}\n                            subContent={option.subContent}\n                            checked={option.id === this.state.howToGift.id ? true : null}\n                            changeHandler={() => this.changeHowToGift(option)}>{option.content}</RadioButton>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n              }\n              <div className=\"row mt-5 mb-3\">\n                <div className=\"col\">\n                  <div className=\"recommend-product-input-container\">\n                    <p className=\"recommend-product-input-label text-sm font-medium mb-1\">Notes</p>\n                    <textarea\n                      rows={2}\n                      className=\"w-100 mw-100 recommend-product-input text-body p-2\"\n                      placeholder=\"Write a note for your friends and family\"\n                      value={this.state.giftNote}\n                      onChange={(e) => this.productNoteChangeHandler(e)}\n                    />\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </Modal>\n        {this.state.showCategoryModal ?\n          <SelectCategory\n            showModal={this.state.showCategoryModal}\n            closeModal={this.closeCategoryModal}\n            currentCategory={this.state.productCategories ? [...this.state.productCategories] : []}\n            changeCurrentCategory={this.setCategory}\n          />\n          : null}\n        {this.state.showLearnMore ?\n          <Modal\n            show={this.state.showLearnMore}\n            title={this.state.learnMoreCashAccept ? this.howToGiftOptions[0].text : this.howToGiftOptions[1].text}\n            size=\"md\"\n            closeIconClass=\"mb-auto\"\n            footer={(\n              <Button variant=\"primary\" className=\"px-6 py-1\" onClick={this.closeLearnMoreModalHandler}>Ok, got\n                it!</Button>\n            )}\n            closeModal={this.closeLearnMoreModalHandler}>\n            {this.state.learnMoreCashAccept ? this.howToGiftOptions[0].learnMoreContent : this.howToGiftOptions[1].learnMoreContent}\n          </Modal> : null}\n\n        {this.state.isTourOpen ?\n          <Tour\n            highlightedMaskClassName='tour-bg'\n            steps={this.state.steps}\n            isOpen={this.state.isTourOpen}\n            CustomHelper={TourCard}\n            onRequestClose={this.closeTour}/>\n          : null}\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  stateCategories: state.myRegistry.checkList,\n  stateAllCategories: state.myRegistry.allCheckList,\n  stateRegistryInfo: state.registry.info\n})\n\nexport default connect(\n  mapStateToProps\n)(VariantsModal);\n","import React, {useState, useEffect} from 'react';\nimport \"./CardItem.scss\";\nimport Counter from \"modules/commons/components/counter/Counter\";\nimport VariantsModal from \"../variants-modal/VariantsModal\";\nimport {Dropdown} from 'reactjs-dropdown-component';\nimport {ROUTES} from 'utils/cdn-assets-links';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger'\nimport {Tooltip} from \"react-bootstrap\";\nimport {productImageLoadErrorHandler, productImageLoadHandler, onVariantImgLoadErrorHandler} from \"../../../../utils/commonFunction\";\n\nconst RenderTooltip = props => {\n  console.log({...props})\n  return <Tooltip {...props}>{props.text}</Tooltip>\n}\n\nconst CardItem = (props) => {\n  const [openModal, setOpenModal] = useState(false);\n  const [productMostWanted, setProductMostWanted] = useState(false);\n  const [productGroupedGift, setProductGroupedGift] = useState(false);\n  const [currentRecommendProduct, setCurrentRecommendProduct] = useState(props.data)\n  const [giftNote, setGiftNote] = useState(null);\n\n  // useEffect(() => {\n  // \tif (openModal) {\n  // \t\tsetTimeout(() => {\n  // \t\t\tdocument.body.style.overflow = openModal ? 'hidden' : 'unset';\n  // \t\t}, 1000);\n  // \t}\n  // \telse {\n  // \t\tdocument.body.style.overflow = 'unset';\n  // \t}\n  // }, [openModal]);\n\n  const onCardClick = () => {\n    if (props.activeVariant && props.activeVariant.activeSizeVariant && props.activeVariant.activeSizeVariant.size) {\n      props.getAllVarient()\n    }\n    setOpenModal(true);\n  }\n\n  const setMostWanted = async () => {\n    await setProductMostWanted(!productMostWanted)\n  }\n\n  const setGroupedGift = async () => {\n    await setProductGroupedGift(!productGroupedGift)\n  }\n\n  const closeCardModal = () => {\n    setOpenModal(false);\n  }\n\n  const productDataUpdate = (data) => {\n    setCurrentRecommendProduct(data)\n  }\n\n  const addProductToRegistry = async () => {\n    let data = {}\n    if (props.data.isMaItem) {\n      data = {\n        ...props.data,\n        giftNote: giftNote,\n        mostWanted: productMostWanted ? productMostWanted : false,\n        isGroupGift: productGroupedGift ? productGroupedGift : false,\n        isCashAcceptedOnly: false\n      }\n    } else {\n      data = {\n        ...currentRecommendProduct,\n        giftNote: giftNote,\n        mostWanted: productMostWanted ? productMostWanted : false,\n        isGroupGift: productGroupedGift ? productGroupedGift : false,\n      }\n    }\n    await props.addProductHandler(data)\n    setOpenModal(false)\n  }\n\n  const resetThenSet = (id, key) => {\n    props.setActiveVariantSize(id)\n  }\n\n  return (\n    <>\n      {!props.data.isMaItem || (props.data.isMaItem && props.data.maItemVariantItemRecommendation.length > 0) ?\n        <>\n          <div className={[\"card-item\", props.className ? props.className : \"\"].join(\" \")}>\n            <div className=\"product-image text-center pointer px-2 pt-2\" onClick={() => onCardClick()}>\n              <img className=\"mx-auto\"\n                   loading=\"lazy\"\n                   src={props.activeVariant ? props.activeVariant.imageUrl : props.data.imageUrl}\n                   onError={(ev) => productImageLoadErrorHandler(ev)}\n                   onLoad={(ev) => productImageLoadHandler(ev)}\n                   alt={props.data.title}/>\n            </div>\n            <div className=\"product-bottom mt-3 px-2 pb-2\">\n              <div className=\"product-head-height\">\n                <div\n                  className={props.onCardClick ? \"product-title font-medium text-body pointer\" : \"product-title font-medium text-body\"}\n                  onClick={() => onCardClick()}>\n                  {props.data.title}\n                </div>\n                <p className={[\"mt-1 text-sm product-description\", props.onCardClick ? \"pointer\" : \"\"].join(\" \")}\n                   onClick={() => onCardClick()}>\n                  {props.data.description ?\n                    <>\n                      <span className=\"product-sub-text-heading font-medium\">M+A Approved  </span>\n                      {props.data.description}\n                    </>\n                    : null}\n                </p>\n              </div>\n\n              {/* <div className={props.onCardClick ? \"product-sub-text-heading mt-3 text-sm font-medium pointer\" : \"product-sub-text-heading mt-3 text-sm font-medium\"} onClick={() => onCardClick()} >\n\t\t\t\t\t\t\t\t<span>Why we love it?</span>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className={props.onCardClick ? \"product-sub-text-description text-sm text-sm pointer\" : \"product-sub-text-description text-sm text-sm\"} onClick={() => onCardClick()} >\n\t\t\t\t\t\t\t\t<span>{props.data.description} <a href={props.data.storeUrl} className=\"read-more\" tabIndex=\"0\" rel=\"noopener noreferrer\" target=\"_blank\">Read more</a></span>\n\t\t\t\t\t\t\t</div> */}\n              <div>\n                <div className=\"product-price d-flex align-items-end mt-3\">\n                  {/* <h5>{props.data.price ? '$ ' + props.data.price : (props.data.isMaItem && props.data.maItemVariantItemRecommendation.length) ? '$ ' + props.data.maItemVariantItemRecommendation[0].price : null}</h5> */}\n                  <h5>{props.activeVariant?.activeSizeVariant ? '$' + props.activeVariant?.activeSizeVariant.price : '$' + props.data.price}</h5>\n                  {(props.activeVariant?.activeSizeVariant && props.activeVariant?.activeSizeVariant.compareAtPrice) || props.data.compareAtPrice ?\n                    <span className=\"strike-price ml-1\">{props.activeVariant?.activeSizeVariant ? '$' + props.activeVariant?.activeSizeVariant.compareAtPrice : '$' + props.data.compareAtPrice}</span> : null}\n                </div>\n                <div className=\"d-flex align-items-center mt-3\">\n                  <Counter\n                    counter={props.data.quantity}\n                    type='square'\n                    incrementHandler={props.incrementQuantityHandler}\n                    decrementHandler={props.decrementQuantityHandler}/>\n                  <button className=\"add-btn ml-auto\" onClick={() => props.addProductHandler(props.data)}/>\n                </div>\n                {props.data.maItemVariantItemRecommendation.length ?\n                  <div className=\"mt-3 product-variant\">\n                    <div className=\"mt-3\">\n                      <p className=\"font-medium product-variant-text\">Color</p>\n                      <div className=\"d-flex flex-wrap\">\n                        {props.data.maItemVariantItemRecommendation.map(variant =>\n                          <OverlayTrigger\n                            placement=\"top\"\n                            overlay={(props) => (\n                              variant.pattern ?\n                                <Tooltip\n                                  id={variant.variantId + `${Math.random() * 1000}`} {...props}>{variant.pattern}</Tooltip>\n                                : <div {...props}/>\n                            )}\n                          >\n                            <div\n                              className={\n                                [\"mr-1 mb-1 product-variant-circle-disk\",\n                                  variant.isAvailable ? 'product-variant-avalible' : 'product-variant-disabled',\n                                  (props.activeVariant && props.activeVariant.variantId === variant.variantId) ? \"active-variant-product\" : \"\"\n                                ].join(\" \")}\n                              key={variant.variantId + ':' + variant.sku}\n                              onClick={variant.isAvailable ? () => props.setActiveRecommandationVariantHandler(variant) : () => {\n                              }}\n                            >\n                              <img className=\"product-variant-image\"\n                                   loading=\"lazy\"\n                                   src={variant.iconUrl ? variant.iconUrl : variant.imageUrl}\n                                   onError={(ev) => onVariantImgLoadErrorHandler(ev, variant.imageUrl)}\n                                   alt={variant.pattern}/>\n                            </div>\n                          </OverlayTrigger>\n                        )}\n                      </div>\n                      {props.activeVariant?.activeSizeVariant?.size ?\n                        <div className=\"mt-2 size-section\" onClick={props.getAllVarient}>\n                          <Dropdown\n                            title=\"Size\"\n                            list={props.activeVariant.allSizeVariant}\n                            resetThenSet={resetThenSet}\n                            value={props.activeVariant.activeSizeVariant.size}\n                          />\n                        </div> : null}\n                    </div>\n                  </div> : null}\n              </div>\n            </div>\n          </div>\n          {openModal ?\n            <VariantsModal\n              show={openModal}\n              data={props.data}\n              productDataUpdate={(data) => productDataUpdate(data)}\n              closeModal={() => closeCardModal()}\n              getAllVarient={() => props.getAllVarient()}\n              activeVariant={props.activeVariant}\n              incrementQuantityHandler={props.incrementQuantityHandler}\n              decrementQuantityHandler={props.decrementQuantityHandler}\n              addProductHandler={() => addProductToRegistry()}\n              mostWanted={() => setMostWanted()}\n              groupedGift={() => setGroupedGift()}\n              setGiftNote={(note) => setGiftNote(note)}\n              setActiveVariantSize={(id) => props.setActiveVariantSize(id)}\n              setActiveRecommandationVariantHandler={(variant) => props.setActiveRecommandationVariantHandler(variant)}\n            /> : null}\n        </> : null}\n    </>\n  )\n}\n\nexport default CardItem;","import React from \"react\";\nimport Button from \"../button-component/ButtonComponent\";\nimport Modal from \"../modal-component/ModalComponent\";\n\nconst ConfirmUrlChangeModal = ({show, closeModalHandler, confirmClickHandler}) => {\n  return (\n    <Modal\n      show={show}\n      size=\"md\"\n      closeIconClass=\"mb-auto\"\n      noFullSizeMobile={true}\n      footer={(\n        <>\n          <Button variant=\"secondary\" className=\"px-6 py-1\" onClick={closeModalHandler}>No,\n            cancel</Button>\n          <Button variant=\"primary\" className=\"px-6 py-1\" onClick={confirmClickHandler}>Yes, change</Button>\n        </>\n      )}\n      closeModal={closeModalHandler}>\n      You may lose the items on this screen. Are you sure you want to change?\n    </Modal>\n  )\n}\n\nexport default ConfirmUrlChangeModal;","import React from \"react\";\nimport \"./EditGift.scss\";\nimport Modal from \"../modal-component/ModalComponent\";\nimport {toast} from \"react-toastify\";\nimport Counter from \"../counter/Counter\";\nimport {connect} from \"react-redux\";\nimport SelectCategory from \"../select-category/SelectCategory\";\nimport CategoryPill from \"./category-pill/CategoryPill\";\nimport TogglePills from \"../add-gift/toggle-pills/TogglePills\";\nimport RadioButton from \"../radio-button/RadioButton\";\nimport Button from \"../button-component/ButtonComponent\";\nimport MoreOption from \"../more-option/MoreOption\";\nimport {UPDATE_REGISTRY_ITEMS} from \"../../../../api/mutations\";\nimport {getScrapedProduct, graphQLMultipart} from \"../../../../api/axios\";\nimport {\n  getProducts,\n  getCategories,\n  updateMushHaveTourFlag,\n  updateGroupGiftTourFlag,\n  getMAVariant, formatPrice, productImageLoadErrorHandler, productImageLoadHandler,\n  onVariantImgLoadErrorHandler, getRefinedPrice, removeProductFromCartHandler, isInputTextValid\n} from \"../../../../utils/commonFunction\";\nimport {CURRENCY, SETTINGS_LINKS, URL_RE, HTTPS_REGEX} from \"../../../../utils/constants\";\nimport Tour from 'reactour';\nimport TourCard from 'modules/commons/components/tour-card/TourCard';\nimport {MUST_HAVE_STEPS, GROUP_GIFT_STEPS} from 'utils/constants';\nimport {ROUTES} from \"utils/cdn-assets-links\";\nimport GiftStatusPill from \"../gift-status-pill/GiftStatusPill\";\nimport {Tooltip} from \"react-bootstrap\";\nimport OverlayTrigger from \"react-bootstrap/OverlayTrigger\";\nimport ConfirmUrlChangeModal from \"../confirm-url-change-modal/ConfirmUrlChangeModal\";\nimport {setLoader} from \"../../../registry/RegistryActions\";\nimport Loader from \"../loader/Loader\";\n\nclass EditGift extends React.Component {\n\n  PRICE_REGEX = /(^[0-9]+(.?[0-9]{1,2})?$)/g\n  PRICE_REGEX_WHILE_ENTERING = /^[0-9]+.{0,1}[0-9]{0,2}?$/g\n\n  OTHER_CATEOGRY_ID = \"171\"\n\n  M_A_STORE_NAME = \"monicaandandy\"\n  MAX_IMAGE_SIZE = 2000000; // 2MB\n  ACCEPTED_IMAGE_TYPE = [\n    'image/jpg',\n    'image/jpeg',\n    'image/png'\n  ]\n\n  howToGiftOptions = [\n    {\n      id: 1,\n      text: \"Get cash equivalent for this gift\",\n      content: (\n        <div>\n          <p className=\"text-body\">Get cash equivalent for this gift</p>\n          <p className=\"text-sm mt-1\">Choose this option for the best purchase experience.</p>\n        </div>\n      ),\n      subContent: (\n        <div>\n          {this.props.stateRegistryInfo?.user?.bankAccounts.length <= 0 ?\n            <a className=\"text-sm edit-gift-links mt-1 mr-3\" href={SETTINGS_LINKS.BANK_ACCOUNT}>Add bank details</a>\n            : null}\n          <a className=\"text-sm edit-gift-links mt-1\" href=\"#\"\n             onClick={(ev) => this.learnMoreLinkClickHandler(ev, true)}>Learn More</a>\n        </div>\n      ),\n      learnMoreContent: (\n        <>\n          <p className=\"text-body edit-gift-learn-more-modal-text mt-3\">When you choose this option, the money for\n            the gift (including shipping) will be transferred to your\n            bank account.</p>\n\n          <p className=\"text-body edit-gift-learn-more-modal-text mt-4\">When the time is right for you, youll click\n            through to order directly from the website and have it\n            delivered to your home.</p>\n\n          <p className=\"text-body edit-gift-learn-more-modal-text mt-4\">This helps decrease the number of duplicate\n            gifts, keeps your returns to a minimum, and gives you control\n            over when you receive the gift.</p>\n\n          <p className=\"text-body edit-gift-learn-more-modal-text mt-4\"><a href={SETTINGS_LINKS.BANK_ACCOUNT}\n                                                                           target=\"_blank\"\n                                                                           className=\"edit-gift-links\">Connect your\n            bank account to your profile,</a> if you havent already.</p>\n        </>\n      )\n    },\n    {\n      id: 2,\n      text: \"Send your guests to the stores website to purchase and ship now.\",\n      content: (\n        <div>\n          <p className=\"text-body\">Send your guests to the stores website to purchase and ship now.</p>\n        </div>\n      ),\n      subContent: (\n        <a className=\"text-sm edit-gift-links mt-1\" href=\"#\"\n           onClick={(ev) => this.learnMoreLinkClickHandler(ev, false)}>Learn More</a>\n      ),\n      learnMoreContent: (\n        <p className=\"text-body edit-gift-learn-more-modal-text mt-1\">Please note, M+A is unable to accept returns\n          or manage shipping when you choose this option.</p>\n      )\n    }\n  ]\n  storeItemUrlInputRef = React.createRef()\n  state = {\n    showCategoryModal: false,\n    showRemoveModal: false,\n    storeUrlInputHasFocus: false,\n    btnStoreActive: false,\n    tempStoreItemUrl: \"\",\n    storeItemUrl: \"\",\n    storeName: \"\",\n    giftImage: {},\n    giftTitle: \"\",\n    giftPrice: \"\",\n    giftQuantity: 1,\n    giftCategories: [],\n    giftMustHave: false,\n    giftGroupGift: false,\n    giftPurchased: false,\n    howToGift: {},\n    giftNote: \"\",\n    showLearnMore: false,\n    learnMoreCashAccept: false,\n    closeMainModalTemp: false,\n    isTourOpen: false,\n    isMustHaveTour: false,\n    isGroupGiftTour: false,\n    steps: [],\n    giftVariants: [],\n    currentVariant: {},\n    editGiftErrors: {},\n\n    confirmUrlChangeModalShow: false,\n\n    localLoader: false\n  }\n\n  isCustomFetched = false\n\n  setLocalLoader = (value) => {\n    this.setState({\n      localLoader: value\n    })\n  }\n\n  imageInputRef = React.createRef()\n\n  CUSTOM_PIC_OPTIONS = [\n    {\n      id: 1,\n      name: \"Replace\",\n      action: () => {\n        if (this.imageInputRef.current) {\n          this.imageInputRef.current.click();\n        }\n      }\n    }\n  ]\n\n  learnMoreLinkClickHandler = (ev, cashAcceptedLearnMore) => {\n    ev.preventDefault()\n    ev.stopPropagation()\n\n    this.setState({\n      showLearnMore: true,\n      learnMoreCashAccept: cashAcceptedLearnMore,\n      closeMainModalTemp: true\n    })\n  }\n\n  closeLearnMoreModalHandler = () => {\n    this.setState({\n      showLearnMore: false,\n      closeMainModalTemp: false\n    })\n  }\n\n  getRefinedCategory = (category) => {\n    let refinedCategory = null;\n    for (let parentCategory of [...this.props.stateAllCategories]) {\n      let newParentCategory = {...parentCategory}\n      newParentCategory.subCategories = []\n      for (let subCategory of parentCategory.subCategories) {\n        let newSubCategory = {...subCategory}\n        let catToPush = []\n        if (newSubCategory.subProductTypes && newSubCategory.subProductTypes.length > 0) {\n          catToPush = newSubCategory.subProductTypes.map(subCat => {\n            let newSubCat = {...subCat}\n            newSubCat.categoryName = newSubCategory.categoryName + \" (\" + newSubCat.categoryName + \")\";\n            return newSubCat;\n          })\n        }\n        delete newSubCategory.subProductTypes\n        catToPush.unshift(newSubCategory)\n        newParentCategory.subCategories.push(...catToPush)\n      }\n      //  = parentCategory.subCategories.map(subCategory => {\n      //   if (subCategory.subProductTypes.length > 0){\n      //\n      //   }\n      // })\n      let foundCategory = newParentCategory.subCategories.filter(subCat => subCat.id === category.id);\n      if (foundCategory.length === 1) {\n        refinedCategory = {\n          ...foundCategory[0],\n          mainCategory: parentCategory.categoryName,\n          displayName: parentCategory.categoryName + \": \" + foundCategory[0].categoryName\n        }\n        break\n      }\n    }\n\n    return refinedCategory;\n  }\n\n\n  componentDidMount() {\n    if (this.props.data) {\n      console.log({...this.props.data})\n      // Setting product data to local state\n      let currentCategory = [];\n      for (let category of this.props.data.registryCategories) {\n        if (category.category.id === this.OTHER_CATEOGRY_ID) {\n          continue\n        }\n        currentCategory.push(this.getRefinedCategory(category))\n      }\n      const howToGift = this.props.data.isCashAcceptedOnly ? this.howToGiftOptions[0] : this.howToGiftOptions[1]\n      if (this.props.data.item.shopifyItemVariantId && this.props.stateRegistryInfo.id) {\n        let variants = getMAVariant(this.props.stateRegistryInfo.id, this.props.data.item.shopifyItemVariantId, this.props.data)\n\n        variants.then(res => {\n          if (res) {\n            let currentVariant = res.find(variant => variant.variantId === this.props.data.item.shopifyItemVariantId)\n            let tempArray = []\n            this.setState({\n              giftVariants: res.filter(variant => {\n                let returnValue = !tempArray.includes(variant.pattern);\n                if (returnValue) {\n                  tempArray.push(variant.pattern)\n                }\n                return returnValue\n              }),\n              currentVariant: currentVariant ? currentVariant : {}\n            })\n          }\n        })\n      }\n\n      this.setState({\n        storeItemUrl: this.props.data.item.storeItemUrl,\n        tempStoreItemUrl: this.props.data.item.storeItemUrl,\n        storeName: this.props.data.item.store.storeName,\n        giftImage: {\n          type: \"url\",\n          value: this.props.data.imageUrl\n        },\n        giftTitle: this.props.data.title,\n        giftPrice: this.props.data.item.price,\n        giftQuantity: this.props.data.quantity,\n        giftCategories: currentCategory ? [...currentCategory] : [],\n        giftMustHave: this.props.data.mostWanted,\n        giftGroupGift: this.props.data.isGroupGift,\n        giftPurchased: this.props.data.isPurchased,\n        giftNote: this.props.data.note ? this.props.data.note : \"\",\n        howToGift: howToGift\n      })\n    }\n  }\n\n  closeCategoryModal = (value) => {\n    this.setState({\n      showCategoryModal: value\n    })\n  }\n\n  openSelectCategoryModal = (e) => {\n    e.preventDefault()\n    this.setState({\n      showCategoryModal: true\n    })\n  }\n\n  setCategory = categories => {\n    this.setState({\n      giftCategories: [...categories]\n    })\n  }\n\n  modalCloseHandler = () => {\n    this.props.closeModal()\n  }\n\n  selectFileHandler = (ev) => {\n    if (ev.target && ev.target.files.length > 0) {\n      const file = ev.target.files[0]\n\n      // Verifying file is image\n      if (this.ACCEPTED_IMAGE_TYPE.includes(file.type)) {\n        if (file.size <= this.MAX_IMAGE_SIZE) {\n          let reader = new FileReader();\n\n          reader.onload = (e) => {\n            const newProductImage = {\n              type: \"custom\",\n              value: e.target.result,\n              file: file,\n              fileType: file.type,\n              fileName: file.name\n            }\n            this.setState({\n              giftImage: newProductImage\n            });\n          }\n\n          reader.readAsDataURL(file); // Converting to base64 string\n        } else {\n          toast.error(\"File size exceeds the limit\");\n        }\n      } else {\n        toast.error(\"Please select valid image.\");\n      }\n    }\n  }\n\n  // Input change handlers\n  productNameChangeHandler = (e) => {\n    let error = {...this.state.editGiftErrors}\n    if (error.giftTitle) {\n      delete error.giftTitle\n    }\n    if (!isInputTextValid(e)) {\n      return;\n    }\n    this.setState({\n      giftTitle: e.target.value,\n      editGiftErrors: error\n    })\n  }\n\n  productNoteChangeHandler = (e) => {\n    if (!isInputTextValid(e)) {\n      return;\n    }\n    this.setState({\n      giftNote: e.target.value\n    })\n  }\n\n  productStoreUrlChangeHandler = (e) => {\n    let error = {...this.state.editGiftErrors}\n    if (error.storeItemUrl) {\n      delete error.storeItemUrl\n    }\n    this.setState({\n      tempStoreItemUrl: e.target.value,\n      editGiftErrors: error\n    })\n  }\n\n  productPriceChangeHandler = (ev) => {\n    let error = {...this.state.editGiftErrors}\n    if (error.giftPrice) {\n      delete error.giftPrice\n    }\n    if ((ev.target.value.length > 0 && (Number(ev.target.value[ev.target.value.length - 1]) >= 0 || ev.target.value[ev.target.value.length - 1] === \".\")) && ev.target.value.match(this.PRICE_REGEX_WHILE_ENTERING) || ev.target.value.length <= 0) {\n      this.setState({\n        giftPrice: ev.target.value,\n        editGiftErrors: error\n      })\n    }\n  }\n\n  incrementQuantity = () => {\n    let errors = {...this.state.editGiftErrors}\n    if (errors.quantity) {\n      delete errors.quantity\n    }\n    this.setState((prevState, _) => ({\n      giftQuantity: prevState.giftQuantity + 1,\n      editGiftErrors: errors\n    }))\n  }\n\n  decrementQuantity = () => {\n    let errors = {...this.state.editGiftErrors}\n    if (errors.quantity) {\n      delete errors.quantity\n    }\n    if (this.state.giftQuantity - 1 >= 0) {\n\n\n      this.setState((prevState, _) => {\n        // cannot reduce quantity of Partial purchased or reserved product\n        let quantity = this.props.data.quantityStatus && (this.props.data.isGroupGift || this.props.data.isCashAcceptedOnly) ? (this.props.data.purchasedQuantity + this.props.data.quantityStatus.buyable_quantity) : (this.props.data.quantityStatus.purchased_quantity + this.props.data.quantityStatus.reserved_quantity) > prevState.giftQuantity - 1 ? prevState.giftQuantity : prevState.giftQuantity - 1\n        if (this.props.data.quantityStatus) {\n          if (this.props.data.isGroupGift || this.props.data.isCashAcceptedOnly) {\n            quantity = this.props.data.purchasedQuantity + this.props.data.quantityStatus.buyable_quantity > prevState.giftQuantity - 1 ? prevState.giftQuantity : prevState.giftQuantity - 1;\n          } else {\n            quantity = this.props.data.quantityStatus.purchased_quantity + this.props.data.quantityStatus.reserved_quantity > prevState.giftQuantity - 1 ? prevState.giftQuantity : prevState.giftQuantity - 1\n          }\n        } else {\n          quantity = prevState.giftQuantity - 1\n        }\n\n        return {\n          giftQuantity: quantity <= 0 ? quantity + 1 : quantity,\n          editGiftErrors: errors\n        }\n      })\n    }\n  }\n\n  toggleMustHave = () => {\n    this.setState((prevState, _) => ({\n      giftMustHave: !prevState.giftMustHave\n    }))\n    if (!this.props.stateRegistryInfo.isMustHaveApplied) {\n      let steps = {...MUST_HAVE_STEPS}\n      steps[0].selector = '[data-tut=\"must-have-tour\"]';\n      steps.length = 1;\n      this.setState({\n        isMustHaveTour: true,\n        steps: steps,\n        isTourOpen: true\n      })\n    }\n  }\n\n  toggleGroupGift = () => {\n    this.setState((prevState, _) => ({\n      giftGroupGift: !prevState.giftGroupGift\n    }))\n    if (!this.props.stateRegistryInfo.isGroupGiftApplied) {\n      let steps = {...GROUP_GIFT_STEPS}\n      steps[0].selector = '[data-tut=\"group-gift-tour\"]';\n      steps.length = 1;\n      this.setState({\n        isGroupGiftTour: true,\n        steps: steps,\n        isTourOpen: true\n      })\n    }\n  }\n\n  togglePurchased = () => {\n    this.setState((prevState, _) => ({\n      giftPurchased: !prevState.giftPurchased\n    }))\n  }\n\n  changeHowToGift = option => {\n    this.setState({\n      howToGift: {...option}\n    })\n  }\n\n  removeItemClickHandler = (e) => {\n    e.preventDefault();\n    this.setState({\n      closeMainModalTemp: true,\n      showRemoveModal: true\n    })\n    // this.props.openRemoveModal(true);\n    // this.modalCloseHandler()\n  }\n\n  openConfirmURLChangeModal = (e) => {\n    e.preventDefault()\n    let errors = {...this.state.editGiftErrors}\n    if (errors.storeItemUrl) {\n      delete errors.storeItemUrl\n    }\n    this.setState({\n      editGiftErrors: errors\n    })\n    if (this.state.editGiftErrors.storeItemUrl) {\n      this.storeUrlChangeClickHandler()\n    } else {\n      this.setState({\n        closeMainModalTemp: true,\n        confirmUrlChangeModalShow: true\n      })\n    }\n\n  }\n\n  storeUrlChangeClickHandler = () => {\n    this.closeConfirmUrlChangeModal()\n    this.setState({\n      storeUrlInputHasFocus: true,\n      btnStoreActive: true,\n      giftImage: {},\n      giftTitle: \"\",\n      giftPrice: \"\"\n    })\n\n    if (this.storeItemUrlInputRef.current) {\n      this.storeItemUrlInputRef.current.focus();\n    }\n  }\n\n  storeItemUrlBlurHandler = async (e) => {\n    e.preventDefault();\n    e.persist();\n\n    if (e?.relatedTarget?.classList.contains('url_edit_buttons')) {\n      return;\n    }\n    this.confirmStoreItemUrlClickHandler()\n  }\n\n  resetStoreItemUrlClickHandler = inputRef => {\n    this.setState((prevState, _) => ({\n      tempStoreItemUrl: \"\",\n      storeUrlInputHasFocus: true,\n      btnStoreActive: true\n    }))\n    if (inputRef.current) {\n      inputRef.current.focus();\n    }\n  }\n\n  confirmStoreItemUrlClickHandler = () => {\n    let errors = {...this.state.editGiftErrors}\n    let url = this.state.tempStoreItemUrl\n    if (url.length <= 0) {\n      errors['storeItemUrl'] = \"Store item url cannot be empty\";\n    } else {\n      if (!url.match(HTTPS_REGEX)) {\n        url = \"https://\" + url\n      }\n\n      // Checking for valid url\n      try {\n        new URL(url);\n      } catch {\n        errors['storeItemUrl'] = \"Invalid Store Url\";\n      }\n    }\n\n    this.setState((prevState, _) => ({\n      tempStoreItemUrl: url,\n      storeUrlInputHasFocus: false,\n      btnStoreActive: false,\n      editGiftErrors: errors\n    }))\n\n    if (!errors.storeItemUrl) {\n      this.fetchChangedProduct(url)\n    }\n  }\n\n  fetchChangedProduct = (itemUrl) => {\n    const reqData = {\n      item_url: itemUrl\n    }\n    this.setLocalLoader(true)\n    getScrapedProduct(reqData).then(res => {\n      const resData = res.data;\n      let newProductInfo = {}\n      if (resData.img) {\n        newProductInfo['giftImage'] = {\n          type: \"url\",\n          value: resData.img\n        };\n      } else {\n        newProductInfo['giftImage'] = {}\n      }\n      if (resData.title) {\n        newProductInfo['giftTitle'] = resData.title;\n      } else {\n        newProductInfo['giftTitle'] = \"\"\n      }\n      if (resData.price) {\n        newProductInfo['giftPrice'] = getRefinedPrice(resData.price);\n      } else {\n        newProductInfo['giftPrice'] = \"\"\n      }\n\n      this.isCustomFetched = true\n      this.setState({\n        ...newProductInfo,\n        storeItemUrl: itemUrl\n      })\n    }).catch(err => {\n      if (err.response?.status === 500) {\n        toast.error(\"Something went wrong!! Please try again.\")\n      } else {\n        if (err.response?.data?.error_message) {\n          let errors = {...this.state.editGiftErrors}\n          errors['storeItemUrl'] = err.response.data.error_message;\n          this.setState((prevState, _) => ({\n            editGiftErrors: errors\n          }))\n        } else {\n          toast.error(\"Invalid Store Url\")\n        }\n      }\n    }).finally(() => {\n      this.setLocalLoader(false)\n    })\n  }\n\n  validateData = () => {\n    let error = {}\n    let valid = true\n\n    if (this.state.storeItemUrl.length <= 0) {\n      error['storeItemUrl'] = \"Store URL cannot be empty.\"\n      valid = false\n    }\n      // } else {\n      //   // try {\n      //   //   new URL(this.state.storeItemUrl)\n      //   // } catch {\n      //   //   error['storeItemUrl'] = \"Invalid store URL\"\n      //   //   valid = false\n      //   // }\n    // }\n    else if (!this.state.storeItemUrl.match(URL_RE)) {\n      error['storeItemUrl'] = \"Invalid store URL\"\n      valid = false\n    }\n\n    if (this.state.giftTitle.length <= 0) {\n      error['giftTitle'] = \"Product Name cannot be empty\"\n      valid = false\n    }\n\n    if (this.state.giftPrice.length <= 0) {\n      error['giftPrice'] = \"Price cannot be empty\"\n      valid = false\n    } else if (!String(this.state.giftPrice).match(this.PRICE_REGEX)) {\n      error['giftPrice'] = \"Please enter valid amount\"\n      valid = false\n    } else if (Number(this.state.giftPrice) <= 0) {\n      error['giftPrice'] = \"Invalid price\"\n      valid = false\n    }\n\n    this.setState({\n      editGiftErrors: error\n    })\n\n    return valid\n  }\n\n  dataURItoBlob = (dataURI, fileType, fileName) => {\n    let byteString = atob(dataURI.split(',')[1]);\n    let ab = new ArrayBuffer(byteString.length);\n    let ia = new Uint8Array(ab);\n    for (let i = 0; i < byteString.length; i++) {\n      ia[i] = byteString.charCodeAt(i);\n    }\n\n    let blob = new Blob([ab], {type: fileType});\n    return new File([blob], fileName, {\n      type: fileType\n    })\n  }\n\n  saveItemClickHandler = () => {\n    if (!this.validateData()) {\n      return\n    }\n\n    if (this.state.giftQuantity === 0) {\n      // this.props.removeProductFromCartHandler()\n      this.props.openRemoveModal(true);\n      this.modalCloseHandler()\n      return\n    }\n\n    let fd = new FormData()\n    let cashAcceptedOnly = false\n    if (this.state.howToGift.id) {\n      cashAcceptedOnly = this.state.howToGift.id === 1\n    }\n    let reqData = {\n      query: UPDATE_REGISTRY_ITEMS,\n      operationName: \"updateRegistryItem\",\n      variables: {\n        \"itemId\": this.props.data.id,\n        \"itemData\": {\n          \"quantity\": this.state.giftQuantity,\n          \"storeItemUrl\": this.state.storeItemUrl,\n          \"mostWanted\": this.state.giftMustHave,\n          \"isGroupGift\": this.state.giftGroupGift,\n          \"isCashAcceptedOnly\": cashAcceptedOnly,\n          \"registryCategories\": this.state.giftCategories.map(category => category.id),\n          \"price\": this.state.giftPrice,\n          \"note\": this.state.giftNote,\n          \"title\": this.state.giftTitle\n        }\n      }\n    }\n\n    if (this.state.currentVariant.pattern) {\n      reqData.variables.itemData['pattern'] = this.state.currentVariant.pattern\n    }\n\n    if (this.state.currentVariant.variantId) {\n      reqData.variables.itemData['shopifyItemVariantId'] = this.state.currentVariant.variantId\n    }\n\n    if (this.state.currentVariant.imageUrl) {\n      reqData.variables.itemData['imageUrl'] = this.state.currentVariant.imageUrl\n    }\n\n    if (this.state.giftImage.type === \"custom\") {\n      reqData.variables.itemData['images'] = null;\n      reqData.variables.itemData['imageUrl'] = null;\n\n      let map = {\n        images: [\"variables.itemData.images\"]\n      }\n      fd.append(\"map\", JSON.stringify(map))\n      fd.append(\"images\", this.dataURItoBlob(this.state.giftImage.value, this.state.giftImage.fileType, this.state.giftImage.fileName))\n    } else if (this.isCustomFetched) {\n      if (this.state.giftImage.value) {\n        reqData.variables.itemData['imageUrl'] = this.state.giftImage.value;\n      } else {\n        reqData.variables.itemData['imageUrl'] = null;\n      }\n    }\n\n    if (Object.keys(this.state.giftImage).length <= 0) {\n      reqData.variables.itemData['imageUrl'] = null;\n    }\n    fd.append(\"operations\", JSON.stringify(reqData))\n\n    graphQLMultipart(fd).then(res => {\n      if (res.data.data) {\n        getProducts(this.props.stateRegistryInfo.id, this.props.dispatch)\n        getCategories(this.props.stateRegistryInfo.id, this.props.dispatch)\n        toast.success(<p><b>{this.state.giftTitle}</b> is updated.</p>)\n        this.modalCloseHandler()\n      }\n    }).catch(err => {\n      let stateErrors = {...this.state.editGiftErrors}\n      let foundError = false;\n      if (err.response?.data?.errors) {\n        for (let error of err.response.data.errors) {\n          if (error?.errors.quantity) {\n            stateErrors['quantity'] = error.errors.quantity\n            foundError = true\n          }\n        }\n      }\n      if (foundError) {\n        this.setState({\n          editGiftErrors: stateErrors\n        })\n      } else {\n        toast.error(\"Some error occurred while updating product\")\n      }\n      console.error(err.response)\n    })\n  }\n\n  closeTour = () => {\n    // For must-have\n    if (this.state.isMustHaveTour && !this.state.isGroupGiftTour) {\n      this.setState({isMustHaveTour: false})\n      updateMushHaveTourFlag(this.props.stateRegistryInfo, this.props.dispatch, true)\n    }\n\n    // For Group Gift\n    if (!this.state.isMustHaveTour && this.state.isGroupGiftTour) {\n      this.setState({isGroupGiftTour: false})\n      updateGroupGiftTourFlag(this.props.stateRegistryInfo, this.props.dispatch, true)\n    }\n\n    this.setState({\n      isTourOpen: false\n    })\n  }\n\n  // Gift Variant change handler\n  changeCurrentVariantClickHandler = (variant) => {\n    if (!variant) {\n      return\n    }\n    let giftImage = {\n      type: \"url\",\n      value: variant.imageUrl\n    }\n    let giftPrice = variant.price\n\n    this.setState({\n      giftImage: giftImage,\n      giftPrice: giftPrice,\n      currentVariant: {...variant}\n    })\n  }\n\n  // Confirm URL change modal methods\n  closeConfirmUrlChangeModal = () => {\n    this.setState({\n      closeMainModalTemp: false,\n      confirmUrlChangeModalShow: false\n    })\n  }\n\n  inputKeyUpHandler = (ev) => {\n    ev.persist();\n    ev.preventDefault();\n    if (ev.keyCode === 13) { //Enter keycode is 13\n      this.confirmStoreItemUrlClickHandler()\n    }\n  }\n\n  // Remove product popup handlers\n  closeRemoveProductModal = () => {\n    this.setState({\n      closeMainModalTemp: false,\n      showRemoveModal: false\n    })\n  }\n\n  removeProductModalClickHandler = () => {\n    removeProductFromCartHandler(this.props.data, this.props.stateRegistryInfo.id, this.props.dispatch)\n    this.modalCloseHandler()\n  }\n\n  render() {\n\n    let editableItem = true\n    if (this.props.data.isGroupGift) {\n      editableItem = this.props.data.quantityStatus.total_contribution_amount <= 0\n    } else {\n      editableItem = this.props.data.quantityStatus.purchased_quantity + this.props.data.quantityStatus.reserved_quantity <= 0\n    }\n\n    if (this.state.giftImage.value) {\n      let foundRemoveOption = this.CUSTOM_PIC_OPTIONS.find(option => option.id === 2)\n      if (!foundRemoveOption) {\n        this.CUSTOM_PIC_OPTIONS.push({\n          id: 2,\n          name: \"Remove\",\n          action: () => {\n            this.setState({\n              giftImage: {}\n            })\n          }\n        })\n      }\n    } else {\n      this.CUSTOM_PIC_OPTIONS = this.CUSTOM_PIC_OPTIONS.filter(option => option.id !== 2)\n    }\n\n    const modalFooter = (\n      // <div className=\"d-flex w-100 align-items-center justify-content-between\">\n      <div\n        className={[\"d-flex w-100 align-items-center\", editableItem ? \"justify-content-between\" : \"justify-content-end\"].join(\" \")}>\n        {editableItem ?\n          <a href=\"#\" className=\"edit-gift-links font-medium\" onClick={(e) => this.removeItemClickHandler(e)}>Remove\n            Item</a>\n          : null}\n\n        <div>\n          <Button variant=\"secondary\" className=\"text-body font-medium px-2 py-1 mr-2\"\n                  onClick={() => window.open(this.state.storeItemUrl, '_blank')}>View Details</Button>\n          <Button variant=\"primary\" className=\"text-body font-medium px-2 py-1 mr-2\"\n                  disabled={Object.keys(this.state.editGiftErrors).length > 0}\n                  onClick={this.saveItemClickHandler}>Save & Close</Button>\n        </div>\n      </div>\n    )\n\n    let titleContent = (\n      <div className=\"my-2\">\n        {!this.props.data.isGroupGift ?\n          !this.props.data.isCashAcceptedOnly ?\n            <>\n              {this.props.data.quantityStatus.purchased_quantity > 0 ?\n                <GiftStatusPill variant=\"purchased\"\n                                text={`${this.props.data.quantityStatus.purchased_quantity} Purchased`}\n                                className=\"d-inline-block mr-1\"/>\n                : null}\n              {this.props.data.quantityStatus.reserved_quantity > 0 ?\n                <GiftStatusPill variant=\"reserved\"\n                                text={`${this.props.data.quantityStatus.reserved_quantity} Reserved`}\n                                className=\"d-inline-block mr-1\"/>\n                : null}\n              {this.props.data.quantityStatus.still_needed > 0 ?\n                <GiftStatusPill\n                  text={`${this.props.data.quantityStatus.still_needed} ${this.props.data.quantityStatus.still_needed === this.props.data.quantity ? 'Requested' : 'Still Needed'}`}\n                  className=\"d-inline-block mr-1\"/>\n                : null}\n            </>\n            :\n            <>\n              {this.props.data.item.price * this.props.data.quantityStatus.buyable_quantity > 0 ?\n                <GiftStatusPill variant=\"purchased\"\n                                text={`${formatPrice(this.props.data.item.price * this.props.data.quantityStatus.buyable_quantity)} ${this.props.data.purchasedQuantity - this.props.data.alreadyBoughtProductsQuantity > 0 ? 'Remaining' : 'Received'}`}\n                                className=\"d-inline-block mr-1 mt-2\"/>\n                : null}\n              {this.props.data.purchasedQuantity > 0 ?\n                <GiftStatusPill variant=\"purchased\"\n                                text={`${this.props.data.purchasedQuantity} Purchased`}\n                                className=\"d-inline-block mr-1 mt-2\"/>\n                : null}\n              {this.props.data.quantityStatus.still_needed > 0 ?\n                <GiftStatusPill\n                  text={`${this.props.data.quantityStatus.still_needed} ${this.props.data.quantityStatus.still_needed === this.props.data.quantity ? 'Requested' : 'Still Needed'}`}\n                  className=\"d-inline-block mr-1\"/>\n                : null}\n            </>\n          :\n          <div className=\"d-flex w-100 align-items-center flex-wrap\">\n            {this.props.data.quantityStatus && this.props.data.quantityStatus.total_contribution_amount <= 0 ?\n              <GiftStatusPill\n                text={`${formatPrice(this.props.data.item.price * this.props.data.quantity, CURRENCY)} Requested`}\n                className=\"d-inline-block mr-1\"/>\n              :\n              this.props.data.quantity <= this.props.data.quantityStatus.purchased_quantity ?\n                this.props.data.quantityStatus.total_contribution_amount - (this.props.data.item.price * this.props.data.alreadyBoughtProductsQuantity) - (this.props.data.item.price * (this.props.data.purchasedQuantity - this.props.data.alreadyBoughtProductsQuantity)) > 0 ?\n                  <GiftStatusPill variant=\"purchased\"\n                                  text={`${formatPrice(this.props.data.quantityStatus.total_contribution_amount - (this.props.data.item.price * this.props.data.alreadyBoughtProductsQuantity) - (this.props.data.item.price * (this.props.data.purchasedQuantity - this.props.data.alreadyBoughtProductsQuantity)), CURRENCY)} ${this.props.data.purchasedQuantity - this.props.data.alreadyBoughtProductsQuantity > 0 ? 'Remaining' : 'Received'}`}\n                                  className=\"d-inline-block mr-1\"/>\n                  : null\n                :\n                <div className=\"w-50\">\n                      <span\n                        className=\"text-sm font-medium\">{`Received ${formatPrice(this.props.data.quantityStatus.total_contribution_amount - (this.props.data.item.price * this.props.data.alreadyBoughtProductsQuantity), CURRENCY)}`}</span>\n                  <span\n                    className=\"text-sm\">{` of ${formatPrice(this.props.data.item.price * (this.props.data.quantity - this.props.data.alreadyBoughtProductsQuantity), CURRENCY)}`}</span>\n                  <div className=\"added-card-group-gift-progress-bar w-100\">\n                    <div className=\"added-card-group-gift-progress mw-100\"\n                         style={{width: `${((this.props.data.quantityStatus.total_contribution_amount - (this.props.data.item.price * this.props.data.alreadyBoughtProductsQuantity)) / (this.props.data.item.price * this.props.data.quantity)) * 100}%`}}/>\n                  </div>\n                </div>\n            }\n            {this.props.data.purchasedQuantity > 0 ?\n              <GiftStatusPill variant=\"purchased\"\n                              text={`${this.props.data.purchasedQuantity} Purchased`}\n                              className={[\"d-inline-block ml-2\"].join(\" \")}/>\n              : null}\n          </div>\n        }\n      </div>\n    )\n\n    const removeConfirmFooter = (\n      <>\n        <Button className='py-1 px-3 font-medium' variant='secondary' onClick={() => this.closeRemoveProductModal()}>Do\n          not\n          remove</Button>\n        <Button className='py-1 px-3 font-medium' variant='primary' onClick={() => {\n          this.removeProductModalClickHandler()\n        }}>Remove</Button>\n      </>\n    )\n\n    return (\n      <>\n        <div>\n          <Modal\n            show={this.props.show && !this.state.closeMainModalTemp}\n            title=\"Edit item\"\n            titleContent={titleContent}\n            footer={modalFooter}\n            noBodyPadding={true}\n            closeModal={this.modalCloseHandler}>\n\n            <div className=\"row edit-gift-content\">\n              <div className=\"col-12 col-md-5\">\n                <div className={[\"mr-3 mt-4 edit-gift-image-section\"].join(\" \")}>\n                  {!this.state.giftImage.value ?\n                    //TODO: Image From CDN\n                    <>\n                      <div className=\"edit-gift-default-image d-flex\">\n                        <img\n                          className=\"m-auto\"\n                          src={ROUTES.gift_icon}\n                          alt=\"No Image\"/>\n                      </div>\n                      <p className=\"text-sm edit-gift-upload-image-size mt-2\">Upload a photo with maximum 2 mb size.</p>\n                    </>\n                    : null}\n\n                  {this.state.giftImage.value ?\n                    <img src={this.state.giftImage.value} className=\"edit-gift-image\" alt=\"Gift\"\n                         onError={(ev) => productImageLoadErrorHandler(ev)}\n                         onLoad={(ev) => productImageLoadHandler(ev)}\n                    />\n                    : null}\n\n                  {/*  No edit image option when store is not M&A */}\n                  {this.state.storeName !== this.M_A_STORE_NAME ?\n                    <div className=\"edit-gift-custom-image-more-options\">\n                      <MoreOption\n                        data={this.CUSTOM_PIC_OPTIONS}\n                        iconClass=\"custom-icon-camera\"\n                        activeOptionClass=\"view-registry-cover-option-active\"\n                        buttonClass=\"edit-gift-update-image-option\"/>\n\n                      <input type=\"file\" className=\"d-none\" accept={this.ACCEPTED_IMAGE_TYPE.join(\",\")}\n                             ref={this.imageInputRef}\n                             onChange={(ev) => this.selectFileHandler(ev)}/>\n                    </div>\n                    : null}\n                </div>\n              </div>\n              <div className=\"col-12 col-md-7 edit-gift-detail edit-gift-left-border h-100\">\n                <div className=\"ml-3 mt-4 mr-7\">\n                  <div className=\"row\">\n                    <div className=\"col\">\n                      {/* When store is M&A */}\n                      {this.state.storeName === this.M_A_STORE_NAME ?\n                        <h2>{this.state.giftTitle}</h2>\n                        : null}\n\n                      {/* When store is not M&A */}\n                      {this.state.storeName !== this.M_A_STORE_NAME ?\n                        <div className=\"edit-gift-input-container\">\n                          <p className=\"edit-gift-input-label text-sm font-medium mb-1\">Product Name</p>\n                          <textarea\n                            rows={2}\n                            className={[\"w-100 mw-100 edit-gift-input h2 p-2 edit-gift-resize-none mb-0\", this.state.editGiftErrors.giftTitle ? \"edit-gift-input-error\" : \"\"].join(\" \")}\n                            value={this.state.giftTitle}\n                            onChange={(e) => this.productNameChangeHandler(e)}\n                          />\n                          {this.state.editGiftErrors.giftTitle ? <label\n                              className=\"text-sm edit-gift-input-error-text mt-1\">{this.state.editGiftErrors.giftTitle}</label>\n                            : null}\n                        </div>\n                        : null}\n                    </div>\n                  </div>\n\n                  {this.state.storeName !== this.M_A_STORE_NAME ?\n                    <div className=\"row mt-5\">\n                      <div className=\"col\">\n                        {/* When store is not M&A */}\n                        <div className=\"edit-gift-input-container\">\n                          <p className=\"edit-gift-input-label text-sm font-medium mb-1\">Store</p>\n                          <div className=\"position-relative\">\n                            <input\n                              className={[\"w-100 mw-100 edit-gift-input mb-0 text-body py-1 pl-2\", this.state.editGiftErrors.storeItemUrl ? \"edit-gift-input-error\" : \"\", editableItem ? \"pr-14\" : \"pr-2 ma-disabled-store-url-input\"].join(\" \")}\n                              value={this.state.tempStoreItemUrl}\n                              ref={this.storeItemUrlInputRef}\n                              disabled={!this.state.storeUrlInputHasFocus && !this.state.btnStoreActive}\n                              onKeyUp={(ev) => this.inputKeyUpHandler(ev)}\n                              onFocus={() => this.setState({storeUrlInputHasFocus: true, btnStoreActive: true})}\n                              onBlur={(e) => this.storeItemUrlBlurHandler(e)}\n                              onChange={(e) => this.productStoreUrlChangeHandler(e)}\n                            />\n                            {!this.state.storeUrlInputHasFocus && !this.state.btnStoreActive && editableItem ?\n                              <a className=\"edit-gift-input-change-url edit-gift-links font-medium text-sm\" href=\"#\"\n                                 onClick={(e) => this.openConfirmURLChangeModal(e)}>Change</a>\n                              :\n                              this.state.btnStoreActive && this.state.storeUrlInputHasFocus ?\n                                <div className=\"edit-gift-store-url-submit\">\n                                  {/*TODO: Change icons once added to global icons*/}\n                                  <button className=\"url_edit_buttons url_edit_icons_cancel mr-3\"\n                                          onClick={() => this.resetStoreItemUrlClickHandler(this.storeItemUrlInputRef)}/>\n                                  <button className=\"url_edit_buttons url_edit_icons_check\"\n                                          onClick={this.confirmStoreItemUrlClickHandler}/>\n                                </div>\n                                : null\n                            }\n                          </div>\n                          {this.state.editGiftErrors.storeItemUrl ? <label\n                              className=\"text-sm edit-gift-input-error-text mt-1\">{this.state.editGiftErrors.storeItemUrl}</label>\n                            : null}\n                        </div>\n                      </div>\n                    </div>\n                    : null}\n\n                  <div className=\"row mt-5\">\n                    <div className=\"col-6\">\n                      {/* When store is M&A */}\n                      <div className=\"edit-gift-input-container\">\n                        <p className=\"edit-gift-input-label text-sm font-medium mb-1\">Price</p>\n                        {/* When store is M&A */}\n                        {this.state.storeName === this.M_A_STORE_NAME ?\n                          <h4>$ {this.state.giftPrice}</h4>\n                          : null}\n                        {/* When store is not M&A */}\n                        {this.state.storeName !== this.M_A_STORE_NAME ?\n                          <div className=\"edit-gift-input-overlay\">\n                            <input\n                              type=\"text\"\n                              className={[\"w-100 mw-100 mb-0 edit-gift-input py-1 text-body pl-5\", this.state.editGiftErrors.giftPrice ? \"edit-gift-input-error\" : \"\"].join(\" \")}\n                              value={this.state.giftPrice}\n                              onChange={(e) => this.productPriceChangeHandler(e)}/>\n                            <span className=\"text-body edit-gift-price-currency\">$</span>\n                          </div>\n                          : null}\n                        {this.state.editGiftErrors.giftPrice ? <label\n                            className=\"text-sm edit-gift-input-error-text mt-1\">{this.state.editGiftErrors.giftPrice}</label>\n                          : null}\n                      </div>\n                    </div>\n\n                    <div className=\"col-6\">\n                      {/* When store is M&A */}\n                      <div className=\"edit-gift-input-container\">\n                        <p className=\"edit-gift-input-label text-sm font-medium mb-1\">Quantity</p>\n                        <Counter\n                          type='square'\n                          counter={this.state.giftQuantity}\n                          incrementHandler={this.incrementQuantity}\n                          decrementHandler={this.decrementQuantity}\n                        />\n                        {this.state.editGiftErrors.quantity ? <label\n                            className=\"text-sm edit-gift-input-error-text mt-1\">{this.state.editGiftErrors.quantity}</label>\n                          : null}\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Variant is only for MA product */}\n                  {this.state.storeName === this.M_A_STORE_NAME && this.state.giftVariants.length > 0 ?\n                    <div className=\"row mt-5\">\n                      <div className=\"col\">\n                        <div className=\"edit-gift-input-container\">\n                          <p className=\"edit-gift-input-label text-sm font-medium mb-1\">Color</p>\n                          <div className=\"d-flex flex-wrap edit-product-variant\">\n                            {this.state.giftVariants.map(variant => (\n                              <OverlayTrigger\n                                placement=\"top\"\n                                overlay={(props) => (\n                                  variant.pattern ?\n                                    <Tooltip\n                                      id={\"e\" + variant.variantId + `${Math.random() * 1000}`} {...props}>{variant.pattern}</Tooltip>\n                                    : <div {...props}/>\n                                )}\n                              >\n                                <div\n                                  className={\n                                    [\"mr-1 mb-1 product-variant-circle-disk\",\n                                      variant.isAvailable ? 'product-variant-avalible' : 'product-variant-disabled',\n                                      this.state.currentVariant?.id === variant.id ? \"active-variant-product\" : \"\"\n                                    ].join(\" \")}\n                                  key={variant.variantId + ':' + variant.sku}\n                                  onClick={variant.isAvailable ? () => this.changeCurrentVariantClickHandler(variant) : () => {\n                                  }}\n                                >\n                                  <img className=\"product-variant-image\"\n                                       src={variant.iconUrl ? variant.iconUrl : variant.imageUrl}\n                                       onError={(ev) => onVariantImgLoadErrorHandler(ev, variant.imageUrl)}\n                                       alt={variant.pattern}/>\n                                </div>\n                              </OverlayTrigger>\n                            ))}\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    : null}\n\n\n                  <div\n                    className={[\"row\", this.state.storeName === this.M_A_STORE_NAME && this.state.giftVariants.length > 0 ? \"mt-3\" : \"mt-5\"].join(\" \")}>\n                    <div className=\"col\">\n                      {/* When store is M&A */}\n                      <div className=\"edit-gift-input-container\">\n                        <div className=\"mb-1 d-flex\">\n                          <p className=\"edit-gift-input-label text-sm font-medium\">Category</p>\n                          {/* When store is not M&A */}\n                          {!(this.state.storeName === this.M_A_STORE_NAME || this.props.data.isBundleProduct) ?\n                            <a href=\"#\" className=\"edit-gift-links font-medium text-sm ml-2\"\n                               onClick={(e) => this.openSelectCategoryModal(e)}>Add</a>\n                            : null}\n                        </div>\n                        <div>\n                          {this.state.giftCategories.map(category => {\n                            return <CategoryPill text={`${category.mainCategory} : ${category.categoryName}`}\n                                                 className=\"mt-1 mr-1\"/>\n                          })}\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"row mt-5\">\n                    <div className=\"col d-flex\">\n                      <TogglePills\n                        dataTut=\"must-have-tour\"\n                        iconClass=\"custom-icon-heart\"\n                        activeClass={this.state.giftMustHave ? \"edit-gift-active-must-have custom-icon-heart-filled\" : null}\n                        onClick={this.toggleMustHave}\n                        text=\"Must Have\"\n                        className=\"mr-2\"/>\n                      <TogglePills\n                        dataTut=\"group-gift-tour\"\n                        iconClass=\"custom-icon-group-gift\"\n                        activeClass={this.state.giftGroupGift ? \"edit-gift-active-group-gift custom-icon-group-gift-filled\" : null}\n                        onClick={editableItem ? this.toggleGroupGift : null}\n                        text=\"Group Gift\"\n                        className={[\"mr-2\", !editableItem ? \"edit-gift-disabled\" : \"\"].join(\" \")}/>\n                    </div>\n                  </div>\n\n                  {/* When store is not M&A */}\n                  {this.state.storeName !== this.M_A_STORE_NAME ?\n                    <div className=\"row mt-5\">\n                      <div className=\"col\">\n                        <div className=\"edit-gift-input-container\">\n                          <p className=\"edit-gift-input-label text-sm font-medium\">How to gift?</p>\n                          {this.howToGiftOptions.map((option, index) => (\n                            <div\n                              className={[index === 0 ? \"mt-1\" : \"mt-2\", !editableItem ? \"edit-gift-disabled\" : \"\"].join(\" \")}\n                              key={\"how-to-gift-option-\" + option.id}>\n                              <RadioButton\n                                name=\"how-to-gift\"\n                                id={`edit-gift-how-to-gift-${index}`}\n                                // display={option.text}\n                                subContent={option.subContent}\n                                checked={option.id === this.state.howToGift.id ? true : null}\n                                changeHandler={() => editableItem ? this.changeHowToGift(option) : null}>{option.content}</RadioButton>\n                            </div>\n                          ))}\n                        </div>\n                      </div>\n                    </div>\n                    : null}\n\n                  <div className=\"row mt-5 mb-3\">\n                    <div className=\"col\">\n                      <div className=\"edit-gift-input-container\">\n                        <p className=\"edit-gift-input-label text-sm font-medium mb-1\">Notes</p>\n                        <textarea\n                          rows={2}\n                          className=\"w-100 mw-100 edit-gift-input text-body p-2\"\n                          placeholder=\"Write a note for your friends and family\"\n                          value={this.state.giftNote}\n                          onChange={(e) => this.productNoteChangeHandler(e)}\n                        />\n                      </div>\n                    </div>\n                  </div>\n\n                </div>\n              </div>\n            </div>\n          </Modal>\n          {this.state.showCategoryModal ?\n            <SelectCategory\n              showModal={this.state.showCategoryModal}\n              closeModal={this.closeCategoryModal}\n              currentCategory={this.state.giftCategories ? [...this.state.giftCategories] : []}\n              changeCurrentCategory={this.setCategory}\n            />\n            : null}\n\n          <Modal\n            show={this.state.showLearnMore}\n            title={this.state.learnMoreCashAccept ? this.howToGiftOptions[0].text : this.howToGiftOptions[1].text}\n            size=\"md\"\n            closeIconClass=\"mb-auto\"\n            footer={(\n              <Button variant=\"primary\" className=\"px-6 py-1\" onClick={this.closeLearnMoreModalHandler}>Ok, got\n                it!</Button>\n            )}\n            closeModal={this.closeLearnMoreModalHandler}>\n            {this.state.learnMoreCashAccept ? this.howToGiftOptions[0].learnMoreContent : this.howToGiftOptions[1].learnMoreContent}\n          </Modal>\n\n        </div>\n        {this.state.isTourOpen ?\n          <Tour\n            highlightedMaskClassName='tour-bg'\n            steps={this.state.steps}\n            isOpen={this.state.isTourOpen}\n            CustomHelper={TourCard}\n            onRequestClose={this.closeTour}/>\n          : null}\n\n        <ConfirmUrlChangeModal\n          show={this.state.confirmUrlChangeModalShow}\n          closeModalHandler={this.closeConfirmUrlChangeModal}\n          confirmClickHandler={this.storeUrlChangeClickHandler}\n        />\n\n        {/* Remove Modal */}\n        <Modal\n          show={this.state.showRemoveModal}\n          size=\"md\"\n          noFullSizeMobile={true}\n          footer={removeConfirmFooter}\n        >\n          <h2>Do you want to remove {this.props.data.title}? </h2>\n        </Modal>\n\n        {this.state.localLoader ? <Loader/> : null}\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  stateCategories: state.myRegistry.checkList,\n  stateAllCategories: state.myRegistry.allCheckList,\n  stateRegistryInfo: state.registry.info\n})\n\nexport default connect(\n  mapStateToProps\n)(EditGift);\n","import React from \"react\";\nimport \"./TogglePills.scss\";\n\nconst TogglePills = (props) => {\n    return (\n        <div\n          onClick={props.onClick}\n          data-tut={props.dataTut ? props.dataTut : ''}\n          className={[\"cash-fund-toggle-pills px-2 py-1\", props.className ? props.className : \"\", props.selectedClass ? props.selectedClass : \"\", props.iconClass ? props.iconClass : null].join(\" \")}>\n            <i className={[\"cash-fund-toggle-icon float-left\"].join(\" \")} />\n            <span className=\"text-sm ml-2\">{props.text}</span>\n        </div>\n    )\n}\n\nexport default TogglePills;","import React from \"react\";\nimport \"./AddCashFundModal.scss\";\nimport Modal from \"../../modal-component/ModalComponent\";\nimport Button from \"../../button-component/ButtonComponent\";\nimport {toast} from \"react-toastify\";\nimport TogglePills from \"./toggle-pills/TogglePills\";\nimport {connect} from \"react-redux\";\nimport {graphQL, graphQLMultipart} from \"../../../../../api/axios\";\nimport {GET_CASH_FUND_CATEGORIES} from \"../../../../../api/queries\";\nimport {ADD_REGISTRY_ITEM, UPDATE_REGISTRY_ITEMS} from \"../../../../../api/mutations\";\nimport {setCashFundCategories} from \"../../../../my-registry/MyRegistryActions\";\nimport {CURRENCY, M_A_STORE_NAME, MUST_HAVE_STEPS} from \"../../../../../utils/constants\";\nimport {\n  dataURItoBlob,\n  getCategories,\n  getProducts,\n  fetchDefaultCashFundImage, checkForBankAccount, formatPrice, productImageLoadErrorHandler, productImageLoadHandler, updateMushHaveTourFlag,\n  isInputTextValid,\n} from \"../../../../../utils/commonFunction\";\nimport {Dropdown} from 'reactjs-dropdown-component';\nimport {setLoader} from \"../../../../registry/RegistryActions\";\nimport GiftStatusPill from \"../../gift-status-pill/GiftStatusPill\";\nimport Tour from 'reactour';\nimport TourCard from 'modules/commons/components/tour-card/TourCard';\n\nclass AddCashFundModal extends React.Component {\n\n  PRICE_REGEX = /(^[0-9]+(.?[0-9]{1,2})?$)/g\n  PRICE_REGEX_WHILE_ENTERING = /^[0-9]+.{0,1}[0-9]{0,2}?$/g\n\n  API_CALLED = false\n\n  // Accepted Image input types for Cash fund image\n  ACCEPTED_IMAGE_TYPE = [\n    'image/jpg',\n    'image/jpeg',\n    'image/png'\n  ]\n  MAX_IMAGE_SIZE = 5000000; // 5MB\n\n  INITIAL_IMAGE_SET = false\n\n  // Cash Fund data\n  state = {\n    cashFundImage: {},\n    cashFundName: this.props.categoryData && !this.props.edit ? this.props.categoryData.registryCategories[0].category.categoryName : \"\",\n    cashFundAmount: \"\",\n    hideTotal: false,\n    cashFundType: {},\n    cashFundDefaultImage: \"\",\n    cashFundNote: \"\",\n    mustHave: false,\n    categories: [],\n    errors: {},\n    edit: false,\n    isTourOpen: false,\n    steps: [],\n  }\n\n  imageRef = React.createRef()\n\n  modalCloseHandler = (closeAll = false) => {\n    if (this.props.fromAddGift) {\n      this.props.closeModal(closeAll);\n    } else {\n      this.props.closeModal();\n    }\n  }\n\n  validateCashFundData = () => {\n    let valid = true;\n    let errors = {}\n    if (this.state.cashFundName.length <= 0) {\n      errors['cashFundName'] = \"Please enter Cash Fund Name.\"\n      valid = false;\n    }\n\n    if (this.state.cashFundAmount.length <= 0) {\n      errors['cashFundAmount'] = \"Please enter Cash Fund Amount\"\n      valid = false;\n    } else if (!this.state.cashFundAmount.match(this.PRICE_REGEX)) {\n      valid = false;\n      errors['cashFundAmount'] = \"Please enter valid amount\"\n    } else if (this.props.edit && Number(this.state.cashFundAmount) < this.props.categoryData?.quantityStatus.total_contribution_amount) {\n      valid = false;\n      errors['cashFundAmount'] = \"Amount is less than already contributed amount.\"\n    }\n\n    let selectedCat = this.state.categories.find(category => category.selected)\n    if (!selectedCat) {\n      errors['cashFundType'] = \"Please select Cash Fund Type.\"\n      valid = false;\n    }\n\n    this.setState({\n      errors: errors\n    })\n\n    return valid;\n  }\n\n  // Adding Cash Fund\n  addCashFundClickHandler = () => {\n    if (this.validateCashFundData() && !this.API_CALLED) {\n      let formData = new FormData()\n      let selectedCat = this.state.categories.find(category => category.selected)\n      let itemData = {\n        title: this.state.cashFundName,\n        price: this.state.cashFundAmount,\n        mostWanted: this.state.mustHave,\n        quantity: 1,\n        isGroupGift: true,\n        hideTotal: this.state.hideTotal,\n        note: this.state.cashFundNote,\n        registryCategories: [Number(selectedCat.id)]\n      }\n\n      if (!this.props.edit) {\n        itemData['isCashFund'] = true\n        itemData['tags'] = []\n      }\n\n      let reqData = {}\n      let mutationCalled = \"\"\n\n      if (this.props.edit) {\n        mutationCalled = \"updateRegistryItems\"\n        reqData = {\n          query: UPDATE_REGISTRY_ITEMS,\n          operationName: \"updateRegistryItem\",\n          variables: {\n            \"itemId\": this.props.categoryData.id,\n            \"itemData\": itemData\n          }\n        }\n      } else {\n        mutationCalled = \"addRegistryItems\"\n        reqData = {\n          query: ADD_REGISTRY_ITEM,\n          operationName: \"addRegistryItems\",\n          variables: {\n            registryId: this.props.stateRegistryInfo.id,\n            input: [{\n              storeName: M_A_STORE_NAME,\n              items: [itemData]\n            }]\n          }\n        }\n      }\n\n\n      if (this.state.cashFundImage.type === \"custom\") {\n        let map = {}\n        if (this.props.edit) {\n          map = {\n            images: [\"variables.itemData.images\"]\n          }\n          reqData.variables.itemData['images'] = null;\n          reqData.variables.itemData['imageUrl'] = null;\n        } else {\n          map = {\n            images: [\"variables.input.0.items.0.images\"]\n          }\n          reqData.variables.input[0].items[0]['images'] = null;\n        }\n\n        formData.append(\"map\", JSON.stringify(map))\n        formData.append(\"images\", dataURItoBlob(this.state.cashFundImage.value, this.state.cashFundImage.fileType, this.state.cashFundImage.fileName))\n      } else {\n        if (this.props.edit) {\n          reqData.variables.itemData['images'] = null;\n          reqData.variables.itemData['imageUrl'] = this.state.cashFundImage.value ? this.state.cashFundImage.value : this.state.cashFundDefaultImage;\n        } else {\n          reqData.variables.input[0].items[0]['imageUrl'] = this.state.cashFundImage.value ? this.state.cashFundImage.value : this.state.cashFundDefaultImage;\n        }\n      }\n      formData.append(\"operations\", JSON.stringify(reqData))\n      this.API_CALLED = true\n      this.props.dispatch(setLoader(true))\n      graphQLMultipart(formData).then(async res => {\n        await this.props.dispatch(setLoader(false))\n        if (res.data.data && res.data.data[mutationCalled]) {\n          // Successfully added product\n          getProducts(this.props.stateRegistryInfo.id, this.props.dispatch);\n          getCategories(this.props.stateRegistryInfo.id, this.props.dispatch);\n          if (this.props.edit) {\n            toast.success((\n              <p><b>{this.state.cashFundName}</b> updated successfully!</p>\n            ))\n          } else {\n            toast.success((\n              <p><b>{this.state.cashFundName}</b> added to your registry!</p>\n            ))\n          }\n\n          // Checking if cash fund is added without bank account\n          if (!this.props.edit) {\n            checkForBankAccount(true, false, false, this.props.dispatch);\n          }\n          this.modalCloseHandler(true)\n        } else if (res.data.errors) {\n          this.API_CALLED = true\n        }\n      }).catch(async err => {\n        await this.props.dispatch(setLoader(false))\n        this.API_CALLED = true\n        if (err.response.data && err.response.data.errors) {\n          for (let error of err.response.data.errors) {\n            toast.error(error.message);\n          }\n        }\n        console.error(err.response)\n      })\n    }\n  }\n\n  presentCategories = (allCategories) => {\n    let categories = allCategories.map(category => {\n      let categoryData = {\n        id: category.id,\n        title: category.categoryName,\n        selected: this.state.cashFundType && this.state.cashFundType.id === category.id,\n        key: \"categories\"\n      }\n      if (category.catId) {\n        categoryData['catId'] = category.catId\n      }\n      return categoryData\n    })\n    this.setState({categories: [...categories]})\n    if (this.state.cashFundType && this.state.cashFundType.catId) {\n      this.fetchDefaultImage(this.state.cashFundType.catId);\n    }\n  }\n\n  resetThenSet = (id, key) => {\n    this.INITIAL_IMAGE_SET = false\n    if (this.state.errors.cashFundType) {\n      let newErrorState = {...this.state.errors}\n      delete newErrorState.cashFundType\n      this.setState({\n        errors: newErrorState\n      })\n    }\n    this.setState({\n      categories: this.state.categories.map(category => {\n        category.selected = category.id === id;\n        return category;\n      })\n    })\n    let cashFund = this.state.categories.find(category => category.id === id)\n    if (cashFund.catId) {\n      this.fetchDefaultImage(cashFund.catId)\n    }\n  }\n\n  // Modal Data\n  modalTitle = `${this.props.edit ? 'Edit' : 'Add'} Cash Fund`;\n  modalFooterButton = (\n    <Button\n      variant=\"primary\"\n      className=\"px-5 py-1 font-medium text-body\"\n      onClick={this.addCashFundClickHandler}\n    >{`${this.props.edit ? 'Save' : 'Add'} & Close`}</Button>\n  )\n\n  // Handling custom image selection\n  selectFileHandler = (ev) => {\n    if (ev.target && ev.target.files.length > 0) {\n      const file = ev.target.files[0]\n\n      // Verifying file is image\n      if (this.ACCEPTED_IMAGE_TYPE.includes(file.type)) {\n        if (file.size <= this.MAX_IMAGE_SIZE) {\n          let reader = new FileReader();\n\n          reader.onload = (e) => {\n            const newProductImage = {\n              type: \"custom\",\n              value: e.target.result,\n              fileType: file.type,\n              fileName: file.name\n            }\n            this.setState({\n              cashFundImage: newProductImage\n            })\n          }\n\n          reader.readAsDataURL(file); // Converting to base64 string\n        } else {\n          toast.error(\"File size exceeds the limit\");\n        }\n      } else {\n        toast.error(\"Please select valid image.\");\n      }\n    }\n  }\n\n\n  // Input change handlers\n  cashFundNameChangeHandler = (ev) => {\n    if (this.state.errors.cashFundName) {\n      let newErrorState = {...this.state.errors}\n      delete newErrorState.cashFundName\n      this.setState({\n        errors: newErrorState\n      })\n    }\n\n    if (!isInputTextValid(ev)) {\n      return;\n    }\n    this.setState({\n      cashFundName: ev.target.value\n    })\n  }\n\n  cashFundAmountChangeHandler = (ev) => {\n\n    if ((ev.target.value.length > 0 && (Number(ev.target.value[ev.target.value.length - 1]) >= 0 || ev.target.value[ev.target.value.length - 1] === \".\")) && ev.target.value.match(this.PRICE_REGEX_WHILE_ENTERING) || ev.target.value.length <= 0) {\n      if (this.state.errors.cashFundAmount) {\n        let newErrorState = {...this.state.errors}\n        delete newErrorState.cashFundAmount\n        this.setState({\n          errors: newErrorState\n        })\n      }\n\n      this.setState({\n        cashFundAmount: ev.target.value\n      })\n    }\n  }\n\n  cashFundHideTotalChangeHandler = (_) => {\n    this.setState((prevState, _) => ({\n      hideTotal: !prevState.hideTotal\n    }))\n  }\n\n  cashFundTypeChangeHandler = (ev) => {\n    if (this.props.stateCashFundCategories.length > 0) {\n      const changedCategory = this.props.stateCashFundCategories.find(category => Number(category.id) === Number(ev.target.value))\n      if (changedCategory.id) {\n        this.setState({\n          cashFundType: changedCategory\n        })\n      }\n    }\n  }\n\n  cashFundNoteChangeHandler = (ev) => {\n    if (!isInputTextValid(ev)) {\n      return;\n    }\n    this.setState({\n      cashFundNote: ev.target.value\n    })\n  }\n\n  mustHaveClickHandler = () => {\n    this.setState((prevState, _) => ({\n      mustHave: !prevState.mustHave\n    }))\n\n    if (!this.props.stateRegistryInfo.isMustHaveApplied) {\n      let steps = {...MUST_HAVE_STEPS}\n      steps[0].selector = '[data-tut=\"must-have-tour\"]';\n      steps.length = 1;\n      this.setState({\n        steps: steps,\n        isTourOpen: true\n      })\n    }\n  }\n\n  // For Tour\n  closeTour = () => {\n    // For must-have\n    if (this.state.isTourOpen) {\n      updateMushHaveTourFlag(this.props.stateRegistryInfo, this.props.dispatch)\n    }\n\n    this.setState({\n      isTourOpen: false\n    })\n  }\n\n  // Fetch DEFAULT IMAGE of category\n\n  fetchDefaultImage = async (categoryId) => {\n    if (!this.state.cashFundImage.value && !this.INITIAL_IMAGE_SET) {\n      let result = fetchDefaultCashFundImage(categoryId)\n      result.then(res => {\n        if (res.status === \"success\") {\n          this.setState({\n            cashFundDefaultImage: res.data\n          })\n        }\n      })\n    }\n  }\n\n  render() {\n    if (this.props.categoryData?.imageUrl && !this.state.cashFundDefaultImage && this.state.cashFundDefaultImage !== this.props.categoryData.imageUrl) {\n      this.setState({\n        cashFundDefaultImage: this.props.categoryData.imageUrl\n      })\n      this.INITIAL_IMAGE_SET = true\n    }\n\n    if (this.props.edit && !this.state.edit) {\n      if (this.props.categoryData) {\n        const data = this.props.categoryData\n\n        this.setState({\n          edit: true,\n          cashFundNote: data.note ? data.note : \"\",\n          mustHave: data.mostWanted ? data.mostWanted : false,\n          cashFundName: data.title ? data.title : \"\",\n          cashFundAmount: String(data.item?.price) ? String(data.item.price) : \"\",\n          hideTotal: data.item?.hideTotal ? data.item.hideTotal : false\n        })\n      }\n    }\n\n    if (this.props.stateCashFundCategories.length > 0 && this.state.categories.length <= 0) {\n      this.presentCategories(this.props.stateCashFundCategories)\n    }\n\n    if (this.props.stateCashFundCategories.length <= 0) {\n      // Fetching all cash fund categories\n      const reqData = {\n        query: GET_CASH_FUND_CATEGORIES,\n        operationName: \"getCashFund\",\n        variables: {\n          registryId: this.props.stateRegistryInfo.id\n        }\n      }\n\n      graphQL(reqData).then(res => {\n        if (res.data.data && res.data.data.cashFundCategories) {\n          let allCashFundCategories = res.data.data.cashFundCategories.map(cat => {\n            cat.category['catId'] = cat.category.id\n            cat.category.id = cat.id\n            return cat.category\n          })\n          this.presentCategories(allCashFundCategories);\n          this.props.dispatch(setCashFundCategories(allCashFundCategories))\n        }\n      }).catch(err => {\n        console.error(err.response)\n      })\n    }\n\n\n    if (!this.state.cashFundType.id && this.props.stateCashFundCategories.length > 0) {\n      let foundCategory = false\n\n      if (this.props.categoryData?.registryCategories && this.props.categoryData.registryCategories.length > 0) {\n        for (let cashFundCategory of this.props.stateCashFundCategories) {\n          if ((this.props.edit && Number(this.props.categoryData.registryCategories[0].category.id) === Number(cashFundCategory.catId)) || (!this.props.edit && Number(this.props.categoryData.registryCategories[0].category.id) === Number(cashFundCategory.id))) {\n            foundCategory = true;\n            (\n              async () => {\n                await this.setState({\n                  cashFundType: cashFundCategory\n                })\n                this.presentCategories(this.props.stateCashFundCategories)\n              }\n            )()\n            break\n          }\n        }\n      }\n      //For future ref\n      //Default category will be first\n      // if (!foundCategory) {\n      //   (\n      //     async () => {\n      //       await this.setState({\n      //         cashFundType: this.props.stateCashFundCategories[0]\n      //       })\n      //       this.presentCategories(this.props.stateCashFundCategories)\n      //     }\n      //   )()\n      // }\n    }\n\n    let titleContent = null;\n    if (this.props.categoryData?.quantityStatus) {\n      titleContent = (\n        <div className=\"my-2\">\n          <div className=\"d-flex w-100 align-items-center flex-wrap\">\n            {this.props.categoryData.quantityStatus && this.props.categoryData.quantityStatus.total_contribution_amount <= 0 ?\n              <GiftStatusPill\n                text={`${formatPrice(this.props.categoryData.item.price * this.props.categoryData.quantity, CURRENCY)} Requested`}\n                className=\"d-inline-block mr-1\"/>\n              :\n              this.props.categoryData.isPurchased ?\n                <GiftStatusPill variant=\"purchased\"\n                  // text=\"Purchased\"\n                                text={`${formatPrice(this.props.categoryData.quantityStatus.total_contribution_amount, CURRENCY)} Received`}\n                                className=\"d-inline-block mr-1\"/>\n                :\n                <div className=\"flex-grow-1\">\n                      <span\n                        className=\"text-sm font-medium\">{`Received ${formatPrice(this.props.categoryData.quantityStatus.total_contribution_amount, CURRENCY)}`}</span>\n                  <span\n                    className=\"text-sm\">{` of ${formatPrice(this.props.categoryData.item.price * this.props.categoryData.quantity, CURRENCY)}`}</span>\n                  <div className=\"added-card-group-gift-progress-bar w-50\">\n                    <div className=\"added-card-group-gift-progress mw-100\"\n                         style={{width: `${(this.props.categoryData.quantityStatus.total_contribution_amount / (this.props.categoryData.item.price * this.props.categoryData.quantity)) * 100}%`}}/>\n                  </div>\n                </div>\n            }\n          </div>\n        </div>\n      )\n    }\n\n    return (\n      <>\n        <Modal\n          show={this.props.show}\n          titleContent={this.props.edit ? titleContent : null}\n          noBodyPadding={true}\n          title={this.modalTitle}\n          footer={this.modalFooterButton}\n          closeModal={() => this.modalCloseHandler(false)}>\n\n          <div className=\"row cash-fund-modal-content\">\n            <div className=\"col-12 col-md-5\">\n              <div className=\"cash-fund-modal-image-section mt-5 mr-1\">\n                {this.state.cashFundImage.type ?\n                  <img src={this.state.cashFundImage.value} draggable=\"false\" alt=\"Cash Fund\"\n                       className=\"cash-fund-modal-image\"/>\n                  :\n                  this.state.cashFundDefaultImage ?\n                    <img src={this.state.cashFundDefaultImage} draggable=\"false\" alt=\"Cash Fund\"\n                         onError={(ev) => productImageLoadErrorHandler(ev)}\n                         onLoad={(ev) => productImageLoadHandler(ev)}\n                         className=\"cash-fund-modal-image\"/>\n                    :\n                    <div className=\"cash-fund-modal-no-image\"/>\n                }\n                <i\n                  className=\"custom-icon-camera change-cash-fund-image-icon p-3\"\n                  onClick={() => {\n                    this.imageRef.current.click()\n                  }}\n                />\n                <input\n                  type=\"file\"\n                  className=\"d-none\"\n                  ref={this.imageRef}\n                  accept={this.ACCEPTED_IMAGE_TYPE.join(\",\")}\n                  onChange={(ev) => this.selectFileHandler(ev)}\n                />\n              </div>\n            </div>\n            <div className=\"col-12 col-md-7 cash-fund-input-section\">\n              <div className=\"ml-3 mr-6 mt-5\">\n\n                {/* Cash Fund name */}\n                <div className=\"row\">\n                  <div className=\"col cash-fund-input-container\">\n                    <p className=\"cash-fund-input-label text-sm font-medium mt-2 mt-md-0\">Cash Fund Name<label\n                      className=\"asterik\">*</label></p>\n                    <input\n                      className={[\"cash-fund-input h2 mt-1 w-100 mw-100 p-2 mb-0\", this.state.errors.cashFundName ? \"cash-fund-input-error\" : \"\"].join(\" \")}\n                      type=\"text\"\n                      value={this.state.cashFundName}\n                      onChange={(ev) => this.cashFundNameChangeHandler(ev)}\n                    />\n                    {this.state.errors.cashFundName ? <label\n                        className=\"text-sm cash-fund-input-error-text mt-1\">{this.state.errors.cashFundName}</label>\n                      : null}\n                  </div>\n                </div>\n\n                {/* Cash Fund type */}\n                <div className=\"row mt-5\">\n                  <div className=\"col cash-fund-input-container\">\n                    <p className=\"cash-fund-input-label text-sm font-medium mb-1\">Type<label\n                      className=\"asterik\">*</label></p>\n                    <div\n                      className={[\"cash-fund-select w-100 mw-100\", this.state.errors.cashFundType ? \"cash-fund-input-error\" : \"\"].join(\" \")}>\n                      <Dropdown\n                        title=\"Select category\"\n                        list={this.state.categories}\n                        resetThenSet={this.resetThenSet}\n                      />\n                    </div>\n                    {this.state.errors.cashFundType ? <label\n                        className=\"text-sm cash-fund-input-error-text mt-1\">{this.state.errors.cashFundType}</label>\n                      : null}\n                  </div>\n                </div>\n\n\n                <div className=\"row mt-5\">\n\n                  <div className=\"col cash-fund-input-container\">\n                    <p className=\"cash-fund-input-label text-sm font-medium mb-1\">Total Amount<label\n                      className=\"asterik\">*</label></p>\n                    <div className=\"row\">\n\n                      {/* Cash fund amount */}\n                      <div className=\"col\">\n                        <div className=\"position-relative\">\n                          <input\n                            className={[\"cash-fund-input w-100 mw-100 p-1 pl-5 text-body mb-0\", this.state.errors.cashFundAmount ? \"cash-fund-input-error\" : \"\"].join(\" \")}\n                            type=\"text\"\n                            value={this.state.cashFundAmount}\n                            onChange={(ev) => this.cashFundAmountChangeHandler(ev)}\n                          />\n                          <span className=\"cash-fund-price-input-currency text-body\">$</span>\n                        </div>\n                      </div>\n\n                      {/* Cash fund hidden option */}\n                      <div className=\"col align-self-center\">\n                        <label\n                          className=\"checkbox d-flex align-items-center\">\n                          <span className=\"checkbox__input mr-2\">\n                            <input\n                              type=\"checkbox\"\n                              checked={this.state.hideTotal}\n                              onChange={(ev) => this.cashFundHideTotalChangeHandler(ev)}\n                            />\n                            <span className=\"checkbox__control d-flex justify-content-center align-items-center\">\n                              <i className=\"icon-check\"/>\n                            </span>\n                          </span>\n                          <span\n                            className=\"radio__label text-sm\">Hide total from guests</span>\n                        </label>\n                      </div>\n                    </div>\n                    {this.state.errors.cashFundAmount ? <label\n                        className=\"text-sm cash-fund-input-error-text mt-1\">{this.state.errors.cashFundAmount}</label>\n                      : null}\n                  </div>\n                </div>\n\n                <div className=\"row mt-5\">\n                  <div className=\"col\">\n                    <TogglePills\n                      dataTut=\"must-have-tour\"\n                      text=\"Must Have\"\n                      iconClass=\"custom-icon-heart\"\n                      selectedClass={this.state.mustHave ? \"cash-fund-must-have-selected custom-icon-heart-filled\" : null}\n                      onClick={this.mustHaveClickHandler}\n                    />\n\n                  </div>\n                </div>\n\n\n                {/* Cash fund note */}\n                <div className=\"row mt-5 mb-3\">\n                  <div className=\"col cash-fund-input-container\">\n                    <p className=\"cash-fund-input-label text-sm font-medium\">Notes</p>\n                    <textarea\n                      placeholder=\"Write a note for your friends and family\"\n                      className=\"cash-fund-textarea w-100 mw-100 mt-1 w-100 mw-100 p-1 text-body mb-0\"\n                      value={this.state.cashFundNote}\n                      onChange={(ev) => this.cashFundNoteChangeHandler(ev)}\n                      rows={2}/>\n                  </div>\n                </div>\n\n              </div>\n            </div>\n          </div>\n        </Modal>\n        <Tour\n          highlightedMaskClassName='tour-bg'\n          steps={this.state.steps}\n          isOpen={this.state.isTourOpen}\n          CustomHelper={TourCard}\n          onRequestClose={this.closeTour}/>\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    stateCashFundCategories: state.myRegistry.cashFundCategories,\n    stateRegistryInfo: state.registry.info\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(AddCashFundModal);","import React, {useState, useEffect} from 'react'\nimport \"./AddedCard.scss\";\nimport MoreOption from \"../more-option/MoreOption\";\nimport {\n  sortableHandle,\n} from 'react-sortable-hoc';\nimport {useSelector, useDispatch} from 'react-redux';\nimport Modal from \"../modal-component/ModalComponent\";\nimport CardItem from \"../card-item/CardItem\";\nimport {addProductHandler, formatPrice, setActiveVariantSize} from 'utils/commonFunction';\nimport Button from \"../button-component/ButtonComponent\";\nimport EditGift from \"../edit-gift/EditGift\";\nimport GiftStatusPill from \"../gift-status-pill/GiftStatusPill\";\nimport MarkAsPurchased from \"../mark-as-purchased/MarkAsPurchased\";\nimport {CURRENCY} from \"../../../../utils/constants\";\nimport AddCashFundModal from \"../cash-fund-card/add-cash-fund-modal/AddCashFundModal\";\nimport {\n  setActiveRecommandationVariantBySize,\n  setActiveRecommandationSizeVariant\n} from 'modules/my-registry/MyRegistryActions';\nimport {GET_MA_VARIANT_BY_SIZE} from 'api/queries';\nimport {graphQL} from 'api/axios';\nimport {setActiveRecommandationVariantID} from 'modules/my-registry/MyRegistryReducer';\nimport {ROUTES} from \"../../../../utils/cdn-assets-links\";\nimport {checkIsCashFund, productImageLoadErrorHandler, productImageLoadHandler} from \"../../../../utils/commonFunction\";\n\nconst AddedCard = (props) => {\n\n  const dispatch = useDispatch();\n  let stateGuestViewRegistry = useSelector(state => state.viewRegistry.guestViewRegistry)\n  const stateRecommendedProducts = useSelector(state => state.myRegistry.recommendedProducts)\n  const stateFilterApplied = useSelector(state => state.viewRegistry.viewFilterApplied.childFilter)\n  const stateAddedProducts = useSelector(state => state.myRegistry.addedProducts)\n  const stateRegistryInfo = useSelector(state => state.registry.info)\n  const [recommendedProducts, setRecommendedProducts] = useState([])\n  const [show, setShow] = useState(false);\n  const modalTitle = `Recommended ${props.categoryTitle ? props.categoryTitle : props.data.registryCategories[0].category.categoryName}`\n  const [showRemoveModel, setShowRemoveModel] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [updateModal, setUpdateModal] = useState(false);\n  let [showMarkPurchased, setShowMarkPurchased] = useState(false)\n  let [showCashFundModal, setShowCashFundModal] = useState(false)\n  let canEdit = false\n  // useEffect(() => {\n  //   let categoryRecommended = [...stateRecommendedProducts.filter(product => Number(props.data?.registryCategories[0].id) === Number(product.category.id))]\n  //   setRecommendedProducts(categoryRecommended)\n  //   setTimeout(() => {\n  //     setUpdateModal(!updateModal)\n  //   }, 500);\n  // }, [stateRecommendedProducts])\n\n\n  const showRecommendation = (e, category) => {\n    e.stopPropagation()\n    // Fetching all recommendations for that particular product category\n    let categoryRecommended = [...stateRecommendedProducts.filter(product => Number(category.id) === Number(product.category.id))]\n\n    // Removing duplicate products if found any\n    categoryRecommended = getUniqueListBy([...categoryRecommended], \"id\")\n    categoryRecommended = [...categoryRecommended].filter(data => !data.isMaItem || (data.isMaItem && data.maItemVariantItemRecommendation.length > 0))\n\n    setRecommendedProducts(categoryRecommended.map(product => {\n      product.quantity = 1;\n      return product;\n    }));\n\n    setShow(true);\n  }\n\n  // Getting unique objects from a list\n  const getUniqueListBy = (arr, key) => {\n    return [...new Map(arr.map(item => [item[key], item])).values()]\n  }\n\n  const showRemoveModelPopUp = (e) => {\n    e.stopPropagation()\n    setShowRemoveModel(true);\n  }\n\n  const showMarkAsPurchasedModal = (e) => {\n    e.stopPropagation()\n    setShowMarkPurchased(true);\n  }\n\n  let moreOptionsData = []\n  let addRemoveOption = false\n\n  if (props.data.isGroupGift && props.data.quantityStatus.total_contribution_amount <= 0) {\n    addRemoveOption = true\n  } else if (!props.data.isGroupGift && props.data.quantityStatus.purchased_quantity + props.data.quantityStatus.reserved_quantity <= 0) {\n    addRemoveOption = true\n  }\n\n  if (addRemoveOption) {\n    moreOptionsData.unshift({\n      name: \"Remove\",\n      action: (e) => showRemoveModelPopUp(e)\n    })\n  }\n\n\n  if ((props.data.isGroupGift || props.data.isCashAcceptedOnly) && !props.data.isAmountReceived) {\n    canEdit = true\n  } else {\n    canEdit = !props.data.isPurchased\n  }\n\n  let showMarkPurchasedOption = false\n\n  if (props.data.isGroupGift || props.data.isCashAcceptedOnly) {\n    if (checkIsCashFund(props.data.registryCategories)) {\n      showMarkPurchasedOption = !props.data.isPurchased\n    } else {\n      showMarkPurchasedOption = props.data.quantity > props.data?.quantityStatus?.purchased_quantity\n    }\n  } else {\n    showMarkPurchasedOption = !props.data.isPurchased\n  }\n\n\n  // if (!props.data.isPurchased || !((props.data.isGroupGift || props.data.isCashAcceptedOnly) && props.data.isAmountReceived)) {\n  if (showMarkPurchasedOption) {\n    moreOptionsData.unshift({\n      name: `Record a ${props.data.isGroupGift ? 'contribution' : 'purchase'}`,\n      action: (e) => showMarkAsPurchasedModal(e)\n    })\n  }\n\n  if (!checkIsCashFund(props.data.registryCategories) && String(props.data.registryCategories[0].category.categoryName).toLowerCase().trim() !== 'others') {\n    moreOptionsData.unshift({\n      name: \"View Recommendations\",\n      action: (e) => showRecommendation(e, props.data.registryCategories[0])\n    })\n  }\n\n\n  const removeConfirmFooter = (\n    <>\n      <Button className='py-1 px-3 font-medium' variant='secondary' onClick={() => setShowRemoveModel(false)}>Do not\n        remove</Button>\n      <Button className='py-1 px-3 font-medium' variant='primary' onClick={() => {\n        props.removeProductFromCartHandler();\n        setShowRemoveModel(false);\n      }}>Remove</Button>\n    </>\n  )\n\n  // Incrementing quantity of local recommended product\n  const incrementQuantity = (cardId, quantity) => {\n    let newRecommended = [];\n    for (let product of [...recommendedProducts]) {\n      if (product.id === cardId) {\n        product.quantity += quantity;\n      }\n      newRecommended.push(product)\n    }\n    setRecommendedProducts(newRecommended)\n  }\n\n  // Decrementing quantity of local recommended product\n  const decrementQuantity = (cardId, quantity) => {\n    let newRecommended = [];\n    let updated = false;\n    for (let product of [...recommendedProducts]) {\n      if (product.id === cardId) {\n        if (product.quantity - quantity <= 0) {\n          break;\n        } else {\n          product.quantity -= quantity;\n          updated = true;\n        }\n      }\n      newRecommended.push(product)\n    }\n\n    if (updated) {\n      setRecommendedProducts(newRecommended)\n    }\n  }\n\n  // Open Edit Gift Modal\n  const openEditModal = () => {\n    if (checkIsCashFund(props.data.registryCategories) && !props.data.isPurchased) {\n      setShowCashFundModal(true)\n      return\n    }\n\n    let showEditModalLocal = false\n\n    if (props.data.isGroupGift || props.data.isCashAcceptedOnly) {\n      // showEditModalLocal = !props.data.isAmountReceived || !props.data.isPurchased\n      showEditModalLocal = props.data.quantity !== props.data?.quantityStatus?.purchased_quantity\n    } else {\n      showEditModalLocal = !props.data.isPurchased\n    }\n\n    if (showEditModalLocal && !checkIsCashFund(props.data.registryCategories)) {\n      setShowEditModal(true)\n      return;\n    }\n  }\n\n  // Handle drag\n  // TODO: Change Draggable icon\n  const DragHandle = sortableHandle(() => <i\n    className={[\"drag-icon mx-auto m-a-popover m-a-popover-top-right\", (props.disabledDrag || stateFilterApplied.length !== 0) ? \"disabled-drag\" : \"\"].join(\" \")}\n    onClick={(ev) => ev.stopPropagation()}\n  >\n    <div className=\"m-a-popover-content drag-drop-popover w-auto px-3 py-2\">\n      <p className=\"text-sm font-weight-normal m-a-popover-content-desc\">Rearrange</p>\n    </div>\n  </i>);\n\n  const setActiveRecommandationVariantHandler = (productId, variant) => {\n    let newRecommended = [];\n    let finalVariant = {...variant}\n    finalVariant.activeSizeVariant = variant.allSizeVariant[0]\n    let updated = false;\n    for (let product of [...recommendedProducts]) {\n      if (productId === product.id) {\n        product.activeVariant = finalVariant\n        updated = true\n      }\n      newRecommended.push(product)\n    }\n\n    if (updated) {\n      setRecommendedProducts(newRecommended)\n      setUpdateModal(!updateModal)\n    }\n  }\n\n  const getAllVarient = (card, registryInfo, dispatch) => {\n    if (card.activeVariant && !card.activeVariant.isAllVariantFetch) {\n      let data = {\n        query: GET_MA_VARIANT_BY_SIZE,\n        variables: {\n          registryId: registryInfo.id,\n          itemRecommendationId: card.originalRecommandtionId,\n          maItemVariantId: card.activeVariant.id\n        }\n      }\n      graphQL(data).then(res => {\n        if (res.status === 200) {\n          let resData = [...res.data.data.maItemVariantsBySize]\n          let finalData = []\n          for (let variant of resData) {\n            let finalVariant = {...variant}\n            finalVariant.title = variant.size\n            finalVariant.selected = card.activeVariant.activeSizeVariant.id === variant.id\n            finalData.push(finalVariant)\n          }\n\n          let stateInc = [...recommendedProducts];\n          let newState = [];\n          for (let product of stateInc) {\n            if (product.id === card.id) {\n              let newVariants = []\n              for (let variant of product.maItemVariantItemRecommendation) {\n                if (variant.variantId === card.activeVariant.variantId) {\n                  variant.allSizeVariant = finalData\n                  variant.isAllVariantFetch = true\n                  variant.title = variant.size\n                  product.activeVariant = variant\n                  product.activeVariant.activeSizeVariant = variant\n                }\n                newVariants.push(variant)\n              }\n              product.maItemVariantItemRecommendation = newVariants\n            }\n            newState.push(product);\n          }\n          dispatch(setActiveRecommandationVariantBySize(card.id, card.activeVariant.variantId, finalData))\n          setRecommendedProducts(newState)\n          setUpdateModal(!updateModal)\n        }\n      }).catch(err => {\n        console.error(err.message)\n      })\n    }\n  }\n\n  const setActiveVariantSize = (card, variantId, dispatch) => {\n    let sizeVariant = null\n    for (let variant of card.maItemVariantItemRecommendation) {\n      if (variant.variantId === card.activeVariant.variantId) {\n        for (let vrt of variant.allSizeVariant) {\n          if (vrt.id === variantId) {\n            sizeVariant = {...vrt};\n            delete sizeVariant.activeVariant;\n            delete sizeVariant.allSizeVariant;\n            delete sizeVariant.activeSizeVariant;\n            break;\n          }\n        }\n      }\n      if (sizeVariant) {\n        break;\n      }\n    }\n    if (sizeVariant) {\n      let stateInc = [...recommendedProducts];\n      let newState = [];\n      for (let product of stateInc) {\n        if (product.id === card.id) {\n          product.activeVariant.activeSizeVariant = sizeVariant;\n          let finalVariants = []\n          for (let vrt of product.activeVariant.allSizeVariant) {\n            vrt.selected = sizeVariant.variantId === vrt.variantId\n            finalVariants.push(vrt)\n          }\n          product.activeVariant.allSizeVariant = finalVariants\n        }\n        newState.push(product);\n      }\n      setRecommendedProducts(newState)\n      setUpdateModal(!updateModal)\n      dispatch(setActiveRecommandationSizeVariant(card.id, sizeVariant))\n    }\n  }\n\n  return (\n    <>\n      {!props.multipleCategories ?\n        <>\n          <div className={[\"added-card py-5 pr-0 pr-sm-0 pr-md-2 px-2 px-md-0\",\n            props.className ? props.className : '',\n            props.hasHoverClass ? props.hasHoverClass : 'default-added-card-hover',\n          ].join(\" \")} onClick={openEditModal}>\n            <div className=\"d-none d-xl-block\">\n              <div className=\"row\">\n                <div className=\"col-12\">\n                  {props.draggable && !stateGuestViewRegistry ?\n                    <DragHandle/> : <></>}\n                </div>\n              </div>\n            </div>\n            <div className=\"row\">\n              <div className=\"col-12 col-md-2\">\n                <div className=\"pl-0 pl-md-2\">\n                  {props.data?.imageUrl ?\n                    <img\n                      className={[\"product-img d-block mx-md-auto mx-0\", Number(props.data.registryCategories[0].category.categoryType.id) === 2 ? \"added-card-product-image-radius\" : \"\"].join(\" \")}\n                      src={props.data?.imageUrl}\n                      loading=\"lazy\"\n                      alt={props.data?.item.title}\n                      onError={(ev) => productImageLoadErrorHandler(ev)}\n                      onLoad={(ev) => productImageLoadHandler(ev)}\n                    />\n                    :\n                    <div className=\"added-card-no-product-image\"/>\n                  }\n\n                </div>\n\n              </div>\n              <div className=\"col-12 col-md-6\">\n                {/* TODO: change category */}\n                <div\n                  className=\"text-sm category my-3 my-md-0\">{props.data.registryCategories[0].category.parentCategory && props.data.registryCategories[0].category.parentCategory.parentCategory !== null ? props.data.registryCategories[0].category.parentCategory.categoryName + \" (\" + props.data.registryCategories[0].category.categoryName + \")\" : props.data.registryCategories[0].category.categoryName}</div>\n                <h2>{props.data.title}</h2>\n                <div className=\"d-flex mt-2\">\n                  <div className=\"\">{formatPrice(props.data.item.price)}</div>\n                  {/*/!* TODO: Add Strikeout price dynamic *!/*/}\n                  {props.data.item.compareAtPrice ?\n                    <div\n                      className=\"text-sm my-auto ml-1 strike-through-price\">{formatPrice(props.data.item.compareAtPrice)}</div>\n                    : null}\n                </div>\n                {!props.data.isGroupGift ?\n                  !props.data.isCashAcceptedOnly ?\n                    <>\n                      {props.data.quantityStatus.purchased_quantity > 0 ?\n                        <GiftStatusPill variant=\"purchased\"\n                                        text={`${props.data.purchasedQuantity} Purchased`}\n                                        className=\"d-inline-block mr-1 mt-2\"/>\n                        : null}\n                      {props.data.quantityStatus.reserved_quantity > 0 ?\n                        <GiftStatusPill variant=\"reserved\"\n                                        text={`${props.data.quantityStatus.reserved_quantity} Reserved`}\n                                        className=\"d-inline-block mr-1 mt-2\"/>\n                        : null}\n                      {props.data.quantityStatus.still_needed > 0 && !props.data.isPurchased?\n                        <GiftStatusPill\n                          text={`${props.data.quantityStatus.still_needed} ${props.data.quantityStatus.still_needed === props.data.quantity ? 'Requested' : 'Still Needed'}`}\n                          className=\"d-inline-block mr-1 mt-2\"/>\n                        : null}\n                    </>\n                    :\n                    <>\n                      {(props.data.item.price * props.data.quantityStatus.buyable_quantity) > 0 ?\n                        <GiftStatusPill variant=\"purchased\"\n                                        text={`${formatPrice(props.data.item.price * props.data.quantityStatus.buyable_quantity)} ${props.data.purchasedQuantity - props.data.alreadyBoughtProductsQuantity > 0 ? 'Remaining' : 'Received'}`}\n                                        className=\"d-inline-block mr-1 mt-2\"/>\n                        : null}\n                      {props.data.purchasedQuantity > 0 ?\n                        <GiftStatusPill variant=\"purchased\"\n                                        text={`${props.data.purchasedQuantity} Purchased`}\n                                        className=\"d-inline-block mr-1 mt-2\"/>\n                        : null}\n                      {props.data.quantityStatus.still_needed > 0 ?\n                        <GiftStatusPill\n                          text={`${props.data.quantityStatus.still_needed} ${props.data.quantityStatus.still_needed === props.data.quantity ? 'Requested' : 'Still Needed'}`}\n                          className=\"d-inline-block mr-1 mt-2\"/>\n                        : null}\n                    </>\n                  :\n                  <div className=\"d-flex w-100 align-items-center flex-wrap\">\n                    <GiftStatusPill variant=\"group-gift\"\n                                    text={`Group Gift`}\n                                    className=\"d-inline-block mr-1 mt-2\"/>\n\n                    {props.data.quantityStatus && props.data.quantityStatus.total_contribution_amount <= 0 ?\n                      <GiftStatusPill\n                        text={`${formatPrice(props.data.item.price * props.data.quantity, CURRENCY)} Requested`}\n                        className=\"d-inline-block mr-1 mt-2\"/>\n                      :\n                      props.data.quantity <= props.data.quantityStatus.purchased_quantity || (Number(props.data.registryCategories[0].category.categoryType.id) === 2 && props.data.isPurchased) ?\n                        props.data.quantityStatus.total_contribution_amount - (props.data.item.price * props.data.alreadyBoughtProductsQuantity) - (props.data.item.price * (props.data.purchasedQuantity - props.data.alreadyBoughtProductsQuantity)) > 0 ?\n                          <GiftStatusPill variant=\"purchased\"\n                            // text=\"Purchased\"\n                                          text={`${formatPrice(props.data.quantityStatus.total_contribution_amount - (props.data.item.price * props.data.alreadyBoughtProductsQuantity) - (props.data.item.price * (props.data.purchasedQuantity - props.data.alreadyBoughtProductsQuantity)), CURRENCY)} ${props.data.purchasedQuantity - props.data.alreadyBoughtProductsQuantity > 0 ? 'Remaining' : 'Received'}`}\n                                          className=\"d-inline-block mr-1 mt-2\"/>\n                          : null\n                        :\n                        <div className=\"flex-grow-1 mr-1\">\n                          <span\n                            className=\"text-sm font-medium\">{`Received ${formatPrice(props.data.quantityStatus.total_contribution_amount - (props.data.item.price * props.data.alreadyBoughtProductsQuantity), CURRENCY)}`}\n                          </span>\n                          <span\n                            className=\"text-sm\">{` of ${formatPrice(props.data.item.price * (props.data.quantity - props.data.alreadyBoughtProductsQuantity), CURRENCY)}`}\n                          </span>\n                          <div className=\"added-card-group-gift-progress-bar w-100\">\n                            <div className=\"added-card-group-gift-progress mw-100\"\n                                 style={{width: `${((props.data.quantityStatus.total_contribution_amount - (props.data.item.price * props.data.alreadyBoughtProductsQuantity)) / (props.data.item.price * props.data.quantity)) * 100}%`}}/>\n                          </div>\n                        </div>\n                    }\n                    {props.data.purchasedQuantity > 0 && Number(props.data.registryCategories[0].category.categoryType.id) !== 2 ?\n                      <GiftStatusPill variant=\"purchased\"\n                                      text={`${props.data.purchasedQuantity} Purchased`}\n                                      className={[\"d-inline-block mr-1\", props.data.quantity <= props.data?.quantityStatus?.purchased_quantity ? \"mt-2\" : \"\"].join(\" \")}/>\n                      : null}\n                  </div>\n                }\n\n              </div>\n              <div className=\"col-12 col-md-4 added-card-buttons\"\n              >\n                <div className=\"d-flex align-items-baseline justify-content-end mr-md-1 mr-3\">\n                  {!stateGuestViewRegistry ?\n                    <button\n                      className={[\n                        \"mr-0 mr-sm-0 mr-md-4 d-flex align-items-center added-gift-must-have-btn px-2\",\n                        props.data.mostWanted ? \"added-gift-must-have-active\" : \"added-gift-must-have-not-active\"\n                      ].join(\" \")}\n                      data-tut={\"must-have-\" + props.data.id}\n                      onClick={props.toggleMustHave}\n                    >\n                      <i className={[\"icon mr-1 d-block\", props.data.mostWanted ? \"heart-fill\" : \"heart\"].join(\" \")}/>\n                      <p className=\"text-sm added-gift-must-have-text d-none d-sm-none d-md-inline-block \">Must Have</p>\n                    </button> :\n                    props.data.mostWanted ?\n                      <button\n                        data-tut={\"must-have-\" + props.data.id}\n                        className=\"mr-4 d-flex align-items-center added-gift-must-have-btn px-2 added-gift-must-have-active\">\n                        <i className=\"icon mr-1 d-block heart-fill\"/>\n                        <p className=\"text-sm added-gift-must-have-text d-none d-sm-none d-md-inline-block \">Must\n                          Have</p>\n                      </button>\n                      : <></>\n                  }\n                  {!stateGuestViewRegistry ?\n                    <MoreOption data={moreOptionsData} iconClass=\"icon-more-hori\"/>\n                    : <></>}\n                </div>\n              </div>\n            </div>\n          </div>\n          {props.isViewCard ?\n            props.data.registryCategories.length > 1 ?\n              props.data.registryCategories.map(category =>\n                props.data.registryCategories[0].id !== category.id ?\n                  <div className=\"row\" key={'multi-category-card-' + props.data.title + '-' + category.id}>\n                    <div className=\"col\">\n                      <div className=\"text-body font-medium p-6 added-card-other-category\">\n                        You have\n                        added {props.data.item.quantity > 1 ? props.data.item.quantity : null} {category.category.parentCategory.parentCategory !== null ? category.category.parentCategory.categoryName + \" (\" + category.category.categoryName + \")\" : category.category.categoryName} as\n                        part of <a className=\"title-link\" tabindex=\"0\" onClick={openEditModal}>{props.data.title}</a>\n                      </div>\n                    </div>\n                  </div>\n                  : null\n              )\n              : null\n            : null}\n        </>\n        :\n        <div className=\"row\">\n          <div className=\"col\">\n            <div className=\"text-body font-medium p-4 p-md-6 added-card-other-category\">\n              You have\n              added {props.data.item.quantity > 1 ? props.data.item.quantity : null} {props.multipleCategories.category.parentCategory && props.multipleCategories.category.parentCategory.parentCategory !== null ? props.multipleCategories.category.parentCategory.categoryName + \" (\" + props.multipleCategories.category.categoryName + \")\" : props.multipleCategories.category.categoryName} as\n              part of <a className=\"title-link\" tabindex=\"0\" onClick={openEditModal}>{props.data.title}</a>\n            </div>\n          </div>\n        </div>\n      }\n      <Modal\n        updateModal={updateModal}\n        show={show}\n        closeModal={() => setShow(false)}\n        title={modalTitle}\n        size=\"xl\"\n      >\n        <div className=\"position-relative added-card-recommended\">\n          <div className=\"row category-recommended-products\">\n            {recommendedProducts.map((card, index) => (\n              <div className=\"col-12 col-md-4 mb-5\" key={\"CardItem-\" + index}>\n                <CardItem\n                  data={card}\n                  activeVariant={card.activeVariant}\n                  getAllVarient={() => getAllVarient(card, stateRegistryInfo, dispatch)}\n                  incrementQuantityHandler={() => incrementQuantity(card.id, 1)}\n                  decrementQuantityHandler={() => decrementQuantity(card.id, 1)}\n                  addProductHandler={() => addProductHandler(card, stateAddedProducts, stateRegistryInfo, dispatch)}\n                  setActiveRecommandationVariantHandler={(variant) => setActiveRecommandationVariantHandler(card.id, variant)}\n                  setActiveVariantSize={(id) => setActiveVariantSize(card, id, dispatch)}\n                />\n              </div>\n            ))}\n            {recommendedProducts.length <= 0 ?\n              <div className=\"col text-center py-4\"><h4>No recommendation found</h4></div> : null}\n          </div>\n          {recommendedProducts.length > 0 ? <div className=\"added-card-recommends-bottom-gradient\"/> : null}\n        </div>\n      </Modal>\n      <Modal\n        show={showRemoveModel}\n        size=\"md\"\n        noFullSizeMobile={true}\n        footer={removeConfirmFooter}\n      >\n        <h2>Do you want to remove {props.data.title}? </h2>\n      </Modal>\n\n      {showEditModal ?\n        <EditGift\n          show={showEditModal}\n          closeModal={() => setShowEditModal(false)}\n          data={props.data}\n          openRemoveModal={setShowRemoveModel}\n          removeProductFromCartHandler={() => props.removeProductFromCartHandler()}\n        />\n        : null}\n      <MarkAsPurchased\n        show={showMarkPurchased}\n        closeModal={() => setShowMarkPurchased(false)}\n        data={props.data}\n      />\n      {showCashFundModal ?\n        <AddCashFundModal\n          show={showCashFundModal}\n          closeModal={() => setShowCashFundModal(false)}\n          categoryData={props.data}\n          edit\n        />\n        : null}\n    </>\n  )\n}\n\nexport default AddedCard\n","import React from \"react\";\nimport \"./CheckListItems.scss\";\nimport { withTranslation } from \"react-i18next\";\nimport { withRouter } from \"react-router\";\nimport routes from \"utils/routes\";\nimport { GET_PERSONALIZE_QUESTIONS } from \"api/queries\";\nimport { graphQL } from \"api/axios\";\nimport { toast } from \"react-toastify\";\nimport {connect} from \"react-redux\";\n\nclass CheckList extends React.Component {\n\n    gotoPersonalize = (event) => {\n        event.preventDefault();\n\n        // If user has given answer or not\n        let isQuizPending = true\n        let reqData = {\n            query: GET_PERSONALIZE_QUESTIONS,\n            variables: {\n                registryId: this.props.stateRegistryInfo.id,\n            }\n        }\n        // To route to edit-checklist or Quiz\n        graphQL(reqData).then(res => {\n            if (res.data.data.editablePersonalizeQuestions) {\n                const questions = res.data.data.editablePersonalizeQuestions\n                for (let question of questions) {\n                    if (question.answers.length > 0) {\n                        isQuizPending = false\n                        break;\n                    }\n                }\n                if (isQuizPending) {\n                    this.props.history.push(routes.PERSONALIZE.HOME)\n                } else {\n                    this.props.history.push(routes.PERSONALIZE.CHECKLIST)\n                }\n\n            }\n        }).catch(err => {\n            toast.error(\"Error occurred while fetching questions\");\n            console.error(err);\n        })\n    }\n\n    render() {\n        return (\n            <div className=\"mb-0 mb-lg-3 w-100\">\n                <div className=\"row check-list-header\">\n                    <div className=\"col d-flex align-items-baseline pb-1\">\n                        <p className=\"checklist-title mb-0\">{this.props.t(\"checkList.title\")}</p>\n                        <a href=\"#\" className=\"ml-2 text-sm checklist-personalize d-none d-lg-inline-block\" tabIndex=\"0\" onClick={(e) => this.gotoPersonalize(e)}>{this.props.t(\"checkList.personalize\")}</a>\n                        {this.props.percentage.totalItems ?\n                            <p className=\"font-medium text-sm checklist-progress-count ml-2 ml-lg-auto \">{this.props.percentage.addedItems}/{this.props.percentage.totalItems}</p>\n                            : null}\n                    </div>\n                </div>\n                <div className=\"row\">\n                    <div className=\"col d-flex\">\n                        <div className=\"check-list-background\">\n                            <div className=\"check-list-progress mw-100\" style={{width: `${this.props.percentage.result}%`}} />\n                        </div>\n                    </div>\n                </div>\n                <div className=\"row check-list-header d-inline-block d-lg-none\">\n                    <a href=\"#\" className=\"text-sm checklist-personalize ml-3 mt-3\" tabIndex=\"0\" onClick={(e) => this.gotoPersonalize(e)}>{this.props.t(\"checkList.personalize\")}</a>\n                </div>\n            </div>\n\n        );\n    }\n};\n\nconst mapStateToProps = state => {\n    return {\n        stateRegistryInfo: state.registry.info,\n    }\n}\n\nexport default withTranslation()(withRouter(connect(\n    mapStateToProps\n)(CheckList)));","import React, { Component } from \"react\";\nimport \"./CheckListItems.scss\";\nimport CircularProgress from \"modules/commons/components/circular-progress/CircularProgress\";\nimport Accordion from 'react-bootstrap/Accordion';\nimport Card from 'react-bootstrap/Card';\nimport { connect } from 'react-redux';\n\nclass CheckListItems extends Component {\n\n  constructor(props) {\n    super(props);\n    // create a ref to store the checkList header DOM element\n    this.checkListHeader = React.createRef();\n  }\n\n  activeCategory = null\n\n  componentDidMount() {\n    // window.addEventListener('scroll', this.handleScroll);\n  }\n\n  getOffset = (el) => {\n    const rect = el.getBoundingClientRect();\n    return {\n      left: rect.left + window.scrollX,\n      top: rect.top + window.scrollY\n    };\n  }\n\n  scrollToCategory = (category) => {\n    const categorySection = document.getElementById(category)\n    if (categorySection) {\n      let offset = this.getOffset(categorySection);\n      window.scrollTo(0, offset.top)\n    }\n  }\n\n  handleScroll = () => {\n    let elements = document.getElementsByClassName('product-category-wrapper')\n    for (let el of elements) {\n      let otherEl = document.getElementById(el.id + '_scroll')\n      if (!!otherEl && this.activeCategory !== el.id) {\n        otherEl.classList.remove('font-medium')\n      }\n      if (el.getBoundingClientRect().top >= 0 && el.getBoundingClientRect().top <= el.offsetHeight) {\n        this.activeCategory = el.id\n        let targetEl = document.getElementById(el.id + '_scroll')\n        if (targetEl) {\n          targetEl.classList.add('font-medium')\n        }\n      }\n    }\n  }\n\n  getSubList = (getSubList) => {\n    let subItems = getSubList.map(({ id, categoryName, addedItemsCount, totalItemsCount, subProductTypes, parentCategory }, index) => {\n      return (\n        <div key={`subItems-${index}`}>\n          {subProductTypes.length === 0 ?\n            <div className=\"d-flex card-body-contain checklist-item-highlight align-items-center py-2\" key={categoryName + id}\n              data-cardid={this.props.index}\n              id={parentCategory.name + '(' + categoryName + ')_scroll'}\n              onClick={() => this.scrollToCategory(parentCategory.name + '(' + categoryName + ')')}>\n              <p className=\"mb-0 card-body-header text-sm\">{categoryName}</p>\n\n              <div className='ml-auto mb-0 align-self-end text-sm progess-divison'>\n                {addedItemsCount >= totalItemsCount ?\n                  <div className=\"icon-done\" /> :\n                  (totalItemsCount > 0 ?\n                    <div className='ml-auto mb-auto align-self-end card-progress'>\n                      {addedItemsCount}/{totalItemsCount}\n                    </div>\n                    : null)}\n              </div>\n            </div> :\n            // Todo handle scroll\n            <>\n              <div className=\"sub-product-header align-items-center py-2\" key={categoryName + id}\n                data-cardid={this.props.index}\n                id={categoryName + '_scroll'}\n                onClick={() => this.scrollToCategory(categoryName)}>\n                <p className=\"mb-0 card-body-header text-sm\">{categoryName}</p>\n              </div>\n              <div className=\"text-sm\">\n                {subProductTypes.map((subProductType, _) => (\n                  <div className=\"sub-product-list checklist-item-highlight d-flex py-2 ml-3 align-items-center\"\n                    key={subProductType.categoryName + subProductType.id}\n                    data-cardid={this.props.index}\n                    id={subProductType.parentCategory.name + '(' + subProductType.categoryName + ')_scroll'}\n                    onClick={() => this.scrollToCategory(subProductType.parentCategory.name + '(' + subProductType.categoryName + ')')}\n                  >\n                    <div>{subProductType.categoryName}</div>\n                    <div className='ml-auto mb-0 align-self-end text-sm progess-divison'>\n                      {subProductType.addedItemsCount >= subProductType.totalItemsCount ?\n                        <div className=\"icon-done\" /> :\n                        (totalItemsCount > 0 ?\n                          <div className='ml-auto mb-auto align-self-end card-progress'>\n                            {subProductType.addedItemsCount}/{subProductType.totalItemsCount}\n                          </div>\n                          : null)}\n\n                    </div>\n                  </div>\n                ))}\n\n              </div>\n            </>}\n        </div>\n      )\n\n    });\n    return subItems;\n  }\n\n  handleToggleEvent = () => {\n    const checkListIconEl = this.checkListHeader.current.firstChild;\n    checkListIconEl.classList.toggle(\"closed\");\n    checkListIconEl.classList.toggle(\"opened\");\n    const currentIndex = checkListIconEl.getAttribute('data-index');\n\n    // removing toggle from other card\n    let allElement = document.getElementsByClassName(\"checklist-icon-arrow\");\n    for (let el of allElement) {\n      if (currentIndex !== el.getAttribute('data-index') && el.classList.contains(\"opened\")) {\n        el.classList.remove(\"opened\");\n      }\n    }\n  }\n\n  render() {\n\n    let subListItem = this.getSubList(this.props.item.subCategories)\n    // TODO: For calculation for subitem\n    // let parentTotal = 10;\n    // let parentAdded = 16;\n\n    // for (let subItems of this.props.item.subCategories) {\n    //     if (subItems.added !== subItems.total) {\n    //         parentAdded += Number(subItems.added);\n    //         parentTotal += Number(subItems.total);\n    //     }\n    // }\n\n    return (\n      <>\n        {this.props.item.categoryName && this.props.item.isParent ?\n          <Card className=\"mb-5\">\n            <Accordion.Toggle\n              onClick={this.handleToggleEvent}\n              as={Card.Header}\n              id={'checklist-header-' + this.props.index}\n              // eventKey={this.props.item.categoryName}\n              eventKey={this.props.index}\n            >\n              <div ref={this.checkListHeader} className='d-flex icon-checklist'>\n                <span className={[\"checklist-icon-arrow\", this.props.defaultActiveKey === this.props.index ? \"opened\" : \"closed\"].join(\" \")} data-index={this.props.index} />\n                <div className=\"ml-3 mb-0 w-100\">\n                  <div className=\"text-body\">{this.props.item.categoryName}</div>\n                  <div className=\"d-flex\">\n                    <div className=\"check-list-hearder-background\">\n                      <div className=\"check-list-hearder-progress mw-100\" style={{ width: `${(this.props.item.addedItemsCount / this.props.item.totalItemsCount) * 100}%` }} />\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </Accordion.Toggle>\n            <Accordion.Collapse className='mt-1 ml-6' eventKey={this.props.index}>\n              <Card.Body>\n                {subListItem}\n              </Card.Body>\n            </Accordion.Collapse>\n          </Card>\n          :\n          <p\n            className=\"pl-6 mr-3 text-body others-cat checklist-item-highlight\"\n            id={this.props.item.categoryName + '(' + this.props.item.categoryName + ')_scroll'}\n            onClick={() => this.scrollToCategory(this.props.item.categoryName + '(' + this.props.item.categoryName + ')')}>\n            {this.props.item.categoryName}\n          </p>\n        }\n      </>\n    );\n\n  }\n}\n\nexport default connect()(CheckListItems);","import React from \"react\";\nimport \"./BookmarkletSection.scss\";\nimport Modal from \"../../modal-component/ModalComponent\";\nimport Button from '../../button-component/ButtonComponent';\nimport {\n  BOOKMARKLET_SCRIPT,\n  BOOKMARKLET_STEP_THREE_PRODUCT_LINK,\n  IMPORT_REGISTRY_EMAIL,\n  M_A_BUTTON_CONTENT\n} from \"utils/constants\";\nimport { connect } from \"react-redux\";\nimport { UPDATE_MA_BUTTON_CONFIGURED } from 'api/mutations';\nimport { updateRegistryInfo } from \"modules/registry/RegistryActions\";\nimport { graphQL } from \"api/axios\";\nimport { ROUTES as CDNImages } from \"utils/cdn-assets-links\";\n\nclass BookmarkletSection extends React.Component {\n\n  state = {\n    show: false,\n    updateModal: false,\n  }\n\n  modalTitle = \"\"\n  modalBody = \"\"\n  modalTitleContent = \"\"\n  modalFooterButtons = \"\"\n\n  // Event Handlers\n  modalCloseHandler = () => {\n    if (this.props.changeTempCloseModal) {\n      this.props.changeTempCloseModal(false)\n    }\n    this.setState({\n      show: false\n    })\n  }\n\n  doneBookmarkletHandler = () => {\n    this.modalCloseHandler()\n  }\n\n  maButtonConfiguredhandler = (ev) => {\n    ev.stopPropagation();\n\n    let data = {\n      query: UPDATE_MA_BUTTON_CONFIGURED,\n      variables: {\n        registryId: this.props.stateRegistryInfo.id,\n        isMaButtonConfigured: true,\n      }\n    }\n    graphQL(data).then(res => {\n      if (res.status === 200) {\n        console.log('Done..')\n      }\n    }).catch(err => {\n      console.error(err.message)\n    })\n    let registryInfo = { ...this.props.stateRegistryInfo }\n    registryInfo.isMaButtonConfigured = true\n    this.props.dispatch(updateRegistryInfo(registryInfo))\n  }\n\n  openAddBookmarkletModal = () => {\n\n    this.modalTitle = \"Get M+A Button\"\n    this.modalTitleContent = (\n      <div className=\"py-2 text-sm\">\n        Its as easy as dragging the button to your browsers Bookmarks bar.\n      </div>\n    )\n\n    if (this.props.changeTempCloseModal) {\n      this.props.changeTempCloseModal(true)\n    }\n    this.setState((prevState, props) => ({\n      show: true,\n    }))\n\n    this.modalBody = (\n      <div className=\"row bookmarlet-model justify-content-center\">\n        <div className=\"col\">\n          <div className=\"d-flex justify-content-center my-6 bookmarklet-header\">\n            <div className=\"text-body m-a-heading mr-5\">\n              <div>Drag the button to your</div> <div>browsers Bookmarks bar</div>\n            </div>\n            <div className=\"position-relative\">\n              <a\n                tabindex=\"0\"\n                href={BOOKMARKLET_SCRIPT}\n                onClick={(ev) => { ev.preventDefault() }}\n                className=\"m-a-btn m-a-primary-btn primary-btn px-3 py-2 font-weight-bold font-medium text-body d-flex\"\n              ><i className=\"add-bookmarklet-btn-icon mr-1\" />Add to M+A</a>\n              <i className=\"icon-bookmarklet-up-arrow\" />\n            </div>\n          </div>\n          <div className=\"bookmarklet-steps\">\n            <ol className=\"my-5 order-list-bookmarklet\">\n              <li className=\"steps-title pl-4\">\n                <div className=\"text-body font-medium\">Make sure your bookmarks bar is visible</div>\n                <div className=\"mt-1 text-sm steps-details\">\n                  {this.getContentBasedOnBrowser()}\n                </div>\n              </li>\n              <li className=\"steps-title pl-4 mt-5\">\n                <div className=\"text-body font-medium\">Add to your Bookmarks bar</div>\n                <div className=\"mt-1 text-sm steps-details\">\n                  Click the Add to M+A button and drag it to your Bookmarks bar.\n                </div>\n                <div className=\"bookmarklet-steps-img mt-1\">\n                  <img className=\"bookmarklet-example-icon\"\n                    src={CDNImages.BOOKMARKLET_EXAMPLE}\n                  />\n                </div>\n              </li>\n              <li className=\"steps-title pl-4 mt-5\">\n                <div className=\"text-body font-medium\">Give it a go!</div>\n                <div className=\"mt-1 text-sm steps-details\">\n                  Go to the <a className=\"bookmarklet-link font-medium\" href={BOOKMARKLET_STEP_THREE_PRODUCT_LINK} target='_blank' tabIndex=\"0\">WubbaNub Elephant Pacifier</a> on target.com and click on your NEW M+A button.\n                </div>\n              </li>\n            </ol>\n          </div>\n        </div>\n      </div>\n    )\n    this.modalFooterButtons = (\n      <>\n        {/* TODO: Uncomment this if needed */}\n        {/* <a tabindex=\"0\" className=\"bookmarklet-link mr-auto\" onClick={() => this.doneBookmarkletHandler()}>I Already Have M+A Button</a> */}\n        <a\n          className=\"px-3 py-1 bookmarklet-disable-btn text-body font-medium\"\n          href={\"mailto:\" + IMPORT_REGISTRY_EMAIL}\n          target='_blank'\n          tabindex=\"0\"\n        >Email Us For Help</a>\n        <Button\n          variant=\"primary\"\n          className=\"px-4 py-1 font-weight-bold font-medium text-body\"\n          onClick={() => this.doneBookmarkletHandler()}\n        >Done</Button>\n      </>\n    )\n  }\n\n  getContentBasedOnBrowser = () => {\n    // Get the user-agent string\n    let userAgentString =\n      navigator.userAgent;\n\n    // Detect Chrome\n    let chromeAgent =\n      userAgentString.indexOf(\"Chrome\") > -1;\n\n    // Detect Internet Explorer\n    let edgeAgent =\n      userAgentString.indexOf(\"Edg\") > -1 || userAgentString.indexOf(\"Edge\") > -1\n\n    // Detect Firefox\n    let firefoxAgent =\n      userAgentString.indexOf(\"Firefox\") > -1;\n\n    // Detect Safari\n    let safariAgent =\n      userAgentString.indexOf(\"Safari\") > -1;\n\n    // Discard Safari since it also matches Chrome\n    if ((chromeAgent) && (safariAgent))\n      safariAgent = false;\n\n    if (edgeAgent) {\n      safariAgent = false;\n      chromeAgent = false;\n    }\n    console.log(edgeAgent)\n    if (chromeAgent) {\n      return M_A_BUTTON_CONTENT[\"Chrome\"];\n    } else if (safariAgent) {\n      return M_A_BUTTON_CONTENT[\"Safari\"];\n    } else if (edgeAgent) {\n      return M_A_BUTTON_CONTENT[\"Edge\"];\n    } else if (firefoxAgent) {\n      return M_A_BUTTON_CONTENT[\"Firefox\"];\n    } else {\n      return M_A_BUTTON_CONTENT[\"Chrome\"]\n    }\n  }\n\n\n\n  render() {\n    return (\n      !this.props.stateRegistryInfo.isMaButtonConfigured ?\n        <div className=\"d-none d-xl-block\">\n          <div className=\"py-2 bookmarklet-section\" onClick={this.openAddBookmarkletModal}>\n            <div className=\"row\">\n              <div className=\"col flex-grow-0\">\n                {/* TODO: Add M$A Icon once added */}\n              </div>\n              <div className=\"col\">\n                <h4>Get M+A Button</h4>\n                <p className=\"text-sm mt-1\">M+A Button lets you add product from any store directly to Monica+Andy Baby\n            Registry.</p>\n                <a tabindex=\"0\" className=\"bookmarklet-link mt-1 text-sm\" onClick={(ev) => this.maButtonConfiguredhandler(ev)}>I already have it</a>\n              </div>\n            </div>\n          </div>\n          <Modal\n            show={this.state.show}\n            updateModal={this.state.updateModal}\n            title={this.modalTitle}\n            titleContent={this.modalTitleContent}\n            footer={this.modalFooterButtons}\n            closeModal={this.modalCloseHandler}>\n            {this.modalBody}\n          </Modal>\n        </div>\n        : null\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    stateRegistryInfo: state.registry.info,\n  }\n}\n\n\nexport default connect(\n  mapStateToProps\n)(BookmarkletSection);","import React from \"react\";\nimport \"./CategoryPill.scss\";\n\nconst CategoryPill = (props) => {\n  return (\n    <div className={[\"import-registry-category-pill text-sm p-1\", props.className ? props.className : \"\"].join(\" \")}>\n      <div className=\"d-flex align-items-center\">\n        <p>{props.mainCategory+\": \"+props.name}</p>\n        <i className=\"icon-close remove-category-pill-icon ml-2\" onClick={props.removeCategory}/>\n      </div>\n    </div>\n  );\n}\n\nexport default CategoryPill;\n","import React, {createRef, useState} from \"react\";\nimport {useDispatch, useSelector} from 'react-redux';\nimport \"./AddGiftAnotherStore.scss\";\nimport Counter from \"../../counter/Counter\";\nimport TogglePills from \"../toggle-pills/TogglePills\";\nimport RadioButton from \"../../radio-button/RadioButton\";\nimport SelectCategory from \"../../select-category/SelectCategory\";\nimport {setAnotherStoreProductInfo} from \"modules/my-registry/MyRegistryActions\";\nimport {getScrapedProduct} from \"api/axios\";\nimport {toast} from 'react-toastify';\nimport CategoryPill from \"../import-registry/category-pill/CategoryPill\";\nimport defaultData from \"data/ReducerDefaultData.json\";\nimport {updateMushHaveTourFlag, updateGroupGiftTourFlag, getRefinedPrice} from \"utils/commonFunction\";\nimport {MUST_HAVE_STEPS, GROUP_GIFT_STEPS, SETTINGS_LINKS, HTTPS_REGEX} from 'utils/constants';\nimport Tour from 'reactour';\nimport TourCard from 'modules/commons/components/tour-card/TourCard';\nimport Button from \"../../button-component/ButtonComponent\";\nimport Modal from \"../../modal-component/ModalComponent\";\nimport {clearAnotherStoreProductInfo} from \"../../../../my-registry/MyRegistryActions\";\nimport ConfirmUrlChangeModal from \"../../confirm-url-change-modal/ConfirmUrlChangeModal\";\n\nconst AddGiftAnotherStore = (props) => {\n\n  const PRICE_REGEX_WHILE_ENTERING = /^[0-9]+.{0,1}[0-9]{0,2}?$/g\n\n  const MAX_IMAGE_SIZE = 5000000; // 5MB\n  const ACCEPTED_IMAGE_TYPE = [\n    'image/jpg',\n    'image/jpeg',\n    'image/png'\n  ]\n\n  const [categoryModalShow, setCategoryModalVisible] = useState(false);\n  const [hideProductDetails, setHideProductDetails] = useState(true);\n  const [showLoading, setshowLoading] = useState(false);\n\n  const [btnHasFocus, setBtnHasFocus] = useState(false)\n  const [inputHasFocus, setInputHasFocus] = useState(false)\n  const [itemUrl, setItemUrl] = useState(\"\")\n  const [currentItemLink, setCurrentItemLink] = useState(\"\")\n  const [showLearnMore, setShowLearnMore] = useState(false)\n  const [learnMoreCashAccept, setLearnMoreCashAccept] = useState(false)\n  const [changeUrlConfirmationModal, setChangeUrlConfirmationModal] = useState(false)\n  const [backendError, setBackendError] = useState(\"\")\n\n  let inputRef = React.createRef()\n\n  const dispatch = useDispatch();\n  const stateRegistryInfo = useSelector(state => state.registry.info)\n  const productInfo = useSelector(state => state.myRegistry.anotherStoreProduct)\n\n  const productImage = useSelector(state => state.myRegistry.anotherStoreProduct.productImage)\n  const productName = useSelector(state => state.myRegistry.anotherStoreProduct.productName)\n  const category = useSelector(state => state.myRegistry.anotherStoreProduct.category)\n  const quantity = useSelector(state => state.myRegistry.anotherStoreProduct.quantity)\n  const price = useSelector(state => state.myRegistry.anotherStoreProduct.price)\n  const howToGift = useSelector(state => state.myRegistry.anotherStoreProduct.howToGift)\n  const note = useSelector(state => state.myRegistry.anotherStoreProduct.note)\n  const mustHave = useSelector(state => state.myRegistry.anotherStoreProduct.mustHave)\n  const groupGift = useSelector(state => state.myRegistry.anotherStoreProduct.groupGift)\n  const [isTourOpen, setIsTourOpen] = useState(false)\n  const [isMustHaveTour, setIsMustHaveTour] = useState(false)\n  const [isGroupGiftTour, setIsGroupGiftTour] = useState(false)\n  const [steps, setSteps] = useState([])\n\n  const imageInput = createRef()\n  let doNotSearch = false\n\n  const howToGiftOptions = [\n    {\n      id: 1,\n      text: \"Get cash equivalent for this gift\",\n      content: (\n        <div className=\"add-gift-radio-body\">\n          <p className=\"text-body\">Get cash equivalent for this gift</p>\n          <p className=\"text-sm mt-1\">Choose this option for the best purchase experience.</p>\n        </div>\n      ),\n      subContent: (\n        <div>\n          {stateRegistryInfo?.user?.bankAccounts.length <= 0 ?\n            <a className=\"text-sm edit-gift-links mt-1 mr-3\" href={SETTINGS_LINKS.BANK_ACCOUNT}>Add bank details</a>\n            : null}\n          <a className=\"text-sm edit-gift-links mt-1\" href=\"#\"\n             onClick={(ev) => learnMoreLinkClickHandler(ev, true)}>Learn More</a>\n        </div>\n      ),\n      learnMoreContent: (\n        <>\n          <p className=\"text-body edit-gift-learn-more-modal-text mt-3\">When you choose this option, the money for\n            the gift (including shipping) will be transferred to your\n            bank account.</p>\n\n          <p className=\"text-body edit-gift-learn-more-modal-text mt-4\">When the time is right for you, youll click\n            through to order directly from the website and have it\n            delivered to your home.</p>\n\n          <p className=\"text-body edit-gift-learn-more-modal-text mt-4\">This helps decrease the number of duplicate\n            gifts, keeps your returns to a minimum, and gives you control\n            over when you receive the gift.</p>\n\n          <p className=\"text-body edit-gift-learn-more-modal-text mt-4\"><a href={SETTINGS_LINKS.BANK_ACCOUNT}\n                                                                           target=\"_blank\"\n                                                                           className=\"edit-gift-links\">Connect your\n            bank account to your profile,</a> if you havent already.</p>\n        </>\n      )\n    },\n    {\n      id: 2,\n      text: \"Send your guests to the stores website to purchase and ship now.\",\n      content: (\n        <div className=\"add-gift-radio-body\">\n          <p className=\"text-body\">Send your guests to the stores website to purchase and ship now.</p>\n        </div>\n      ),\n      subContent: (\n        <a className=\"text-sm edit-gift-links mt-1\" href=\"#\"\n           onClick={(ev) => learnMoreLinkClickHandler(ev, false)}>Learn More</a>\n      ),\n      learnMoreContent: (\n        <p className=\"text-body edit-gift-learn-more-modal-text mt-1\">Please note, M+A is unable to accept returns\n          or manage shipping when you choose this option.</p>\n      )\n    }\n  ]\n\n  const learnMoreLinkClickHandler = (ev, cashAcceptedLearnMore) => {\n    ev.preventDefault()\n    ev.stopPropagation()\n\n    setShowLearnMore(true)\n    props.changeTempCloseModal(true)\n    setLearnMoreCashAccept(cashAcceptedLearnMore)\n  }\n\n  const closeLearnMoreModalHandler = () => {\n    setShowLearnMore(false)\n    props.changeTempCloseModal(false)\n  }\n\n  // Update state function\n  const changeProductUrl = (url) => {\n    let prodInfo = {...productInfo};\n    prodInfo.productUrl = url;\n    dispatch(setAnotherStoreProductInfo(prodInfo));\n  }\n\n  const changeProductImage = (image) => {\n    let prodInfo = {...productInfo};\n    prodInfo.productImage = image;\n    dispatch(setAnotherStoreProductInfo(prodInfo));\n  }\n\n  const changeProductName = (name) => {\n    let prodInfo = {...productInfo};\n    prodInfo.productName = name;\n    dispatch(setAnotherStoreProductInfo(prodInfo));\n  }\n\n  const setCategory = (category) => {\n    let prodInfo = {...productInfo};\n    prodInfo.category = category;\n    dispatch(setAnotherStoreProductInfo(prodInfo));\n  }\n\n  const setQuantity = (quantity) => {\n    let prodInfo = {...productInfo};\n    prodInfo.quantity = quantity;\n    dispatch(setAnotherStoreProductInfo(prodInfo));\n  }\n\n  const changePrice = (price) => {\n    let prodInfo = {...productInfo};\n    prodInfo.price = price;\n    dispatch(setAnotherStoreProductInfo(prodInfo));\n  }\n\n  const changeHowToGift = (howToGift) => {\n    let prodInfo = {...productInfo};\n    prodInfo.howToGift = howToGift;\n    dispatch(setAnotherStoreProductInfo(prodInfo));\n  }\n\n  const changeNote = (note) => {\n    let prodInfo = {...productInfo};\n    prodInfo.note = note;\n    dispatch(setAnotherStoreProductInfo(prodInfo));\n  }\n\n  const toggleMustHave = (mustHave) => {\n    let prodInfo = {...productInfo};\n    prodInfo.mustHave = mustHave;\n    dispatch(setAnotherStoreProductInfo(prodInfo));\n\n    if (!stateRegistryInfo.isMustHaveApplied) {\n      let steps = {...MUST_HAVE_STEPS}\n      steps[0].selector = '[data-tut=\"must-have-tour\"]';\n      steps.length = 1;\n\n      setIsMustHaveTour(true)\n      setSteps(steps)\n      setIsTourOpen(true)\n    }\n  }\n\n  const toggleGroupGift = (groupGift) => {\n    let prodInfo = {...productInfo};\n    prodInfo.groupGift = groupGift;\n    dispatch(setAnotherStoreProductInfo(prodInfo));\n\n    if (!stateRegistryInfo.isGroupGiftApplied) {\n      let steps = {...GROUP_GIFT_STEPS}\n      steps[0].selector = '[data-tut=\"group-gift-tour\"]';\n      steps.length = 1;\n\n      setIsGroupGiftTour(true)\n      setSteps(steps)\n      setIsTourOpen(true)\n    }\n  }\n\n  const openCategorySelect = (ev) => {\n    ev.preventDefault();\n    setCategoryModalVisible(true);\n  }\n\n  const incrementQuantity = () => {\n    setQuantity(quantity + 1)\n  }\n\n  const decrementQuantity = () => {\n    if (quantity - 1 > 0) {\n      setQuantity(quantity - 1)\n    }\n  }\n\n  const priceChangeHandler = (ev) => {\n    ev.persist();\n\n    if ((ev.target.value.length > 0 && (Number(ev.target.value[ev.target.value.length - 1]) >= 0 || ev.target.value[ev.target.value.length - 1] === \".\")) && ev.target.value.match(PRICE_REGEX_WHILE_ENTERING) || ev.target.value.length <= 0) {\n      // const newPrice = Number(ev.target.value);\n      changePrice(ev.target.value);\n    }\n  }\n\n  const productNameChangeHandler = (ev) => {\n    ev.persist();\n    changeProductName(ev.target.value)\n  }\n\n  const noteChangeHandler = (ev) => {\n    ev.persist();\n    changeNote(ev.target.value);\n  }\n\n\n  const selectFileHandler = (ev) => {\n    if (imageInput.current && imageInput.current.files.length > 0) {\n      const file = imageInput.current.files[0]\n\n      // Verifying file is image\n      if (ACCEPTED_IMAGE_TYPE.includes(file.type)) {\n        if (file.size <= MAX_IMAGE_SIZE) {\n          let reader = new FileReader();\n\n          reader.onload = function (e) {\n            const newProductImage = {\n              type: \"custom\",\n              value: e.target.result,\n              file: file,\n              fileType: file.type,\n              fileName: file.name\n            }\n            changeProductImage(newProductImage);\n          }\n\n          reader.readAsDataURL(file); // Converting to base64 string\n        } else {\n          toast.error(\"File size exceeds the limit\");\n        }\n      } else {\n        toast.error(\"Please select valid image.\");\n      }\n    }\n  }\n\n  // const getRefinedPrice = (price) => {\n  //   let newPrice = \"\";\n  //   for (let char of price) {\n  //     if (char !== \".\") {\n  //       if (Number.isInteger(Number(char))) {\n  //         newPrice += char\n  //       }\n  //     } else {\n  //       newPrice += char\n  //     }\n  //   }\n  //   return newPrice;\n  // }\n\n  const fetchProductDetail = (itemUrl) => {\n\n    try {\n      new URL(itemUrl);\n    } catch {\n      setBackendError(\"Invalid Store Url\")\n      // toast.error(\"Invalid Store Url\")\n      return;\n    }\n    setCurrentItemLink(itemUrl)\n    changeProductUrl(itemUrl);\n    inputRef.current.disabled = true\n    const reqData = {\n      item_url: itemUrl\n    }\n    let ctgry = category;\n    let data = defaultData.myRegistry.defaultAnotherStoreProductInfo;\n    data.category = ctgry\n    dispatch(setAnotherStoreProductInfo(data))\n    setshowLoading(true);\n    setHideProductDetails(true);\n    setBackendError(\"\")\n    getScrapedProduct(reqData).then(res => {\n      const resData = res.data;\n      if (resData) {\n        let prodInfo = {...productInfo};\n        prodInfo.productUrl = itemUrl;\n        if (resData.img) {\n          prodInfo.productImage = {\n            type: \"url\",\n            value: resData.img\n          };\n        } else {\n          prodInfo.productImage = {}\n        }\n        if (resData.title) {\n          prodInfo.productName = resData.title;\n        } else {\n          prodInfo.productName = \"\"\n        }\n        if (resData.price) {\n          prodInfo.price = getRefinedPrice(resData.price);\n        } else {\n          prodInfo.price = \"\"\n        }\n        if (!props.addMyOwn) {\n          prodInfo.category = []\n        }\n        dispatch(setAnotherStoreProductInfo(prodInfo));\n        setshowLoading(false);\n        setHideProductDetails(false);\n      }\n    }).catch(err => {\n      if (err.response?.status === 500) {\n        toast.error(\"Something went wrong!! Please try again.\")\n      } else {\n        if (err.response?.data?.error_message) {\n          setBackendError(err.response.data.error_message)\n        } else {\n          setBackendError(\"Invalid Store Url\")\n          // toast.error(\"Invalid Store Url\")\n        }\n      }\n\n      console.error(err.response)\n      setshowLoading(false);\n      return false;\n    })\n  }\n\n  const checkUrlAndGetRegistryItems = () => {\n    doNotSearch = false\n    let url = itemUrl\n    if (!url.match(HTTPS_REGEX)) {\n      url = \"https://\" + url\n    }\n    setItemUrl(url)\n    // Checking for valid url\n    try {\n      new URL(url);\n    } catch {\n      setBackendError(\"Invalid Store Url\")\n      // toast.error(\"Invalid Store Url\")\n      return;\n    }\n    if (inputRef.current) {\n      inputRef.current.blur();\n    }\n    setInputHasFocus(false)\n    setBtnHasFocus(false)\n    fetchProductDetail(url)\n  }\n\n  const submitStoreUrl = (ev) => {\n    ev.persist();\n    ev.preventDefault();\n    if (ev.keyCode === 13) { //Enter keycode is 13\n      setBtnHasFocus(false)\n      doNotSearch = true\n      ev.target.blur()\n      checkUrlAndGetRegistryItems()\n    }\n  }\n\n  const removeSelectedCategory = (categoryId) => {\n    if (productInfo.category.length) {\n      let finalcategory = productInfo.category.filter(category => category.id !== categoryId);\n      let prodInfo = {...productInfo};\n      prodInfo.category = finalcategory;\n      dispatch(setAnotherStoreProductInfo(prodInfo));\n    }\n  }\n\n  const closeChangeConfirmModal = () => {\n    setChangeUrlConfirmationModal(false);\n    props.changeTempCloseModal(false)\n  }\n\n  // Setting default HowToGiftOption\n  if (!howToGift.id) {\n    changeHowToGift(howToGiftOptions[0])\n  }\n\n  const closeTour = () => {\n    // For must-have\n    if (isMustHaveTour && !isGroupGiftTour) {\n      setIsMustHaveTour(false)\n      updateMushHaveTourFlag(stateRegistryInfo, dispatch)\n    }\n\n    // For Group Gift\n    if (!isMustHaveTour && isGroupGiftTour) {\n      setIsGroupGiftTour(false)\n      updateGroupGiftTourFlag(stateRegistryInfo, dispatch)\n    }\n\n    setIsTourOpen(false)\n  }\n\n  const setInputFocus = (input) => {\n    input = {...input}\n    if (input.current) {\n      input.current.disabled = false;\n      input.current.focus();\n      setInputHasFocus(true);\n      setBtnHasFocus(true);\n    }\n  }\n\n  const changeItemUrl = (input) => {\n    doNotSearch = true\n    setBackendError(\"\")\n    dispatch(clearAnotherStoreProductInfo())\n    setHideProductDetails(true)\n    closeChangeConfirmModal()\n    setTimeout(setInputFocus(input), 100)\n  }\n\n  const openChangeConfirmModal = (e) => {\n    e.preventDefault();\n    setChangeUrlConfirmationModal(true)\n    props.changeTempCloseModal(true)\n  }\n\n  const inputOnBlurHandler = (e) => {\n    setInputHasFocus(false)\n    if (e.target.value.length > 0 && !doNotSearch) {\n      checkUrlAndGetRegistryItems()\n    }\n    if (doNotSearch) {\n      doNotSearch = !doNotSearch\n    }\n  }\n\n  return (\n    <>\n      <div className=\"row add-gift-another-store\">\n        <div className=\"col\">\n          <div className=\"row\">\n            <div className=\"col m-a-input-container\">\n              <p className=\"text-sm font-medium add-gift-store-label\">Store</p>\n              <div className=\"position-relative mt-1\">\n                <input type=\"text\" className={[\"w-100 mb-0 pl-2 py-1 text-body input-background change-link-input\",\n                  (itemUrl.length > 0 && !inputHasFocus && !btnHasFocus) || (itemUrl.length > 0 && btnHasFocus) ? \"pr-15 pr-md-14\" : \"\",\n                  backendError ? \"add-gift-store-input-error\" : \"\"\n                ].join(\" \")}\n                       placeholder=\"Paste a product link that you want to add in your Monica and Andy Registry\"\n                       onKeyUp={(ev) => submitStoreUrl(ev)}\n                       onChange={(ev) => setItemUrl(ev.target.value)}\n                       onFocus={() => {\n                         setInputHasFocus(true);\n                         setBtnHasFocus(true);\n                       }}\n                       onBlur={(e) => inputOnBlurHandler(e)}\n                       ref={inputRef}\n                       value={itemUrl}\n                />\n                {/* <a className=\"text-sm\" href=\"#\">Change</a> */}\n                {itemUrl.length > 0 && !inputHasFocus && !btnHasFocus ?\n                  <a tabindex\n                     className=\"add-gift-another-store-change-link text-sm font-medium import-registry-category-link\"\n                     href=\"#\"\n                     onClick={(e) => openChangeConfirmModal(e)}>Change</a> : null}\n\n                {itemUrl.length > 0 && btnHasFocus ?\n                  <div className=\"add-gift-another-store-submit-url-section\">\n                    <button className=\"url_edit_icons_cancel mr-2 mr-md-3\"\n                            onClick={() => {\n                              setItemUrl(\"\");\n                              setInputHasFocus(true);\n                              setBtnHasFocus(false);\n                            }}\n                    />\n                    <button className=\"url_edit_icons_check\" onClick={checkUrlAndGetRegistryItems}/>\n                  </div>\n                  : null}\n              </div>\n              {backendError ?\n                <p className=\"mb-0 text-sm mt-1 add-gift-store-input-error-text\">{backendError}</p>\n                : null}\n            </div>\n          </div>\n\n          <div className={[\"row mt-4\"].join(\" \")}>\n            {hideProductDetails ? showLoading ?\n              <div className=\"col text-center\">\n                <div className=\"hide-product-view py-13\">\n                  <div class=\"spinner-border\" role=\"status\">\n                    <span class=\"sr-only\">Loading...</span>\n                  </div>\n                  <h4 className=\"hide-product-details m-auto\">Please wait while we fetch the product details</h4>\n                </div>\n              </div>\n              :\n              <div className=\"col text-center\">\n                <div className=\"hide-product-view py-13\">\n                  <h4 className=\"hide-product-details m-auto\">Please paste product link above to view details here</h4>\n                </div>\n              </div>\n              :\n              <>\n                <div className=\"col-12 col-md-5 add-gift-image-select\">\n                  <div className=\"mr-3 mt-2 position-relative\">\n                    {productImage?.value ?\n                      <img\n                        src={productImage.value}\n                        alt=\"Product Image\"\n                      />\n                      : null}\n\n                    <i className=\"custom-icon-camera p-1\" onClick={() => {\n                      imageInput.current.click()\n                    }}/>\n                    {/* TODO: Change above icon to camera icon */}\n\n                    <input type=\"file\" className=\"d-none\" accept={ACCEPTED_IMAGE_TYPE.join(\",\")} ref={imageInput}\n                           onChange={(ev) => selectFileHandler(ev)}/>\n                  </div>\n                </div>\n                <div className=\"col-12 col-md-7\">\n                  <div className=\"ml-3 mt-2\">\n                    <div className=\"row\">\n                      <div className=\"col m-a-input-container\">\n                        <p className=\"text-sm font-medium add-gift-store-label\">Product Name</p>\n                        <textarea\n                          className=\"w-100 mt-1 h1 p-2\"\n                          rows=\"2\"\n                          value={productInfo.productName}\n                          onChange={(ev) => productNameChangeHandler(ev)}\n                        />\n                      </div>\n                    </div>\n\n                    <div className=\"row mt-4\">\n                      <div className=\"col\">\n                        <div className=\"m-a-input-container mr-2\">\n                          <p className=\"text-sm font-medium add-gift-store-label\">Price</p>\n                          <div className=\"price-input mt-1\">\n                            <input\n                              type=\"text\"\n                              className={[\"w-100 pl-2 pr-1 py-1 mb-0 text-body pl-5\", props.fieldErrors.price ? \"add-gift-store-input-error\" : \"\"].join(\" \")}\n                              value={price}\n                              onChange={(ev) => priceChangeHandler(ev)}\n                            />\n                          </div>\n                          {props.fieldErrors.price ?\n                            <span\n                              className=\"text-sm add-gift-store-input-error-text\">{props.fieldErrors.price}</span>\n                            : null}\n                          {/*<span className=\"price-input text-body\">$</span>*/}\n                        </div>\n                      </div>\n                      <div className=\"col\">\n                        <div className=\"m-a-input-container\">\n                          <p className=\"text-sm font-medium add-gift-store-label\">Quantity</p>\n                          <Counter\n                            className=\"mt-1\"\n                            type='square'\n                            counter={quantity}\n                            incrementHandler={incrementQuantity}\n                            decrementHandler={decrementQuantity}\n                          />\n                        </div>\n                      </div>\n                    </div>\n\n                    {!props.addMyOwn ?\n                      <>\n                        <div className=\"row mt-5\">\n                          <div className=\"col d-flex\">\n                            <p className=\"text-sm add-gift-store-label font-medium mb-1\">Category</p>\n                            <a className=\"text-sm ml-2 add-gift-link font-medium\" href=\"#\" tabindex=\"0\"\n                               onClick={(ev) => openCategorySelect(ev)}>Add</a>\n                            {/* <div className=\"position-relative\">\n                            <input type=\"text\" value={category.displayName} readOnly={true}\n                                   className=\"w-100 pl-2 pr-12 py-1 text-body input-background change-link-input\"/>\n                          </div> */}\n                          </div>\n                        </div>\n                        <div className=\"row mt-2\">\n                          <div className=\"col\">\n                            {category.map(cat => (\n                              <CategoryPill\n                                key={cat.id}\n                                mainCategory={cat.mainCategory}\n                                name={cat.categoryName}\n                                removeCategory={() => removeSelectedCategory(cat.id)}\n                                className=\"mt-2 mr-3\"\n                              />\n                            ))}\n                          </div>\n                        </div>\n                      </>\n                      : null}\n\n                    <div className=\"row mt-5\">\n                      <div className=\"col d-flex\">\n                        <TogglePills\n                          dataTut=\"must-have-tour\"\n                          iconClass=\"custom-icon-heart\"\n                          activeClass={mustHave ? \"active-must-have custom-icon-heart-filled\" : null}\n                          onClick={() => toggleMustHave(!mustHave)}\n                          text=\"Must Have\"\n                          className=\"mr-2\"/>\n                        <TogglePills\n                          dataTut=\"group-gift-tour\"\n                          iconClass=\"custom-icon-group-gift\"\n                          activeClass={groupGift ? \"active-group-gift custom-icon-group-gift-filled\" : null}\n                          onClick={() => toggleGroupGift(!groupGift)}\n                          text=\"Group Gift\"\n                          className=\"mr-2\"/>\n                        {/* TODO: Change above guest icon one added */}\n                      </div>\n                    </div>\n\n                    <div className=\"row mt-5\">\n                      <div className=\"col\">\n                        <p className=\"text-sm font-medium add-gift-store-label\">How to gift?</p>\n                        {howToGiftOptions.map((option, index) => (\n                          <div className={index === 0 ? \"mt-1\" : \"mt-3\"} key={\"how-to-gift-option-\" + option.id}>\n                            <RadioButton\n                              name=\"how-to-gift\"\n                              // display={option.text}\n                              id={`add-another-store-${index}`}\n                              subContent={option.subContent}\n                              checked={option.id === howToGift.id ? true : null}\n                              changeHandler={() => changeHowToGift(option)}\n                            >{option.content}</RadioButton>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n\n                    <div className=\"row mt-5 mb-3\">\n                      <div className=\"col m-a-input-container\">\n                        <p className=\"text-sm font-medium add-gift-store-label\">Notes</p>\n                        <textarea className=\"w-100 mt-1 text-body p-1 m-a-resize-textarea mb-2\"\n                                  rows=\"2\"\n                                  placeholder=\"Write a note for your friends and family\"\n                                  value={note}\n                                  onChange={(ev) => noteChangeHandler(ev)}\n                        />\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </>\n            }\n          </div>\n        </div>\n      </div>\n      <Modal\n        show={showLearnMore}\n        title={learnMoreCashAccept ? howToGiftOptions[0].text : howToGiftOptions[1].text}\n        size=\"md\"\n        closeIconClass=\"mb-auto\"\n        footer={(\n          <Button variant=\"primary\" className=\"px-6 py-1\" onClick={closeLearnMoreModalHandler}>Ok, got\n            it!</Button>\n        )}\n        closeModal={closeLearnMoreModalHandler}>\n        {learnMoreCashAccept ? howToGiftOptions[0].learnMoreContent : howToGiftOptions[1].learnMoreContent}\n      </Modal>\n      <SelectCategory\n        showModal={categoryModalShow}\n        closeModal={setCategoryModalVisible}\n        currentCategory={category}\n        changeCurrentCategory={setCategory}\n      />\n      {isTourOpen ?\n        <Tour\n          highlightedMaskClassName='tour-bg'\n          steps={steps}\n          isOpen={isTourOpen}\n          CustomHelper={TourCard}\n          onRequestClose={() => closeTour()}/>\n        : null}\n      {/* Opening this modal when user clicks change url link */}\n      <ConfirmUrlChangeModal\n        show={changeUrlConfirmationModal}\n        closeModalHandler={closeChangeConfirmModal}\n        confirmClickHandler={() => changeItemUrl(inputRef)}\n      />\n    </>\n  )\n}\n\nexport default AddGiftAnotherStore;","import React, { Component } from 'react';\nimport {\n  incrementQuantity,\n  decrementQuantity,\n  clearAnotherStoreProductInfo,\n  setAnotherStoreProductInfo,\n  setActiveRecommandationVariant,\n  setActiveRecommandationVariantBySize,\n  setActiveRecommandationSizeVariant\n} from \"../../../my-registry/MyRegistryActions\";\nimport CardItem from \"modules/commons/components/card-item/CardItem\";\nimport { connect } from \"react-redux\";\nimport \"./ViewRecommend.scss\";\nimport MoreOption from \"../more-option/MoreOption\";\nimport { GET_MA_VARIANT_BY_SIZE } from 'api/queries';\nimport { graphQL } from 'api/axios';\nimport Slider from \"react-slick\";\n// Import css files\nimport \"slick-carousel/slick/slick.css\";\nimport \"slick-carousel/slick/slick-theme.css\";\nimport { toast } from \"react-toastify\";\nimport { ADD_REGISTRY_ITEM as ADD_REGISTRY_ITEM_MUTATION } from 'api/mutations';\nimport BookmarkletSection from \"../add-gift/bookmarklet-section/BookmarkletSection\";\nimport AddGiftAnotherStore from \"../add-gift/add-gift-another-store/AddGiftAnotherStore\";\nimport Button from \"../button-component/ButtonComponent\";\nimport Modal from \"../modal-component/ModalComponent\";\nimport { getProducts as commonGetProducts, getCategories as commonGetCategories, getAllVarient, setActiveVariantSize } from \"../../../../utils/commonFunction\";\nimport { addProductHandler } from 'utils/commonFunction';\nimport { DEFAULT_BLOG_IMAGE } from 'utils/constants';\nimport moment from 'moment';\n\n\nclass ViewRecommend extends Component {\n\n  PRICE_REGEX = /(^[0-9]+(.?[0-9]{1,2})?$)/g\n\n  state = {\n    show: false,\n    closeTempModal: false,\n    updateModal: false,\n    viewDetailsBtn: true,\n    AddGiftAnotherStoreErrors: {},\n  }\n  modalTitle = \"\"\n  modalBody = \"\"\n  modalTitleContent = \"\"\n  cardRef = React.createRef()\n\n  clearModalData = () => {\n    this.modalTitle = \"\"\n    this.modalBody = \"\"\n    this.modalTitleContent = \"\"\n\n    this.props.dispatch(clearAnotherStoreProductInfo());\n  }\n\n  modalCloseHandler = () => {\n    this.clearModalData()\n    this.setState({\n      show: false,\n      AddGiftAnotherStoreErrors: {}\n    })\n  }\n\n  changeTempCloseModal = (value) => {\n    this.setState({\n      closeTempModal: value\n    })\n  }\n\n  moreOptionsData = [\n    // TODO add option list\n    {\n      name: \"View Item\",\n      action: () => alert(\"Clicked\")\n    },\n  ]\n  getCategoryId = () => {\n    const currentRecommendation = this.props.stateActiveCategory;\n    for (let parentCategory of this.props.stateChecklist) {\n      if (parentCategory.categoryName === currentRecommendation) {\n        return parentCategory.id\n      }\n      for (let childCategory of parentCategory.subCategories) {\n        if (childCategory.categoryName === currentRecommendation) {\n          return childCategory.id\n        }\n      }\n    }\n  }\n\n  // Checking if product data is valid or not\n  checkDataValidity = (storeProduct) => {\n    let errors = {}\n\n    // Valid store URL\n    try {\n      new URL(storeProduct.productUrl);\n    } catch {\n      alert(\"Invalid Store Url\");\n      return false;\n    }\n\n    // Valid Product Name\n    if (storeProduct.productName.length <= 0) {\n      alert(\"Invalid Product Name\");\n      return false;\n    }\n\n    // Valid Price\n    if ((storeProduct.price && Number(storeProduct.price) <= 0) || !storeProduct.price || !String(storeProduct.price).match(this.PRICE_REGEX)) {\n      errors['price'] = \"Invalid price\"\n      this.setState({\n        AddGiftAnotherStoreErrors: errors,\n      })\n      return false;\n    }\n\n    // Valid Quantity\n    if (storeProduct.quantity < 1) {\n      alert(\"Invalid Quantity\");\n      return false;\n    }\n\n    // // Valid Category\n    // if (!storeProduct.category.id) {\n    //   alert(\"Invalid Category\");\n    //   return false;\n    // }\n\n    return true;\n  }\n\n  // Adding Add on my own product to registry\n  addItemToRegistry = () => {\n    const storeProduct = this.props.stateAnotherStoreProduct;\n    const isValidData = this.checkDataValidity(storeProduct);\n    if (!isValidData) {\n      return;\n    }\n\n    let storeUrl = new URL(storeProduct.productUrl);\n    storeUrl = storeUrl.hostname.split(\".\")\n    const storeName = storeUrl[storeUrl.length - 2]\n\n    let formData = new FormData()\n\n    let data = {\n      query: ADD_REGISTRY_ITEM_MUTATION,\n      operationName: \"addRegistryItems\",\n      variables: {\n        \"registryId\": this.props.stateRegistryInfo.id,\n        \"input\": [{\n          \"storeName\": storeName,\n          \"items\": [{\n            \"title\": storeProduct.productName,\n            // TODO: change category\n            \"registryCategories\": storeProduct.category.length > 0 ? storeProduct.category.map(category => Number(category.id)) : null,\n            \"tags\": [],\n            \"storeItemUrl\": storeProduct.productUrl,\n            \"price\": storeProduct.price,\n            \"quantity\": storeProduct.quantity,\n            \"mostWanted\": storeProduct.mustHave,\n            \"isGroupGift\": storeProduct.groupGift,\n            \"note\": storeProduct.note\n          }]\n        }]\n      }\n    }\n\n    if (storeProduct.productImage.type === \"custom\") {\n      let map = {\n        images: [\"variables.input.0.items.0.images\"]\n      }\n      data.variables.input[0].items[0]['images'] = null;\n      formData.append(\"map\", JSON.stringify(map))\n      formData.append(\"images\", this.dataURItoBlob(storeProduct.productImage.value, storeProduct.productImage.fileType, storeProduct.productImage.fileName))\n    } else {\n      data.variables.input[0].items[0]['imageUrl'] = this.props.stateAnotherStoreProduct.productImage.value;\n    }\n\n    formData.append(\"operations\", JSON.stringify(data))\n\n    graphQL(formData).then(res => {\n      if (res.status === 200) {\n        // Successfully added product\n        commonGetProducts(this.props.stateRegistryInfo.id, this.props.dispatch);\n        commonGetCategories(this.props.stateRegistryInfo.id, this.props.dispatch);\n\n        toast.success((\n          <p><b>{storeProduct.productName}</b> added to your registry!</p>\n        ))\n        this.clearModalData();\n        this.modalCloseHandler();\n      }\n    }).catch(err => {\n      toast.error(\"Some error occurred.\");\n      console.error(err.message)\n    })\n  }\n\n  anotherStoreItemViewDetail = (storeProduct) => {\n    if (storeProduct.productUrl) {\n      window.open(storeProduct.productUrl, '_blank');\n    }\n  }\n\n  // Popping up Add on my own modal\n  addOnMyOwnClickHandler = (category) => {\n    this.clearModalData()\n    let newCategory = [{\n      ...category,\n      displayName: category.parentCategory + \" : \" + category.categoryName\n    }]\n    let prodInfo = { ...this.props.stateAnotherStoreProduct };\n    prodInfo.category = newCategory;\n    this.props.dispatch(setAnotherStoreProductInfo(prodInfo));\n\n    this.modalTitle = `Add my own ${category && category.isSubProduct && category.parentCategory ? `${category.parentCategory.categoryName} (${category.categoryName})` : category.categoryName}`\n    // this.modalTitle = `Add my own ${category && category.parentCategory ? category.parentCategory: \"\"}${category ? category.categoryName.toLowerCase() : \"\"}`\n    this.modalTitleContent = (\n      <>\n        {category.category.collectionUrl && !(this.props.products.length === 1 && this.props.products[0].isMaItem) ?\n          <div className={[\"row mt-2\", !this.props.stateRegistryInfo.isMaButtonConfigured ? \"mb-4\" : \"mb-2\"].join(\" \")}>\n            <div className=\"col\">\n              <div className=\"add-my-own-title d-flex py-2 px-4 justify-content-between align-items-center\">\n                <div className=\"pr-0 pr-md-17\">\n                  <p className=\"redirect-category-header font-medium\">M+A {category && category.isSubProduct && category.parentCategory ? `${category.parentCategory.categoryName} (${category.categoryName})` : category.categoryName}</p>\n                  <p className=\"mt-1 text-sm redirect-text\">{category.isSubProductTypes ? category.parentCategory.category.description : category.category.description}</p>\n                </div>\n                <div>\n                  <a\n                    className=\"font-medium px-3 py-1 redirect-btn\"\n                    href={category.category.collectionUrl}\n                    target=\"_blank\"\n                    tabIndex=\"0\">View all</a>\n                </div>\n              </div>\n            </div>\n          </div> : null}\n        {!this.props.stateRegistryInfo.isMaButtonConfigured ?\n          <div className=\"row mt-3 mb-4\">\n            <div className=\"col\">\n              <BookmarkletSection changeTempCloseModal={this.changeTempCloseModal}/>\n            </div>\n          </div> : null}\n      </>\n    )\n\n    this.setState((prevState, props) => ({\n      show: !prevState.show\n    }))\n  }\n\n  setActiveRecommandationVariantHandler = (product, variant) => {\n    let finalVariant = { ...variant }\n    finalVariant.activeSizeVariant = variant.allSizeVariant[0]\n    this.props.dispatch(setActiveRecommandationVariant(product.id, finalVariant));\n  }\n\n  render() {\n\n    const settings = {\n      dots: true,\n      infinite: false,\n      speed: 500,\n      slidesToShow: 3.2,\n      slidesToScroll: 1,\n      afterChange: (_) => {\n        // Toggling last dot active and inactive\n        let slickEl = document.getElementById(this.props.title.split(' ').join('-') + '-slick');\n        if (slickEl) {\n          let slickDotEl = slickEl.querySelector(\".slick-dots\")\n          if (slickDotEl) {\n            if (!slickDotEl.querySelector(\".slick-active\")) {\n              let slickDotList = slickDotEl.childNodes\n              if (slickDotList.length > 0) {\n                slickDotEl.lastChild.classList.add('slick-active')\n              }\n            }\n            else {\n              slickDotEl.lastChild.classList.remove('slick-active')\n            }\n          }\n        }\n      },\n      prevArrow: <button type=\"button\" className=\"slick-prev slick-prev-btn\"><i className=\"icon-chevron-left slick-icon\" />\n      </button>,\n      nextArrow: <button type=\"button\" className=\"slick-next slick-next-btn\"><i className=\"icon-chevron-right slick-icon\" />\n      </button>,\n      responsive: [{\n        breakpoint: 576,\n        settings: {\n          slidesToShow: 1.1,\n          prevArrow: false,\n          nextArrow: false,\n          arrows: false\n        }\n      },\n      {\n        breakpoint: 927,\n        settings: {\n          slidesToShow: 2.1\n        }\n      },\n      {\n        breakpoint: 1025,\n        settings: {\n          slidesToShow: 2.5\n        }\n      }\n      ],\n    };\n\n    let modalBody = <AddGiftAnotherStore\n      addMyOwn={true}\n      changeTempCloseModal={this.changeTempCloseModal} \n      fieldErrors={this.state.AddGiftAnotherStoreErrors}\n      />\n\n    let modalFooterButtons = (\n      <>\n        <Button\n          variant=\"secondary\"\n          className=\"px-3 py-1 font-weight-bold font-medium text-body\"\n          onClick={() => this.anotherStoreItemViewDetail(this.props.stateAnotherStoreProduct)}\n          disabled={this.props.stateAnotherStoreProduct && this.props.stateAnotherStoreProduct.productName ? false : true}\n        >View Details</Button>\n        <Button\n          variant=\"primary\"\n          className=\"px-4 py-1 font-weight-bold font-medium text-body\"\n          onClick={this.addItemToRegistry}\n          disabled={!this.props.stateAnotherStoreProduct.productName}\n        >Save & Close</Button>\n      </>\n    )\n    return (\n      <>\n        <div className=\"recommended-cart py-6\" data-tut={this.props.stepTwoForTour}>\n          <div className=\"row\">\n            <div className=\"col title d-flex align-items-center\">\n              <h2>{this.props.title}</h2>\n              {/* <span className=\"text-sm sub-title\">Recommended </span> */}\n              {this.props.category.totalItemsCount ?\n                <p className=\"text-sm sub-title-progess ml-2 px-1\">{this.props.category.addedItemsCount}/{this.props.category.totalItemsCount} added</p>\n                : null}\n\n            </div>\n          </div>\n          <div className=\"pt-6\" id={this.props.title.split(' ').join('-') + '-slick'}>\n            <Slider {...settings}>\n              {this.props.products.map((card, index) =>\n                !card.isMaItem || (card.isMaItem && card.maItemVariantItemRecommendation.length > 0) ?\n                  <div className=\"cart-view\" ref={this.cardRef} key={\"CardItem-\" + index}>\n                    <CardItem\n                      className=\"mr-4\"\n                      key={\"CardItem-\" + index}\n                      data={card}\n                      activeVariant={card.activeVariant}\n                      getAllVarient={() => getAllVarient(card, this.props.stateRegistryInfo, this.props.dispatch)}\n                      incrementQuantityHandler={() => this.props.dispatch(incrementQuantity(card.id, 1))}\n                      decrementQuantityHandler={() => this.props.dispatch(decrementQuantity(card.id, 1))}\n                      addProductHandler={(data) => addProductHandler(data, this.props.stateAddedProducts, this.props.stateRegistryInfo, this.props.dispatch)}\n                      setActiveRecommandationVariantHandler={(variant) => this.setActiveRecommandationVariantHandler(card, variant)}\n                      setActiveVariantSize={(id) => setActiveVariantSize(card, id, this.props.dispatch)}\n                    />\n                  </div> : null\n              )}\n              <div>\n                <div className=\"add-my-own-card text-center mr-4 d-flex flex-column align-items-center justify-content-center\"\n                  style={{ height: (this.cardRef.current && this.cardRef.current < 534) ? this.cardRef.current.offsetHeight + 'px' : '534px' }}\n                  onClick={() => this.addOnMyOwnClickHandler(this.props.category)}\n                >\n                  <button className=\"add-my-own-button\" />\n                  <div className=\"text-body font-medium mt-5\">\n                    <p>Add my own</p>\n                    <p className=\"px-4\">{` ${this.props.category && this.props.category.isSubProduct && this.props.category.parentCategory ? `${this.props.category.parentCategory.categoryName} (${this.props.category.categoryName})` : this.props.category.categoryName}`}</p>\n                  </div>\n                </div>\n              </div>\n            </Slider>\n          </div>\n          {this.props.blogs ?\n            <div className=\"mt-6 card-buttom d-flex\">\n              {/* TODO: Change text to dynamic */}\n              <div>\n                <img className=\"blog-img\"\n                  src={this.props.blogs.image?.originalSrc ? this.props.blogs.image?.originalSrc : DEFAULT_BLOG_IMAGE}\n                  alt={this.props.blogs.title} />\n              </div>\n              <div className=\"pl-2 pl-md-4 my-auto\">\n                <div className=\"text-body card-buttom-title\">{this.props.blogs.title}</div>\n                <div className=\"card-buttom-subtext text-sm d-none d-md-inline-block\">\n                  {`by ${this.props.blogs.authorV2.name.length ? this.props.blogs.authorV2.name : this.props.blogs.authorV2.firstName + ' ' + this.props.blogs.authorV2.lastName}, ${moment(this.props.blogs.publishedAt).format('MMM DD, YYYY')}`}\n                </div>\n              </div>\n              <div className=\"text-sm my-auto mr-6 ml-md-auto ml-0 d-none d-md-inline-block\">\n                <a href={this.props.blogs.url} className=\"read-more\" target=\"_blank\" tabIndex=\"0\">Read more</a>\n              </div>\n            </div>\n          : null}\n        </div>\n\n        <Modal\n          show={this.state.show}\n          modalClassName={this.state.closeTempModal ? \"d-none\" : \"d-block\"}\n          updateModal={this.state.updateModal}\n          title={this.modalTitle}\n          titleContent={this.modalTitleContent}\n          footer={modalFooterButtons}\n          closeModal={this.modalCloseHandler}>\n          {modalBody}\n        </Modal>\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    stateAddedProducts: state.myRegistry.addedProducts,\n    stateActiveCategory: state.myRegistry.activeCategory,\n    stateChecklist: state.myRegistry.checkList,\n    stateRegistryInfo: state.registry.info,\n    stateAnotherStoreProduct: state.myRegistry.anotherStoreProduct,\n  }\n}\n\nexport default connect(mapStateToProps)(ViewRecommend)","import React, {useState} from 'react'\nimport \"./Filter.scss\";\nimport RadioButton from 'modules/commons/components/radio-button/RadioButton';\nimport CheckBox from 'modules/commons/components/check-box/CheckBox';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setParentFilter, setChildFilter, clearFilter } from '../../MyRegistryActions.js';\nimport Button from \"../../../commons/components/button-component/ButtonComponent\";\nimport Modal from '../../../commons/components/modal-component/ModalComponent';\n\n\nconst Filter = (props) => {\n\n  const dispatch = useDispatch()\n\n  const filterData = useSelector(state => state.myRegistry.filterCategory)\n  let tempParentFilterId = useSelector(state => state.myRegistry.filterApplied.parentFilter)\n  let tempChildFilterIds = useSelector(state => state.myRegistry.filterApplied.childFilter)\n  let [showFilterModal, setShowFilterModal] = useState(false);\n\n  const filterContentRef = React.createRef();\n\n  const toggleFilterContent = () => {\n    filterContentRef.current.classList.toggle(\"show\");\n  }\n\n  // Change event handlers\n\n  const parentChangeHandler = (parent) => {\n    dispatch(setParentFilter(parent.id))\n    if (parent.child) {\n      dispatch(setChildFilter(parent.child.map(child => child.id)))\n    } else {\n      dispatch(setChildFilter([]))\n    }\n  }\n\n  const childChangeHandler = (childId, parentId) => {\n\n    if (parentId !== tempParentFilterId) {\n      dispatch(setParentFilter(parentId))\n      if (tempChildFilterIds.length > 0) {\n        dispatch(setChildFilter([]))\n      }\n    }\n\n    const childIndex = tempChildFilterIds.indexOf(childId)\n\n    if (childIndex === -1) {\n      dispatch(setChildFilter([...tempChildFilterIds, childId]))\n    } else {\n      let newChildArray = [...tempChildFilterIds]\n      newChildArray.splice(childIndex, 1)\n      dispatch(setChildFilter(newChildArray))\n    }\n  }\n\n  // Click Handler\n\n  const doneClickHandler = () => {\n    toggleFilterContent()\n  }\n\n\n  const clearClickHandler = () => {\n    dispatch(clearFilter())\n    toggleFilterContent()\n  }\n\n  const doneModalClickHandler = () => {\n    setShowFilterModal(false);\n  }\n\n  const clearModalClickHandler = () => {\n    dispatch(clearFilter())\n    setShowFilterModal(false);\n  }\n  const getFilterContent = (radioName = null, modal=false) => {\n    return (\n      <div className=\"d-flex flex-column px-5\">\n      {filterData.map(parentFilter => (\n        <div className=\"filter-item mb-3\" key={\"filter-\" + parentFilter.id}>\n          {/*{console.log(parentFilter.id, tempParentFilterId)}*/}\n          {/* Parent filter */}\n          <RadioButton\n            {...parentFilter}\n            textClass=\"text-body\"\n            centerText=\"true\"\n            name={`parentFilter${radioName ? \"-1\" : \"\"}${modal ? \"-M\" : \"\"}`}\n            key={parentFilter.id}\n            checked={parentFilter.id === tempParentFilterId ? true : null}\n            changeHandler={() => parentChangeHandler(parentFilter)}\n          />\n\n          {/* Child filter */}\n          {parentFilter.child ? (\n            <div className=\"d-flex flex-column mt-2 pl-5\" key={\"child-filter-\" + parentFilter.id}>\n              {parentFilter.child.map(childFilter => (\n                <CheckBox\n                  {...childFilter}\n                  key={childFilter.id}\n                  className=\"mb-4\"\n                  checked={tempChildFilterIds.includes(childFilter.id) ? true : null}\n                  changeHandler={() => childChangeHandler(childFilter.id, parentFilter.id)}\n                />\n              ))}\n            </div>\n          )\n            : null}\n        </div>\n      ))}\n    </div>\n    )\n  }\n  const filterContent = (\n    <div className=\"d-flex flex-column px-5\">\n      {filterData.map(parentFilter => (\n        <div className=\"filter-item mb-3\" key={\"filter-\" + parentFilter.id}>\n          {/*{console.log(parentFilter.id, tempParentFilterId)}*/}\n          {/* Parent filter */}\n          <RadioButton\n            {...parentFilter}\n            textClass=\"text-body\"\n            centerText=\"true\"\n            name={`parentFilter${props.radioName ? \"-1\" : \"\"}`}\n            key={parentFilter.id}\n            checked={parentFilter.id === tempParentFilterId ? true : null}\n            changeHandler={() => parentChangeHandler(parentFilter)}\n          />\n\n          {/* Child filter */}\n          {parentFilter.child ? (\n            <div className=\"d-flex flex-column mt-2 pl-5\" key={\"child-filter-\" + parentFilter.id}>\n              {parentFilter.child.map(childFilter => (\n                <CheckBox\n                  {...childFilter}\n                  key={childFilter.id}\n                  className=\"mb-4\"\n                  checked={tempChildFilterIds.includes(childFilter.id) ? true : null}\n                  changeHandler={() => childChangeHandler(childFilter.id, parentFilter.id)}\n                />\n              ))}\n            </div>\n          )\n            : null}\n        </div>\n      ))}\n    </div>\n  )\n\n  const footerButton = (\n    <div className=\"d-flex filter-content-bottom-buttons\">\n      <Button className=\"text-body py-1 px-5 mr-2 font-medium\"\n        onClick={clearModalClickHandler}\n        variant=\"secondary\"\n      >Clear\n          </Button>\n      <Button\n        className=\"text-body py-1 px-3 font-medium\"\n        onClick={doneModalClickHandler}\n        variant=\"primary\"\n      >Done\n          </Button>\n    </div>\n  )\n\n\n  return (\n    <div className=\"filter-section-filter\">\n      <Button className=\"px-1 py-1 px-md-3 d-none d-md-inline-block\" id=\"build-filter-btn\" variant=\"secondary\" onClick={toggleFilterContent}>\n        <div className=\"d-flex\">\n          <i className=\"icon-filter-1 mr-1 filter-icon\" />\n          <span className=\"font-medium text-body\">Filter</span>\n        </div>\n      </Button>\n      <Button className=\"px-1 py-1 px-md-3 d-inline-block d-md-none\" variant=\"secondary\" onClick={()=>setShowFilterModal(true)}>\n        <div className=\"d-flex\">\n          <i className=\"icon-filter-1 filter-icon\" />\n        </div>\n      </Button>\n      <div className=\"filter-content py-4\" ref={filterContentRef}>\n        {/*{filterContent}*/}\n        {getFilterContent(props.radioName, false)}\n        <div className=\"d-flex filter-content-bottom-buttons px-5 pt-4\">\n          <Button className=\"text-body py-1 px-5 mr-2 font-medium\"\n            onClick={clearClickHandler}\n            variant=\"secondary\"\n          >Clear\n          </Button>\n          <Button\n            className=\"text-body py-1 px-3 font-medium\"\n            onClick={doneClickHandler}\n            variant=\"primary\"\n          >Done\n          </Button>\n        </div>\n      </div>\n      <Modal\n        show={showFilterModal}\n        title=\"Filters\"\n        footer={footerButton}\n        closeModal={()=> setShowFilterModal(false)}>\n        {/*{filterContent}*/}\n        {getFilterContent(props.radioName, true)}\n      </Modal>\n    </div>\n  )\n}\n\nexport default Filter;","import React from 'react';\nimport \"./FilterItemChip.scss\";\n\nconst FilterItemChip = (props) => {\n  return (\n    <span className={[\"filter-item-chip px-2 mb-1\", props.className ? props.className : ''].join(\" \")}><span className=\"text-sm\">{props.text}</span><i className=\"icon-close ml-1\" onClick={props.deleteHandler}></i></span>\n  )\n}\n\nexport default FilterItemChip;","import React from \"react\";\nimport \"./ImportGiftCard.scss\";\n\nconst ImportGiftCard = (props) => {\n  return (\n    <div className=\"import-gift-card d-flex py-2\" onClick={props.onClick}>\n        <i className={[props.iconClass, \"import-gift-card-icon mx-5 align-self-center\"].join(\" \")}/>\n        <div className=\"mr-3\">\n          <h4>{props.title}</h4>\n          <p className=\"text-sm mt-1\">{props.text}</p>\n        </div>\n    </div>\n  )\n}\n\nexport default ImportGiftCard;","import React from \"react\";\nimport \"./ImportRegistry.scss\";\nimport {getAnotherRegistryProducts} from \"../../../../../api/axios\";\nimport {toast} from \"react-toastify\";\nimport SelectCategory from \"../../select-category/SelectCategory\";\nimport CategoryPill from \"./category-pill/CategoryPill\";\nimport {connect} from \"react-redux\";\nimport {setAnotherStoreRegistryItems} from \"../../../../my-registry/MyRegistryActions\";\nimport Button from \"../../button-component/ButtonComponent\";\nimport Modal from \"../../modal-component/ModalComponent\";\nimport {IMPORT_REGISTRY_BABYLIST_TEXT, HTTPS_REGEX, IMPORT_REGISTRY_EMAIL} from \"../../../../../utils/constants\";\nimport ConfirmUrlChangeModal from \"../../confirm-url-change-modal/ConfirmUrlChangeModal\";\n\nclass ImportRegistry extends React.Component {\n\n  REGISTRY_STORE_ALTERNATIVE_NAME = {\n    tgt: \"target\"\n  }\n\n  state = {\n    registryUrl: \"\",\n    errorState: \"\",\n    errorMessage: \"\",\n    loading: false,\n    categoryModalShow: false,\n    activeCategoryProductIndex: null,\n    currentRegistryLink: \"\",\n    inputHasFocus: false,\n    currentCategory: [],\n    btnHasFocus: false,\n    changeUrlConfirmationModal: false\n  }\n\n  doNotSearch = false\n\n  inputRef = React.createRef()\n\n  setCategoryModalVisible = () => {\n    this.setState({categoryModalShow: false, currentCategory: []})\n  }\n\n  changeLoadingState = (value) => {\n    this.setState({\n      loading: value\n    })\n  }\n\n  registryUrlChangeHandler = (ev) => {\n    this.setState({\n      registryUrl: ev.target.value,\n      errorMessage: \"\"\n    })\n  }\n\n  checkUrlAndGetRegistryItems = async () => {\n    let url = this.state.registryUrl\n\n    if (!url.match(HTTPS_REGEX)) {\n      url = \"https://\" + url\n    }\n    await this.setState({\n      registryUrl: url\n    })\n\n    // Checking for valid url\n    try {\n      new URL(url);\n    } catch {\n      toast.error(\"Invalid Store Url\")\n      return;\n    }\n    this.setState({\n      btnHasFocus: false,\n      errorMessage: \"\"\n    })\n    this.getAnotherRegistryProductsInfo();\n  }\n\n  registryUrlKeyUpHandler = (ev) => {\n    ev.persist();\n    ev.preventDefault();\n    if (ev.keyCode === 13) { //Enter keycode is 13\n      this.checkUrlAndGetRegistryItems()\n    }\n  }\n\n  refineProductForBabyList = (products) => {\n    // Removing products with no store\n    return products.filter(product => product.title && product.stores && product.stores.length > 0)\n      .map(product => {\n        let newProduct = {...product}\n        newProduct['price'] = newProduct.stores[0].price\n        newProduct['url'] = newProduct.stores[0].url\n        delete newProduct.stores\n        return newProduct\n      })\n\n  }\n\n  getAnotherRegistryProductsInfo = () => {\n\n    this.setState({\n      currentRegistryLink: this.state.registryUrl\n    })\n    if (this.inputRef.current) {\n      this.inputRef.current.disabled = true;\n    }\n\n    const registryUrl = new URL(this.state.registryUrl);\n    let storeName = registryUrl.hostname.split(\".\")\n\n    if (storeName.length >= 2) {\n      storeName = storeName[0] === \"www\" ? storeName[1] : storeName[0]\n    } else {\n      storeName = \"\"\n    }\n\n\n    const reqData = {\n      store_name: storeName,\n      store_url: this.state.registryUrl\n    }\n\n    this.changeLoadingState(true);\n\n    getAnotherRegistryProducts(reqData).then(res => {\n      try {\n        if (res.data) {\n          const products = res.data.products;\n\n          if (products) {\n            const registryUrl = new URL(this.state.registryUrl);\n            let storeName = registryUrl.hostname.split(\".\")\n\n            if (storeName.length >= 2) {\n              storeName = storeName[0] === \"www\" ? storeName[1] : storeName[0]\n            } else {\n              storeName = \"\"\n            }\n            storeName = this.REGISTRY_STORE_ALTERNATIVE_NAME[storeName] ? this.REGISTRY_STORE_ALTERNATIVE_NAME[storeName] : storeName\n\n            let newProducts = []\n\n            if (String(storeName).toLowerCase() === IMPORT_REGISTRY_BABYLIST_TEXT) {\n              newProducts = this.refineProductForBabyList(products)\n            } else {\n              newProducts = products.filter(product => product.title)\n            }\n            newProducts = newProducts.map(product => {\n              product.categories = [];\n              product.storeName = storeName\n              return product;\n            })\n            this.props.dispatch(setAnotherStoreRegistryItems(newProducts))\n            // this.setState({\n            //   products: newProducts\n            // })\n            this.setState({\n              errorState: \"\",\n              errorMessage: \"\"\n            })\n          } else if (products === null) {\n            this.setState({\n              errorState: \"no_products\",\n              errorMessage: \"Unable to fetch products from this registry. Please check URL and try again.\"\n            })\n            this.props.dispatch(setAnotherStoreRegistryItems([]))\n          } else if (res.data.store_name) {\n            this.setState({\n              errorState: \"invalid_store\",\n              errorMessage: res.data.store_name[0]\n            })\n            this.props.dispatch(setAnotherStoreRegistryItems([]))\n          } else {\n            toast.error(\"Some error occurred while reading registry products.\")\n            this.props.dispatch(setAnotherStoreRegistryItems([]))\n          }\n        }\n      } catch (e) {\n        console.error(e)\n        toast.error(\"Some error occurred while reading registry products.\")\n      }\n\n    }).catch(err => {\n      console.error(err.response);\n      if (err.response && err.response.data && err.response.data.error_message) {\n        this.setState({\n          errorState: \"backend\",\n          errorMessage: err.response.data.error_message\n        })\n      } else {\n        toast.error(\"Some error occurred while fetching registry.\")\n      }\n    }).finally(() => {\n      this.changeLoadingState(false)\n    })\n  }\n\n  openSelectCategoryModal = (ev, productIndex) => {\n    ev.preventDefault()\n    if (this.props.stateAnotherStoreRegistry[productIndex]) {\n      this.setState({\n        activeCategoryProductIndex: productIndex,\n        categoryModalShow: true,\n        currentCategory: this.props.stateAnotherStoreRegistry[productIndex].categories\n      })\n    } else {\n      console.log(\"Invalid Product Index\");\n    }\n  }\n\n  setProductCategories = (categories) => {\n    // Saving categories passed from SelectCategory Modal\n    if (Number.isInteger(this.state.activeCategoryProductIndex) && this.props.stateAnotherStoreRegistry[this.state.activeCategoryProductIndex]) {\n      let newProductState = [...this.props.stateAnotherStoreRegistry];\n      // TODO: Change this to support multiple categories\n      newProductState[this.state.activeCategoryProductIndex].categories = categories;\n      this.props.dispatch(setAnotherStoreRegistryItems(newProductState))\n      this.setState({\n        activeCategoryProductIndex: null\n      })\n    }\n  }\n\n  removeSelectedCategory = (productIndex, categoryId) => {\n    if (this.props.stateAnotherStoreRegistry[productIndex]) {\n      let newProducts = [...this.props.stateAnotherStoreRegistry]\n      newProducts[productIndex].categories = newProducts[productIndex].categories.filter(category => category.id !== categoryId);\n      this.props.dispatch(setAnotherStoreRegistryItems(newProducts))\n      // this.setState({\n      //   products: newProducts\n      // })\n    }\n  }\n\n  openChangeConfirmModal = (e) => {\n    e.preventDefault();\n    this.setState({\n      changeUrlConfirmationModal: true\n    })\n    this.props.changeTempCloseModal(true)\n  }\n\n  closeChangeConfirmModal = () => {\n    this.setState({\n      changeUrlConfirmationModal: false\n    })\n    this.props.changeTempCloseModal(false)\n  }\n\n  changeRegistryUrl = () => {\n    this.props.dispatch(setAnotherStoreRegistryItems([]))\n    this.doNotSearch = true\n    this.closeChangeConfirmModal()\n    setTimeout(() => {\n      if (this.inputRef.current) {\n        this.inputRef.current.disabled = false;\n        this.inputRef.current.focus();\n      }\n    }, 50)\n  }\n\n  removeProductFromRegistry = (index) => {\n    let newRegistryProduct = [...this.props.stateAnotherStoreRegistry]\n    newRegistryProduct.splice(index, 1)\n    this.props.dispatch(setAnotherStoreRegistryItems(newRegistryProduct))\n  }\n\n  inputKeyUpHandler = (ev) => {\n    ev.persist();\n    ev.preventDefault();\n    if (ev.keyCode === 13 && ev.target.value.length > 0) { //Enter keycode is 13\n      this.doNotSearch = true\n      this.checkUrlAndGetRegistryItems()\n      this.setState({inputHasFocus: false})\n    }\n  }\n\n  inputOnBlurHandler = (e) => {\n    this.setState({inputHasFocus: false})\n    if (e.target.value.length > 0 && !this.doNotSearch) {\n      this.checkUrlAndGetRegistryItems()\n    }\n    if (this.doNotSearch) {\n      this.doNotSearch = !this.doNotSearch\n    }\n  }\n\n  render() {\n    let notLoadingContent = null\n\n    // For reference\n    // if (this.state.errorState === \"private_registry\") {\n    //   notLoadingContent = (\n    //     <h4 className=\"mx-auto import-registry-no-content-text\">\n    //       Oops! This registry URL is private. Please change the setting to public and try again.\n    //     </h4>\n    //   )\n    // } else\n    if (this.state.errorState === \"invalid_store\") {\n      notLoadingContent = (\n        <>\n          <h4 className=\"mx-auto import-registry-no-content-text\">\n            Sorry! The store youre trying to import a registry from is not supported by the M+A registry. However, our\n            Stork team can help you troubleshoot this.\n          </h4>\n          <Button variant=\"primary\" onClick={() => window.open(\"mailto:\" + IMPORT_REGISTRY_EMAIL, \"_blank\")} className=\"text-body font-medium px-3 py-1 mt-3\">Email M+A Storks</Button>\n        </>)\n    } else if (this.state.errorState) {\n      notLoadingContent = (\n        <h4 className=\"mx-auto import-registry-no-content-text\">\n          {this.state.errorMessage}\n        </h4>\n      )\n    } else {\n      notLoadingContent = <h4 className=\"mx-auto import-registry-no-content-text\">\n        Paste the registry URL above to import items to your M+A Registry.\n      </h4>\n    }\n\n    return (\n      <>\n        <div className=\"baby-registry-import-registry\">\n          <div className=\"row\">\n            <div className=\"col d-flex flex-column\">\n              <span className=\"baby-registry-required-field text-sm font-medium\">Registry URL</span>\n              <div className=\"position-relative mt-1\">\n                <input type=\"text\"\n                       className={[\"import-registry-input-field w-100 mb-0 mw-100 text-body pl-2 py-1\",\n                         this.state.errorMessage ? \"import-registry-error-field\" : \"\",\n                         (this.state.registryUrl.length > 0 && this.state.currentRegistryLink === this.state.registryUrl && !this.state.inputHasFocus && !this.state.btnHasFocus) || (this.state.registryUrl.length > 0 && (this.state.btnHasFocus)) ? \"pr-15 pr-md-14\" : \"\"\n                       ].join(\" \")}\n                       placeholder=\"Paste your registry URL here to import.  Please ensure it's publicly accessible.\"\n                       value={this.state.registryUrl}\n                       ref={this.inputRef}\n                       onKeyUp={(ev) => this.inputKeyUpHandler(ev)}\n                       onChange={this.registryUrlChangeHandler.bind(this)}\n                       onFocus={() => this.setState({inputHasFocus: true, btnHasFocus: true})}\n                       onBlur={(e) => this.inputOnBlurHandler(e)}\n                />\n                {this.state.registryUrl.length > 0 && this.state.currentRegistryLink === this.state.registryUrl && !this.state.inputHasFocus && !this.state.btnHasFocus ?\n                  <a tabindex className=\"import-registry-change-link text-sm font-medium import-registry-category-link\"\n                     href=\"#\"\n                     onClick={(e) => this.openChangeConfirmModal(e)}>Change</a> : null}\n\n                {this.state.registryUrl.length > 0 && (this.state.btnHasFocus) ?\n                  <div className=\"import-registry-submit-url-section\">\n                    {/*TODO: Change icons once added to global icons*/}\n                    <button className=\"url_edit_icons_cancel mr-2 mr-md-3\"\n                            onClick={() => this.setState({registryUrl: \"\", btnHasFocus: false, errorMessage: \"\"})}\n                    />\n                    <button className=\"url_edit_icons_check\" onClick={this.checkUrlAndGetRegistryItems}/>\n                  </div>\n                  : null}\n              </div>\n            </div>\n          </div>\n\n          <div className=\"row baby-registry-import-section\">\n            <div className=\"col pt-6\">\n              {this.props.stateAnotherStoreRegistry.length <= 0 || this.state.loading ?\n                // When no product exists\n                <div className=\"py-20 text-center import-registry-main-content\">\n                  {this.state.loading ?\n                    <>\n                      <div className=\"spinner-border import-registry-spinner\" role=\"status\">\n                        <span className=\"sr-only\">Loading...</span>\n                      </div>\n                      <h4 className=\"mt-1 mx-auto import-registry-loading-text\">Please wait while were importing your\n                        registry</h4>\n                    </>\n                    :\n                    notLoadingContent\n                  }\n                </div>\n                :\n                // When products is filled\n                <>\n                  <p className=\"text-sm mb-2 import-registry-grey-text\">Put your gifts in respective categories</p>\n                  <div className=\"row\">\n                    <div className=\"col\">\n                      <div className=\"import-registry-main-content d-flex flex-column import-registry-products\">\n                        <div className=\"d-flex import-registry-products-column \">\n                          <div className=\"w-50 pt-2 pb-1 px-3\">\n                            <p className=\"text-sm font-medium\">Items</p>\n                          </div>\n                          <div className=\"w-50 pt-2 pb-1 px-3\">\n                            <p className=\"text-sm font-medium\">Category: Item</p>\n                          </div>\n                        </div>\n\n\n                        {this.props.stateAnotherStoreRegistry.map((product, index) => (\n                          <div className=\"d-flex import-registry-products-column\" key={\"Product-\" + index}>\n                            <div className=\"w-50 px-3\">\n                              <p className=\"py-3 text-body\">{product.title}</p>\n                            </div>\n                            <div className=\"w-50 px-3 d-flex justify-content-between\">\n                              {product.categories.length <= 0 ?\n                                <div className=\"py-3\">\n                                  <a tabindex href=\"#\" className=\"import-registry-category-link font-medium text-sm\"\n                                     onClick={(ev) => this.openSelectCategoryModal(ev, index)}>Select category</a>\n                                </div>\n                                :\n                                <div className=\"pb-2\">\n                                  {product.categories.map(category => (\n                                    <CategoryPill\n                                      key={category.id}\n                                      name={category.categoryName}\n                                      mainCategory={category.mainCategory}\n                                      removeCategory={() => this.removeSelectedCategory(index, category.id)}\n                                      className=\"mt-2 mr-3\"\n                                    />\n                                  ))}\n\n                                  <a tabindex href=\"#\"\n                                     className=\"import-registry-category-link font-medium text-sm mt-2\"\n                                     onClick={(ev) => this.openSelectCategoryModal(ev, index)}>Add</a>\n                                </div>\n                              }\n                              <div>\n                                <button\n                                  className=\"p-2 m-a-popover m-a-popover-top import-registry-item-delete-btn\"\n                                  onClick={() => this.removeProductFromRegistry(index)}\n                                >\n                                  <i className=\"icon-delete\"/>\n                                  <div className=\"m-a-popover-content import-registry-delete-popover p-2 text-sm\">\n                                    Delete\n                                  </div>\n                                </button>\n                              </div>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                  </div>\n                </>\n              }\n            </div>\n          </div>\n        </div>\n        <SelectCategory\n          showModal={this.state.categoryModalShow}\n          closeModal={this.setCategoryModalVisible}\n          changeCurrentCategory={this.setProductCategories}\n          currentCategory={this.state.currentCategory}\n        />\n\n        {/* Opening this modal when user clicks change url link */}\n        <ConfirmUrlChangeModal\n          show={this.state.changeUrlConfirmationModal}\n          closeModalHandler={this.closeChangeConfirmModal}\n          confirmClickHandler={this.changeRegistryUrl}\n        />\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    stateAnotherStoreRegistry: state.myRegistry.anotherStoreRegistry\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(ImportRegistry);","import React from 'react';\nimport \"./AddGift.scss\";\nimport {connect} from 'react-redux';\nimport Button from '../button-component/ButtonComponent';\nimport Modal from \"../modal-component/ModalComponent\";\nimport BookmarkletSection from \"./bookmarklet-section/BookmarkletSection\";\nimport ImportGiftCard from \"./import-gift-card/ImportGiftCard\";\nimport AddGiftAnotherStore from \"./add-gift-another-store/AddGiftAnotherStore\";\nimport ImportRegistry from \"./import-registry/ImportRegistry\";\nimport {clearAnotherStoreProductInfo, setAnotherStoreRegistryItems} from \"modules/my-registry/MyRegistryActions\";\nimport {ADD_REGISTRY_ITEM, SAVE_REGISTRY_DATA} from \"../../../../api/mutations\";\nimport {graphQLMultipart as graphQL, graphQL as jsonGraphQL} from \"../../../../api/axios\";\nimport {getProducts, getCategories, getTodoList, checkForBankAccount, getRefinedPrice} from \"utils/commonFunction\";\nimport {toast} from \"react-toastify\";\nimport {ADD_GIFT_LINKS, IMPORT_REGISTRY_EMAIL} from \"../../../../utils/constants\";\nimport {dataURItoBlob} from \"../../../../utils/commonFunction\";\nimport AddCashFundModal from \"../../../commons/components/cash-fund-card/add-cash-fund-modal/AddCashFundModal\";\nimport {ROUTES} from \"utils/cdn-assets-links\";\nimport {withRouter} from 'react-router-dom';\n\nclass AddGift extends React.Component {\n\n  PRICE_REGEX = /(^[0-9]+(.?[0-9]{1,2})?$)/g\n\n  // Variable declarations\n  state = {\n    show: false,\n    closeTempModal: false,\n    updateModal: false,\n    showCashFundModal: false,\n    cashFundProduct: null,\n    currentContent: \"\",\n    AddGiftAnotherStoreErrors: {},\n  }\n\n  addAnotherGiftApiCalled = false\n  addImportRegistryApiCalled = false\n\n  modalTitle = \"\"\n  modalBody = \"\"\n  modalTitleContent = \"\"\n  modalFooterButtons = \"\"\n\n  //TODO: List to be populated from the API\n  categoryList = [\n    {\n      name: \"Nursery\",\n      description: \"A curated collection of our favorite nursery must-haves.\",\n      imageUrl: ROUTES.Rectangle_1685_2x_2,\n      link: ADD_GIFT_LINKS.NURSERY\n    },\n    {\n      name: \"Activity Equipment + Toys\",\n      description: \"The best playthings to help babies learn, grow and have fun.\",\n      imageUrl: ROUTES.image_2_2x,\n      link: ADD_GIFT_LINKS.ACTIVITY_EXPERIMENT_TOY\n    },\n    {\n      name: \"Gear + Travel\",\n      description: \"Everything your baby needs when you're on the go.\",\n      imageUrl: ROUTES.Rectangle_1685_2x,\n      link: ADD_GIFT_LINKS.GEAR_TRAVEL\n    },\n    {\n      name: \"Feeding\",\n      description: \"Meal time essentials from bottles to baby food makers.\",\n      imageUrl: ROUTES.image_1_2x,\n      link: ADD_GIFT_LINKS.FEEDING\n    }\n  ]\n\n  componentDidMount() {\n    // For redirecting from param to open add-gift modal\n    let queryParams = new URLSearchParams(decodeURI(window.location.search))\n    if (queryParams.has('add_item')) {\n      this.openAddGiftModal()\n      queryParams.delete('add_item')\n      this.props.history.replace({\n        search: queryParams.toString(),\n      })\n    }\n  }\n\n  // Helper function\n\n  clearModalData = () => {\n    this.modalTitle = \"\"\n    this.modalBody = \"\"\n    this.modalTitleContent = \"\"\n    this.modalFooterButtons = \"\"\n\n    this.props.dispatch(clearAnotherStoreProductInfo());\n    this.props.dispatch(setAnotherStoreRegistryItems([]));\n  }\n\n\n  checkDataValidity = (storeProduct) => {\n    let errors = {}\n\n    // Valid store URL\n    try {\n      new URL(storeProduct.productUrl);\n    } catch {\n      toast.error(\"Invalid Store Url\")\n      return false;\n    }\n\n    // Valid Product Name\n    if (storeProduct.productName.length <= 0) {\n      toast.error(\"Invalid Product Name\");\n      return false;\n    }\n\n    // Valid Price\n    if ((storeProduct.price && Number(storeProduct.price) <= 0) || !storeProduct.price || !String(storeProduct.price).match(this.PRICE_REGEX)) {\n      errors['price'] = \"Invalid price\"\n      this.setState({\n        AddGiftAnotherStoreErrors: errors,\n      })\n      return false;\n    }\n\n    // Valid Quantity\n    if (storeProduct.quantity < 1) {\n      toast.error(\"Invalid Quantity\");\n      return false;\n    }\n\n    // TODO: if necessary Valid Category\n    // if (!storeProduct.category.id) {\n    //   toast.error(\"Invalid Category\");\n    //   return false;\n    // }\n\n    return true;\n  }\n\n  changeTempCloseModal = (value) => {\n    this.setState({\n      closeTempModal: value\n    })\n  }\n\n  addItemToRegistry = () => {\n    const storeProduct = this.props.stateAnotherStoreProduct;\n    const isValidData = this.checkDataValidity(storeProduct);\n    if (!isValidData) {\n      return;\n    }\n\n    let storeUrl = new URL(storeProduct.productUrl);\n    storeUrl = storeUrl.hostname.split(\".\")\n    const storeName = storeUrl[storeUrl.length - 2]\n\n    let categorySectionId = null\n    if (storeProduct.category.length <= 0) {\n      categorySectionId = \"Others(Others)\"\n    } else {\n      // Finding the first category based on the id\n      let currentCategory = storeProduct.category.reduce((ac, cv) => {\n        return Number(ac.id) < Number(cv.id) ? ac : cv\n      })\n      if (!currentCategory) {\n        currentCategory = storeProduct.category[0];\n      }\n      categorySectionId = `${currentCategory.parentCategory.name}(${currentCategory.category.categoryName})`\n    }\n\n    let formData = new FormData()\n    let data = {\n      query: ADD_REGISTRY_ITEM,\n      operationName: \"addRegistryItems\",\n      variables: {\n        \"registryId\": this.props.stateRegistryInfo.id,\n        \"input\": [{\n          \"storeName\": storeName,\n          \"items\": [{\n            \"title\": storeProduct.productName,\n            \"registryCategories\": storeProduct.category.length > 0 ? storeProduct.category.map(category => Number(category.id)) : null,\n            \"tags\": [],\n            \"storeItemUrl\": storeProduct.productUrl,\n            \"price\": storeProduct.price,\n            \"quantity\": storeProduct.quantity,\n            \"isCashAcceptedOnly\": storeProduct.howToGift.id === 1 ? true : false,\n            \"mostWanted\": storeProduct.mustHave,\n            \"isGroupGift\": storeProduct.groupGift,\n            \"note\": storeProduct.note\n          }]\n        }]\n      }\n    }\n\n    if (storeProduct.productImage.type === \"custom\") {\n      let map = {\n        images: [\"variables.input.0.items.0.images\"]\n      }\n      data.variables.input[0].items[0]['images'] = null;\n      data.variables.input[0].items[0]['imageUrl'] = null;\n      formData.append(\"map\", JSON.stringify(map))\n      formData.append(\"images\", dataURItoBlob(storeProduct.productImage.value, storeProduct.productImage.fileType, storeProduct.productImage.fileName))\n    } else {\n      data.variables.input[0].items[0]['imageUrl'] = this.props.stateAnotherStoreProduct.productImage.value;\n    }\n\n    formData.append(\"operations\", JSON.stringify(data))\n    if (!this.addAnotherGiftApiCalled) {\n      this.addAnotherGiftApiCalled = true\n      graphQL(formData).then(res => {\n        if (res.status === 200) {\n          // Successfully added product\n          getProducts(this.props.stateRegistryInfo.id, this.props.dispatch);\n          getCategories(this.props.stateRegistryInfo.id, this.props.dispatch);\n\n          toast.success((\n            <p><b>{storeProduct.productName}</b> added to your registry!</p>\n          ))\n\n          // Checking if cash in lieu of is added without bank account\n          if (storeProduct.howToGift.id === 1 || storeProduct.groupGift) {\n            checkForBankAccount(false, storeProduct.howToGift.id === 1, storeProduct.groupGift, this.props.dispatch);\n          }\n          this.clearModalData();\n\n          // For scrolling to particular category section, if category is present\n          if (categorySectionId) {\n            let scrollToDoc = document.getElementById(categorySectionId)\n            if (scrollToDoc) {\n              setTimeout(() => {\n                const rect = scrollToDoc.getBoundingClientRect();\n                window.scrollTo(0, rect.top + window.scrollY);\n              }, 2000)\n\n            }\n          }\n\n          this.modalCloseHandler(true);\n        }\n        this.addAnotherGiftApiCalled = false\n      }).catch(err => {\n        this.addAnotherGiftApiCalled = false\n        toast.error(\"Some error occurred.\");\n        console.error(err.message)\n      })\n    }\n  }\n\n  // Event Handlers\n\n  modalCloseHandler = (closeAll = false) => {\n    if (this.state.currentContent && !closeAll) {\n      this.openAddGiftModal()\n    } else {\n      this.setState({\n        show: false,\n        currentContent: \"\",\n        AddGiftAnotherStoreErrors: {}\n      })\n      setTimeout(() => {\n        document.body.style.overflow = \"auto\";\n      }, 300);\n      this.clearModalData()\n    }\n  }\n\n  openCashFundModal = () => {\n    this.modalCloseHandler();\n    this.setState({\n      showCashFundModal: true\n    })\n  }\n\n  closeCashFundModal = (closeAll = false) => {\n    this.setState({\n      showCashFundModal: false,\n    })\n\n    if (!closeAll) {\n      this.openAddGiftModal()\n    }\n  }\n\n  openAddGiftModal = () => {\n    this.clearModalData()\n    this.modalTitle = \"Add item\"\n    this.setState((prevState, props) => ({\n      show: true,\n      currentContent: \"\",\n      updateModal: !prevState.updateModal\n    }))\n\n    this.modalBody = (\n      <div className=\"row\">\n        <div className=\"col\">\n          <h4 className=\"font-weight-bold\">M+A Store</h4>\n          <div className=\"card-deck mt-2\">\n            <a href={ADD_GIFT_LINKS.NEW_ARRIVALS} target=\"_blank\" className=\"card m-a-cards\"><p\n              className=\"m-auto text-body font-medium\">New Arrivals</p></a>\n            <a href={ADD_GIFT_LINKS.POPULAR_GIFTS} target=\"_blank\" className=\"card m-a-cards\"><p\n              className=\"m-auto text-body font-medium\">Most Popular Gifts</p></a>\n            <div className=\"card m-a-cards\" onClick={this.openCashFundModal}>\n              <p className=\"m-auto text-body font-medium\">Cash Funds</p>\n            </div>\n          </div>\n          <div className=\"card-deck mt-4\">\n            {this.categoryList.map(category =>\n              <a href={category.link} target=\"_blank\" className=\"card m-a-category-card\"\n                 key={\"category-\" + category.name}>\n                <img src={category.imageUrl} alt={category.name}/>\n                <div className=\"px-2 my-3\">\n                  <p className=\"text-sm font-medium\">{category.name}</p>\n                  <p className=\"text-sm mt-1\">{category.description}</p>\n                </div>\n              </a>\n            )}\n          </div>\n          <h4 className=\"font-weight-bold mt-5\">Another Store</h4>\n          {!this.props.stateRegistryInfo.isMaButtonConfigured ?\n            <div className=\"row mt-2\">\n              <div className=\"col\">\n                <BookmarkletSection changeTempCloseModal={this.changeTempCloseModal}/>\n              </div>\n            </div>\n            : null}\n          <div className=\"row\">\n            <div className=\"col-sm-12 col-md-6 mt-5\">\n              <ImportGiftCard\n                iconClass=\"icon-shopping-cart\"\n                title=\"Add item from another store\"\n                text=\"You can add links from other online store and save in your registry.\"\n                onClick={this.importGiftAnotherStoreHandler}\n              />\n            </div>\n            <div className=\"col-sm-12 col-md-6 mt-5\">\n              <ImportGiftCard\n                iconClass=\"icon-import\"\n                title=\"Import\"\n                text=\"You can import a gift or an entire registry from another store\"\n                onClick={this.importRegistry}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  anotherStoreItemViewDetail = (storeProduct) => {\n    if (storeProduct.productUrl) {\n      window.open(storeProduct.productUrl, '_blank');\n    }\n  }\n\n  validImportRegistryData = (registryItems) => {\n    if (registryItems.length <= 0) {\n      toast.error(\"No Item found\");\n      return false;\n    }\n    // TODO: if necessary Valid Category\n    // for (const item of registryItems) {\n    //   if (item.categories.length <= 0) {\n    //     toast.error(\"Please select category for all product\");\n    //     return false;\n    //   }\n    // }\n    return true;\n  }\n\n  getCleanedRegistryItems = (registryItems) => {\n    let cleanedRegistryItems = []\n    let storeName = null\n    let items = registryItems.map(item => {\n      let newItem = {}\n\n      if (item.storeName && !storeName) {\n        storeName = item.storeName\n      }\n\n      if (item.title) {\n        newItem['title'] = item.title\n      }\n      if (item.url) {\n        newItem['storeItemUrl'] = item.url\n      }\n      if (item.img) {\n        newItem['imageUrl'] = item.img\n      }\n\n      if (item.price) {\n        let price = getRefinedPrice(item.price)\n        newItem['price'] = price ? price : 0\n      }\n\n      newItem['registryCategories'] = item.categories.map(category => Number(category.id))\n      newItem['quantity'] = 1\n      newItem['tags'] = []\n      newItem['isCashAcceptedOnly'] = true\n\n      return newItem\n    })\n\n    cleanedRegistryItems.push({\n      storeName: storeName,\n      items: items\n    })\n    return cleanedRegistryItems;\n  }\n\n  importRegistryClickHandler = () => {\n    if (!this.validImportRegistryData(this.props.stateAnotherStoreRegistry)) {\n      return;\n    }\n\n    const registryItems = this.getCleanedRegistryItems(this.props.stateAnotherStoreRegistry)\n    if (registryItems.length > 0) {\n      const reqData = {\n        query: ADD_REGISTRY_ITEM,\n        operationName: \"addRegistryItems\",\n        variables: {\n          \"registryId\": this.props.stateRegistryInfo.id,\n          \"input\": registryItems\n        }\n      }\n      if (!this.addImportRegistryApiCalled) {\n        this.addImportRegistryApiCalled = true\n        jsonGraphQL(reqData).then(res => {\n          if (res.data.data.addRegistryItems) {\n            getProducts(this.props.stateRegistryInfo.id, this.props.dispatch);\n            getCategories(this.props.stateRegistryInfo.id, this.props.dispatch);\n            toast.success(\"Registry items imported successfully\");\n            this.clearModalData();\n            this.modalCloseHandler(true);\n          }\n          this.addImportRegistryApiCalled = false\n        }).catch(err => {\n          this.addImportRegistryApiCalled = false\n          toast.error(\"Error occurred while adding items to registry\")\n          console.error(err);\n        })\n      }\n    }\n  }\n\n  importGiftAnotherStoreHandler = () => {\n    this.clearModalData()\n    this.modalTitle = \"Add item from another store\"\n    this.modalTitleContent = (\n      <div className=\"row mt-2 mb-4\">\n        <div className=\"col\">\n          <BookmarkletSection changeTempCloseModal={this.changeTempCloseModal}/>\n        </div>\n      </div>\n    )\n    this.modalBody = \"\"\n\n    this.setState((prevState, props) => ({\n      updateModal: !prevState.updateModal,\n      currentContent: \"anotherStoreProduct\"\n    }))\n  }\n\n  importRegistry = () => {\n    this.clearModalData()\n    this.modalTitle = \"Import Registry\"\n    this.modalBody = <ImportRegistry changeTempCloseModal={this.changeTempCloseModal}/>\n\n    this.setState((prevState, _) => ({\n      updateModal: !prevState.updateModal,\n      currentContent: \"importRegistry\"\n    }))\n  }\n\n  render() {\n    if (this.props.stateAnotherStoreProduct && this.state.currentContent === \"anotherStoreProduct\") {\n      this.modalBody = <AddGiftAnotherStore\n        changeTempCloseModal={this.changeTempCloseModal}\n        fieldErrors={this.state.AddGiftAnotherStoreErrors}\n      />\n    }\n\n    if (this.props.stateAnotherStoreProduct && this.state.currentContent === \"anotherStoreProduct\") {\n      this.modalFooterButtons = (\n        <>\n          <Button\n            variant=\"secondary\"\n            className=\"px-3 py-1 font-weight-bold font-medium text-body\"\n            disabled={!this.props.stateAnotherStoreProduct.productName}\n            onClick={() => this.anotherStoreItemViewDetail(this.props.stateAnotherStoreProduct)}\n          >View Details</Button>\n          <Button\n            variant=\"primary\"\n            className=\"px-4 py-1 font-weight-bold font-medium text-body\"\n            disabled={!this.props.stateAnotherStoreProduct.productName}\n            onClick={this.addItemToRegistry}\n          >Save & Close</Button>\n        </>\n      )\n    }\n\n    if (this.props.stateAnotherStoreRegistry && this.state.currentContent === \"importRegistry\") {\n      this.modalFooterButtons = (\n        <>\n          {/*TODO: change href of email us link*/}\n          <a href={\"mailto:\" + IMPORT_REGISTRY_EMAIL} tabindex=\"0\" target='_blank'\n             className=\"mr-auto import-registry-email-link text-sm font-medium\">Email Us For Help</a>\n          {/*TODO: Integrate API when multiple category is supported*/}\n          <Button\n            variant=\"primary\"\n            className=\"px-4 py-1 font-weight-bold font-medium text-body\"\n            disabled={this.props.stateAnotherStoreRegistry.length <= 0}\n            onClick={this.importRegistryClickHandler}\n          >Import</Button>\n        </>\n      )\n    }\n\n    return (\n      <>\n        <Button\n          variant=\"primary\"\n          className=\"px-3 py-1 font-weight-bold font-medium m-a-popover m-a-popover-top-right\"\n          onClick={this.openAddGiftModal}\n        >\n          <span className=\"text-body\">{this.props.title ? this.props.title : 'Add item'}</span>\n          <div className=\"m-a-popover-content px-3 py-2\">\n            {/* <span className=\"font-medium text-sm\">You can add item</span> */}\n            <p className=\"text-sm font-weight-normal m-a-popover-content-desc\">Add an item from any store and save it to\n              your registry.</p>\n          </div>\n        </Button>\n\n        <Modal\n          show={this.state.show}\n          modalClassName={this.state.closeTempModal ? \"d-none\" : \"d-block\"}\n          updateModal={this.state.updateModal}\n          title={this.modalTitle}\n          titleContent={!this.props.stateRegistryInfo.isMaButtonConfigured ? this.modalTitleContent : null}\n          footer={this.modalFooterButtons}\n          closeModal={() => this.modalCloseHandler()}>\n          {this.modalBody}\n        </Modal>\n\n        {this.state.showCashFundModal ?\n          <AddCashFundModal\n            show={this.state.showCashFundModal}\n            closeModal={this.closeCashFundModal}\n            categoryData={this.state.cashFundProduct}\n            fromAddGift={true}\n          />\n          : null}\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    stateAnotherStoreProduct: state.myRegistry.anotherStoreProduct,\n    stateAnotherStoreRegistry: state.myRegistry.anotherStoreRegistry,\n    stateRegistryInfo: state.registry.info\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(withRouter(AddGift));","import React, {useState, useEffect, useRef, useCallback} from \"react\";\nimport ReactCrop from \"react-image-crop\";\nimport \"react-image-crop/lib/ReactCrop.scss\";\n\nconst CropImage = (props) => {\n  // DEFAULT CONSTANTS\n  const ASPECT_RATIO = 16/3\n  const CROPPED_IMAGE_FORMAT = \"image/jpeg\";\n  const COVER_IMAGE_NAME = \"cover.jpeg\";\n\n  // VARIABLE INITIALIZATION\n  const imgRef = useRef(null);\n  const [crop, setCrop] = useState({});\n  const [completedCrop, setCompletedCrop] = useState(null);\n\n  // SET IMAGE TO LOADED IMAGE\n  const onLoad = useCallback((img) => {\n    imgRef.current = img;\n    const aspect = ASPECT_RATIO;\n    const width = (img.width / aspect < img.height * aspect ? 100 : ((img.height * aspect) / img.width) * 100)*0.85;\n    const height = (img.width / aspect > img.height * aspect ? 100 : (img.width / aspect / img.height) * 100)*0.85;\n    const y = (100 - height) / 2;\n    const x = (100 - width) / 2;\n\n    setCrop({\n      unit: '%',\n      width:width,\n      height:height,\n      x: x,\n      y:y,\n      aspect: aspect\n    });\n    return false\n  }, []);\n\n  // RETURN BLOB OF CROPPED IMAGE\n  const getCroppedImg = (image, crop, fileName) => {\n    const canvas = document.createElement(\"canvas\");\n    const scaleX = image.naturalWidth / image.width;\n    const scaleY = image.naturalHeight / image.height;\n    canvas.width = crop.width;\n    canvas.height = crop.height;\n    const ctx = canvas.getContext(\"2d\");\n\n    ctx.drawImage(\n      image,\n      crop.x * scaleX,\n      crop.y * scaleY,\n      crop.width * scaleX,\n      crop.height * scaleY,\n      0,\n      0,\n      crop.width,\n      crop.height\n    );\n\n    return new Promise((resolve, reject) => {\n      canvas.toBlob(\n        (blob) => {\n          if (blob) {\n            blob.name = fileName;\n            resolve(blob);\n          } else {\n            reject(\"Blob is null\");\n          }\n        },\n        CROPPED_IMAGE_FORMAT,\n        1\n      );\n    });\n  };\n\n  // SET CROPPED IMAGE TO PARENT STATE\n  useEffect(() => {\n    if (!completedCrop || !imgRef.current) {\n      return;\n    }\n    let croppedImage = getCroppedImg(\n      imgRef.current,\n      completedCrop,\n      COVER_IMAGE_NAME\n    );\n    croppedImage\n      .then((blob) => {\n        props.setCroppedImage(blob);\n      })\n      .catch((_) => {\n      });\n  }, [completedCrop]);\n\n  return (\n    <>\n      <ReactCrop\n        src={props.src}\n        crop={crop}\n        crossorigin=\"anonymous\"\n        // locked={true}\n        style={{backgroundColor: \"white\"}}\n        onImageLoaded={onLoad}\n        keepSelection={true}\n        onChange={(newCrop) => setCrop(newCrop)}\n        onComplete={(c) => setCompletedCrop(c)}\n      />\n    </>\n  );\n};\n\nexport default CropImage;\n","import React from 'react';\nimport Button from '../button-component/ButtonComponent';\nimport Modal from \"../modal-component/ModalComponent\";\nimport MoreOption from \"../more-option/MoreOption\";\nimport { connect } from \"react-redux\";\nimport './PublishRegistry.scss';\nimport CropImage from \"modules/view-registry/components/cover-image-picker/crop-image/CropImage\";\nimport { toast } from \"react-toastify\";\nimport { graphQLMultipart, graphQL } from 'api/axios';\nimport { CREATE_PUBLISH_REGISTRY_DETAILS, UPDATE_PUBLISH_REGISTRY_DETAILS } from 'api/mutations';\nimport { GET_PUBLISH_REGISTRY_DETAILS, GET_TAGS } from 'api/queries';\nimport { addPublishRegistryDetails } from 'modules/my-registry/MyRegistryActions';\nimport Select from 'react-select';\n\nclass PublishRegistry extends React.Component {\n\n  // Variable declarations\n  state = {\n    show: false,\n    closeTempModal: false,\n    updateModal: false,\n    registryImages: this.props.stateRegistryInfo.image.image,\n    publishRegistryName: '',\n    publishRegistryDescription: '',\n    uploadImage: false,\n    customImage: null,\n    croppedImage: null,\n    isPublished: false,\n    isRegistryDataChange: false,\n    allTags: [],\n  }\n\n  modalTitle = \"\"\n  modalBody = \"\"\n  modalFooterButtons = \"\"\n  modalTitleContent = \"\"\n\n  MAX_LENGTH_DESCRIPTION = 280;\n  MAX_IMAGE_SIZE = 5000000; // 5MB\n  ACCEPTED_IMAGE_TYPE = [\n    'image/jpg',\n    'image/jpeg',\n    'image/png'\n  ]\n\n  fileRef = React.createRef();\n\n  componentDidMount = () => {\n    // TODO: Change this condition with \n    this.getPublishRegistry()\n    this.getTags()\n  }\n\n  COVER_PIC_OPTIONS = [\n    {\n      name: \"Replace Background\",\n      action: () => {\n        if (this.fileRef) {\n          this.fileRef.current.click();\n        }\n      }\n    }\n  ]\n\n  modalOpenHandler = () => {\n    // updating Modal data\n    if (this.props.statePublishRegistry && this.props.statePublishRegistry?.id) {\n      let tags = [...this.props.statePublishRegistry.tags].map(tag => {\n        return {\n          ...tag,\n          value: tag.id,\n          label: tag.tagName\n        }\n      })\n      this.setState({\n        publishRegistryName: this.props.statePublishRegistry.displayName,\n        publishRegistryDescription: this.props.statePublishRegistry.description,\n        publishRegistryTags: tags ?? [],\n        isPublished: this.props.statePublishRegistry.isPublished,\n        registryImages: this.props.statePublishRegistry.image ?? this.props.statePublishRegistry.imageUrl ?? this.props.stateRegistryInfo.image.image,\n      })\n    } else {\n      this.getPublishRegistry()\n    }\n    this.setState({ show: true })\n  }\n\n  modalCloseHandler = () => {\n    this.setState({\n      show: false,\n      customImage: null,\n      uploadImage: false,\n      croppedImage: null,\n      publishRegistryTags: [],\n      publishRegistryName: \"\",\n      publishRegistryDescription: \"\",\n      registryImages: null,\n      isRegistryDataChange: false\n    })\n  }\n\n  blobToFile = (blob) => {\n    return new File([blob], blob.name, {\n      type: blob.type\n    })\n  }\n\n  getPublishRegistry = () => {\n    let reqData = {\n      query: GET_PUBLISH_REGISTRY_DETAILS,\n      variables: {\n        registryId: this.props.stateRegistryInfo.id,\n      }\n    }\n\n    graphQL(reqData).then(res => {\n      this.props.dispatch(addPublishRegistryDetails(res.data.data.curatorRegistryDetail))\n      if (res.data.data.curatorRegistryDetail) {\n        let resData = { ...res.data.data.curatorRegistryDetail }\n        let tags = [...resData.tags].map(tag => {\n          return {\n            ...tag,\n            value: tag.id,\n            label: tag.tagName\n          }\n        })\n        this.setState({\n          publishRegistryName: resData.displayName,\n          publishRegistryDescription: resData.description,\n          publishRegistryTags: tags ?? [],\n          isPublished: resData.isPublished,\n          registryImages: resData.image ?? resData.imageUrl ?? this.props.stateRegistryInfo.image.image,\n        })\n      }\n    }).catch(err => {\n      if (err.response && err.response.status !== 404) {\n        toast.error(\"Some error occurred\");\n      }\n      console.error(err.message)\n    })\n  }\n\n  getTags = () => {\n    let reqData = {\n      query: GET_TAGS,\n    }\n\n    graphQL(reqData).then(res => {\n      if (res.data.data.tags) {\n        let reqData = [...res.data.data.tags].map(tag => {\n          return {\n            ...tag,\n            value: tag.id,\n            label: tag.tagName\n          }\n        })\n        this.setState({\n          allTags: reqData,\n        })\n      }\n    }).catch(err => {\n      toast.error(\"Some error occurred while fetching Tags\");\n      console.error(err.message)\n    })\n  }\n\n  // manage curator registry\n  manangeCuratorRegistry = (query, operation, isEdit = false) => {\n    let formData = new FormData()\n    let data = {\n      query: query,\n      operationName: operation,\n      variables: {\n        \"registryId\": Number(this.props.stateRegistryInfo.id),\n        \"input\": {\n          displayName: this.state.publishRegistryName,\n          description: this.state.publishRegistryDescription,\n          imageUrl: this.state.croppedImage ? null : this.props.stateRegistryInfo.image.image,\n          image: null,\n          tags: [...this.state.publishRegistryTags].map(tag => Number(tag.id)),\n          isPublished: true,\n        }\n      }\n    }\n\n    if (isEdit) {\n      data.variables.curatorRegistryDetailId = Number(this.props.statePublishRegistry?.id)\n    }\n\n    formData.append(\"operations\", JSON.stringify(data))\n    if (this.state.croppedImage) {\n      let map = {\n        image: [\"variables.input.image\"]\n      }\n      formData.append(\"map\", JSON.stringify(map))\n      formData.append(\"image\", this.blobToFile(this.state.croppedImage))\n    }\n\n    graphQLMultipart(formData).then(res => {\n      try {\n        if (res.data.data[operation].message) {\n          toast.success(res.data.data[operation].message);\n          this.getPublishRegistry();\n          this.modalCloseHandler()\n        } else {\n          toast.error(\"Some error occurred\");\n          console.log(res.data.data[operation]);\n          console.error(\"Some error occurred\");\n        }\n      } catch (e) {\n        toast.error(\"Some error occurred\");\n        console.error(e);\n      }\n    }).catch(err => {\n      toast.error(\"Some error occurred\");\n      console.error(err.message)\n    })\n\n  }\n\n  // To create curator Registry and Make it public\n  createCuratorRegistry = () => {\n    this.manangeCuratorRegistry(CREATE_PUBLISH_REGISTRY_DETAILS, \"publishCuratorRegistry\")\n  }\n\n  // Update Curator Registry Info\n  updateCuratorRegistryDetails = () => {\n    this.manangeCuratorRegistry(UPDATE_PUBLISH_REGISTRY_DETAILS, \"editCuratorRegistryDetail\", true)\n  }\n\n  publishRegistry = () => {\n    if (!this.props.stateRegistryInfo.id) {\n      console.log(\"No registry found\");\n      return;\n    }\n    // Update registry Info\n    if (this.props.statePublishRegistry && this.props.statePublishRegistry?.id) {\n      this.updateCuratorRegistryDetails()\n    }\n    // create publish registry\n    else {\n      this.createCuratorRegistry()\n    }\n  }\n\n  setIsRegistryDataChange = () => {\n    if (!this.state.isRegistryDataChange) {\n      this.setState({ isRegistryDataChange: true })\n    }\n  }\n\n  nameChangeHandler = (ev) => {\n    this.setState({ publishRegistryName: ev.target.value })\n    this.setIsRegistryDataChange()\n  }\n\n  descriptionChangeHandler = (ev) => {\n    if (ev.target.value.length <= this.MAX_LENGTH_DESCRIPTION) {\n      this.setState({ publishRegistryDescription: ev.target.value })\n      this.setIsRegistryDataChange()\n    }\n  }\n\n  fileChangeHandler = async (e) => {\n    e.persist();\n    if (this.fileRef.current && this.fileRef.current.files.length > 0) {\n      const file = this.fileRef.current.files[0]\n\n      // Verifying file is image\n      if (this.ACCEPTED_IMAGE_TYPE.includes(file.type)) {\n        if (file.size <= this.MAX_IMAGE_SIZE) {\n          let reader = new FileReader();\n          let setCustomImage = (image) => this.setCustomImage(image)\n          let setUploadImage = (customImage) => this.setUploadImage(customImage)\n          reader.onload = function (e) {\n            setCustomImage(e.target.result)\n            setUploadImage(true)\n          }\n          reader.readAsDataURL(file); // Converting to base64 string\n        } else {\n          toast.error(\"File size exceeds the limit\");\n        }\n      } else {\n        toast.error(\"Please select valid image.\");\n      }\n    }\n  }\n\n  saveCustomImage = () => {\n    this.setState({\n      uploadImage: false,\n      registryImages: URL.createObjectURL(this.state.croppedImage)\n    })\n    this.setIsRegistryDataChange()\n  }\n\n  setCroppedImage = (image) => {\n    this.setState({ croppedImage: image })\n  }\n\n  setCustomImage = (image) => {\n    this.setState({ customImage: image })\n  }\n\n  setUploadImage = (uploadImage) => {\n    this.setState({ uploadImage: uploadImage })\n  }\n\n  tagChangeHandler = (value) => {\n    this.setState({ publishRegistryTags: value })\n    this.setIsRegistryDataChange()\n  }\n\n  render() {\n\n    if (this.state.uploadImage === false) {\n      this.modalBody = (\n        <div className=\"publish-registry-edit-detail pr-1\">\n          <div className=\"row\">\n            <div className=\"col\">\n              <span className=\"text-sm font-medium publish-registry-edit-detail-required\">Registry Cover Image</span>\n              <div className=\"position-relative\">\n                <div className=\"mt-1 publish-registry-cover-image cover-image-header-height mx-auto\" style={{ backgroundImage: 'url(' + this.state.registryImages + ')' }}>\n                  <div className=\"publish-registry-cover-pic-update-options\">\n                    <div className=\"container\">\n                      <div className=\"row\">\n                        <div className=\"col d-flex justify-content-end\">\n                          <MoreOption\n                            data={this.COVER_PIC_OPTIONS}\n                            iconClass=\"custom-icon-camera\"\n                            activeOptionClass=\"publish-registry-cover-option-active\"\n                            buttonClass=\"update-cover-options\" />\n                          <input\n                            type=\"file\"\n                            className=\"d-none\"\n                            ref={this.fileRef}\n                            accept={this.ACCEPTED_IMAGE_TYPE.join(\",\")}\n                            onChange={(e) => this.fileChangeHandler(e)} />\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className=\"row mt-3\">\n            <div className=\"col\">\n              <span className=\"text-sm font-medium publish-registry-edit-detail-required\">Registry Name</span>\n              <textarea\n                className=\"w-100 mt-1 h1 p-2 resize-none\"\n                value={this.state.publishRegistryName}\n                onChange={(ev) => this.nameChangeHandler(ev)}\n                rows=\"1\" />\n            </div>\n          </div>\n          <div className=\"row mt-3 select-tags\">\n            <div className=\"col\">\n              <span className=\"text-sm font-medium\">Tags</span>\n              <Select\n                options={this.state.allTags}\n                value={this.state.publishRegistryTags}\n                isMulti\n                onChange={this.tagChangeHandler}\n              />\n            </div>\n          </div>\n          <div className=\"row mt-3\">\n            <div className=\"col\">\n              <span className=\"text-sm font-medium publish-registry-edit-detail-required\">Add Description</span>\n              <span className=\"float-right text-sm publish-registry-edit-detail-max-char\">Max. {this.MAX_LENGTH_DESCRIPTION} chars</span>\n              <textarea\n                className=\"w-100 mt-1 text-body px-2 py-1 mb-2\"\n                placeholder=\"Write a description for your registry\"\n                maxLength={this.MAX_LENGTH_DESCRIPTION}\n                value={this.state.publishRegistryDescription}\n                onChange={(ev) => this.descriptionChangeHandler(ev)}\n                rows=\"3\" />\n            </div>\n          </div>\n        </div>\n      )\n\n      this.modalTitle = \"Publish your registry\"\n      this.modalTitleContent = \"\"\n\n      this.modalFooterButtons = (\n        <>\n          <Button\n            variant=\"primary\"\n            className=\"px-4 py-1 font-weight-bold font-medium text-body\"\n            disabled={this.state.publishRegistryName?.length === 0 || this.state.publishRegistryDescription?.length === 0 || !this.state.isRegistryDataChange}\n            onClick={this.publishRegistry}\n          >Save & Close</Button>\n        </>\n      )\n\n    } else {\n      this.modalBody = (\n        <CropImage\n          src={this.state.customImage}\n          setCroppedImage={this.setCroppedImage}\n        />\n      )\n      this.modalTitle = \"Crop Image\";\n      this.modalTitleContent = (\n        <p className=\"text-sm mt-1\">Drag the box to crop the image</p>\n      )\n      this.modalFooterButtons = (\n        <>\n          <Button variant='secondary' className=\"px-3 py-1 font-medium text-body\"\n            onClick={() => this.setUploadImage(false)}>Cancel</Button>\n          <Button variant='primary' className=\"px-3 py-1 font-medium text-body\" onClick={this.saveCustomImage}>Save &\n            Close</Button>\n        </>\n      )\n    }\n\n    return (\n      <>\n        <Button\n          variant=\"primary\"\n          className=\"px-3 py-1 font-weight-bold font-medium m-a-popover m-a-popover-top-right\"\n          onClick={this.modalOpenHandler}\n        >\n          <span className=\"text-body\">{this.props.title ? this.props.title : 'Publish'}</span>\n          <div className=\"m-a-popover-content px-3 py-2\">\n            <p className=\"text-sm font-weight-normal m-a-popover-content-desc\">Publish your registry as Pre-Build Registry.</p>\n          </div>\n        </Button>\n\n        <Modal\n          size=\"md\"\n          show={this.state.show}\n          modalClassName={this.state.closeTempModal ? \"d-none\" : \"d-block\"}\n          updateModal={this.state.updateModal}\n          title={this.modalTitle}\n          footer={this.modalFooterButtons}\n          titleContent={this.modalTitleContent}\n          closeModal={() => this.modalCloseHandler()}>\n          {this.modalBody}\n        </Modal>\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    stateRegistryInfo: state.registry.info,\n    statePublishRegistry: state.myRegistry.publishRegistry,\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(PublishRegistry);","import React from 'react';\nimport './FilterSection.scss';\nimport Filter from '../filter/Filter';\nimport {connect} from 'react-redux';\nimport FilterItemChip from '../filter/filter-item-chip/FilterItemChip';\nimport {clearFilter, setChildFilter} from \"../../MyRegistryActions\"\nimport AddGift from \"../../../commons/components/add-gift/AddGift\";\nimport PublishRegistry from \"modules/commons/components/publish-registry/PublishRegistry\";\n\nconst FilterSectionChips = ({filterChips, deleteChipHandler, clearFilterHandler}) => {\n  return (\n    <div className=\"filtered-items\">\n      {filterChips.parentFilter ?\n        <FilterItemChip text={filterChips.parentFilter.display} className=\"mr-2\"\n                        deleteHandler={() => deleteChipHandler(true, null)}/>\n        : null}\n      {filterChips.childFilter ?\n        filterChips.childFilter.map(item =>\n          <FilterItemChip\n            text={item.display}\n            className=\"mr-2\"\n            key={filterChips.parentFilter.id + \"-\" + item.id}\n            deleteHandler={() => deleteChipHandler(false, item.id)}/>)\n        : null}\n      {filterChips.parentFilter ?\n        <a className=\"font-medium text-sm filter-clear-link d-inline-block\" href=\"#\" tabIndex=\"0\"\n           onClick={(ev) => clearFilterHandler(ev)}>Clear\n          all</a>\n        : null}\n    </div>\n  )\n}\n\nclass FilterSection extends React.Component {\n\n  // Filter chips close handler\n  deleteChipHandler = (isParent, childId) => {\n    if (isParent) {\n      this.props.dispatch(clearFilter())\n    } else {\n      const newChildArray = this.props.stateFilterApplied.childFilter.filter(element => {\n        return element !== childId\n      })\n      this.props.dispatch(setChildFilter(newChildArray))\n    }\n  }\n\n  //Clear filter state\n  clearFilterHandler = (ev) => {\n    ev.preventDefault()\n    this.props.dispatch(clearFilter())\n  }\n\n  render() {\n    // Get all the filter chips from the state based on id\n    let filterChips = {}\n    if (this.props.stateFilterApplied) {\n      let allChild = []\n      if (this.props.stateFilterApplied.parentFilter) {\n        filterChips.parentFilter = this.props.stateFilterCategory.find(element => {\n          return element.id === this.props.stateFilterApplied.parentFilter\n        })\n        allChild = filterChips.parentFilter.child\n      }\n      if (this.props.stateFilterApplied.childFilter) {\n        filterChips.childFilter = this.props.stateFilterApplied.childFilter.map(item => {\n          return allChild.find(element => {\n            return element.id === item\n          })\n        })\n      }\n    }\n\n    return (\n      <>\n        <div className=\"row align-items-center align-items-md-start\">\n          <div className=\"col\">\n            <h4\n              className=\"font-weight-bold mr-2 filter-section-total-items\">{this.props.productCount} {this.props.productCount === 1 ? \"item\" : \"items\"}</h4>\n            <div className=\"d-none d-md-block\">\n              <FilterSectionChips\n                filterChips={filterChips}\n                deleteChipHandler={this.deleteChipHandler}\n                clearFilterHandler={this.clearFilterHandler}\n              />\n            </div>\n          </div>\n          <div className=\"col-8 col-md-5 col-lg-6 d-flex justify-content-end text-align-right\">\n            {/* Hide for curator */}\n            {this.props.stateRegistryInfo?.user?.isCurator ?\n              <div className=\"mr-3\">\n                <PublishRegistry />\n              </div>\n            : null}\n            <div className=\"mr-3\" id=\"build-registry-filter\">\n              <Filter/>\n            </div>\n            <div className=\"position-relative\" data-tut=\"build-step-three\">\n              <AddGift/>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"mt-2 d-block d-md-none\">\n          <FilterSectionChips\n            filterChips={filterChips}\n            deleteChipHandler={this.deleteChipHandler}\n            clearFilterHandler={this.clearFilterHandler}\n          />\n        </div>\n      </>\n    )\n  }\n}\n\n\nconst mapStateToProps = state => {\n  return {\n    stateFilterApplied: state.myRegistry.filterApplied,\n    stateFilteredProducts: state.myRegistry.filteredProducts,\n    stateFilterCategory: state.myRegistry.filterCategory,\n    stateRegistryInfo: state.registry.info,\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(FilterSection);\n","import React from \"react\";\nimport \"./CashFundCardNotAdded.scss\";\n\nclass CashFundCardNotAdded extends React.Component {\n  render() {\n    return (\n      <div\n        className={[\"baby-registry-cash-fund-card py-3 mb-2 px-2 px-md-0\", this.props.className ? this.props.className : \"\"].join(\" \")}>\n        <div className=\"row\">\n          <div className=\"col-5 col-sm-4 col-md-2\">\n\n            <div className=\"pl-0 pl-md-3\">\n              {this.props.data.imageUrl ?\n                <img className=\"cash-fund-image d-block mx-auto\" src={this.props.data.imageUrl}/>\n                :\n                <div className=\"baby-registry-cash-fund-no-image\" />\n              }\n            </div>\n\n          </div>\n          <div className=\"col-12 col-sm\">\n            <div className=\"float-left my-2 my-md-0\">\n              <p className=\"text-body font-medium\">{this.props.data.registryCategories[0].category.categoryName}</p>\n              <p\n                className=\"text-sm cash-fund-description\">{this.props.data.registryCategories[0].category.description}</p>\n            </div>\n            <button className=\"cash-fund-add-btn float-md-right float-left mr-6 my-2 my-md-0 \" onClick={this.props.addButtonClickHandler}/>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default CashFundCardNotAdded;","import React from \"react\";\nimport CashFundCardNotAdded from \"./cash-fund-card-not-added/CashFundCardNotAdded\";\n\nclass CashFundCard extends React.Component {\n  render() {\n    return <CashFundCardNotAdded data={this.props.data} addButtonClickHandler={this.props.addButtonClickHandler}/>\n  }\n}\n\nexport default CashFundCard;","import React from \"react\";\nimport \"./SkeletonRecommendationLoader.scss\";\n\nconst SkeletonRecommendationLoader = (props) => {\n  return (\n    <>\n      <h2>{props.title}</h2>\n      <div className=\"skeleton-recommendation-loader row mt-6\">\n        <div className=\"col-md-4 col-sm-12\">\n          <div className=\"card mr-4\">\n            <div className=\"card__image loading\"></div>\n            <div className=\"p-2\">\n              <div className=\"card__title loading\"></div>\n              <div className=\"card__description loading mt-3\"></div>\n              <div className=\"card__price loading mt-3\"></div>\n              <div className=\"d-flex align-items-center mt-5\">\n                <div className=\"d-flex align-items-center\">\n                  <div className=\"card__btn loading mr-1\"></div>\n                  <div className=\"card__quantity loading mr-1\"></div>\n                  <div className=\"card__btn loading\"></div>\n                </div>\n                <div className=\"card__add loading ml-auto\"></div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className=\"col-4 d-sm-none d-none d-md-block\">\n          <div className=\"card mr-4\">\n            <div className=\"card__image loading\"></div>\n            <div className=\"p-2\">\n              <div className=\"card__title loading\"></div>\n              <div className=\"card__description loading mt-3\"></div>\n              <div className=\"card__price loading mt-3\"></div>\n              <div className=\"d-flex align-items-center mt-5\">\n                <div className=\"d-flex align-items-center\">\n                  <div className=\"card__btn loading mr-1\"></div>\n                  <div className=\"card__quantity loading mr-1\"></div>\n                  <div className=\"card__btn loading\"></div>\n                </div>\n                <div className=\"card__add loading ml-auto\"></div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className=\"col-4 d-sm-none d-none d-md-block\">\n          <div className=\"card mr-4\">\n            <div className=\"card__image loading\"></div>\n            <div className=\"p-2\">\n              <div className=\"card__title loading\"></div>\n              <div className=\"card__description loading mt-3\"></div>\n              <div className=\"card__price loading mt-3\"></div>\n              <div className=\"d-flex align-items-center mt-5\">\n                <div className=\"d-flex align-items-center\">\n                  <div className=\"card__btn loading mr-1\"></div>\n                  <div className=\"card__quantity loading mr-1\"></div>\n                  <div className=\"card__btn loading\"></div>\n                </div>\n                <div className=\"card__add loading ml-auto\"></div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  )\n}\n\nexport default SkeletonRecommendationLoader;","import React, {Component} from 'react'\nimport {connect} from \"react-redux\";\nimport AddedCard from \"modules/commons/components/added-card/AddedCard\";\nimport {\n  toggleMustHaveProduct,\n  addRecommendedProduct,\n  setFilterCategory,\n  setCheckListItems,\n  addBlogs,\n} from \"../../MyRegistryActions\";\nimport CheckList from \"modules/my-registry/components/checkList/CheckList\";\nimport CheckListItems from \"modules/my-registry/components/checkList/CheckListItems\";\nimport ViewRecommend from 'modules/commons/components/view-recommend/ViewRecommend';\nimport FilterSection from '../../components/filter-section/FilterSection';\nimport {graphQL, getRecommendation} from 'api/axios';\nimport {GET_RECOMMENDATIONS} from 'api/queries';\nimport {TOGGLE_MUST_HAVE, TOUR_UPDATE_FLAG} from 'api/mutations';\nimport {\n  getProducts,\n  removeProductFromCartHandler,\n  getCategories,\n  updateMushHaveTourFlag,\n  UpdateBuildTourFlag, setMetaInfoToDom\n} from \"utils/commonFunction\";\nimport {Cookies} from \"react-cookie\";\nimport config from \"api/config\";\nimport axios from \"axios\";\nimport CashFundCard from \"../../../commons/components/cash-fund-card/CashFundCard\";\nimport Button from \"../../../commons/components/button-component/ButtonComponent\";\nimport AddCashFundModal from \"../../../commons/components/cash-fund-card/add-cash-fund-modal/AddCashFundModal\";\nimport \"./Everything.scss\";\nimport Tour from 'reactour';\nimport TourCard from 'modules/commons/components/tour-card/TourCard';\nimport {BUILD_REGISTRY_STEPS, MUST_HAVE_STEPS} from 'utils/constants';\nimport {setLoader} from \"modules/registry/RegistryActions\";\nimport {fetchDefaultCashFundImage, removeFixedRegistryHero} from \"../../../../utils/commonFunction\";\nimport {toast} from 'react-toastify';\nimport Accordion from 'react-bootstrap/Accordion';\nimport {InView} from \"react-intersection-observer\";\nimport SkeletonRecommendationLoader from 'modules/commons/components/skeleton-recommendation-loader/SkeletonRecommendationLoader';\n\nclass Everything extends Component {\n\n  state = {\n    showCashFundModal: false,\n    cashFundProduct: null,\n    isTourOpen: false,\n    isMustHaveTour: false,\n    steps: [],\n    recommendedCashFundImage: [],\n    updateTour: false\n  }\n  checkListRef = React.createRef();\n  recommendationAPICalled = false\n  blogsAPICalled = false\n  isRecommendationLoaderActive = false\n  updateRecommendedCashFundImage = false\n  toastDisplayed = false\n\n  // For Scrolling\n  checkListHeightFromTop = null\n  lastScrollTop = 0;\n  queryParams = null\n\n  rootInViewRef = React.createRef()\n\n  componentDidMount() {\n    this.checkListHeightFromTop = null\n    this.lastScrollTop = 0;\n    window.addEventListener('scroll', this.handleScroll);\n    getCategories(this.props.stateRegistryInfo.id, this.props.dispatch);\n\n    // For refreshing Recommendation if user has edit checklist or has given quiz\n    if (this.props.location.state?.getRecommendation) {\n      this.setAllRecommendation(this.props.stateCheckList)\n    }\n\n    // For redirecting from param to open cash fund modal instructions\n    this.queryParams = new URLSearchParams(decodeURI(window.location.search))\n    if (this.queryParams.has('cash_fund')) {\n      this.openCashFundModal()\n      this.deleteParamsFromUrl('cash_fund')\n    }\n  }\n\n  openCashFundModal = () => {\n    this.setState({\n      showCashFundModal: true\n    })\n  }\n\n  setCashFundCategoryAndOpenModal = (product) => {\n    this.setState({\n      cashFundProduct: {...product}\n    })\n    this.openCashFundModal()\n  }\n\n  closeCashFundModal = async () => {\n    await this.props.dispatch(setLoader(true))\n    await this.setState({\n      showCashFundModal: false,\n      cashFundProduct: null\n    })\n    await this.props.dispatch(setLoader(false))\n  }\n\n  // Get Product Count By Quantity\n  getProductCountByQuantity = (products, type = null) => {\n    // TODO: change this if needed\n    let totalSum = 0;\n    if (products && products.length) {\n      for (let product of products) {\n        if (type === \"reserved\") {\n          totalSum += product.quantityStatus.reserved_quantity ? Number(product.quantityStatus.reserved_quantity) : 0\n        }\n        else if (type === \"available\") {\n          if (product.isGroupGift || product.isCashAcceptedOnly) {\n            totalSum += product.quantity - product.purchasedQuantity > 0 ? product.quantity - product.purchasedQuantity : product.purchasedQuantity\n          }\n          else {\n            totalSum += product.quantityStatus.still_needed ? Number(product.quantityStatus.still_needed) : 0\n          }\n        }\n        else if (type === \"purchased\") {\n          totalSum += product.purchasedQuantity > 0 ? Number(product.purchasedQuantity) : 0\n        }\n        else {\n          totalSum += product.quantity ? Number(product.quantity) : 0\n        }\n      }\n      return totalSum;\n    }\n  }\n\n  // Updating product count in filter categories\n  updateFilterList = (addedProducts) => {\n    const newFilterList = [\n      {\n        id: \"giftsAdded\",\n        display: \"Items added\",\n        count: this.getProductCountByQuantity(addedProducts),\n        child: [\n          {\n            id: \"mustHave\",\n            display: \"Must have\",\n            count: this.getProductCountByQuantity(addedProducts.filter(product => product.mostWanted))\n          },\n          {\n            id: \"purchased\",\n            display: \"Purchased\",\n            count: this.getProductCountByQuantity(addedProducts.filter(product => product.purchasedQuantity > 0), 'purchased')\n          },\n          {\n            id: \"reserved\",\n            display: \"Reserved\",\n            count: this.getProductCountByQuantity(addedProducts.filter(product => product.quantityStatus && product.quantityStatus.reserved_quantity > 0), 'reserved')\n          },\n          {\n            id: \"available\",\n            display: \"Available\",\n            count: this.getProductCountByQuantity(addedProducts.filter(product => !product.isPurchased && product.quantityStatus && product.quantity > product.quantityStatus.reserved_quantity), 'available')\n          }\n        ]\n      },\n      {\n        id: \"giftsToAdd\",\n        display: \"Items to add\",\n        count: 0\n      }\n    ]\n\n    this.props.dispatch(setFilterCategory(newFilterList))\n  }\n\n  toggleMustHaveProduct = (e, product) => {\n    e.stopPropagation()\n    if (!this.props.stateRegistryInfo.isMustHaveApplied) {\n      let steps = {...MUST_HAVE_STEPS}\n      steps[0].selector = '[data-tut=\"must-have-' + product.id + '\"]';\n      steps.length = 1;\n      this.setState({\n        isMustHaveTour: true,\n        steps: steps,\n        isTourOpen: true\n      })\n    }\n\n    let data = {\n      query: TOGGLE_MUST_HAVE,\n      variables: {\n        productId: product.id,\n        mustHaveValue: !product.mostWanted,\n        quantity: product.quantity\n      }\n    }\n    graphQL(data).then(res => {\n      if (res.status === 200) {\n        this.props.dispatch(toggleMustHaveProduct(product.item.id))\n      }\n    }).catch(err => {\n      console.error(err.message)\n    })\n  }\n\n  // removes category recommandation is not found\n  setCategoryOnRecommandation = (recommendations) => {\n    let finalCheckList = []\n    let allCategories = [...this.props.stateCheckList]\n\n    // For Parent categories\n    for (let category of allCategories) {\n      let finalSubCategory = []\n      if (category.subCategories?.length) {\n        // For Sub-Categories\n        for (let subCategory of category.subCategories) {\n          let tempSubCategory = []\n          let finalSubCategoryType = []\n          if (subCategory.subProductTypes.length) {\n            // For subProductType\n            for (let subProductType of subCategory.subProductTypes) {\n              let isSubProductFound = [...recommendations].find(rec => rec.category.id === subProductType.category.id)\n              if (isSubProductFound || subProductType.addedItemsCount > 0) {\n                finalSubCategoryType.push(subProductType)\n              }\n            }\n            let tempSubProductType = { ...subCategory }\n            tempSubProductType.subProductTypes = finalSubCategoryType\n            tempSubCategory.push(tempSubProductType)\n          }\n          else {\n            let isSubCategoryFound = [...recommendations].find(rec => rec.category.id === subCategory.category.id)\n            if (isSubCategoryFound || subCategory.addedItemsCount > 0 || Number(subCategory.category.categoryType.id) === 2) {\n              tempSubCategory.push(subCategory)\n            }\n          }\n          finalSubCategory.push(...tempSubCategory)\n        }\n        let tempCategory = { ...category }\n        tempCategory.subCategories = finalSubCategory\n        finalCheckList.push(tempCategory)\n      }\n      else {\n        let tempCategory = { ...category }\n        finalCheckList.push(tempCategory)\n      }\n    }\n\n    this.props.dispatch(setCheckListItems(finalCheckList))\n    return finalCheckList;\n  }\n\n  setAllRecommendation = async (categories) => {\n    // this.props.dispatch(setLoader(true))\n    if (this.props.location.state?.getRecommendation) {\n      let urlParams = {...this.props.location.state}\n      urlParams.getRecommendation = false;\n      this.props.history.replace({\n        pathname: this.props.location.pathname,\n        state: urlParams\n      });\n    }\n\n    this.isRecommendationLoaderActive = true\n    let data = {\n      query: GET_RECOMMENDATIONS,\n      variables: {\n        registryId: Number(this.props.stateRegistryInfo.id),\n      }\n    }\n    const apiURL = process.env.NODE_ENV === 'production' ? config.PRODUCTION_API_URL : config.LOCAL_API_URL;\n    const cookies = new Cookies();\n    let sameVariantshopifyItemId = {}\n    await axios.get(apiURL + 'graphql', {\n      params: data,\n      headers: {\"Authorization\": cookies.get(\"access_token\") ? \"Token \" + cookies.get(\"access_token\") : \"\"}\n    })\n    .then(res => {\n      let rData = []\n      let totalRecommendations = 0\n      this.isRecommendationLoaderActive = false\n      // Remove this comment if you want to change categories on Recommendation\n      // let finalCat = this.setCategoryOnRecommandation([...res.data.data.itemRecommendations])\n\n      // Getting all categories\n      let recommendedCategory = []\n      for (let parentCat of [...this.props.stateAllCheckList]) {\n        for (let category of parentCat.subCategories) {\n          if (category.subProductTypes.length) {\n            for (let subProduct of category.subProductTypes) {\n              recommendedCategory.push({\n                ...subProduct,\n                isSubProduct: true,\n                parentCategory: category.categoryName,\n              })\n            }\n          } else {\n            recommendedCategory.push({\n              ...category,\n              parentCategory: parentCat.categoryName,\n            })\n          }\n        }\n      }\n\n      let activeHorizonalVariantIndex = {}\n      for (let item of [...res.data.data.itemRecommendations]) {\n        let visibleCategory = null\n        // For Bundle Product\n        if (item.itemRecommendationCategoryItemRecommendation.length) {\n          let tempCat = [...item.itemRecommendationCategoryItemRecommendation].map(cat => {\n            if (cat.isVisibleProduct) {\n              visibleCategory = {...cat}\n            }\n            let recommendationCat = [...recommendedCategory].find(recCat => recCat.category.id === cat.category.id)\n            if (recommendationCat) {\n              return {\n                ...recommendationCat,\n                itemsCount: cat.itemsCount,\n                isVisibleProduct: cat.isVisibleProduct\n              }\n            }\n          })\n          item.itemRecommendationCategoryItemRecommendation = [...tempCat]\n        }\n        if (!visibleCategory) {\n          visibleCategory = item.itemRecommendationCategoryItemRecommendation[0]\n        }\n        let recommendationCat = [...recommendedCategory].find(cat => cat.category.id === visibleCategory.category.id)\n        if (recommendationCat) {\n          let resData = {...item}\n          resData['originalRecommandtionId'] = resData.id\n          resData['id'] = totalRecommendations\n          resData['quantity'] = 1\n          resData['category'] = recommendationCat\n          if (item.maItemVariantItemRecommendation.length) {\n            let allVariants = []\n            let dictPattern = []\n            for (let itemvariant of [...item.maItemVariantItemRecommendation]) {\n              // If pattern is dict\n              if (!dictPattern.includes(itemvariant.pattern)) {\n                itemvariant['isAllVariantFetch'] = false\n                itemvariant['title'] = itemvariant.size\n                itemvariant['selected'] = true\n                // This is registryCategoryId used while adding product\n                itemvariant['registryCategoryId'] = [{id: recommendationCat.id}]\n                itemvariant['allSizeVariant'] = [{...itemvariant}]\n                allVariants.push(itemvariant)\n                dictPattern.push(itemvariant.pattern)\n              }\n            }\n            // Setting different active recommantion vertically\n            let activeVariantId = 0\n            if (sameVariantshopifyItemId[item.shopifyItemId] && (sameVariantshopifyItemId[item.shopifyItemId].index || sameVariantshopifyItemId[item.shopifyItemId].index === 0)) {\n              sameVariantshopifyItemId[item.shopifyItemId].index += 1\n              activeVariantId = sameVariantshopifyItemId[item.shopifyItemId].index % allVariants.length;\n\n              // If veritically pattern matches then changing the activeVariant \n              if (resData.maItemVariantItemRecommendation[activeVariantId].pattern === sameVariantshopifyItemId[item.shopifyItemId].pattern) {\n                activeVariantId = (activeVariantId + 1) % allVariants.length\n              }\n              sameVariantshopifyItemId[item.shopifyItemId].pattern = resData.maItemVariantItemRecommendation[activeVariantId].pattern\n              activeHorizonalVariantIndex[resData.originalRecommandtionId] = {index: activeVariantId + 1, pattern: resData.maItemVariantItemRecommendation[activeVariantId].pattern}\n            } else {\n              sameVariantshopifyItemId[item.shopifyItemId] = {index: 0, pattern: resData.maItemVariantItemRecommendation[0].pattern};\n            }\n            resData['maItemVariantItemRecommendation'] = allVariants\n            resData['activeVariant'] = {\n              ...resData.maItemVariantItemRecommendation[activeVariantId],\n              activeSizeVariant: {\n                ...resData.maItemVariantItemRecommendation[activeVariantId],\n                title: resData.maItemVariantItemRecommendation[activeVariantId].size\n              }\n            }\n          } else {\n            resData['activeVariant'] = null\n          }\n          totalRecommendations += 1;\n          rData.push(resData)\n        }\n      }\n      // If recommandtions for category is less then 5.\n      // Adding more recommandation by changing varients\n      for (let category of [...recommendedCategory]) {\n        let addedRecommendations = []\n        let categoryRecommandations = [...rData].filter(el => {\n          if (el.category.id === category.id && !addedRecommendations.includes(el.id)) {\n            addedRecommendations.push(el.id)\n            return true;\n          }\n          return false;\n        })\n        if (categoryRecommandations.length > 0 && categoryRecommandations.length < 5) {\n          let pendingRecommandations = 5 - categoryRecommandations.length\n          let index = 1\n          while (pendingRecommandations > 0) {\n            let hasItemFound = false\n            for (let item of [...categoryRecommandations]) {\n              if (item.maItemVariantItemRecommendation.length > index) {\n                hasItemFound = true\n                let resData = {...item}\n                resData['id'] = totalRecommendations\n                let activeIndex = activeHorizonalVariantIndex[item.originalRecommandtionId] && activeHorizonalVariantIndex[item.originalRecommandtionId].index ? activeHorizonalVariantIndex[item.originalRecommandtionId].index % (item.maItemVariantItemRecommendation.length) : index;\n                resData['activeVariant'] = {\n                  ...resData.maItemVariantItemRecommendation[activeIndex],\n                  activeSizeVariant: {\n                    ...resData.maItemVariantItemRecommendation[activeIndex],\n                    title: resData.maItemVariantItemRecommendation[activeIndex].size\n                  }\n                }\n                totalRecommendations += 1;\n                pendingRecommandations -= 1;\n                if (activeHorizonalVariantIndex[item.originalRecommandtionId]) {\n                  activeHorizonalVariantIndex[item.originalRecommandtionId].index = activeIndex + 1\n                }\n                rData.push(resData)\n              }\n              if (pendingRecommandations <= 0) {\n                break\n              }\n            }\n            if (!hasItemFound || pendingRecommandations <= 0) {\n              pendingRecommandations = 0;\n              break\n            }\n            index += 1;\n          }\n        }\n      }\n      if (rData.length !== 0) {\n        this.props.dispatch(addRecommendedProduct(rData))\n      }\n      this.props.dispatch(setLoader(false))\n    }).catch(err => {\n      this.recommendationAPICalled = false\n      this.props.dispatch(setLoader(false))\n      this.isRecommendationLoaderActive = false\n      console.error(err.message)\n    })\n  }\n\n  setAllBlogs = async (categories) => {\n    let recommendedCategory = []\n    for (let parentCat of categories) {\n      for (let category of parentCat.subCategories) {\n        recommendedCategory.push({\n          ...category,\n          parentCategory: parentCat.categoryName,\n        })\n      }\n    }\n    for (let recommendedCat of recommendedCategory) {\n      const GET_BLOGS = `\n      query{\n        articles(first:1 query:\"tag:${recommendedCat.categoryName}\"){\n          edges{\n            node{\n              id\n              handle\n              tags\n              url\n              title\n              publishedAt\n              image{\n                originalSrc\n              }\n              authorV2{\n                firstName\n                lastName\n                name\n              }\n            }\n          }\n        }\n      }\n      `\n      let data = {\n        query: GET_BLOGS,\n      }\n      const apiURL = process.env.NODE_ENV === 'production' ? config.PRODUCTION_API_URL : config.LOCAL_API_URL;\n      const cookies = new Cookies();\n\n      await axios.get(apiURL + 'items/blogs', {\n        params: data,\n        headers: { \"Authorization\": cookies.get(\"access_token\") ? \"Token \" + cookies.get(\"access_token\") : \"\" }\n      })\n        .then(async res => {\n          let rData = res.data.data.articles.edges\n          let blog = null\n          if (rData.length !== 0) {\n            let blogCategory = recommendedCat?.subProductTypes.length ? recommendedCat.subProductTypes[recommendedCat.subProductTypes.length - 1] : recommendedCat;\n            blog = {...rData[0].node}\n            blog.category = {...blogCategory}\n            await this.props.dispatch(addBlogs([blog]))\n          }\n        }).catch(err => {\n          console.error(err.message)\n        })\n    }\n  }\n\n  cashFundImageApiCalled = []\n\n  getSortedProducts = (addedProducts, stateCategories, stateRecommendedProducts, stateFilterApplied, stateBlogs) => {\n    const cashFundCategory = stateCategories.find(category => category.categoryType && Number(category.categoryType.id) === 2)\n    // for future ref : let cashFundCount = 0\n    let productsToAppend = []\n    if (cashFundCategory) {\n      for (let subCategory of cashFundCategory.subCategories) {\n        let currentCashFundImage = this.state.recommendedCashFundImage.find(el => el.categoryId === subCategory.id)\n\n        // Preventing multiple api calls\n        let imageApiCalled = this.cashFundImageApiCalled.find(el => el === subCategory.id)\n\n        if (!currentCashFundImage && !imageApiCalled) {\n          this.cashFundImageApiCalled.push(subCategory.id)\n          fetchDefaultCashFundImage(subCategory.category.id).then(async res => {\n            if (res.status === \"success\") {\n              this.updateRecommendedCashFundImage = true\n\n              await this.setState({\n                recommendedCashFundImage: this.state.recommendedCashFundImage.find(el => el.categoryId === subCategory.id) ? this.state.recommendedCashFundImage : [...this.state.recommendedCashFundImage, {\n                  categoryId: subCategory.id,\n                  imageUrl: res.data\n                }],\n              })\n              this.cashFundImageApiCalled = this.cashFundImageApiCalled.filter(el => el !== subCategory.id)\n            }\n          })\n        }\n        if (Number(subCategory.addedItemsCount) === 0) {\n          //for future ref :  cashFundCount++;\n          productsToAppend.push({\n            imageUrl: currentCashFundImage && currentCashFundImage.imageUrl ? currentCashFundImage.imageUrl : \"\",\n            registryCategories: [{\n              id: subCategory.id,\n              category: {\n                ...subCategory\n              }\n            }]\n          })\n        }\n      }\n      if (!stateFilterApplied.parentFilter) {\n        addedProducts = [...addedProducts, ...productsToAppend]\n      }\n    }\n\n    let allProducts = []\n    let productCount = 0;\n    let productIds = [];\n    let totalProductQuantity = 0;\n    let categories = []\n    for (let parentCat of stateCategories) {\n      if (!parentCat.isParent) {\n        categories.push({\n          id: parentCat.id,\n          name: parentCat.categoryName,\n          categoryName: parentCat.categoryName,\n          added: parentCat.addedItemsCount,\n          addedItemsCount: parentCat.addedItemsCount,\n          total: parentCat.totalItemsCount,\n          totalItemsCount: parentCat.totalItemsCount,\n          isSubProductTypes: false,\n          category: parentCat.category,\n          parentCategory: {\n            id: parentCat.id,\n            name: parentCat.categoryName,\n            categoryName: parentCat.categoryName,\n            category: parentCat.category,\n          },\n          superParentCat: null,\n          categoryType: parentCat.categoryType,\n        })\n      } else {\n        for (let category of parentCat.subCategories) {\n          if (category.subProductTypes?.length) {\n            for (let subProduct of category.subProductTypes) {\n              categories.push({\n                id: subProduct.id,\n                name: subProduct.categoryName,\n                categoryName: subProduct.categoryName,\n                added: subProduct.addedItemsCount,\n                addedItemsCount: subProduct.addedItemsCount,\n                total: subProduct.totalItemsCount,\n                totalItemsCount: subProduct.totalItemsCount,\n                isSubProductTypes: true,\n                isSubProduct: true,\n                category: subProduct.category,\n                parentCategory: {\n                  id: category.id,\n                  name: category.categoryName,\n                  categoryName: category.categoryName,\n                  category: category.category,\n                },\n                superParentCat: {\n                  id: parentCat.id,\n                  name: parentCat.categoryName,\n                  categoryName: parentCat.categoryName,\n                  category: parentCat.category,\n                },\n                categoryType: category.categoryType,\n              })\n            }\n          } else {\n            categories.push({\n              id: category.id,\n              name: category.categoryName,\n              categoryName: category.categoryName,\n              added: category.addedItemsCount,\n              addedItemsCount: category.addedItemsCount,\n              total: category.totalItemsCount,\n              totalItemsCount: category.totalItemsCount,\n              isSubProductTypes: false,\n              category: category.category,\n              parentCategory: {\n                id: parentCat.id,\n                name: parentCat.categoryName,\n                categoryName: parentCat.categoryName,\n                category: parentCat.category,\n              },\n              superParentCat: null,\n              categoryType: category.categoryType,\n            })\n          }\n        }\n      }\n    }\n\n\n    for (let category of categories) {\n      let products = []\n      let recommendations = []\n\n      // Getting filtered Products and recommendations\n      if (stateFilterApplied.parentFilter) {\n        if (stateFilterApplied.parentFilter === \"giftsAdded\") {\n          if (stateFilterApplied.childFilter.length > 0) {\n            const childFilterArray = stateFilterApplied.childFilter\n\n            for (let product of addedProducts) {\n              let categoryFound = false\n              for (let cat of product.registryCategories) {\n                if (cat.id === category.id) {\n                  categoryFound = true\n                  break\n                }\n              }\n              if (\n                ((childFilterArray.includes(\"mustHave\") && product.mostWanted) ||\n                  (childFilterArray.includes(\"purchased\") && product.purchasedQuantity > 0) ||\n                  (childFilterArray.includes(\"reserved\") && product.quantityStatus && product.quantityStatus.reserved_quantity > 0) ||\n                  (childFilterArray.includes(\"available\") && !product.isPurchased && product.quantityStatus && product.quantity > product.quantityStatus.reserved_quantity)) && categoryFound\n              ) {\n                products.push(product)\n                // filteredProductsId.push(product.id)\n              }\n            }\n          } else {\n            // TODO: change category\n            products.push(...addedProducts.filter(el => {\n              let categoryFound = false\n              for (let cat of el.registryCategories) {\n                if (cat.id === category.id) {\n                  categoryFound = true\n                  break\n                }\n              }\n              return categoryFound;\n            }))\n          }\n        } else if (stateFilterApplied.parentFilter === \"giftsToAdd\") {\n          let addedRecommendations = []\n          recommendations = stateRecommendedProducts.filter(el => {\n            if (el.category.id === category.id && !addedRecommendations.includes(el.id)) {\n              addedRecommendations.push(el.id)\n              return true;\n            }\n            return false;\n          }).map(el => {\n            let recommendationProduct = {...el};\n            recommendationProduct.category = category;\n            return recommendationProduct;\n          })\n        }\n      } else {\n        // TODO: Change this condition(el.item.category.length)\n        // TODO: change category\n        products.push(...addedProducts.filter(el => {\n          let categoryFound = false\n          for (let cat of el.registryCategories) {\n            if (cat.id === category.id) {\n              categoryFound = true\n              break\n            }\n          }\n          return categoryFound && el.registryCategories.length\n        }))\n        let addedRecommendations = []\n        recommendations = stateRecommendedProducts.filter(el => {\n          if (el.category.id === category.id && !addedRecommendations.includes(el.id)) {\n            addedRecommendations.push(el.id)\n            return true;\n          }\n          return false;\n        }).map(el => {\n          let recommendationProduct = {...el};\n          recommendationProduct.category = category;\n          return recommendationProduct;\n        })\n      }\n\n      if (products.length > 0) {\n        for (let item of products) {\n          if (!productIds.includes(item.id) && item.id !== undefined) {\n            productIds.push(item.id)\n            totalProductQuantity += item.quantity\n          }\n        }\n      }\n\n      if (stateFilterApplied.parentFilter) {\n        if (stateFilterApplied.parentFilter === \"giftsToAdd\" && Number(category.categoryType.id) === 2) {\n          let productToPush = productsToAppend.find(product => product.registryCategories[0].id === category.id)\n          if (productToPush) {\n            products.push(productToPush)\n          }\n        }\n      }\n      // for future ref : productCount += products.length;\n      allProducts.push({\n        category: category,\n        products: products,\n        recommendations: (category.added < category.total || category.total === 0) ? recommendations : [],\n        blogs: [...stateBlogs].find(blog => blog.category.id === category.id)\n      })\n    }\n\n    // Grouping products based on parent category\n    let groupedProducts = []\n    for (const product of allProducts) {\n      let foundCategory = false;\n      groupedProducts = groupedProducts.map(el => {\n\n        if (product.category.superParentCat) {\n          if (el.id === product.category.superParentCat.id) {\n            foundCategory = true;\n            el.allProducts.push(product);\n          }\n        } else if (el.id === product.category.parentCategory.id) {\n          foundCategory = true;\n          el.allProducts.push(product);\n        }\n        return el;\n      })\n\n      if (!foundCategory) {\n        groupedProducts.push({\n          ...product.category.parentCategory,\n          categoryType: product.category.categoryType,\n          allProducts: [product]\n        })\n      }\n    }\n\n    // Adding total products and recommendations\n    groupedProducts = groupedProducts.map(el => {\n      let productCount = 0;\n      let recommendationCount = 0;\n\n      for (let product of el.allProducts) {\n        productCount += product.products.length;\n        recommendationCount += product.recommendations.length;\n      }\n\n      el['totalProducts'] = productCount;\n      el['totalRecommendations'] = recommendationCount;\n      return el;\n    })\n\n    // Removing items that does not have products or recommendations based on filters\n    if (stateFilterApplied.parentFilter) {\n      if (stateFilterApplied.parentFilter === \"giftsAdded\") {\n        groupedProducts = groupedProducts.filter(product => product.totalProducts > 0)\n      } else if (stateFilterApplied.parentFilter === \"giftsToAdd\") {\n        groupedProducts = groupedProducts.filter(product => {\n          if (Number(product.categoryType.id) === 2) {\n            return true\n          }\n          return product.totalRecommendations > 0\n        })\n      }\n    } else {\n      groupedProducts = groupedProducts.filter(product => (product.totalProducts > 0 || product.totalRecommendations > 0))\n    }\n\n    // for future ref :\n    // if (!stateFilterApplied.parentFilter) {\n    //   productCount -= cashFundCount\n    // }\n\n    // TODO: Use this if we need total products not quality\n    // productCount = productIds.length\n    productCount = totalProductQuantity\n    return {groupedProducts, productCount};\n  }\n\n  getChecklistPercentage = (checklistItems) => {\n    let totalItems = 0;\n    let addedItems = 0;\n    for (let category of checklistItems) {\n      totalItems += category.totalItemsCount;\n      addedItems += (category.addedItemsCount <= category.totalItemsCount ? category.addedItemsCount : category.totalItemsCount);\n    }\n\n    let result = {\n      result: (addedItems / totalItems) * 100,\n      addedItems: addedItems,\n      totalItems: totalItems,\n    }\n    return result;\n  }\n\n  handleToggleEvent = () => {\n    const checkListIconEl = this.checkListRef.current;\n    // checkListIconEl.classList.toggle(\"closed\");\n    checkListIconEl.classList.toggle(\"opened\");\n\n    let scrollAreaEl = document.getElementById('checklist-scrollarea')\n    if (checkListIconEl.classList.contains(\"opened\")){\n      scrollAreaEl.style.overflow=\"scroll\";\n      document.body.style.overflow=\"hidden\";\n    } else {\n      scrollAreaEl.scrollTop = 0;\n      document.body.style.overflow=\"scroll\";\n      scrollAreaEl.style.overflow=\"hidden\";\n    }\n  }\n\n  closeTour = () => {\n    // For Build tour\n    if (!this.props.stateRegistryInfo.isBuildRegistryVisited && !this.state.isMustHaveTour) {\n      UpdateBuildTourFlag(this.props.stateRegistryInfo, this.props.dispatch)\n    }\n\n    // For must-have\n    if (this.state.isMustHaveTour && !this.props.stateRegistryInfo.isMustHaveApplied) {\n      updateMushHaveTourFlag(this.props.stateRegistryInfo, this.props.dispatch)\n    }\n\n    this.setState({\n      isTourOpen: false\n    })\n  }\n\n  showToast = async () => {\n    if (!this.toastDisplayed) {\n      await toast.success(<p>{this.props.location.state.toastMessage}</p>)\n      this.toastDisplayed = true\n    }\n    let urlParams = {...this.props.location.state}\n    urlParams.toastMessage = false;\n    this.props.history.replace({\n      pathname: this.props.location.pathname,\n      state: urlParams\n    });\n  }\n\n  handleScroll = (event) => {\n    // For making it responsive\n    if (document.body.offsetWidth > 992) {\n      let el = document.getElementById('checklist-scrollarea');\n      let registryContainer = document.getElementById('m-a-registry-container');\n      if (el) {\n        // Fixing the checklist when it is at bottom\n        if (registryContainer.getBoundingClientRect().bottom <= window.innerHeight && registryContainer.offsetHeight > el.offsetHeight) {\n          el.style.position = 'fixed';\n          el.style.top = `${(registryContainer.getBoundingClientRect().bottom % window.innerHeight) - window.innerHeight}px`;\n\n          // TODO: Uncomment this if needed\n          // Scrolling the checklist when it is at bottom\n          // var st = window.pageYOffset || document.documentElement.scrollTop;\n          // if (st > this.lastScrollTop){\n          //   // when scrolldown code\n          //   el.scrollTop += 15;\n          // }\n          // this.lastScrollTop = st <= 0 ? 0 : st;\n        }\n      }\n    }\n  }\n\n  scrollObserver = (inView, entry) => {\n    if (document.body.offsetWidth > 992) {\n      if (inView) {\n        if (entry.target) {\n          let otherEl = document.querySelector('.active-checklist-item');\n          if (otherEl) {\n            otherEl.classList.remove('active-checklist-item')\n          }\n          let targetEl = document.getElementById(entry.target.id + '_scroll')\n          let scrollarea = document.getElementById('checklist-scrollarea');\n\n          if (targetEl) {\n            targetEl.classList.add('active-checklist-item')\n            let checkListCard = document.getElementById('checklist-header-' + targetEl.getAttribute('data-cardid'));\n            if (checkListCard?.nextSibling && !checkListCard.nextSibling.classList.contains('show')) {\n              checkListCard.click();\n              // Scrolling active to middle of screen\n              if (scrollarea && scrollarea.style.position === 'fixed') {\n                setTimeout(() => {\n                  targetEl.scrollIntoView({block: \"center\"});\n                }, 1000);\n              }\n            }\n\n            // Scrolling active to middle of screen\n            if (scrollarea && scrollarea.style.position === 'fixed') {\n              targetEl.scrollIntoView({block: \"center\"});\n            }\n          }\n        }\n      } else {\n        let otherEl = document.querySelector('.active-checklist-item')\n        if (!otherEl) {\n          let defaultEl = document.querySelector(\".checklist-item-highlight\");\n          defaultEl.classList.add('active-checklist-item')\n        }\n      }\n    }\n  }\n\n  getOffset = (el) => {\n    const rect = el.getBoundingClientRect();\n    return {\n      left: rect.left + window.scrollX,\n      top: rect.top + window.scrollY\n    };\n  }\n\n  scrollToCategory = (category) => {\n    const categorySection = document.getElementById(category)\n    if (categorySection) {\n      let offset = this.getOffset(categorySection);\n      window.scrollTo(0, offset.top)\n    }\n  }\n\n  deleteParamsFromUrl = (param) => {\n    this.queryParams.delete(param)\n      this.props.history.replace({\n        search: this.queryParams.toString(),\n      })\n  } \n\n  render() {\n    // Setting Meta info to DOM\n    if (this.props.stateSeo) {\n      setMetaInfoToDom(this.props.stateSeo['build-registry-ma'], \"build-registry\")\n    }\n\n    if (this.props.stateRecommendedProducts.length === 0 && this.props.stateAllCheckList.length > 0 && !this.recommendationAPICalled) {\n      this.setAllRecommendation(this.props.stateAllCheckList);\n      this.recommendationAPICalled = true\n    }\n\n    if (this.props.stateBlogs.length === 0 && this.props.stateCheckList.length > 0 && !this.blogsAPICalled) {\n      this.blogsAPICalled = true\n      this.setAllBlogs(this.props.stateCheckList);\n    }\n\n    // Recommendation Loader\n    // if (this.isRecommendationLoaderActive && !this.props.stateLoader && this.props.stateRecommendedProducts.length === 0) {\n    //   this.props.dispatch(setLoader(true))\n    // }\n\n    // For Build-registry tour\n    if (!this.state.isMustHaveTour && !this.props.stateRegistryInfo.isBuildRegistryVisited && this.props.stateRecommendedProducts.length && !this.state.isTourOpen) {\n      this.setState({\n        isTourOpen: true,\n        steps: BUILD_REGISTRY_STEPS\n      })\n    } else if (!this.state.isMustHaveTour && this.state.isTourOpen && this.props.stateRegistryInfo.isBuildRegistryVisited && this.props.stateRecommendedProducts.length) {\n      this.setState({\n        isTourOpen: false,\n      })\n    }\n\n    document.body.style.overflow = this.state.isTourOpen || this.props.stateLoader ? \"hidden\" : \"auto\";\n\n    // Removing navbar when tour is open\n    if (!this.state.isMustHaveTour && this.state.isTourOpen) {\n      removeFixedRegistryHero()\n    }\n\n    // For scrolling by param in url to Category\n    // For redirecting it to perticular category section\n    if (this.queryParams?.has('redirect-to-category') && !this.props.stateLoader && this.props.stateCheckList.length > 0 && this.props.stateRecommendedProducts.length) {\n      // Setting timeout because DOM will not be render yet when the Recommandation state is updated\n      setTimeout(() => {\n        this.scrollToCategory(this.queryParams.get('redirect-to-category'))\n        this.deleteParamsFromUrl('redirect-to-category')\n      }, 1000);\n    }\n\n    // For loader\n    if (this.props.stateCheckList.length <= 0) {\n      this.props.dispatch(setLoader(true))\n    }\n\n    // For toast message from other route\n    if (this.props.location.state?.toastMessage && !this.toastDisplayed) {\n      this.showToast()\n    }\n\n    this.updateFilterList(this.props.stateAddedProducts)\n    let {groupedProducts, productCount} = this.getSortedProducts(this.props.stateAddedProducts, this.props.stateCheckList, this.props.stateRecommendedProducts, this.props.stateFilterApplied, this.props.stateBlogs)\n\n    return (\n      <>\n        <div className=\"container\">\n          <div className=\"row mt-3 mt-md-6\">\n            {/* View CheckList */}\n            <div className=\"col-md-12 col-lg-3 px-0 px-lg-2 checklist-container\" id=\"checklist-container\"\n                 ref={this.checkListRef}>\n              <div data-tut=\"build-step-one\" className=\"pr-0 pr-md-5 checklist-scrollarea\" id=\"checklist-scrollarea\">\n                <div className=\"d-flex align-items justify-content-between px-4 px-lg-0 w-100 checklist-header\">\n                  <CheckList percentage={this.getChecklistPercentage(this.props.stateCheckList)}/>\n                  <span className=\"checklist-container-icon-arrow mr-2 mr-md-0\" onClick={this.handleToggleEvent}></span>\n                </div>\n                <div className=\"divider-div d-inline-block d-lg-none my-2\"/>\n                <div className=\"checklist-items-continer px-4 px-md-0\">\n                  <Accordion\n                    className=\"accordion-list mb-5\"\n                    defaultActiveKey=\"0\">\n                    {this.props.stateCheckList.map((item, i) =>\n                      <CheckListItems\n                        index={String(i)}\n                        key={item.categoryName}\n                        item={item}\n                        defaultActiveKey={\"0\"}\n                        dispatch={this.props.dispatch}/>\n                    )}\n                  </Accordion>\n                </div>\n              </div>\n            </div>\n            <div className=\"col-12 col-lg-9 mb-11 px-3\" id=\"m-a-registry-container\">\n\n              {/* Top Filter Section */}\n              <FilterSection productCount={productCount}/>\n              <div className=\"mt-5 px-2 px-md-0\">\n                {groupedProducts.map((el, elIndex) => {\n                  let hasCashFund = false;\n                  return (<div key={`el-${elIndex}`}>\n                      <h4 className=\"text-uppercase my-4\">{el.name}</h4>\n                      {el.allProducts.map((product, i) => (\n                        <InView\n                          key={`category-${i}`}\n                          as=\"div\"\n                          onChange={this.scrollObserver}\n                          // threshold={0}\n                          rootMargin={`0px 0px ${(window.innerHeight - (window.innerHeight*0.25))*(-1)}px 0px`}\n                          id={product.category.parentCategory.name + '(' + product.category.name + ')'}\n                          className=\"product-category-wrapper\"\n                        >\n                          {product.products.map((card, index) => {\n                            if (Number(card.registryCategories[0].category.categoryType.id) === 2) {\n                              hasCashFund = true\n                            }\n                            if (Number(card.registryCategories[0].category.categoryType.id) === 2 && Number(card.registryCategories[0].category.addedItemsCount) === 0) {\n                              return (\n                                <CashFundCard\n                                  data={card}\n                                  key={\"cashFund\" + index}\n                                  className=\"mt-2\"\n                                  addButtonClickHandler={() => this.setCashFundCategoryAndOpenModal(card)}\n                                />\n                              )\n                            } else {\n                              return (\n                                <AddedCard\n                                  className=\"card-list-item\"\n                                  categoryTitle={product.recommendations.length ? product.category.isSubProductTypes ? product.category.parentCategory.name + ' (' + product.category.name + ')' : product.recommendations[0].category.categoryName : null}\n                                  data={card} key={\"addedCard\" + index}\n                                  multipleCategories={card.registryCategories.length > 1 ? card.registryCategories.find((cat, index) => Number(cat.id) === Number(product.category.id) && index != 0) : null}\n                                  toggleMustHave={(ev) => this.toggleMustHaveProduct(ev, card)}\n                                  removeProductFromCartHandler={() => removeProductFromCartHandler(card, this.props.stateRegistryInfo.id, this.props.dispatch)}\n                                />\n                              )\n                            }\n                          })}\n                          {product.recommendations.length > 0 ?\n                            <ViewRecommend\n                              title={product.category.isSubProductTypes ? product.category.parentCategory.name + ' (' + product.category.name + ')' : product.recommendations[0].category.categoryName}\n                              stepTwoForTour={i === 0 ? \"build-step-two\" : product.recommendations[0].category.id + '-' + i}\n                              category={product.recommendations[0].category}\n                              blogs={product.blogs}\n                              products={product.recommendations}/>\n                            :\n                            this.isRecommendationLoaderActive ?\n                              // TODO: Change loading\n                              <div className=\"mt-5 mb-5\">\n                                <SkeletonRecommendationLoader\n                                  title={product.category?.isSubProductTypes ? product.category?.parentCategory.name + ' (' + product.category?.name + ')' : product.category.categoryName}/>\n                              </div>\n                              : null}\n                        </InView>\n                      ))}\n                      {hasCashFund ?\n                        <div className=\"my-2\">\n                          <Button\n                            variant=\"secondary\"\n                            className=\" w-100 py-1 text-body font-medium\"\n                            onClick={this.openCashFundModal}\n                          >Add my own</Button>\n                        </div>\n                        : null}\n                    </div>\n                  )\n                })}\n              </div>\n            </div>\n          </div>\n        </div>\n        {this.state.showCashFundModal ?\n          <AddCashFundModal\n            show={this.state.showCashFundModal}\n            closeModal={this.closeCashFundModal}\n            categoryData={this.state.cashFundProduct}\n          />\n          : null}\n\n        {this.state.isTourOpen ?\n          <Tour\n            highlightedMaskClassName='tour-bg'\n            steps={this.state.steps}\n            isOpen={this.state.isTourOpen}\n            CustomHelper={TourCard}\n            closeWithMask={false}\n            // getCurrentStep={curr => {this.tourScrollOffset = curr === 0 ? '-250' : 123}}\n            // scrollOffset={this.tourScrollOffset}\n            // rounded='5'\n            disableInteraction={true}\n            onRequestClose={this.closeTour}/>\n          : null}\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    stateProducts: state.myRegistry.products,\n    stateAddedProducts: state.myRegistry.addedProducts,\n    stateFilterApplied: state.myRegistry.filterApplied,\n    stateActiveCategory: state.myRegistry.activeCategory,\n    stateRecommendedProducts: state.myRegistry.recommendedProducts,\n    stateCheckList: state.myRegistry.checkList,\n    stateRegistryInfo: state.registry.info,\n    stateLoader: state.registry.loader,\n    stateSeo: state.registry.seo,\n    stateBlogs: state.myRegistry.blogs,\n    stateAllCheckList: state.myRegistry.allCheckList,\n  }\n}\n\n\nexport default connect(\n  mapStateToProps\n)(Everything);\n","import React from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\nimport route from \"utils/routes\";\nimport Everything from \"../Everything/Everything\";\n\nclass MainContent extends React.Component {\n    render() {\n        return (\n            <Switch>\n                <Route exact path={route.MY_REGISTRY.HOME} component={Everything} />\n            </Switch>\n        )\n    }\n}\n\nexport default MainContent;","import React from \"react\";\nimport MainContent from './containers/MainContent/MainContent';\n\n\nconst MyRegistry = () => {\n    return (\n        <>\n            <MainContent />\n        </>\n    )\n}\n\nexport default MyRegistry;\n","import React from \"react\";\nimport \"./UploadImageCard.scss\";\n\nconst UploadImageCard = (props) => {\n  return (\n    <div className=\"upload-image-card d-flex align-items-center px-5 py-3\" onClick={props.onClick}>\n      <div className=\"export-image-icon mr-5\"><i className=\"icon-export\" /></div>\n      <div>\n        <h4>Upload Image</h4>\n        <p className=\"text-sm\">Upload your own image, recommended size 1600px x 250px</p>\n      </div>\n    </div>\n  );\n}\n\nexport default UploadImageCard;","import React from \"react\";\nimport \"./DefaultImage.scss\";\n\nconst DefaultImage = (props) => {\n  return (\n    <div className=\"default-image-card\" data-selected={props.selected} onClick={props.onClick}>\n      <img src={props.src} alt=\"Default\"/>\n      {props.selected ? <i className=\"icon-check selected-image p-1\"/> : null}\n    </div>\n  )\n}\n\nexport default DefaultImage;","import React, {useEffect, useState, createRef} from \"react\";\nimport \"./CoverImagePicker.scss\";\nimport Modal from \"../../../commons/components/modal-component/ModalComponent\";\nimport {useSelector, useDispatch} from \"react-redux\";\nimport CropImage from \"./crop-image/CropImage\";\nimport Button from \"../../../commons/components/button-component/ButtonComponent\";\nimport UploadImageCard from \"./upload-image-card/UploadImageCard\";\nimport {graphQL, graphQLMultipart} from \"api/axios\";\nimport {GET_REGISTRY_IMAGES} from \"api/queries\";\nimport {MEDIA_URL_PREFIX} from \"../../../../utils/constants\";\nimport DefaultImage from \"./default-image/DefaultImage\";\nimport {UPDATE_REGISTRY} from \"../../../../api/mutations\";\nimport {getTodoList, updateRegistryDetail} from \"../../../../utils/commonFunction\";\nimport {toast} from \"react-toastify\";\nimport {setLoader} from \"../../../registry/RegistryActions\";\n\nconst CoverImagePicker = (props) => {\n\n  const MAX_IMAGE_SIZE = 5000000; // 5MB\n  const ACCEPTED_IMAGE_TYPE = [\n    'image/jpg',\n    'image/jpeg',\n    'image/png'\n  ]\n  const dispatch = useDispatch();\n  const registryInfo = useSelector(state => state.registry.info);\n  const fileRef = createRef();\n  const [croppedImage, setCroppedImage] = useState(null);\n  const [uploadImage, setUploadImage] = useState(false);\n  const [defaultImage, setDefaultImage] = useState([]);\n  const [customImage, setCustomImage] = useState(null);\n  let modalBody = null;\n  let modalTitle = null;\n  let modalTitleContent = null;\n  let modalFooter = null;\n  let defaultImageApiCalled = false;\n\n  // Fetching default images\n  const getDefaultCoverImages = () => {\n    const data = {\n      query: GET_REGISTRY_IMAGES,\n      variables: {\n        registryId: registryInfo.id\n      }\n    }\n    if (!defaultImageApiCalled) {\n      defaultImageApiCalled = true\n      dispatch(setLoader(true))\n      graphQL(data).then(res => {\n        try {\n          if (res.data.data.registryImages) {\n            // Use below line to get only default images\n            // let defaultImages = res.data.data.registryImages.filter(image => image.isDefault);\n            let defaultImages = res.data.data.registryImages;\n            defaultImages = defaultImages.map(image => {\n              image.image = (MEDIA_URL_PREFIX.LOCAL_MEDIA_URL ? MEDIA_URL_PREFIX.LOCAL_MEDIA_URL : \"\") + image.image\n              return image;\n            })\n            props.setRegistryDefaultImages(defaultImages)\n            setDefaultImage(defaultImages);\n          }\n          defaultImageApiCalled = false\n        } catch (e) {\n          defaultImageApiCalled = false\n          console.log(e)\n        }\n      }).catch(err => {\n        defaultImageApiCalled = false\n        console.error(err);\n      }).finally(() => {\n        dispatch(setLoader(false))\n      })\n    }\n  }\n\n  useEffect(() => {\n    if (props.parentRegistryDefaultImages != null && defaultImage.length === 0){\n      setDefaultImage(props.parentRegistryDefaultImages)\n    } else if (defaultImage.length === 0 && !defaultImageApiCalled) {\n      getDefaultCoverImages();\n    }\n  });\n\n  // Setting default images selected by user\n  const selectDefaultImage = (imageId) => {\n    if (!registryInfo.id) {\n      console.log(\"No registry found\");\n      return;\n    }\n\n    let data = {\n      query: UPDATE_REGISTRY,\n      operationName: \"updateRegistryDetail\",\n      variables: {\n        \"registryId\": registryInfo.id,\n        \"input\": {\n          image: imageId\n        }\n      }\n    }\n\n    graphQL(data).then(res => {\n      try {\n        if (res.data.data.updateRegistry.registry) {\n          toast.success(\"Successfully changed cover image\");\n          updateRegistryDetail(dispatch);\n          closeModalHandler()\n        } else {\n          console.log(res.data.data.updateRegistry.errors);\n          toast.error(\"Some error occurred\");\n          console.error(\"Some error occurred\");\n        }\n      } catch (e) {\n        toast.error(\"Some error occurred\");\n        console.error(e);\n      }\n      getTodoList(registryInfo.id, dispatch)\n    }).catch(err => {\n      toast.error(\"Some error occurred\");\n      console.error(err.message)\n    })\n  }\n\n  const openFileSelector = () => {\n    if (fileRef) {\n      fileRef.current.click();\n    }\n  }\n\n  const fileChangeHandler = (e) => {\n    e.persist();\n    if (fileRef.current && fileRef.current.files.length > 0) {\n      const file = fileRef.current.files[0]\n\n      // Verifying file is image\n      if (ACCEPTED_IMAGE_TYPE.includes(file.type)) {\n        if (file.size <= MAX_IMAGE_SIZE) {\n          let reader = new FileReader();\n\n          reader.onload = function (e) {\n            setCustomImage(e.target.result);\n            setUploadImage(true);\n          }\n\n          reader.readAsDataURL(file); // Converting to base64 string\n        } else {\n          toast.error(\"File size exceeds the limit\");\n        }\n      } else {\n        toast.error(\"Please select valid image.\");\n      }\n    }\n  }\n\n  const blobToFile = (blob) => {\n    return new File([blob], blob.name, {\n      type: blob.type\n    })\n  }\n\n  // Setting Custom Image\n  const saveCustomImage = () => {\n    if (!croppedImage) {\n      toast.error(\"Please crop the image\");\n      return;\n    }\n\n    if (!registryInfo.id) {\n      console.log(\"No registry found\");\n      return;\n    }\n\n    let formData = new FormData()\n    let data = {\n      query: UPDATE_REGISTRY,\n      operationName: \"updateRegistryDetail\",\n      variables: {\n        \"registryId\": registryInfo.id,\n        \"input\": {\n          registryImage: null\n        }\n      }\n    }\n\n    formData.append(\"operations\", JSON.stringify(data))\n    let map = {\n      registryImage: [\"variables.input.registryImage\"]\n    }\n    formData.append(\"map\", JSON.stringify(map))\n    formData.append(\"registryImage\", blobToFile(croppedImage))\n\n    graphQLMultipart(formData).then(res => {\n      try {\n        if (res.data.data.updateRegistry.registry) {\n          toast.success(\"Successfully changed cover image\");\n          updateRegistryDetail(dispatch);\n          closeModalHandler()\n          setUploadImage(false);\n          getTodoList(registryInfo.id, dispatch)\n        } else {\n          toast.error(\"Some error occurred\");\n          console.log(res.data.data.updateRegistry.errors);\n          console.error(\"Some error occurred\");\n        }\n      } catch (e) {\n        toast.error(\"Some error occurred\");\n        console.error(e);\n      }\n    }).catch(err => {\n      toast.error(\"Some error occurred\");\n      console.error(err.message)\n    })\n\n  }\n\n  const closeCropImageModalHandler = () => {\n    props.closeCoverImagePicker();\n    setUploadImage(false);\n  }\n\n  //modal close method\n  const closeModalHandler = () => {\n    getDefaultCoverImages();\n    props.closeCoverImagePicker();\n    setCroppedImage(null)\n    setCustomImage(null)\n    setUploadImage(false);\n  }\n  if (uploadImage === false) {\n    modalBody = (\n      <div className=\"row cover-image-picker\">\n        <div className=\"col\">\n          <div className=\"row\">\n            <div className=\"col\">\n              <UploadImageCard onClick={openFileSelector}/>\n              <input\n                type=\"file\"\n                className=\"d-none\"\n                ref={fileRef}\n                accept={ACCEPTED_IMAGE_TYPE.join(\",\")}\n                onChange={(e) => fileChangeHandler(e)}/>\n            </div>\n          </div>\n          <div className=\"row\">\n            {defaultImage.map(image => (\n              <div className=\"col-sm-12 col-md-6 mt-5\" key={\"Image-Id-\" + image.id}>\n                <DefaultImage\n                  src={image.image}\n                  selected={image.id === registryInfo.image.id}\n                  onClick={() => selectDefaultImage(image.id)}\n                />\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    )\n    modalTitle = \"Upload or Select an image\";\n  } else {\n    modalBody = (\n      <CropImage\n        src={customImage}\n        setCroppedImage={setCroppedImage}\n      />\n    )\n    modalTitle = \"Crop Image\";\n    modalTitleContent = (\n      <p className=\"text-sm mt-1\">Drag the box to crop the image</p>\n    )\n    modalFooter = (\n      <>\n        <Button variant='secondary' className=\"px-3 py-1 font-medium text-body\"\n                onClick={closeCropImageModalHandler}>Cancel</Button>\n        <Button variant='primary' className=\"px-3 py-1 font-medium text-body\" onClick={saveCustomImage}>Save &\n          Close</Button>\n      </>\n    )\n  }\n\n  return (\n    <>\n      <Modal\n        show={props.show}\n        closeModal={closeModalHandler}\n        updateModal={uploadImage}\n        title={modalTitle}\n        titleContent={modalTitleContent}\n        footer={modalFooter}\n        size=\"lg\"\n      >\n        {modalBody}\n      </Modal>\n    </>\n  )\n}\n\nexport default CoverImagePicker;","import React, { useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport Modal from \"../../../commons/components/modal-component/ModalComponent\";\nimport \"./EditViewRegistryDetail.scss\";\nimport Button from \"../../../commons/components/button-component/ButtonComponent\";\nimport { UPDATE_REGISTRY } from \"../../../../api/mutations\";\nimport { graphQL } from \"../../../../api/axios\";\nimport {getTodoList, updateRegistryDetail} from \"utils/commonFunction\";\nimport { toast } from 'react-toastify';\n\nconst EditViewRegistryDetail = (props) => {\n\n  const MAX_LENGTH_GREETINGS = 280;\n\n  const dispatch = useDispatch();\n  const [registryName, changeRegistryName] = useState(props.info.displayName)\n  const [greeting, changeGreeting] = useState(props.info.greeting)\n\n  const greetingChangeHandler = (ev) => {\n    if (ev.target.value.length <= MAX_LENGTH_GREETINGS) {\n      changeGreeting(ev.target.value);\n    }\n  }\n\n  // SAVE & CLOSE BUTTON CLICK HANDLER\n  const saveRegistryDetail = () => {\n\n    if (registryName.length <= 0) {\n      toast.error(\"Registry Name cannot be empty\");\n      return;\n    }\n\n    let data = {\n      query: UPDATE_REGISTRY,\n      operationName: \"updateRegistryDetail\",\n      variables: {\n        \"registryId\": Number(props.info.id),\n        \"input\": {\n          displayName: registryName,\n          name: props.info.name,\n          greeting: greeting,\n          dueDate: props.info.dueDate,\n          image: props.info.image ? props.info.image.id : null\n        }\n      }\n    }\n\n    graphQL(data).then(res => {\n      try {\n        if (res.data.data.updateRegistry.registry) {\n          toast.success(\"Successfully updated registry information\");\n          updateRegistryDetail(dispatch);\n          getTodoList(props.info.id, dispatch)\n          props.closeEditRegistryDetail();\n        } else {\n          console.log(res.data.data.updateRegistry.errors);\n          toast.error(\"Some error occurred\");\n        }\n      } catch (e) {\n        console.error(e);\n        toast.error(\"Some error occurred\");\n      }\n    }).catch(err => {\n      console.error(err.message)\n    })\n  }\n\n  let modalTitle = \"Edit Registry Details\";\n  let modalBody = (\n    <>\n      <div className=\"row\">\n        <div className=\"col edit-view-detail\">\n          <span className=\"text-sm font-medium edit-view-detail-required\">Registry Name</span>\n          <textarea\n            className=\"w-100 mt-1 h1 p-2 resize-none\"\n            value={registryName}\n            onChange={(ev) => changeRegistryName(ev.target.value)}\n            rows=\"2\" />\n        </div>\n      </div>\n      <div className=\"row mt-3\">\n        <div className=\"col edit-view-detail\">\n          <span className=\"text-sm font-medium\">Add Greeting</span>\n          <span className=\"float-right text-sm edit-view-detail-max-char\">Max. {MAX_LENGTH_GREETINGS} chars</span>\n          <textarea\n            className=\"w-100 mt-1 text-body px-2 py-1\"\n            placeholder=\"Write a greeting for your guests\"\n            maxLength={MAX_LENGTH_GREETINGS}\n            value={greeting}\n            onChange={(ev) => greetingChangeHandler(ev)}\n            rows=\"2\" />\n        </div>\n      </div>\n    </>\n  );\n  let modalFooter = (\n    <>\n      <Button variant=\"secondary\" className=\"py-1 px-3 mr-3 font-medium text-body\"\n        onClick={props.closeEditRegistryDetail}>Cancel</Button>\n      <Button variant=\"primary\" className=\"py-1 px-3 font-medium text-body\" onClick={saveRegistryDetail}>Save & Close</Button>\n    </>\n  );\n\n  return (\n    <Modal\n      show={props.show}\n      closeModal={props.closeEditRegistryDetail}\n      title={modalTitle}\n      footer={modalFooter}\n      size=\"md\"\n    >\n      {modalBody}\n    </Modal>\n  )\n}\n\nexport default EditViewRegistryDetail;","import React from \"react\";\nimport \"./RegistryImageHeaderSkeleton.scss\";\n\nconst RegistryImageHeaderSkeleton = ({headerImage, registryName}) => {\n  return (\n    <div className=\"skeleton-header-image-container mx-auto position-relative\">\n      <img className=\"skeleton-header-image\" src={headerImage} id=\"skeleton-registry-image\" crossOrigin=\"anonymous\"/>\n      <div className=\"mx-3 mb-3 text-center skeleton-header-registry-name py-4\">\n            <h1>{registryName}</h1>\n          </div>\n    </div>\n  )\n}\n\nexport default RegistryImageHeaderSkeleton;","import React from \"react\";\nimport \"./GiftCardSkeleton.scss\";\nimport {ROUTES} from \"../../../../../utils/cdn-assets-links\";\n\nconst GiftCardSkeleton = () => {\n  return (\n    <div className=\"skeleton-empty-added-card py-2\">\n        <div className=\"row\">\n          <div className=\"col-12 col-md-2\">\n            <div className=\"pl-0 pl-md-2\">\n              <div className=\"skeleton-empty-added-card-no-product-image d-flex align-items-center justify-content-center\">\n              <img src={ROUTES.gift_icon_s3_bucket} crossOrigin=\"anonymous\"/>\n              </div>\n            </div>\n          </div>\n          <div className=\"col-12 col-md-6\">\n            <div className=\"text-sm skeleton-empty-added-card-category skeleton-empty-rectangle my-3 my-md-0\"/>\n            <div className=\"skeleton-empty-added-card-title skeleton-empty-rectangle mt-1\"/>\n            <div className=\"skeleton-empty-added-card-price skeleton-empty-rectangle mt-1\"/>\n          </div>\n          <div className=\"col-12 col-md-4 skeleton-empty-added-card-buttons\">\n            <div className=\"d-flex align-items-center justify-content-end mr-md-1 mr-3\">\n              <div className=\"skeleton-empty-added-card-must-have mr-4\"/>\n              <img className=\"skeleton-empty-added-card-rearrange mr-4\" src={ROUTES.icon_rearrange_s3_bucket} crossOrigin=\"anonymous\"/>\n              <div className=\"skeleton-empty-added-card-more skeleton-empty-rectangle mr-4\"/>\n            </div>\n          </div>\n        </div>\n      </div>\n  )\n}\n\nexport default GiftCardSkeleton;","import React from \"react\";\nimport \"./ShareRegistrySkeleton.scss\";\nimport RegistryImageHeaderSkeleton from \"../registry-image-header-skeleton/RegistryImageHeaderSkeleton\";\nimport GiftCardSkeleton from \"../gift-card-skeleton/GiftCardSkeleton\";\nimport {ROUTES} from \"../../../../../utils/cdn-assets-links\";\n\nconst ShareRegistrySkeleton = ({registryInfo, elementId, height, width}) => {\n  const nubmerOfGifts = 6;\n\n  let gifts = []\n  for (let i = 0; i < nubmerOfGifts; i++) {\n    gifts.push(\n      <GiftCardSkeleton/>\n    )\n  }\n  return (\n    <div\n      id={elementId}\n      className=\"share-registry-skeleton-container px-6 pt-6\"\n      style={{\n        height: height,\n        width: width\n      }}\n    >\n      <div className=\"share-registry-skeleton-main-content\">\n        <div className=\"w-100 share-registry-ma-logo-section py-3\">\n          <img className=\"d-block mx-auto\" id=\"skeleton-ma-logo\" src=\"https://baby-registry-dev.s3.us-east-2.amazonaws.com/media/frontend_assets/MA-Logo1.5x.svg\" alt=\"logo\" crossOrigin=\"anonymous\"/>\n        </div>\n        <RegistryImageHeaderSkeleton headerImage={registryInfo.image.image} registryName={registryInfo.displayName}/>\n        <div className=\"container\">\n          <div className=\"row mt-5 justify-content-center\">\n            <div className=\"col-9\">\n              {gifts.map(gift => (\n                <div className=\"row\">\n                  <div className=\"col\">\n                    {gift}\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default ShareRegistrySkeleton;","import React, {useState, createRef} from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport \"./ShareRegistry.scss\";\nimport Modal from \"../../../commons/components/modal-component/ModalComponent\";\nimport {CHECK_URL_SLUG_AVAILABILITY, UPDATE_REGISTRY, UPDATE_REGISTRY_URL} from \"../../../../api/mutations\";\nimport {graphQL, pinterestImageUpload} from \"../../../../api/axios\";\nimport {dataURItoBlob, getTodoList, updateRegistryDetail} from \"../../../../utils/commonFunction\";\nimport {setLoader, updateRegistryInfo} from \"../../../registry/RegistryActions\";\nimport Button from \"../../../commons/components/button-component/ButtonComponent\";\nimport {toast} from \"react-toastify\";\nimport routes from \"../../../../utils/routes\";\nimport {ROUTES as CDN_ROUTES} from \"utils/cdn-assets-links\";\nimport {SETTINGS_LINKS, SHARE_REGISTRY_SKELETON_SIZE, TIME_TO_ENABLE_COPY_BTN} from \"../../../../utils/constants\";\nimport ShareRegistrySkeleton from \"../../../commons/components/skeleton/share-registry-skeleton/ShareRegistrySkeleton\";\nimport html2canvas from \"html2canvas\";\n\nconst ShareRegistry = (props) => {\n\n  const siteHostName = window.location.host + routes.REGISTRY.HOME;\n  // const siteHostName = \"monicaandandy.com\";\n  const dispatch = useDispatch()\n  const [registryInfoUrl, setRegistryInfoUrl] = useState(props.registryInfo.urlSlug);\n  const [registryVisibility, setRegistryVisibility] = useState(props.registryInfo.isPublic)\n  const [registryUrl, setRegistryUrl] = useState(registryInfoUrl)\n  const [registryError, setRegistryError] = useState(\"\")\n  const [registryUrlAvailable, setRegistryUrlAvailable] = useState({})\n  const inputContainerRef = createRef();\n  const [isPublicError, setIsPublicError] = useState(\"\")\n  const [isImagesLoaded, setImagesLoaded] = useState(false)\n\n  let stateProducts = useSelector(state => state.myRegistry.products)\n\n  let sharingText = \"Check out my Monica and Andy baby registry - \"\n  let sharingUrl = window.location.origin + routes.REGISTRY.HOME + \"/\" + registryUrl\n\n  let facebookShareLink = `https://www.facebook.com/sharer/sharer.php?u=${encodeURI(sharingUrl)}&quote=${sharingText}`\n  let twitterShareLink = `https://twitter.com/share?url=${encodeURI(sharingUrl)}&text=${sharingText}`\n  let pinterestShareLink = `https://pinterest.com/pin/create/button/?url=${encodeURI(sharingUrl)}&description=${encodeURI(sharingText)}`\n\n  const closeModal = () => {\n    toggleVisibilityOfShareSkeleton(false)\n    setRegistryUrl(props.registryInfo.urlSlug)\n    props.closeShareRegistry();\n  }\n\n  const changeRegistryVisibility = (value) => {\n    if (props.hasNoProducts) {\n      toast.error(\"You cannot publish empty registry.\");\n      return\n    }\n\n    if (value === registryVisibility) {\n      return;\n    }\n\n    if (!props.registryInfo.id) {\n      console.log(\"No registry found!\");\n      return;\n    }\n\n    if (((props.registryInfo.isCashFundItemAdded || props.registryInfo.isCashInLieuItemAdded || props.registryInfo.isGroupGiftItemAdded) && value && props.registryInfo.user.bankAccounts.length <= 0)) {\n      // toast.error(\"You cannot make your registry public since it contains products where we are collecting cash on your behalf and bank details are not added yet.\")\n      return\n    }\n\n    setRegistryVisibility(value);\n\n    let data = {\n      query: UPDATE_REGISTRY,\n      operationName: \"updateRegistryDetail\",\n      variables: {\n        \"registryId\": props.registryInfo.id,\n        \"input\": {\n          isPublic: value\n        }\n      }\n    }\n\n    dispatch(setLoader(true))\n    graphQL(data).then(res => {\n      try {\n        if (res.data.data.updateRegistry.registry) {\n          let newRegistry = props.registryInfo\n          newRegistry.isPublic = value\n          dispatch(updateRegistryInfo(newRegistry))\n          getTodoList(props.registryInfo.id, dispatch)\n        } else {\n          console.log(res.data.data.updateRegistry.errors);\n          setRegistryVisibility(!value);\n          toast.error(\"Some error occurred\");\n        }\n      } catch (e) {\n        setRegistryVisibility(!value);\n        toast.error(\"Some error occurred\");\n        console.error(e);\n      }\n    }).catch(err => {\n      setRegistryVisibility(!value);\n      toast.error(\"Some error occurred\");\n      console.error(err.message)\n    }).finally(() => {\n      dispatch(setLoader(false))\n    })\n  }\n\n  const registryUrlChangeHandler = (ev) => {\n    if (registryError) {\n      setRegistryError(\"\")\n    }\n    if (registryUrlAvailable.message) {\n      setRegistryUrlAvailable({})\n    }\n\n    setRegistryUrl(ev.target.value);\n  }\n\n  const checkUrlAvailability = () => {\n    setRegistryError(\"\")\n    if (registryUrl === props.registryInfo.urlSlug) {\n      return\n    }\n\n    if (registryUrl.length <= 0) {\n      toast.error(\"Registry URL cannot be empty!\");\n      return;\n    }\n\n    let data = {\n      query: UPDATE_REGISTRY_URL,\n      operationName: \"updateRegistryUrl\",\n      variables: {\n        \"registryId\": props.registryInfo.id,\n        \"urlSlug\": registryUrl\n      }\n    }\n\n    dispatch(setLoader(true))\n    graphQL(data).then(res => {\n      try {\n        if (res.data.data.checkUpdateRegistryUrlSlug.message) {\n          let newRegistry = props.registryInfo\n          newRegistry.urlSlug = registryUrl\n          setRegistryInfoUrl(registryUrl);\n          setRegistryError(\"\")\n          dispatch(updateRegistryInfo(newRegistry))\n        } else {\n          setRegistryError(`${registryUrl} is not available. Please try something else.`)\n          console.log(res.data.data.checkUpdateRegistryUrlSlug.errors);\n          toast.error(\"Some error occurred\");\n        }\n        getTodoList(props.registryInfo.id, dispatch)\n      } catch (e) {\n        toast.error(\"Some error occurred\");\n        console.error(e);\n      }\n    }).catch(err => {\n      if (err.response.status === 400) {\n        setRegistryError(`${registryUrl} is not available. Please try something else.`)\n      } else {\n        toast.error(\"Some error occurred\");\n      }\n      console.error(err.response.data)\n    }).finally(() => {\n      dispatch(setLoader(false))\n    })\n  }\n\n  const copyRegistryClickHandler = (ev) => {\n    if (ev.target) {\n      ev.target.setAttribute(\"disabled\", \"true\")\n    }\n    setTimeout(() => {\n      let el = document.querySelector(\".copy-btn-registry\");\n      if (el) {\n        el.removeAttribute(\"disabled\")\n      }\n    }, TIME_TO_ENABLE_COPY_BTN)\n    const el = document.createElement('textarea');\n    el.value = `${siteHostName}/${registryUrl}`;\n    document.body.appendChild(el);\n    el.select();\n    document.execCommand('copy');\n    document.body.removeChild(el);\n    toast.success(\"Copied to clipboard\");\n  }\n\n  let xDown = null\n  let yDown = null\n\n  const handleTouchStart = (evt) => {\n    evt.persist()\n    let touches = Array.from(evt.touches, touch => touch);\n    xDown = touches[0].clientX;\n    yDown = touches[0].clientY;\n  };\n\n  const handleTouchMove = (evt) => {\n    evt.persist()\n    if (!xDown || !yDown) {\n      return;\n    }\n    let touches = Array.from(evt.touches, touch => touch);\n    let xUp = touches[0].clientX;\n    let yUp = touches[0].clientY;\n\n    let xDiff = xDown - xUp;\n    let yDiff = yDown - yUp;\n\n    if (Math.abs(xDiff) > Math.abs(yDiff)) {/*most significant*/\n      if (xDiff > 0) {\n        /* left swipe */\n        changeRegistryVisibility(false)\n      } else {\n        /* right swipe */\n        changeRegistryVisibility(true)\n      }\n    } else {\n      if (yDiff > 0) {\n        /* up swipe */\n      } else {\n        /* down swipe */\n      }\n    }\n    /* reset values */\n    xDown = null;\n    yDown = null;\n  };\n\n\n  const saveButtonClickHandler = () => {\n    if (registryUrlAvailable.message) {\n      setRegistryUrlAvailable({})\n    }\n    let data = {\n      query: UPDATE_REGISTRY,\n      operationName: \"updateRegistryDetail\",\n      variables: {\n        \"registryId\": props.registryInfo.id,\n        \"input\": {}\n      }\n    }\n\n    if (props.registryInfo.isPublic !== registryVisibility) {\n      data.variables.input['isPublic'] = registryVisibility\n    }\n\n    if (registryInfoUrl !== registryUrl) {\n      data.variables.input['urlSlug'] = registryUrl\n    }\n\n    dispatch(setLoader(true))\n    graphQL(data).then(res => {\n      try {\n        if (res.data.data.updateRegistry.registry) {\n          setRegistryInfoUrl(registryUrl)\n          let newRegistry = props.registryInfo\n          newRegistry.isPublic = registryVisibility\n          newRegistry.urlSlug = registryUrl\n          dispatch(updateRegistryInfo(newRegistry))\n          toast.success(\"Registry info changed successfully.\")\n          getTodoList(props.registryInfo.id, dispatch)\n          closeModal()\n        }\n      } catch (e) {\n        toast.error(\"Some error occurred\");\n        console.error(e);\n      }\n    }).catch(err => {\n\n      if (props.registryInfo.isPublic !== registryVisibility) {\n        setRegistryVisibility(!registryVisibility);\n      }\n\n      if (err.response && err.response.data && err.response.data.errors) {\n        for (let error of err.response.data.errors) {\n          if (error.errors.is_public) {\n            setIsPublicError(error.errors.is_public[0])\n          } else if (error.errors.url_slug) {\n            setRegistryError(`${registryUrl} is not available. Please try something else.`)\n          }\n        }\n      } else {\n        toast.error(\"Some error occurred\");\n      }\n      console.error({...err.response})\n    }).finally(() => {\n      dispatch(setLoader(false))\n    })\n  }\n\n\n  let canChangeRegistryVisibility = true\n\n  if (((props.registryInfo.isCashFundItemAdded || props.registryInfo.isCashInLieuItemAdded || props.registryInfo.isGroupGiftItemAdded) && props.registryInfo.user.bankAccounts.length <= 0)) {\n    canChangeRegistryVisibility = false\n  }\n\n  const pinterestShareClickHandler = (ev) => {\n    ev.preventDefault();\n    dispatch(setLoader(true))\n    html2canvas(document.getElementById('screenshot-section'), {\n      allowTaint: true,\n      useCORS: true,\n      windowWidth: SHARE_REGISTRY_SKELETON_SIZE.width,\n      windowHeight: SHARE_REGISTRY_SKELETON_SIZE.height,\n      width: SHARE_REGISTRY_SKELETON_SIZE.width,\n      height: SHARE_REGISTRY_SKELETON_SIZE.height\n    }).then((canvas) => {\n      if (!document.getElementById('skeleton-registry-image').complete && !document.getElementById('skeleton-ma-logo').complete) {\n        toast.error(\"Error occurred while loading registry image. Please reload the page and try again.\")\n        dispatch(setLoader(false))\n        return\n      }\n      let downloadLink = document.createElement('a');\n      downloadLink.setAttribute('download', 'PinterestRegistryImage.png');\n      canvas.toBlob(function (blob) {\n\n        let reader = new FileReader();\n\n        reader.onload = (e) => {\n          let base64Image = e.target.result\n          let fd = new FormData()\n\n          fd.append(\"image\", dataURItoBlob(base64Image, \"image/png\", `PinterestShareImage-${new Date().valueOf()}.png`))\n\n          pinterestImageUpload(fd).then(res => {\n            if (res?.data.image_url) {\n              let pinterestUrl = pinterestShareLink + `&media=${res.data.image_url}`\n              window.open(pinterestUrl, \"_blank\")\n            }\n          }).catch(err => {\n            console.error({...err.response})\n          }).finally(() => {\n            dispatch(setLoader(false))\n          })\n        }\n        reader.readAsDataURL(blob); // Converting to base64 string\n\n        // To save the image in local machine\n        // let url = URL.createObjectURL(blob);\n        // downloadLink.setAttribute('href', url);\n        // downloadLink.click();\n\n      });\n    })\n  }\n\n  const modalTitle = \"Share Registry\";\n\n  const modalFooter = (\n    <Button\n      variant=\"primary\"\n      onClick={closeModal}\n      className=\"px-6 py-1 font-medium\"\n    >Done</Button>\n  )\n\n  const modalBody = (\n    <>\n      <div className=\"row\">\n        <div className=\"col d-flex flex-column\">\n          <span className=\"section-title-share-registry text-body font-medium mb-1\">Status</span>\n          <div\n            className={[\"visibility-status-btn d-flex\", !registryVisibility ? \"private-registry-status\" : \"\", !canChangeRegistryVisibility ? \"disabled-registry-status\" : \"\"].join(\" \")}\n            onClick={canChangeRegistryVisibility ? () => changeRegistryVisibility(!registryVisibility) : () => {\n            }}\n            onTouchStart={(ev) => handleTouchStart(ev)}\n            onTouchMove={(ev) => handleTouchMove(ev)}\n          >\n            <div className=\"registry-status-dot\"/>\n            <span\n              className=\"registry-status-text font-medium text-body\">{registryVisibility ? \"Public\" : \"Private\"}</span>\n          </div>\n\n          <p\n            className=\"text-sm mt-1\">{registryVisibility ? \"Your registry is available to guests.\" : \"Your registry is hidden from guests.\"}</p>\n        </div>\n      </div>\n      {!canChangeRegistryVisibility || isPublicError ?\n        <div className=\"row mt-1\">\n          <div className=\"col\">\n            <div className=\"registry-status-bank-detail-section p-3\">\n              <p\n                className=\"text-sm\">{isPublicError ? isPublicError : 'You cannot make your registry public since it contains products where we are collecting cash on your behalf. We need your bank details for that.'}</p>\n              <a className=\"font-medium registry-status-bank-link text-sm\" href={SETTINGS_LINKS.BANK_ACCOUNT}>Add bank\n                details</a>\n            </div>\n          </div>\n        </div>\n        : null}\n\n      <div className=\"row mt-6 align-items-end\">\n        <div className=\"col d-flex flex-column\">\n          <span className=\"section-title-share-registry text-sm font-medium\">Link</span>\n          <div className=\"mt-1 d-flex align-items-baseline\">\n            <div className=\"d-inline-block w-100\">\n              <div\n                className={[\"registry-url-section d-flex text-body\", registryError ? \"error-input-container\" : \"\"].join(\" \")}\n                ref={inputContainerRef}>\n                <input\n                  className=\"disabled-input-share-registry py-1 px-2\"\n                  value={siteHostName + \"/\"}\n                  readOnly/>\n                <input\n                  className=\"registry-url-input py-1 px-2 w-100\"\n                  value={registryUrl}\n                  onFocus={() => inputContainerRef.current.classList.add('focused-input-container')}\n                  onBlur={() => inputContainerRef.current.classList.remove('focused-input-container')}\n                  onChange={(ev) => registryUrlChangeHandler(ev)}\n                />\n              </div>\n              {registryUrlAvailable.message ?\n                registryUrlAvailable.available ?\n                  <span className=\"text-sm input-success-message\">{registryUrlAvailable.message}</span>\n                  :\n                  <span className=\"text-sm input-error-message\">{registryUrlAvailable.message}</span>\n                : null}\n              {registryError ?\n                <span className=\"text-sm input-error-message\">{registryError}</span>\n                : null}\n            </div>\n            {registryUrl !== registryInfoUrl ?\n              <Button variant=\"primary\" className=\"px-2 py-1 text-body font-medium ml-3\"\n                      onClick={checkUrlAvailability}>Check</Button>\n              :\n              <Button variant=\"primary\" className=\"px-2 py-1 text-body font-medium ml-3 copy-btn-registry\"\n                      onClick={(ev) => copyRegistryClickHandler(ev)}>Copy</Button>\n            }\n\n          </div>\n        </div>\n      </div>\n\n      <div className=\"row mt-6\">\n        <div className=\"col\">\n          <span className=\"text-sm font-medium section-title-share-registry\">Share on Social Media</span>\n          <div className=\"mt-2 d-flex\">\n            {registryVisibility ?\n              <>\n                {/*TODO: Add click handler*/}\n                <a href={facebookShareLink} target=\"_blank\" rel=\"noreferrer noopener\">\n                  <img className=\"mr-3 social-btn\"\n                       src={CDN_ROUTES.facebook}/>\n                </a>\n                <a href={pinterestShareLink} onClick={(ev) => pinterestShareClickHandler(ev)} target=\"_blank\"\n                   rel=\"noreferrer noopener\">\n                  <img className=\"mr-3 social-btn\"\n                       src={CDN_ROUTES.pinterest}/>\n                </a>\n                <a href={twitterShareLink} target=\"_blank\" rel=\"noreferrer noopener\">\n                  <img className=\"social-btn\"\n                       src={CDN_ROUTES.twitter}/>\n                </a>\n              </>\n              :\n              <>\n                <img className=\"mr-3 social-btn\"\n                     src={CDN_ROUTES.facebook_disabled}/>\n                <img className=\"mr-3 social-btn\"\n                     src={CDN_ROUTES.pinterest_disabled}/>\n                <img className=\"social-btn\"\n                     src={CDN_ROUTES.twitter_disabled}/>\n              </>\n            }\n          </div>\n        </div>\n      </div>\n    </>\n  );\n\n  const toggleVisibilityOfShareSkeleton = (show) => {\n    let el = document.getElementById('screenshot-section')\n    if (el) {\n      show ? el.classList.add('show-share-registry-skeleton') : el.classList.remove('show-share-registry-skeleton');\n    }\n  }\n  if (props.show) {\n    toggleVisibilityOfShareSkeleton(true)\n  }\n\n  return (\n    <Modal\n      show={props.show}\n      closeModal={closeModal}\n      title={modalTitle}\n      footer={modalFooter}\n      size=\"md\"\n    >\n      {modalBody}\n    </Modal>\n  )\n}\n\nexport default ShareRegistry;","import React from \"react\";\nimport \"./ViewRegistryHeader.scss\";\nimport Button from \"../../../commons/components/button-component/ButtonComponent\";\nimport MoreOption from \"../../../commons/components/more-option/MoreOption\";\nimport CoverImagePicker from \"../../components/cover-image-picker/CoverImagePicker\";\nimport {connect} from \"react-redux\";\nimport {toast} from 'react-toastify';\nimport EditViewRegistryDetail from \"../../components/edit-view-registry-detail/EditViewRegistryDetail\";\nimport {setguestViewRegistry} from \"modules/view-registry/ViewRegistryActions\";\nimport ShareRegistry from \"../../components/share-registry/ShareRegistry\";\nimport {setMetaInfoToDom, updateGuestViewRegistry} from 'utils/commonFunction';\nimport {withRouter} from \"react-router\";\nimport {InView} from \"react-intersection-observer\";\n\nclass ViewRegistryHeader extends React.Component {\n\n  state = {\n    showCoverImagePicker: false,\n    showEditRegistryDetail: false,\n    showShareRegistry: false,\n    registryDefaultImages: null\n  }\n\n  fixedViewRegistryHeader = React.createRef()\n\n  componentDidMount() {\n    let queryParams = new URLSearchParams(window.location.search)\n    if (queryParams.has('share')) {\n      this.setState({\n        showShareRegistry: true\n      })\n      queryParams.delete('share')\n      this.props.history.replace({\n        search: queryParams.toString(),\n      })\n    }\n    if (!this.props.guestViewRegistryState.urlSlug) {\n      updateGuestViewRegistry(this.props.stateRegistryInfo.urlSlug, this.props.dispatch)\n    }\n  }\n\n  closeCoverImagePicker = () => {\n    this.setState({showCoverImagePicker: false})\n  }\n\n  closeShareRegistry = () => {\n    this.setState({showShareRegistry: false})\n  }\n\n  closeEditRegistryDetail = () => {\n    this.setState({showEditRegistryDetail: false})\n  }\n\n  setRegistryDefaultImages = (images) => {\n    this.setState({\n      registryDefaultImages: [...images]\n    })\n  }\n\n  changeRegistryDetail = (ev) => {\n    ev.preventDefault();\n    this.setState({showEditRegistryDetail: true})\n  }\n\n  handleGuestView = (ev) => {\n    ev.preventDefault();\n    // toast.success(\"Viewing registry as guest\")\n    this.props.dispatch(setguestViewRegistry(true))\n  }\n\n  handleDisableViewGuest = () => {\n    this.props.dispatch(setguestViewRegistry(false))\n  }\n\n  COVER_PIC_OPTIONS = [\n    {\n      name: \"Replace Background\",\n      action: () => {\n        this.setState({showCoverImagePicker: true})\n      }\n    }\n  ]\n\n  shareHandler = () => {\n    // this.props.dispatch(setguestViewRegistry(false))\n    this.setState({showShareRegistry: true})\n  }\n\n\n  viewRegistryHeaderObserverChange = (inView, entry) => {\n\n    if (!inView && entry.boundingClientRect.top <= 0) {\n      if (this.fixedViewRegistryHeader.current) {\n        this.fixedViewRegistryHeader.current.classList.remove(\"d-none\")\n      }\n    } else {\n      if (this.fixedViewRegistryHeader.current) {\n        this.fixedViewRegistryHeader.current.classList.add(\"d-none\")\n      }\n    }\n  }\n\n\n  render() {\n    document.body.style.overflow = this.props.disableScroll ? \"hidden\" : \"auto\";\n    let registryNameRender = (\n      <>\n        <div className=\"d-flex align-items-center justify-content-between justify-content-md-start\">\n          <h2 className=\"view-registry-header-displayName\"\n              title={this.props.stateRegistryInfo.displayName ? this.props.stateRegistryInfo.displayName : \"\"}>{this.props.stateRegistryInfo.displayName ? this.props.stateRegistryInfo.displayName : \"\"}</h2>\n          {!this.props.stateGuestViewRegistry ?\n            <i className=\"icon-pencil ml-1 edit-name-icon p-1 p-md-0\" onClick={(ev) => this.changeRegistryDetail(ev)}/>\n            : null\n          }\n        </div>\n        <span\n          className=\"text-sm view-registry-header-greeting mr-6 mr-md-0\"\n          title={this.props.stateRegistryInfo.greeting}>{this.props.stateRegistryInfo.greeting}</span>\n        {!this.props.stateRegistryInfo.greeting ?\n          !this.props.stateGuestViewRegistry ?\n            <a className=\"add-greeting-link text-sm font-medium d-none d-md-inline-block\" href=\"#\" tabIndex=\"0\"\n               onClick={(ev) => this.changeRegistryDetail(ev)}>Add a greeting</a> : null\n          :\n          null\n\n        }\n      </>\n    )\n\n    let registryButtonsRender = !this.props.stateGuestViewRegistry && !this.props.stateRegistryInfo?.user?.isCurator ?\n      <div className=\"col-12 col-md-6 header-buttons mt-1 mt-md-0\">\n        <div className=\"d-flex d-md-inline-block\" data-tut=\"view-step-three\">\n          <div className=\"d-inline-block\">\n            <div className=\"d-flex align-items-baseline registry-status py-1 pr-3 mr-3 pl-0 pl-md-3\"\n                 onClick={() => this.setState({showShareRegistry: true})}>\n              <i className={this.props.stateRegistryInfo?.isPublic ? \"public-status-dot\" : \"private-status-dot\"}/>\n              <p\n                className=\"registry-status-title font-medium ml-1\">{this.props.stateRegistryInfo?.isPublic ? \"Public\" : \"Private\"}</p>\n            </div>\n          </div>\n          <Button variant=\"secondary\" disabled={this.props.hasNoProducts ? this.props.hasNoProducts : false}\n                  className=\"font-medium text-body py-1 px-3 mr-3 d-none d-md-inline-block \"\n                  onClick={(ev) => this.handleGuestView(ev)}>View as Guest</Button>\n          <Button variant=\"primary\" disabled={this.props.hasNoProducts ? this.props.hasNoProducts : false}\n                  className=\"font-medium text-body py-1 px-3 d-none d-md-inline-block\"\n                  onClick={() => this.setState({showShareRegistry: true})}>Share</Button>\n          <div className=\"d-inline-block ml-auto\">\n            <a className=\"view-and-share-link text-sm font-medium mr-3 d-inline-block d-md-none\" href=\"#\"\n               tabIndex=\"0\"\n               onClick={(ev) => this.handleGuestView(ev)}>View as Guest</a>\n            <a className=\"view-and-share-link text-sm font-medium d-inline-block d-md-none\" href=\"#\"\n               tabIndex=\"0\"\n               onClick={(ev) => {\n                 ev.preventDefault();\n                 this.setState({showShareRegistry: true})\n               }}>Share</a>\n          </div>\n        </div>\n      </div> : null\n\n\n    // const style = {\n    //   backgroundImage: 'url(' + this.props.stateRegistryInfo.image.image + ')'\n    // }\n    return (\n      <div data-tut=\"view-step-one\">\n        {this.props.stateGuestViewRegistry ?\n          <div className=\"view-guest-header text-body py-2\">\n            <div className=\"container d-flex flex-wrap justify-content-between\">\n              <div className=\"d-flex align-items-center view-guest-link order-1 order-md-1 mb-2 mb-md-0\"\n                   onClick={this.handleDisableViewGuest}>\n                <i className=\"icon-chevron-left view-guest-text mr-2\"/>\n                <a className=\"view-guest-text\" tabIndex=\"0\">Back To View Registry</a>\n              </div>\n              <div className=\"view-guest-text order-3 order-md-2 ml-4 ml-md-0\">This is how your guests will see your\n                registry\n              </div>\n              <a className=\"view-guest-text view-guest-link order-2 order-md-3 mb-2 mb-md-0\"\n                 onClick={() => this.shareHandler()}>Share</a>\n            </div>\n          </div> : null\n        }\n\n        <InView as=\"div\" className=\"position-relative\" threshold={0.4}\n                onChange={this.viewRegistryHeaderObserverChange}\n        >\n          <div  className=\"view-registry-header view-registry-header-height mx-auto\" style={{backgroundImage: 'url(' + this.props.stateRegistryInfo.image.image + ')'}}>\n            {!this.props.stateGuestViewRegistry ?\n              <div className=\"cover-pic-update-options\">\n                <div className=\"container\">\n                  <div className=\"row\">\n                    <div className=\"col d-flex justify-content-end\">\n                      <MoreOption\n                        data={this.COVER_PIC_OPTIONS}\n                        iconClass=\"custom-icon-camera\"\n                        activeOptionClass=\"view-registry-cover-option-active\"\n                        buttonClass=\"update-cover-options\"/>\n                    </div>\n                  </div>\n                </div>\n              </div> : null\n            }\n\n            <div className=\"header-registry-detail\">\n              <div className=\"container my-4\">\n                <div className=\"row py-3 view-registry-header-border mx-1\">\n                  <div className=\"col\">\n                    {registryNameRender}\n                  </div>\n                  {registryButtonsRender}\n                </div>\n              </div>\n            </div>\n          </div>\n        </InView>\n\n        <div ref={this.fixedViewRegistryHeader} className=\"fixed-view-registry-header d-none w-100\">\n          <div className=\"view-registry-header\"\n               style={{backgroundImage: 'url(' + this.props.stateRegistryInfo.image.image + ')'}}>\n            <div className=\"header-registry-detail\">\n              <div className=\"container\">\n                <div className=\"row py-3\">\n                  <div className=\"col\">\n                    {registryNameRender}\n                  </div>\n                  {registryButtonsRender}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {this.state.showCoverImagePicker ?\n          <CoverImagePicker\n            show={this.state.showCoverImagePicker}\n            closeCoverImagePicker={this.closeCoverImagePicker}\n            setRegistryDefaultImages={this.setRegistryDefaultImages}\n            parentRegistryDefaultImages={this.state.registryDefaultImages}\n          />\n          : null}\n\n        {this.state.showEditRegistryDetail ?\n          <EditViewRegistryDetail\n            show={this.state.showEditRegistryDetail}\n            closeEditRegistryDetail={this.closeEditRegistryDetail}\n            info={this.props.stateRegistryInfo}\n          /> : null}\n\n        <ShareRegistry\n          show={this.state.showShareRegistry}\n          closeShareRegistry={this.closeShareRegistry}\n          registryInfo={this.props.stateRegistryInfo}\n          hasNoProducts={this.props.hasNoProducts}\n        />\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    stateRegistryInfo: state.registry.info,\n    stateGuestViewRegistry: state.viewRegistry.guestViewRegistry,\n    guestViewRegistryState: state.guestView.info,\n    stateSeo: state.registry.seo\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(withRouter(ViewRegistryHeader));","import React from 'react';\nimport \"./SortFilter.scss\";\nimport {useSelector, useDispatch} from 'react-redux';\nimport {activeSortFilter} from '../../ViewRegistryActions';\n\nconst SortFilter = () => {\n\n  const dispatch = useDispatch()\n  const activeSortFilterState = useSelector(state => state.viewRegistry.activeSortFilter)\n  const filterContentRef = React.createRef();\n  const sortBtnRef = React.createRef();\n\n  const toggleFilterContent = () => {\n    filterContentRef.current.classList.remove(\"hide-filter-content\");\n  }\n\n  const handleSortSelection = (sortItem) => {\n    filterContentRef.current.classList.add(\"hide-filter-content\");\n    dispatch(activeSortFilter(sortItem))\n  }\n\n  const sortByList = [\n    {\n      sortId: 1,\n      sortTitle: 'Featured'\n    },\n    {\n      sortId: 2,\n      sortTitle: 'Price: Low to High'\n    },\n    {\n      sortId: 3,\n      sortTitle: 'Price: High to Low'\n    }\n  ]\n\n  const dropdownClickHandler = (ev) => {\n    ev.stopPropagation()\n    let option = document.querySelector(\"#view-registry-sort-content\");\n    if (option && option.classList.contains(\"remove-sort-dropdown\")) {\n      if (sortBtnRef.current){\n        sortBtnRef.current.blur()\n      }\n      option.classList.remove(\"remove-sort-dropdown\");\n    } else {\n      option.classList.add(\"remove-sort-dropdown\");\n      if (option && option.classList.contains(\"hide-filter-content\")) {\n        option.classList.remove(\"hide-filter-content\")\n      }\n    }\n\n  }\n\n  const removeExtraDropdownClass = () => {\n    let option = document.querySelector(\"#view-registry-sort-content\");\n    if (option.classList.contains(\"remove-sort-dropdown\")) {\n      option.classList.remove(\"remove-sort-dropdown\");\n    }\n  }\n\n  return (\n    <div className=\"sort-section-filter\">\n      <a tabIndex={1} className=\"sort-filter-btn px-2 w-100 d-flex justify-content-between align-items-center py-1\"\n         ref={sortBtnRef}\n         onClick={(ev) => dropdownClickHandler(ev)}\n         onBlur={removeExtraDropdownClass}\n      >\n        <span className=\"font-body selected-sort-text text-body\">{activeSortFilterState.sortTitle}</span>\n        <i className=\"icon-filter-1 icon-chevron-down\"/>\n      </a>\n      <div className=\"filter-content\" id=\"view-registry-sort-content\" ref={filterContentRef}>\n        <div className=\"d-flex flex-column\">\n          {sortByList.map(sortItem => {\n            return (\n              <div className=\"filter-item py-2 px-2\" key={\"sortid-\" + sortItem.sortId}\n                   onClick={() => handleSortSelection(sortItem)}>\n                <div className=\"text-sm\">{sortItem.sortTitle}</div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default SortFilter;\n","import React, {useEffect, useState} from 'react';\nimport \"./SortFilterMobile.scss\";\nimport {useSelector, useDispatch} from 'react-redux';\nimport {activeSortFilter} from '../../ViewRegistryActions';\nimport Accordion from 'react-bootstrap/Accordion';\nimport Card from 'react-bootstrap/Card';\nimport RadioButton from '../../../commons/components/radio-button/RadioButton';\n\nconst SortFilterMobile = () => {\n\n  const dispatch = useDispatch()\n  const activeSortFilterState = useSelector(state => state.viewRegistry.activeSortFilter)\n  const [currentSort, setCurrentSort] = useState(1)\n  const filterContentMobileRef = React.createRef();\n\n  useEffect(() => {\n    setCurrentSort(activeSortFilterState.sortId);\n  })\n  const toggleFilterContent = () => {\n    const checkListIconEl = filterContentMobileRef.current.firstChild;\n    checkListIconEl.classList.toggle(\"closed\");\n    checkListIconEl.classList.toggle(\"opened\");\n  }\n\n\n  const handleSortSelection = (sortItem) => {\n    if (currentSort !== sortItem.id) {\n      setCurrentSort(sortItem.sortId)\n      dispatch(activeSortFilter(sortItem))\n    }\n  }\n\n  const sortByList = [\n    {\n      sortId: 1,\n      sortTitle: 'Featured'\n    },\n    {\n      sortId: 2,\n      sortTitle: 'Price: Low to High'\n    },\n    {\n      sortId: 3,\n      sortTitle: 'Price: High to Low'\n    }\n  ]\n\n  return (\n    <div className=\"sort-section-mobile-filter w-100\">\n      <Accordion className=\"accordion-list mb-5\">\n        <Card>\n          <Accordion.Toggle\n            onClick={() => toggleFilterContent()}\n            as={Card.Header}\n            id=\"view-sort-filter\"\n            eventKey=\"view-sort-filter\"\n          >\n            <div ref={filterContentMobileRef} className='d-flex icon-checklist'>\n              <span className=\"checklist-icon-arrow\" />\n              <div className=\"ml-3 mt-1 w-100\">\n                <div className=\"text-body\">Sort By</div>\n              </div>\n            </div>\n          </Accordion.Toggle>\n          <Accordion.Collapse className='ml-6 mt-3' eventKey=\"view-sort-filter\">\n            <Card.Body className=\"text-sm\">\n              {sortByList.map(sortItem => {\n                return (\n                  <div className=\"mb-1\"> <RadioButton\n                    centerText=\"true\"\n                    textClass=\"text-body\"\n                    name=\"viewSortFilter\"\n                    key={sortItem.sortId}\n                    id={`sort-filter-mobile-${sortItem.sortId}`}\n                    checked={sortItem.sortId === currentSort ? true : null}\n                    changeHandler={() => handleSortSelection(sortItem)} >\n                    {sortItem.sortTitle}\n                  </RadioButton>\n                  </div>\n                );\n              })}\n            </Card.Body>\n          </Accordion.Collapse>\n        </Card>\n      </Accordion>\n    </div>\n  )\n}\n\nexport default SortFilterMobile;\n","import React, {useState, useEffect} from 'react'\nimport \"./ViewFilterMobile.scss\";\nimport {useSelector, useDispatch} from 'react-redux';\nimport {setChildViewFilter, clearViewFilter, setViewFilterCategory} from '../../ViewRegistryActions';\nimport {FILTERS} from \"utils/constants\";\nimport Accordion from 'react-bootstrap/Accordion';\nimport Card from 'react-bootstrap/Card';\nimport SortFilterMobile from '../sort-filter/SortFilterMobile';\n\nconst ViewFilterMobile = () => {\n\n\tconst dispatch = useDispatch()\n\tlet tempParentFilterId = useSelector(state => state.viewRegistry.viewFilterApplied.parentFilter)\n\tlet tempChildFilterIds = useSelector(state => state.viewRegistry.viewFilterApplied.childFilter)\n\tlet stateAddedProducts = useSelector(state => state.myRegistry.addedProducts)\n\tconst stateCategoriesInfo = useSelector(state => state.myRegistry.checkList)\n\tconst stateGuestViewRegistry = useSelector(state => state.viewRegistry.guestViewRegistry)\n\tlet stateFilterCategories = useSelector(state => state.viewRegistry.filterCategory)\n\tlet filterCountState = useSelector(state => state.myRegistry.filterCount)\n\tlet [filterCategoryLimit, setFilterCategoryLimit] = useState([])\n\n\n\t// Constant variables for filters\n\tconst AVAILABLE = \"available\"\n\tconst RESERVED = \"reserved\"\n\tconst PURCHASED = \"purchased\"\n\tconst PRICE_1 = \"price-1\"\n\tconst PRICE_2 = \"price-2\"\n\tconst PRICE_3 = \"price-3\"\n\tconst MONICA_AND_ANDY = \"monicaandandy\"\n\tconst ELSEWHERE = \"elsewhere\"\n\n\tconst getLimitOfFliter = (parentId) => {\n\t\tlet limit = null\n\t\tconst filterCategory = [...filterCategoryLimit]\n\t\tfor (let category of filterCategory) {\n\t\t\tif (parentId === category.id && category.limit) {\n\t\t\t\tlimit = category.limit\n\t\t\t}\n\t\t}\n\t\treturn limit\n\t}\n\n\t// Updating product count in filter categories\n\tconst updateFilterList = (addedProducts) => {\n\t\tlet newFilterList = [\n\t\t\t{\n\t\t\t\tid: \"categories\",\n\t\t\t\tdisplay: FILTERS.CATEGORIES_DISPLAY,\n\t\t\t\tlimit: getLimitOfFliter(\"categories\") ? getLimitOfFliter(\"categories\") : 6,\n\t\t\t\tchild: [...stateCategoriesInfo].filter(category => {\n\t\t\t\t\tif (category.addedItemsCount > 0) {\n\t\t\t\t\t\treturn true\n\t\t\t\t\t}\n\t\t\t\t}).map(category => {\n\t\t\t\t\tlet newCategory = {...category}\n\t\t\t\t\tnewCategory.id = category.category.id\n\t\t\t\t\tnewCategory['display'] = newCategory.categoryName\n\t\t\t\t\tnewCategory['count'] = newCategory.addedItemsCount\n\t\t\t\t\treturn newCategory\n\t\t\t\t})\n\t\t\t\t// count: 0\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"price\",\n\t\t\t\tdisplay: FILTERS.PRICE_DISPLAY,\n\t\t\t\tchild: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: PRICE_1,\n\t\t\t\t\t\tdisplay: FILTERS.PRICE_DISPLAY_1,\n\t\t\t\t\t\tcount: filterCountState.registryItemsAnalysisCount.under50\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: PRICE_2,\n\t\t\t\t\t\tdisplay: FILTERS.PRICE_DISPLAY_2,\n\t\t\t\t\t\tcount: filterCountState.registryItemsAnalysisCount.between50100\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: PRICE_3,\n\t\t\t\t\t\tdisplay: FILTERS.PRICE_DISPLAY_3,\n\t\t\t\t\t\tcount: filterCountState.registryItemsAnalysisCount.moreThan100\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"store\",\n\t\t\t\tdisplay: FILTERS.STORE_DISPLAY,\n\t\t\t\tchild: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: MONICA_AND_ANDY,\n\t\t\t\t\t\tdisplay: FILTERS.MONICA_AND_ANDY_DISPLAY,\n\t\t\t\t\t\tcount: filterCountState.registryItemsAnalysisCount.maStoreItems\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: ELSEWHERE,\n\t\t\t\t\t\tdisplay: FILTERS.ELSEWHERE_DISPLAY,\n\t\t\t\t\t\tcount: filterCountState.registryItemsAnalysisCount.otherStoreItems\n\t\t\t\t\t},\n\t\t\t\t]\n\t\t\t},\n\n\t\t]\n\t\tif (!stateGuestViewRegistry) {\n\t\t\tconst giftStatus = {\n\t\t\t\tid: \"giftStatus\",\n\t\t\t\tdisplay: \"Gift Status\",\n\t\t\t\tchild: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: AVAILABLE,\n\t\t\t\t\t\tdisplay: FILTERS.AVAILABLE_DISPLAY,\n\t\t\t\t\t\tcount: filterCountState.registryItemsAnalysisCount.totalAvailable\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: RESERVED,\n\t\t\t\t\t\tdisplay: FILTERS.RESERVED_DISPLAY,\n\t\t\t\t\t\tcount: filterCountState.registryItemsAnalysisCount.totalReserved\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: PURCHASED,\n\t\t\t\t\t\tdisplay: FILTERS.PURCHASED_DISPLAY,\n\t\t\t\t\t\tcount: filterCountState.registryItemsAnalysisCount.totalPurchased\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t\tnewFilterList.splice(0, 0, giftStatus)\n\t\t}\n\t\tdispatch(setViewFilterCategory(newFilterList))\n\t\treturn newFilterList\n\t}\n\n\tuseEffect(() => {\n\t\tif (tempChildFilterIds.length === 0) {\n\t\t\tupdateFilterList(stateAddedProducts)\n\t\t}\n\t}, [stateAddedProducts, stateCategoriesInfo, tempChildFilterIds])\n\n\n\t// Change event handlers\n\n\t// TDOD: Add this if needed\n\t// const parentChangeHandler = (parent) => {\n\t//   dispatch(setParentViewFilter(parent.id))\n\t//   if (parent.child) {\n\t//     dispatch(setChildViewFilter(parent.child.map(child => child.id)))\n\t//   } else {\n\t//     dispatch(setChildViewFilter([]))\n\t//   }\n\t// }\n\n\tconst childChangeHandler = (childId, parentId) => {\n\n\t\tif (parentId !== tempParentFilterId) {\n\t\t\tif (tempChildFilterIds.length > 0) {\n\t\t\t\tdispatch(setChildViewFilter([]))\n\t\t\t}\n\t\t}\n\n\t\tconst childIndex = tempChildFilterIds.indexOf(childId)\n\n\t\tif (childIndex === -1) {\n\t\t\tdispatch(setChildViewFilter([...tempChildFilterIds, childId]))\n\t\t} else {\n\t\t\tlet newChildArray = [...tempChildFilterIds]\n\t\t\tnewChildArray.splice(childIndex, 1)\n\t\t\tdispatch(setChildViewFilter(newChildArray))\n\t\t}\n\t}\n\n\tconst changeParentLimitHandler = (parentFilterID) => {\n\t\tlet limitLength = null\n\t\tlet filterCategory = [...stateFilterCategories].map(parentFilter => {\n\t\t\tif (parentFilter.id === parentFilterID) {\n\t\t\t\tparentFilter.limit = parentFilter.child.length\n\t\t\t\tlimitLength = parentFilter.child.length\n\t\t\t}\n\t\t\treturn parentFilter\n\t\t})\n\t\tdispatch(setViewFilterCategory(filterCategory))\n\n\t\tlet isFound = false\n\t\tlet newFilterCateoryLimit = [...filterCategoryLimit].map(categorylimit => {\n\t\t\tif (categorylimit.id === parentFilterID) {\n\t\t\t\tcategorylimit.limit = limitLength\n\t\t\t\tisFound = true\n\t\t\t\treturn categorylimit\n\t\t\t}\n\t\t\treturn categorylimit\n\t\t})\n\n\t\tif (!isFound) {\n\t\t\tnewFilterCateoryLimit.push({'id': parentFilterID, 'limit': limitLength})\n\t\t}\n\t\tsetFilterCategoryLimit(newFilterCateoryLimit)\n\t}\n\n\tconst handleMobileToggleEvent = (ref) => {\n\t\t// if (id) {\n\t\t// \t// console.log(document.getElementById(`${id}`))\n\t\t// }\n\t\t// console.log(id)\n\t\tconst checkListIconEl = ref.current.firstChild;\n\t\tcheckListIconEl.classList.toggle(\"closed\");\n\t\tcheckListIconEl.classList.toggle(\"opened\");\n\t}\n\n\treturn (\n\t\t<div className=\"view-mobile-filter\">\n\t\t\t<div className=\"d-flex flex-column\">\n\t\t\t\t<SortFilterMobile />\n\t\t\t\t{[...stateFilterCategories].map(parentFilter => {\n\t\t\t\t\t// console.log(\"*****\",parentFilter.id)\n\t\t\t\t\tlet accordionRef = React.createRef();\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Accordion className=\"accordion-list mb-5\">\n\t\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t\t<Accordion.Toggle\n\t\t\t\t\t\t\t\t\tonClick={()=> handleMobileToggleEvent(accordionRef)}\n\t\t\t\t\t\t\t\t\tas={Card.Header}\n\t\t\t\t\t\t\t\t\tid={parentFilter.id}\n\t\t\t\t\t\t\t\t\teventKey={parentFilter.display}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div ref={accordionRef} className='d-flex icon-checklist'>\n\t\t\t\t\t\t\t\t\t\t<span className=\"checklist-icon-arrow\" />\n\t\t\t\t\t\t\t\t\t\t<div className=\"ml-3 mt-1 w-100\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-body\">{parentFilter.display}</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Accordion.Toggle>\n\t\t\t\t\t\t\t\t<Accordion.Collapse className='ml-6 mt-4' eventKey={parentFilter.display}>\n\t\t\t\t\t\t\t\t\t<Card.Body>\n\t\t\t\t\t\t\t\t\t\t{parentFilter.child ? (\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"d-flex flex-column\" key={\"child-filter-\" + parentFilter.id}>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"fliter-checkbox-section\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{parentFilter.child.map((childFilter, index) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tchildFilter.count > 0 ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tindex < (parentFilter.limit ? parentFilter.limit : parentFilter.child.length) ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"view-fliter-checkbox d-flex align-items-center mb-3\" key={childFilter.id}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"checkbox__input mr-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"checkbox\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname={childFilter.display}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={childFilter.display}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchecked={tempChildFilterIds.includes(childFilter.id) ? \"checked\" : \"\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={() => childChangeHandler(childFilter.id, parentFilter.id)} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"checkbox__control d-flex justify-content-center align-items-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"icon-check\"></i>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p class=\"radio__label text-sm\"><div>{childFilter.display} {childFilter.count > 0 ? <>({childFilter.count})</> : null}</div></p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: null\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{(parentFilter.limit && (parentFilter.limit !== parentFilter.child.length) && (parentFilter.child.length - parentFilter.limit) > 0) ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"filter-clear-all text-sm font-medium ml-4 pb-3\" onClick={() => changeParentLimitHandler(parentFilter.id)}>Show {parentFilter.child.length - parentFilter.limit} more</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t\t\t\t</Card.Body>\n\t\t\t\t\t\t\t\t</Accordion.Collapse>\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t</Accordion>\n\t\t\t\t\t)\n\t\t\t\t})}\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default ViewFilterMobile;\n","import React from 'react';\nimport {connect} from \"react-redux\";\nimport AddGift from \"modules/commons/components/add-gift/AddGift\";\nimport SortFilter from \"../sort-filter/SortFilter\";\nimport './SortFilterSection.scss';\nimport {isGotIt, clearViewFilter, setChildViewFilter} from \"modules/view-registry/ViewRegistryActions\";\nimport {UPDATE_REGISTRY} from \"api/mutations\";\nimport {graphQL} from \"api/axios\";\nimport {updateRegistryDetail} from \"utils/commonFunction\";\nimport FilterItemChip from \"modules/my-registry/components/filter/filter-item-chip/FilterItemChip\";\nimport Button from \"../../../commons/components/button-component/ButtonComponent\";\nimport Modal from \"../../../commons/components/modal-component/ModalComponent\";\nimport ViewFilterMobile from \"../view-filter/ViewFilterMobile\";\n\nclass SortFilterSection extends React.Component {\n  state = {\n    showFilterModal: false,\n    parentFilter: \"\",\n    childFilter: []\n  }\n\n  doneViewFilterModal = () => {\n    this.props.setFilterhandler()\n    this.setState({showFilterModal: false})\n  }\n\n  clearViewFilterModal = () =>{\n    this.props.dispatch(clearViewFilter())\n    this.doneViewFilterModal()\n  }\n\n  closeViewFilterModal = () =>{\n    this.props.dispatch(setChildViewFilter([...this.state.childFilter]));\n    this.setState({showFilterModal: false})\n  }\n\n  handleIsGotIt = () => {\n    let data = {\n      query: UPDATE_REGISTRY,\n      operationName: \"updateRegistryDetail\",\n      variables: {\n        \"registryId\": this.props.stateRegistryInfo.id,\n        \"input\": {\n          isFeaturedNoticeRead: true\n        }\n      }\n    }\n    graphQL(data).then(res => {\n      try {\n        if (res.data.data.updateRegistry.registry) {\n          // this.props.dispatch(isGotIt(true))\n          updateRegistryDetail(this.props.dispatch);\n        } else {\n          console.log(res.data.data.updateRegistry.errors);\n          console.error(\"Some error occurred\");\n        }\n      } catch (e) {\n        console.error(e);\n      }\n    }).catch(err => {\n      console.error(err.message)\n    })\n  }\n\n  // Filter chips\n  getFilterChips = (stateFilterApplied) => {\n    let filterChips = {}\n    if (stateFilterApplied) {\n      let allChild = []\n      for (let filterCat of this.props.stateFilterCategory) {\n        for (let childCat of filterCat.child) {\n          allChild.push(childCat)\n        }\n      }\n      if (stateFilterApplied.childFilter) {\n        filterChips.childFilter = [...stateFilterApplied.childFilter].map(item => {\n          let finalAllChild = [...allChild].find(element => {\n            return element.id === item\n          })\n          return finalAllChild\n        })\n      }\n    }\n    return filterChips;\n  }\n\n  // Filter chips close handler\n  deleteChipHandler = async (isParent, childId) => {\n    if (isParent) {\n      await this.props.dispatch(clearViewFilter())\n    } else {\n      const newChildArray = this.props.stateFilterApplied.childFilter.filter(element => {\n        return element !== childId\n      })\n      await this.props.dispatch(setChildViewFilter(newChildArray))\n    }\n    await this.props.setFilterhandler()\n  }\n\n  //Clear filter state\n  clearFilterHandler = async (ev) => {\n    ev.preventDefault()\n    await this.props.dispatch(clearViewFilter())\n    await this.props.setFilterhandler()\n  }\n\n\n  //filter previous states\n  viewFilterStateHandler = () =>{\n    this.setState({parentFilter: this.props.stateFilterApplied.parentFilter})\n    this.setState({childFilter: this.props.stateFilterApplied.childFilter});\n    this.setState({showFilterModal: true});\n  }\n\n  //open modal\n  modalFooterButtons = (\n\t\t<>\n\t\t\t<Button\n\t\t\t\tvariant=\"secondary\"\n\t\t\t\tclassName=\"px-3 py-1 font-weight-bold font-medium text-body\"\n\t\t\t\tdisabled={false}\n\t\t\t\tonClick={this.clearViewFilterModal}\n\t\t\t>Clear</Button>\n\t\t\t<Button\n\t\t\t\tvariant=\"primary\"\n\t\t\t\tclassName=\"px-4 py-1 font-weight-bold font-medium text-body\"\n\t\t\t\tdisabled={false}\n\t\t\t\tonClick={this.doneViewFilterModal}\n\t\t\t>Done</Button>\n\t\t</>\n\t)\n\n  render() {\n    let filterChips = this.getFilterChips(this.props.stateFilterApplied)\n\n    return (\n      <>\n        <div className={[\"row align-items-center align-items-md-start\", this.props.className ? this.props.className : \"\"].join(\" \")}>\n          <div className=\"col-3\">\n            <h4 className=\"font-weight-bold mr-2 filter-section-total-items\">{this.props.productCount} {this.props.productCount === 1 ? \"Gift\" : \"Gifts\"}</h4>\n          </div>\n          <div className=\"col filter-sort-section\">\n            <div className=\"d-flex justify-content-end\">\n              <div>\n                <Button className=\"px-1 pt-1 px-lg-3 d-inline-block d-lg-none mr-1\" variant=\"secondary\" onClick={this.viewFilterStateHandler}>\n                  <i className=\"icon-filter-1 filter-icon\" />\n                </Button>\n              </div>\n              <div className=\"text-sm sort-by-text mr-2 align-self-center d-none d-lg-inline-block\">Sort by</div>\n              <div className=\"d-none d-lg-inline-block\"><SortFilter /></div>\n              {this.props.stateGuestViewRegistry ?\n                <></> :\n                <div className=\"ml-0 ml-md-4 filter-add-gift-btn\"><AddGift /></div>}\n            </div>\n\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col-7\">\n            <div className=\"filtered-items\">\n              {filterChips.childFilter ?\n                filterChips.childFilter.map(item =>\n                  item ?\n                    <FilterItemChip\n                      text={item.display}\n                      className=\"mr-2\"\n                      key={filterChips.id + \"-\" + item.id}\n                      deleteHandler={() => this.deleteChipHandler(false, item.id)} /> : null )\n                : null}\n              {this.props.stateFilterApplied.childFilter.length > 0 ?\n                <a className=\"font-medium text-sm filter-clear-link\" href=\"#\" tabindex=\"0\"\n                  onClick={(ev) => this.clearFilterHandler(ev)}>Clear\n                all</a>\n                : null}\n            </div>\n          </div>\n        </div>\n        {this.props.stateRegistryInfo.isFeaturedNoticeRead === false && this.props.stateActiveSortFilter.sortId !== 1 && !this.props.stateGuestViewRegistry ?\n          <div className=\"row mt-2 mb-3\">\n            <div className=\"col\">\n              <div className=\"text-sm py-2 d-flex flex-wrap justify-content-center sort-filter-warning\">\n                <div>Enable rearrange gifts by</div>\n                <div className=\"font-weight-bold px-1\">clearing your filters</div>\n                <div>and setting to</div>\n                <div className=\"font-weight-bold px-1\">Sort by: Featured.</div>\n                <div className=\"sort-filter-warning-btn\" onClick={this.handleIsGotIt}>Ok, got it.</div>\n              </div>\n            </div>\n          </div> : <></>\n        }\n\n        <Modal\n          show={this.state.showFilterModal}\n          title={\"Filters\"}\n          closeModal={this.closeViewFilterModal}\n          footer={this.modalFooterButtons}\n          >\n          <ViewFilterMobile />\n        </Modal>\n      </>\n    )\n  }\n}\n\n\nconst mapStateToProps = state => {\n  return {\n    stateViewRegistryProducts: state.viewRegistry.viewRegistryProducts,\n    stateActiveSortFilter: state.viewRegistry.activeSortFilter,\n    stateGuestViewRegistry: state.viewRegistry.guestViewRegistry,\n    stateRegistryInfo: state.registry.info,\n    stateFilterApplied: state.viewRegistry.viewFilterApplied,\n    stateFilterCategory: state.viewRegistry.filterCategory\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(SortFilterSection);\n","import React, { useState, useEffect } from 'react'\nimport \"./ViewFilter.scss\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setChildViewFilter, clearViewFilter, setViewFilterCategory } from '../../ViewRegistryActions';\nimport { FILTERS } from \"utils/constants\"\n\nconst ViewFilter = (props) => {\n\n  const dispatch = useDispatch()\n  let tempParentFilterId = useSelector(state => state.viewRegistry.viewFilterApplied.parentFilter)\n  let tempChildFilterIds = useSelector(state => state.viewRegistry.viewFilterApplied.childFilter)\n  let stateAddedProducts = useSelector(state => state.myRegistry.addedProducts)\n  const stateCategoriesInfo = useSelector(state => state.myRegistry.checkList)\n  const stateGuestViewRegistry = useSelector(state => state.viewRegistry.guestViewRegistry)\n  let stateFilterCategories = useSelector(state => state.viewRegistry.filterCategory)\n  let filterCountState = useSelector(state => state.myRegistry.filterCount)\n  let [filterCategoryLimit, setFilterCategoryLimit] = useState([])\n\n  // Constant variables for filters\n  const AVAILABLE = \"available\"\n  const RESERVED = \"reserved\"\n  const PURCHASED = \"purchased\"\n  const PRICE_1 = \"price-1\"\n  const PRICE_2 = \"price-2\"\n  const PRICE_3 = \"price-3\"\n  const MONICA_AND_ANDY = \"monicaandandy\"\n  const ELSEWHERE = \"elsewhere\"\n\n  const getLimitOfFliter = (parentId) => {\n    let limit = null\n    const filterCategory = [...filterCategoryLimit]\n    for (let category of filterCategory) {\n      if (parentId === category.id && category.limit) {\n        limit = category.limit\n      }\n    }\n    return limit\n  }\n\n  // Updating product count in filter categories\n  const updateFilterList = (addedProducts) => {\n\n    let newFilterList = [\n      {\n        id: \"categories\",\n        display: FILTERS.CATEGORIES_DISPLAY,\n        limit: getLimitOfFliter(\"categories\") ? getLimitOfFliter(\"categories\") : 6,\n        child: [...stateCategoriesInfo].filter(category => {\n          let id = category.category.id\n          let count = filterCountState.categoryData[id]\n          if (count > 0) {\n            return true\n          }\n        }).map(category => {\n          let newCategory = { ...category }\n          let id = category.category.id\n          newCategory.id = category.category.id\n          newCategory['display'] = newCategory.categoryName\n          newCategory['count'] = filterCountState.categoryData[id]\n          return newCategory\n        })\n      },\n      {\n        id: \"price\",\n        display: FILTERS.PRICE_DISPLAY,\n        child: [\n          {\n            id: PRICE_1,\n            display: FILTERS.PRICE_DISPLAY_1,\n            count: filterCountState.registryItemsAnalysisCount.under50\n          },\n          {\n            id: PRICE_2,\n            display: FILTERS.PRICE_DISPLAY_2,\n            count: filterCountState.registryItemsAnalysisCount.between50100\n          },\n          {\n            id: PRICE_3,\n            display: FILTERS.PRICE_DISPLAY_3,\n            count: filterCountState.registryItemsAnalysisCount.moreThan100\n          }\n        ]\n      },\n      {\n        id: \"store\",\n        display: FILTERS.STORE_DISPLAY,\n        child: [\n          {\n            id: MONICA_AND_ANDY,\n            display: FILTERS.MONICA_AND_ANDY_DISPLAY,\n            count: filterCountState.registryItemsAnalysisCount.maStoreItems\n          },\n          {\n            id: ELSEWHERE,\n            display: FILTERS.ELSEWHERE_DISPLAY,\n            count: filterCountState.registryItemsAnalysisCount.otherStoreItems\n          },\n        ]\n      },\n\n    ]\n    if (!stateGuestViewRegistry) {\n      const giftStatus = {\n        id: \"giftStatus\",\n        display: \"Gift Status\",\n        child: [\n          {\n            id: AVAILABLE,\n            display: FILTERS.AVAILABLE_DISPLAY,\n            count: filterCountState.registryItemsAnalysisCount.totalAvailable\n          },\n          {\n            id: RESERVED,\n            display: FILTERS.RESERVED_DISPLAY,\n            count: filterCountState.registryItemsAnalysisCount.totalReserved\n          },\n          {\n            id: PURCHASED,\n            display: FILTERS.PURCHASED_DISPLAY,\n            count: filterCountState.registryItemsAnalysisCount.totalPurchased\n          }\n        ]\n      }\n      newFilterList.splice(0, 0, giftStatus)\n    }\n    dispatch(setViewFilterCategory(newFilterList))\n    return newFilterList\n  }\n\n  useEffect(() => {\n    if (tempChildFilterIds.length === 0) {\n      updateFilterList(stateAddedProducts)\n    }\n  }, [stateAddedProducts, stateCategoriesInfo])\n\n\n  // Change event handlers\n\n  // TDOD: Add this if needed\n  // const parentChangeHandler = (parent) => {\n  //   dispatch(setParentViewFilter(parent.id))\n  //   if (parent.child) {\n  //     dispatch(setChildViewFilter(parent.child.map(child => child.id)))\n  //   } else {\n  //     dispatch(setChildViewFilter([]))\n  //   }\n  // }\n\n  const childChangeHandler = async (childId, parentId) => {\n\n    if (parentId !== tempParentFilterId) {\n      if (tempChildFilterIds.length > 0) {\n        await dispatch(setChildViewFilter([]))\n      }\n    }\n\n    const childIndex = tempChildFilterIds.indexOf(childId)\n    let childFilter = []\n    if (childIndex === -1) {\n      childFilter = [...tempChildFilterIds, childId]\n      await dispatch(setChildViewFilter([...tempChildFilterIds, childId]))\n    } else {\n      let newChildArray = [...tempChildFilterIds]\n      newChildArray.splice(childIndex, 1)\n      childFilter = [...newChildArray]\n      await dispatch(setChildViewFilter(newChildArray))\n    }\n\t\tawait props.setFilterhandler(childFilter)\n  }\n\n  const clearClickHandler = async () => {\n    await dispatch(clearViewFilter())\n\t\tawait props.setFilterhandler([])\n  }\n\n  const changeParentLimitHandler = (parentFilterID) => {\n    let limitLength = null\n    let filterCategory = [...stateFilterCategories].map(parentFilter => {\n      if (parentFilter.id === parentFilterID) {\n        parentFilter.limit = parentFilter.child.length\n        limitLength = parentFilter.child.length\n      }\n      return parentFilter\n    })\n    dispatch(setViewFilterCategory(filterCategory))\n\n    let isFound = false\n    let newFilterCateoryLimit = [...filterCategoryLimit].map(categorylimit => {\n      if (categorylimit.id === parentFilterID) {\n        categorylimit.limit = limitLength\n        isFound = true\n        return categorylimit\n      }\n      return categorylimit\n    })\n\n    if (!isFound) {\n      newFilterCateoryLimit.push({ 'id': parentFilterID, 'limit': limitLength })\n    }\n    setFilterCategoryLimit(newFilterCateoryLimit)\n  }\n\n  return (\n    <div className={[\"view-filter\", props.className ? props.className : \"\"].join(\" \")}>\n      <div className=\"view-filter-heading pb-1 d-flex align-items-baseline\">\n        <h4 className=\"font-weight-bold\">Filters</h4>\n        {tempChildFilterIds.length !== 0 ?\n          <a tabindex='0' className=\"filter-clear-all text-sm font-medium ml-auto\" onClick={() => clearClickHandler()}>Clear all</a> : null\n        }\n      </div>\n      <div className=\"d-flex flex-column\">\n        {[...stateFilterCategories].map(parentFilter => (\n          <div className=\"filter-item\" key={\"filter-\" + parentFilter.id}>\n            {/* Parent filter */}\n            <div className=\"text-body filter-title pt-5 d-flex\">{parentFilter.display}</div>\n\n            {/* Child filter */}\n            {parentFilter.child ? (\n              <div className=\"d-flex flex-column mt-2\" key={\"child-filter-\" + parentFilter.id}>\n                <div className=\"mt-3 fliter-checkbox-section\">\n                  {parentFilter.child.map((childFilter, index) => (\n                    childFilter.count > 0 ?\n                      index < (parentFilter.limit ? parentFilter.limit : parentFilter.child.length) ?\n                        <label className=\"view-fliter-checkbox d-flex align-items-center mb-4\" key={childFilter.id}>\n                          <span className=\"checkbox__input mr-2\">\n                            <input type=\"checkbox\"\n                              name={childFilter.display}\n                              value={childFilter.display}\n                              checked={tempChildFilterIds.includes(childFilter.id) ? \"checked\" : \"\"}\n                              onChange={() => childChangeHandler(childFilter.id, parentFilter.id)} />\n                            <span className=\"checkbox__control d-flex justify-content-center align-items-center\">\n                              <i className=\"icon-check\"/>\n                            </span>\n                          </span>\n                          <p className=\"radio__label text-sm\">{childFilter.display} {childFilter.count > 0 ? <>({childFilter.count})</> : null}</p>\n                        </label>\n                        : null\n                      : null\n\n                  ))}\n                  {(parentFilter.limit && (parentFilter.limit !== parentFilter.child.length) && (parentFilter.child.length - parentFilter.limit) > 0) ?\n                    <div className=\"filter-clear-all text-sm font-medium ml-4 pb-3\" onClick={() => changeParentLimitHandler(parentFilter.id)}>Show {parentFilter.child.length - parentFilter.limit} more</div>\n                    : null\n                  }\n                </div>\n              </div>\n            )\n              : null}\n          </div>\n        ))}\n      </div>\n    </div>\n  )\n}\n\nexport default ViewFilter;\n","import React, { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport { setAlreadyBoughtProductInfo } from 'modules/guest-view/GuestViewAction';\nimport ProductDetailsModel from '../product-details-model/ProductDetailsModel';\nimport Counter from \"../counter/Counter\";\nimport { store } from \"store/Store\";\nimport './AlreadyBoughtProduct.scss';\nimport { LOCAL_STORAGE_GUEST_GIFT_BUY_KEY } from 'utils/constants';\nimport { isInputTextValid } from \"utils/commonFunction\";\n\nconst AlreadyBoughtProduct = (props) => {\n\n  const dispatch = useDispatch();\n  const stateRegistryInfo = useSelector(state => state.guestView.info)\n  const productInfo = useSelector(state => state.guestView.alreadyBoughtProduct)\n  const quantity = useSelector(state => state.guestView.alreadyBoughtProduct.quantity)\n  const name = useSelector(state => state.guestView.alreadyBoughtProduct.name)\n  const email = useSelector(state => state.guestView.alreadyBoughtProduct.email)\n  const orderNumber = useSelector(state => state.guestView.alreadyBoughtProduct.orderNumber)\n  const storeName = useSelector(state => state.guestView.alreadyBoughtProduct.storeName)\n  const giftMessage = useSelector(state => state.guestView.alreadyBoughtProduct.giftMessage)\n  const stateUserInfo = useSelector(state => state.registry)\n  const [reservedQuantity, setReservedQuantity] = useState(null)\n\n  useEffect(() => {\n    if (props.fromMail) {\n      setInfo(props.reservedEmail, props.maxAllowedQuantity, props.data.item.store.storeName)\n    }\n    else {\n      let jsonVisitedItems = JSON.parse(localStorage.getItem(LOCAL_STORAGE_GUEST_GIFT_BUY_KEY))\n      let foundUserData = false\n      // Setting default value for email and quantity\n      if (jsonVisitedItems) {\n        for (let item of jsonVisitedItems) {\n          if (Number(item.rId) === Number(stateRegistryInfo.id)) {\n            if (Number(item.pId) === Number(props.data.id)) {\n              setInfo(item.email, item.quantity, props.data.item.store.storeName)\n              foundUserData = true\n              setReservedQuantity(item.quantity)\n            }\n          }\n        }\n      }\n      if (!foundUserData) {\n        if (stateUserInfo.loggedIn) {\n          for (let item of [...props.data.purchasedRegistryItem]) {\n            if (item.guestUser.email === stateUserInfo.user.email && item.isReserved) {\n              setInfo(item.guestUser.email, item.purchasedQuantity, item.storeName)\n              setReservedQuantity(item.purchasedQuantity)\n            }\n          }\n        }\n      }\n    }\n  }, [])\n\n  const setInfo = async (email, quantity, storeName) => {\n    let prodInfo = { ...productInfo };\n    prodInfo.email = email;\n    prodInfo.storeName = storeName;\n    prodInfo.quantity = quantity;\n    await dispatch(setAlreadyBoughtProductInfo(prodInfo));\n  }\n\n  const setQuantity = async (quantity) => {\n    let prodInfo = { ...productInfo };\n    prodInfo.quantity = quantity;\n    dispatch(setAlreadyBoughtProductInfo(prodInfo));\n  }\n\n  const incrementQuantity = () => {\n    let totalQuantityAvalible = props.maxAllowedQuantity ? props.maxAllowedQuantity : reservedQuantity ? reservedQuantity : props.data.quantityStatus.still_needed;\n    if (quantity < totalQuantityAvalible) {\n      setQuantity(quantity + 1)\n    }\n  }\n\n  const decrementQuantity = () => {\n    if (quantity - 1 > 0) {\n      setQuantity(quantity - 1)\n    }\n  }\n\n  const nameChangeHandler = (ev) => {\n    ev.persist();\n    let prodInfo = { ...productInfo };\n    props.onFocusHandler('name')\n    if (!isInputTextValid(ev)) {\n      return;\n    }\n    prodInfo.name = ev.target.value;\n    dispatch(setAlreadyBoughtProductInfo(prodInfo));\n  }\n\n\n  const emailChangeHandler = (ev) => {\n    ev.persist();\n    let prodInfo = { ...productInfo };\n    props.onFocusHandler('email')\n    prodInfo.email = ev.target.value;\n    dispatch(setAlreadyBoughtProductInfo(prodInfo));\n  }\n\n  const storeNameChangeHandler = (ev) => {\n    ev.persist();\n    let prodInfo = { ...productInfo };\n    props.onFocusHandler('storeName')\n    if (!isInputTextValid(ev)) {\n      return;\n    }\n    prodInfo.storeName = ev.target.value;\n    dispatch(setAlreadyBoughtProductInfo(prodInfo));\n  }\n\n  const orderNumberChangeHandler = (ev) => {\n    ev.persist();\n    if (!isInputTextValid(ev)) {\n      return;\n    }\n    let prodInfo = { ...productInfo };\n    prodInfo.orderNumber = ev.target.value;\n    dispatch(setAlreadyBoughtProductInfo(prodInfo));\n  }\n\n  const giftMessageChangeHandler = (ev) => {\n    ev.persist();\n    if (!isInputTextValid(ev)) {\n      return;\n    }\n    let prodInfo = { ...productInfo };\n    prodInfo.giftMessage = ev.target.value;\n    dispatch(setAlreadyBoughtProductInfo(prodInfo));\n  }\n\n  return (\n    <div className=\"row add-gift-another-store\">\n      <div className=\"col\">\n        <div className=\"row pb-2\">\n          <div className=\"col-12 col-md-5 py-4 add-gift-image-select\">\n            <div className=\"mr-3\">\n              <ProductDetailsModel data={props.data} />\n            </div>\n          </div>\n          {/* // I Bought This Already Model Body */}\n          <div className=\"col-12 col-md-7 mt-4\">\n            <div className=\"ml-3\">\n              <div className=\"row col\">\n                <div className=\"col\">\n                  <p className=\"font-body font-medium\">Great! Lets update their registry.</p>\n                  <p className=\"text-sm mt-1\">This information will help {stateRegistryInfo.user.firstName} {stateRegistryInfo.user.partnerUser ? 'and ' + stateRegistryInfo.user.partnerUser.firstName : ''} keep track of all their gifts.</p>\n                </div>\n              </div>\n              <div className=\"row col mt-4\">\n                <div className=\"col m-a-input-container\">\n                  <p className=\"text-sm font-medium add-gift-store-label guest-view-required\">Name</p>\n                  <input\n                    className={[\"w-100 mt-1 mb-0 px-2 py-1\", props.fieldErrors.name ? \"already-bought-input-error\" : \"\"].join(\" \")}\n                    type='text'\n                    placeholder='John Doe'\n                    value={name}\n                    onChange={(ev) => nameChangeHandler(ev)}\n                  />\n                  {props.fieldErrors.name ?\n                    <span\n                      className=\"text-sm already-bought-input-error-text\">{props.fieldErrors.name}</span>\n                    : null}\n                </div>\n              </div>\n              <div className=\"row col mt-4\">\n                <div className=\"col m-a-input-container\">\n                  <p className=\"text-sm font-medium add-gift-store-label guest-view-required\">Email Address</p>\n                  <input\n                    className={[\"w-100 mt-1 mb-0 px-2 py-1\", props.fieldErrors.email ? \"already-bought-input-error\" : \"\"].join(\" \")}\n                    type='text'\n                    placeholder='johndoe@email.com'\n                    value={email}\n                    disabled={(props.reservedEmail) ? \"disabled\" : \"\"}\n                    onChange={(ev) => emailChangeHandler(ev)}\n                  />\n                  {props.fieldErrors.email ?\n                    <span\n                      className=\"text-sm already-bought-input-error-text\">{props.fieldErrors.email}</span>\n                    : null}\n                </div>\n              </div>\n              <div className=\"row col mt-5\">\n                <div className=\"col m-a-input-container\">\n                  <p className=\"text-sm font-medium add-gift-store-label\">Quantity</p>\n                  <Counter\n                    className=\"mt-2\"\n                    counter={quantity}\n                    incrementHandler={incrementQuantity}\n                    decrementHandler={decrementQuantity}\n                  />\n                </div>\n              </div>\n              <div className=\"row col mt-4\">\n                <div className=\"col m-a-input-container\">\n                  <p className=\"text-sm font-medium add-gift-store-label\">Store Name</p>\n                  <input\n                    className={[\"w-100 mt-1 mb-0 px-2 py-1\", props.fieldErrors.storeName ? \"already-bought-input-error\" : \"\"].join(\" \")}\n                    type='text'\n                    placeholder='Eg. Target'\n                    value={storeName}\n                    onChange={(ev) => storeNameChangeHandler(ev)}\n                  />\n                  {props.fieldErrors.storeName ?\n                    <span\n                      className=\"text-sm already-bought-input-error-text\">{props.fieldErrors.storeName}</span>\n                    : null}\n                </div>\n                <div className=\"col m-a-input-container ml-3\">\n                  <p className=\"text-sm font-medium add-gift-store-label\">Order Number</p>\n                  <input\n                    className=\"w-100 mt-1 mb-0 px-2 py-1\"\n                    type='text'\n                    placeholder='0012345'\n                    value={orderNumber}\n                    onChange={(ev) => orderNumberChangeHandler(ev)}\n                  />\n                </div>\n              </div>\n              <div className=\"row col mt-4\">\n                <div className=\"col m-a-input-container\">\n                  <p className=\"text-sm font-medium add-gift-store-label\">Gift Message</p>\n                  <textarea className=\"w-100 mt-1 text-body p-1 m-a-resize-textarea mb-2\"\n                    rows=\"2\"\n                    placeholder=\"Write a message for gift receiver\"\n                    value={giftMessage}\n                    onChange={(ev) => giftMessageChangeHandler(ev)}\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default AlreadyBoughtProduct;","import React, { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport { setCashContributedAlreadyInfo } from 'modules/guest-view/GuestViewAction';\nimport ProductDetailsModel from '../product-details-model/ProductDetailsModel';\nimport Counter from \"../counter/Counter\";\nimport { store } from \"store/Store\";\n// import './AlreadyBoughtProduct.scss';\nimport { LOCAL_STORAGE_GUEST_GIFT_BUY_KEY } from 'utils/constants';\nimport { isInputTextValid } from \"utils/commonFunction\";\n\nconst CashContributedAlready = (props) => {\n\n  const dispatch = useDispatch();\n  const stateRegistryInfo = useSelector(state => state.guestView.info)\n  const productInfo = useSelector(state => state.guestView.cashContributedAlready)\n  const amount = useSelector(state => state.guestView.cashContributedAlready.amount)\n  const name = useSelector(state => state.guestView.cashContributedAlready.name)\n  const email = useSelector(state => state.guestView.cashContributedAlready.email)\n  const giftMessage = useSelector(state => state.guestView.cashContributedAlready.giftMessage)\n\n  const nameChangeHandler = (ev) => {\n    ev.persist();\n    let prodInfo = { ...productInfo };\n    props.onFocusHandler('name')\n    if (!isInputTextValid(ev)) {\n      return;\n    }\n    prodInfo.name = ev.target.value;\n    dispatch(setCashContributedAlreadyInfo(prodInfo));\n  }\n\n  const emailChangeHandler = (ev) => {\n    ev.persist();\n    let prodInfo = { ...productInfo };\n    props.onFocusHandler('email')\n    prodInfo.email = ev.target.value;\n    dispatch(setCashContributedAlreadyInfo(prodInfo));\n  }\n\n  const amountChangeHandler = (ev) => {\n    ev.persist();\n    let prodInfo = { ...productInfo };\n    props.onFocusHandler('amount')\n    if (ev.target.value.length > 0) {\n\t\t\tconst newPrice = Number(ev.target.value);\n\t\t\tconst hasDecimal = (ev.target.value.split('.').length === 2 ? ev.target.value.split('.')[1].length <= 2 : true)\n\t\t\tif ((newPrice >= 0) && hasDecimal) {\n        prodInfo.amount = ev.target.value;\n\t\t\t}\n\t\t} else {\n      prodInfo.amount = '';\n\t\t}\n    dispatch(setCashContributedAlreadyInfo(prodInfo));\n  }\n\n  const giftMessageChangeHandler = (ev) => {\n    ev.persist();\n    if (!isInputTextValid(ev)) {\n      return;\n    }\n    let prodInfo = { ...productInfo };\n    prodInfo.giftMessage = ev.target.value;\n    dispatch(setCashContributedAlreadyInfo(prodInfo));\n  }\n\n  return (\n    <div className=\"row add-gift-another-store\">\n      <div className=\"col\">\n        <div className=\"row pb-2\">\n          <div className=\"col-12 col-md-5 py-4 add-gift-image-select\">\n            <div className=\"mr-3\">\n              <ProductDetailsModel data={props.data} />\n            </div>\n          </div>\n          {/* // I Bought This Already Model Body */}\n          <div className=\"col-12 col-md-7 mt-4\">\n            <div className=\"ml-3\">\n              <div className=\"row col\">\n                <div className=\"col\">\n                  <p className=\"font-body font-medium\">Great, lets update their registry.</p>\n                  <p className=\"text-sm mt-1\">This info will help {stateRegistryInfo.user.firstName} {stateRegistryInfo.user.partnerUser ? 'and' + stateRegistryInfo.user.partnerUser.firstName : ''} keep track of all their gifts.</p>\n                </div>\n              </div>\n              <div className=\"row col mt-4\">\n                <div className=\"col m-a-input-container\">\n                  <p className=\"text-sm font-medium add-gift-store-label guest-view-required\">Name</p>\n                  <input\n                    className={[\"w-100 mt-1 px-2 mb-0 py-1\", props.fieldErrors.name ? \"already-bought-input-error\" : \"\"].join(\" \")}\n                    type='text'\n                    placeholder='John Doe'\n                    value={name}\n                    onChange={(ev) => nameChangeHandler(ev)}\n                  />\n                  {props.fieldErrors.name ?\n                    <span\n                      className=\"text-sm already-bought-input-error-text\">{props.fieldErrors.name}</span>\n                    : null}\n                </div>\n              </div>\n              <div className=\"row col mt-4\">\n                <div className=\"col m-a-input-container\">\n                  <p className=\"text-sm font-medium add-gift-store-label guest-view-required\">Email Address</p>\n                  <input\n                    className={[\"w-100 mt-1 px-2 mb-0 py-1\", props.fieldErrors.email ? \"already-bought-input-error\" : \"\"].join(\" \")}\n                    type='text'\n                    placeholder='johndoe@email.com'\n                    value={email}\n                    onChange={(ev) => emailChangeHandler(ev)}\n                  />\n                  {props.fieldErrors.email ?\n                    <span\n                      className=\"text-sm already-bought-input-error-text\">{props.fieldErrors.email}</span>\n                    : null}\n                </div>\n              </div>\n              <div className=\"row col mt-4\">\n                <div className=\"col m-a-input-container\">\n                  <p className=\"text-sm font-medium add-gift-store-label guest-view-required\">Amount</p>\n                  <div className=\"price-input mt-1\">\n                    <input\n                      type=\"text\"\n                      className={[\"w-100 pl-2 pr-1 py-1 mb-0 text-body pl-5\", props.fieldErrors.amount ? \"already-bought-input-error\" : \"\"].join(\" \")}\n                      value={amount}\n                      onChange={(ev) => amountChangeHandler(ev)}\n                    />\n                  </div>\n                  {props.fieldErrors.amount ?\n                    <span\n                      className=\"text-sm already-bought-input-error-text\">{props.fieldErrors.amount}</span>\n                    : null}\n                  {/*<span className=\"price-input text-body\">$</span>*/}\n                </div>\n              </div>\n              <div className=\"row col mt-4\">\n                <div className=\"col m-a-input-container\">\n                  <p className=\"text-sm font-medium add-gift-store-label\">Gift Message</p>\n                  <textarea className=\"w-100 mt-1 mb-0 text-body p-1\"\n                    rows=\"2\"\n                    placeholder=\"Write a message for gift receiver\"\n                    value={giftMessage}\n                    onChange={(ev) => giftMessageChangeHandler(ev)}\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default CashContributedAlready;","import React, { useState } from 'react';\nimport \"./GiveMAGiftModel.scss\";\nimport Button from '../button-component/ButtonComponent';\nimport Modal from \"../modal-component/ModalComponent\";\nimport Counter from \"../counter/Counter\";\nimport ProductDetailsModel from '../product-details-model/ProductDetailsModel'\nimport { connect } from \"react-redux\";\nimport AlreadyBoughtProduct from \"modules/commons/components/already-bought-product/AlreadyBoughtProduct\";\nimport CashContributedAlready from \"modules/commons/components/cash-contributed-already/CashContributedAlready\";\nimport { graphQL } from \"api/axios\";\nimport { MARK_AS_PURCHASED_BY_GUEST, GIVE_GROUP_GIFT_GUEST, CASH_FUND_GIFT_GUEST, CASH_AND_LEAVE, CASH_FUND_CONTRIBUTION_GUEST } from \"api/mutations\";\nimport { toast } from \"react-toastify\";\nimport { withRouter } from 'react-router-dom';\nimport { clearViewGuestPaginationInfo, setGuestViewProducts } from \"modules/guest-view/GuestViewAction\";\nimport { addProductToCart, formatPrice } from \"utils/commonFunction\";\nimport { M_A_STORE_NAME } from 'utils/constants';\nimport { setLoader } from \"modules/registry/RegistryActions\";\nimport { EMAIL_RE } from \"utils/constants\";\n\nclass GiveMAGiftModel extends React.Component {\n\t// Variable declarations\n\tstate = {\n\t\tupdateModal: false,\n\t\tmodalTitle: '',\n\t\tquantity: 1,\n\t\tisBoughtThisAlready: false,\n\t\tisContributedAlready: false,\n\t\tname: null,\n\t\temail: null,\n\t\tstoreName: null,\n\t\torderNumber: null,\n\t\tgiftMessage: null,\n\t\tamount: \"0.00\",\n\t\terrors: {}\n\t}\n\n\tmodalTitleContent = \"\"\n\n\tcomponentDidMount = () => {\n\t\tthis.setModalData()\n\t}\n\n\tincrementQuantity = () => {\n\t\tif (this.state.quantity < this.props.data.quantityStatus.still_needed)\n\t\t\tthis.setState(() => ({\n\t\t\t\tquantity: this.state.quantity + 1\n\t\t\t}))\n\t}\n\n\tdecrementQuantity = () => {\n\t\tif (this.state.quantity > 1) {\n\t\t\tthis.setState(() => ({\n\t\t\t\tquantity: this.state.quantity - 1\n\t\t\t}))\n\t\t}\n\t}\n\n\tiBoughtThisAlready = () => {\n\t\tthis.setState(() => ({\n\t\t\tisBoughtThisAlready: true,\n\t\t\tmodalTitle: 'I bought this already',\n\t\t}))\n\t}\n\n\tisContributedAlready = () => {\n\t\tthis.setState(() => ({\n\t\t\tisContributedAlready: true,\n\t\t\tmodalTitle: 'I contributed already',\n\t\t\terrors: {}\n\t\t}))\n\t}\n\n\tnameChangeHandler = (ev) => {\n\t\tev.persist();\n\t\tthis.setState({\n\t\t\tname: ev.target.value\n\t\t})\n\t}\n\n\temailChangeHandler = (ev) => {\n\t\tev.persist();\n\t\tthis.setState({\n\t\t\temail: ev.target.value\n\t\t})\n\t}\n\n\tstoreNameChangeHandler = (ev) => {\n\t\tev.persist();\n\t\tthis.setState({\n\t\t\tstoreName: ev.target.value\n\t\t})\n\t}\n\n\torderNumberChangeHandler = (ev) => {\n\t\tev.persist();\n\t\tthis.setState({\n\t\t\torderNumber: ev.target.value\n\t\t})\n\t}\n\n\tgiftMessageChangeHandler = (ev) => {\n\t\tev.persist();\n\t\tthis.setState({\n\t\t\tgiftMessage: ev.target.value\n\t\t})\n\t}\n\n\tamountChangeHandler = (ev) => {\n\t\tthis.onFocusCashFundHandler('amount')\n\t\tif (ev.target.value.length > 0) {\n\t\t\tconst newPrice = Number(ev.target.value);\n\t\t\tconst hasDecimal = (ev.target.value.split('.').length === 2 ? ev.target.value.split('.')[1].length <= 2 : true)\n\t\t\tif ((newPrice >= 0) && hasDecimal) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tamount: ev.target.value\n\t\t\t\t})\n\t\t\t}\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\tamount: ''\n\t\t\t})\n\t\t}\n\t}\n\n\tvalidBoughtThisAlreadyData = () => {\n\t\tlet valid = true\n\t\tlet errors = {}\n\t\t// validate fields\n\t\tif (this.props.productBoughtAlreadyInfo.name.length <= 0) {\n\t\t\terrors['name'] = \"Name is required field\"\n\t\t\tvalid = false\n\t\t}\n\n\t\tif (this.props.productBoughtAlreadyInfo.email.length <= 0) {\n\t\t\terrors['email'] = \"Email address is required field\"\n\t\t\tvalid = false\n\t\t} else {\n\t\t\tif (!this.props.productBoughtAlreadyInfo.email.match(EMAIL_RE)) {\n\t\t\t\terrors['email'] = \"Invalid Email address\"\n\t\t\t\tvalid = false\n\t\t\t}\n\t\t}\n\n\t\tthis.setState({\n\t\t\terrors: errors\n\t\t})\n\n\t\treturn valid\n\t}\n\n\tonFocusBoughtThisAlreadyHandler = (fieldName) => {\n\t\tlet errors = { ...this.state.errors }\n\t\t// Remove the errors while typing\n\t\tif (this.state.errors.email && fieldName === 'email') {\n\t\t\tdelete errors.email\n\t\t}\n\t\tif (this.state.errors.name && fieldName === 'name') {\n\t\t\tdelete errors.name\n\t\t}\n\t\tif (this.state.errors.storeName && fieldName === 'storeName') {\n\t\t\tdelete errors.storeName\n\t\t}\n\t\tthis.setState({\n\t\t\terrors: errors\n\t\t})\n\t}\n\n\tvalidCashContributedAlreadyData = () => {\n\t\tlet valid = true\n\t\tlet errors = {}\n\t\t// validate fields\n\t\tif (this.props.cashContributedAlreadyInfo.name.length <= 0) {\n\t\t\terrors['name'] = \"Name is required field\"\n\t\t\tvalid = false\n\t\t}\n\n\t\tif (this.props.cashContributedAlreadyInfo.email.length <= 0) {\n\t\t\terrors['email'] = \"Email address is required field\"\n\t\t\tvalid = false\n\t\t} else {\n\t\t\tif (!this.props.cashContributedAlreadyInfo.email.match(EMAIL_RE)) {\n\t\t\t\terrors['email'] = \"Invalid Email address\"\n\t\t\t\tvalid = false\n\t\t\t}\n\t\t}\n\n\t\tif (Number(this.props.cashContributedAlreadyInfo.amount) === 0 || this.props.cashContributedAlreadyInfo.amount === '') {\n\t\t\terrors['amount'] = \"Amount can't be 0\"\n\t\t\tvalid = false\n\t\t}\n\t\telse if (Number(this.props.cashContributedAlreadyInfo.amount) > this.props.data.item.price) {\n\t\t\terrors['amount'] = \"Amount can't be greater than required amount\"\n\t\t\tvalid = false\n\t\t}\n\n\t\tthis.setState({\n\t\t\terrors: errors\n\t\t})\n\n\t\treturn valid\n\t}\n\n\tonFocusCashContributedAlreadyHandler = (fieldName) => {\n\t\tlet errors = { ...this.state.errors }\n\t\t// Remove the errors while typing\n\t\tif (this.state.errors.email && fieldName === 'email') {\n\t\t\tdelete errors.email\n\t\t}\n\t\tif (this.state.errors.name && fieldName === 'name') {\n\t\t\tdelete errors.name\n\t\t}\n\t\tif (this.state.errors.amount && fieldName === 'amount') {\n\t\t\tdelete errors.amount\n\t\t}\n\t\tthis.setState({\n\t\t\terrors: errors\n\t\t})\n\t}\n\n\tvalidCashFundData = () => {\n\t\tlet valid = true\n\t\tlet errors = {}\n\t\t// validate fields\n\t\tif (Number(this.state.amount) === 0) {\n\t\t\terrors['amount'] = \"Amount can't be 0\"\n\t\t\tvalid = false\n\t\t}\n\t\telse if (Number(this.state.amount) > Math.round((this.props.data.item.price * this.props.data.quantityStatus.still_needed - this.props.data.quantityStatus.total_contribution_amount % this.props.data.item.price) * 100) / 100) {\n\t\t\terrors['amount'] = \"Amount can't be greater than required amount\"\n\t\t\tvalid = false\n\t\t}\n\n\t\tthis.setState({\n\t\t\terrors: errors\n\t\t})\n\n\t\treturn valid\n\t}\n\n\tonFocusCashFundHandler = (fieldName) => {\n\t\tlet errors = { ...this.state.errors }\n\t\t// Remove the errors while typing\n\t\tif (this.state.errors.amount && fieldName === 'amount') {\n\t\t\tdelete errors.amount\n\t\t}\n\t\tthis.setState({\n\t\t\terrors: errors\n\t\t})\n\t}\n\n\tmodalCloseHandler = () => {\n\t\tthis.setState({\n\t\t\terrors: {}\n\t\t})\n\t\tthis.props.close()\n\t}\n\n\taddProductToCartHandler = (quantity, id) => {\n\t\t// For Ref\n\t\t// ('/cart/add.js', {\n\t\t//   items: [\n\t\t//     {\n\t\t//       quantity: 1,\n\t\t//       id: 31643811020880,\n\t\t//     }\n\t\t//   ]\n\t\t// });\n\t\tlet data = {\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\tquantity: quantity,\n\t\t\t\t\tid: id,\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\t_registry_item_id: this.props.data.id\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t\tif (this.props.stateRegistryInfo.user.defaultAddress){\n\t\t  data.items[0].properties['_address']=this.props.stateRegistryInfo.user.defaultAddress\n    }\n\n\t\t// This function return a promise with object that container response status\n\t\taddProductToCart(data).then(res => {\n\t\t\tif (res && res.status !== 200) {\n\t\t\t\ttoast.error(res.description ? res.description : \"Some error occurred while adding product to cart\");\n\t\t\t} else if (res && res.status === 200) {\n\t\t\t\t// toast.success(\"Product added to cart successfully.\")\n\t\t\t\tthis.modalCloseHandler()\n\t\t\t\t// Toggle MA store cart while addting product in cart\n\t\t\t\tlet cart = document.querySelector(\".open-drawer\")\n\t\t\t\tif (cart) {\n\t\t\t\t\tcart.click();\n\t\t\t\t}\n\t\t\t\tthis.props.close()\n\t\t\t}\n\t\t\tthis.props.dispatch(setLoader(false))\n\t\t}).catch(err => {\n\t\t\t// TODO: Add toast proper toast msg\n\t\t\tconsole.log('Something went wrong-->', err)\n\t\t\tif (err && err.status !== 200) {\n\t\t\t\ttoast.error(err.description ? err.description : \"Some error occurred while adding product to cart\");\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttoast.error(\"Some unexpected error has occurred\");\n\t\t\t}\n\t\t\tthis.props.dispatch(setLoader(false))\n\t\t});\n\t}\n\n\tsubmitDataHandler = async () => {\n\t\tthis.props.dispatch(setLoader(true))\n\n\t\t// For Bought this gift already\n\t\tif (this.state.isBoughtThisAlready) {\n\t\t\t// Vaidating data\n\t\t\tif (!this.validBoughtThisAlreadyData()) {\n\t\t\t\tthis.props.dispatch(setLoader(false))\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\tlet data = {\n\t\t\t\tquery: MARK_AS_PURCHASED_BY_GUEST,\n\t\t\t\tvariables: {\n\t\t\t\t\tregistryUrlSlug: this.props.stateRegistryInfo.urlSlug,\n\t\t\t\t\tregistryItemId: this.props.data.id,\n\t\t\t\t\tisPurchased: true,\n\t\t\t\t\tstoreName: this.props.productBoughtAlreadyInfo.storeName,\n\t\t\t\t\tpurchasedQuantity: this.props.productBoughtAlreadyInfo.quantity,\n\t\t\t\t\t// contributionAmount: null,\n\t\t\t\t\tgiftMessage: this.props.productBoughtAlreadyInfo.giftMessage,\n\t\t\t\t\torderNumber: this.props.productBoughtAlreadyInfo.orderNumber,\n\t\t\t\t\tname: this.props.productBoughtAlreadyInfo.name,\n\t\t\t\t\temail: this.props.productBoughtAlreadyInfo.email\n\t\t\t\t},\n\t\t\t}\n\t\t\tawait graphQL(data).then(async res => {\n\t\t\t\tif (res.data.errors || res.data.error) {\n\t\t\t\t\t// TODO: Add toast proper toast msg\n\t\t\t\t\tconsole.log('Something went wrong-->', res.data.errors)\n\t\t\t\t\ttoast.error((\n\t\t\t\t\t\t<p>Something went wrong</p>\n\t\t\t\t\t))\n\t\t\t\t} else {\n\t\t\t\t\t// Getting Update Product\n\t\t\t\t\tawait this.props.dispatch(clearViewGuestPaginationInfo())\n\t\t\t\t\tawait this.props.updateGuestViewProduct(this.props.stateRegistryInfo.urlSlug, this.props.stateAddedProducts.length, true)\n\t\t\t\t\ttoast.success((\n\t\t\t\t\t\t<p><b>{this.props.data.title}</b> Purchased!</p>\n\t\t\t\t\t))\n\t\t\t\t\tthis.modalCloseHandler()\n\t\t\t\t}\n\t\t\t\tthis.props.dispatch(setLoader(false))\n\t\t\t}).catch(err => {\n\t\t\t\t// TODO: Add toast proper toast msg\n\t\t\t\tconsole.log('Something went wrong-->', err)\n\t\t\t\ttoast.error((\n\t\t\t\t\t<p>Something went wrong</p>\n\t\t\t\t))\n\t\t\t\tthis.props.dispatch(setLoader(false))\n\t\t\t})\n\t\t}\n\t\t// For Cash Fund Contributed Already\n\t\telse if (this.state.isContributedAlready) {\n\t\t\tif (!this.props.data.item.hideTotal && !this.validCashContributedAlreadyData()) {\n\t\t\t\tthis.props.dispatch(setLoader(false))\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\tlet data = {\n\t\t\t\tquery: CASH_FUND_CONTRIBUTION_GUEST,\n\t\t\t\tvariables: {\n\t\t\t\t\tregistryUrlSlug: this.props.stateRegistryInfo.urlSlug,\n\t\t\t\t\tregistryItemId: this.props.data.id,\n\t\t\t\t\tisPurchased: true,\n\t\t\t\t\tcontributionAmount: Number(this.props.cashContributedAlreadyInfo.amount),\n\t\t\t\t\t// contributionAmount: null,\n\t\t\t\t\tgiftMessage: this.props.cashContributedAlreadyInfo.giftMessage,\n\t\t\t\t\tname: this.props.cashContributedAlreadyInfo.name,\n\t\t\t\t\temail: this.props.cashContributedAlreadyInfo.email\n\t\t\t\t},\n\t\t\t}\n\t\t\tawait graphQL(data).then(async res => {\n\t\t\t\tif (res.data.errors || res.data.error) {\n\t\t\t\t\t// TODO: Add toast proper toast msg\n\t\t\t\t\tconsole.log('Something went wrong-->', res.data.errors)\n\t\t\t\t\ttoast.error((\n\t\t\t\t\t\t<p>Something went wrong</p>\n\t\t\t\t\t))\n\t\t\t\t} else {\n\t\t\t\t\t// Getting Update Product\n\t\t\t\t\tawait this.props.dispatch(clearViewGuestPaginationInfo())\n\t\t\t\t\tawait this.props.updateGuestViewProduct(this.props.stateRegistryInfo.urlSlug, this.props.stateAddedProducts.length, true)\n\t\t\t\t\ttoast.success((\n\t\t\t\t\t\t<p><b>${this.props.cashContributedAlreadyInfo.amount} contributed</b> successfully for {this.props.data.title}</p>\n\t\t\t\t\t))\n\t\t\t\t\tthis.modalCloseHandler()\n\t\t\t\t}\n\t\t\t\tthis.props.dispatch(setLoader(false))\n\t\t\t}).catch(err => {\n\t\t\t\t// TODO: Add toast proper toast msg\n\t\t\t\tconsole.log('Something went wrong-->', err)\n\t\t\t\tif (err.response.data.errors[0].errors.contribution_amount?.length) {\n\t\t\t\t\tlet errors = {}\n\t\t\t\t\terrors['amount'] = \"Amount can't be greater than required amount\"\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\terrors: errors\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\ttoast.error((\n\t\t\t\t\t\t<p>Something went wrong</p>\n\t\t\t\t\t))\n\t\t\t\t}\n\t\t\t\tthis.props.dispatch(setLoader(false))\n\t\t\t})\n\t\t}\n\t\t// For Group Gift\n\t\telse if (this.props.isGroupGift && !this.props.data.item.isCashFund) {\n\t\t\tif (!this.validCashFundData()) {\n\t\t\t\tthis.props.dispatch(setLoader(false))\n\t\t\t\treturn false\n\t\t\t}\n\t\t\tlet data = {\n\t\t\t\tquery: GIVE_GROUP_GIFT_GUEST,\n\t\t\t\tvariables: {\n\t\t\t\t\tregistryId: Number(this.props.stateRegistryInfo.id),\n\t\t\t\t\tregistryItemId: Number(this.props.data.id),\n\t\t\t\t\tcontributionAmount: Number(this.state.amount)\n\t\t\t\t},\n\t\t\t}\n\t\t\tawait graphQL(data).then(async res => {\n\t\t\t\tif (res.data.errors || res.data.error) {\n\t\t\t\t\t// TODO: Add toast proper toast msg\n\t\t\t\t\tconsole.log('Something went wrong-->', res.data.errors)\n\t\t\t\t\ttoast.error((\n\t\t\t\t\t\t<p>Something went wrong</p>\n\t\t\t\t\t))\n\t\t\t\t} else {\n\t\t\t\t\t// Getting Update Product\n\t\t\t\t\tawait this.props.dispatch(clearViewGuestPaginationInfo())\n\t\t\t\t\tawait this.props.updateGuestViewProduct(this.props.stateRegistryInfo.urlSlug, this.props.stateAddedProducts.length, true)\n\t\t\t\t\tthis.addProductToCartHandler(1, res.data.data.giveGroupGift.variantId)\n\t\t\t\t\ttoast.success((\n\t\t\t\t\t\t<p><b>${this.state.amount} contributed</b> successfully for {this.props.data.title}</p>\n\t\t\t\t\t))\n\t\t\t\t\t// this.modalCloseHandler()\n\t\t\t\t}\n\t\t\t\tthis.props.dispatch(setLoader(false))\n\t\t\t}).catch(err => {\n\t\t\t\t// TODO: Add toast proper toast msg\n\t\t\t\tconsole.log('Something went wrong-->', err)\n\t\t\t\tif (err.response.data.errors[0].errors.contribution_amount?.length) {\n\t\t\t\t\tlet errors = {}\n\t\t\t\t\terrors['amount'] = \"Amount can't be greater than required amount\"\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\terrors: errors\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\ttoast.error((\n\t\t\t\t\t\t<p>Something went wrong</p>\n\t\t\t\t\t))\n\t\t\t\t}\n\t\t\t\tthis.props.dispatch(setLoader(false))\n\t\t\t})\n\t\t}\n\t\t// For cash and leave\n\t\telse if (this.props.isCashAcceptedOnly) {\n\t\t\tlet data = {\n\t\t\t\tquery: CASH_AND_LEAVE,\n\t\t\t\tvariables: {\n\t\t\t\t\tregistryId: Number(this.props.stateRegistryInfo.id),\n\t\t\t\t\tregistryItemId: Number(this.props.data.id),\n\t\t\t\t\tpurchasedQuantity: this.state.quantity\n\t\t\t\t},\n\t\t\t}\n\t\t\tawait graphQL(data).then(async res => {\n\t\t\t\tif (res.data.errors || res.data.error) {\n\t\t\t\t\t// TODO: Add toast proper toast msg\n\t\t\t\t\tconsole.log('Something went wrong-->', res.data.errors)\n\t\t\t\t\ttoast.error((\n\t\t\t\t\t\t<p>Something went wrong</p>\n\t\t\t\t\t))\n\t\t\t\t} else {\n\t\t\t\t\t// Getting Update Product\n\t\t\t\t\tawait this.props.dispatch(clearViewGuestPaginationInfo())\n\t\t\t\t\tawait this.props.updateGuestViewProduct(this.props.stateRegistryInfo.urlSlug, this.props.stateAddedProducts.length, true)\n\t\t\t\t\tthis.addProductToCartHandler(this.state.quantity, res.data.data.cashInLieu.variantId)\n\t\t\t\t\ttoast.success((\n\t\t\t\t\t\t<p><b>{this.props.data.title}</b> Purchased!</p>\n\t\t\t\t\t))\n\t\t\t\t\t// this.modalCloseHandler()\n\t\t\t\t}\n\t\t\t\tthis.props.dispatch(setLoader(false))\n\t\t\t}).catch(err => {\n\t\t\t\t// TODO: Add toast proper toast msg\n\t\t\t\tconsole.log('Something went wrong-->', err)\n\t\t\t\ttoast.error((\n\t\t\t\t\t<p>Something went wrong</p>\n\t\t\t\t))\n\t\t\t\tthis.props.dispatch(setLoader(false))\n\t\t\t})\n\t\t}\n\t\t// For Cash Fund\n\t\telse if (this.props.data.item.isCashFund && this.props.isGroupGift) {\n\t\t\tif (!this.props.data.item.hideTotal && !this.validCashFundData()) {\n\t\t\t\tthis.props.dispatch(setLoader(false))\n\t\t\t\treturn false\n\t\t\t}\n\t\t\tlet data = {\n\t\t\t\tquery: CASH_FUND_GIFT_GUEST,\n\t\t\t\tvariables: {\n\t\t\t\t\tregistryId: Number(this.props.stateRegistryInfo.id),\n\t\t\t\t\tregistryItemId: Number(this.props.data.id),\n\t\t\t\t\tcontributionAmount: Number(this.state.amount)\n\t\t\t\t},\n\t\t\t}\n\t\t\tawait graphQL(data).then(async res => {\n\t\t\t\tif (res.data.errors || res.data.error) {\n\t\t\t\t\t// TODO: Add toast proper toast msg\n\t\t\t\t\tconsole.log('Something went wrong-->', res.data.errors)\n\t\t\t\t\tif (res.data.errors[0].errors.contribution_amount?.length) {\n\t\t\t\t\t\tlet errors = {}\n\t\t\t\t\t\terrors['amount'] = \"Amount can't be greater than required amount\"\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\terrors: errors\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\ttoast.error((\n\t\t\t\t\t\t\t<p>Something went wrong</p>\n\t\t\t\t\t\t))\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Getting Update Product\n\t\t\t\t\tawait this.props.dispatch(clearViewGuestPaginationInfo())\n\t\t\t\t\tawait this.props.updateGuestViewProduct(this.props.stateRegistryInfo.urlSlug, this.props.stateAddedProducts.length, true)\n\t\t\t\t\tthis.addProductToCartHandler(1, res.data.data.cashFundGift.variantId)\n\t\t\t\t\ttoast.success((\n\t\t\t\t\t\t<p><b>${this.state.amount} contributed</b> successfully for {this.props.data.title}</p>\n\t\t\t\t\t))\n\t\t\t\t\t// this.modalCloseHandler()\n\t\t\t\t}\n\t\t\t\tthis.props.dispatch(setLoader(false))\n\t\t\t}).catch(err => {\n\t\t\t\t// TODO: Add toast proper toast msg\n\t\t\t\tif (err.response.data.errors[0].errors.contribution_amount?.length) {\n\t\t\t\t\tlet errors = {}\n\t\t\t\t\terrors['amount'] = \"Amount can't be greater than required amount\"\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\terrors: errors\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\ttoast.error((\n\t\t\t\t\t\t<p>Something went wrong</p>\n\t\t\t\t\t))\n\t\t\t\t}\n\t\t\t\tthis.props.dispatch(setLoader(false))\n\t\t\t})\n\t\t}\n\t\t// If M-A product: Adding to cart\n\t\telse if (this.props.data.item.store.storeName === M_A_STORE_NAME &&\n\t\t\t!this.props.isGroupGift &&\n\t\t\t!this.props.isCashAcceptedOnly) {\n\t\t\tawait this.addProductToCartHandler(this.state.quantity, this.props.data.item.shopifyItemVariantId)\n\t\t\tthis.props.dispatch(setLoader(false))\n\t\t}\n\t}\n\n\tsetModalData = () => {\n\t\tthis.clearModalData()\n\t\tthis.setState({\n\t\t\tmodalTitle: this.props.title\n\t\t})\n\t}\n\n\tclearModalData = () => {\n\t\tthis.state.modalTitle = \"\"\n\t\tthis.modalBody = \"\"\n\t\tthis.modalTitleContent = \"\"\n\t\tthis.modalFooterButtons = \"\"\n\t}\n\n\tcontributeRestHandler = (data) => {\n\t\tlet contributeAmount = Math.round((data.item.price * data.quantityStatus.still_needed - data.quantityStatus.total_contribution_amount % data.item.price) * 100) / 100\n\t\tthis.setState({\n\t\t\tamount: contributeAmount\n\t\t})\n\t}\n\n\trender() {\n\t\t// Body for modal\n\t\tlet modalBody = (\n\t\t\t<>\n\t\t\t\t{/* Give M+A Gift Model Body */}\n\t\t\t\t{!this.state.isBoughtThisAlready && !this.state.isContributedAlready ?\n\t\t\t\t\t<div className=\"row add-gift-another-store\">\n\t\t\t\t\t\t<div className=\"col\">\n\t\t\t\t\t\t\t<div className=\"row\">\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<div className=\"col-12 col-md-5 py-4 add-gift-image-select\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"mr-3\">\n\t\t\t\t\t\t\t\t\t\t\t<ProductDetailsModel data={this.props.data} />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{!this.props.isGroupGift ?\n\t\t\t\t\t\t\t\t\t\t<div className=\"col-12 col-md-7 mt-4\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"ml-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"row col\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"col\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"font-body font-medium\">Buy this gift for {this.props.stateRegistryInfo.user.firstName} {this.props.stateRegistryInfo.user.partnerUser ? 'and ' + this.props.stateRegistryInfo.user.partnerUser.firstName : ''}</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm mt-1\">Well keep this gift available in the registry until you check out.{this.props.isCashAcceptedOnly ? \" This gift will be shipped to registrant at their convenience.\" : ''}</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"row col mt-4\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"col m-a-input-container\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm font-medium add-gift-store-label\">Quantity</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Counter\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"mt-2\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcounter={this.state.quantity}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tincrementHandler={this.incrementQuantity}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdecrementHandler={this.decrementQuantity}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t// For group gift\n\t\t\t\t\t\t\t\t\t\t<div className=\"col-12 col-md-7 mt-4\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"ml-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"row col\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"col\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"font-body font-medium\">How much do you want to contribute?</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm mt-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{this.props.stateRegistryInfo.user.firstName} {this.props.stateRegistryInfo.user.partnerUser ? 'and ' + this.props.stateRegistryInfo.user.partnerUser.firstName : ''} will be able to buy the gift themselves once they receive the funds.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t{this.props.data.isGroupGift ?\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.props.data.item.hideTotal ? null :\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"row col mt-4 give-gift-model\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"col\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm font-medium received-amount\">Received {formatPrice(Math.round((this.props.data.quantityStatus.total_contribution_amount % this.props.data.item.price) * 100) / 100)}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm total-amount\"> of {formatPrice(Math.round(this.props.data.item.price * this.props.data.quantityStatus.still_needed * 100) / 100)}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"group-gift-background\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"group-gift-progress mw-100\" style={{ width: `${((this.props.data.quantityStatus.total_contribution_amount % this.props.data.item.price) * 100) / (this.props.data.item.price * this.props.data.quantity)}%` }} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"mt-4 ml-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"row col\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"col\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"m-a-input-container mr-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm font-medium add-gift-store-label guest-view-required\">Amount</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"price-input mt-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={[\"w-100 pl-2 pr-1 py-1 mb-0 text-body pl-5\", this.state.errors.amount ? \"already-bought-input-error\" : \"\"].join(\" \")}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.amount}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(ev) => this.amountChangeHandler(ev)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{this.state.errors.amount ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-sm already-bought-input-error-text\">{this.state.errors.amount}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/*<span className=\"price-input text-body\">$</span>*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{this.props.data.item.hideTotal ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnull : <p className=\"mt-3 text-sm give-gift-text-link d-inline-block font-medium\" onClick={() => this.contributeRestHandler(this.props.data)}>Contribute the rest</p>}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div> :\n\t\t\t\t\t// For Cash fund\n\t\t\t\t\tthis.state.isContributedAlready ?\n\t\t\t\t\t\t<CashContributedAlready\n\t\t\t\t\t\t\tdata={this.props.data}\n\t\t\t\t\t\t\tvalidData={this.validCashContributedAlreadyData}\n\t\t\t\t\t\t\tonFocusHandler={this.onFocusCashContributedAlreadyHandler}\n\t\t\t\t\t\t\tfieldErrors={this.state.errors} />\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<AlreadyBoughtProduct\n\t\t\t\t\t\t\tdata={this.props.data}\n\t\t\t\t\t\t\tvalidBoughtThisAlreadyData={this.validBoughtThisAlreadyData}\n\t\t\t\t\t\t\tonFocusHandler={this.onFocusBoughtThisAlreadyHandler}\n\t\t\t\t\t\t\tfieldErrors={this.state.errors} />\n\t\t\t\t}\n\t\t\t</>\n\t\t)\n\n\t\t// Modal buttons\n\t\tlet modalFooterButtons = (\n\t\t\t<>\n\t\t\t\t{!this.state.isBoughtThisAlready && !this.state.isContributedAlready ?\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\tclassName=\"MA-gift-footer-btn px-3 py-1 font-medium text-body\"\n\t\t\t\t\t\tonClick={!this.props.data.item.isCashFund ? () => this.iBoughtThisAlready() : () => this.isContributedAlready()}\n\t\t\t\t\t>{!this.props.data.item.isCashFund ? \"I Bought This Already\" : \"I Contributed Already\"}</Button> : null}\n\t\t\t\t{/* For Contributed Already */}\n\t\t\t\t{!this.state.isContributedAlready ?\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\tclassName=\"MA-gift-footer-btn px-4 py-1 font-medium text-body\"\n\t\t\t\t\t\tdisabled={(this.state.isBoughtThisAlready && (this.props.productBoughtAlreadyInfo.name.length === 0 || this.props.productBoughtAlreadyInfo.email.length === 0)) || (!this.state.isBoughtThisAlready && this.props.isGroupGift && Number(this.state.amount) === 0) ? true : false}\n\t\t\t\t\t\tonClick={() => this.submitDataHandler()}\n\t\t\t\t\t>{!this.state.isBoughtThisAlready ? this.props.isGroupGift ? 'Contribute' : 'Add To Cart' : 'Save & Close'}</Button>\n\t\t\t\t\t:\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\tclassName=\"MA-gift-footer-btn px-4 py-1 font-medium text-body\"\n\t\t\t\t\t\tdisabled={(this.props.cashContributedAlreadyInfo.name.length === 0 || this.props.cashContributedAlreadyInfo.name.length === 0 || Number(this.props.cashContributedAlreadyInfo.amount) === 0) ? true : false}\n\t\t\t\t\t\tonClick={() => this.submitDataHandler()}\n\t\t\t\t\t>Save & Close</Button>\n\t\t\t\t}\n\t\t\t</>\n\t\t)\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Modal\n\t\t\t\t\tshow={this.props.show}\n\t\t\t\t\tupdateModal={this.state.updateModal}\n\t\t\t\t\ttitle={this.state.modalTitle}\n\t\t\t\t\ttitleContent={this.modalTitleContent}\n\t\t\t\t\tfooter={modalFooterButtons}\n\t\t\t\t\tnoBodyPadding={true}\n\t\t\t\t\tcloseModal={this.props.close}>\n\t\t\t\t\t{modalBody}\n\t\t\t\t</Modal>\n\t\t\t</>\n\t\t)\n\t}\n}\nconst mapStateToProps = state => {\n\treturn {\n\t\tstateRegistryInfo: state.guestView.info,\n\t\tproductBoughtAlreadyInfo: state.guestView.alreadyBoughtProduct,\n\t\tcashContributedAlreadyInfo: state.guestView.cashContributedAlready,\n\t\tstateAddedProducts: state.guestView.product\n\t}\n}\n\nexport default connect(\n\tmapStateToProps\n)(withRouter(GiveMAGiftModel));","import React, { useState } from 'react';\nimport \"./GiveGiftFromAnotherStore.scss\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from 'react-router-dom';\nimport Modal from \"../modal-component/ModalComponent\";\nimport Button from '../button-component/ButtonComponent';\nimport Counter from \"../counter/Counter\";\nimport ProductDetailsModel from '../product-details-model/ProductDetailsModel';\nimport AlreadyBoughtProduct from \"modules/commons/components/already-bought-product/AlreadyBoughtProduct\";\nimport { BUYNOW_REDIRECTION_TIME, LOCAL_STORAGE_GUEST_GIFT_BUY_KEY } from 'utils/constants';\nimport { setGuestGiftsRedirectionInfo } from 'modules/guest-view/GuestViewAction';\nimport { MARK_AS_PURCHASED_BY_GUEST, RESERVE_REGISTRY_ITEM_GUEST, REMOVE_RESERVED_ITEM_GUEST } from \"api/mutations\";\nimport { toast } from \"react-toastify\";\nimport { graphQL } from \"api/axios\";\nimport { clearViewGuestPaginationInfo } from \"modules/guest-view/GuestViewAction\";\nimport { setLoader } from \"modules/registry/RegistryActions\";\nimport { EMAIL_RE } from \"utils/constants\";\n\nclass GiveGiftFromAnotherStore extends React.Component {\n  // Variable declarations\n  state = {\n    updateModal: false,\n    quantity: 1,\n    isBoughtThisAlready: false,\n    name: null,\n    email: '',\n    registeredEmail: '',\n    storeName: null,\n    orderNumber: null,\n    giftMessage: null,\n    currentView: 1,\n    errors: {}\n  }\n\n  componentDidMount = () => {\n    this.setModalData()\n    this.buyNowClickHandler(true)\n  }\n\n  incrementQuantity = () => {\n    if (this.state.quantity < this.props.data.quantityStatus.still_needed)\n      this.setState(() => ({\n        quantity: this.state.quantity + 1\n      }))\n  }\n\n  decrementQuantity = () => {\n    if (this.state.quantity > 1) {\n      this.setState(() => ({\n        quantity: this.state.quantity - 1\n      }))\n    }\n  }\n\n  emailChangeHandler = (ev) => {\n    ev.persist();\n    this.setState({\n      email: ev.target.value\n    })\n    let errors = { ...this.state.errors }\n\n    // Remove the errors while typing\n    if (this.state.errors.email) {\n      delete errors.email\n    }\n    this.setState({\n      errors: errors\n    })\n  }\n\n  iBoughtThisAlready = () => {\n    this.setState(() => ({\n      isBoughtThisAlready: true,\n      modalTitle: 'I bought this already',\n    }))\n  }\n\n  validEmail = () => {\n    let valid = true\n    let errors = {}\n    // validate fields\n    if (this.state.email.length <= 0) {\n      errors['email'] = \"Email address is required field\"\n      valid = false\n    } else {\n      if (!this.state.email.match(EMAIL_RE)) {\n        errors['email'] = \"Invalid Email address\"\n        valid = false\n      }\n    }\n\n    this.setState({\n      errors: errors\n    })\n\n    return valid\n  }\n\n  validBoughtThisAlreadyData = () => {\n    let valid = true\n    let errors = {}\n    // validate fields\n    if (this.props.productBoughtAlreadyInfo.name.length <= 0) {\n      errors['name'] = \"Name is required field\"\n      valid = false\n    }\n\n    if (this.props.productBoughtAlreadyInfo.email.length <= 0) {\n      errors['email'] = \"Email address is required field\"\n      valid = false\n    } else {\n      if (!this.props.productBoughtAlreadyInfo.email.match(EMAIL_RE)) {\n        errors['email'] = \"Invalid Email address\"\n        valid = false\n      }\n    }\n\n    this.setState({\n      errors: errors\n    })\n\n    return valid\n  }\n\n  onFocusBoughtThisAlreadyHandler = (fieldName) => {\n    let errors = { ...this.state.errors }\n    // Remove the errors while typing\n    if (this.state.errors.email && fieldName === 'email') {\n      delete errors.email\n    }\n    if (this.state.errors.name && fieldName === 'name') {\n      delete errors.email\n    }\n    if (this.state.errors.storeName && fieldName === 'storeName') {\n      delete errors.storeName\n    }\n    this.setState({\n      errors: errors\n    })\n  }\n\n  buyNowClickHandler = (onLoad = false) => {\n    let createNewRecord = false\n    let updateProduct = false\n    let openModal = false\n    let jsonVisitedItems = JSON.parse(localStorage.getItem(LOCAL_STORAGE_GUEST_GIFT_BUY_KEY))\n\n    if (jsonVisitedItems && jsonVisitedItems.length) {\n      for (let item of jsonVisitedItems) {\n        if (Number(item.rId) === Number(this.props.stateRegistryInfo.id)) {\n          if (Number(item.pId) === Number(this.props.data.id)) {\n            this.setState({\n              currentView: 3,\n            })\n          } else {\n            updateProduct = true;\n            createNewRecord = true;\n          }\n        } else {\n          updateProduct = true;\n          createNewRecord = true;\n        }\n      }\n    } else {\n      createNewRecord = true;\n    }\n\n    // TODO: If Reserved Based on TimeStamp\n    // if (jsonVisitedItems) {\n    //   for (let item of jsonVisitedItems) {\n\n    //     // If registry doesn't match then delete old and create new record\n    //     if (Number(item.rId) === Number(this.props.stateRegistryInfo.id)) {\n    //       if (Number(item.pId) === Number(this.props.data.id)) {\n\n    //         let productTimestamp = new Date(item.timestamp)\n    //         let currentDate = new Date()\n\n    //         // Resetting hours because only checking the dates\n    //         productTimestamp.setHours(0, 0, 0, 0)\n    //         currentDate.setHours(0, 0, 0, 0)\n\n    //         // Checking if current date is same as product time stamp\n    //         // After 1 day, this product entry will be invalid\n    //         if (currentDate - productTimestamp === 0) {\n    //           openModal = true\n    //         } else {\n    //           updateProduct = true;\n    //           createNewRecord = true;\n    //         }\n    //         break;\n    //       } else {\n    //         updateProduct = true;\n    //         createNewRecord = true;\n    //       }\n    //     } else {\n    //       createNewRecord = true;\n    //       break;\n    //     }\n    //   }\n    // } else {\n    //   createNewRecord = true;\n    // }\n\n    if (createNewRecord && !openModal && !onLoad) {\n      const newVisitedItemsData = {\n        rId: this.props.stateRegistryInfo.id,\n        pId: this.props.data.id,\n        email: this.state.email,\n        quantity: this.state.quantity,\n        timestamp: new Date()\n      }\n\n      let foundProduct = false\n      let newData = null\n      if (jsonVisitedItems) {\n        newData = jsonVisitedItems.map(item => {\n          if (Number(item.rId) === Number(this.props.stateRegistryInfo.id) && Number(item.pId) === Number(this.props.data.id)) {\n            foundProduct = true\n            return newVisitedItemsData\n          }\n          return item\n        })\n        if (!foundProduct) {\n          newData.push(newVisitedItemsData)\n        } else {\n          this.setState({\n            currentView: 3\n          })\n        }\n      }\n\n      // Updating localStorage\n      localStorage.setItem(LOCAL_STORAGE_GUEST_GIFT_BUY_KEY, JSON.stringify(updateProduct ? newData : [newVisitedItemsData]))\n\n      //Setting Redirection Store\n      this.props.dispatch(setGuestGiftsRedirectionInfo({ store: this.props.data.item?.store?.storeName }))\n\n      // Page refresh itself after 5 sec\n      setTimeout(async () => {\n        // Getting Update Product\n        await this.props.dispatch(clearViewGuestPaginationInfo())\n        await this.props.updateGuestViewProduct(this.props.stateRegistryInfo.urlSlug, this.props.stateAddedProducts.length, true)\n        this.modalCloseHandler()\n        this.props.dispatch(setGuestGiftsRedirectionInfo({}))\n      }, BUYNOW_REDIRECTION_TIME);\n      window.open(this.props.data.item.storeItemUrl, \"_blank\")\n\n    }\n    // If User is logged in\n    if (this.props.stateUserInfo.loggedIn) {\n      for (let item of [...this.props.data.purchasedRegistryItem]) {\n        if (item.isReserved && item.guestUser.email === this.props.stateUserInfo.user.email) {\n          this.setState({\n            currentView: 3\n          })\n          break;\n        }\n      }\n    }\n  }\n\n  removeProductFromList = () => {\n    let jsonVisitedItems = JSON.parse(localStorage.getItem(LOCAL_STORAGE_GUEST_GIFT_BUY_KEY))\n    if (jsonVisitedItems) {\n      let updatedProducts = jsonVisitedItems.filter(product => product.pId !== this.props.data.id)\n      localStorage.setItem(LOCAL_STORAGE_GUEST_GIFT_BUY_KEY, JSON.stringify(updatedProducts))\n    }\n  }\n\n  modalCloseHandler = () => {\n    this.setState({\n      errors: {}\n    })\n    this.props.close()\n  }\n\n  purchaseProduct = async () => {\n    // Marking product as purchased\n    let data = {\n      query: MARK_AS_PURCHASED_BY_GUEST,\n      variables: {\n        registryUrlSlug: this.props.stateRegistryInfo.urlSlug,\n        registryItemId: this.props.data.id,\n        isPurchased: true,\n        storeName: this.props.productBoughtAlreadyInfo.storeName,\n        purchasedQuantity: this.props.productBoughtAlreadyInfo.quantity,\n        // contributionAmount: null,\n        giftMessage: this.props.productBoughtAlreadyInfo.giftMessage,\n        orderNumber: this.props.productBoughtAlreadyInfo.orderNumber,\n        name: this.props.productBoughtAlreadyInfo.name,\n        email: this.props.productBoughtAlreadyInfo.email\n      },\n    }\n    await graphQL(data).then(async res => {\n      if (res.data.errors || res.data.error) {\n        // TODO: Add toast proper toast msg\n        console.log('Something went wrong-->', res.data.errors)\n        toast.error((\n          <p>Something went wrong</p>\n        ))\n      } else {\n        // Getting Update Product\n        await this.props.dispatch(clearViewGuestPaginationInfo())\n        await this.props.updateGuestViewProduct(this.props.stateRegistryInfo.urlSlug, this.props.stateAddedProducts.length, true)\n        this.removeProductFromList()\n        toast.success((\n          <p><b>{this.props.data.title}</b> Purchased!</p>\n        ))\n        this.modalCloseHandler()\n      }\n      this.props.dispatch(setLoader(false))\n    }).catch(err => {\n      // TODO: Add toast proper toast msg\n      console.log('Something went wrong-->', err)\n      toast.error((\n        <p>Something went wrong</p>\n      ))\n      this.props.dispatch(setLoader(false))\n    })\n  }\n\n  // Remove Reserved Product then Marking product as purchased\n  removeReservedAndAddProducts = async () => {\n    let email = null\n    let jsonVisitedItems = JSON.parse(localStorage.getItem(LOCAL_STORAGE_GUEST_GIFT_BUY_KEY))\n    // getting default value for email and quantity\n    if (jsonVisitedItems) {\n      for (let item of jsonVisitedItems) {\n        if (Number(item.rId) === Number(this.props.stateRegistryInfo.id)) {\n          if (Number(item.pId) === Number(this.props.data.id)) {\n            email = item.email\n            break\n          }\n        }\n      }\n    }\n    let emailFound = false\n    // If User is logged in\n    if (this.props.stateUserInfo.loggedIn && !email) {\n      for (let item of [...this.props.data.purchasedRegistryItem]) {\n        if (item.guestUser.email === this.props.stateUserInfo.user.email && item.isReserved) {\n          email = item.guestUser.email\n          emailFound = true\n        }\n      }\n    }\n    if (emailFound) {\n      let data = {\n        query: REMOVE_RESERVED_ITEM_GUEST,\n        variables: {\n          registryId: this.props.stateRegistryInfo.id,\n          registryItemId: this.props.data.id,\n          email: email ? email : this.props.productBoughtAlreadyInfo.email\n        },\n      }\n      this.props.dispatch(setLoader(true))\n      await graphQL(data).then(async res => {\n        if (res.data.errors || res.data.error) {\n          // TODO: Add toast proper toast msg\n          console.log('Something went wrong-->', res.data.errors)\n          toast.error((\n            <p>Something went wrong</p>\n          ))\n          this.props.dispatch(setLoader(false))\n        } else {\n          this.purchaseProduct()\n        }\n      }).catch(err => {\n        // TODO: Add toast proper toast msg\n        console.log('Something went wrong-->', err)\n        toast.error((\n          <p>Something went wrong</p>\n        ))\n        this.props.dispatch(setLoader(false))\n      })\n    }\n    else {\n      this.purchaseProduct()\n    }\n  }\n\n  submitDataHandler = async () => {\n    // Todo: API calls\n    // For Bought this gift already\n    if (this.state.isBoughtThisAlready) {\n      // Vaidating data\n      if (!this.validBoughtThisAlreadyData()) {\n        this.props.dispatch(setLoader(false))\n        return false\n      }\n      // Removing reversed product\n      this.removeReservedAndAddProducts()\n    }\n    if (this.state.currentView === 2) {\n      if (!this.validEmail()) {\n        this.props.dispatch(setLoader(false))\n        return false\n      }\n      // Reserveing product\n      let name = this.state.email.split('@')\n      let data = {\n        query: RESERVE_REGISTRY_ITEM_GUEST,\n        variables: {\n          registryId: this.props.stateRegistryInfo.id,\n          registryItemId: this.props.data.id,\n          isReserved: true,\n          isPurchased: false,\n          purchasedQuantity: Number(this.state.quantity),\n          name: name[0],\n          email: this.state.email\n        },\n      }\n      this.props.dispatch(setLoader(true))\n      await graphQL(data).then(async res => {\n        if (res.data.errors || res.data.error) {\n          // TODO: Add toast proper toast msg\n          console.log('Something went wrong-->', res.data.errors)\n          toast.error((\n            <p>Something went wrong</p>\n          ))\n        } else {\n          this.buyNowClickHandler()\n        }\n        this.props.dispatch(setLoader(false))\n      }).catch(err => {\n        // TODO: Add toast proper toast msg\n        console.log('Something went wrong-->', err)\n        toast.error((\n          <p>Something went wrong</p>\n        ))\n        this.props.dispatch(setLoader(false))\n      })\n    }\n    if (this.state.currentView < 5 && this.state.currentView !== 2) {\n      this.setState({\n        currentView: this.state.currentView + 1,\n      })\n    }\n  }\n\n  removeProductReservation = async () => {\n    let email = null\n    let jsonVisitedItems = JSON.parse(localStorage.getItem(LOCAL_STORAGE_GUEST_GIFT_BUY_KEY))\n    // getting default value for email and quantity\n    if (jsonVisitedItems) {\n      for (let item of jsonVisitedItems) {\n        if (Number(item.rId) === Number(this.props.stateRegistryInfo.id)) {\n          if (Number(item.pId) === Number(this.props.data.id)) {\n            email = item.email\n            break\n          }\n        }\n      }\n    }\n    if (this.props.stateUserInfo.loggedIn && !email) {\n      for (let item of [...this.props.data.purchasedRegistryItem]) {\n        if (item.guestUser.email === this.props.stateUserInfo.user.email && item.isReserved) {\n          email = item.guestUser.email\n        }\n      }\n    }\n    let data = {\n      query: REMOVE_RESERVED_ITEM_GUEST,\n      variables: {\n        registryId: this.props.stateRegistryInfo.id,\n        registryItemId: this.props.data.id,\n        email: email ? email : this.props.productBoughtAlreadyInfo.email\n      },\n    }\n    this.props.dispatch(setLoader(true))\n    await graphQL(data).then(async res => {\n      if (res.data.errors || res.data.error) {\n        // TODO: Add toast proper toast msg\n        console.log('Something went wrong-->', res.data.errors)\n        toast.error((\n          <p>Something went wrong</p>\n        ))\n      } else {\n        // Getting Update Product\n        await this.props.dispatch(clearViewGuestPaginationInfo())\n        await this.props.updateGuestViewProduct(this.props.stateRegistryInfo.urlSlug, this.props.stateAddedProducts.length, true)\n        this.removeProductFromList()\n        this.modalCloseHandler()\n        console.log('Removed From Reservation')\n      }\n      this.props.dispatch(setLoader(false))\n    }).catch(err => {\n      // TODO: Add toast proper toast msg\n      console.log('Something went wrong-->', err)\n      toast.error((\n        <p>Something went wrong</p>\n      ))\n      this.props.dispatch(setLoader(false))\n    })\n  }\n\n  copyAddress = (ev) => {\n    ev.preventDefault();\n    const el = document.createElement('textarea');\n    el.value = `\n    ${this.props.stateRegistryInfo.user.defaultAddress.address1},\n    ${this.props.stateRegistryInfo.user.defaultAddress.address2},\n    ${this.props.stateRegistryInfo.user.defaultAddress.city},\n    ${this.props.stateRegistryInfo.user.defaultAddress.province},\n    ${this.props.stateRegistryInfo.user.defaultAddress.country} ${this.props.stateRegistryInfo.user.defaultAddress.zip}\n    `;\n    document.body.appendChild(el);\n    el.select();\n    document.execCommand('copy');\n    document.body.removeChild(el);\n    toast.success(\"Copied to clipboard\");\n  }\n\n  setModalData = () => {\n    this.clearModalData()\n    this.setState({\n      modalTitle: this.props.title\n    })\n  }\n\n  clearModalData = () => {\n    this.modalBody = \"\"\n    this.modalTitleContent = \"\"\n    this.modalFooterButtons = \"\"\n    this.setState({\n      currentView: 1,\n      isBoughtThisAlready: false\n    })\n  }\n\n  render() {\n\n    let modalLeftView = null\n    let modalSecondaryBtn = (\n      !this.state.isBoughtThisAlready ?\n        <Button\n          variant=\"secondary\"\n          className=\"MA-gift-footer-btn px-3 py-1 font-medium text-body\"\n          onClick={() => this.iBoughtThisAlready()}\n        >I Bought This Already</Button> : null\n    )\n    let modalPrimaryBtn = null\n\n    if (this.state.currentView === 1) {\n      modalLeftView = (\n        <div className=\"col-12 col-md-7 mt-4\">\n          <div className=\"ml-3\">\n            <div className=\"row col\">\n              <div className=\"col\">\n                <p className=\"font-body font-medium\">Buy this gift for {this.props.stateRegistryInfo.user.firstName} {this.props.stateRegistryInfo.user.partnerUser ? 'and ' + this.props.stateRegistryInfo.user.partnerUser.firstName : ''}</p>\n                <p className=\"text-sm mt-1\">You will be able to buy this gift from {this.props.data.item.store.storeName}.</p>\n              </div>\n            </div>\n            <div className=\"row col mt-4\">\n              <div className=\"col m-a-input-container\">\n                <p className=\"text-sm font-medium add-gift-store-label\">Quantity</p>\n                <Counter\n                  className=\"mt-2\"\n                  counter={this.state.quantity}\n                  incrementHandler={this.incrementQuantity}\n                  decrementHandler={this.decrementQuantity}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      )\n      modalPrimaryBtn = (\n        <Button\n          variant=\"primary\"\n          className=\"MA-gift-footer-btn px-4 py-1 font-medium text-body guest-footer-btn\"\n          disabled={(this.state.isBoughtThisAlready && (this.props.productBoughtAlreadyInfo.name.length === 0 || this.props.productBoughtAlreadyInfo.email.length === 0)) || (this.props.isGroupGift && Number(this.state.amount)) === 0 ? true : false}\n          onClick={() => this.submitDataHandler()}\n        >{!this.state.isBoughtThisAlready ? `Buy On ${this.props.data.item.store.storeName}` : 'Save & Close'}</Button>\n      )\n    } else if (this.state.currentView === 2) {\n      modalLeftView = (\n        <div className=\"col-7 mt-4\">\n          <div className=\"ml-3\">\n            <div className=\"row col\">\n              <div className=\"col\">\n                <p className=\"font-body font-medium\">Whats your email address?</p>\n                <p className=\"text-sm mt-1\">Well reserve this gift to make sure no one else tries to buy it until we confitm if youve bought this.</p>\n              </div>\n            </div>\n            <div className=\"row col mt-4\">\n              <div className=\"col m-a-input-container\">\n                <p className=\"text-sm font-medium add-gift-store-label guest-view-required\">Email Address</p>\n                <input\n                  className={[\"w-100 mt-1 mb-0 px-2 py-1\", this.state.errors.email ? \"already-bought-input-error\" : \"\"].join(\" \")}\n                  type='text'\n                  placeholder='johndoe@email.com'\n                  value={this.state.email}\n                  onChange={(ev) => this.emailChangeHandler(ev)}\n                />\n                {this.state.errors.email ?\n                  <span\n                    className=\"text-sm already-bought-input-error-text\">{this.state.errors.email}</span>\n                  : null}\n              </div>\n            </div>\n            {this.props.stateRegistryInfo.user.defaultAddress ?\n              <div className=\"row col mt-4\">\n                <div className=\"col m-a-input-container\">\n                  <p className=\"text-sm font-medium add-gift-store-label\">Ship To Them Directly</p>\n                  <div className=\"text-body guest-address-section px-2 py-1 mt-1 d-flex\">\n                    <div>\n                      {this.props.stateRegistryInfo.user.defaultAddress.address1 ? <p>{this.props.stateRegistryInfo.user.defaultAddress.address1},</p> : null}\n                      {this.props.stateRegistryInfo.user.defaultAddress.address2 ? <p>{this.props.stateRegistryInfo.user.defaultAddress.address2},</p> : null}\n                      {this.props.stateRegistryInfo.user.defaultAddress.city ? <p>{this.props.stateRegistryInfo.user.defaultAddress.city},</p> : null}\n                      {this.props.stateRegistryInfo.user.defaultAddress.province ? <p>{this.props.stateRegistryInfo.user.defaultAddress.province},</p> : null}\n                      {this.props.stateRegistryInfo.user.defaultAddress.country ? <p>{this.props.stateRegistryInfo.user.defaultAddress.country} {this.props.stateRegistryInfo.user.defaultAddress.zip ? this.props.stateRegistryInfo.user.defaultAddress.zip : null}</p> : null}\n                    </div>\n                    <div className=\"ml-auto\"><a className=\"address-copy-link font-medium text-sm mt-1\" href=\"#\" onClick={(ev) => this.copyAddress(ev)}>Copy</a></div>\n                  </div>\n                </div>\n              </div> : null}\n            <div className=\"row col mt-4\">\n              <div className=\"col\">\n                <p className=\"text-sm mt-1\">Come back to M+A Registry to tell us if you bought this, so we can help keep track of all their gifts</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      )\n      modalPrimaryBtn = (\n        <Button\n          variant=\"primary\"\n          className=\"MA-gift-footer-btn px-4 py-1 font-medium text-body guest-footer-btn\"\n          disabled={this.state.email.length === 0 || (this.state.isBoughtThisAlready && (this.props.productBoughtAlreadyInfo.name.length === 0 || this.props.productBoughtAlreadyInfo.email.length === 0)) || (this.props.isGroupGift && Number(this.state.amount)) === 0 ? true : false}\n          onClick={() => this.submitDataHandler()}\n        >{!this.state.isBoughtThisAlready ? `Go To ${this.props.data.item.store.storeName}` : 'Save & Close'}</Button>\n      )\n    } else if (this.state.currentView === 3) {\n      modalLeftView = (\n        <div className=\"col-7 mt-4\">\n          <div className=\"ml-3\">\n            <div className=\"row col\">\n              <div className=\"col\">\n                <p className=\"font-body font-medium\">Did you buy this gift?</p>\n                <p className=\"text-sm mt-1\">Well reserve this gift to make sure no one else tries to buy it until we confitm if youve bought this.</p>\n              </div>\n            </div>\n            <div className=\"row col\">\n              <div className=\"col\">\n                <p className=\"text-sm mt-5\">\n                  Still want to buy? <a className=\"guest-link font-medium\" href={this.props.data.item.storeItemUrl} target=\"_blank\">Return to <span className=\"guest-store-name\">{this.props.data.item.store.storeName}</span></a>\n                </p>\n              </div>\n            </div>\n            {this.props.stateRegistryInfo.user.defaultAddress ?\n              <div className=\"row col mt-5\">\n                <div className=\"col m-a-input-container\">\n                  <p className=\"text-sm font-medium add-gift-store-label\">Ship To Them Directly</p>\n                  <div className=\"text-body guest-address-section px-2 py-1 mt-1 d-flex\">\n                    <div>\n                      {this.props.stateRegistryInfo.user.defaultAddress.address1 ? <p>{this.props.stateRegistryInfo.user.defaultAddress.address1},</p> : null}\n                      {this.props.stateRegistryInfo.user.defaultAddress.address2 ? <p>{this.props.stateRegistryInfo.user.defaultAddress.address2},</p> : null}\n                      {this.props.stateRegistryInfo.user.defaultAddress.city ? <p>{this.props.stateRegistryInfo.user.defaultAddress.city},</p> : null}\n                      {this.props.stateRegistryInfo.user.defaultAddress.province ? <p>{this.props.stateRegistryInfo.user.defaultAddress.province},</p> : null}\n                      {this.props.stateRegistryInfo.user.defaultAddress.country ? <p>{this.props.stateRegistryInfo.user.defaultAddress.country} {this.props.stateRegistryInfo.user.defaultAddress.zip ? this.props.stateRegistryInfo.user.defaultAddress.zip : null}</p> : null}\n                    </div>\n                    <div className=\"ml-auto\"><a className=\"address-copy-link font-medium text-sm mt-1\" href=\"#\" onClick={(ev) => this.copyAddress(ev)}>Copy</a></div>\n                  </div>\n                </div>\n              </div> : null}\n          </div>\n        </div>\n      )\n      modalPrimaryBtn = (\n        <Button\n          variant=\"primary\"\n          className=\"MA-gift-footer-btn px-4 py-1 font-medium text-body guest-footer-btn\"\n          disabled={(this.state.isBoughtThisAlready && (this.props.productBoughtAlreadyInfo.name.length === 0 || this.props.productBoughtAlreadyInfo.email.length === 0)) || (this.props.isGroupGift && Number(this.state.amount)) === 0 ? true : false}\n          onClick={!this.state.isBoughtThisAlready ? () => this.iBoughtThisAlready() : () => this.submitDataHandler()}\n        >{!this.state.isBoughtThisAlready ? 'Yes. I Bought It' : 'Save & Close'}</Button>\n      )\n      modalSecondaryBtn = (\n        <>\n          {!this.state.isBoughtThisAlready ?\n            <Button\n              variant=\"secondary\"\n              className=\"MA-gift-footer-btn px-3 py-1 font-medium text-body\"\n              onClick={() => this.removeProductReservation()}\n            >No, I Didnt</Button>\n            : null\n          }\n        </>\n      )\n    }\n\n    // Body for modal\n    let modalBody = (\n      <>\n        {/* Give M+A Gift Model Body */}\n        {!this.state.isBoughtThisAlready ?\n          <div className=\"row add-gift-another-store\">\n            <div className=\"col\">\n              <div className=\"row\">\n                <>\n                  <div className=\"col-12 col-md-5 py-4 add-gift-image-select\">\n                    <div className=\"mr-3\">\n                      <ProductDetailsModel data={this.props.data} />\n                    </div>\n                  </div>\n                  {modalLeftView}\n                </>\n              </div>\n            </div>\n          </div>\n          :\n          <AlreadyBoughtProduct\n            data={this.props.data}\n            validBoughtThisAlreadyData={this.validBoughtThisAlreadyData}\n            onFocusHandler={this.onFocusBoughtThisAlreadyHandler}\n            fieldErrors={this.state.errors} />\n        }\n      </>\n    )\n\n    // Modal buttons\n    let modalFooterButtons = (\n      <>\n        {modalSecondaryBtn}\n        {modalPrimaryBtn}\n      </>\n    )\n\n    return (\n      <>\n        <Modal\n          show={this.props.show}\n          updateModal={this.state.updateModal}\n          title={this.state.modalTitle}\n          titleContent={this.modalTitleContent}\n          footer={modalFooterButtons}\n          noBodyPadding={true}\n\n          closeModal={this.props.close}>\n          {modalBody}\n        </Modal>\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    stateRegistryInfo: state.guestView.info,\n    stateUserInfo: state.registry,\n    productBoughtAlreadyInfo: state.guestView.alreadyBoughtProduct,\n    stateAddedProducts: state.guestView.product\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(withRouter(GiveGiftFromAnotherStore));","import React, {useState} from 'react'\nimport \"./GuestViewCard.scss\";\nimport {\n  sortableHandle,\n} from 'react-sortable-hoc';\nimport {useSelector, useDispatch} from 'react-redux';\nimport Button from \"../../commons/components/button-component/ButtonComponent\";\nimport GiftStatusPill from \"../../commons/components/gift-status-pill/GiftStatusPill\";\nimport GiveMAGiftModel from \"modules/commons/components/give-MA-gift-model/GiveMAGiftModel\";\nimport {clearAlreadyBoughtProductInfo, clearCashContributedAlreadyInfo} from '../GuestViewAction';\nimport {M_A_STORE_NAME, LOCAL_STORAGE_GUEST_GIFT_BUY_KEY} from 'utils/constants';\nimport GiveGiftFromAnotherStore from \"modules/commons/components/give-gift-from-another-store/GiveGiftFromAnotherStore\";\nimport {formatPrice, productImageLoadErrorHandler, productImageLoadHandler} from \"../../../utils/commonFunction\";\nimport {ROUTES} from \"../../../utils/cdn-assets-links\";\n\n\nconst GuestViewCard = (props) => {\n\n  const dispatch = useDispatch();\n  const stateFilterApplied = useSelector(state => state.viewRegistry.viewFilterApplied.childFilter)\n  const stateRegistryInfo = useSelector(state => state.registry)\n  const stateGuestViewRegistry = useSelector(state => state.guestView.info)\n  const [showMAGiftmodel, setMAGiftModel] = useState(false)\n  const [showAnotherStoreGiftmodel, setAnotherStoreGiftmodel] = useState(false)\n  const [isGroupGift, setIsGroupGift] = useState(false)\n  const [isCashAcceptedOnly, setIsCashAcceptedOnly] = useState(false)\n  const [modelTitle, setModelTitle] = useState('')\n\n  const modalCloseHandler = () => {\n    dispatch(clearAlreadyBoughtProductInfo())\n    dispatch(clearCashContributedAlreadyInfo())\n    setMAGiftModel(false)\n    setAnotherStoreGiftmodel(false)\n  }\n\n  // Handle drag\n  // TODO: Change Draggable icon\n  const DragHandle = sortableHandle(() => <i\n    className={[\"ml-4 drag-icon m-a-popover m-a-popover-top-right\", (props.disabledDrag || stateFilterApplied.length !== 0) ? \"disabled-drag\" : \"\"].join(\" \")}>\n    <div className=\"m-a-popover-content drag-drop-popover w-auto px-3 py-2\">\n      <p className=\"text-sm font-weight-normal m-a-popover-content-desc\">Rearrange</p>\n    </div>\n  </i>);\n\n  const openModelHandler = () => {\n    // TODO: Conditions for different data model\n    // For ma product which is not Grop Gift\n    if (props.data.item.store.storeName === M_A_STORE_NAME && !props.data.isGroupGift) {\n      setMAGiftModel(true)\n    }\n    // For Group Gift\n    else if (props.data.isGroupGift) {\n      setIsGroupGift(true)\n      setMAGiftModel(true)\n    } else if (props.data.isCashAcceptedOnly) {\n      setIsCashAcceptedOnly(true)\n      setMAGiftModel(true)\n    } else if (props.data.item.store.storeName !== M_A_STORE_NAME) {\n      setAnotherStoreGiftmodel(true)\n    }\n    setModelTitle('Give this gift')\n    // modelTitle = 'Give This Gift'\n  }\n\n  let hasUserReservedProduct = false\n  // If non MA product and It's quatity are not still needed\n  if (props.data.item.store.storeName !== M_A_STORE_NAME && props.data.quantityStatus.reserved_quantity && props.data.quantityStatus.still_needed <= 0) {\n    // If your is login\n    if (stateRegistryInfo.loggedIn) {\n      for (let item of [...props.data.purchasedRegistryItem]) {\n        if (item.isReserved && item.guestUser.email === stateRegistryInfo.user.email) {\n          hasUserReservedProduct = true\n          break;\n        }\n      }\n    }\n  }\n  // Checking in Local storage\n  if (!hasUserReservedProduct && (props.data.item.store.storeName !== M_A_STORE_NAME && props.data.quantityStatus.reserved_quantity && props.data.quantityStatus.still_needed <= 0)) {\n    let jsonVisitedItems = JSON.parse(localStorage.getItem(LOCAL_STORAGE_GUEST_GIFT_BUY_KEY))\n    if (jsonVisitedItems && jsonVisitedItems.length) {\n      for (let product of [...props.data.purchasedRegistryItem]) {\n        for (let item of jsonVisitedItems) {\n          if (Number(item.rId) === Number(stateGuestViewRegistry.id) && Number(item.pId) === Number(props.data.id) && product.guestUser.email === item.email) {\n            hasUserReservedProduct = true\n            break;\n          }\n        }\n        if (hasUserReservedProduct) {\n          break;\n        }\n      }\n    }\n  }\n  // If MA product and It quatity are still needed\n  if (props.data.item.store.storeName === M_A_STORE_NAME || props.data.quantityStatus.still_needed > 0) {\n    hasUserReservedProduct = true\n  }\n\n\treturn (\n\t\t<>\n\t\t\t{/* {!(props.data.isPurchased || (props.data.isCashAcceptedOnly && (props.data.quantity === props.data.quantityStatus.purchased_quantity)) || (props.data.isGroupGift && (Math.floor(props.data.quantityStatus.total_contribution_amount / props.data.item.price) >= Number(props.data.quantity)))) ? */}\n\t\t\t\t<>\n\t\t\t\t\t<div className=\"guest-added-card py-5 pr-2\" onClick={hasUserReservedProduct && !props.hideDetails ? () => openModelHandler() : () => { }}>\n\t\t\t\t\t\t<div className=\"row pl-3\">\n\t\t\t\t\t\t\t<div className=\"col-6 col-md-3 col-xl-2 mb-3 mb-md-0 guest-card-image\">\n\t\t\t\t\t\t\t\t{props.data?.imageUrl ?\n\t\t\t\t\t\t\t\t\t<img className=\"product-img d-block mx-auto\" src={props.data?.imageUrl} alt={props.data?.title}\n\t\t\t\t\t\t\t\t\t\t\tonError={(ev) => productImageLoadErrorHandler(ev)}\n\t\t\t\t\t\t\t\t\t\t\tonLoad={(ev) => productImageLoadHandler(ev)}\n\t\t\t\t\t\t \t\t\t/>\n\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t<div className=\"guest-added-card-no-product-image\" />\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t{props.data.mostWanted ?\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName=\"d-flex align-items-center guest-must-have added-gift-must-have-btn px-1 guest-added-gift-must-have-active\">\n\t\t\t\t\t\t\t\t\t\t<i className=\"icon mr-1 d-block heart-fill\" />\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm added-gift-must-have-text\">Must Have</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t: <></>}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"col-12 col-md\">\n\t\t\t\t\t\t\t\t<h3>{props.data.title}</h3>\n\t\t\t\t\t\t\t\t{props.data.item.hideTotal || props.hideDetails ? null :\n\t\t\t\t\t\t\t\t\t<div className=\"d-flex mt-2\">\n\t\t\t\t\t\t\t\t\t\t<p className=\"\">{formatPrice(props.data.item.price)}</p>\n\t\t\t\t\t\t\t\t\t\t{/*/!* TODO: Add Strikeout price dynamic *!/*/}\n\t\t\t\t\t\t\t\t\t\t{props.data.item.compareAtPrice ? \n\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-sm my-auto ml-1 strike-through-price\">{formatPrice(props.data.item.compareAtPrice)}</div>\n\t\t\t\t\t\t\t\t\t\t\t:null}\n\t\t\t\t\t\t\t\t\t\t{/* {props.data.quantity > 1 ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"ml-4 text-body d-flex\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tQty:{props.data.quantity}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"quantity-mul-text\"> (${props.data.item.price} * {props.data.quantity})</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div> : <></>} */}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t{!props.hideDetails ?\n\t\t\t\t\t\t\t\t\t<div className=\"d-flex mt-2 flex-wrap align-items-end\">\n\t\t\t\t\t\t\t\t\t\t{props.data.quantityStatus.purchased_quantity && !props.data.item.isCashFund ?\n\t\t\t\t\t\t\t\t\t\t\t<GiftStatusPill className=\"mr-1\" variant=\"purchased\" text={props.data.quantityStatus.purchased_quantity + \" Purchased\"} />\n\t\t\t\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t\t\t\t\t{props.data.quantityStatus.reserved_quantity && !props.data.item.isCashFund ?\n\t\t\t\t\t\t\t\t\t\t\t<GiftStatusPill className=\"mr-1\" variant=\"reserved\" text={props.data.quantityStatus.reserved_quantity + \" Reserved\"} />\n\t\t\t\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t\t\t\t\t{props.data.quantityStatus.still_needed > 0 && !props.data.item.isCashFund ?\n\t\t\t\t\t\t\t\t\t\t\t<GiftStatusPill className=\"mr-1\" variant=\"default\" text={`${props.data.quantityStatus.still_needed} ${props.data.quantityStatus.purchased_quantity === 0 ? \" Requested\" : \" Still Needed\"}`} />\n\t\t\t\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t\t\t\t\t{props.data.isGroupGift ?\n\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"guest-toggle-pills px-1 mr-3 d-flex align-items-center mt-md-2 mt-lg-0\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<i className=\"guest-icon-active mr-1\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm guest-icon-text\">Group Gift</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t{props.data.item.hideTotal ? null :\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"mt-md-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm font-medium received-amount\">Received {formatPrice(Math.round((props.data.quantityStatus.total_contribution_amount % props.data.item.price) * 100) / 100)} </span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm total-amount\">of {formatPrice(Math.round(props.data.item.price * props.data.quantityStatus.still_needed * 100) / 100)}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"group-gift-background\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"group-gift-progress mw-100\" style={{ width: `${((props.data.quantityStatus.total_contribution_amount % props.data.item.price) * 100) / (props.data.item.price * props.data.quantity)}%` }} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t\t\t\t</div> \n\t\t\t\t\t\t\t\t: \n\t\t\t\t\t\t\t\t<div className=\"d-flex mt-2 flex-wrap align-items-end\">\n\t\t\t\t\t\t\t\t\t{(props.data.isGroupGift || props.data.quantityStatus.purchased_quantity) && !props.data.item.isCashFund ?\n\t\t\t\t\t\t\t\t\t\t<GiftStatusPill className=\"mr-1\" variant=\"purchased\" text={props.data.quantityStatus.purchased_quantity + \" Purchased\"} />\n\t\t\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t\t\t\t{props.data.quantityStatus.reserved_quantity && !props.data.item.isCashFund ?\n\t\t\t\t\t\t\t\t\t\t<GiftStatusPill className=\"mr-1\" variant=\"reserved\" text={props.data.quantityStatus.reserved_quantity + \" Reserved\"} />\n\t\t\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t\t\t\t{!props.data.item.hideTotal && props.data.item.isCashFund ? \n\t\t\t\t\t\t\t\t\t\t<GiftStatusPill className=\"mr-1\" variant=\"purchased\" text={formatPrice(props.data.quantityStatus.total_contribution_amount) + \" Received \"} />\n\t\t\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{hasUserReservedProduct && !props.hideDetails ?\n\t\t\t\t\t\t\t\t<div className={[\n\t\t\t\t\t\t\t\t\tprops.draggable ? \"col-12 col-md-4 give-this-gift-button-container\" : \"col-12 col-md-4 give-this-gift-button-container\",\n\t\t\t\t\t\t\t\t].join(\" \")}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className=\"d-flex align-items-baseline justify-content-end mr-1\">\n\t\t\t\t\t\t\t\t\t\t<Button variant=\"secondary\" className=\"give-this-gift-btn font-medium text-body py-1 px-3 mr-3\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => openModelHandler()}\n\t\t\t\t\t\t\t\t\t\t>Give This Gift</Button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div> : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</> \n\t\t\t\t{/* TODO use this if grey purchased card is needed :\n\t\t\t\t<div className=\"guest-purchased-card py-3 pl-6\">\n\t\t\t\t\t<p className=\"guest-purchased-card-title font-medium\">{props.data.title}</p>\n\t\t\t\t\t{props.data.quantityStatus.purchased_quantity ?\n\t\t\t\t\t\t<GiftStatusPill className=\"mr-1\" variant=\"purchased\" text={!props.data.item.isCashFund ? props.data.quantityStatus.purchased_quantity + \" Purchased\" : \"Purchased\"} />\n\t\t\t\t\t\t: null}\n\t\t\t\t</div>\n\t\t\t} */}\n\t\t\t{showMAGiftmodel ?\n\t\t\t\t<GiveMAGiftModel\n\t\t\t\t\tshow={showMAGiftmodel}\n\t\t\t\t\tclose={modalCloseHandler}\n\t\t\t\t\ttitle={modelTitle}\n\t\t\t\t\tdata={props.data}\n\t\t\t\t\tisGroupGift={isGroupGift}\n\t\t\t\t\tisCashAcceptedOnly={isCashAcceptedOnly}\n\t\t\t\t\tupdateGuestViewProduct={props.updateGuestViewProduct}\n\t\t\t\t/> : null}\n\n      {showAnotherStoreGiftmodel ?\n        <GiveGiftFromAnotherStore\n          show={showAnotherStoreGiftmodel}\n          close={modalCloseHandler}\n          title={modelTitle}\n          data={props.data}\n          updateGuestViewProduct={props.updateGuestViewProduct}\n        /> : null}\n    </>\n  )\n}\n\nexport default GuestViewCard","import React from \"react\";\nimport \"./GuestViewHeader.scss\";\nimport Button from \"../../../commons/components/button-component/ButtonComponent\";\nimport MoreOption from \"../../../commons/components/more-option/MoreOption\";\nimport { connect } from \"react-redux\";\nimport { toast } from 'react-toastify';\nimport { setguestViewRegistry } from \"modules/view-registry/ViewRegistryActions\";\nimport ShareRegistry from \"modules/view-registry/components/share-registry/ShareRegistry\";\n\nclass GuestViewHeader extends React.Component {\n\n  state = {\n    showEditRegistryDetail: false,\n    showShareRegistry: false\n  }\n\n  closeEditRegistryDetail = () => {\n    this.setState({ showEditRegistryDetail: false })\n  }\n\n  changeRegistryDetail = (ev) => {\n    ev.preventDefault();\n    this.setState({ showEditRegistryDetail: true })\n  }\n\n  handleDisableViewGuest = () => {\n    this.props.dispatch(setguestViewRegistry(false))\n  }\n\n  shareHandler = () => {\n    // this.props.dispatch(setguestViewRegistry(false))\n    this.setState({ showShareRegistry: true })\n  }\n\n  closeShareRegistry = () => {\n    this.setState({ showShareRegistry: false })\n  }\n\n  render() {\n    return (\n      <>\n        {this.props.isGuestViewRegistry ?\n          <div className=\"view-guest-header text-body py-2\">\n            <div className=\"container d-flex flex-wrap justify-content-between\">\n              <div className=\"d-flex align-items-center view-guest-link order-1 order-md-1 mb-2 mb-md-0\"\n                onClick={this.handleDisableViewGuest}>\n                <i className=\"icon-chevron-left view-guest-text mr-2\" />\n                <a className=\"view-guest-text\" tabindex=\"0\">Back To View Registry</a>\n              </div>\n              <div className=\"view-guest-text order-3 order-md-2 ml-4 ml-md-0\">This is how your guests will see your\n              registry\n              </div>\n              <div className=\"d-flex order-2 order-md-3\">\n                <div className=\"d-flex align-items-baseline guest-registry-status pr-3 mr-3 pl-0 pl-md-3\">\n                  <i className={this.props.stateRegistryInfo?.isPublic ? \"public-status-dot\" : \"private-status-dot\"} />\n                  <p\n                    className=\"registry-status-title ml-1\">{this.props.stateRegistryInfo?.isPublic ? \"Public\" : \"Private\"}</p>\n                </div>\n                <a className=\"view-guest-text view-guest-link mb-2 mb-md-0\"\n                  onClick={() => this.shareHandler()}>Share</a>\n              </div>\n            </div>\n          </div> : null\n        }\n\n        <div className=\"guest-view-registry-header mx-auto\" style={{ backgroundImage: 'url(' + this.props.stateGuestViewRegistry.image.image + ')' }}>\n\n          <div className=\"header-registry-detail\">\n            <div className=\"container my-4\">\n              <div className=\"row\">\n                <div className=\"col\">\n                  <div className=\"d-inline-block px-3 py-3 guest-registry-header-border\">\n                    <h2>{this.props.stateGuestViewRegistry.displayName ? this.props.stateGuestViewRegistry.displayName : \"\"}</h2>\n                    {this.props.stateGuestViewRegistry.greeting ?\n                      <p\n                        className=\"text-sm view-registry-header-greeting\">{this.props.stateGuestViewRegistry.greeting}</p>\n                      :\n                      null\n                    }\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <ShareRegistry\n          show={this.state.showShareRegistry}\n          closeShareRegistry={this.closeShareRegistry}\n          registryInfo={this.props.stateRegistryInfo}\n          hasNoProducts={this.props.stateAddedProducts.length <= 0}\n        />\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    stateRegistryInfo: state.registry.info,\n    stateGuestViewRegistry: state.guestView.info,\n    isGuestViewRegistry: state.viewRegistry.guestViewRegistry,\n    stateAddedProducts: state.myRegistry.addedProducts\n  }\n}\n\n\nexport default connect(\n  mapStateToProps\n)(GuestViewHeader);","import React from 'react';\nimport \"./GuestSortFilter.scss\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport { activeGuestSortFilter } from '../../GuestViewAction';\n\nconst GuestSortFilter = (props) => {\n\n  const dispatch = useDispatch()\n  const activeSortFilterState = useSelector(state => state.guestView.activeGuestSortFilter)\n  const filterContentRef = React.createRef();\n\n  const toggleFilterContent = () => {\n    filterContentRef.current.classList.toggle(\"show\");\n    filterContentRef.current.classList.remove(\"hide-filter-content\");\n  }\n\n\n  const handleSortSelection = (sortItem) => {\n    dispatch(activeGuestSortFilter(sortItem))\n    filterContentRef.current.classList.toggle(\"show\");\n    filterContentRef.current.classList.add(\"hide-filter-content\");\n  }\n\n  const sortByList = [\n    {\n      sortId: 1,\n      sortTitle: 'Featured'\n    },\n    {\n      sortId: 2,\n      sortTitle: 'Price: Low to High'\n    },\n    {\n      sortId: 3,\n      sortTitle: 'Price: High to Low'\n    }\n  ]\n\n  const dropdownClickHandler = (ev) => {\n    // ev.stopPropagation()\n    let option = document.querySelector(\"#guest-registry-sort-content\");\n    if (option && option.classList.contains(\"remove-sort-dropdown\")) {\n      let toggle = document.querySelector(\"#guest-view-sort-toggle\");\n      if (toggle){\n        toggle.blur()\n      }\n      // if (sortBtnRef.current){\n      //   sortBtnRef.current.blur()\n      // }\n      option.classList.remove(\"remove-sort-dropdown\");\n    } else {\n      option.classList.add(\"remove-sort-dropdown\");\n      if (option && option.classList.contains(\"hide-filter-content\")) {\n        option.classList.remove(\"hide-filter-content\")\n      }\n    }\ntoggleFilterContent()\n  }\n\n  const removeExtraDropdownClass = () => {\n    let option = document.querySelector(\"#guest-registry-sort-content\");\n    if (option.classList.contains(\"remove-sort-dropdown\")) {\n      option.classList.remove(\"remove-sort-dropdown\");\n    }\n  }\n\n  return (\n    <div className=\"d-flex guest-sort-section\">\n      <div className=\"sort-section-filter mr-3\">\n      <a tabIndex={1} className=\"sort-filter-btn px-2 w-100 d-flex justify-content-between align-items-center py-1\"\n         id=\"guest-view-sort-toggle\"\n         onClick={(ev) => dropdownClickHandler(ev)}\n         onBlur={removeExtraDropdownClass}>\n        <span className=\"font-body selected-sort-text text-body\">{activeSortFilterState.sortTitle}</span>\n        <i className=\"icon-filter-1 icon-chevron-down\" />\n      </a>\n      <div className=\"filter-content\" ref={filterContentRef} id=\"guest-registry-sort-content\">\n        <div className=\"d-flex flex-column\">\n          {sortByList.map(sortItem => {\n            return (\n              <div className=\"filter-item py-2 px-2\" key={\"sortid-\" + sortItem.sortId} onClick={() => handleSortSelection(sortItem)}>\n                <div className=\"text-sm\">{sortItem.sortTitle}</div>\n              </div>\n            );\n          })}\n          </div>\n        </div>\n      </div>\n      <i className={[\"guest-layout-icon-btn icon-list pl-0\", props.isListViewActive ? \"active-layout-guest\" : \"\"].join(\" \")} onClick={() => props.setGuestLayout(true)} />\n      <i className={[\"guest-layout-icon-btn icon-tiles pl-0\", !props.isListViewActive ? \"active-layout-guest\" : \"\"].join(\" \")} onClick={() => props.setGuestLayout(false)} />\n    </div>\n  )\n}\n\nexport default GuestSortFilter;\n","import React, {useState, useEffect} from 'react';\nimport \"./GuestSortFilter.scss\";\nimport {useSelector, useDispatch} from 'react-redux';\nimport {activeGuestSortFilter} from '../../GuestViewAction';\nimport RadioButton from \"../../../commons/components/radio-button/RadioButton\";\n\nconst GuestSortFilterMobile = () => {\n\n\tconst dispatch = useDispatch()\n\tconst activeSortFilterState = useSelector(state => state.guestView.activeGuestSortFilter)\n\tconst [currentSort, setCurrentSort] = useState(1)\n\n\tuseEffect(() => {\n\t\tsetCurrentSort(activeSortFilterState.sortId);\n\t})\n\n\tconst handleSortSelection = (sortItem) => {\n\t\tsetCurrentSort(sortItem.sortId)\n\t\tdispatch(activeGuestSortFilter(sortItem))\n\t}\n\n\tconst sortByList = [\n\t\t{\n\t\t\tsortId: 1,\n\t\t\tsortTitle: 'Featured'\n\t\t},\n\t\t{\n\t\t\tsortId: 2,\n\t\t\tsortTitle: 'Price: Low to High'\n\t\t},\n\t\t{\n\t\t\tsortId: 3,\n\t\t\tsortTitle: 'Price: High to Low'\n\t\t}\n\t]\n\n\treturn (\n\t\t<div className=\"sort-section-filter w-100\">\n\t\t\t<div className=\"text-body filter-title pt-5 d-flex\">Sort By</div>\n\t\t\t<div className=\"w-100 mt-5 text-sm mb-3\">\n\t\t\t\t{sortByList.map(sortItem => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className=\"mt-1\">\n\t\t\t\t\t\t\t<RadioButton\n\t\t\t\t\t\t\t\tcenterText=\"true\"\n\t\t\t\t\t\t\t\ttextClass=\"text-body\"\n\t\t\t\t\t\t\t\tname=\"guestViewSortFilter\"\n\t\t\t\t\t\t\t\tkey={sortItem.sortId}\n\t\t\t\t\t\t\t\tid={`sort-${sortItem.sortId}`}\n\t\t\t\t\t\t\t\tchecked={sortItem.sortId === currentSort ? true : null}\n\t\t\t\t\t\t\t\tchangeHandler={() => handleSortSelection(sortItem)} >\n\t\t\t\t\t\t\t\t{sortItem.sortTitle}\n\t\t\t\t\t\t\t</RadioButton>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default GuestSortFilterMobile;\n","import React, { useState } from 'react'\nimport \"./GuestFilter.scss\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setChildGuestViewFilter, clearGuestViewFilter, setGuestViewFilterCategory, setGuestViewProducts, clearViewGuestPaginationInfo } from '../../GuestViewAction';\nimport { FILTERS } from \"utils/constants\";\nimport GuestSortFilterMobile from \"../guest-sort-filter/GuestSortFilterMobile\";\n\nconst GuestFilterMobile = (props) => {\n\n\tconst dispatch = useDispatch()\n\tlet tempParentFilterId = useSelector(state => state.guestView.guestViewFilterApplied.parentFilter)\n\tlet tempChildFilterIds = useSelector(state => state.guestView.guestViewFilterApplied.childFilter)\n\tlet stateAddedProducts = useSelector(state => state.guestView.product)\n\tconst stateCategoriesInfo = useSelector(state => state.guestView.checkList)\n\tlet stateFilterCategories = useSelector(state => state.guestView.guestFilterCategory)\n\tlet [filterCategoryLimit, setFilterCategoryLimit] = useState([])\n\n\tconst childChangeHandler = async (childId, parentId) => {\n\n\t\tif (parentId !== tempParentFilterId) {\n\t\t\tif (tempChildFilterIds.length > 0) {\n\t\t\t\tawait dispatch(setChildGuestViewFilter([]))\n\t\t\t}\n\t\t}\n\n\t\tconst childIndex = tempChildFilterIds.indexOf(childId)\n\n\t\tif (childIndex === -1) {\n\t\t\tawait dispatch(setChildGuestViewFilter([...tempChildFilterIds, childId]))\n\t\t} else {\n\t\t\tlet newChildArray = [...tempChildFilterIds]\n\t\t\tnewChildArray.splice(childIndex, 1)\n\t\t\tawait dispatch(setChildGuestViewFilter(newChildArray))\n\t\t}\n\t\tawait dispatch(clearViewGuestPaginationInfo())\n\t\tawait dispatch(setGuestViewProducts([]))\n\t\tprops.setFilterhandler()\n\t}\n\n\tconst changeParentLimitHandler = (parentFilterID) => {\n\t\tlet limitLength = null\n\t\tlet filterCategory = [...stateFilterCategories].map(parentFilter => {\n\t\t\tif (parentFilter.id === parentFilterID) {\n\t\t\t\tparentFilter.limit = parentFilter.child.length\n\t\t\t\tlimitLength = parentFilter.child.length\n\t\t\t}\n\t\t\treturn parentFilter\n\t\t})\n\t\tdispatch(setGuestViewFilterCategory(filterCategory))\n\n\t\tlet isFound = false\n\t\tlet newFilterCateoryLimit = [...filterCategoryLimit].map(categorylimit => {\n\t\t\tif (categorylimit.id === parentFilterID) {\n\t\t\t\tcategorylimit.limit = limitLength\n\t\t\t\tisFound = true\n\t\t\t\treturn categorylimit\n\t\t\t}\n\t\t\treturn categorylimit\n\t\t})\n\n\t\tprops.categoryFilterLimit(newFilterCateoryLimit);\n\t\tif (!isFound) {\n\t\t\tnewFilterCateoryLimit.push({ 'id': parentFilterID, 'limit': limitLength })\n\t\t}\n\t\tsetFilterCategoryLimit(newFilterCateoryLimit)\n\t}\n\n\treturn (\n\t\t<div className=\"view-filter\">\n\t\t\t<div className=\"view-filter-heading pb-1 d-flex align-items-baseline\">\n\t\t\t\t<GuestSortFilterMobile/>\n\t\t\t</div>\n\t\t\t<div className=\"d-flex flex-column\">\n\t\t\t\t{[...stateFilterCategories].map(parentFilter => (\n\t\t\t\t\t<div className=\"filter-item\" key={\"filter-\" + parentFilter.id}>\n\t\t\t\t\t\t{/* Parent filter */}\n\t\t\t\t\t\t<div className=\"text-body filter-title pt-5 d-flex\">{parentFilter.display}</div>\n\n\t\t\t\t\t\t{/* Child filter */}\n\t\t\t\t\t\t{parentFilter.child ? (\n\t\t\t\t\t\t\t<div className=\"d-flex flex-column mt-2\" key={\"child-filter-\" + parentFilter.id}>\n\t\t\t\t\t\t\t\t<div className=\"mt-3 fliter-checkbox-section\">\n\t\t\t\t\t\t\t\t\t{parentFilter.child.map((childFilter, index) => (\n\t\t\t\t\t\t\t\t\t\tchildFilter.count > 0 ?\n\t\t\t\t\t\t\t\t\t\t\tindex < (parentFilter.limit ? parentFilter.limit : parentFilter.child.length) ?\n\t\t\t\t\t\t\t\t\t\t\t\t<label className=\"view-fliter-checkbox d-flex align-items-center mb-4\" key={childFilter.id}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"checkbox__input mr-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"checkbox\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname={childFilter.display}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={childFilter.display}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchecked={tempChildFilterIds.includes(childFilter.id) ? \"checked\" : \"\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={() => childChangeHandler(childFilter.id, parentFilter.id)} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"checkbox__control d-flex justify-content-center align-items-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i className=\"icon-check\"></i>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"radio__label text-sm\">{childFilter.display} {childFilter.count > 0 ? <>({childFilter.count})</> : null}</p>\n\t\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t\t\t\t\t: null\n\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t{(parentFilter.limit && (parentFilter.limit !== parentFilter.child.length) && (parentFilter.child.length - parentFilter.limit) > 0) ?\n\t\t\t\t\t\t\t\t\t\t<div className=\"filter-clear-all text-sm font-medium ml-4 pb-3\" onClick={() => changeParentLimitHandler(parentFilter.id)}>Show {parentFilter.child.length - parentFilter.limit} more</div>\n\t\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)\n\t\t\t\t\t\t\t: null}\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default GuestFilterMobile;\n","import React from 'react';\nimport { connect } from \"react-redux\";\nimport GuestSortFilter from \"../guest-sort-filter/GuestSortFilter\";\nimport './GuestSortSection.scss';\nimport { clearGuestViewFilter, setChildGuestViewFilter, setGuestViewProducts, clearViewGuestPaginationInfo } from \"../../GuestViewAction\";\nimport FilterItemChip from \"modules/my-registry/components/filter/filter-item-chip/FilterItemChip\";\nimport Button from \"../../../commons/components/button-component/ButtonComponent\";\nimport Modal from \"../../../commons/components/modal-component/ModalComponent\";\nimport GuestFilterMobile from \"../guest-filter/GuestFilterMobile\";\n\nclass GuestSortSection extends React.Component {\n\n  state = {\n    showGuestFilterModal: false,\n    guestChildFilter: [],\n    guestFilterProducts: [],\n    totalFilteredProducts: null\n  }\n\n  // Filter chips close handler\n  deleteChipHandler = async (isParent, childId) => {\n    if (isParent) {\n      await this.props.dispatch(clearGuestViewFilter())\n    } else {\n      const newChildArray = this.props.stateFilterApplied.childFilter.filter(element => {\n        return element !== childId\n      })\n      await this.props.dispatch(setChildGuestViewFilter(newChildArray))\n    }\n    await this.props.dispatch(clearViewGuestPaginationInfo())\n    await this.props.dispatch(setGuestViewProducts([]))\n    await this.props.setFilterhandler()\n  }\n\n  // Filter chips\n  getFilterChips = (stateFilterApplied) => {\n    let filterChips = {}\n    if (stateFilterApplied) {\n      let allChild = []\n      for (let filterCat of this.props.stateFilterCategory) {\n        for (let childCat of filterCat.child) {\n          allChild.push(childCat)\n        }\n      }\n      if (stateFilterApplied.childFilter) {\n        filterChips.childFilter = [...stateFilterApplied.childFilter].map(item => {\n          let finalAllChild = [...allChild].find(element => {\n            return element.id === item\n          })\n          return finalAllChild\n        })\n      }\n    }\n    return filterChips;\n  }\n\n  //Clear filter state\n  clearFilterHandler = async (ev) => {\n    ev.preventDefault()\n    await this.props.dispatch(clearGuestViewFilter())\n    await this.props.dispatch(clearViewGuestPaginationInfo())\n    await this.props.dispatch(setGuestViewProducts([]))\n    await this.props.setFilterhandler()\n  }\n  \n  //Clear Filter For Mobile\n  clearGuestFilterHandlerMobile = async () => {\n    await this.props.dispatch(clearGuestViewFilter())\n    await this.props.dispatch(clearViewGuestPaginationInfo())\n    await this.props.dispatch(setGuestViewProducts([]))\n    await this.props.setFilterhandler()\n  }\n\n  //filter previous states\n  viewGuestFilterStateHandler = () => {\n    this.setState({guestFilterProducts: this.props.guestFilterProducts})\n    this.setState({guestChildFilter: this.props.stateFilterApplied.childFilter});\n    this.setState({showGuestFilterModal: true});\n    this.setState({totalFilteredProducts: this.props.currTotalCount})\n  }\n\n  doneGuestViewFilterModal = () => {\n    this.setState({showGuestFilterModal: false})\n  }\n  \n  clearGuestViewFilterModal = () =>{\n    this.clearGuestFilterHandlerMobile()\n    this.doneGuestViewFilterModal()\n  }\n  \n  closeGuestViewFilterModal = () =>{\n    this.props.changeTotalCount(this.state.totalFilteredProducts);\n    this.props.dispatch(setGuestViewProducts([...this.state.guestFilterProducts]))\n    this.props.dispatch(setChildGuestViewFilter([...this.state.guestChildFilter]));\n    this.setState({showGuestFilterModal: false})\n  }\n  \n  //open modal\n  modalFooterButtons = (\n    <>\n      <Button\n        variant=\"secondary\"\n        className=\"px-3 py-1 font-weight-bold font-medium text-body\"\n        disabled={false}\n        onClick={this.clearGuestViewFilterModal}\n      >Clear</Button>\n      <Button\n        variant=\"primary\"\n        className=\"px-4 py-1 font-weight-bold font-medium text-body\"\n        disabled={false}\n        onClick={this.doneGuestViewFilterModal}\n      >Done</Button>\n    </>\n  )\n\n  render() {\n    let filterChips = this.getFilterChips(this.props.stateFilterApplied)\n\n    return (\n      <>\n        <div className=\"row\">\n          <div className=\"col\">\n            <h4 className=\"font-weight-bold mr-2 filter-section-total-items\">{this.props.productCount} {this.props.productCount === 1 ? \"Gift\" : \"Gifts\"}</h4>\n          </div>\n          <div className=\"col-5 filter-sort-section d-none d-lg-inline-block\">\n            <div className=\"d-flex justify-content-end\">\n              <div className=\"text-sm sort-by-text mr-2 align-self-center\">Sort by</div>\n              <GuestSortFilter setGuestLayout={this.props.setGuestLayout} isListViewActive={this.props.isListViewActive}/>\n            </div>\n          </div>\n          <div className=\"d-inline-block d-lg-none\">\n            <Button className=\"px-1 pt-1 px-lg-3 d-inline-block d-lg-none mr-1\" variant=\"secondary\" onClick={this.viewGuestFilterStateHandler}>\n              <i className=\"icon-filter-1 filter-icon\" />\n            </Button>\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col-7\">\n            <div className=\"filtered-items\">\n              {filterChips.childFilter ?\n                filterChips.childFilter.map(item =>\n                  item ?\n                    <FilterItemChip\n                      text={item.display}\n                      className=\"mr-2\"\n                      key={filterChips.id + \"-\" + item.id}\n                      deleteHandler={() => this.deleteChipHandler(false, item.id)} /> : null)\n                : null}\n              {this.props.stateFilterApplied.childFilter.length > 0 ?\n                <a className=\"font-medium text-sm filter-clear-link\" href=\"#\" tabindex=\"0\"\n                  onClick={(ev) => this.clearFilterHandler(ev)}>Clear all</a>\n                : null}\n            </div>\n          </div>\n        </div>\n        <Modal\n          show={this.state.showGuestFilterModal}\n          title={\"Filters\"}\n          closeModal={this.closeGuestViewFilterModal}\n          footer={this.modalFooterButtons}\n          >\n          <GuestFilterMobile setFilterhandler={this.props.setFilterhandler} categoryFilterLimit={this.props.categoryFilterLimit}/>\n        </Modal>\n      </>\n    )\n  }\n}\n\n\nconst mapStateToProps = state => {\n  return {\n    stateViewRegistryProducts: state.guestView.product,\n    stateActiveSortFilter: state.guestView.activeGuestSortFilter,\n    stateGuestViewRegistry: state.guestView.guestViewRegistry,\n    stateRegistryInfo: state.guestView.info,\n    stateFilterApplied: state.guestView.guestViewFilterApplied,\n    stateFilterCategory: state.guestView.guestFilterCategory\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(GuestSortSection);\n","import React, { useState } from 'react'\nimport \"./GuestFilter.scss\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setChildGuestViewFilter, clearGuestViewFilter, setGuestViewFilterCategory, setGuestViewProducts, clearViewGuestPaginationInfo } from '../../GuestViewAction';\nimport { FILTERS } from \"utils/constants\";\n\nconst GuestFilter = (props) => {\n\n\tconst dispatch = useDispatch()\n\tlet tempParentFilterId = useSelector(state => state.guestView.guestViewFilterApplied.parentFilter)\n\tlet tempChildFilterIds = useSelector(state => state.guestView.guestViewFilterApplied.childFilter)\n\tlet stateAddedProducts = useSelector(state => state.guestView.product)\n\tconst stateCategoriesInfo = useSelector(state => state.guestView.checkList)\n\tlet stateFilterCategories = useSelector(state => state.guestView.guestFilterCategory)\n\tlet [filterCategoryLimit, setFilterCategoryLimit] = useState([])\n\n\tconst childChangeHandler = async (childId, parentId) => {\n\n\t\tif (parentId !== tempParentFilterId) {\n\t\t\tif (tempChildFilterIds.length > 0) {\n\t\t\t\tawait dispatch(setChildGuestViewFilter([]))\n\t\t\t}\n\t\t}\n\n\t\tconst childIndex = tempChildFilterIds.indexOf(childId)\n\n\t\tif (childIndex === -1) {\n\t\t\tawait dispatch(setChildGuestViewFilter([...tempChildFilterIds, childId]))\n\t\t} else {\n\t\t\tlet newChildArray = [...tempChildFilterIds]\n\t\t\tnewChildArray.splice(childIndex, 1)\n\t\t\tawait dispatch(setChildGuestViewFilter(newChildArray))\n\t\t}\n\t\tawait dispatch(clearViewGuestPaginationInfo())\n\t\tawait dispatch(setGuestViewProducts([]))\n\t\tprops.setFilterhandler()\n\t}\n\n\tconst clearClickHandler = async () => {\n\t\tawait dispatch(clearGuestViewFilter())\n\t\tawait dispatch(clearViewGuestPaginationInfo())\n\t\tawait dispatch(setGuestViewProducts([]))\n\t\tawait props.setFilterhandler()\n\t}\n\n\tconst changeParentLimitHandler = (parentFilterID) => {\n\t\tlet limitLength = null\n\t\tlet filterCategory = [...stateFilterCategories].map(parentFilter => {\n\t\t\tif (parentFilter.id === parentFilterID) {\n\t\t\t\tparentFilter.limit = parentFilter.child.length\n\t\t\t\tlimitLength = parentFilter.child.length\n\t\t\t}\n\t\t\treturn parentFilter\n\t\t})\n\t\tdispatch(setGuestViewFilterCategory(filterCategory))\n\n\t\tlet isFound = false\n\t\tlet newFilterCateoryLimit = [...filterCategoryLimit].map(categorylimit => {\n\t\t\tif (categorylimit.id === parentFilterID) {\n\t\t\t\tcategorylimit.limit = limitLength\n\t\t\t\tisFound = true\n\t\t\t\treturn categorylimit\n\t\t\t}\n\t\t\treturn categorylimit\n\t\t})\n\n\t\tprops.categoryFilterLimit(newFilterCateoryLimit);\n\t\tif (!isFound) {\n\t\t\tnewFilterCateoryLimit.push({ 'id': parentFilterID, 'limit': limitLength })\n\t\t}\n\t\tsetFilterCategoryLimit(newFilterCateoryLimit)\n\t}\n\n\treturn (\n\t\t<div className=\"view-filter\">\n\t\t\t<div className=\"view-filter-heading pb-1 d-flex align-items-baseline\">\n\t\t\t\t<h4 className=\"font-weight-bold\">Filters</h4>\n\t\t\t\t{tempChildFilterIds.length !== 0 ?\n\t\t\t\t\t<a tabindex='0' className=\"filter-clear-all text-sm font-medium ml-auto\" onClick={() => clearClickHandler()}>Clear all</a> : null\n\t\t\t\t}\n\t\t\t</div>\n\t\t\t<div className=\"d-flex flex-column\">\n\t\t\t\t{[...stateFilterCategories].map(parentFilter => (\n\t\t\t\t\t<div className=\"filter-item\" key={\"filter-\" + parentFilter.id}>\n\t\t\t\t\t\t{/* Parent filter */}\n\t\t\t\t\t\t<div className=\"text-body filter-title pt-5 d-flex\">{parentFilter.display}</div>\n\n\t\t\t\t\t\t{/* Child filter */}\n\t\t\t\t\t\t{parentFilter.child ? (\n\t\t\t\t\t\t\t<div className=\"d-flex flex-column mt-2\" key={\"child-filter-\" + parentFilter.id}>\n\t\t\t\t\t\t\t\t<div className=\"mt-3 fliter-checkbox-section\">\n\t\t\t\t\t\t\t\t\t{parentFilter.child.map((childFilter, index) => (\n\t\t\t\t\t\t\t\t\t\tchildFilter.count > 0 ?\n\t\t\t\t\t\t\t\t\t\t\tindex < (parentFilter.limit ? parentFilter.limit : parentFilter.child.length) ?\n\t\t\t\t\t\t\t\t\t\t\t\t<label className=\"view-fliter-checkbox d-flex align-items-center mb-4\" key={childFilter.id}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"checkbox__input mr-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"checkbox\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname={childFilter.display}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={childFilter.display}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchecked={tempChildFilterIds.includes(childFilter.id) ? \"checked\" : \"\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={() => childChangeHandler(childFilter.id, parentFilter.id)} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"checkbox__control d-flex justify-content-center align-items-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i className=\"icon-check\"></i>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"radio__label text-sm\">{childFilter.display} {childFilter.count > 0 ? <>({childFilter.count})</> : null}</p>\n\t\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t\t\t\t\t: null\n\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t{(parentFilter.limit && (parentFilter.limit !== parentFilter.child.length) && (parentFilter.child.length - parentFilter.limit) > 0) ?\n\t\t\t\t\t\t\t\t\t\t<div className=\"filter-clear-all text-sm font-medium ml-4 pb-3\" onClick={() => changeParentLimitHandler(parentFilter.id)}>Show {parentFilter.child.length - parentFilter.limit} more</div>\n\t\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)\n\t\t\t\t\t\t\t: null}\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default GuestFilter;\n","import React from \"react\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport 'react-toastify/dist/ReactToastify.css';\nimport './Toast.scss';\n\nconst Toast = () => {\n  const closeToastMessage = (parentId) => {\n    toast.dismiss(parentId);\n  }\n\n  return (\n    <ToastContainer\n      position=\"top-center\"\n      className=\"m-a-toast-container\"\n      toastClassName=\"m-a-toast\"\n      autoClose={4000}\n      hideProgressBar={true}\n      newestOnTop={true}\n      draggable={false}\n      closeOnClick={false}\n      closeButton={<i className=\"icon-close m-a-toast-close\" onClick={(event) => closeToastMessage(event.target.parentElement.id)} />}\n    />\n  )\n}\n\nexport default Toast;","import React from \"react\";\nimport \"./RedirectionScreen.scss\";\n\nconst RedirectionScreen = props => {\n  document.body.style.overflow=\"auto\";\n  return (\n    <div className=\"track-gifts-redirection-screen text-center pt-12 mx-auto\">\n      <h1 className=\"track-gifts-redirection-screen-title mx-auto\">{`Youre on your way to ${props.store}`}</h1>\n      <h4 className=\"mt-1 track-gifts-redirection-screen-desc mx-auto\">Dont forget to come back to Monica+Andy to tell us if you bought this gift. Well make sure it doesnt get bought twice.</h4>\n    </div>\n  )\n}\n\nexport default RedirectionScreen;","import React from \"react\";\nimport \"./ProductLoader.scss\";\n\nconst ProductLoader = () => {\n  return (\n    <div className=\"loader-spinner d-flex mx-auto justify-content-center align-items-center py-5\">\n      <div className=\"spinner-border MA-guest-spinner\" role=\"status\">\n        <span className=\"sr-only ml-2\">Loading more gifts...</span>\n      </div>\n      <span className=\"MA-guest-spinner-text font-medium text-sm ml-2\">Loading more gifts...</span>\n    </div>\n  )\n}\n\nexport default ProductLoader;","import React, { useState } from \"react\";\nimport \"./GuestTileCard.scss\";\nimport { formatPrice, productImageLoadErrorHandler, productImageLoadHandler } from \"utils/commonFunction\";\nimport GiftStatusPill from \"modules/commons/components/gift-status-pill/GiftStatusPill\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport Button from \"modules/commons/components/button-component/ButtonComponent\";\nimport GiveMAGiftModel from \"modules/commons/components/give-MA-gift-model/GiveMAGiftModel\";\nimport { M_A_STORE_NAME, LOCAL_STORAGE_GUEST_GIFT_BUY_KEY } from 'utils/constants';\nimport GiveGiftFromAnotherStore from \"modules/commons/components/give-gift-from-another-store/GiveGiftFromAnotherStore\";\nimport { clearAlreadyBoughtProductInfo, clearCashContributedAlreadyInfo } from '../../GuestViewAction';\n\n\nconst GuestTileCard = (props) => {\n\n  const dispatch = useDispatch();\n  const stateRegistryInfo = useSelector(state => state.registry)\n  const stateGuestViewRegistry = useSelector(state => state.guestView.info)\n  const [showMAGiftmodel, setMAGiftModel] = useState(false)\n  const [showAnotherStoreGiftmodel, setAnotherStoreGiftmodel] = useState(false)\n  const [isGroupGift, setIsGroupGift] = useState(false)\n  const [isCashAcceptedOnly, setIsCashAcceptedOnly] = useState(false)\n  const [modelTitle, setModelTitle] = useState('')\n\n  const modalCloseHandler = () => {\n    dispatch(clearAlreadyBoughtProductInfo())\n    dispatch(clearCashContributedAlreadyInfo())\n    setMAGiftModel(false)\n    setAnotherStoreGiftmodel(false)\n  }\n\n  const openModelHandler = () => {\n    // TODO: Conditions for different data model\n    // For ma product which is not Grop Gift\n    if (props.data.item.store.storeName === M_A_STORE_NAME && !props.data.isGroupGift) {\n      setMAGiftModel(true)\n    }\n    // For Group Gift\n    else if (props.data.isGroupGift) {\n      setIsGroupGift(true)\n      setMAGiftModel(true)\n    } else if (props.data.isCashAcceptedOnly) {\n      setIsCashAcceptedOnly(true)\n      setMAGiftModel(true)\n    } else if (props.data.item.store.storeName !== M_A_STORE_NAME) {\n      setAnotherStoreGiftmodel(true)\n    }\n    setModelTitle('Give this gift')\n    // modelTitle = 'Give This Gift'\n  }\n\n  let hasUserReservedProduct = false\n  // If non MA product and It's quatity are not still needed\n  if (props.data.item.store.storeName !== M_A_STORE_NAME && props.data.quantityStatus.reserved_quantity && props.data.quantityStatus.still_needed <= 0) {\n    // If your is login\n    if (stateRegistryInfo.loggedIn) {\n      for (let item of [...props.data.purchasedRegistryItem]) {\n        if (item.isReserved && item.guestUser.email === stateRegistryInfo.user.email) {\n          hasUserReservedProduct = true\n          break;\n        }\n      }\n    }\n  }\n  // Checking in Local storage\n  if (!hasUserReservedProduct && (props.data.item.store.storeName !== M_A_STORE_NAME && props.data.quantityStatus.reserved_quantity && props.data.quantityStatus.still_needed <= 0)) {\n    let jsonVisitedItems = JSON.parse(localStorage.getItem(LOCAL_STORAGE_GUEST_GIFT_BUY_KEY))\n    if (jsonVisitedItems && jsonVisitedItems.length) {\n      for (let product of [...props.data.purchasedRegistryItem]) {\n        for (let item of jsonVisitedItems) {\n          if (Number(item.rId) === Number(stateGuestViewRegistry.id) && Number(item.pId) === Number(props.data.id) && product.guestUser.email === item.email) {\n            hasUserReservedProduct = true\n            break;\n          }\n        }\n        if (hasUserReservedProduct) {\n          break;\n        }\n      }\n    }\n  }\n  // If MA product and It quatity are still needed\n  if (props.data.item.store.storeName === M_A_STORE_NAME || props.data.quantityStatus.still_needed > 0) {\n    hasUserReservedProduct = true\n  }\n\n  return (\n    <div className={[\"tile-card\", props.className ? props.className : \"\"].join(\" \")}>\n      <div className=\"guest-tile-card p-3\" onClick={hasUserReservedProduct && !props.hideDetails ? () => openModelHandler() : () => { }}>\n        <div className=\"product-image text-center pointer mb-3 guest-tile-card-image\">\n          <img className=\"mx-auto\" src={props.data?.imageUrl}\n            onError={(ev) => productImageLoadErrorHandler(ev)}\n            onLoad={(ev) => productImageLoadHandler(ev)}\n            alt={props.data?.title}\n          />\n          {props.data.mostWanted ?\n            <div\n              className=\"d-flex align-items-center guest-must-have added-gift-must-have-btn px-1 guest-added-gift-must-have-active\">\n              <i className=\"icon mr-1 d-block heart-fill\" />\n              <p className=\"text-sm added-gift-must-have-text\">Must Have</p>\n            </div>\n            : <></>}\n        </div>\n        <div className=\"product-bottom\">\n          <h4 className=\"font-medium guest-product-title\">{props.data.title}</h4>\n          {!props.hideDetails ?\n            <>\n              <div className=\"d-flex mt-1 guest-product-price\">\n                {props.data.item.hideTotal || props.hideDetails ? null :\n                  <p className=\"\">{formatPrice(props.data.item.price)}</p>\n                }\n                {props.data.item.compareAtPrice ? \n                  <div className=\"text-sm my-auto ml-1 strike-through-price\">{formatPrice(props.data.item.compareAtPrice)}</div>\n                  :null}\n              </div>\n\n              <div className={[\"d-flex mt-2 flex-wrap align-items-start align-content-start\", !props.hideDetails ? \"guest-tile-pills-section\" : \"\"].join(\" \")}>\n                {props.data.quantityStatus.purchased_quantity && !props.data.item.isCashFund ?\n                  <GiftStatusPill className=\"mr-1 my-1\" variant=\"purchased\" text={props.data.quantityStatus.purchased_quantity + \" Purchased\"} />\n                  : null}\n                {props.data.quantityStatus.reserved_quantity && !props.data.item.isCashFund ?\n                  <GiftStatusPill className=\"mr-1 my-1\" variant=\"reserved\" text={props.data.quantityStatus.reserved_quantity + \" Reserved\"} />\n                  : null}\n                {props.data.quantityStatus.still_needed > 0 && !props.data.item.isCashFund ?\n                  <GiftStatusPill className=\"mr-1 my-1\" variant=\"default\" text={`${props.data.quantityStatus.still_needed} ${props.data.quantityStatus.purchased_quantity === 0 ? \" Requested\" : \" Still Needed\"}`} />\n                  : null}\n                {props.data.isGroupGift ?\n                  <div className=\"my-1\">\n                    <div className=\"guest-toggle-pills px-1 mr-3 d-flex align-items-center mt-lg-0\">\n                      <i className=\"guest-icon-active mr-1\" />\n                      <span className=\"text-sm guest-icon-text\">Group Gift</span>\n                    </div>\n                    {props.data.item.hideTotal ? null :\n                      <div className=\"mt-md-1\">\n                        <span className=\"text-sm font-medium received-amount\">Received {formatPrice(Math.round((props.data.quantityStatus.total_contribution_amount % props.data.item.price) * 100) / 100)} </span>\n                        <span className=\"text-sm total-amount\">of {formatPrice(Math.round(props.data.item.price * props.data.quantityStatus.still_needed * 100) / 100)}</span>\n                        <div className=\"group-gift-background\">\n                          <div className=\"group-gift-progress mw-100\" style={{ width: `${((props.data.quantityStatus.total_contribution_amount % props.data.item.price) * 100) / (props.data.item.price * props.data.quantity)}%` }} />\n                        </div>\n                      </div>\n                    }\n                  </div>\n                  : null}\n              </div>\n            </>\n            :\n            <div className=\"d-flex mt-2 flex-wrap align-items-end\">\n              {(props.data.isGroupGift || props.data.quantityStatus.purchased_quantity) && !props.data.item.isCashFund ?\n                <GiftStatusPill className=\"mr-1\" variant=\"purchased\" text={props.data.quantityStatus.purchased_quantity + \" Purchased\"} />\n                : null}\n              {props.data.quantityStatus.reserved_quantity && !props.data.item.isCashFund ?\n                <GiftStatusPill className=\"mr-1\" variant=\"reserved\" text={props.data.quantityStatus.reserved_quantity + \" Reserved\"} />\n                : null}\n              {!props.data.item.hideTotal && props.data.item.isCashFund ?\n                <GiftStatusPill className=\"mr-1\" variant=\"purchased\" text={formatPrice(props.data.quantityStatus.total_contribution_amount) + \" Received \"} />\n                : null}\n            </div>\n          }\n          {hasUserReservedProduct && !props.hideDetails ?\n            <div className=\"w-100 mt-3\">\n              <Button variant=\"secondary\" className=\"guest-tile-give-this-gift-btn font-medium text-body py-2 w-100\"\n                onClick={() => openModelHandler()}\n              >Give This Gift</Button>\n            </div> : null}\n        </div>\n      </div>\n      {showMAGiftmodel ?\n        <GiveMAGiftModel\n          show={showMAGiftmodel}\n          close={modalCloseHandler}\n          title={modelTitle}\n          data={props.data}\n          isGroupGift={isGroupGift}\n          isCashAcceptedOnly={isCashAcceptedOnly}\n          updateGuestViewProduct={props.updateGuestViewProduct}\n        /> : null}\n\n      {showAnotherStoreGiftmodel ?\n        <GiveGiftFromAnotherStore\n          show={showAnotherStoreGiftmodel}\n          close={modalCloseHandler}\n          title={modelTitle}\n          data={props.data}\n          updateGuestViewProduct={props.updateGuestViewProduct}\n        /> : null}\n    </div>\n\n  )\n}\n\nexport default GuestTileCard;","import React from \"react\";\nimport {graphQLNoToken} from \"../../../../api/axios\";\nimport {VERIFY_CANCEL_RESERVATION} from \"../../../../api/queries\";\nimport Modal from \"../modal-component/ModalComponent\";\nimport {toast} from \"react-toastify\";\nimport Button from \"../button-component/ButtonComponent\";\nimport {withRouter} from \"react-router\";\nimport Counter from \"../counter/Counter\";\nimport {CANCEL_RESERVATION_VIA_LINK} from \"../../../../api/mutations\";\nimport {setLoader} from \"../../../registry/RegistryActions\";\nimport {VIEW_GIFT_PRODUCTS_PER_REQUEST, LOCAL_STORAGE_GUEST_GIFT_BUY_KEY} from \"../../../../utils/constants\";\n\nclass CancelReservation extends React.Component {\n  state = {\n    cancelReservationItem: null,\n    showCancelReservation: false,\n    quantityToCancel: 1\n  }\n\n  closeModalHandler = () => {\n    let queryParams = new URLSearchParams(window.location.search)\n    if (queryParams.has('cr')) {\n      queryParams.delete('cr')\n      this.props.history.replace({\n        search: queryParams.toString(),\n      })\n    }\n    this.setState({\n      showCancelReservation: false\n    })\n  }\n\n  componentDidMount() {\n    if (this.props.registryInfo?.info) {\n      let queryParams = new URLSearchParams(decodeURI(window.location.search))\n      if (queryParams.has('cr')) {\n        let tempToken = queryParams.get('cr').replaceAll(\" \", \"+\")\n        const token = tempToken.slice(2, tempToken.length - 1)\n        let reqData = {\n          query: VERIFY_CANCEL_RESERVATION,\n          variables: {\n            token: token\n          }\n        }\n        graphQLNoToken(reqData).then(res => {\n          if (res?.data?.data) {\n            let localCancelReservationItem = res.data.data.verifyCancelReservationToken\n\n            console.log(this.props.registryInfo, localCancelReservationItem)\n            if (this.props.registryInfo &&\n              Number(this.props.registryInfo?.info.id) === Number(localCancelReservationItem.purchasedRegistryItem.registryItem.registry.id) &&\n              localCancelReservationItem.maxAllowedQuantity > 0) {\n\n              this.setState({\n                cancelReservationItem: localCancelReservationItem,\n                showCancelReservation: true\n              })\n            }\n          }\n        }).catch(err => {\n          if (err?.response?.data?.errors) {\n            for (let error of err.response.data.errors) {\n              toast.error(error.message)\n            }\n          }\n        })\n      }\n    }\n\n  }\n\n  incrementQuantityHandler = () => {\n    if (this.state.quantityToCancel + 1 <= this.state.cancelReservationItem.maxAllowedQuantity) {\n      this.setState({\n        quantityToCancel: this.state.quantityToCancel + 1\n      })\n    }\n  }\n\n  decrementQuantityHandler = () => {\n    if (this.state.quantityToCancel - 1 > 0) {\n      this.setState({\n        quantityToCancel: this.state.quantityToCancel - 1\n      })\n    }\n  }\n\n  cancelReservationClickHandler = () => {\n    let reqData = {\n      query: CANCEL_RESERVATION_VIA_LINK,\n      variables: {\n        registryId: Number(this.state.cancelReservationItem.purchasedRegistryItem.registryItem.registry.id),\n        registryItemId: Number(this.state.cancelReservationItem.purchasedRegistryItem.registryItem.id),\n        email: this.state.cancelReservationItem.purchasedRegistryItem.guestUser.email,\n        removeReservedQuantity: this.state.quantityToCancel,\n        keepReservedQuantity: Number(this.state.cancelReservationItem.maxAllowedQuantity) - this.state.quantityToCancel\n      }\n    }\n    setLoader(true)\n    graphQLNoToken(reqData).then(res => {\n      if (res?.data?.data?.removeReservedRegistryItem?.message) {\n        toast.success(res.data.data.removeReservedRegistryItem.message)\n        this.removeProductFromList()\n        this.closeModalHandler()\n        if (this.state.cancelReservationItem &&\n          this.state.cancelReservationItem?.purchasedRegistryItem?.registryItem?.registry?.isPublic &&\n          this.props.updateGuestViewProduct\n        ) {\n          this.props.updateGuestViewProduct(this.props.urlSlug, VIEW_GIFT_PRODUCTS_PER_REQUEST, true)\n        }\n      }\n    }).catch(err => {\n      if (err?.response?.data?.errors) {\n        for (let error of err.response.data.errors) {\n          toast.error(`Cancel Reservation: ${error.message}`)\n        }\n      }\n    }).finally(() => {\n      setLoader(false)\n    })\n  }\n\n  removeProductFromList = () => {\n    let jsonVisitedItems = JSON.parse(localStorage.getItem(LOCAL_STORAGE_GUEST_GIFT_BUY_KEY))\n    if (jsonVisitedItems) {\n      let updatedProducts = []\n      let itemId = this.state.cancelReservationItem.purchasedRegistryItem.registryItem.id\n      for (let product of jsonVisitedItems) {\n        if (product.pId === itemId) {\n          let finalProduct = {...product}\n          finalProduct.quantity = Number(this.state.cancelReservationItem.maxAllowedQuantity) - this.state.quantityToCancel\n          if (finalProduct.quantity > 0) {\n            updatedProducts.push(finalProduct)\n          }\n        } else {\n          updatedProducts.push(product)\n        }\n      }\n      // let updatedProducts = jsonVisitedItems.filter(product => product.pId !== this.state.cancelReservationItem.purchasedRegistryItem.registryItem.id)\n      localStorage.setItem(LOCAL_STORAGE_GUEST_GIFT_BUY_KEY, JSON.stringify(updatedProducts))\n    }\n  }\n\n  render() {\n    let modalBody = null;\n    let modalFooter = (\n      <>\n        <Button variant=\"secondary\" className=\"font-medium px-2 py-1\" onClick={this.closeModalHandler}>Keep the\n          reservation</Button>\n        <Button variant=\"primary\" className=\"font-medium px-2 py-1\" onClick={this.cancelReservationClickHandler}>Cancel\n          Reservation</Button>\n      </>\n    )\n\n    if (this.state.cancelReservationItem?.maxAllowedQuantity === 1) {\n      modalBody = (\n        <p>Are you sure you want to cancel reservation\n          of <b>{this.state.cancelReservationItem.purchasedRegistryItem.registryItem.title}</b> ?</p>\n      )\n    } else if (this.state.cancelReservationItem?.maxAllowedQuantity > 1) {\n      modalBody = (\n        <div>\n          <p>Are you sure you want to cancel reservation\n            of <b>{this.state.cancelReservationItem.purchasedRegistryItem.registryItem.title}</b> ?</p>\n          <p>You reserved {this.state.cancelReservationItem.maxAllowedQuantity} qty. How many do you want to cancel?</p>\n\n          <Counter\n            type=\"square\"\n            className=\"my-4\"\n            incrementHandler={this.incrementQuantityHandler}\n            decrementHandler={this.decrementQuantityHandler}\n            counter={this.state.quantityToCancel}\n          />\n        </div>\n      )\n    }\n\n    return (\n      <Modal\n        size='md'\n        show={this.state.showCancelReservation}\n        footer={modalFooter}\n        title=\"Cancel Reservation\"\n        closeModal={this.closeModalHandler}\n      >\n        {modalBody}\n      </Modal>\n    )\n  }\n}\n\nexport default withRouter(CancelReservation);","import React from \"react\";\nimport { setAlreadyBoughtProductInfo } from 'modules/guest-view/GuestViewAction';\nimport { connect } from \"react-redux\";\nimport Modal from \"../modal-component/ModalComponent\";\nimport Button from \"../button-component/ButtonComponent\";\nimport AlreadyBoughtProduct from \"modules/commons/components/already-bought-product/AlreadyBoughtProduct\";\nimport { MARK_AS_PURCHASED_BY_GUEST } from \"api/mutations\";\nimport { setLoader } from \"modules/registry/RegistryActions\";\nimport { VERIFY_ALREADY_BOUGHT } from \"api/queries\";\nimport { graphQLNoToken } from \"api/axios\";\nimport { toast } from \"react-toastify\";\nimport { EMAIL_RE } from \"utils/constants\";\nimport { clearViewGuestPaginationInfo, clearAlreadyBoughtProductInfo } from \"modules/guest-view/GuestViewAction\";\nimport { withRouter } from 'react-router-dom';\nimport { LOCAL_STORAGE_GUEST_GIFT_BUY_KEY } from 'utils/constants';\n\n\nclass EmailAlreadyBoughtProductModal extends React.Component {\n\n  state = {\n    quantity: 1,\n    name: null,\n    email: '',\n    storeName: null,\n    orderNumber: null,\n    giftMessage: null,\n    errors: {},\n    showAlreadyBoughtProduct: true,\n    maxAllowedQuantity: null,\n    productInfo: null,\n  }\n\n  componentDidMount() {\n    if (this.props.registryInfo?.info) {\n      let queryParams = new URLSearchParams(decodeURI(window.location.search))\n      if (queryParams.has('ab')) {\n        let tempToken = queryParams.get('ab').replaceAll(\" \", \"+\")\n        const token = tempToken.slice(2, tempToken.length - 1)\n        let reqData = {\n          query: VERIFY_ALREADY_BOUGHT,\n          variables: {\n            token: token\n          }\n        }\n        graphQLNoToken(reqData).then(res => {\n          if (res?.data?.data) {\n            let localAlreadyBoughtItem = res.data.data.verifyAlreadyBoughtToken\n\n            if (this.props.registryInfo &&\n              Number(this.props.registryInfo?.info.id) === Number(localAlreadyBoughtItem.purchasedRegistryItem.registryItem.registry.id) &&\n              localAlreadyBoughtItem.maxAllowedQuantity > 0) {\n\n              this.setState({\n                productInfo: localAlreadyBoughtItem.purchasedRegistryItem.registryItem,\n                showAlreadyBoughtProduct: true,\n                maxAllowedQuantity: localAlreadyBoughtItem.maxAllowedQuantity,\n                email: localAlreadyBoughtItem.purchasedRegistryItem.guestUser.email,\n                storeName: localAlreadyBoughtItem.purchasedRegistryItem.storeName\n              })\n            }\n          }\n        }).catch(err => {\n          if (err?.response?.data?.errors) {\n            for (let error of err.response.data.errors) {\n              toast.error(error.message)\n            }\n          }\n        })\n      }\n    }\n  }\n\n  closeModalHandler = () => {\n    let queryParams = new URLSearchParams(window.location.search)\n    if (queryParams.has('ab')) {\n      queryParams.delete('ab')\n      this.props.history.replace({\n        search: queryParams.toString(),\n      })\n    }\n    this.props.dispatch(clearAlreadyBoughtProductInfo())\n    this.setState({\n      showAlreadyBoughtProduct: false,\n      errors: {}\n    })\n  }\n\n  removeProductFromList = () => {\n    let jsonVisitedItems = JSON.parse(localStorage.getItem(LOCAL_STORAGE_GUEST_GIFT_BUY_KEY))\n    if (jsonVisitedItems) {\n      let updatedProducts = jsonVisitedItems.filter(product => product.pId !== this.state.productInfo.id)\n      localStorage.setItem(LOCAL_STORAGE_GUEST_GIFT_BUY_KEY, JSON.stringify(updatedProducts))\n    }\n  }\n\n  validBoughtThisAlreadyData = () => {\n    let valid = true\n    let errors = {}\n    // validate fields\n    if (this.props.productBoughtAlreadyInfo.name.length <= 0) {\n      errors['name'] = \"Name is required field\"\n      valid = false\n    }\n\n    if (this.props.productBoughtAlreadyInfo.email.length <= 0) {\n      errors['email'] = \"Email address is required field\"\n      valid = false\n    } else {\n      if (!this.props.productBoughtAlreadyInfo.email.match(EMAIL_RE)) {\n        errors['email'] = \"Invalid Email address\"\n        valid = false\n      }\n    }\n\n    this.setState({\n      errors: errors\n    })\n\n    return valid\n  }\n\n  onFocusBoughtThisAlreadyHandler = (fieldName) => {\n    let errors = { ...this.state.errors }\n    // Remove the errors while typing\n    if (this.state.errors.email && fieldName === 'email') {\n      delete errors.email\n    }\n    if (this.state.errors.name && fieldName === 'name') {\n      delete errors.name\n    }\n    if (this.state.errors.storeName && fieldName === 'storeName') {\n      delete errors.storeName\n    }\n    this.setState({\n      errors: errors\n    })\n  }\n\n  submitDataHandler = async () => {\n    this.props.dispatch(setLoader(true))\n\n    // Vaidating data\n    if (!this.validBoughtThisAlreadyData()) {\n      this.props.dispatch(setLoader(false))\n      return false\n    }\n\n    let data = {\n      query: MARK_AS_PURCHASED_BY_GUEST,\n      variables: {\n        registryUrlSlug: this.props.stateRegistryInfo.urlSlug,\n        registryItemId: this.state.productInfo.id,\n        isPurchased: true,\n        storeName: this.props.productBoughtAlreadyInfo.storeName,\n        purchasedQuantity: this.props.productBoughtAlreadyInfo.quantity,\n        giftMessage: this.props.productBoughtAlreadyInfo.giftMessage,\n        orderNumber: this.props.productBoughtAlreadyInfo.orderNumber,\n        name: this.props.productBoughtAlreadyInfo.name,\n        email: this.props.productBoughtAlreadyInfo.email\n      },\n    }\n    await graphQLNoToken(data).then(async res => {\n      if (res.data.errors || res.data.error) {\n        // TODO: Add toast proper toast msg\n        console.log('Something went wrong-->', res.data.errors)\n        toast.error((\n          <p>Something went wrong</p>\n        ))\n      } else {\n        // Getting Update Product\n        await this.props.dispatch(clearViewGuestPaginationInfo())\n        await this.props.updateGuestViewProduct(this.props.stateRegistryInfo.urlSlug, this.props.stateAddedProducts.length, true)\n        this.removeProductFromList()\n        toast.success((\n          <p><b>{this.state.productInfo.title}</b> Purchased!</p>\n        ))\n        this.closeModalHandler()\n      }\n      this.props.dispatch(setLoader(false))\n    }).catch(err => {\n      // TODO: Add toast proper toast msg\n      console.log('Something went wrong-->', err)\n      toast.error((\n        <p>Something went wrong</p>\n      ))\n      this.props.dispatch(setLoader(false))\n    })\n  }\n\n  render() {\n\n    let modalFooterButtons = (\n      <Button\n        variant=\"primary\"\n        className=\"MA-gift-footer-btn px-4 py-1 font-medium text-body\"\n        disabled={(this.props.productBoughtAlreadyInfo.name.length === 0 || this.props.productBoughtAlreadyInfo.email.length === 0) ? true : false}\n        onClick={() => this.submitDataHandler()}\n      >Save & Close</Button>\n    )\n\n    let modalBody = (\n      <AlreadyBoughtProduct\n        maxAllowedQuantity={this.state.maxAllowedQuantity}\n        fromMail={true}\n        reservedEmail={this.state.email}\n        data={this.state.productInfo}\n        validBoughtThisAlreadyData={this.validBoughtThisAlreadyData}\n        onFocusHandler={this.onFocusBoughtThisAlreadyHandler}\n        fieldErrors={this.state.errors}\n      />\n    )\n\n    return (\n      <>\n        {this.state.productInfo ?\n          <Modal\n            show={this.state.showAlreadyBoughtProduct}\n            footer={modalFooterButtons}\n            title=\"I bought this already\"\n            closeModal={this.closeModalHandler}\n          >\n            {modalBody}\n          </Modal>\n          : null\n        }\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    stateRegistryInfo: state.guestView.info,\n    productBoughtAlreadyInfo: state.guestView.alreadyBoughtProduct,\n\t\tstateAddedProducts: state.guestView.product\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(withRouter(EmailAlreadyBoughtProductModal));","import React from \"react\";\nimport \"./GuestView.scss\";\nimport {connect} from \"react-redux\";\nimport {updateGuestViewRegistry, getGuestCategories, setMetaInfoToDom} from \"../../utils/commonFunction\";\nimport Button from \"../commons/components/button-component/ButtonComponent\";\nimport GuestViewHeader from \"./containers/guest-view-header/GuestViewHeader\";\nimport GuestSortSection from \"./containers/guest-sort/GuestSortSection\";\nimport GuestViewCard from \"./components/GuestViewCard\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport {VIEW_GIFT_PRODUCTS_PER_REQUEST} from \"utils/constants\";\nimport {\n  setGuestViewProducts,\n  setViewGuestPaginationInfo,\n  updateGuestViewInfo,\n  setGuestViewFilterCategory,\n  clearViewGuestPaginationInfo,\n  setChildGuestViewFilter\n} from './GuestViewAction';\nimport {GET_GUEST_REGISTRY_PRODUCT} from 'api/queries';\nimport {MEDIA_URL_PREFIX} from \"utils/constants\";\nimport {graphQL} from 'api/axios';\nimport GuestFilter from './containers/guest-filter/GuestFilter';\nimport {FILTERS} from \"utils/constants\";\nimport Toast from \"modules/commons/components/toast/Toast\";\nimport RedirectionScreen from \"modules/track-gifts/components/redirection-screen/RedirectionScreen\";\nimport {M_A_BABY_PRODUCT_LINK, M_A_STORE_NAME, LOCAL_STORAGE_GUEST_GIFT_BUY_KEY} from 'utils/constants';\nimport Modal from \"modules/commons/components/modal-component/ModalComponent\";\nimport {setLoader} from \"modules/registry/RegistryActions\";\nimport ViewRegistryHeader from \"modules/view-registry/containers/view-registry-header/ViewRegistryHeader\";\nimport {SEND_ALL_PURCHASED_EMAIL} from \"api/mutations\";\nimport {toast} from \"react-toastify\";\nimport ProductLoader from 'modules/commons/components/product-loader/ProductLoader';\nimport GuestTileCard from \"./components/GuestTileCard/GuestTileCard\";\nimport CancelReservation from \"../commons/components/cancel-reservation/CancelReservation\";\nimport EmailAlreadyBoughtProductModal from \"modules/commons/components/email-already-bought-product-modal/EmailAlreadyBoughtProductModal\";\n\nclass GuestView extends React.Component {\n\n  state = {\n    isFirstTime: true,\n    filterCategoryLimit: [],\n    isSendMessageModalOpen: false,\n    errors: {},\n    subject: '',\n    message: '',\n    totalProductCount: null,\n    reservedAndPurchasedProducts: [],\n    nonReservedAndPurchasedProducts: [],\n    isListViewActive: true,\n  }\n\n  showLoader = true\n  BABY_GIFTS_URL = \"https://monicaandandy.com/collections/baby-gifts\"\n\n  // Constant variables for filters\n  AVAILABLE = \"available\"\n  RESERVED = \"reserved\"\n  PURCHASED = \"purchased\"\n  PRICE_1 = \"price-1\"\n  PRICE_2 = \"price-2\"\n  PRICE_3 = \"price-3\"\n  MONICA_AND_ANDY = \"monicaandandy\"\n  ELSEWHERE = \"elsewhere\"\n\n  componentDidMount() {\n    updateGuestViewRegistry(this.props.urlSlug ? this.props.urlSlug : this.props.match.params.registrySlug, this.props.dispatch)\n    if (this.props.urlSlug) {\n      this.updateGuestViewRegistryProduct(this.props.urlSlug, VIEW_GIFT_PRODUCTS_PER_REQUEST, true)\n    }\n  }\n\n  getLimitOfFliter = (parentId) => {\n    let limit = null\n    const filterCategory = [...this.state.filterCategoryLimit]\n    for (let category of filterCategory) {\n      if (parentId === category.id && category.limit) {\n        limit = category.limit\n      }\n    }\n    return limit\n  }\n\n  // Updating product count in filter categories\n  updateFilterList = (registryItemsAnalysisCount, categoryData) => {\n\n    let newFilterList = [\n      {\n        id: \"giftStatus\",\n        display: \"Gift Status\",\n        child: [\n          {\n            id: this.AVAILABLE,\n            display: FILTERS.AVAILABLE_DISPLAY,\n            count: registryItemsAnalysisCount.totalAvailable\n          },\n          {\n            id: this.RESERVED,\n            display: FILTERS.RESERVED_DISPLAY,\n            count: registryItemsAnalysisCount.totalReserved\n          },\n          {\n            id: this.PURCHASED,\n            display: FILTERS.PURCHASED_DISPLAY,\n            count: registryItemsAnalysisCount.totalPurchased\n          }\n        ]\n      },\n      {\n        id: \"categories\",\n        display: FILTERS.CATEGORIES_DISPLAY,\n        limit: this.getLimitOfFliter(\"categories\") ? this.getLimitOfFliter(\"categories\") : 6,\n        child: [...this.props.stateCategoriesInfo].filter(category => {\n          let id = category.category.id\n          let count = categoryData[id]\n          if (count > 0) {\n            return true\n          }\n        }).map(category => {\n          let newCategory = {...category}\n          let id = category.category.id\n          newCategory.id = category.category.id\n          newCategory['display'] = newCategory.categoryName\n          newCategory['count'] = categoryData[id]\n          return newCategory\n        })\n      },\n      {\n        id: \"price\",\n        display: FILTERS.PRICE_DISPLAY,\n        child: [\n          {\n            id: this.PRICE_1,\n            display: FILTERS.PRICE_DISPLAY_1,\n            count: registryItemsAnalysisCount.under50\n          },\n          {\n            id: this.PRICE_2,\n            display: FILTERS.PRICE_DISPLAY_2,\n            count: registryItemsAnalysisCount.between50100\n          },\n          {\n            id: this.PRICE_3,\n            display: FILTERS.PRICE_DISPLAY_3,\n            count: registryItemsAnalysisCount.moreThan100\n          }\n        ]\n      },\n      {\n        id: \"store\",\n        display: FILTERS.STORE_DISPLAY,\n        child: [\n          {\n            id: this.MONICA_AND_ANDY,\n            display: FILTERS.MONICA_AND_ANDY_DISPLAY,\n            count: registryItemsAnalysisCount.maStoreItems\n          },\n          {\n            id: this.ELSEWHERE,\n            display: FILTERS.ELSEWHERE_DISPLAY,\n            count: registryItemsAnalysisCount.otherStoreItems\n          },\n        ]\n      },\n\n    ]\n\n    // Removing All other applied filters\n    let allChildFilterCat = []\n    for (let filterCat of newFilterList) {\n      for (let childCat of filterCat.child) {\n        allChildFilterCat.push(childCat)\n      }\n    }\n    let finalFilterApplied = []\n    for (let item of this.props.stateFilterApplied) {\n      for (let ele of allChildFilterCat) {\n        if (ele.id === item && ele.count > 0) {\n          finalFilterApplied.push(item)\n        }\n      }\n    }\n    // Setting total Product Count\n    // TODO: Uncomment this if in future we have to show product count\n    // if ((this.props.stateFilterApplied.includes(this.MONICA_AND_ANDY) && this.props.stateFilterApplied.includes(this.ELSEWHERE))\n    //   || (!this.props.stateFilterApplied.includes(this.MONICA_AND_ANDY) && !this.props.stateFilterApplied.includes(this.ELSEWHERE))\n    // ) {\n    //   this.setState({\n    //     totalProductCount: (registryItemsAnalysisCount.maStoreItems + registryItemsAnalysisCount.otherStoreItems)\n    //   })\n    // } else if (this.props.stateFilterApplied.includes(this.MONICA_AND_ANDY)) {\n    //   this.setState({\n    //     totalProductCount: registryItemsAnalysisCount.maStoreItems\n    //   })\n    // } else if (this.props.stateFilterApplied.includes(this.ELSEWHERE)) {\n    //   this.setState({\n    //     totalProductCount: registryItemsAnalysisCount.otherStoreItems\n    //   })\n    // }\n\n    // Setting Total quality count for all products\n    this.setState({\n      totalProductCount: registryItemsAnalysisCount.totalAddedGifts\n    })\n\n    this.props.dispatch(setChildGuestViewFilter(finalFilterApplied))\n\n    this.props.dispatch(setGuestViewFilterCategory(newFilterList))\n    return newFilterList\n  }\n\n  getFiltersApplied = (stateFilterApplied, activeSortFilterState) => {\n    const childFilterArray = [...stateFilterApplied]\n    let filterApplied = {}\n    // For Gift Status\n    if (childFilterArray.includes(this.AVAILABLE)) {\n      filterApplied.isAvailable = true\n    }\n    if (childFilterArray.includes(this.RESERVED)) {\n      filterApplied.isReserved = true\n    }\n    if (childFilterArray.includes(this.PURCHASED)) {\n      filterApplied.isPurchased = true\n    }\n\n    // For Sort\n    if (activeSortFilterState.sortId === 2) {\n      filterApplied.sortBy = 'item__price'\n    } else if (activeSortFilterState.sortId === 3) {\n      filterApplied.sortBy = '-item__price'\n    }\n\n    // For Store\n    let store = []\n    if (childFilterArray.includes(this.MONICA_AND_ANDY)) {\n      store.push(this.MONICA_AND_ANDY)\n    }\n    if (childFilterArray.includes(this.ELSEWHERE)) {\n      store.push(this.ELSEWHERE)\n    }\n    if (store.length) {\n      filterApplied.store = store\n    }\n\n    let lessThanEqual = 0\n    let greaterThanEqual = 0\n    let hasPriceFilter = false\n    // For Price\n    if (childFilterArray.includes(this.PRICE_1) &&\n      childFilterArray.includes(this.PRICE_2) &&\n      childFilterArray.includes(this.PRICE_3)) {\n      greaterThanEqual = 0\n      hasPriceFilter = true\n    } else if (childFilterArray.includes(this.PRICE_1) &&\n      childFilterArray.includes(this.PRICE_2)) {\n      lessThanEqual = 100\n      hasPriceFilter = true\n    } else if (childFilterArray.includes(this.PRICE_1) &&\n      childFilterArray.includes(this.PRICE_3)) {\n      lessThanEqual = 49.99\n      greaterThanEqual = 100\n      hasPriceFilter = true\n    } else if (childFilterArray.includes(this.PRICE_2) &&\n      childFilterArray.includes(this.PRICE_3)) {\n      greaterThanEqual = 50\n      hasPriceFilter = true\n    } else if (childFilterArray.includes(this.PRICE_1)) {\n      lessThanEqual = 49.99\n      hasPriceFilter = true\n    } else if (childFilterArray.includes(this.PRICE_2)) {\n      greaterThanEqual = 50\n      lessThanEqual = 100\n      hasPriceFilter = true\n    } else if (childFilterArray.includes(this.PRICE_3)) {\n      greaterThanEqual = 100\n      hasPriceFilter = true\n    }\n    if (hasPriceFilter) {\n      filterApplied.price_Lte = lessThanEqual\n      filterApplied.price_Gte = greaterThanEqual\n    }\n\n    let categories = []\n    // For categories\n    for (let cat of [...this.props.stateCategoriesInfo]) {\n      if (childFilterArray.includes(cat.category.id)) {\n        categories.push(cat.category.id)\n      }\n    }\n    if (categories.length) {\n      filterApplied.categories = categories\n    }\n\n    return filterApplied\n  }\n\n  hasGuestReservedProduct = (product) => {\n    let hasUserReservedProduct = false\n\n    // If non MA product and It's quatity are not still needed\n    if (product.item.store.storeName !== M_A_STORE_NAME && product.quantityStatus.reserved_quantity && product.quantityStatus.still_needed <= 0) {\n      // If your is login\n      if (this.props.stateRegistryInfo.loggedIn) {\n\n        for (let item of [...product.purchasedRegistryItem]) {\n          if (item.isReserved && item.guestUser.email === this.props.stateRegistryInfo.user.email) {\n            hasUserReservedProduct = true\n            break;\n          }\n        }\n      }\n    }\n    // Checking in Local storage\n    if (!hasUserReservedProduct && (product.item.store.storeName !== M_A_STORE_NAME && product.quantityStatus.reserved_quantity)) {\n      let jsonVisitedItems = JSON.parse(localStorage.getItem(LOCAL_STORAGE_GUEST_GIFT_BUY_KEY))\n      if (jsonVisitedItems && jsonVisitedItems.length) {\n        for (let productData of [...product.purchasedRegistryItem]) {\n          for (let item of jsonVisitedItems) {\n            if (Number(item.rId) === Number(this.props.stateGuestViewRegistry.id) && Number(item.pId) === Number(product.id) && productData.guestUser.email === item.email) {\n              hasUserReservedProduct = true\n              break;\n            }\n          }\n          if (hasUserReservedProduct) {\n            break;\n          }\n        }\n      }\n    }\n\n    return hasUserReservedProduct\n  }\n\n  // Get all reserved and purchased product\n  filterProductsOnPurchased = (allProduct) => {\n    let nonReservedAndPurchasedProduct = []\n    let reservedAndPurchasedProduct = []\n    for (let product of [...allProduct]) {\n      if (product.isPurchased\n        || ((product.isCashAcceptedOnly || product.isGroupGift) && (product.isAmountReceived))\n        || (product.isCashAcceptedOnly && (product.quantity === product.quantityStatus.purchased_quantity))\n        || (product.isGroupGift && (Math.floor(product.quantityStatus.total_contribution_amount / product.item.price) >= Number(product.quantity))\n          || ((Number(product.quantityStatus.purchased_quantity) + Number(product.quantityStatus.reserved_quantity)) === Number(product.quantity))\n        )) {\n        if (product.item.store.storeName === M_A_STORE_NAME) {\n          reservedAndPurchasedProduct.push(product)\n        } else if ((product.item.store.storeName !== M_A_STORE_NAME && !this.hasGuestReservedProduct(product))) {\n          reservedAndPurchasedProduct.push(product)\n        } else {\n          nonReservedAndPurchasedProduct.push(product)\n        }\n      } else {\n        nonReservedAndPurchasedProduct.push(product)\n      }\n    }\n\n    this.setState({\n      reservedAndPurchasedProducts: [...reservedAndPurchasedProduct],\n      nonReservedAndPurchasedProducts: [...nonReservedAndPurchasedProduct]\n    })\n  }\n\n  updateGuestViewRegistryProduct = async (urlSlug, first = VIEW_GIFT_PRODUCTS_PER_REQUEST, emptyAllProduct = false) => {\n    if (this.showLoader) {\n      this.props.dispatch(setLoader(true))\n    }\n    let filtersApplied = this.getFiltersApplied(this.props.stateFilterApplied, this.props.activeSortFilterState)\n    let clearAllProduct = false\n    if (emptyAllProduct) {\n      await this.props.dispatch(clearViewGuestPaginationInfo())\n      await this.props.dispatch(setGuestViewProducts([]))\n    }\n    if (this.props.stateGuestViewPagination.endCursor === null) {\n      clearAllProduct = true\n    }\n    let reqData = {\n      query: GET_GUEST_REGISTRY_PRODUCT,\n      variables: {\n        urlSlug: urlSlug,\n        after: this.props.stateGuestViewPagination.endCursor,\n        first: first,\n        ...filtersApplied\n      }\n    }\n\n    await graphQL(reqData).then(async res => {\n      if (res.data.data.registryAsGuest) {\n        if (emptyAllProduct || this.props.stateGuestViewPagination.endCursor === null) {\n          await this.props.dispatch(setGuestViewProducts([]))\n        }\n\n        // Storing Product of GuestView\n        let responseData = [...res.data.data.registryAsGuest.registryItems.edges].map(item => {\n          let newItemObj = {...item.node}\n          delete newItemObj.registryitemImage;\n          if (item.node.registryitemImage.length > 0) {\n            newItemObj.imageUrl = (MEDIA_URL_PREFIX.LOCAL_MEDIA_URL ? MEDIA_URL_PREFIX.LOCAL_MEDIA_URL : \"\") + item.node.registryitemImage[0].image;\n          }\n          return newItemObj;\n        })\n        let finalData = responseData.filter(product => product.registryCategories.length > 0)\n        if (!(emptyAllProduct || this.props.stateGuestViewPagination.endCursor === null || clearAllProduct)) {\n          finalData = [...this.props.stateAddedProducts, ...finalData]\n        }\n        await this.filterProductsOnPurchased([...finalData])\n        await this.props.dispatch(setGuestViewProducts([...finalData]))\n\n        // Storing PagenationInfo\n        let pagenationInfo = {...res.data.data.registryAsGuest.registryItems.pageInfo}\n        await this.props.dispatch(setViewGuestPaginationInfo(pagenationInfo))\n\n        await this.updateFilterList({...res.data.data.registryAsGuest.registryItemsAnalysisCount}, {...res.data.data.registryAsGuest.categoryData})\n\n        // Setting is all purcashed flag\n        let guestViewInfo = {...this.props.stateGuestViewRegistry}\n        guestViewInfo.isAllGiftsPurchased = res.data.data.registryAsGuest.isAllGiftsPurchased\n        await this.props.dispatch(updateGuestViewInfo(guestViewInfo))\n\n        this.props.dispatch(setLoader(false))\n        this.showLoader = true\n      }\n    }).catch(err => {\n      console.error(err)\n      this.props.dispatch(updateGuestViewInfo({notFound: true}))\n      this.props.dispatch(setLoader(false))\n      this.showLoader = true\n      if (err.response && err.response.data.errors) {\n        for (const error of err.response.data.errors) {\n          // TODO: Implement toast if necessary\n          console.log(error.message)\n        }\n      }\n    })\n  }\n\n  filterCategoryLimitHandler = (limitData) => {\n    this.setState({filterCategoryLimit: limitData})\n  }\n\n  sortByHighToLow = (productList) => {\n    return productList.sort((a, b) => {\n      return b.item.price - a.item.price\n    });\n  }\n\n  sortByLowToHigh = (productList) => {\n    return productList.sort((a, b) => {\n      return a.item.price - b.item.price\n    });\n  }\n\n  getSortedFilteredProducts = (guestProducts, activeSortFilterState, filterApplied) => {\n    let sortedProducts = [];\n    if (activeSortFilterState.sortId === 1) {\n      sortedProducts = [...guestProducts]\n    } else if (activeSortFilterState.sortId === 2) {\n      sortedProducts = this.sortByLowToHigh([...guestProducts])\n    } else if (activeSortFilterState.sortId === 3) {\n      sortedProducts = this.sortByHighToLow([...guestProducts])\n    }\n\n    return sortedProducts;\n  }\n\n  getdataForFirstTime = async () => {\n    await getGuestCategories(this.props.urlSlug ? this.props.urlSlug : this.props.match.params.registrySlug, this.props.dispatch)\n    await this.props.dispatch(clearViewGuestPaginationInfo())\n    await this.updateGuestViewRegistryProduct(this.props.urlSlug ? this.props.urlSlug : this.props.match.params.registrySlug, VIEW_GIFT_PRODUCTS_PER_REQUEST, true)\n  }\n\n  // Validate Send message data\n  validSendMessageData = () => {\n    let errors = {}\n    let valid = true\n    if (this.state.subject.length <= 0) {\n      errors['subject'] = \"This field is mandatory\"\n      valid = false\n    }\n\n    if (this.state.message.length <= 0) {\n      errors['message'] = \"This field is mandatory\"\n      valid = false\n    }\n\n    this.setState({\n      errors: errors\n    })\n    return valid\n  }\n\n  subjectChangeHandler = (ev) => {\n    let errors = {...this.state.errors}\n    if (errors.subject) {\n      delete errors.subject\n    }\n\n    ev.persist();\n    this.setState({\n      subject: ev.target.value\n    })\n  }\n\n  messageChangeHandler = (ev) => {\n    let errors = {...this.state.errors}\n    if (errors.message) {\n      delete errors.message\n    }\n\n    ev.persist();\n    if (ev.target.value.length <= 280) {\n      this.setState({\n        message: ev.target.value\n      })\n    }\n  }\n\n  sendMessageHandler = () => {\n    if (!this.validSendMessageData()) {\n      return false\n    }\n    let data = {\n      query: SEND_ALL_PURCHASED_EMAIL,\n      variables: {\n        urlSlug: this.props.urlSlug ? this.props.urlSlug : this.props.match.params.registrySlug,\n        message: this.state.message,\n        subject: this.state.subject,\n      },\n    }\n\n    graphQL(data).then(res => {\n      if (res.data.errors || res.data.error) {\n        // TODO: Add toast proper toast msg\n        console.log('Something went wrong-->', res.data.errors)\n        toast.error((\n          <p>Something went wrong</p>\n        ))\n      } else {\n        toast.success(<p>Mail sent successfully</p>)\n        this.setState({isSendMessageModalOpen: false})\n      }\n    }).catch(err => {\n      // TODO: Add toast proper toast msg\n      console.log('Something went wrong-->', err)\n      toast.error((\n        <p>Something went wrong</p>\n      ))\n    })\n  }\n\n  setTotalCount = (num) => {\n    this.setState({totalProductCount: num});\n  }\n\n  setGuestLayout = (isListViewActive) => {\n    this.setState({\n      isListViewActive: isListViewActive\n    })\n  }\n\n  render() {\n\n    const cancelReservation = (\n        <CancelReservation\n          registryInfo={this.props.stateGuestViewRootRegistry}\n          updateGuestViewProduct={this.updateGuestViewRegistryProduct}\n          urlSlug={this.props.urlSlug ? this.props.urlSlug : this.props.match.params.registrySlug}\n        />\n      )\n\n    const emailAlreadyBoughtProductModal = (\n        <EmailAlreadyBoughtProductModal \n          registryInfo={this.props.stateGuestViewRootRegistry}\n          updateGuestViewProduct={this.updateGuestViewRegistryProduct}\n          urlSlug={this.props.urlSlug ? this.props.urlSlug : this.props.match.params.registrySlug}\n        />\n      )\n\n    // Setting Meta info to DOM\n    if (this.props.stateSeo) {\n      let notFoundMeta = {\n        title: \"Registry Not Found - Monica + Andy\",\n        description: \"\"\n      }\n\n      if (!this.props.urlSlug && !this.props.stateIsGuestViewRegistry) {\n        setMetaInfoToDom(this.props.stateGuestViewRegistry.notFound ? notFoundMeta : this.props.stateSeo['guest-view-ma'], this.props.stateGuestViewRegistry.notFound ? \"no-guest-view\" : \"guest-view\")\n      } else {\n        setMetaInfoToDom(this.props.stateSeo['guest-preview-ma'], \"guest-preview\")\n\n      }\n    }\n\n    if (this.props.stateGuestGiftsRedirectionInfo.store) {\n      return (\n        <RedirectionScreen store={this.props.stateGuestGiftsRedirectionInfo.store}/>\n      )\n    }\n\n    // if (this.props.stateGuestViewRegistry.urlSlug !== this.props.match.params.registrySlug) {\n    //   updateGuestViewRegistry(this.props.match.params.registrySlug, this.props.dispatch)\n    // }\n\n    // When registry doesn't exists\n    if (this.props.stateGuestViewRegistry.notFound) {\n      return <h1>Registry not found</h1>;\n    }\n\n    if (this.props.stateGuestViewRegistry.id) {\n      // When registry exists and it is not public\n      if (this.props.stateGuestViewRegistry.isPublic === false && !this.props.urlSlug) {\n        let registryUsers = [this.props.stateGuestViewRegistry.user.firstName]\n        if (this.props.stateGuestViewRegistry.user.partnerUser) {\n          registryUsers.push(this.props.stateGuestViewRegistry.user.partnerUser.firstName)\n        }\n        return (\n          <>\n            {cancelReservation}\n            {emailAlreadyBoughtProductModal}\n            <div className=\"container mt-17\">\n              <div className=\"row\">\n                <div className=\"col text-center\">\n                  <h1>{this.props.stateGuestViewRegistry.displayName}</h1>\n                  {/*TODO: Display partner name as well below*/}\n                  {registryUsers.length === 1 ? <h4 className=\"guest-view-curator-names mt-2\"><span\n                    className=\"text-capitalize\">{registryUsers[0]}</span> is still curating their baby registry.\n                  </h4> : null}\n                  {registryUsers.length === 2 ? <h4 className=\"guest-view-curator-names mt-2\"><span\n                    className=\"text-capitalize\">{registryUsers[0]}</span> and <span\n                    className=\"text-capitalize\">{registryUsers[1]}</span> are still curating their baby registry.\n                  </h4> : null}\n\n                  <Button\n                    variant=\"primary\"\n                    className=\"py-1 px-2 mt-3 text-body font-medium\"\n                    onClick={() => window.location.href = this.BABY_GIFTS_URL}\n                  >Shop baby Gifts</Button>\n                </div>\n              </div>\n            </div>\n          </>\n        )\n      } else {\n\n        let filteredSortProducts = this.getSortedFilteredProducts(this.state.nonReservedAndPurchasedProducts, this.props.activeSortFilterState, this.props.stateFilterApplied)\n\n        // Fetching product for first time\n        if (this.state.isFirstTime && this.props.stateAddedProducts.length <= 0 && this.props.stateGuestViewRegistry.urlSlug) {\n          this.setState({\n            isFirstTime: false\n          })\n          this.getdataForFirstTime()\n          // this.updateFilterList(this.props.stateAddedProducts)\n        }\n\n        let modalTitle = (\n          <div className=\"font-heading\">Send a message</div>\n        )\n        let modalBody = (\n          <>\n            <div className=\"row mt-3\">\n              <div className=\"col m-a-input-container\">\n                <p className=\"text-sm mb-1 font-medium add-gift-store-label guest-view-required\">Subject</p>\n                <input\n                  type=\"text\"\n                  className={[\"w-100 mt-1 px-2 py-1 mb-0 text-body\", this.state.errors.subject ? \"already-bought-input-error\" : \"\"].join(\" \")}\n                  value={this.state.subject}\n                  onChange={(ev) => this.subjectChangeHandler(ev)}\n                />\n                {this.state.errors.subject ?\n                  <span\n                    className=\"text-sm already-bought-input-error-text\">{this.state.errors.subject}</span>\n                  : null}\n              </div>\n            </div>\n            <div className=\"row\">\n              <div className=\"col mt-6 m-a-input-container\">\n                <div className=\"d-flex mb-1\">\n                  <p className=\"text-sm font-medium add-gift-store-label guest-view-required\">Message</p>\n                  <p className=\"text-sm ml-auto send-massagee-txt-secondary\">Max. 280 chars</p>\n                </div>\n                <textarea className=\"w-100 text-body p-1 mb-6 m-a-resize-textarea\"\n                          rows=\"2\"\n                          placeholder={('Write a message for ') + (this.props.stateGuestViewRegistry.user.firstName ? this.props.stateGuestViewRegistry.user.firstName : '') + (this.props.stateGuestViewRegistry.user.partnerUser ? ' and' + this.props.stateGuestViewRegistry.user.partnerUser.firstName : '') + '.'}\n                          value={this.state.message}\n                          onChange={(ev) => this.messageChangeHandler(ev)}\n                />\n                {this.state.errors.message ?\n                  <span\n                    className=\"text-sm already-bought-input-error-text\">{this.state.errors.subject}</span>\n                  : null}\n              </div>\n            </div>\n            <div className=\"text-right\">\n              <Button\n                variant=\"primary\"\n                disabled={this.state.subject.length <= 0 || this.state.message.length <= 0}\n                className=\"py-1 px-2 text-body font-medium\"\n                onClick={() => this.sendMessageHandler()}\n              >Send & Close</Button>\n            </div>\n          </>\n        )\n\n        // When registry exists and it is public\n        return (\n          <>\n            {cancelReservation}\n            {emailAlreadyBoughtProductModal}\n            <GuestViewHeader/>\n            <div className=\"container mt-7\">\n              <div className=\"row\">\n                <div className=\"col-2 d-none d-lg-inline-block\">\n                  <GuestFilter\n                    setFilterhandler={() => this.updateGuestViewRegistryProduct(this.props.urlSlug ? this.props.urlSlug : this.props.match.params.registrySlug)}\n                    categoryFilterLimit={this.filterCategoryLimitHandler}/>\n                </div>\n                <div className=\"col\"></div>\n                <div className=\"col-12 col-lg-9\">\n                  {/* When all products are purchased */}\n                  {this.props.stateGuestViewRegistry.isAllGiftsPurchased ?\n                    <div className=\"my-7 pt-6 pb-7 guest-all-purchased-card text-center text-center\">\n                      <div className=\"font-heading guest-all-purchased-card-heading mx-auto\">100%\n                        complete! {this.props.stateGuestViewRegistry.user.firstName} {this.props.stateGuestViewRegistry.user.partnerUser ? ' and ' + this.props.stateGuestViewRegistry.user.partnerUser.firstName : ''} have\n                        received everything on their registry.\n                      </div>\n                      <div className=\"d-flex mt-4 justify-content-center align-items-center\">\n                        <h4>\n                          <a\n                            className=\"font-medium guest-all-purchased-card-link\"\n                            tabindex=\"0\"\n                            onClick={() => this.setState({isSendMessageModalOpen: true})}\n                          >Send A Message</a>\n                        </h4>\n                        <h4 className=\"ml-1 guest-all-purchased-card-txt\">or</h4>\n                        <a\n                          className=\"ml-3 px-3 py-1 guest-all-purchased-card-btn text-body font-medium d-inline-block\"\n                          href={M_A_BABY_PRODUCT_LINK}\n                          target='_blank'\n                          tabindex=\"0\"\n                        >Shop Baby Gifts</a>\n                      </div>\n                    </div> : null}\n                  <GuestSortSection\n                    productCount={this.state.totalProductCount}\n                    setFilterhandler={() => this.updateGuestViewRegistryProduct(this.props.urlSlug ? this.props.urlSlug : this.props.match.params.registrySlug)}\n                    categoryFilterLimit={this.filterCategoryLimitHandler}\n                    guestFilterProducts={filteredSortProducts}\n                    currTotalCount={this.state.totalProductCount}\n                    changeTotalCount={this.setTotalCount}\n                    setGuestLayout={(isListViewActive) => this.setGuestLayout(isListViewActive)}\n                    isListViewActive={this.state.isListViewActive}\n                  />\n\n                  <div className=\"mt-5\" id=\"avalible-section\">\n                    <InfiniteScroll\n                      next={() => {\n                        this.showLoader = false\n                        this.updateGuestViewRegistryProduct(this.props.urlSlug ? this.props.urlSlug : this.props.match.params.registrySlug)\n                      }}\n                      hasMore={this.props.stateGuestViewPagination.hasNextPage}\n                      loader={<ProductLoader/>}\n                      scrollThreshold={0.6}\n                      dataLength={this.state.nonReservedAndPurchasedProducts.length}\n                      style={{overflow: \"hidden\"}}\n                    >\n                      {this.state.isListViewActive ?\n                        filteredSortProducts.length > 0 ?\n                          filteredSortProducts.map((card, index) =>\n                            <GuestViewCard\n                              data={card}\n                              key={\"addedCard\" + index}\n                              updateGuestViewProduct={this.updateGuestViewRegistryProduct}\n                            />) : null\n                        :\n                        <div className=\"row\">\n                          {filteredSortProducts.length > 0 ?\n                            filteredSortProducts.map((card, index) =>\n                              <GuestTileCard\n                                className=\"col-12 col-md-6 col-xl-4 mb-5\"\n                                data={card}\n                                key={\"addedCard\" + index}\n                                updateGuestViewProduct={this.updateGuestViewRegistryProduct}\n                              />) : null}\n                        </div>\n                      }\n                    </InfiniteScroll>\n                  </div>\n                  {this.state.reservedAndPurchasedProducts.length > 0 ?\n                    <div\n                      className={[\"guest-reserved-purchased-section\", filteredSortProducts.length > 0 ? \"mt-10\" : \"mt-5\"].join(\" \")}>\n                      <p className=\"pb-4 title mb-5\">RESERVED AND PURCHASED</p>\n                      {this.state.isListViewActive ?\n                        this.state.reservedAndPurchasedProducts.map((card, index) =>\n                          <GuestViewCard\n                            data={card}\n                            key={\"purchasedCard\" + index}\n                            updateGuestViewProduct={this.updateGuestViewRegistryProduct}\n                            hideDetails={true}\n                          />)\n                        :\n                        <div className=\"row\">\n                          {this.state.reservedAndPurchasedProducts.map((card, index) =>\n                            <GuestTileCard\n                              className=\"col-12 col-md-6 col-xl-4 mb-5\"\n                              data={card}\n                              key={\"purchasedCard\" + index}\n                              updateGuestViewProduct={this.updateGuestViewRegistryProduct}\n                              hideDetails={true}\n                            />)}\n                        </div>\n                      }\n                    </div> : null}\n                </div>\n              </div>\n            </div>\n            <Toast/>\n            <Modal\n              size='md'\n              show={this.state.isSendMessageModalOpen}\n              title={modalTitle}\n              closeModal={() => this.setState({isSendMessageModalOpen: false})}>\n              {modalBody}\n            </Modal>\n          </>\n        )\n      }\n    }\n\n    // Default return\n    return <></>\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    stateGuestViewRegistry: state.guestView.info,\n    stateAddedProducts: state.guestView.product,\n    activeSortFilterState: state.guestView.activeGuestSortFilter,\n    stateFilterApplied: state.guestView.guestViewFilterApplied.childFilter,\n    stateGuestViewPagination: state.guestView.paginationInfo,\n    stateCategoriesInfo: state.guestView.checkList,\n    stateGuestGiftsRedirectionInfo: state.guestView.redirectionInfo,\n    stateSeo: state.registry.seo,\n    stateRegistryInfo: state.registry,\n    stateGuestViewRootRegistry: state.guestView,\n    stateIsGuestViewRegistry: state.viewRegistry.guestViewRegistry\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(GuestView);","import React, {useEffect, useState} from \"react\";\nimport ViewRegistryHeader from \"../view-registry-header/ViewRegistryHeader\";\nimport AddedCard from \"modules/commons/components/added-card/AddedCard\";\nimport {\n  toggleMustHaveProduct,\n  removeProductFromCartHandler,\n  getProducts,\n  updateViewRegistryPosition,\n  getCategories,\n  updateViewRegistryTourFlag,\n  updateMushHaveTourFlag,\n  setMetaInfoToDom, checkIsCashFund, addAlreadyBoughtProductQuantity\n} from \"utils/commonFunction\";\nimport {useSelector, useDispatch} from 'react-redux';\nimport SortFilterSection from '../../components/sort-filter-section/SortFilterSection';\nimport {\n  setViewRegistryProducts,\n  clearViewFilter,\n  setViewFilterCategory,\n  setChildViewFilter\n} from '../../ViewRegistryActions';\nimport {\n  sortableContainer,\n  sortableElement,\n} from 'react-sortable-hoc';\nimport arrayMove from 'array-move';\nimport './ViewRegistryHome.scss';\nimport ViewFilter from \"modules/view-registry/components/view-filter/ViewFilter\";\nimport Button from \"modules/commons/components/button-component/ButtonComponent\";\nimport {FILTERS, SHARE_REGISTRY_SKELETON_SIZE} from \"utils/constants\"\nimport {MEDIA_URL_PREFIX} from \"utils/constants\";\nimport {graphQL} from 'api/axios';\nimport {GET_PRODUCTS} from 'api/queries';\nimport {TOUR_UPDATE_FLAG} from 'api/mutations';\nimport GuestViewCard from \"modules/guest-view/components/GuestViewCard\";\nimport Tour from 'reactour';\nimport TourCard from 'modules/commons/components/tour-card/TourCard';\nimport {VIEW_REGISTRY_STEPS, MUST_HAVE_STEPS} from 'utils/constants';\nimport AddGift from \"modules/commons/components/add-gift/AddGift\";\nimport {setLoader, updateRegistryInfo} from \"modules/registry/RegistryActions\";\nimport GuestView from \"modules/guest-view/GuestView\";\nimport ShareRegistrySkeleton from \"../../../commons/components/skeleton/share-registry-skeleton/ShareRegistrySkeleton\";\n\nconst ViewRegistryHome = () => {\n\n  const dispatch = useDispatch()\n  let stateSeo = useSelector(state => state.registry.seo)\n  let stateIsGuestViewRegistry = useSelector(state => state.viewRegistry.guestViewRegistry)\n  let stateLoader = useSelector(state => state.registry.loader)\n  let stateAddedProducts = useSelector(state => state.myRegistry.addedProducts)\n  let stateViewRegistryProducts = useSelector(state => state.viewRegistry.viewRegistryProducts)\n  const activeSortFilterState = useSelector(state => state.viewRegistry.activeSortFilter)\n  const stateFilterApplied = useSelector(state => state.viewRegistry.viewFilterApplied.childFilter)\n  const stateRegistryInfo = useSelector(state => state.registry.info)\n  const stateCategoriesInfo = useSelector(state => state.myRegistry.checkList)\n  const stateGuestViewRegistry = useSelector(state => state.viewRegistry.guestViewRegistry)\n  let filterCountState = useSelector(state => state.myRegistry.filterCount)\n  const [localAddedProductState, handleFilterProductChange] = useState([])\n  let [filterCategoryLimit, setFilterCategoryLimit] = useState([])\n  const [isTourOpen, setIsTourOpen] = useState(false)\n  const [isMustHaveTour, setIsMustHaveTour] = useState(false)\n  const [steps, setSteps] = useState([])\n  const [totalProductCount, setTotalProductCount] = useState(null)\n\n  // Constant variables for filters\n  const AVAILABLE = \"available\"\n  const RESERVED = \"reserved\"\n  const PURCHASED = \"purchased\"\n  const PRICE_1 = \"price-1\"\n  const PRICE_2 = \"price-2\"\n  const PRICE_3 = \"price-3\"\n  const MONICA_AND_ANDY = \"monicaandandy\"\n  const ELSEWHERE = \"elsewhere\"\n\n  // Setting Meta info to DOM\n  if (stateSeo && !stateIsGuestViewRegistry) {\n    setMetaInfoToDom(stateSeo['view-registry-ma'], \"view-registry\")\n  }\n\n  // Updating product count in filter categories\n  const updateFilterList = (registryItemsAnalysisCount, categoryData, filterApplied) => {\n\n    let newFilterList = [\n      {\n        id: \"giftStatus\",\n        display: \"Gift Status\",\n        child: [\n          {\n            id: AVAILABLE,\n            display: FILTERS.AVAILABLE_DISPLAY,\n            count: registryItemsAnalysisCount.totalAvailable\n          },\n          {\n            id: RESERVED,\n            display: FILTERS.RESERVED_DISPLAY,\n            count: registryItemsAnalysisCount.totalReserved\n          },\n          {\n            id: PURCHASED,\n            display: FILTERS.PURCHASED_DISPLAY,\n            count: registryItemsAnalysisCount.totalPurchased\n          }\n        ]\n      },\n      {\n        id: \"categories\",\n        display: FILTERS.CATEGORIES_DISPLAY,\n        // limit: getLimitOfFliter(\"categories\") ? getLimitOfFliter(\"categories\") : 6,\n        child: [...stateCategoriesInfo].filter(category => {\n          let id = category.category.id\n          let count = categoryData[id]\n          if (count > 0) {\n            return true\n          }\n        }).map(category => {\n          let newCategory = {...category}\n          let id = category.category.id\n          newCategory.id = category.category.id\n          newCategory['display'] = newCategory.categoryName\n          newCategory['count'] = categoryData[id]\n          return newCategory\n        })\n      },\n      {\n        id: \"price\",\n        display: FILTERS.PRICE_DISPLAY,\n        child: [\n          {\n            id: PRICE_1,\n            display: FILTERS.PRICE_DISPLAY_1,\n            count: registryItemsAnalysisCount.under50\n          },\n          {\n            id: PRICE_2,\n            display: FILTERS.PRICE_DISPLAY_2,\n            count: registryItemsAnalysisCount.between50100\n          },\n          {\n            id: PRICE_3,\n            display: FILTERS.PRICE_DISPLAY_3,\n            count: registryItemsAnalysisCount.moreThan100\n          }\n        ]\n      },\n      {\n        id: \"store\",\n        display: FILTERS.STORE_DISPLAY,\n        child: [\n          {\n            id: MONICA_AND_ANDY,\n            display: FILTERS.MONICA_AND_ANDY_DISPLAY,\n            count: registryItemsAnalysisCount.maStoreItems\n          },\n          {\n            id: ELSEWHERE,\n            display: FILTERS.ELSEWHERE_DISPLAY,\n            count: registryItemsAnalysisCount.otherStoreItems\n          },\n        ]\n      },\n\n    ]\n\n    // Removing All other applied filters\n    let allChildFilterCat = []\n    for (let filterCat of newFilterList) {\n      for (let childCat of filterCat.child) {\n        allChildFilterCat.push(childCat)\n      }\n    }\n    let finalFilterApplied = []\n    for (let item of filterApplied) {\n      for (let ele of allChildFilterCat) {\n        if (ele.id === item && ele.count > 0) {\n          finalFilterApplied.push(item)\n        }\n      }\n    }\n\n    // Setting total Product Count\n    // TODO: Uncomment this if in future we have to show product count\n    // if ((finalFilterApplied.includes(MONICA_AND_ANDY) && finalFilterApplied.includes(ELSEWHERE))\n    //   || (!finalFilterApplied.includes(MONICA_AND_ANDY) && !finalFilterApplied.includes(ELSEWHERE))\n    // ) {\n    //   setTotalProductCount(registryItemsAnalysisCount.maStoreItems + registryItemsAnalysisCount.otherStoreItems)\n    // } else if (finalFilterApplied.includes(MONICA_AND_ANDY)) {\n    //   setTotalProductCount(registryItemsAnalysisCount.maStoreItems)\n    // } else if (finalFilterApplied.includes(ELSEWHERE)) {\n    //   setTotalProductCount(registryItemsAnalysisCount.otherStoreItems)\n    // }\n\n    // Setting Total quality count for all products\n    setTotalProductCount(registryItemsAnalysisCount.totalAddedGifts)\n\n    dispatch(setChildViewFilter(finalFilterApplied))\n    dispatch(setViewFilterCategory(newFilterList))\n    return newFilterList\n  }\n\n  const getFiltersApplied = (stateFilterApplied, activeSortFilterState) => {\n    const childFilterArray = [...stateFilterApplied]\n    let filterApplied = {}\n    // For Gift Status\n    if (childFilterArray.includes(AVAILABLE)) {\n      filterApplied.isAvailable = true\n    }\n    if (childFilterArray.includes(RESERVED)) {\n      filterApplied.isReserved = true\n    }\n    if (childFilterArray.includes(PURCHASED)) {\n      filterApplied.isPurchased = true\n    }\n\n    // For Sort\n    if (activeSortFilterState.sortId === 2) {\n      filterApplied.sortBy = 'item__price'\n    } else if (activeSortFilterState.sortId === 3) {\n      filterApplied.sortBy = '-item__price'\n    }\n\n    // For Store\n    let store = []\n    if (childFilterArray.includes(MONICA_AND_ANDY)) {\n      store.push(MONICA_AND_ANDY)\n    }\n    if (childFilterArray.includes(ELSEWHERE)) {\n      store.push(ELSEWHERE)\n    }\n    if (store.length) {\n      filterApplied.store = store\n    }\n\n    let lessThanEqual = 0\n    let greaterThanEqual = 0\n    let hasPriceFilter = false\n    // For Price\n    if (childFilterArray.includes(PRICE_1) &&\n      childFilterArray.includes(PRICE_2) &&\n      childFilterArray.includes(PRICE_3)) {\n      greaterThanEqual = 0\n      hasPriceFilter = true\n    } else if (childFilterArray.includes(PRICE_1) &&\n      childFilterArray.includes(PRICE_2)) {\n      lessThanEqual = 100\n      hasPriceFilter = true\n    } else if (childFilterArray.includes(PRICE_1) &&\n      childFilterArray.includes(PRICE_3)) {\n      lessThanEqual = 49.99\n      greaterThanEqual = 100\n      hasPriceFilter = true\n    } else if (childFilterArray.includes(PRICE_2) &&\n      childFilterArray.includes(PRICE_3)) {\n      greaterThanEqual = 50\n      hasPriceFilter = true\n    } else if (childFilterArray.includes(PRICE_1)) {\n      lessThanEqual = 49.99\n      hasPriceFilter = true\n    } else if (childFilterArray.includes(PRICE_2)) {\n      greaterThanEqual = 50\n      lessThanEqual = 100\n      hasPriceFilter = true\n    } else if (childFilterArray.includes(PRICE_3)) {\n      greaterThanEqual = 100\n      hasPriceFilter = true\n    }\n    if (hasPriceFilter) {\n      filterApplied.price_Lte = lessThanEqual\n      filterApplied.price_Gte = greaterThanEqual\n    }\n\n    let categories = []\n    // For categories\n    for (let cat of [...stateCategoriesInfo]) {\n      if (childFilterArray.includes(cat.category.id)) {\n        categories.push(cat.category.id)\n      }\n    }\n    if (categories.length) {\n      filterApplied.categories = categories\n    }\n\n    return filterApplied\n  }\n\n  const toggleMustHave = (ev, card, dispatch) => {\n    ev.stopPropagation()\n    if (!stateRegistryInfo.isMustHaveApplied) {\n      let steps = {...MUST_HAVE_STEPS}\n      steps[0].selector = '[data-tut=\"must-have-' + card.id + '\"]';\n      steps.length = 1;\n\n      setIsMustHaveTour(true)\n      setSteps(steps)\n      setIsTourOpen(true)\n    }\n    toggleMustHaveProduct(card, dispatch)\n  }\n\n  const SortableItem = sortableElement(({card, index}) => (\n    <li className=\"card-list-item\"\n        data-tut={localAddedProductState[0].id === card.id ? \"view-step-two\" : card.id + '-' + index}>\n      <AddedCard\n        hasHoverClass='view-registey-added-card-hover'\n        data={card} key={\"view-addedCard-\" + card.id}\n        isViewCard={true}\n        toggleMustHave={(e) => toggleMustHave(e, card, dispatch)}\n        draggable={true}\n        disabledDrag={card.disabledDrag}\n        removeProductFromCartHandler={() => removeProductFromCartHandler(card, stateRegistryInfo.id, dispatch)}\n      />\n    </li>\n  ));\n\n  let onSortEnd = ({oldIndex, newIndex}) => {\n    let itemsOldPosition = arrayMove([...stateViewRegistryProducts], oldIndex, oldIndex)\n    let items = arrayMove([...stateViewRegistryProducts], oldIndex, newIndex)\n    updateViewRegistryPosition(stateRegistryInfo.id, items, itemsOldPosition, dispatch)\n    if (!stateRegistryInfo.isFeatured) {\n      let registryInfo = {...stateRegistryInfo}\n      registryInfo.isFeatured = true\n      dispatch(updateRegistryInfo(registryInfo))\n    }\n    dispatch(setViewRegistryProducts(items))\n  };\n\n  const SortableContainer = sortableContainer(({children}) => {\n    return <ul className=\"p-0\">{children}</ul>;\n  });\n\n  const getSortedProductsByFilters = async (addedProducts, filterApplied) => {\n    let finalFilterProduct = []\n    let filtersApplied = getFiltersApplied(filterApplied, activeSortFilterState)\n    let reqData = {\n      query: GET_PRODUCTS,\n      variables: {\n        registryId: stateRegistryInfo.id,\n        ...filtersApplied\n      }\n    }\n    dispatch(setLoader(true))\n    await graphQL(reqData).then(res => {\n      if (res.data.data.registryItems) {\n        // Storing Product of GuestView\n        let responseData = [...res.data.data.registryItems.registryItems.edges].map(item => {\n          let newItemObj = {...item.node}\n          delete newItemObj.registryitemImage;\n          if (item.node.registryitemImage.length > 0) {\n            newItemObj.item.imageUrl = (MEDIA_URL_PREFIX.LOCAL_MEDIA_URL ? MEDIA_URL_PREFIX.LOCAL_MEDIA_URL : \"\") + item.node.registryitemImage[0].image;\n          }\n\n          newItemObj = addAlreadyBoughtProductQuantity(newItemObj)\n\n          return newItemObj;\n        })\n        let finalData = responseData.filter(product => product.registryCategories.length > 0)\n        updateFilterList({...res.data.data.registryItems.registryItemsAnalysisCount}, {...res.data.data.registryItems.categoryData}, filterApplied)\n\n        finalFilterProduct = finalData\n        return finalData\n      }\n      dispatch(setLoader(false))\n    }).catch(err => {\n      dispatch(setLoader(false))\n      if (err.response && err.response.data.errors) {\n        for (const error of err.response.data.errors) {\n          // TODO: Implement toast if necessary\n          console.log(error.message)\n        }\n      }\n    })\n    return finalFilterProduct\n  }\n\n  const getParentCategory = (id) => {\n    return [...stateCategoriesInfo].find((parentCategory) => parentCategory.subCategories.find((subCategory) => subCategory.id === id))\n  }\n\n  const getSortedFilteredProducts = async (addedProducts, activeSortFilterState, viewRegistryProducts, registryInfo, filterApplied = [...stateFilterApplied]) => {\n    dispatch(setLoader(true))\n    let sortedProducts = [];\n    let sortedData = null;\n    let newSortedProducts = null\n    if (filterApplied.length > 0) {\n      newSortedProducts = await getSortedProductsByFilters(addedProducts, filterApplied)\n    } else {\n      await updateFilterList({...filterCountState.registryItemsAnalysisCount}, {...filterCountState.categoryData}, filterApplied)\n      newSortedProducts = [...addedProducts]\n    }\n\n    if (activeSortFilterState.sortId === 1) {\n      if (filterApplied.length > 0) {\n        sortedData = newSortedProducts\n      } else if (registryInfo.isFeatured) {\n        sortedData = viewRegistryProducts ? [...viewRegistryProducts] : [];\n      } else {\n        sortedData = sortByMustHave([...newSortedProducts])\n        if (sortedData.length > 0) {\n          let viewRegistryProductsId = sortedData.map((productData, index) => {\n            return {'id': productData.id}\n          })\n        }\n      }\n    } else if (activeSortFilterState.sortId === 2) {\n      sortedData = sortByLowToHigh([...newSortedProducts])\n    } else if (activeSortFilterState.sortId === 3) {\n      sortedData = sortByHighToLow([...newSortedProducts])\n    }\n\n    // Checking if there is product details other then id\n    if (sortedData.length && !sortedData[0].item) {\n      let viewRegistryProductsId = sortedData.map((productData, index) => {\n        return {'id': productData.id}\n      })\n\n      for (let product of viewRegistryProductsId) {\n        for (let addProduct of addedProducts) {\n          if (product.id === addProduct.id) {\n            sortedProducts.push(addProduct);\n            break;\n          }\n        }\n      }\n    }\n    // If there is product details\n    else {\n      sortedProducts = [...sortedData]\n    }\n\n    handleFilterProductChange([...sortedProducts])\n    dispatch(setLoader(false))\n    return sortedProducts;\n  }\n\n  const sortByMustHave = (productList) => {\n    return productList.sort(function (a, b) {\n      return b.mostWanted - a.mostWanted\n    });\n  }\n\n  const sortByFeatured = (productList) => {\n    return productList.sort(function (a, b) {\n      return a.isFeatured - b.isFeatured\n    });\n  }\n\n  const sortByLowToHigh = (productList) => {\n    return productList.sort((a, b) => {\n      return a.item.price - b.item.price\n    });\n  }\n\n  const sortByHighToLow = (productList) => {\n    return productList.sort((a, b) => {\n      return b.item.price - a.item.price\n    });\n  }\n\n  //Clear filter state\n  const clearFilterHandler = (ev) => {\n    ev.preventDefault()\n    dispatch(clearViewFilter())\n  }\n\n  const closeTour = () => {\n    // For View tour\n    if (!stateRegistryInfo.isViewRegistryVisited && !isMustHaveTour) {\n      updateViewRegistryTourFlag(stateRegistryInfo, dispatch)\n    }\n\n    // For must-have\n    if (isMustHaveTour) {\n      updateMushHaveTourFlag(stateRegistryInfo, dispatch)\n    }\n\n    setIsTourOpen(false)\n  }\n\n  const EmptyAddedCard = () => {\n    return (\n      <div className=\"empty-added-card pb-5 pt-0 pr-0 pr-sm-0 pr-md-2 px-2 px-md-0 mt-2 mt-md-5\" data-tut=\"view-step-two\">\n        <div className=\"row\">\n          <div className=\"col-12\">\n            <i className=\"empty-added-drag-icon mx-auto\"/>\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col-12 col-md-2\">\n            <div className=\"pl-0 pl-md-2\">\n                <div className=\"empty-added-card-no-product-image\"/>\n            </div>\n          </div>\n          <div className=\"col-12 col-md-6\">\n            <div className=\"text-sm empty-added-card-category empty-rectangle my-3 my-md-0\"></div>\n            <div className=\"empty-added-card-title empty-rectangle mt-1\"></div>\n            <div className=\"empty-added-card-price empty-rectangle mt-1\"></div>\n          </div>\n          <div className=\"col-12 col-md-4 empty-added-card-buttons\">\n            <div className=\"d-flex align-items-baseline justify-content-end mr-md-1 mr-3\">\n              <div className=\"empty-added-card-must-have mr-4\"></div>\n              <div className=\"empty-added-card-more empty-rectangle mr-4\"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  useEffect(() => {\n    let sortedData = sortByFeatured([...stateAddedProducts])\n    let viewRegistryProducts = sortedData.map((productData, index) => {\n      return {'id': productData.id}\n    })\n    dispatch(setViewRegistryProducts(viewRegistryProducts))\n  }, [stateAddedProducts])\n\n  useEffect(() => {\n    let filteredSortProducts = getSortedFilteredProducts(stateAddedProducts, activeSortFilterState, stateViewRegistryProducts, stateRegistryInfo)\n    filteredSortProducts.then(product => {\n      handleFilterProductChange(product)\n    })\n  }, [stateAddedProducts, activeSortFilterState, stateViewRegistryProducts, stateGuestViewRegistry])\n\n  useEffect(() => {\n    document.body.style.overflow = isTourOpen || stateLoader ? \"hidden\" : \"auto\";\n  }, [stateLoader, isTourOpen])\n\n  // TODO: Remove comments if needed\n  // let filteredSortProducts = getSortedFilteredProducts(stateAddedProducts, activeSortFilterState, stateViewRegistryProducts,  stateRegistryInfo)\n\n  // For Tour\n  if (!isMustHaveTour && !stateRegistryInfo.isViewRegistryVisited && stateCategoriesInfo.length && !isTourOpen && !stateRegistryInfo?.user?.isCurator) {\n    setSteps(VIEW_REGISTRY_STEPS)\n    setIsTourOpen(true)\n  } else if (!isMustHaveTour && isTourOpen && stateRegistryInfo.isViewRegistryVisited && stateCategoriesInfo.length) {\n    setIsTourOpen(false)\n  }\n\n  // For Loader\n  if (stateCategoriesInfo.length <= 0) {\n    dispatch(setLoader(true))\n  }\n\n  return (\n    stateGuestViewRegistry ?\n      <GuestView urlSlug={stateRegistryInfo.urlSlug}/>\n      :\n      <>\n        <ViewRegistryHeader\n          hasNoProducts={stateAddedProducts.length <= 0}\n          disableScroll={isTourOpen || stateLoader}\n          />\n        {/* If product are added */}\n        {localAddedProductState.length || (!stateRegistryInfo.isViewRegistryVisited && isTourOpen) ?\n          <div className=\"container mt-7\">\n            <div className=\"row\">\n              <div className=\"col-12 col-lg-2 d-none d-lg-inline-block\">\n                <ViewFilter\n                  className={!stateRegistryInfo.isViewRegistryVisited && isTourOpen && stateAddedProducts.length <= 0 ? \"d-none\" : \"\"}\n                  setFilterhandler={(filterApplied) => {\n                    getSortedFilteredProducts(stateAddedProducts, activeSortFilterState, stateViewRegistryProducts, stateRegistryInfo, filterApplied)\n                  }}\n                />\n              </div>\n              <div className=\"col\"></div>\n              <div className=\"col-12 col-lg-9 px-3 px-mb-0\">\n\n                {/* Top Filter Section */}\n                <SortFilterSection\n                  productCount={totalProductCount}\n                  setFilterhandler={() => {\n                    getSortedFilteredProducts(stateAddedProducts, activeSortFilterState, stateViewRegistryProducts, stateRegistryInfo)\n                  }}\n                />\n                {/* Added Products */}\n                {!stateGuestViewRegistry ?\n                  localAddedProductState.length > 0 ?\n                    <div className=\"mt-2 mt-md-5\">\n                      <SortableContainer onSortEnd={onSortEnd} helperClass=\"drag-add-card\" axis=\"y\" lockAxis=\"y\"\n                                         useWindowAsScrollContainer={true}\n                                         disableAutoscroll={false} useDragHandle>\n                        {localAddedProductState.map((card, index) =>\n                          <SortableItem key={`item-${index}`} index={index}\n                                        card={{...card, disabledDrag: activeSortFilterState.sortId !== 1}}\n                                        disabled={activeSortFilterState.sortId !== 1 || stateFilterApplied.length !== 0}/>\n                        )}\n                      </SortableContainer>\n                    </div> :\n                    !stateRegistryInfo.isViewRegistryVisited && isTourOpen ?\n                      <EmptyAddedCard />\n                    :\n                    <div className=\"d-flex flex-column empty-filter mt-6 pb-8\">\n                      <div className=\"font-body empty-filter-title text-center mx-auto mt-10\">\n                        <p>We couldnt find any gifts that matches your filters...</p>\n                        <p>Please try clearing Filters to view gifts.</p>\n                      </div>\n                      <div className=\"mx-auto mt-3\">\n                        <Button\n                          variant=\"primary\"\n                          className=\"px-3 py-1 font-medium empty-filter-title text-body\"\n                          onClick={(ev) => clearFilterHandler(ev)}\n                        >\n                          Clear Filters\n                        </Button>\n                      </div>\n                    </div> :\n                  // Guest View Cards\n                  <div className=\"mt-2 mt-md-5\">\n                    {localAddedProductState.length > 0 ?\n                      localAddedProductState.map((card, index) =>\n                        <GuestViewCard\n                          data={card} key={\"addedCard\" + index}\n                        />) : null}\n                  </div>\n                }\n              </div>\n            </div>\n          </div> :\n          // If there is no product added\n          stateCategoriesInfo.length ?\n            <div className=\"container mt-7\">\n              <div className=\"row align-items-center\">\n                <h4 className=\"col font-medium filter-section-total-items\">0 Gifts</h4>\n                <div className=\"col text-right\">\n                  <AddGift title={'Add item'}/>\n                </div>\n              </div>\n              <div className=\"row\">\n                <div className=\"col-12\">\n                  <div className=\"d-flex flex-column empty-filter mt-6 pt-10 pb-15\">\n                    <h4 className=\"empty-filter-title text-center mx-auto\">\n                      Your registry hasnt been started.\n                    </h4>\n                    <h4 className=\"empty-filter-title text-center mx-auto\">\n                      Head to Build a Registry for a guided registry experience.\n                    </h4>\n                    <h4 className=\"empty-filter-title text-center mx-auto\">\n                      Or click Add item button to start adding products from this page.\n                    </h4>\n                  </div>\n                </div>\n              </div>\n            </div>\n            : null\n        }\n        <ShareRegistrySkeleton\n          registryInfo={stateRegistryInfo}\n          elementId=\"screenshot-section\"\n          height={`${SHARE_REGISTRY_SKELETON_SIZE.height}px`}\n          width={`${SHARE_REGISTRY_SKELETON_SIZE.width}px`}\n        />\n        {isTourOpen ?\n          <Tour\n            highlightedMaskClassName='tour-bg'\n            steps={steps}\n            isOpen={isTourOpen}\n            CustomHelper={TourCard}\n            disableInteraction={true}\n            closeWithMask={false}\n            onRequestClose={closeTour}/> : null}\n      </>\n  )\n}\n\nexport default ViewRegistryHome;","import React from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\nimport route from \"utils/routes\";\nimport ViewRegistryHome from \"./containers/view-registry-home/ViewRegistryHome\";\n\nclass ViewRegistry extends React.Component {\n    render() {\n        return (\n            <Switch>\n                <Route exact path={route.VIEW_REGISTRY.HOME} component={ViewRegistryHome} />\n            </Switch>\n        )\n    }\n}\n\nexport default ViewRegistry;","import React from \"react\";\nimport \"./TodoWidget.scss\";\nimport {connect} from \"react-redux\";\nimport {getTodoList} from \"../../../../utils/commonFunction\";\n\nclass TodoWidget extends React.Component {\n\n  performTodoAction = todo => {\n    //  Perform action related to to-do\n    if (todo.redirect) {\n      window.open(todo.redirectUrl, \"_self\")\n    }\n  }\n\n  todoButtonClickHandler = (ev) => {\n    let buttonEl = document.querySelector(\".baby-steps-button\")\n    let contentEl = document.querySelector(\".baby-steps-todo-content\");\n    if (contentEl && contentEl.classList.contains(\"remove-todo-content\")){\n      buttonEl.blur()\n    } else {\n      contentEl.classList.add(\"remove-todo-content\")\n    }\n  }\n\n  removeExtraTodoContentClass = () => {\n    let contentEl = document.querySelector(\".baby-steps-todo-content\");\n    if (contentEl && contentEl.classList.contains(\"remove-todo-content\")){\n      contentEl.classList.remove(\"remove-todo-content\")\n    }\n  }\n\n  render() {\n    if (this.props.stateTodo === null && this.props.stateRegistryInfo.id) {\n      getTodoList(this.props.stateRegistryInfo.id, this.props.dispatch)\n    }\n\n    return (\n      <div className=\"baby-registry-todo-widget\">\n        {this.props.stateTodo !== null && this.props.stateTodo.length > 0 ?\n          (\n            //  When there is To-do\n            <div className=\"baby-registry-todo-section\">\n              <a\n                tabIndex={1}\n                onClick={(ev) => this.todoButtonClickHandler(ev)}\n                onBlur={this.removeExtraTodoContentClass}\n                className=\"baby-steps-button d-flex align-items-center pt-1 pt-md-3 pb-0 pb-md-3 pl-1 pl-md-4 pr-1 pr-md-8\">\n                <i className=\"baby-steps-icon\"/>\n                <div className=\"ml-5 baby-steps-text\">\n                  <p className=\"text-body font-medium\">{this.props.stateTodo.length} Baby {`Step${this.props.stateTodo.length > 1 ? 's': ''}`}</p>\n                  <p className=\"text-sm text-left\">to take next!</p>\n                </div>\n              </a>\n\n              <div className=\"baby-steps-todo-content p-2\">\n                {this.props.stateTodo.map((todo, index) => (\n                  <div className=\"baby-step-todo d-flex justify-content-between py-2 align-items-center\" key={`todo-${index}`}>\n                    <p className=\"text-body mr-3\">{todo.label}</p>\n                    <button className=\"baby-step-action-btn\"\n                            onClick={() => this.performTodoAction(todo)}/>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )\n          :\n          this.props.stateTodo !== null ?\n            //  When there is no To-do\n            <div className=\"baby-registry-no-todo-section d-flex align-items-center py-4\">\n              <i className=\"no-todo-icon\"/>\n              <div className=\"ml-2\">\n                <p className=\"text-body font-medium\">Great job!</p>\n                <p className=\"text-sm\">More to come, soon.</p>\n              </div>\n            </div>\n            : null\n        }\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  stateTodo: state.registry.todo,\n  stateRegistryInfo: state.registry.info\n})\n\nexport default connect(\n  mapStateToProps\n)(TodoWidget);","import React from \"react\";\nimport \"./Filters.scss\";\nimport {connect} from 'react-redux';\nimport CheckBox from \"../../../commons/components/check-box/CheckBox\";\nimport {setTrackGiftsFilters} from \"../../TrackGiftsAction\";\nimport {getTrackGiftsProduct} from \"../../../../utils/commonFunction\";\nimport defaultData from \"data/ReducerDefaultData.json\"\n\nclass Filters extends React.Component {\n\n  filterChangeHandler = async filterId => {\n    let allUnselected = true\n    let newFilters = this.props.stateFilters.map(filter => {\n      let newFilter = {...filter}\n      if (newFilter.id === filterId) {\n        newFilter.selected = !newFilter.selected\n      }\n      if (newFilter.count > 0 && newFilter.selected) {\n        allUnselected = false\n      }\n      return newFilter\n    })\n\n    // Resetting filter to default when all filter are unselected\n    // if (allUnselected){\n    //   newFilters = defaultData.trackGifts.filters\n    // }\n\n    await this.props.dispatch(setTrackGiftsFilters(newFilters))\n    getTrackGiftsProduct(true, newFilters, this.props.stateTrackGiftsProducts, this.props.stateTrackGiftsPagination, this.props.stateTrackGiftsView, this.props.stateRegistryInfo, this.props.stateTrackGiftsSearch, this.props.dispatch)\n  }\n\n  render() {\n    return (\n      <div className=\"track-gifts-filters\">\n        <p className=\"text-sm\">Filters</p>\n        <div className=\"mt-3\">\n          {this.props.stateFilters.map(filter => (\n            filter.count > 0 ?\n              <CheckBox\n                display={filter.text}\n                count={filter.count}\n                checked={filter.selected ? \"checked\" : \"\"}\n                id={`trackGiftFilter-${filter.id}`}\n                className=\"mb-3\"\n                textClass=\"track-gifts-filter-text\"\n                changeHandler={() => this.filterChangeHandler(filter.id)}\n              />\n              :\n              null\n          ))}\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  stateFilters: state.trackGifts.filters,\n  stateTrackGiftsView: state.trackGifts.activeView,\n  stateTrackGiftsProducts: state.trackGifts.products,\n  stateTrackGiftsPagination: state.trackGifts.paginationInfo,\n  stateRegistryInfo: state.registry.info,\n  stateTrackGiftsSearch: state.trackGifts.search\n})\n\nexport default connect(\n  mapStateToProps\n)(Filters);","import React from \"react\";\nimport \"./ThankYouList.scss\"\nimport {downloadThankYouList} from \"../../../../api/axios\";\nimport {connect} from 'react-redux';\nimport {withRouter} from \"react-router\";\nimport {getTodoList} from \"../../../../utils/commonFunction\";\nimport {ROUTES} from \"utils/cdn-assets-links\";\n\nclass ThankYouList extends React.Component {\n\n  componentDidMount() {\n    let queryParams = new URLSearchParams(window.location.search)\n    if (queryParams.has('download-thank-you-list')) {\n      this.downloadClickHandler()\n      this.setState({\n        showShareRegistry: true\n      })\n      queryParams.delete('download-thank-you-list')\n      this.props.history.replace({\n        search: queryParams.toString(),\n      })\n    }\n  }\n\n  saveData = (function () {\n    const a = document.createElement(\"a\");\n    document.body.appendChild(a);\n    a.style = \"display: none\";\n    return function (data, fileName) {\n      const blob = new Blob([data], {type: \"octet/stream\"}),\n        url = window.URL.createObjectURL(blob);\n      a.href = url;\n      a.download = fileName;\n      a.click();\n      window.URL.revokeObjectURL(url);\n    };\n  }());\n\n  downloadClickHandler = (ev = null) => {\n    if (ev) {\n      ev.preventDefault()\n    }\n    downloadThankYouList(this.props.stateRegistryInfo.id).then(res => {\n      if (res.data) {\n        // Converting csv response to downloaded file\n        getTodoList(this.props.stateRegistryInfo.id, this.props.dispatch)\n        this.saveData(res.data, `${this.props.stateRegistryInfo.displayName}-thank-you-list.csv`);\n      }\n\n    }).catch(err => {\n      console.error({...err.response.data})\n    })\n  }\n\n  render() {\n    let displayThankYou = false;\n    for (let filter of this.props.stateTrackGiftsFilters) {\n      if (filter.id !== 4 && filter.count > 0){\n        displayThankYou = true;\n        break;\n      }\n    }\n\n    if (displayThankYou) {\n      return (\n        <div className=\"track-gifts-thank-you-list p-4 mr-0 mr-md-5\">\n          <img src={ROUTES.file_heart_svg}\n               alt=\"Thank you list\"/>\n          <p className=\"mt-2 text-body font-medium\">Thank you list</p>\n          <p className=\"mt-1 text-sm track-gifts-thank-you-desc\">Let your gift-givers know that you are thankful to\n            them.</p>\n          <a href=\"#\" onClick={(ev) => this.downloadClickHandler(ev)}\n             className=\"mt-1 track-gifts-thank-you-link text-sm\">Download</a>\n        </div>\n      );\n    } else {\n      return null;\n    }\n  }\n}\n\nconst mapStateToProps = state => ({\n  stateRegistryInfo: state.registry.info,\n  stateTrackGiftsFilters: state.trackGifts.filters\n})\n\nexport default connect(\n  mapStateToProps\n)(withRouter(ThankYouList));","import React from \"react\";\nimport ViewBy from \"../../components/view-by/ViewBy\";\nimport Filters from \"../../components/filters/Filters\";\nimport ThankYouList from \"../../components/thank-you-list/ThankYouList\";\n\nclass TrackGiftsSidebar extends React.Component {\n  render() {\n    return (\n      <>\n        <ViewBy/>\n        <div className=\"mt-4\">\n          <Filters/>\n        </div>\n        <div className=\"mt-4 d-none d-lg-inline-block\">\n          <ThankYouList />\n        </div>\n      </>\n    );\n  }\n}\n\nexport default TrackGiftsSidebar;","import React from \"react\";\nimport \"./Search.scss\";\nimport {connect} from \"react-redux\";\nimport {setTrackGiftsSearch} from \"../../TrackGiftsAction\";\nimport {getTrackGiftsProduct} from \"../../../../utils/commonFunction\";\n\nclass Search extends React.Component {\n  inputRef = React.createRef()\n  inputContainer = React.createRef()\n  state = {\n    searched: false\n  }\n\n  applySearch = () => {\n    let searchState = {...this.props.stateTrackGiftsSearch}\n    searchState.searched = true\n    getTrackGiftsProduct(true, this.props.stateTrackGiftsFilters, this.props.stateTrackGiftsProducts, this.props.stateTrackGiftsPagination, this.props.stateTrackGiftsView, this.props.stateRegistryInfo, this.props.stateTrackGiftsSearch, this.props.dispatch)\n    this.setState({searched: true})\n    this.props.dispatch(setTrackGiftsSearch(searchState))\n    if (this.props.componentRef) {\n      this.props.componentRef.current.classList.toggle(\"track-gifts-show-search-dialog\")\n    }\n  }\n\n  searchInputChangeHandler = async () => {\n    if (this.inputRef.current && this.inputContainer.current) {\n      let searchInput = this.inputRef.current\n      if (searchInput.value.length > 0) {\n        if (!this.inputContainer.current.classList.contains(\"track-gifts-search-container-focus\")) {\n          //Adding class to increase width\n          this.inputContainer.current.classList.add(\"track-gifts-search-container-focus\")\n        }\n      } else {\n        if(this.state.searched) {\n          this.clearClickHandler()\n        }\n      }\n      await this.props.dispatch(setTrackGiftsSearch({\n        searched: false,\n        searchText: searchInput.value\n      }))\n    }\n  }\n\n  searchInputFocusHandler = () => {\n    if (this.inputContainer.current) {\n      if (!this.inputContainer.current.classList.contains(\"track-gifts-search-container-focus\")) {\n        //Adding class to increase width\n        this.inputContainer.current.classList.add(\"track-gifts-search-container-focus\")\n      }\n    }\n  }\n\n  searchInputBlurHandler = () => {\n    if (this.inputRef.current && this.inputContainer.current) {\n      let searchInput = this.inputRef.current\n      if (searchInput.value.length <= 0) {\n        if (this.inputContainer.current.classList.contains(\"track-gifts-search-container-focus\")) {\n          //Removing class to decrease width\n          this.inputContainer.current.classList.remove(\"track-gifts-search-container-focus\")\n        }\n      }\n\n      if (searchInput.value.length >= 3 && !this.props.stateTrackGiftsSearch.searched) {\n        this.applySearch()\n      }\n    }\n  }\n\n  clearClickHandler = async (ev = null) => {\n    if(ev) {\n      ev.preventDefault()\n    }\n    this.setState({searched: false})\n    await this.props.dispatch(setTrackGiftsSearch({\n      searched: false,\n      searchText: \"\"\n    }))\n    if (this.inputRef.current) {\n      this.inputRef.current.focus()\n    }\n\n    this.applySearch()\n  }\n\n  searchClickHandler = async ev => {\n    ev.preventDefault()\n    this.applySearch()\n  }\n\n  searchOnEnter = (ev) => {\n    ev.persist();\n    ev.preventDefault();\n    if (ev.keyCode === 13) { //Enter keycode is 13\n      this.applySearch()\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"ml-auto track-gifts-search-container\" ref={this.inputContainer}>\n        <input\n          type=\"text\"\n          ref={this.inputRef}\n          placeholder=\"Search my gifts\"\n          value={this.props.stateTrackGiftsSearch.searchText}\n          onKeyUp={(ev) => this.searchOnEnter(ev)}\n          onChange={this.searchInputChangeHandler}\n          onFocus={this.searchInputFocusHandler}\n          onBlur={this.searchInputBlurHandler}\n          className={[\"m-a-unset-line-height track-gifts-search-input pl-6 text-body py-1 w-100 mw-100 mb-0\", this.props.stateTrackGiftsSearch.searched && this.props.stateTrackGiftsSearch.searchText.length > 0 ? \"pr-10\" : \"pr-12\"].join(\" \")}\n        />\n        <i className=\"icon-search track-gifts-search-icon\" />\n        {!this.props.stateTrackGiftsSearch.searched && this.props.stateTrackGiftsSearch.searchText.length > 0 ?\n          <a className=\"track-gifts-search-input-link text-body\" href=\"#\"\n            onClick={(ev) => this.searchClickHandler(ev)}>Search</a>\n          : null}\n        {this.props.stateTrackGiftsSearch.searched && this.props.stateTrackGiftsSearch.searchText.length > 0 ?\n          <a className=\"track-gifts-search-input-link text-body\" href=\"#\"\n            onClick={(ev) => this.clearClickHandler(ev)}>Clear</a>\n          : null}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  stateTrackGiftsSearch: state.trackGifts.search,\n  stateTrackGiftsFilters: state.trackGifts.filters,\n  stateTrackGiftsView: state.trackGifts.activeView,\n  stateTrackGiftsProducts: state.trackGifts.products,\n  stateTrackGiftsPagination: state.trackGifts.paginationInfo,\n  stateRegistryInfo: state.registry.info\n})\n\nexport default connect(\n  mapStateToProps\n)(Search);","import React from \"react\";\nimport \"./AddGift.scss\";\nimport Button from \"../../../commons/components/button-component/ButtonComponent\";\nimport Modal from \"../../../commons/components/modal-component/ModalComponent\";\nimport {graphQL} from \"../../../../api/axios\";\nimport {connect} from 'react-redux'\nimport {TRACK_GIFTS_ADD_GIFT} from \"../../../../api/mutations\";\nimport {getTrackGiftsProduct, isInputTextValid} from \"../../../../utils/commonFunction\";\nimport {toast} from \"react-toastify\";\nimport {EMAIL_RE} from \"utils/constants\";\n\nclass AddGift extends React.Component {\n  state = {\n    show: false,\n    giftName: \"\",\n    storeName: \"\",\n    orderNumber: \"\",\n    userName: \"\",\n    userEmail: \"\",\n    errors: {}\n  }\n\n  openAddGiftModal = () => {\n\n    this.setState({\n      show: true,\n      giftName: \"\",\n      storeName: \"\",\n      orderNumber: \"\",\n      userName: \"\",\n      userEmail: \"\",\n      errors: {}\n    })\n  }\n\n  modalCloseHandler = () => {\n    this.setState({\n      show: false\n    })\n  }\n\n  validData = () => {\n    let valid = true\n    let errors = {}\n\n    if (this.state.giftName.length <= 0) {\n      errors['giftName'] = \"Gift Name is required field\"\n      valid = false\n    }\n\n    if (this.state.userName.length <= 0) {\n      errors['userName'] = \"Name is required field\"\n      valid = false\n    }\n\n    if (this.state.userEmail.length <= 0) {\n      errors['userEmail'] = \"Email address is required field\"\n      valid = false\n    } else {\n      if (!this.state.userEmail.match(EMAIL_RE)) {\n        errors['userEmail'] = \"Invalid Email address\"\n        valid = false\n      }\n    }\n\n    this.setState({\n      errors: errors\n    })\n\n    return valid\n  }\n\n  addGiftClickHandler = () => {\n    if (!this.validData()) {\n      return false\n    }\n\n    let reqData = {\n      query: TRACK_GIFTS_ADD_GIFT,\n      variables: {\n        registryId: this.props.stateRegistryInfo?.id,\n        gifts: [{\n          guestName: this.state.userName ? this.state.userName : null,\n          guestEmail: this.state.userEmail ? this.state.userEmail : null,\n          items: [{\n            title: this.state.giftName ? this.state.giftName : null,\n            quantity: 1,\n            price: 0.0\n          }],\n          orderNo: this.state.orderNumber,\n          storeName: this.state.storeName\n        }]\n      }\n    }\n\n    // if (this.state.storeName) {\n    //   reqData.variables.gifts['storeName'] = this.state.storeName\n    // }\n    //\n    // if (this.state.orderNumber) {\n    //   reqData.variables.gifts['orderNo'] = this.state.orderNumber\n    // }\n\n    graphQL(reqData).then(res => {\n      if (res.data.data.addGift) {\n        toast.success(<p><b>{this.state.giftName} gift added.</b></p>)\n        getTrackGiftsProduct(true, this.props.stateTrackGiftsFilters, this.props.stateTrackGiftsProducts, this.props.stateTrackGiftsPagination, this.props.stateTrackGiftsView, this.props.stateRegistryInfo, this.props.stateTrackGiftsSearch, this.props.dispatch)\n        this.modalCloseHandler()\n      } else if (res.data.errors) {\n        toast.error(\"Some error occurred.\")\n        console.error({...res.data.errors})\n      }\n    }).catch(err => {\n      toast.error(\"Some error occurred.\")\n      console.error(err.response)\n    })\n\n  }\n\n  // Input Change Handlers\n  giftNameChangeHandler = ev => {\n    if (this.state.errors.giftName) {\n      let newErrorState = {...this.state.errors}\n      delete newErrorState.giftName\n      this.setState({\n        errors: newErrorState\n      })\n    }\n\n    if (!isInputTextValid(ev)) {\n      return;\n    }\n    this.setState({\n      giftName: ev.target.value\n    })\n  }\n\n  storeNameChangeHandler = ev => {\n    if (!isInputTextValid(ev)) {\n      return;\n    }\n    this.setState({\n      storeName: ev.target.value\n    })\n  }\n\n  orderNumberChangeHandler = ev => {\n    if (!isInputTextValid(ev)) {\n      return;\n    }\n    this.setState({\n      orderNumber: ev.target.value\n    })\n  }\n\n  userNameChangeHandler = ev => {\n    if (this.state.errors.userName) {\n      let newErrorState = {...this.state.errors}\n      delete newErrorState.userName\n      this.setState({\n        errors: newErrorState\n      })\n    }\n    if (!isInputTextValid(ev)) {\n      return;\n    }\n    this.setState({\n      userName: ev.target.value\n    })\n  }\n\n  userEmailChangeHandler = ev => {\n    if (this.state.errors.userEmail) {\n      let newErrorState = {...this.state.errors}\n      delete newErrorState.userEmail\n      this.setState({\n        errors: newErrorState\n      })\n    }\n    this.setState({\n      userEmail: ev.target.value\n    })\n  }\n\n  render() {\n    return (\n      <div className=\"track-gifts-add-gift-container text-right\">\n\n        <Button\n          variant=\"primary\"\n          className=\"px-3 py-1 text-body font-medium track-gifts-add-gift-button m-a-popover m-a-popover-top-right\"\n          onClick={this.openAddGiftModal}\n        >Add Gift\n          <div className=\"m-a-popover-content px-3 py-2\">\n              <p className=\"text-sm font-weight-normal m-a-popover-content-desc\">Add a gift bought outside your registry so you know who to thank and where to return it if needed</p>\n          </div>\n        </Button>\n\n        <Modal\n          show={this.state.show}\n          title=\"Add Gift\"\n          size=\"md\"\n          footer={\n            <Button\n              variant=\"primary\"\n              onClick={this.addGiftClickHandler}\n              className=\"px-5 py-1 text-body font-medium track-gifts-add-gift-button\"\n            >Add & Close</Button>\n          }\n          closeModal={this.modalCloseHandler}>\n          <div className=\"track-gifts-add-gift-form\">\n\n            {/* Gift Name */}\n            <div className=\"row\">\n              <div className=\"col\">\n                <div className=\"track-gifts-add-gift-input-container\">\n                  <label\n                    className=\"track-gifts-add-gift-input-label track-gifts-add-gift-required text-sm font-medium mb-1\">Gift\n                    Name</label>\n                  <input\n                    type=\"text\"\n                    name=\"gift-name\"\n                    value={this.state.giftName}\n                    onChange={(ev) => this.giftNameChangeHandler(ev)}\n                    placeholder=\"Eg. Coming Home Blanket by Monica+Andy\"\n                    className={[\"m-a-unset-line-height track-gifts-add-gift-input d-block w-100 mw-100 px-2 py-1 text-body mb-0\", this.state.errors.giftName ? \"track-gifts-add-gift-input-error\" : \"\"].join(\" \")}/>\n                  {this.state.errors.giftName ?\n                    <label\n                      className=\"text-sm track-gifts-add-gift-input-error-text\">{this.state.errors.giftName}</label>\n                    : null}\n                </div>\n              </div>\n            </div>\n\n            <div className=\"row mt-2\">\n              {/* Store Name */}\n              <div className=\"col-6\">\n                <div className=\"track-gifts-add-gift-input-container\">\n                  <label className=\"track-gifts-add-gift-input-label text-sm font-medium mb-1\">Store Name</label>\n                  <input\n                    type=\"text\"\n                    name=\"store-name\"\n                    value={this.state.storeName}\n                    onChange={(ev) => this.storeNameChangeHandler(ev)}\n                    className=\"m-a-unset-line-height track-gifts-add-gift-input d-block w-100 mw-100 px-2 py-1 text-body mb-0\"\n                    placeholder=\"Eg. Target\"/>\n                </div>\n              </div>\n\n              {/* Order Number */}\n              <div className=\"col-6\">\n                <div className=\"track-gifts-add-gift-input-container\">\n                  <label className=\"track-gifts-add-gift-input-label text-sm font-medium mb-1\">Order number</label>\n                  <input\n                    type=\"text\"\n                    name=\"order-number\"\n                    value={this.state.orderNumber}\n                    onChange={(ev) => this.orderNumberChangeHandler(ev)}\n                    className=\"m-a-unset-line-height track-gifts-add-gift-input d-block w-100 mw-100 px-2 py-1 text-body mb-0\"\n                    placeholder=\"00012345\"/>\n                </div>\n              </div>\n            </div>\n\n            {/* User Info */}\n            <div className=\"row mt-5\">\n              <div className=\"col\">\n                <p className=\"text-body font-medium\">Gifted By</p>\n              </div>\n            </div>\n\n            {/* User Name */}\n            <div className=\"row mt-2\">\n              <div className=\"col\">\n                <div className=\"track-gifts-add-gift-input-container\">\n                  <label\n                    className=\"track-gifts-add-gift-input-label track-gifts-add-gift-required text-sm font-medium mb-1\">Name</label>\n                  <input\n                    type=\"text\"\n                    name=\"user-name\"\n                    placeholder=\"John Doe\"\n                    value={this.state.userName}\n                    onChange={(ev) => this.userNameChangeHandler(ev)}\n                    className={[\"m-a-unset-line-height track-gifts-add-gift-input d-block w-100 mw-100 px-2 py-1 text-body mb-0\", this.state.errors.userName ? \"track-gifts-add-gift-input-error\" : \"\"].join(\" \")}\n                  />\n                  {this.state.errors.userName ?\n                    <label\n                      className=\"text-sm track-gifts-add-gift-input-error-text\">{this.state.errors.userName}</label>\n                    : null}\n                </div>\n              </div>\n            </div>\n\n            {/* User email */}\n            <div className=\"row mt-2 mb-1\">\n              <div className=\"col\">\n                <div className=\"track-gifts-add-gift-input-container\">\n                  <label\n                    className=\"track-gifts-add-gift-input-label track-gifts-add-gift-required text-sm font-medium mb-1\">Email\n                    address</label>\n                  <input\n                    type=\"text\"\n                    name=\"user-email\"\n                    placeholder=\"johndoe@email.com\"\n                    value={this.state.userEmail}\n                    onChange={(ev) => this.userEmailChangeHandler(ev)}\n                    className={[\"m-a-unset-line-height track-gifts-add-gift-input d-block w-100 mw-100 px-2 py-1 text-body mb-0\", this.state.errors.userEmail ? \"track-gifts-add-gift-input-error\" : \"\"].join(\" \")}\n                  />\n                  {this.state.errors.userEmail ?\n                    <label\n                      className=\"text-sm track-gifts-add-gift-input-error-text\">{this.state.errors.userEmail}</label>\n                    : null}\n                </div>\n              </div>\n            </div>\n\n          </div>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  stateTrackGiftsFilters: state.trackGifts.filters,\n  stateTrackGiftsView: state.trackGifts.activeView,\n  stateTrackGiftsProducts: state.trackGifts.products,\n  stateTrackGiftsPagination: state.trackGifts.paginationInfo,\n  stateRegistryInfo: state.registry.info,\n  stateTrackGiftsSearch: state.trackGifts.search\n})\n\nexport default connect(\n  mapStateToProps\n)(AddGift);","import React from \"react\";\nimport TrackGiftsSidebar from \"./containers/track-gifts-sidebar/TrackGiftsSidebar\";\nimport TrackGiftsContent from \"./containers/track-gifts-content/TrackGiftsContent\";\nimport Search from \"./components/search/Search\";\nimport AddGift from \"./components/add-gift/AddGift\";\nimport Button from \"../commons/components/button-component/ButtonComponent\";\nimport Modal from \"../commons/components/modal-component/ModalComponent\";\nimport \"./TrackGifts.scss\";\nimport {connect} from \"react-redux\";\nimport ThankYouList from \"../track-gifts/components/thank-you-list/ThankYouList\";\nimport {getTrackGiftsProduct, setMetaInfoToDom} from \"../../utils/commonFunction\";\n\nclass TrackGifts extends React.Component {\n\n  state = {\n    showTrackFilterModal: false,\n    showSearchPopUp: false\n  }\n\n  searchRef = React.createRef();\n\n  // componentDidMount() {\n  //   getTrackGiftsProduct(true, this.props.stateTrackGiftsFilters, this.props.stateTrackGiftsProducts, this.props.stateTrackGiftsPagination, this.props.stateTrackGiftsView, this.props.stateRegistryInfo, this.props.stateTrackGiftsSearch, this.props.dispatch)\n  // }\n\n  closeTrackFilterModal = () => {\n    this.setState({showTrackFilterModal: false})\n  }\n\n  toggleSearchBar = e => {\n    e.preventDefault()\n    if (this.searchRef.current) {\n      this.searchRef.current.classList.toggle(\"track-gifts-show-search-dialog\")\n    }\n  }\n\n  trackFilterModalFooterButtons =\n    (\n      <>\n        <Button\n          variant=\"secondary\"\n          className=\"px-3 py-1 font-weight-bold font-medium text-body\"\n          disabled={false}\n          onClick={this.closeTrackFilterModal}\n        >Close</Button>\n      </>\n    )\n\n  render() {\n    // Setting Meta info to DOM\n    if (this.props.stateSeo){\n      setMetaInfoToDom(this.props.stateSeo['track-gifts-ma'], \"track-gifts\")\n    }\n\n    document.body.style.overflow=\"auto\";\n\n    return (\n      <div className=\"container track-gifts-container mt-2 mt-md-8\">\n        {this.props.stateProducts <= 0 ?\n          // When there is no products\n          <>\n            <div className=\"row\">\n              <div className=\"col\">\n                <h4 className=\"font-medium\">Gifts</h4>\n              </div>\n              <div className=\"col\">\n                <AddGift/>\n              </div>\n            </div>\n            <div className=\"row mt-7 \">\n              <div className=\"col\">\n                <div className=\"track-gifts-no-product-main text-center py-10\">\n                  <h4 className=\"track-gifts-no-product-text mx-auto\">\n                    Your registry hasnt been started.<br/>\n                    Head to Build a Registry for a guided registry experience.\n                  </h4>\n                  <h4 className=\"track-gifts-no-product-text mx-auto mt-5\">\n                    Once you build your registry and share with your guests,\n                    you can come here to track your gifts and thank your guests.\n                  </h4>\n                </div>\n              </div>\n            </div>\n          </>\n          :\n          // When there is products\n          <>\n            <div className=\"row\">\n              {/* Sidebar content */}\n              <div className=\"col-2 d-none d-lg-inline-block\">\n                <div className=\"row mb-5\">\n                  <div className=\"col\">\n                    <h4 className=\"font-medium\">View</h4>\n                  </div>\n                </div>\n                <div className=\"row\">\n                  <div className=\"col\">\n                    <TrackGiftsSidebar/>\n                  </div>\n                </div>\n              </div>\n\n              {/* Main Content */}\n              <div className=\"col-12 col-lg-10\">\n                <div className=\"row mb-0 mb-md-5 align-items-center\">\n                  <div className=\"col-2 col-md\">\n                    <h4 className=\"font-medium\">Gifts</h4>\n                  </div>\n                  <div className=\"col-10 justify-content-end d-lg-none d-block d-flex align-items-center mb-2\">\n                    <Button className=\"d-flex py-1 mr-2\" variant=\"secondary\" onClick={(e) => this.toggleSearchBar(e)}>\n                      <i className=\"icon-search search-icon-mobile\"/>\n                    </Button>\n                    <div ref={this.searchRef} className=\"track-gifts-search-box-container\">\n                      <Search componentRef={this.searchRef}/>\n                    </div>\n                    <Button className=\"d-flex py-1 mr-1\" variant=\"secondary\" onClick={() => {\n                      this.setState({showTrackFilterModal: true})\n                    }}>\n                      <i className=\"icon-filter-1 filter-icon\"/>\n                    </Button>\n                    <AddGift/>\n                  </div>\n                  <div className=\"col-lg-7 col-xl-6 d-none d-lg-flex\">\n                    <div className=\"flex-fill mr-3\">\n                      <Search/>\n                    </div>\n                    <AddGift/>\n                  </div>\n                </div>\n\n                <div className=\"row\">\n                  <div className=\"divider-div d-inline-block d-md-none my-2\"/>\n                  <div className=\"col\">\n                    <TrackGiftsContent/>\n                  </div>\n                </div>\n                <div className=\"d-inline-block d-lg-none mb-11 mt-3\">\n                  <ThankYouList/>\n                </div>\n              </div>\n            </div>\n            <Modal\n              show={this.state.showTrackFilterModal}\n              title={\"Filters\"}\n              closeModal={this.closeTrackFilterModal}\n            >\n              <TrackGiftsSidebar/>\n            </Modal>\n          </>\n        }\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  stateProducts: state.myRegistry.addedProducts.length,\n  stateTrackGiftsView: state.trackGifts.activeView,\n  stateTrackGiftsProducts: state.trackGifts.products,\n  stateTrackGiftsPagination: state.trackGifts.paginationInfo,\n  stateRegistryInfo: state.registry.info,\n  stateTrackGiftsFilters: state.trackGifts.filters,\n  stateTrackGiftsSearch: state.trackGifts.search,\n  stateSeo: state.registry.seo\n})\n\nexport default connect(\n  mapStateToProps\n)(TrackGifts);","import React, {createRef} from 'react';\nimport {NavLink, Switch, Route, Redirect, withRouter} from 'react-router-dom';\nimport MyRegistry from '../my-registry/MyRegistry';\nimport ViewRegistry from \"../view-registry/ViewRegistry\";\nimport {useTranslation} from \"react-i18next\";\nimport route from \"utils/routes\";\nimport RegistryHeroData from \"data/RegistryHero.json\";\nimport './RegistryHero.scss';\nimport {useSelector, useDispatch} from 'react-redux';\nimport Toast from \"modules/commons/components/toast/Toast\";\nimport TodoWidget from \"./component/todo-widget/TodoWidget\";\nimport TrackGifts from \"../track-gifts/TrackGifts\";\nimport RedirectionScreen from \"../track-gifts/components/redirection-screen/RedirectionScreen\";\nimport moment from 'moment';\nimport {setguestViewRegistry} from \"modules/view-registry/ViewRegistryActions\";\nimport {InView} from \"react-intersection-observer\";\nimport Filter from \"../my-registry/components/filter/Filter\";\n\n\nconst RegistryHero = (props) => {\n\n  const stateGuestViewRegistry = useSelector(state => state.viewRegistry.guestViewRegistry)\n  const stateRegistryInfo = useSelector(state => state.registry.info)\n  const stateTrackGiftsRedirectionInfo = useSelector(state => state.trackGifts.redirectionInfo)\n  let stateBuildRegistryFilterApplies = useSelector(state => state.myRegistry.filterApplied)\n  const stateRouter = useSelector(state => state.router)\n  const {t} = useTranslation();\n  const registryData = RegistryHeroData\n  const dispatch = useDispatch()\n  const stickyNav = createRef()\n\n  if (!stateRegistryInfo.id && stateRegistryInfo.notFound || (stateRegistryInfo.id && !stateRegistryInfo.isOnboardingCompleted)) {\n    return <Redirect to={route.ONBOARDING.HOME}/>\n  }\n\n  window.onpopstate = (ev) => {\n    if (stateGuestViewRegistry) {\n      dispatch(setguestViewRegistry(false))\n    }\n  }\n\n  const registryHeroObserver = (inView, entry) => {\n    // This is for sticky nav\n    if (stateRouter.location && stateRouter.location.pathname !== route.VIEW_REGISTRY.HOME) {\n      let buildFilterEl = document.getElementById('build-registry-filter')\n      if (!inView && entry.boundingClientRect.top <= 0) {\n        if (stickyNav.current) {\n          stickyNav.current.classList.remove(\"d-none\")\n          stickyNav.current.style.visibility = \"visible\"\n        }\n        if (buildFilterEl) {\n          buildFilterEl.classList.add(\"d-none\")\n        }\n      } else {\n        if (stickyNav.current) {\n          stickyNav.current.classList.add(\"d-none\")\n        }\n        if (buildFilterEl) {\n          buildFilterEl.classList.remove(\"d-none\")\n        }\n      }\n    }\n\n    // This is for sticky checklist\n    let el = document.getElementById('checklist-scrollarea');\n    let registryContainer = document.getElementById('m-a-registry-container');\n    if(document.body.offsetWidth > 992 && registryContainer?.offsetHeight > el?.offsetHeight) {\n      if (inView) {\n        if (el) {\n          el.style.position = 'static';\n          el.style.top = 'auto';\n          el.classList.add = 'w-100';\n          el.style.paddingTop = '0px';\n\n        }\n      } else {\n        if (el && window.innerWidth > 992) {\n          // stickyNav.current.classList.add(\"d-none\")\n          let parentWidth = document.getElementById('checklist-container').offsetWidth;\n          el.style.position = 'fixed';\n          el.style.top = 0;\n          el.style.paddingTop = '70px';\n          el.style.width = `${parentWidth}px`;\n        }\n      }\n    }\n  }\n\n  return (\n    <>{stateTrackGiftsRedirectionInfo.store ?\n      <RedirectionScreen store={stateTrackGiftsRedirectionInfo.store}/>\n      :\n      <>\n        {!stateGuestViewRegistry ?\n          <>\n            <InView as=\"div\" className=\"registry-hero\" threshold={0.2} onChange={registryHeroObserver}>\n              {/*<div className=\"registry-hero\">*/}\n              <div className=\"container pt-3 pt-md-6\">\n                <div className=\"row mb-5 mb-md-0\">\n                  <div className=\"col d-flex justify-content-between align-items-center align-items-md-start\">\n                    <div className=\"d-flex align-items-end\">\n                      <h1 className=\"registry-name-header\">{stateRegistryInfo.name}</h1>\n                      <span\n                        className=\"text-sm ml-1 registry-due-date-text\">{stateRegistryInfo.dueDate !== null ? t(\"registryHeader.subTitle\") + \" \" + moment(stateRegistryInfo.dueDate).format(\"MMM Do YYYY\") : \"\"}</span>\n                    </div>\n                    <div>\n                      <TodoWidget/>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"row\">\n                  <div className=\"col\">\n                    <div className=\"d-flex registry-hero-navigation-links\">\n                      <NavLink to={route.MY_REGISTRY.HOME} className=\"registry-header-link\">\n                        <h4>{t(\"registryHeader.link.myRegistry\")}</h4></NavLink>\n\n                      <NavLink to={route.VIEW_REGISTRY.HOME} className=\"registry-header-link\">\n                        <h4>{t(\"registryHeader.link.viewRegistry\")}</h4></NavLink>\n\n                      <NavLink to={route.TRACK_GIFTS.HOME} className=\"registry-header-link\">\n                        <h4>{t(\"registryHeader.link.trackGifts\")}</h4></NavLink>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              {/*</div>*/}\n            </InView>\n            {stateRouter.location && stateRouter.location.pathname !== route.VIEW_REGISTRY.HOME ?\n              <div className=\"registry-hero fixed-registry-hero w-100 d-none\" ref={stickyNav}>\n                <div className=\"container\">\n                  <div className=\"row\">\n                    <div className=\"col\">\n                      <div className=\"d-flex registry-hero-navigation-links pt-2\">\n                        <NavLink to={route.MY_REGISTRY.HOME} className=\"registry-header-link\">\n                          <h4>{t(\"registryHeader.link.myRegistry\")}</h4></NavLink>\n\n                        <NavLink to={route.VIEW_REGISTRY.HOME} className=\"registry-header-link\">\n                          <h4>{t(\"registryHeader.link.viewRegistry\")}</h4></NavLink>\n\n                        <NavLink to={route.TRACK_GIFTS.HOME} className=\"registry-header-link\">\n                          <h4>{t(\"registryHeader.link.trackGifts\")}</h4></NavLink>\n                      </div>\n                    </div>\n                    {stateRouter.location && stateRouter.location.pathname === route.MY_REGISTRY.HOME && stateBuildRegistryFilterApplies ?\n                      <div className=\"col-2 text-right pt-1\">\n                        <Filter radioName={true}/>\n                      </div>\n                      : null}\n                  </div>\n                </div>\n              </div>\n              : null}\n          </> : null}\n\n        {/* Registry Nav Routes */}\n        {stateRegistryInfo.id ?\n          <Switch>\n            <Route exact path={route.REGISTRY.HOME}><Redirect to={route.MY_REGISTRY.HOME}/></Route>\n            <Route exact path={route.MY_REGISTRY.HOME} component={MyRegistry}/>\n            <Route exact path={route.VIEW_REGISTRY.HOME} component={ViewRegistry}/>\n            <Route exact path={route.TRACK_GIFTS.HOME} component={TrackGifts}/>\n          </Switch>\n\n          : null}\n      </>\n    }\n\n\n      <Toast/>\n    </>\n  )\n}\n\nexport default withRouter(RegistryHero);","import React from \"react\";\nimport \"./Option.scss\";\n\nconst Option = (props) => {\n  return (\n    <div\n      className={[\"px-3 px-md-4 py-2 py-md-3 text-center baby-registry-question-option\", props.className ? props.className : \"\"].join(\" \")}\n      onClick={props.onClick}>{props.children}</div>\n  );\n}\n\nexport default Option;","import React from \"react\";\nimport \"./QuestionnairProgressBar.scss\";\n\nconst QuestionnaireProgressBar = (props) => {\n  let width = Math.ceil(props.completed)\n  width = width > 100 ? 100 : width;\n\n  // For future reference\n  // let questionnaireDoc = document.querySelector(\".questionnaire-progress-bar\")\n  // let text = document.querySelector(\".questionnaire-progress-text\")\n  // if (text && questionnaireDoc) {\n  //   let containerWidth = questionnaireDoc.offsetWidth;\n  //   let progressWidth = Math.abs(containerWidth * (width / 100))\n  //   let textWidth = text.offsetWidth\n  //   if (Math.abs(textWidth / 2) < progressWidth && (containerWidth - progressWidth - 20) > Math.abs(textWidth / 2)) {\n  //     text.style.marginLeft = `${progressWidth - textWidth / 2}px`;\n  //   } else {\n  //     if ((containerWidth - progressWidth) < Math.abs(textWidth / 2)) {\n  //       text.style.marginLeft = `auto`;\n  //     } else {\n  //       text.style.marginLeft = `0px`;\n  //     }\n  //   }\n  // }\n\n  return (\n    <div className=\"questionnaire-progress-bar w-100\">\n      <div className=\"d-flex\">\n        <span className=\"questionnaire-progress-text onboarding-font-2 \">{width}% complete</span>\n      </div>\n      <div className=\"questionnaire-progress-bar-container w-100 mt-1\">\n        <div className=\"questionnaire-progress mw-100\" style={{width: `${width}%`}}/>\n      </div>\n    </div>\n  )\n}\n\nexport default QuestionnaireProgressBar","import React from \"react\";\nimport \"./Onboarding.scss\";\nimport {connect} from \"react-redux\";\nimport {Redirect} from \"react-router\";\nimport routes from \"utils/routes\";\nimport Option from \"../commons/components/questions/option/Option\";\nimport {addQuestionAnswer, updateQuestionAnswer} from \"./OnboardingAction\";\nimport Button from \"../commons/components/button-component/ButtonComponent\";\nimport {toast, ToastContainer} from \"react-toastify\";\nimport {\n  REGISTER_USER,\n  SAVE_QUESTION_RESPONSE,\n  LOGIN_USER,\n  ADD_PARTNER_ACCOUNT,\n  CREATE_REGISTRY,\n  SAVE_SINGLE_QUESTION_RESPONSE\n} from \"../../api/mutations\";\nimport {graphQLNoToken, graphQLNoHeader} from \"../../api/axios\";\nimport {Cookies} from \"react-cookie\";\nimport {setLoggingStatus, setOnboardingRegistry} from \"../registry/RegistryActions\";\nimport {getOnboardingQuestions, setMetaInfoToDom, isInputTextValid} from \"../../utils/commonFunction\";\nimport {GET_REGISTRIES} from \"../../api/queries\";\nimport {\n  EMAIL_RE,\n  M_A_FORGOT_PASSWORD_LINK,\n  ONBOARDING_ANIMATION_DELAY,\n  ONBOARDING_SEO,\n  MA_ADD_ITEM_TO_REGISTRY\n} from \"../../utils/constants\";\nimport {setLoader} from \"modules/registry/RegistryActions\";\nimport DatePicker from \"react-datepicker\"\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport {ROUTES} from \"../../utils/cdn-assets-links\";\nimport QuestionnaireProgressBar from \"../commons/components/questionnair-progress-bar/QuestionnairProgressBar\";\n\nconst CustomDateInput = React.forwardRef(({value, onClick, ref1}, ref) => (\n  <div className=\"onboarding-date-input-container d-block\" onClick={onClick}>\n    <input type=\"text\" value={value} readOnly\n           className=\"onboarding-input py-1 px-2 pr-6 text-body mb-0 onboarding-font-1\" ref={ref1}\n           placeholder=\"Due Date\"/>\n    <i className=\"onboarding-date-icon\"/>\n  </div>\n));\n\nclass Onboarding extends React.Component {\n\n  // Static titles\n  LOGIN_TITLE = \"Already have an M+A account? Use the same login to get started on your registry.\"\n  SIGNUP_TITLE = \"<span class='onboarding-font-1 onboading-text-color'>Lets make it official.</span></br> <span class='font-medium onboading-text-color onboarding-font-4'>Time to create your account.</span>\"\n  PARTNER_TITLE = \"Your partners details please\"\n\n  // Answer type mapping\n  RADIO = \"Radio\"\n  LOGIN = \"Login\"\n  PARTNER = \"Partner\"\n\n  // Data to remove Both option\n  LITTLE_ONCE_ID = {\n    questionId: 5,\n    optionId: 7\n  }\n\n  BOTH_OPTION_ID = {\n    questionId: 6,\n    optionId: 13\n  }\n\n  SKIP_BOTH_OPTION = false\n  ANIMATED = false\n\n  BUILD_REGISTRY_CASE = \"build-registry\"\n  REGISTRY_QUIZ_CASE = \"registry-quiz\"\n\n  state = {\n    parentId: null,\n    question: {},\n    login: false,\n    toastMessage: \"\",\n    signUpErrors: {},\n    signInErrors: {},\n    partnerErrors: {},\n    submitAnswer: false,\n    bulkSaved: true,\n    signInRedirectionUrl: \"\",\n    currentAnswer: null,\n    totalQuestions: 0,\n    directLogin: false,\n    localLoggedIn: false,\n\n    dateInputValue: null\n  }\n\n  isActiveToast = false\n  totalToSubtract = 0\n  getQuestionApiCalled = false\n  alreadyAnsweredFollowUp = false\n\n  // For Redirectly it to product detail page for adding that product again\n  maRePrURL = localStorage.getItem(MA_ADD_ITEM_TO_REGISTRY) && !localStorage.getItem(MA_ADD_ITEM_TO_REGISTRY).hasRedirected ? JSON.parse(localStorage.getItem(MA_ADD_ITEM_TO_REGISTRY)) : null;\n\n  componentDidMount() {\n    window.onpopstate = (ev) => {\n      this.setState({\n        directLogin: false\n      })\n      if (this.props.location.pathname.search(routes.ONBOARDING.HOME) >= 0) {\n        if (this.props.stateOnboardingAnswers && this.props.stateOnboardingAnswers.length > 0) {\n          let prevQuestion = null\n\n          // Fetching previous question id based on answers\n          for (let answer of [...this.props.stateOnboardingAnswers].reverse()) {\n            if (this.props.stateRouter.location.query && Number(answer.question) && Number(answer.question) <= Number(this.props.stateRouter.location.query.q)) {\n              prevQuestion = answer.question\n              break;\n            }\n          }\n          if (prevQuestion) {\n            this.setQuestionBasedOnId(prevQuestion, true)\n            this.clearToastMessage()\n          }\n        }\n      }\n    }\n  }\n\n  clearErrorState = () => {\n    this.setState({\n      signUpErrors: {},\n      signInErrors: {},\n      partnerErrors: {}\n    })\n  }\n\n  // TODO: Use this Funcation if needed for redirectling to store for adding product\n  hasRedirectedTOAddToRegistry = (maRePrURL) => {\n    if (maRePrURL && !maRePrURL.hasRedirected) {\n      maRePrURL.hasRedirected = true\n      localStorage.setItem('maRePrURL', maRePrURL)\n    }\n  }\n\n  createRegistry = () => {\n    let cookies = new Cookies();\n    graphQLNoHeader({query: CREATE_REGISTRY}, {\n      headers: {\"Authorization\": cookies.get(\"access_token\") ? \"Token \" + cookies.get(\"access_token\") : \"\"}\n    }).then(res => {\n      if (res.data.data) {\n        let registryId = res.data.data.createRegistry.registry.id\n        if (registryId) {\n          this.props.dispatch(setOnboardingRegistry(registryId))\n          this.submitAllAnswers(registryId, true)\n        }\n      }\n    }).catch(err => {\n      console.error(err.response)\n    })\n  }\n\n  checkValidEmail = (email) => {\n    return email.match(EMAIL_RE)\n  }\n\n  submitAllAnswers = async (optionalRegistryId = null, submitBulk = false) => {\n    if (this.state.submitAnswer || submitBulk) {\n      if (this.props.stateOnboardingAnswers.length > 0 && (this.props.stateOnboardingRegistry || optionalRegistryId)) {\n        const registryId = optionalRegistryId ? optionalRegistryId : this.props.stateOnboardingRegistry;\n        let action = null;\n        let returnToURL = null;\n\n        const cookies = new Cookies();\n        const token = cookies.get(\"access_token\") ? \"Token \" + cookies.get(\"access_token\") : \"\"\n\n        if (submitBulk) {\n          // Submitting all answers at once\n\n          const response = this.props.stateOnboardingAnswers.map(answer => {\n            return {\n              question: answer.question,\n              questionOptionInput: [\n                {\n                  option: answer.response.option,\n                  optionText: answer.response.optionText\n                }\n              ]\n            }\n          })\n          let reqData = {\n            query: SAVE_QUESTION_RESPONSE,\n            operationName: \"addRegistryQuestionOption\",\n            variables: {\n              registryId: registryId,\n              answers: response,\n              isFromOnboarding: true\n            }\n          }\n\n          await graphQLNoHeader(reqData, {\n            headers: {\"Authorization\": token}\n          }).then(res => {\n            if (res.data.data.addRegistryMultipleQuestionOption) {\n              console.log(\"Saved\")\n            }\n          }).catch(err => {\n            toast.error(\"Answer is not saved.\")\n            console.error(err.response);\n          }).finally(async () => {\n            await this.setState({\n              submitAnswer: false\n            })\n          })\n        } else {\n          //  Submitting single answer at once\n\n          let response = null\n\n          if (this.props.stateOnboardingAnswers.length > 0) {\n            const answer = this.props.stateOnboardingAnswers[this.props.stateOnboardingAnswers.length - 1]\n            action = answer.response.action ? answer.response.action : null;\n            response = {\n              question: answer.question,\n              questionOptionInput: [\n                {\n                  option: answer.response.option,\n                  optionText: answer.response.optionText\n                }\n              ]\n            }\n          }\n\n          if (action) {\n            switch (action) {\n              case this.BUILD_REGISTRY_CASE:\n                returnToURL = this.maRePrURL ? this.maRePrURL.url : window.location.origin + routes.MY_REGISTRY.HOME\n                break\n              case this.REGISTRY_QUIZ_CASE:\n                returnToURL = window.location.origin + routes.PERSONALIZE.HOME\n                break\n              default:\n                returnToURL = this.maRePrURL ? this.maRePrURL.url : window.location.origin + routes.REGISTRY.HOME\n                break\n            }\n          }\n\n          if (response) {\n            let reqData = {\n              query: SAVE_SINGLE_QUESTION_RESPONSE,\n              operationName: \"updateOrCreateRegistrySingleQuestionOption\",\n              variables: {\n                registryId: registryId,\n                registryQuestionOptionInput: response,\n                isFromOnboarding: true\n              }\n            }\n\n            if (action && returnToURL) {\n              reqData.variables['returnTo'] = returnToURL\n            }\n\n            graphQLNoHeader(reqData, {\n              headers: {\"Authorization\": token}\n            }).then(res => {\n              if (res.data.data.updateOrCreateRegistrySingleQuestionOption) {\n                console.log(\"Saved\")\n                if (res.data.data.updateOrCreateRegistrySingleQuestionOption.redirectionUrl) {\n                  window.open(res.data.data.updateOrCreateRegistrySingleQuestionOption.redirectionUrl, \"_self\")\n                }\n              }\n            }).catch(err => {\n              console.error(err);\n            }).finally(() => {\n              this.setState({\n                submitAnswer: false\n              })\n            })\n          }\n        }\n\n      }\n    }\n  }\n\n  clearToastMessage = () => {\n    this.setState({\n      toastMessage: \"\"\n    })\n  }\n\n  setToastMessage = () => {\n    if (this.state.question.toastMessage || this.state.question.formattedToastMessage) {\n      this.setState({\n        toastMessage: this.state.question.formattedToastMessage ? this.state.question.formattedToastMessage : this.state.question.toastMessage\n      })\n      this.isActiveToast = false\n    } else {\n      this.clearToastMessage()\n    }\n  }\n\n  gotoNextQuestion = (question, parentId, option = {}) => {\n    let nextQuestionId = null;\n    let returnNext = false;\n    let nextFullQuestion = null;\n    const idToMatch = parentId ? parentId : question.id;\n    // Only works for 1 follow up question\n    if (option.followUpQuestions && option.followUpQuestions.length > 0) {\n      nextQuestionId = option.followUpQuestions[0].question.id;\n    } else {\n      for (let ques of this.props.stateOnboardingQuestions) {\n        if (returnNext) {\n          nextQuestionId = ques.id\n          nextFullQuestion = ques\n          break\n        }\n        if (ques.id === idToMatch) {\n          returnNext = true;\n        }\n      }\n    }\n\n    if (nextQuestionId === null && returnNext) {\n      //  This is last question\n      if (this.props.stateLoggedIn && this.state.redirectionUrl) {\n        // window.open(this.state.redirectionUrl, \"_self\")\n      }\n    } else if (nextQuestionId) {\n      this.setState({\n        parentId: null\n      })\n\n      if (nextFullQuestion && nextFullQuestion.answers.length > 0 && (nextFullQuestion.options.length > 0 && !nextFullQuestion.options[0].action)) {\n        this.gotoNextQuestion(nextFullQuestion, null)\n        return;\n      } else {\n        if (nextFullQuestion && nextFullQuestion.options.length > 0 && nextFullQuestion.options[0].action && nextFullQuestion.answers.length > 0) {\n          if (this.state.signInRedirectionUrl) {\n            this.props.history.push(this.state.signInRedirectionUrl)\n            window.open(this.state.signInRedirectionUrl, \"_self\")\n            return\n          }\n        }\n        this.setQuestionBasedOnId(nextQuestionId)\n        this.setToastMessage()\n        this.ANIMATED = false;\n        this.props.history.push(routes.ONBOARDING.HOME + `?q=${nextQuestionId}`)\n      }\n    }\n  }\n\n  setQuestionBasedOnId = (questionId, fromPopState = false) => {\n    if (questionId) {\n      let finalQuestion = {};\n      let foundQuestion = false;\n      let parentId = null;\n      for (const question of this.props.stateOnboardingQuestions) {\n        if (foundQuestion) {\n          break;\n        }\n        if (question.id === questionId) {\n          finalQuestion = question;\n          foundQuestion = true;\n          break;\n        }\n        for (const option of question.options) {\n          if (option.followUpQuestions.length > 0) {\n            for (const followUpQuestion of option.followUpQuestions) {\n              if (followUpQuestion.question.id === questionId) {\n                finalQuestion = followUpQuestion.question;\n                parentId = followUpQuestion.parentQuestion;\n                foundQuestion = true\n                break;\n              }\n            }\n          }\n        }\n      }\n\n      let currentAnswer = this.props.stateOnboardingAnswers.find(answer => Number(answer.question) === Number(finalQuestion.id))\n\n      if (finalQuestion.id) {\n        let newTotalQuestions = this.state.totalQuestions\n        if (newTotalQuestions === 0) {\n          newTotalQuestions = this.props.stateOnboardingQuestions.length;\n        }\n        // if (parentId && fromPopState) {\n        //   newTotalQuestions -= 1\n        // }\n        if (parentId && !currentAnswer) {\n          finalQuestion['isFollowUpQuestion'] = true\n          newTotalQuestions += 1\n        }\n        if (this.totalToSubtract > 0 && !currentAnswer) {\n          newTotalQuestions -= this.totalToSubtract\n          this.totalToSubtract = 0;\n        }\n        this.setState({\n          question: finalQuestion,\n          parentId: parentId,\n          currentAnswer: currentAnswer ? currentAnswer.response : null,\n          totalQuestions: newTotalQuestions\n        })\n      } else {\n        console.log(\"No Question Found\");\n      }\n    }\n  }\n\n  addAnswerToState = async (questionId, response, option = null) => {\n    const alreadyAnswered = this.props.stateOnboardingAnswers.find(el => el.question === this.state.question.id)\n\n\n    if (alreadyAnswered) {\n      // This will delete the answers that were given after the matched response\n      let newState = []\n      let followUpsToSubtract = 0\n      let dontAddToNewState = false;\n\n      for (let answer of this.props.stateOnboardingAnswers) {\n        if (answer.question === this.state.question.id) {\n          answer.response = response;\n          newState.push(answer)\n          dontAddToNewState = true\n        }\n        if (dontAddToNewState) {\n          if (answer.response && answer.response.isFollowUp) {\n            followUpsToSubtract += 1\n          }\n        } else {\n          newState.push(answer)\n        }\n      }\n\n      this.totalToSubtract = followUpsToSubtract\n      await this.props.dispatch(updateQuestionAnswer(newState))\n    } else {\n      await this.props.dispatch(addQuestionAnswer({question: questionId, response: response}))\n    }\n    await this.setState({\n      submitAnswer: true\n    })\n\n    if (option) {\n      if (option.toastMessage) {\n        this.setState({\n          toastMessage: option.toastMessage\n        })\n      }\n    }\n\n    this.submitAllAnswers(null, false)\n  }\n\n  answerRadioQuestion = (question, option) => {\n    if (Number(this.state.question.id) === this.LITTLE_ONCE_ID.questionId && Number(option.id) === this.LITTLE_ONCE_ID.optionId) {\n      this.SKIP_BOTH_OPTION = true\n    } else if (this.SKIP_BOTH_OPTION) {\n      this.SKIP_BOTH_OPTION = false\n    }\n    this.addAnswerToState(question.id, {\n      option: option.id,\n      optionText: option.value,\n      action: option.action,\n      isFollowUp: question.isFollowUpQuestion\n    }, option);\n    this.gotoNextQuestion(this.state.question, this.state.parentId, option);\n  }\n\n  watchNextBtn = (ev) => {\n    this.setState({\n      nextBtnState: ev.target.value.length <= 0\n    })\n  }\n\n  answerDataQuestion = (question, response, dateCheck) => {\n    if (dateCheck) {\n\n      // var now = new Date();\n      // var day = (\"0\" + now.getDate()).slice(-2);\n      // var month = (\"0\" + (now.getMonth() + 1)).slice(-2);\n      // var currentDate = now.getFullYear() + \"-\" + (month) + \"-\" + (day);\n      // console.log(currentDate,response)\n      // if (currentDate <= response) {\n      //   this.addAnswerToState(questionId, {option: 0, optionText: response})\n      //   this.gotoNextQuestion(this.state.question, this.state.parentId);\n      // } else {\n      //   toast.error(\"Invalid date\")\n      // }\n      if (!response) {\n        toast.error(\"Invalid date\")\n      } else {\n        let dateArray = String(response).split(\"/\")\n        let dateString = dateArray[2] + \"-\" + dateArray[0] + \"-\" + dateArray[1]\n        this.addAnswerToState(question.id, {\n          option: 0,\n          optionText: dateString,\n          isFollowUp: question.isFollowUpQuestion\n        })\n        this.gotoNextQuestion(this.state.question, this.state.parentId);\n      }\n    } else {\n      this.addAnswerToState(question.id, {option: 0, optionText: response, isFollowUp: question.isFollowUpQuestion})\n      this.gotoNextQuestion(this.state.question, this.state.parentId);\n    }\n  }\n\n  textInputTypeChangeHandler = (ev, inputRefs, field = null) => {\n    let enableBtn = false;\n\n    for (const inputRef of inputRefs) {\n      if (inputRef.current.value.length <= 0) {\n        enableBtn = true\n        break\n      }\n    }\n\n    if (field && field === \"partner-name\") {\n      let error = {...this.state.partnerErrors}\n      if (error && error.name) {\n        delete error.name\n        this.setState({\n          partnerErrors: error\n        })\n      }\n    }\n\n    if (field && field === \"partner-email\") {\n      let error = {...this.state.partnerErrors}\n      if (error && error.email) {\n        delete error.email\n        this.setState({\n          partnerErrors: error\n        })\n      }\n    }\n\n    this.setState({\n      nextBtnState: enableBtn\n    })\n  }\n\n  changeLoginState = (ev, value, refs) => {\n    ev.preventDefault()\n    for (let ref of refs) {\n      if (ref.current) {\n        ref.current.value = \"\"\n      }\n    }\n    this.setState({\n      login: value\n    })\n  }\n\n  setErrorBasedOnResponse = (err, type) => {\n    if (err.response?.data && err.response?.data?.errors) {\n      for (let error of err.response.data.errors) {\n        let parentErrors = err.response.data.errors\n\n        if (parentErrors.length > 0) {\n          for (const subErrors of parentErrors) {\n            if (subErrors.errors && (subErrors.errors instanceof Array ? subErrors.errors.length > 0 : true)) {\n              let newErrorState = {}\n              for (const error in subErrors.errors) {\n                newErrorState[error] = subErrors.errors[error].length > 0 ? subErrors.errors[error][0] : \"\"\n              }\n              switch (type) {\n                case \"signUp\":\n                  this.setState({\n                    signUpErrors: newErrorState\n                  })\n                  break\n                case \"signIn\":\n                  this.setState({\n                    signInErrors: newErrorState\n                  })\n                  break\n              }\n            } else {\n              toast.error(error.message)\n            }\n          }\n        }\n      }\n    }\n    console.error(err.response)\n  }\n\n  signInEmailInputChangeHandler = () => {\n    let error = {...this.state.signInErrors}\n    if (error && error.email) {\n      delete error.email\n      this.setState({\n        signInErrors: error\n      })\n    }\n  }\n\n  signInPasswordInputChangeHandler = () => {\n    let error = {...this.state.signInErrors}\n    if (error && error.password) {\n      delete error.password\n      this.setState({\n        signInErrors: error\n      })\n    }\n  }\n\n  validateSignInInputs = (emailRef, passwordRef) => {\n    if (emailRef.current.value.length <= 0 || passwordRef.current.value.length <= 0) {\n      this.setState({\n        signInErrors: {\n          email: emailRef.current.value.length <= 0 ? \"This field is mandatory\" : \"\",\n          password: passwordRef.current.value.length <= 0 ? \"This field is mandatory\" : \"\"\n        }\n      })\n      return false;\n    }\n\n    // Checking for valid email\n    if (!this.checkValidEmail(emailRef.current.value)) {\n      this.setState({\n        signInErrors: {\n          email: \"Invalid email address\"\n        }\n      })\n      return false;\n    }\n\n    return true;\n  }\n\n  signInClickHandler = (emailRef, passwordRef) => {\n    if (!this.validateSignInInputs(emailRef, passwordRef)) {\n      return\n    }\n\n    let loginAnswered = false\n\n    let reqData = {\n      query: LOGIN_USER,\n      operationName: \"login_user\",\n      variables: {\n        email: emailRef.current.value,\n        password: passwordRef.current.value,\n        returnTo: this.maRePrURL ? this.maRePrURL.url : window.location.origin + routes.MY_REGISTRY.HOME\n      }\n    }\n    this.props.dispatch(setLoader(true))\n    graphQLNoToken(reqData).then(async res => {\n      if (res.data.data.loginUser) {\n        const cookies = new Cookies();\n        if (process.env.NODE_ENV === 'production') {\n          document.cookie = \"access_token=\" + res.data.data.loginUser.token + \";path=/;domain=.lilhathee.com;secure;sameSite=none\";\n        } else {\n          cookies.set(\"access_token\", res.data.data.loginUser.token, {path: \"/\"})\n        }\n        document.cookie = \"ma_registry_id=\" + JSON.stringify(res.data.data.loginUser.registries) + \";path=/;domain=.lilhathee.com;secure;sameSite=none\";\n        // Checking if user has registry\n        let data = {\n          query: GET_REGISTRIES\n        }\n\n\n        await graphQLNoHeader(data, {headers: {\"Authorization\": \"Token \" + res.data.data.loginUser.token}}).then(async registryRes => {\n          if (registryRes.data.data.registries.edges.length > 0) {\n            // TODO: Set currently active registry\n            let activeRegistry = registryRes.data.data.registries.edges[registryRes.data.data.registries.edges.length - 1]\n            let token = cookies.get(\"access_token\")\n            if (activeRegistry.node.id && token) {\n              await this.props.dispatch(setOnboardingRegistry(activeRegistry.node.id))\n              await getOnboardingQuestions(this.props.dispatch, activeRegistry.node.id, token)\n              await this.submitAllAnswers(activeRegistry.node.id, true)\n              loginAnswered = true\n            }\n\n            if (res.data.data.loginUser.redirectionUrl) {\n              if (this.state.directLogin) {\n                window.open(res.data.data.loginUser.redirectionUrl, \"_self\");\n                return\n              }\n              await this.setState({\n                signInRedirectionUrl: res.data.data.loginUser.redirectionUrl\n              })\n              // window.open(res.data.data.loginUser.redirectionUrl, \"_self\")\n            }\n            // window.open(routes.MY_REGISTRY.HOME, \"_self\")\n            // updateRegistryDetailState(this.props.dispatch, registryRes.data.data.registries.edges);\n          } else {\n            // Creating Registry\n            this.createRegistry()\n          }\n\n        }).catch(err => {\n          console.error(err);\n        })\n        if (this.state.directLogin && loginAnswered) {\n          return\n        }\n        this.setState({\n          redirectionUrl: res.data.data.loginUser.redirectionUrl,\n          localLoggedIn: true\n        })\n        this.props.dispatch(setLoggingStatus(true))\n        this.submitAllAnswers(null, true)\n        this.props.dispatch(setLoader(false))\n      }\n    }).catch(err => {\n      this.props.dispatch(setLoader(false))\n      if (err.response && err.response.status === 401) {\n        this.setState({\n          signInErrors: {\n            email: \"Invalid email or password\",\n            password: \"Invalid email or password\"\n          }\n        })\n        return;\n      }\n      this.setErrorBasedOnResponse(err, \"signIn\")\n    })\n  }\n\n  getSignInContent = () => {\n    const emailRef = React.createRef()\n    const passwordRef = React.createRef()\n    return (\n      <div className=\"row\">\n        <div className=\"col-12 col-md-4 offset-md-4 pb-15 pb-md-0\">\n          <div className=\"d-flex flex-column mb-4 text-left\">\n            <span className=\"text-sm font-medium onboarding-required-field onboarding-font-2\">Email Address</span>\n            <input\n              className={[\"onboarding-input py-2 px-2 text-body mb-0 mt-1\", this.state.signInErrors.email ? \"onboarding-input-error\" : \"\"].join(\" \")}\n              type=\"email\"\n              name=\"signIn-email\"\n              ref={emailRef}\n              // placeholder=\"johndoe@email.com\"\n              onKeyUp={(ev) => this.loginInputKeyUpHandler(ev, emailRef, passwordRef)}\n              onChange={this.signInEmailInputChangeHandler}\n            />\n\n            {this.state.signInErrors.email ?\n              <p className=\"text-sm onboarding-error-message mt-1\">{this.state.signInErrors.email}</p>\n              : null}\n          </div>\n          <div className=\"d-flex flex-column mb-2 text-left\">\n            <span className=\"text-sm font-medium onboarding-required-field onboarding-font-2\">Password</span>\n            <input\n              className={[\"onboarding-input py-2 px-2 text-body mb-0 mt-1\", this.state.signInErrors.password ? \"onboarding-input-error\" : \"\"].join(\" \")}\n              type=\"password\"\n              name=\"signIn-password\"\n              ref={passwordRef}\n              onChange={this.signInPasswordInputChangeHandler}\n              onKeyUp={(ev) => this.loginInputKeyUpHandler(ev, emailRef, passwordRef)}\n              // placeholder=\"Password\"\n            />\n            {this.state.signInErrors.password ?\n              <p className=\"text-sm onboarding-error-message mt-1\">{this.state.signInErrors.password}</p>\n              : null}\n          </div>\n          <div className=\"d-flex flex-column mb-4\">\n            <a className=\"text-body font-medium onboarding-link-text\" href={M_A_FORGOT_PASSWORD_LINK} target=\"_blank\">Forgot\n              Password</a>\n          </div>\n          <Button\n            variant=\"primary\"\n            className=\"px-3 py-1 font-medium onboarding-next-button w-100 onboarding-font-1\"\n            onClick={() => this.signInClickHandler(emailRef, passwordRef)}\n          >Sign In</Button>\n          {/*TODO : Add Api on Onclick of the button above*/}\n          <h4 className=\"mt-4\"><span className=\"onboading-text-color onboarding-font-3\">Don't have an account?</span> <a\n            href=\"#\" className=\"font-medium onboarding-link-text onboarding-font-3\"\n            onClick={(ev) => this.changeLoginState(ev, false, [emailRef, passwordRef])}\n          >Sign Up</a></h4>\n        </div>\n      </div>\n    )\n  }\n\n  signUpFirstNameChangeHandler = (ev) => {\n    if (!isInputTextValid(ev)) {\n      ev.preventDefault();\n      return false;\n    }\n    let error = {...this.state.signUpErrors}\n    if (error && error.firstName) {\n      delete error.firstName\n      this.setState({\n        signUpErrors: error\n      })\n    }\n  }\n\n  signUpLastNameChangeHandler = (ev) => {\n    if (!isInputTextValid(ev)) {\n      ev.preventDefault();\n      return false;\n    }\n    let error = {...this.state.signUpErrors}\n    if (error && error.lastName) {\n      delete error.lastName\n      this.setState({\n        signUpErrors: error\n      })\n    }\n  }\n\n  signUpEmailChangeHandler = () => {\n    let error = {...this.state.signUpErrors}\n    if (error && error.email) {\n      delete error.email\n      this.setState({\n        signUpErrors: error\n      })\n    }\n  }\n\n  signUpPasswordChangeHandler = () => {\n    let error = {...this.state.signUpErrors}\n    if (error && error.password) {\n      delete error.password\n      this.setState({\n        signUpErrors: error\n      })\n    }\n  }\n\n  signUpClickHandler = (firstNameRef, lastNameRef, emailRef, passwordRef) => {\n    let errors = {}\n    let valid = true\n    if (firstNameRef.current.value.length <= 0) {\n      errors['firstName'] = \"This field is required\"\n      valid = false\n    }\n\n    if (lastNameRef.current.value.length <= 0) {\n      errors['lastName'] = \"This field is required\"\n      valid = false\n    }\n\n    if (emailRef.current.value.length <= 0) {\n      errors['email'] = \"This field is required\"\n      valid = false\n    } else if (!this.checkValidEmail(emailRef.current.value)) {\n      errors['email'] = \"Invalid email address\"\n      valid = false\n    }\n\n    if (passwordRef.current.value.length <= 0) {\n      errors['password'] = \"This field is required\"\n      valid = false\n    }\n\n    this.setState({\n      signUpErrors: errors\n    })\n\n    if (!valid) {\n      return\n    }\n\n    // Clearing all error messages\n    this.clearErrorState()\n\n    let reqData = {\n      query: REGISTER_USER,\n      operationName: \"register_user\",\n      variables: {\n        name: `${firstNameRef.current.value} ${lastNameRef.current.value}`,\n        email: emailRef.current.value,\n        password: passwordRef.current.value\n      }\n    }\n    this.props.dispatch(setLoader(true))\n    graphQLNoToken(reqData).then(res => {\n      if (res.data.data.registerUser) {\n        const cookies = new Cookies();\n        if (process.env.NODE_ENV === 'production') {\n          document.cookie = \"access_token=\" + res.data.data.registerUser.token + \";path=/;domain=.lilhathee.com;secure;sameSite=none\";\n        } else {\n          cookies.set(\"access_token\", res.data.data.registerUser.token, {path: \"/\"})\n        }\n        if (this.state.directLogin && res.data.data.registerUser.redirectionUrl) {\n          window.open(res.data.data.registerUser.redirectionUrl, \"_self\")\n          return;\n        }\n        this.setState({\n          redirectionUrl: res.data.data.registerUser.redirectionUrl,\n          localLoggedIn: true\n        })\n        this.createRegistry()\n        this.submitAllAnswers(null, true)\n        this.props.dispatch(setLoggingStatus(true))\n        this.props.dispatch(setLoader(false))\n      }\n    }).catch(err => {\n      this.setErrorBasedOnResponse(err, \"signUp\")\n      this.props.dispatch(setLoader(false))\n    })\n  }\n\n  getSignUpContent = () => {\n    let firstNameRef = React.createRef()\n    let lastNameRef = React.createRef()\n    let emailRef = React.createRef()\n    let passwordRef = React.createRef()\n    return (\n      <div className=\"pb-15 pb-md-0\">\n        <div className=\"row\">\n          <div className=\"col-12 col-md-4 offset-md-4\">\n            <div className=\"d-flex flex-column mb-4 text-left\">\n              <span className=\"text-sm font-medium onboarding-required-field\">First Name</span>\n              <input\n                className={[\"onboarding-input py-2 px-2 text-body mb-0 mt-1 w-100\", this.state.signUpErrors.firstName ? \"onboarding-input-error\" : \"\"].join(\" \")}\n                type=\"text\"\n                name=\"first-name\"\n                // placeholder=\"John\"\n                ref={firstNameRef}\n                onChange={(ev) => this.signUpFirstNameChangeHandler(ev)}\n              />\n              {this.state.signUpErrors.firstName ?\n                <p className=\"text-sm onboarding-error-message mt-1\">{this.state.signUpErrors.firstName}</p>\n                : null}\n            </div>\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col-12 col-md-4 offset-md-4\">\n            <div className=\"d-flex flex-column mb-4 text-left\">\n              <span className=\"text-sm font-medium onboarding-required-field\">Last Name</span>\n              <input\n                className={[\"onboarding-input py-2 px-2 text-body mb-0 mt-1 w-100\", this.state.signUpErrors.lastName ? \"onboarding-input-error\" : \"\"].join(\" \")}\n                type=\"text\"\n                name=\"last-name\"\n                // placeholder=\"Doe\"\n                ref={lastNameRef}\n                onChange={(ev) => this.signUpLastNameChangeHandler(ev)}\n              />\n              {this.state.signUpErrors.lastName ?\n                <p className=\"text-sm onboarding-error-message mt-1\">{this.state.signUpErrors.lastName}</p>\n                : null}\n            </div>\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col-12 col-md-4 offset-md-4\">\n            <div className=\"d-flex flex-column mb-4 text-left\">\n              <span className=\"text-sm font-medium onboarding-required-field\">Email Address</span>\n              <input\n                className={[\"onboarding-input py-2 px-2 text-body mb-0 mt-1 w-100\", this.state.signUpErrors.email ? \"onboarding-input-error\" : \"\"].join(\" \")}\n                type=\"email\"\n                name=\"email\"\n                // placeholder=\"johndoe@email.com\"\n                ref={emailRef}\n                onChange={this.signUpEmailChangeHandler}\n              />\n              {this.state.signUpErrors.email ?\n                <p className=\"text-sm onboarding-error-message mt-1\">{this.state.signUpErrors.email}</p>\n                : null}\n            </div>\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col-12 col-md-4 offset-md-4\">\n            <div className=\"d-flex flex-column mb-4 text-left\">\n              <span className=\"text-sm font-medium onboarding-required-field\">Password</span>\n              <input\n                className={[\"onboarding-input py-2 px-2 text-body mb-0 mt-1 w-100\", this.state.signUpErrors.password ? \"onboarding-input-error\" : \"\"].join(\" \")}\n                type=\"password\"\n                name=\"password\"\n                // placeholder=\"Password\"\n                ref={passwordRef}\n                onChange={this.signUpPasswordChangeHandler}\n              />\n              {this.state.signUpErrors.password ?\n                <p className=\"text-sm onboarding-error-message mt-1\">{this.state.signUpErrors.password}</p>\n                : null}\n            </div>\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col-12 col-md-4 offset-md-4\">\n            <Button\n              variant=\"primary\"\n              className=\"px-3 py-1 font-medium onboarding-next-button w-100 onboarding-font-1\"\n              onClick={() => this.signUpClickHandler(firstNameRef, lastNameRef, emailRef, passwordRef)}\n            >Sign Up</Button>\n          </div>\n        </div>\n        <h4 className=\"mt-4\"><span\n          className=\"onboading-text-color onboarding-font-3\">Already have an account? </span><a href=\"#\"\n                                                                                                className=\"font-medium onboarding-link-text onboarding-font-3\"\n                                                                                                tabindex=\"0\"\n                                                                                                onClick={(ev) => this.changeLoginState(ev, true, [firstNameRef, lastNameRef, emailRef, passwordRef])}>Sign\n          In</a></h4>\n      </div>\n    )\n  }\n\n  savePartnerDetail = (nameRef, emailRef) => {\n    let error = {}\n    let valid = true\n    if (nameRef.current.value.length <= 0) {\n      error['name'] = \"This field is required\"\n      valid = false\n    }\n\n    if (emailRef.current.value.length <= 0) {\n      error['email'] = \"This field is required\"\n      valid = false\n    }\n    if (!valid) {\n      this.setState({\n        partnerErrors: error\n      })\n      return\n    }\n    // if (nameRef.current.value.length <= 0 || emailRef.current.value.length <= 0) {\n    //   toast.error(\"Please enter all fields\")\n    //   return\n    // }\n\n    // Checking for valid email\n    if (!this.checkValidEmail(emailRef.current.value)) {\n      error['email'] = \"Invalid email address\";\n    }\n    if (Object.keys(error).length > 0) {\n      this.setState({\n        partnerErrors: error\n      })\n      return\n    }\n\n    const cookies = new Cookies();\n    let reqData = {\n      query: ADD_PARTNER_ACCOUNT,\n      operationName: \"addPartner\",\n      variables: {\n        partnerDetail: {\n          email: emailRef.current.value,\n          name: nameRef.current.value\n        }\n      }\n    }\n    graphQLNoHeader(reqData, {\n      headers: {\"Authorization\": cookies.get(\"access_token\") ? \"Token \" + cookies.get(\"access_token\") : \"\"}\n    }).then(res => {\n      if (res.data.data.addPartnerAccount) {\n        this.gotoNextQuestion(this.state.question, this.state.parentId);\n      } else {\n        toast.error(\"Some error occurred\");\n      }\n    }).catch(err => {\n      toast.error(\"Some error occurred\");\n      console.error(err.response.data);\n    })\n  }\n\n  getPartnerContent = () => {\n    const nameRef = React.createRef()\n    const emailRef = React.createRef()\n    return (\n      <>\n        <div className=\"row\">\n          <div className=\"col-12 col-md-4 offset-md-4\">\n            <div className=\"d-flex flex-column mb-4 text-left\">\n              <span className=\"text-sm font-medium onboarding-required-field\">Name</span>\n              <input\n                className={[\"onboarding-input py-2 px-2 text-body mb-0 mt-1\", this.state.partnerErrors.name ? \"onboarding-input-error\" : \"\"].join(\" \")}\n                type=\"text\"\n                name=\"name\"\n                // placeholder=\"Name\"\n                ref={nameRef}\n                onChange={(ev) => this.textInputTypeChangeHandler(ev, [nameRef, emailRef], \"partner-name\")}\n              />\n              {this.state.partnerErrors.name ?\n                <p className=\"text-sm onboarding-error-message mt-1\">{this.state.partnerErrors.name}</p>\n                : null}\n            </div>\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col-12 col-md-4 offset-md-4\">\n            <div className=\"d-flex flex-column mb-4 text-left\">\n              <span className=\"text-sm font-medium onboarding-required-field\">Email Address</span>\n              <input\n                className={[\"onboarding-input py-2 px-2 text-body mt-1 mb-0\", this.state.partnerErrors.email ? \"onboarding-input-error\" : \"\"].join(\" \")}\n                type=\"email\"\n                name=\"email\"\n                // placeholder=\"Your Email\"\n                ref={emailRef}\n                onChange={(ev) => this.textInputTypeChangeHandler(ev, [nameRef, emailRef], \"partner-email\")}\n              />\n              {this.state.partnerErrors.email ?\n                <p className=\"text-sm onboarding-error-message mt-1\">{this.state.partnerErrors.email}</p>\n                : null}\n            </div>\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col-12 col-md-4 offset-md-4\">\n            <Button\n              variant=\"primary\"\n              disabled={this.state.nextBtnState !== undefined ? this.state.nextBtnState : true}\n              className=\"px-3 py-1 w-100 font-medium onboarding-next-button onboarding-font-1\"\n              onClick={() => this.savePartnerDetail(nameRef, emailRef)}\n            >Next</Button>\n          </div>\n        </div>\n      </>\n    )\n  }\n\n  dateInputChange = (date, inputref) => {\n    this.setState({\n      dateInputValue: date,\n      nextBtnState: String(date).length <= 0\n    })\n    // if (inputref.current){\n    //   nextBtnState: ev.target.value.length <= 0\n    // }\n  }\n\n  getDateFromString = (str) => {\n    let darr = str.split(\"/\");    // [\"29\", \"1\", \"2016\"]\n    let dobj = new Date(parseInt(darr[2]), parseInt(darr[1]) - 1, parseInt(darr[0]));\n    // Date {Fri Jan 29 2016 00:00:00 GMT+0530(utopia standard time)\n    return dobj\n  }\n\n  loginInputKeyUpHandler = (ev, emailRef, passwordRef) => {\n    ev.persist();\n    ev.preventDefault();\n    if (ev.keyCode === 13) { //Enter keycode is 13\n      this.signInClickHandler(emailRef, passwordRef)\n    }\n  }\n\n  alreadyHaveAccountSignInClickHandler = (ev) => {\n    ev.preventDefault();\n    this.props.history.push(routes.ONBOARDING.HOME + \"?login=true\")\n  }\n\n  render() {\n    // if (this.props.stateOnboardingAnswers) {\n    //   this.submitAllAnswers(null, false)\n    // }\n\n    // Checking if user has unfinished Onboarding\n    if (this.props.stateOnboardingQuestions.length <= 0 && !this.getQuestionApiCalled && this.props.stateRegistryInfo.id) {\n      this.alreadyAnsweredFollowUp = true\n      const cookies = new Cookies();\n      const access_token = cookies.get(\"access_token\")\n      this.props.dispatch(setOnboardingRegistry(this.props.stateRegistryInfo.id))\n      this.getQuestionApiCalled = true\n      getOnboardingQuestions(this.props.dispatch, this.props.stateRegistryInfo.id, access_token)\n    }\n    let loginChecked = false\n    let localTotalGifts = 0\n\n    if (this.props.stateOnboardingQuestions.length > 0) {\n      localTotalGifts = this.props.stateOnboardingQuestions.length;\n      if (this.props.stateOnboardingAnswers) {\n        let followUpQuestion = this.props.stateOnboardingAnswers.filter(answer => answer.response.isFollowUp).length\n        localTotalGifts += followUpQuestion\n      }\n\n      if (this.state.question.isFollowUpQuestion && (this.props.history.action.toString().toUpperCase() !== \"POP\" || this.alreadyAnsweredFollowUp)) {\n        if (this.alreadyAnsweredFollowUp) {\n          this.alreadyAnsweredFollowUp = false\n        }\n        localTotalGifts += 1\n      }\n    }\n\n    setMetaInfoToDom(ONBOARDING_SEO, \"onboarding\");\n\n    let toastMessageToDisplay = \"\"\n\n    // Redirecting user to registry home if registry found\n    if (this.props.stateRegistryInfo.id && this.props.stateRegistryInfo.isOnboardingCompleted) {\n      return <Redirect to={routes.MY_REGISTRY.HOME}/>\n    }\n\n    if (this.props.stateOnboardingQuestions.length > 0 &&\n      this.props.stateRouter.location.query &&\n      this.props.stateRouter.location.query.login &&\n      !this.props.stateLoggedIn &&\n      !this.state.directLogin\n    ) {\n      loginChecked = true\n      let loginQuestion = this.props.stateOnboardingQuestions.find(question => question.answerInputType === this.LOGIN)\n      this.setQuestionBasedOnId(loginQuestion.id)\n      this.setState({\n        login: true,\n        directLogin: true\n      })\n    }\n\n    // Redirecting to first question if not answered any\n    if (this.props.stateOnboardingQuestions.length > 0\n      && this.props.stateOnboardingAnswers.length <= 0\n      && this.props.stateRouter.location.query && Number(this.props.stateRouter.location.query.q) !== Number(this.props.stateOnboardingQuestions[0]?.id)\n      && !loginChecked\n    ) {\n      return <Redirect to={routes.ONBOARDING.HOME + `?q=${this.props.stateOnboardingQuestions[0].id}`}/>\n    }\n\n    if (!this.state.question.title && this.props.stateOnboardingQuestions.length > 0 && this.props.stateRouter.location.query && Number(this.props.stateRouter.location.query.q) !== Number(this.state.question.id)) {\n      let questionId = null;\n      for (let question of this.props.stateOnboardingQuestions) {\n        if (!question.isAnswered) {\n          questionId = question.id;\n          break;\n        } else {\n          let answeredOption = question.answers[0].questionOption ? question.answers[0].questionOption.id : null\n          for (let option of question.options) {\n            if (option.followUpQuestions && option.id === answeredOption) {\n              for (let followUpQuestion of option.followUpQuestions) {\n                if (!followUpQuestion.question.isAnswered) {\n                  questionId = followUpQuestion.question.id\n                  break;\n                }\n              }\n            }\n            if (questionId) {\n              break;\n            }\n          }\n          if (questionId) {\n            break;\n          }\n        }\n      }\n\n      if (questionId && Number(questionId) !== Number(this.props.stateRouter.location.query.q)) {\n        let queryParams = new URLSearchParams(window.location.search)\n          queryParams.set('q', questionId)\n          this.props.history.replace({\n            search: queryParams.toString(),\n          })\n        this.setQuestionBasedOnId(questionId)\n      } else {\n        this.setQuestionBasedOnId(this.props.stateRouter.location.query.q)\n      }\n    }\n    // Skipping Login Question if user is already logged in\n    if (this.props.stateLoggedIn && this.state.question.answerInputType === this.LOGIN) {\n      // If user already logged into M&A Store\n      this.setState((prevState, _) => ({\n        redirectionUrl: prevState.redirectionUrl ? prevState.redirectionUrl : routes.MY_REGISTRY.HOME\n      }))\n      this.gotoNextQuestion(this.state.question, null);\n    }\n\n    // if (this.state.toastMessage && !this.isActiveToast) {\n    if (this.state.toastMessage) {\n      if (this.props.history.action === \"PUSH\") {\n        toastMessageToDisplay = this.state.toastMessage\n        // toast.dismiss()\n        // toast.info(<h4 className=\"font-medium text-center\">{this.state.toastMessage}</h4>)\n        // this.isActiveToast = true\n        // setTimeout(() => this.setState({toastMessage: \"\"}), 4000)\n      }\n    } else {\n      // toast.dismiss()\n    }\n\n    // Setting all the options for the questions\n    let options = []\n    let staticQuestionTitle = \"\";\n\n    if (this.state.question.answerInputType === this.RADIO) {\n      if (this.state.question.options.length === 2 && this.state.question.options[0].helpText) {\n        let questionOptions = this.state.question.options;\n        options.push(\n          <div className=\"row\">\n            <div className=\"col-12 col-md-6 pb-2\">\n              <div className=\"d-flex ml-0 ml-md-auto onboarding-dual-option\">\n                <div className=\"text-center ml-auto mr-auto mr-md-0 position-relative\">\n                  {questionOptions[0].action === this.REGISTRY_QUIZ_CASE ? <span\n                    className=\"onboarding-font-5 onboarding-link-color onboarding-option-recommend-text\">Recommended</span> : null}\n                  <Option\n                    className={[\"mb-2\", this.state.currentAnswer && this.state.currentAnswer.optionText === questionOptions[0].value ? \"onboarding-selected\" : \"\"].join(\" \")}\n                    onClick={() => this.answerRadioQuestion({...this.state.question}, questionOptions[0])}>\n                    <h4 className=\"d-inline\">{questionOptions[0].value}</h4></Option>\n                  {questionOptions[0].helpText ?\n                    <span\n                      className=\"text-sm ml-1 onboading-text-color onboarding-font-3 d-block mx-auto\">{questionOptions[0].helpText}</span> : null}\n                </div>\n              </div>\n            </div>\n            <div\n              className={[\"col-12 col-md-6 position-relative pt-md-0\", questionOptions[1].action === this.REGISTRY_QUIZ_CASE ? \"pt-6\" : \"pt-2\"].join(\" \")}>\n              <div className=\"onboarding-option-half-border\"/>\n              <div className=\"d-flex onboarding-dual-option\">\n                <div className=\"text-center mr-auto ml-auto ml-md-0 position-relative\">\n                  {questionOptions[1].action === this.REGISTRY_QUIZ_CASE ? <span\n                    className=\"d-block onboarding-font-5 onboarding-link-color onboarding-option-recommend-text\">Recommended</span> : null}\n                  <Option\n                    className={[\"mb-2\", this.state.currentAnswer && this.state.currentAnswer.optionText === questionOptions[1].value ? \"onboarding-selected\" : \"\"].join(\" \")}\n                    onClick={() => this.answerRadioQuestion({...this.state.question}, questionOptions[1])}>\n                    <h4 className=\"d-inline\">{questionOptions[1].value}</h4></Option>\n                  {questionOptions[1].helpText ?\n                    <span\n                      className=\"text-sm ml-1 onboading-text-color onboarding-font-3 d-block mx-auto\">{questionOptions[1].helpText}</span> : null}\n                </div>\n              </div>\n            </div>\n          </div>\n        )\n      } else {\n        for (const option of this.state.question.options) {\n          if (this.SKIP_BOTH_OPTION && Number(this.state.question.id) === this.BOTH_OPTION_ID.questionId && Number(option.id) === this.BOTH_OPTION_ID.optionId) {\n            this.SKIP_BOTH_OPTION = true\n          } else {\n            options.push(\n              <Option\n                className={[\"mb-2 mr-4\", this.state.currentAnswer && this.state.currentAnswer.optionText === option.value ? \"onboarding-selected\" : \"\"].join(\" \")}\n                onClick={() => this.answerRadioQuestion({...this.state.question}, option)}>\n                <h4 className=\"d-inline\">{option.value}</h4>{option.helpText ?\n                <span className=\"text-sm ml-1 onboarding-option-help-text\">{option.helpText}</span> : null}</Option>\n            )\n          }\n        }\n      }\n    } else if (this.state.question.answerInputType === \"Date\") {\n      let inputRef = React.createRef();\n      // this.setState({\n      //   dateInputValue: this.state.currentAnswer ? this.state.currentAnswer.optionText : null\n      // })\n      options.push(\n        <div className=\"d-flex justify-content-center align-items-center flex-column flex-md-row\">\n          <DatePicker\n            selected={this.state.dateInputValue}\n            onChange={(date) => this.dateInputChange(date, inputRef)}\n            minDate={new Date()}\n            dateFormat=\"MM/dd/yyyy\"\n            customInput={<CustomDateInput ref1={inputRef}/>}\n          />\n          <Button\n            variant=\"primary\"\n            disabled={this.state.nextBtnState !== undefined ? this.state.nextBtnState : true}\n            onClick={() => this.answerDataQuestion({...this.state.question}, inputRef.current.value, true)}\n            className=\"ml-md-3  px-7 font-medium mt-4 mt-md-0 onboarding-next-button\"\n          >Next</Button>\n        </div>\n      )\n    } else if (this.state.question.answerInputType === \"Text\") {\n      let inputRefs = []\n      const inputRef = React.createRef()\n      inputRefs.push(inputRef)\n      options.push(\n        // TODO: Update this part if there is a Text type question\n        <div className=\"d-flex flex-column\">\n          <input\n            className=\"onboarding-input py-1 px-2 text-body mb-0 mt-1\"\n            type=\"Text\"\n            name=\"Answer\"\n            ref={inputRef}\n            defaultValue={this.state.currentAnswer ? this.state.currentAnswer.optionText : \"\"}\n            onChange={(ev) => this.textInputTypeChangeHandler(ev, inputRefs)}\n          />\n          <Button\n            variant=\"primary\"\n            disabled={this.state.nextBtnState !== undefined ? this.state.nextBtnState : true}\n            onClick={() => this.answerDataQuestion({...this.state.question}, inputRef.current ? inputRef.current.value : \"\", false)}\n            className=\"mt-4 px-3 py-1 font-medium onboarding-next-button\"\n          >Next</Button>\n        </div>\n      )\n    } else if (this.state.question.answerInputType === this.LOGIN) {\n      let content = null;\n      if (this.state.login) {\n        staticQuestionTitle = this.LOGIN_TITLE\n        content = this.getSignInContent()\n      } else {\n        staticQuestionTitle = this.SIGNUP_TITLE\n        content = this.getSignUpContent()\n      }\n\n      options.push(content)\n    } else if (this.state.question.answerInputType === this.PARTNER) {\n      staticQuestionTitle = this.PARTNER_TITLE;\n      options.push(this.getPartnerContent())\n    }\n\n    document.body.style.overflow = \"hidden\";\n\n    if (this.state.question && !this.ANIMATED) {\n      let el1_toast = document.querySelector(\"#onboarding-animate-1\")\n      let el2_question = document.querySelector(\"#onboarding-animate-2\")\n      let el3_options = document.querySelector(\"#onboarding-animate-3\")\n\n      if (el1_toast && el2_question && el3_options) {\n        el1_toast.classList.remove(\"onboarding-animate-toast\");\n        el2_question.classList.remove(\"onboarding-animate-question\");\n        el3_options.classList.remove(\"onboarding-animate-options\");\n\n        el1_toast.classList.add(\"onboarding-animate-toast\");\n        el2_question.classList.add(\"onboarding-animate-question\");\n        el3_options.classList.add(\"onboarding-animate-options\");\n\n        el1_toast.style.opacity = 0;\n        el2_question.style.opacity = 0;\n        el3_options.style.opacity = 0;\n\n        this.ANIMATED = true\n      }\n    }\n\n    return (\n      <>\n        <div className=\"baby-registry-onboarding\">\n          <div className=\"onboarding-background-color\">\n\n            {/* Logo */}\n            <div className=\"m-a-logo-section text-center position-relative\">\n              <a href=\"/\" className=\"d-block py-4\">\n                <img className=\"onboarding-ma-logo mx-auto d-none d-md-block\" src={ROUTES.MA_LOGO} alt=\"logo\"/>\n                <img className=\"onboarding-ma-logo mx-auto d-block d-md-none\" src={ROUTES.MA_ELEPHANT_LOGO} alt=\"logo\"/>\n              </a>\n\n              {!this.props.stateLoggedIn && this.state.question.answerInputType !== this.LOGIN ?\n                <div className=\"m-a-logo-section-login mr-5 mr-md-10\">\n                  <p\n                    className=\"onboading-text-color onboarding-font-3\"><span className=\"d-none d-md-inline-block\">Already have an account?&nbsp;</span>\n                    <a href={routes.ONBOARDING.HOME + \"?login=true\"}\n                       onClick={(ev) => this.alreadyHaveAccountSignInClickHandler(ev)}\n                       className=\"font-medium onboarding-link-text onboarding-font-3\"\n                       tabIndex=\"0\">Sign\n                      In</a>\n                  </p>\n                </div>\n                : null}\n            </div>\n\n            {/* Questions */}\n            <div\n              className={[\"container pb-25\", this.state.question.answerInputType === this.LOGIN || this.state.question.answerInputType === this.PARTNER ? \"pt-6 pt-md-15\" : \"pt-10 pt-md-24\"].join(\" \")}>\n              <div className=\"row justify-content-center mb-3\">\n                <div className=\"col-12 col-md-6 text-center\">\n                  {/* Toast messages */}\n                  <span className=\"onboading-text-color onboarding-toast onboarding-font-1 onboarding-animate-toast\"\n                        id=\"onboarding-animate-1\"\n                        onAnimationEnd={(ev) => {\n                          ev.target.style.opacity = 1;\n                          ev.target.classList.remove('onboarding-animate-toast')\n                        }}\n                  >{toastMessageToDisplay}</span>\n                </div>\n              </div>\n              <div className=\"row justify-content-center\">\n                <div className=\"col-12 col-md-6 text-center\">\n                  <div\n                    className=\"onboading-question onboarding-animate-question\"\n                    id=\"onboarding-animate-2\"\n                    onAnimationEnd={(ev) => {\n                      ev.target.style.opacity = 1;\n                      ev.target.classList.remove('onboarding-animate-question')\n                    }}\n                    style={{animationDelay: toastMessageToDisplay.length > 0 ? ONBOARDING_ANIMATION_DELAY.QUESTION_WITH_TOAST : ONBOARDING_ANIMATION_DELAY.QUESTION_WITHOUT_TOAST}}\n                  >\n                    <span className=\"font-body onboading-question-title\"\n                          dangerouslySetInnerHTML={{__html: [this.LOGIN, this.PARTNER].indexOf(this.state.question.answerInputType) !== -1 ? staticQuestionTitle : this.state.question.title}}/>\n                    {this.state.question.helpText ?\n                      <span\n                        className=\"onboarding-font-3 my-3 d-block\"\n                        dangerouslySetInnerHTML={{__html: [this.LOGIN, this.PARTNER].indexOf(this.state.question.answerInputType) !== -1 ? \"\" : this.state.question.helpText}}/>\n                      : null}\n                  </div>\n                </div>\n              </div>\n              <div className=\"row justify-content-center mt-6\">\n                <div\n                  // className={[\"col-12 text-center\", this.state.question.answerInputType === this.LOGIN || this.state.question.answerInputType === this.PARTNER ? \"\" : \"\"].join(\" \")}>\n                  onAnimationEnd={(ev) => {\n                    ev.target.style.opacity = 1;\n                    ev.target.classList.remove('onboarding-animate-options')\n                  }}\n                  style={{animationDelay: toastMessageToDisplay.length > 0 ? ONBOARDING_ANIMATION_DELAY.OPTION_WITH_TOAST : ONBOARDING_ANIMATION_DELAY.OPTION_WITHOUT_TOAST}}\n                  id=\"onboarding-animate-3\"\n                  className={[\"col-12 text-center onboarding-options-section onboarding-animate-options\", this.state.question.answerInputType === \"Date\" ? \"col-md-6\" : \"\"].join(\" \")}>\n                  {options.map(option => option)}\n                </div>\n              </div>\n            </div>\n\n            {/* Progress */}\n            <div className=\"onboarding-progress-section\">\n              <div className=\"container\">\n                <div className=\"row\">\n                  <div className=\"col-12 col-md-6 pt-4 pb-5\">\n                    {/*{this.state.totalQuestions && !this.state.directLogin ?*/}\n                    {/*  <QuestionnaireProgressBar*/}\n                    {/*    completed={(this.props.stateOnboardingAnswers.length / (this.props.stateLoggedIn ? this.state.totalQuestions - 1 : this.state.totalQuestions)) * 100}/>*/}\n                    {/*  : null}*/}\n\n                    {localTotalGifts && !this.state.directLogin ?\n                      <QuestionnaireProgressBar\n                        completed={((this.state.localLoggedIn ? this.props.stateOnboardingAnswers.length + 1 : this.props.stateOnboardingAnswers.length) / (this.props.stateLoggedIn && !this.state.localLoggedIn ? localTotalGifts - 1 : localTotalGifts)) * 100}/>\n                      : null}\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <ToastContainer\n          position=\"top-center\"\n          className=\"onboarding-toast-container\"\n          toastClassName=\"onboarding-toast px-3 py-1\"\n          autoClose={2000}\n          hideProgressBar={true}\n          newestOnTop={true}\n          draggable={false}\n          closeOnClick={false}\n          closeButton={null}\n        />\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    stateRegistryInfo: state.registry.info,\n    stateLoggedIn: state.registry.loggedIn,\n    stateOnboardingQuestions: state.onboarding.questions,\n    stateOnboardingAnswers: state.onboarding.answers,\n    stateOnboardingRegistry: state.registry.onboardingRegistry,\n    stateRouter: state.router\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(Onboarding);\n","import axios from 'axios';\nimport { push } from \"connected-react-router\";\nimport { API_END_POINTS, API_URL } from '../../../utils/constants'\n\nexport const VERIFY_TOKEN_ACTION_TYPES = {\n    VERIFY_TOKEN: \"VERIFY_TOKEN\",\n    SET_CUSTOMER: \"SET_CUSTOMER\"\n}\n\nexport const setCustomer = (payload) => {\n    return {\n        type: VERIFY_TOKEN_ACTION_TYPES.SET_CUSTOMER,\n        payload: payload\n    }\n}\n\nexport const verifyTokenRequest = params => {\n    return dispatch => {\n        axios.post(API_URL + API_END_POINTS.VERIFY_TOKEN, {\n            token: params.token\n        }).then(response => {\n            dispatch(setCustomer({\n                customer: response.data.data.customer,\n                token: response.data.data.token\n            }))\n        }).then(() => {\n            dispatch(redirectVerifyToken())\n        }).catch(error => {\n            console.log(error);\n        })\n\n    }\n}\n\nexport const redirectVerifyToken = () => dispatch => {\n    dispatch(push(\"/another\"));\n};","import { Component } from \"react\";\nimport { connect } from 'react-redux';\n\nimport { verifyTokenRequest } from './VerifyTokenActions'\n\n\nclass VerifyToken extends Component {\n\n    componentDidMount() {\n        this.props.verifyToken({\n            token: this.props.match.params.token\n        })\n    }\n\n    render() {\n        return \"\"\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        verifyToken: (params) => dispatch(verifyTokenRequest(params))\n    };\n};\nexport default connect(null, mapDispatchToProps)(VerifyToken);","import React from 'react';\nimport \"./PersonaliseHeader.scss\";\nimport {withRouter} from \"react-router\";\nimport routes from \"utils/routes\";\nimport {ROUTES} from \"../../../../utils/cdn-assets-links\";\nimport {MA_ADD_ITEM_TO_REGISTRY} from \"utils/constants\";\n\n\nconst PersonaliseHeader = (props) => {\n  const closePersonalise = (event) => {\n    event.preventDefault();\n\n    // For Redirectly it to product detail page for adding that product again\n    const maRePrURL = localStorage.getItem(MA_ADD_ITEM_TO_REGISTRY) && !localStorage.getItem(MA_ADD_ITEM_TO_REGISTRY).hasRedirected ? JSON.parse(localStorage.getItem(MA_ADD_ITEM_TO_REGISTRY)) : null;\n    if (maRePrURL) {\n      window.open(maRePrURL.url, '_self')\n      return;\n    }\n    // And Forwarding him to edit checklist\n    if (props.location.state?.openEditChecklist) {\n      props.history.push(routes.PERSONALIZE.CHECKLIST)\n    }\n    // And Forwarding to build registry\n    else {\n      props.history.push({\n        pathname: routes.MY_REGISTRY.HOME,\n        state: {\n          getRecommendation: true,\n        }\n      })\n    }\n  }\n\n  return (\n    <div className=\"personalise-header\" id=\"personalise-header-quiz\">\n      <div className=\"m-a-personalise-logo-section text-center\">\n        <a href=\"/\" className=\"d-block py-4\">\n          <img className=\"mx-auto d-none d-md-block\" src={ROUTES.MA_LOGO} alt=\"logo\"/>\n          <img className=\"mx-auto d-block d-md-none\" src={ROUTES.MA_ELEPHANT_LOGO} alt=\"logo\"/>\n        </a>\n      </div>\n      <button className=\"personalize-close-btn d-flex p-2\" onClick={(e) => { closePersonalise(e) }}>\n        <i className=\"icon-close mr-2\"/>\n        <span className=\"personalise-close-btn-text onboarding-font-3 font-medium\">Exit</span>\n      </button>\n      {/*<div className=\"container\">*/}\n      {/*    <div className=\"row\">*/}\n      {/*        <div className=\"col d-flex justify-content-between py-2\">*/}\n      {/*            <p className=\"text-body font-medium personalise-text\">My Registry Quiz</p>*/}\n      {/*            <i className=\"icon-close align-self-center personalise-close\" onClick={(e) => { closePersonalise(e) }} />*/}\n      {/*        </div>*/}\n      {/*    </div>*/}\n      {/*</div>*/}\n    </div>\n  );\n}\n\nexport default withRouter(PersonaliseHeader);","import React from 'react';\nimport \"./PersonaliseFooter.scss\";\nimport QuestionnaireProgressBar from \"../../../commons/components/questionnair-progress-bar/QuestionnairProgressBar\";\n\n\nconst PersonaliseFooter = (props) => {\n  const closePersonalise = (event) => {\n    event.preventDefault();\n    // props.history.push(routes.REGISTRY.HOME)\n  }\n\n  return (\n    <div className=\"personalise-footer\">\n      <div className=\"container\">\n        <div className=\"row\">\n          <div className=\"col-8 col-md-6 justify-content-between pt-4 pb-5\">\n            <QuestionnaireProgressBar\n                        completed={props.percentage}/>\n          </div>\n          {/* <i className=\"icon-close align-self-center personalise-close\" onClick={(e) => { closePersonalise(e) }} /> */}\n          <div className=\"col-4 col-md-6 d-flex justify-content-end\">\n            <i className=\"icon-chevron-left align-self-center personalise-footer-icon p-2\" onClick={props.prevQuestion} />\n            <i className=\"icon-chevron-right align-self-center personalise-footer-icon p-2\" onClick={props.nextQuestion} />\n          </div>\n        </div>\n      </div>\n      {props.children}\n    </div>\n  );\n}\n\nexport default PersonaliseFooter;","import React, {createRef} from \"react\";\n// import \"./CheckListItems.scss\";\nimport {withTranslation} from \"react-i18next\";\nimport PersonaliseHeader from \"./components/personalise-header/PersonaliseHeader\";\nimport {getPersonalizeQuestions, setMetaInfoToDom, updateRegistryDetail} from \"utils/commonFunction\";\nimport {connect} from \"react-redux\";\nimport PersonaliseFooter from \"./components/personalise-footer/PersonaliseFooter\";\nimport {toast, ToastContainer} from \"react-toastify\";\nimport Option from \"../commons/components/questions/option/Option\";\nimport {\n  updatePersonalizeQuestionAnswer,\n  addPersonalizeQuestionAnswer,\n  addPersonalizeQuestion\n} from \"./PersonaliseCheckListActions\";\nimport \"./PersonaliseChecklist.scss\";\nimport \"../onboarding/Onboarding.scss\";\nimport Button from \"modules/commons/components/button-component/ButtonComponent\";\nimport routes from \"utils/routes\";\nimport {SAVE_SINGLE_QUESTION_RESPONSE} from 'api/mutations';\nimport {graphQL} from 'api/axios';\nimport {ONBOARDING_ANIMATION_DELAY, MA_ADD_ITEM_TO_REGISTRY} from \"../../utils/constants\";\nimport {Redirect} from 'react-router-dom';\nimport DatePicker from \"react-datepicker\"\nimport \"react-datepicker/dist/react-datepicker.css\";\n\nconst SkipQuestionLink = props => {\n  const linkClickHandler = ev => {\n    ev.preventDefault()\n    if (props.onClick) {\n      props.onClick();\n    }\n  }\n  return (\n    <div className={props.className ? props.className : \"\"}>\n      <a\n        tabIndex={1}\n        href=\"/\"\n        onClick={(ev) => linkClickHandler(ev)}\n        className=\"personalize-quiz-skip-question-link onboarding-font-2 onboading-text-color\"\n      >Skip this question</a>\n    </div>\n  )\n}\n\nconst CustomDateInput = React.forwardRef(({value, onClick, ref1}, ref) => (\n  <div className=\"onboarding-date-input-container d-block\" onClick={onClick}>\n    <input type=\"text\" value={value} readOnly\n           className=\"onboarding-input py-1 px-2 pr-6 text-body mb-0 onboarding-font-1\" ref={ref1}\n           placeholder=\"Due Date\"/>\n    <i className=\"onboarding-date-icon\"/>\n  </div>\n));\n\nclass PersonaliseChecklist extends React.Component {\n\n  state = {\n    parentId: null,\n    prevQuestionId: [],\n    question: {},\n    activeQuestionId: null,\n    toastMessage: \"\",\n    percentage: 0,\n    checkBoxSelected: [],\n    dateInputValue: null,\n  }\n\n  isActiveToast = false\n  headerHeightFromTop = null\n  isAnsweredChanged = false\n\n  // Answer type mapping\n  RADIO = \"Radio\"\n  CHECKBOX = \"Checkbox\"\n  DATE = \"Date\"\n\n  ANIMATED = false\n\n  componentDidMount() {\n    // getPersonalizeQuestions(this.props.stateRegistryInfo.id, this.props.dispatch)\n    this.headerHeightFromTop = null\n    this.isAnsweredChanged = false\n    window.addEventListener('scroll', this.handleScroll);\n    window.addEventListener(\"keyup\", (ev) => this.handleKeyboardNavigation(ev));\n    this.setQuestionBasedOnId(this.props.match.params['questionId'])\n    this.clearToastMessage()\n  }\n\n  calulatePercentage = (answerQuestionCount, totalQuestionCount) => {\n    let totalAnwer = 0;\n\n    const questions = [...this.props.statePersonaliseQuestions]\n    for (let question of questions) {\n      if (question.answers.length > 0) {\n        totalAnwer++;\n      }\n      if (questions.followUpQuestion) {\n        for (let subQuestion of question.followUpQuestions) {\n          if (subQuestion.answers.length > 0) {\n            totalAnwer++;\n          }\n        }\n      }\n    }\n    return this.props.statePersonaliseQuestions.length ? Math.ceil(totalAnwer * 100 / totalQuestionCount) : 0;\n  }\n\n  gotoNextQuestion = async (question, parentId, option = {}, doNotRedirect = false) => {\n    this.ANIMATED = false;\n    await this.clearToastMessage();\n    if (this.state.question.answerInputType === this.CHECKBOX) {\n      this.answerCheckBoxQuestion(this.state.question.id, this.state.checkBoxSelected)\n    }\n    let nextQuestionId = null;\n    let returnNext = false;\n    const idToMatch = parentId ? parentId : question.id;\n\n    // Finding if given anwer has followup or not & Only works for 1 follow up question\n    if (this.state.question.answers.length) {\n      let answerId = this.state.question.answers[0]?.questionOption?.id\n      let tempOption = null\n      for (let ans of [...this.state.question.options]) {\n        if (ans.id === answerId && ans.followUpQuestions?.length) {\n          tempOption = {...ans};\n          break;\n        }\n      }\n      if (tempOption) {\n        await this.setState({\n          question: tempOption.followUpQuestions[0].question,\n          parentId: tempOption.followUpQuestions[0].parentQuestion\n        })\n        await this.gotoNextQuestion(this.state.question, this.state.parentId, tempOption)\n        return;\n      }\n    }\n\n    // Only works for 1 follow up question\n    if (option.followUpQuestions && option.followUpQuestions.length > 0) {\n      nextQuestionId = option.followUpQuestions[0].question.id;\n    } else {\n      for (let ques of this.props.statePersonaliseQuestions) {\n        if (returnNext) {\n          nextQuestionId = ques.id\n          break\n        }\n        if (ques.id === idToMatch) {\n          returnNext = true;\n        }\n      }\n    }\n\n    if (nextQuestionId === null && returnNext) {\n      // This is last question\n      // And Forwarding him to edit checklist\n      // TODO: change this if needed\n      // if(this.props.location.state?.openEditChecklist) {\n      //   this.props.history.push(routes.PERSONALIZE.CHECKLIST)\n      // }\n      // // And Forwarding to build registry\n      // else {\n      //   this.props.history.push(routes.MY_REGISTRY.HOME)\n      // }\n      if (!doNotRedirect) {\n        // For Redirectly it to product detail page for adding that product again\n        const maRePrURL = localStorage.getItem(MA_ADD_ITEM_TO_REGISTRY) && !localStorage.getItem(MA_ADD_ITEM_TO_REGISTRY).hasRedirected ? JSON.parse(localStorage.getItem(MA_ADD_ITEM_TO_REGISTRY)) : null;\n        if (maRePrURL) {\n          window.open(maRePrURL.url, '_self')\n        }\n        else {\n          this.props.history.push({\n            pathname: routes.MY_REGISTRY.HOME,\n            state: {\n              toastMessage: \"Your checklist and recommendations have been updated\",\n              getRecommendation: true,\n            }\n          })\n        }\n      }\n    } else if (nextQuestionId) {\n      await this.setState({\n        parentId: null,\n        prevQuestionId: this.isActiveIdPresent() ? [...this.state.prevQuestionId, this.state.question.id] : this.state.prevQuestionId,\n        activeQuestionId: nextQuestionId\n      })\n      await this.setQuestionBasedOnId(nextQuestionId)\n    }\n  }\n\n  gotoPrevQuestion = (prevQuestionId) => {\n    this.setQuestionBasedOnId(prevQuestionId);\n    if (this.state.prevQuestionId.length > 1) {\n      let popPrevQuestionId = [...this.state.prevQuestionId];\n      popPrevQuestionId.pop();\n      this.clearToastMessage();\n      this.setState({\n        prevQuestionId: popPrevQuestionId,\n        activeQuestionId: popPrevQuestionId.length > 0 ? popPrevQuestionId[popPrevQuestionId.length - 1] : this.state.activeQuestionId\n      })\n      this.ANIMATED = false\n    }\n  }\n\n  setQuestionBasedOnId = (questionId) => {\n    if (questionId) {\n      let finalQuestion = {};\n      let foundQuestion = false;\n      let parentId = null;\n      for (const question of this.props.statePersonaliseQuestions) {\n        if (foundQuestion) {\n          break;\n        }\n        if (question.id === questionId) {\n          finalQuestion = question;\n          foundQuestion = true;\n          break;\n        }\n        for (const option of question.options) {\n          if (option.followUpQuestions.length > 0) {\n            for (const followUpQuestion of option.followUpQuestions) {\n              if (followUpQuestion.question.id === questionId) {\n                finalQuestion = followUpQuestion.question;\n                parentId = followUpQuestion.parentQuestion;\n                foundQuestion = true\n                break;\n              }\n            }\n          }\n        }\n      }\n\n      if (finalQuestion.id) {\n        this.setState({\n          question: finalQuestion,\n          parentId: parentId,\n        })\n      } else {\n        console.log(\"No Question Found\");\n      }\n    }\n\n  }\n\n  addAnswerToState = (response) => {\n    const alreadyAnswered = this.props.statePersonaliseAnswers.find(el => el.question === this.state.question.id)\n    if (alreadyAnswered) {\n      // This will delete the answers that were given after the matched response\n      let newState = []\n      for (let answer of this.props.statePersonaliseAnswers) {\n        if (answer.question === this.state.question.id) {\n          answer.response = response;\n          newState.push(answer)\n        } else {\n          newState.push(answer)\n        }\n      }\n      this.props.dispatch(updatePersonalizeQuestionAnswer(newState))\n    } else {\n      this.props.dispatch(addPersonalizeQuestionAnswer({question: this.state.question.id, response: response}))\n    }\n  }\n\n  isActiveIdPresent = () => {\n    if (this.state.prevQuestionId.length) {\n      if (this.state.prevQuestionId[this.state.prevQuestionId.length - 1] === this.state.question.id) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  answerRadioQuestion = (questionId, option) => {\n    this.addAnswerToState(option);\n    this.gotoNextQuestion(this.state.question, this.state.parentId, option);\n    // TODO: Remove comment this if needed\n    // if (this.isActiveIdPresent) {\n    //   this.setState({\n    //     prevQuestionId: this.isActiveIdPresent() ? [...this.state.prevQuestionId, this.state.activeQuestionId] : this.state.prevQuestionId,\n    //   })\n    // }\n\n    let finalAnswer = [{\n      option: option.id,\n      optionText: option.value\n    }]\n    this.submitQuestionAnswer(questionId, finalAnswer, option);\n  }\n\n  answerCheckBoxQuestion = (questionId, option) => {\n    this.addAnswerToState(option[0]);\n    // this.calulatePercentage();\n    if (this.isActiveIdPresent) {\n      this.setState({\n        prevQuestionId: this.isActiveIdPresent() ? [...this.state.prevQuestionId, this.state.activeQuestionId] : this.state.prevQuestionId,\n      })\n    }\n\n    // let finalAnswer = [{\n    //   option: option.id,\n    //   optionText: option.value\n    // }]\n\n    let finalAnswer = []\n\n    for (let op of option) {\n      finalAnswer.push({option: op.id, optionText: op.value})\n    }\n\n    // Checking if answer has been changed\n    let hasAnswerChanged = false;\n    if (this.state.question.answers.length !== finalAnswer.length) {\n      hasAnswerChanged = true;\n    } else {\n      for (let prevAnswer of [...this.state.question.answers]) {\n        let foundAnswer = false;\n        for (let finAnswer of [...finalAnswer]) {\n          if (finAnswer.option === prevAnswer.questionOption.id) {\n            foundAnswer = true\n            break;\n          }\n        }\n        if (!foundAnswer) {\n          hasAnswerChanged = true;\n          break;\n        }\n      }\n    }\n    // If answer are changed then api call\n    if (hasAnswerChanged) {\n      this.submitQuestionAnswer(questionId, finalAnswer, option);\n    }\n  }\n\n  selectCheckboxAnswer = (event, checkBoxRef, option) => {\n    this.ANIMATED = true;\n    checkBoxRef.current.classList.toggle(\"personalise-checkbox-selected\");\n    if (event.target.checked) {\n      this.setState({\n        // checkBoxSelected: selectedOption.push(option)\n        checkBoxSelected: [...this.state.checkBoxSelected, option]\n      })\n    } else {\n      var removeIndex = this.state.checkBoxSelected.map(function (item) {\n        return item.id;\n      }).indexOf(option.id);\n      this.state.checkBoxSelected.splice(removeIndex, 1);\n    }\n  }\n\n  submitQuestionAnswer = (questionId, answer, option = null) => {\n\n    if (option?.toastMessage) {\n      this.setState({\n        toastMessage: option.toastMessage\n      })\n    } else {\n      this.setToastMessage()\n    }\n    let questionOptionInput = {\n      question: questionId,\n      questionOptionInput: answer\n    }\n    let reqData = {\n      query: SAVE_SINGLE_QUESTION_RESPONSE,\n      variables: {\n        registryId: this.props.stateRegistryInfo.id,\n        registryQuestionOptionInput: questionOptionInput\n      }\n    }\n\n    graphQL(reqData).then(res => {\n      if (res.data.data) {\n        console.log('Answer Done')\n        // For updaing the Quiz Mode\n        if (!this.isAnsweredChanged && !this.props.stateRegistryInfo.quizMode) {\n          this.isAnsweredChanged = true\n          updateRegistryDetail(this.props.dispatch)\n        }\n        this.setStateQuestionWithSelectedAnswer(questionId, answer)\n      }\n    }).catch(err => {\n      toast.error(\"Error occurred while fetching questions\");\n      console.error(err);\n    })\n  }\n\n  setStateQuestionWithSelectedAnswer = (questionId, answer) => {\n    let answerOpt = []\n    for (let ans of answer) {\n      answerOpt.push({questionOption: {id: ans.option}, optionText: ans.optionText})\n    }\n    // Setting question state with selected answer\n    const questions = [...this.props.statePersonaliseQuestions].map(question => {\n\n      if (question.id === questionId) {\n        question.answers = answerOpt\n      }\n      question.options = question.options.map(opt => {\n        if (opt.followUpQuestions.length > 0) {\n          opt.followUpQuestions.map(followUpQuestion => {\n            if (followUpQuestion.question.id === questionId) {\n              followUpQuestion.question.answers = answerOpt\n            }\n          })\n        }\n        return opt;\n      })\n      question.isAnswered = false;\n      return question;\n    })\n    this.props.dispatch(addPersonalizeQuestion(questions))\n  }\n\n  clearToastMessage = () => {\n    this.setState({\n      toastMessage: \"\"\n    })\n  }\n\n  setToastMessage = () => {\n    let question = {...this.state.question}\n    if (question.formattedToastMessage || question.toastMessage) {\n      this.setState({\n        toastMessage: question.formattedToastMessage ? question.formattedToastMessage : question.toastMessage\n      })\n      this.isActiveToast = false\n    } else {\n      this.clearToastMessage()\n    }\n  }\n\n  selectedColorSchemes = (data) => {\n    if (this.state.checkBoxSelected.length <= 0) {\n      this.setState({\n        checkBoxSelected: [...data]\n      })\n    }\n  }\n\n  handleScroll = (event) => {\n    let el = document.getElementById('personalise-header');\n    if (el) {\n      // Setting height from top to checklist\n      if (el.getBoundingClientRect().top === 0 && !this.headerHeightFromTop) {\n        this.headerHeightFromTop = window.scrollY\n      }\n      // Setting position of checklist to fixed\n      if (el.getBoundingClientRect().top <= 0) {\n        el.style.position = 'fixed';\n        el.style.top = 0;\n        el.style.width = '100%';\n      }\n      // Setting position of checklist to static\n      if (this.headerHeightFromTop >= window.scrollY) {\n        el.style.position = 'static';\n        el.style.top = 'auto';\n      }\n    }\n  }\n\n  handleKeyboardNavigation = (ev) => {\n    switch (ev.keyCode) {\n      // Left arrow key\n      case 37:\n        this.gotoPrevQuestion(this.state.prevQuestionId[this.state.prevQuestionId.length - 1])\n        break;\n      //  Right arrow key\n      case 39:\n        this.gotoNextQuestion(this.state.question, this.state.parentId, {}, true)\n        break;\n      default:\n        break;\n    }\n  }\n\n  dateInputChange = (date, inputref) => {\n    this.setState({\n      dateInputValue: date,\n      nextBtnState: String(date).length <= 0\n    })\n  }\n\n  answerDataQuestion = (question, response, dateCheck) => {\n    if (dateCheck) {\n      // TODO: Change this if needed\n      // var now = new Date();\n      // var day = (\"0\" + now.getDate()).slice(-2);\n      // var month = (\"0\" + (now.getMonth() + 1)).slice(-2);\n      // var currentDate = now.getFullYear() + \"-\" + (month) + \"-\" + (day);\n      // console.log(currentDate,response)\n      // if (currentDate <= response) {\n      //   this.addAnswerToState(questionId, {option: 0, optionText: response})\n      //   this.gotoNextQuestion(this.state.question, this.state.parentId);\n      // } else {\n      //   toast.error(\"Invalid date\")\n      // }\n      if (!response) {\n        toast.error(\"Invalid date\")\n      } else {\n        let dateArray = String(response).split(\"/\")\n        let dateString = dateArray[2] + \"-\" + dateArray[0] + \"-\" + dateArray[1]\n        this.submitQuestionAnswer(question.id, [{option: 0, optionText: dateString}]);\n        this.addAnswerToState(dateString)\n        this.gotoNextQuestion(this.state.question, this.state.parentId);\n      }\n    } else {\n      this.submitQuestionAnswer(question.id, [{option: 0, optionText: response}]);\n      this.addAnswerToState(response)\n      this.gotoNextQuestion(this.state.question, this.state.parentId);\n    }\n  }\n\n  render() {\n    let toastMessageToDisplay = \"\"\n\n    // Setting Meta info to DOM\n    if (this.props.stateSeo) {\n      setMetaInfoToDom(this.props.stateSeo['registry-quiz-ma'], \"registry-quiz\")\n    }\n\n    //Redirecting user to onboarding if user is not Login\n    if (!this.props.stateRegistryInfo.id && this.props.stateRegistryInfo.notFound ||  (this.props.stateRegistryInfo.id && !this.props.stateRegistryInfo.isOnboardingCompleted)) {\n      return <Redirect to={routes.ONBOARDING.HOME}/>\n    }\n\n    if (!this.state.question.id && this.props.statePersonaliseQuestions.length > 0) {\n      let prevQuestionID = []\n      let currentQuestion = null\n      // For checking existing answer\n      for (let question of this.props.statePersonaliseQuestions) {\n        if (question.answers.length > 0) {\n          prevQuestionID.push(question.id)\n        } else {\n          currentQuestion = question\n          break\n        }\n      }\n      if (!currentQuestion) {\n        prevQuestionID = []\n        currentQuestion = null\n        for (let question of this.props.statePersonaliseQuestions) {\n          if (!question.isPersonalize) {\n            prevQuestionID.push(question.id)\n          } else {\n            currentQuestion = question\n            break\n          }\n        }\n      }\n      this.setState({\n        prevQuestionId: prevQuestionID,\n        activeQuestionId: currentQuestion.id,\n        question: currentQuestion\n      })\n\n    }\n\n    if (this.state.toastMessage && !this.isActiveToast) {\n      toastMessageToDisplay = this.state.toastMessage\n      // toast.dismiss()\n      // toast.info(<h4 className=\"font-medium text-center\" dangerouslySetInnerHTML={{__html: this.state.toastMessage}}/>)\n      this.isActiveToast = true\n    } else {\n      // toast.dismiss()\n    }\n\n    // Setting all the options for the questions\n    let options = []\n    let staticQuestionTitle = \"\";\n\n    if (this.state.question.answerInputType === this.RADIO) {\n      const selectedOptionID = this.state.question.answers?.length > 0 ? this.state.question.answers[0].questionOption.id : null\n      if (this.state.question.options.length === 2 && this.state.question.options[0].helpText) {\n        let questionOptions = this.state.question.options;\n        options.push(\n          <div className=\"row\">\n            <div className=\"col-12 col-md-6 pb-2\">\n              <div className=\"d-flex\">\n                <div className=\"text-center ml-auto mr-auto mr-md-0 position-relative\">\n                  <Option\n                    className={[\"mb-2\", selectedOptionID === questionOptions[0].id ? \"onboarding-selected\" : \"\"].join(\" \")}\n                    onClick={() => this.answerRadioQuestion(this.state.question.id, questionOptions[0])}>\n                    <h4 className=\"d-inline\">{questionOptions[0].value}</h4></Option>\n                  {questionOptions[0].helpText ?\n                    <span\n                      className=\"text-sm ml-1 onboading-text-color onboarding-font-3 d-block w-75 mx-auto\">{questionOptions[0].helpText}</span> : null}\n                </div>\n              </div>\n            </div>\n            <div\n              className=\"col-12 col-md-6 position-relative pt-md-0 pt-2\">\n              <div className=\"onboarding-option-half-border\"/>\n              <div className=\"d-flex\">\n                <div className=\"text-center mr-auto ml-auto ml-md-0 position-relative\">\n                  <Option\n                    className={[\"mb-2\", selectedOptionID === questionOptions[1].id ? \"onboarding-selected\" : \"\"].join(\" \")}\n                    onClick={() => this.answerRadioQuestion(this.state.question.id, questionOptions[1])}>\n                    <h4 className=\"d-inline\">{questionOptions[1].value}</h4></Option>\n                  {questionOptions[1].helpText ?\n                    <span\n                      className=\"text-sm ml-1 onboading-text-color onboarding-font-3 d-block w-75 mx-auto\">{questionOptions[1].helpText}</span> : null}\n                </div>\n              </div>\n            </div>\n          </div>\n        )\n      } else {\n        options = this.state.question.options.map(option => (\n          <Option className={[\"mb-2 mx-2\", selectedOptionID === option.id ? \"onboarding-selected\" : \"\"].join(\" \")}\n                  onClick={() => this.answerRadioQuestion(this.state.question.id, option)}>\n            <h4 className=\"d-inline\">{option.value}</h4>{option.helpText ?\n            <div className=\"text-sm onboarding-option-help-text\">{option.helpText}</div> : null}</Option>\n        ))\n      }\n    } else if (this.state.question.answerInputType === this.CHECKBOX) {\n      // TODO: If it is selected\n      const selectedOptionID = []\n      if (this.state.question.answers?.length > 0) {\n        for (let ans of this.state.question.answers) {\n          if (!selectedOptionID.includes(ans.questionOption.id)) {\n            selectedOptionID.push(ans.questionOption.id)\n          }\n        }\n        const selectOptions = []\n        for (let selectedOption of this.state.question.options) {\n          if (selectedOptionID.includes(selectedOption.id)) {\n            selectOptions.push(selectedOption)\n          }\n        }\n        this.selectedColorSchemes(selectOptions);\n      }\n      options = this.state.question.options.map(option => {\n        let checkBoxRef = createRef();\n        return (\n          <div\n            className={[\"personalise-checkbox  mx-2 mb-3 py-3 px-3\", selectedOptionID.includes(option.id) ? \"personalise-checkbox-selected\" : \"\"].join(\" \")}\n            ref={checkBoxRef}>\n            <div className=\"d-flex\">\n              <label className=\"checkbox d-flex align-items-center pb-0 mb-0\">\n              <span className=\"checkbox__input mr-4\">\n                <input\n                  type=\"checkbox\"\n                  name={option.id}\n                  value={option.id}\n                  onChange={(e) => this.selectCheckboxAnswer(e, checkBoxRef, option)}\n                  defaultChecked={selectedOptionID.includes(option.id)}\n                />\n                <span className=\"checkbox__control d-flex justify-content-center align-items-center\">\n                  <i className=\"icon-check\"></i>\n                </span>\n              </span>\n                <span\n                  className=\"radio__label d-flex align-items-center\">{option.meta && JSON.parse(option.meta).colors ?\n                  JSON.parse(option.meta).colors.map(color => <span\n                    className=\"d-inline-block personalise-checkbox-color mr-1\"\n                    style={{height: \"15px\", width: \"15px\", backgroundColor: color}}/>)\n                  : null}<span\n                  className=\"d-inline-block ml-2 onboading-text-color onboarding-font-1 font-medium personalise-checkbox-text\">{option.value}</span></span>\n              </label>\n            </div>\n          </div>\n        )\n      })\n      options.push(\n        <div className=\"text-center\">\n          <Button\n            variant=\"primary\"\n            className=\"px-7 mt-3 font-medium onboarding-next-button\"\n            onClick={() => this.gotoNextQuestion(this.state.question, this.state.parentId)}\n          >Continue</Button>\n        </div>\n      );\n    } else if (this.state.question.answerInputType === this.DATE) {\n      let inputRef = React.createRef();\n      const date = this.state.question.answers?.length > 0 ? this.state.question.answers[0].optionText : null\n      let existingDate =  date ? new Date(date) : null;\n\n      options.push(\n        <div className=\"d-flex justify-content-center align-items-center flex-column flex-md-row w-50 mx-auto\">\n          <DatePicker\n            selected={this.state.dateInputValue ? this.state.dateInputValue : existingDate ? existingDate : null}\n            onChange={(date) => this.dateInputChange(date, inputRef)}\n            minDate={new Date()}\n\n            dateFormat=\"MM/dd/yyyy\"\n            customInput={<CustomDateInput ref1={inputRef}/>}\n          />\n          <Button\n            variant=\"primary\"\n            disabled={this.state.nextBtnState !== undefined ? this.state.nextBtnState : true}\n            onClick={() => this.answerDataQuestion({...this.state.question}, inputRef.current.value, true)}\n            className=\"ml-md-3  px-7 font-medium mt-4 mt-md-0 onboarding-next-button\"\n          >Next</Button>\n        </div>\n      )\n    }\n\n    document.body.style.overflow = \"hidden\";\n\n    if (this.state.question && !this.ANIMATED) {\n      let el1_toast = document.querySelector(\"#onboarding-animate-1\")\n      let el2_question = document.querySelector(\"#onboarding-animate-2\")\n      let el3_options = document.querySelector(\"#onboarding-animate-3\")\n\n      if (el1_toast && el2_question && el3_options) {\n        el1_toast.classList.remove(\"onboarding-animate-toast\");\n        el2_question.classList.remove(\"onboarding-animate-question\");\n        el3_options.classList.remove(\"onboarding-animate-options\");\n\n        el1_toast.classList.add(\"onboarding-animate-toast\");\n        el2_question.classList.add(\"onboarding-animate-question\");\n        el3_options.classList.add(\"onboarding-animate-options\");\n\n        el1_toast.style.opacity = 0;\n        el2_question.style.opacity = 0;\n        el3_options.style.opacity = 0;\n\n        this.ANIMATED = true\n      }\n    }\n\n    return (\n      <div>\n        <div className=\"personalise\">\n\n          {/* Personalise Body */}\n          <div className=\"baby-registry-onboarding\">\n            <div className=\"onboarding-background-color\">\n              {/* Personalise Header */}\n              <PersonaliseHeader/>\n\n              <div className=\"container pb-25 pt-10 pt-lg-10\">\n\n                {/* Toast */}\n                <div className=\"row justify-content-center mb-3\">\n                  <div className=\"col-12 col-md-6 text-center\">\n                    {/* Toast messages */}\n                    <span\n                      className=\"onboading-text-color onboarding-toast onboarding-font-1 onboarding-animate-toast\"\n                      dangerouslySetInnerHTML={{__html: this.state.toastMessage ? this.state.toastMessage : null}}\n                      id=\"onboarding-animate-1\"\n                      onAnimationEnd={(ev) => {\n                        ev.target.style.opacity = 1;\n                        ev.target.classList.remove('onboarding-animate-toast')\n                      }}\n                    />\n                  </div>\n                </div>\n                <div className=\"row justify-content-center mb-3\">\n                  <div className=\"col-12 col-md-8 text-center\">\n                    <div\n                      className=\"onboading-question onboarding-animate-question\"\n                      id=\"onboarding-animate-2\"\n                      onAnimationEnd={(ev) => {\n                        ev.target.style.opacity = 1;\n                        ev.target.classList.remove('onboarding-animate-question')\n                      }}\n                      style={{animationDelay: this.state.toastMessage.length > 0 ? ONBOARDING_ANIMATION_DELAY.QUESTION_WITH_TOAST : ONBOARDING_ANIMATION_DELAY.QUESTION_WITHOUT_TOAST}}\n                    >\n                      <span className=\"font-body onboading-question-title\">{this.state.question.title}</span>\n                      {this.state.question.helpText ?\n                        <span\n                          className=\"onboarding-font-3 my-3 d-block\">{this.state.question.helpText}</span>\n                        : null}\n                    </div>\n                  </div>\n                </div>\n                <div className=\"row justify-content-center mt-6 pb-16\">\n                  <div\n                    className=\"col-12 onboarding-animate-options text-center onboarding-options-section\"\n                    onAnimationEnd={(ev) => {\n                      ev.target.style.opacity = 1;\n                      ev.target.classList.remove('onboarding-animate-options')\n                    }}\n                    style={{animationDelay: this.state.toastMessage.length > 0 ? ONBOARDING_ANIMATION_DELAY.OPTION_WITH_TOAST : ONBOARDING_ANIMATION_DELAY.OPTION_WITHOUT_TOAST}}\n                    id=\"onboarding-animate-3\"\n                  >\n                    <div className=\"text-left text-md-center\">\n                      {options.map(option => option)}\n                    </div>\n                    <SkipQuestionLink className=\"d-block d-lg-none mt-7\" onClick={() => {\n                      this.gotoNextQuestion(this.state.question, this.state.parentId)\n                    }}/>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Personalise Footer */}\n            <PersonaliseFooter\n              percentage={this.calulatePercentage(this.props.statePersonaliseAnswers.length, this.props.statePersonaliseQuestions.length)}\n              prevQuestion={() => {\n                this.gotoPrevQuestion(this.state.prevQuestionId[this.state.prevQuestionId.length - 1])\n              }}\n              nextQuestion={() => {\n                this.gotoNextQuestion(this.state.question, this.state.parentId)\n              }}\n            >\n              <SkipQuestionLink className=\"d-none d-lg-block footer-skip-question-link py-3 text-center\"\n                                onClick={() => {\n                                  this.gotoNextQuestion(this.state.question, this.state.parentId)\n                                }}/>\n            </PersonaliseFooter>\n          </div>\n        </div>\n\n        <ToastContainer\n          position=\"top-center\"\n          className=\"personalise-toast-container\"\n          toastClassName=\"personalise-toast px-3 py-1\"\n          autoClose={2000}\n          hideProgressBar={true}\n          newestOnTop={true}\n          draggable={false}\n          closeOnClick={false}\n          closeButton={null}\n        />\n      </div>\n    );\n  }\n};\n\nconst mapStateToProps = state => {\n  return {\n    stateRegistryInfo: state.registry.info,\n    stateLoggedIn: state.registry.loggedIn,\n    stateCheckList: state.personaliseCheckList.editedPersonaliseCheckList,\n    statePersonaliseQuestions: state.personaliseCheckList.questions,\n    statePersonaliseAnswers: state.personaliseCheckList.answers,\n    stateSeo: state.registry.seo\n  }\n}\n\n\nexport default connect(\n  mapStateToProps\n)(PersonaliseChecklist);","import React, { useState } from \"react\";\nimport { GET_CATEGORIES } from \"../../../../api/queries\";\nimport { graphQL } from \"../../../../api/axios\";\nimport { setPersonaliseCheckListItems } from \"../../PersonaliseCheckListActions\";\nimport { connect } from \"react-redux\";\nimport './EditChecklist.scss';\nimport Counter from \"../../../commons/components/counter/Counter\";\nimport {\n  incrementCheckListQuantity,\n  setIsActiveCheckList,\n  decrementCheckListQuantity\n} from \"../../PersonaliseCheckListActions\";\nimport Button from \"../../../commons/components/button-component/ButtonComponent\";\nimport routes from \"utils/routes\";\nimport { SAVE_UPDATED_CHECKLIST } from \"api/mutations\";\nimport { toast } from \"react-toastify\";\nimport Toast from \"modules/commons/components/toast/Toast\";\nimport { getAllCategories, getTodoList, updateRegistryDetail } from 'utils/commonFunction';\nimport Modal from \"../../../commons/components/modal-component/ModalComponent\";\nimport { setLoader } from \"modules/registry/RegistryActions\";\nimport {Redirect} from 'react-router-dom';\n\n\nclass PersonaliseChecklist extends React.Component {\n  state = {\n    showOverrideModal: false,\n    showAlertQuestion: false,\n  };\n\n  isCheckListEdited = false;\n  headerHeightFromTop = null;\n  hasCategoryApiCalled = false;\n\n  componentDidMount() {\n    this.headerHeightFromTop = null\n    this.isCheckListEdited = false\n    this.hasCategoryApiCalled = false;\n    window.addEventListener('scroll', this.handleScroll);\n    if (this.props.stateRegistryInfo.id) {\n      this.hasCategoryApiCalled = true;\n      this.getAllCategories(this.props.stateRegistryInfo.id, this.props.dispatch);\n    }\n  }\n\n  getAllCategories = (registryId, dispatch) => {\n    let data = {\n      query: GET_CATEGORIES,\n      variables: {\n        registryId: parseInt(registryId)\n      },\n    }\n    this.props.dispatch(setLoader(true))\n    graphQL(data).then(res => {\n      if (res.data.errors || res.data.error) {\n        // TODO: Add toast\n        console.log('Something went wrong-->', res.data.errors)\n        return;\n      } else {\n        let resData = getAllCategories(res.data.data.registryCategories, true)\n        let finalCheckList = []\n        // For Parent categories\n        for (let category of resData) {\n          let finalSubCategory = []\n\n          if (category.subCategories.length) {\n            // For Sub-Categories\n            for (let subCategory of category.subCategories) {\n              let tempSubCategory = []\n              if (subCategory.subProductTypes.length) {\n\n                // For subProductType\n                for (let subProductType of subCategory.subProductTypes) {\n                  subProductType.categoryName = subCategory.categoryName + ' (' + subProductType.categoryName + ')'\n                  if (subProductType.isExcluded) {\n                    subProductType.totalItemsCount = 1\n                    subProductType['isAdded'] = false\n                  } else {\n                    subProductType['isAdded'] = true\n                  }\n                  tempSubCategory.push(subProductType)\n                }\n              }\n              else {\n                if (subCategory.isExcluded) {\n                  subCategory.totalItemsCount = 1\n                  subCategory['isAdded'] = false\n                } else {\n                  subCategory['isAdded'] = true\n                }\n                tempSubCategory.push(subCategory)\n              }\n              finalSubCategory.push(...tempSubCategory)\n            }\n            let tempCategory = { ...category }\n            tempCategory.subCategories = finalSubCategory\n            finalCheckList.push(tempCategory)\n          }\n\n        }\n        this.props.dispatch(setLoader(false))\n        dispatch(setPersonaliseCheckListItems(finalCheckList))\n      }\n    }).catch(err => {\n      this.props.dispatch(setLoader(false))\n      console.error('Something went wrong-->', err);\n    })\n  }\n\n  closeAndSavePersonaliseCheckList = (event) => {\n    event.preventDefault();\n    // Checking is checklist is editied\n    if (this.isCheckListEdited) {\n      let finalCheckListData = []\n      let tempStateCheckList = [...this.props.stateCheckList]\n      for (let category of tempStateCheckList) {\n        for (let subCategory of category.subCategories) {\n          // let tempData = null\n          let tempData = {\n            registryCategoryId: subCategory.id,\n            itemsCount: subCategory.totalItemsCount,\n            isExcluded: !subCategory.isAdded\n          }\n          finalCheckListData.push(tempData)\n        }\n      }\n\n      let registryId = this.props.stateRegistryInfo.id\n      let data = {\n        query: SAVE_UPDATED_CHECKLIST,\n        variables: {\n          registryId: registryId,\n          itemCountData: finalCheckListData\n        },\n      }\n\n      graphQL(data).then(res => {\n        if (res.data) {\n          toast.dismiss()\n          toast.success((\n            <p>Personalise Checklist Updated Successfully</p>\n          ))\n          // For updaing the Quiz Mode\n          if (this.props.stateRegistryInfo.quizMode) {\n            updateRegistryDetail(this.props.dispatch)\n          }\n          getTodoList(registryId, this.props.dispatch)\n\n          this.props.history.push({\n            pathname: routes.MY_REGISTRY.HOME,\n            state: {\n              getRecommendation: true,\n            }\n          })\n        }\n\n      }).catch(err => {\n        console.error(err.message)\n        toast.dismiss()\n        toast.error((\n          <p>Some error occurred.</p>\n        ))\n      })\n    }\n    else {\n      this.props.history.push({\n        pathname: routes.MY_REGISTRY.HOME,\n        state: {\n          getRecommendation: true,\n        }\n      })\n    }\n  }\n\n  gotoPersonaliseQuestions = (event) => {\n    event.preventDefault();\n    this.props.history.push({\n      pathname: routes.PERSONALIZE.HOME,\n      state: { openEditChecklist: true }\n    })\n  }\n\n  removeConfirmFooter = (\n    <>\n      <Button className='py-1 px-3 font-medium' variant='secondary' onClick={() => {\n        this.props.history.push(routes.REGISTRY.HOME)\n        this.setState({ showOverrideModal: false })\n      }}>Do Not Override</Button>\n\n      <Button className='py-1 px-3 font-medium' variant='primary' onClick={(e) => {\n        this.closeAndSavePersonaliseCheckList(e)\n        this.setState({ showOverrideModal: false });\n      }}>Yes, Please Override</Button>\n    </>\n  )\n\n  quizModalFooter = (\n    <>\n      <Button className='py-1 px-3 font-medium' variant='secondary' onClick={() => {\n        this.setState({ showAlertQuestion: false })\n      }}>Close</Button>\n      <Button className='py-1 px-3 font-medium' variant='primary' onClick={(e) => {\n        this.gotoPersonaliseQuestions(e)\n        this.setState({ showAlertQuestion: false });\n      }}>Okay, got it</Button>\n    </>\n  )\n\n  handleScroll = (event) => {\n    let el = document.getElementById('personalise-checklist-header');\n    if (el) {\n      // Setting height from top to checklist\n      if (el.getBoundingClientRect().top === 0 && !this.headerHeightFromTop) {\n        this.headerHeightFromTop = window.scrollY\n      }\n      // Setting position of checklist to fixed\n      if (el.getBoundingClientRect().top <= 0) {\n        el.style.position = 'fixed';\n        el.style.top = 0;\n        el.style.width = '100%';\n      }\n      // Setting position of checklist to static\n      if (this.headerHeightFromTop >= window.scrollY) {\n        el.style.position = 'static';\n        el.style.top = 'auto';\n      }\n    }\n  }\n\n  handleGotoTakeQuiz = (event) => {\n    if (this.props.stateRegistryInfo.quizMode) {\n      event.preventDefault();\n      this.props.history.push({\n        pathname: routes.PERSONALIZE.HOME,\n        state: { openEditChecklist: true }\n      })\n    }\n    else {\n      this.setState({ showAlertQuestion: true })\n    }\n  }\n\n  handleSaveAndCloseEditChecklist = (ev) => {\n    if (this.isCheckListEdited && !this.props.stateRegistryInfo.quizMode) {\n      this.closeAndSavePersonaliseCheckList(ev)\n    }\n    else if (this.isCheckListEdited) {\n      this.setState({ showOverrideModal: true })\n    }\n    else {\n      this.props.history.push({\n        pathname: routes.MY_REGISTRY.HOME,\n        state: {\n          getRecommendation: true,\n        }\n      })\n    }\n  }\n\n  render() {\n\n    if (!this.hasCategoryApiCalled && this.props.stateRegistryInfo.id && this.props.stateCheckList.length) {\n      this.hasCategoryApiCalled = true\n      this.getAllCategories(this.props.stateRegistryInfo.id, this.props.dispatch);\n    }\n\n    //Redirecting user to onboarding if user is not Login\n    if (!this.props.stateRegistryInfo.id && this.props.stateRegistryInfo.notFound || (this.props.stateRegistryInfo.id && !this.props.stateRegistryInfo.isOnboardingCompleted)) {\n      return <Redirect to={routes.ONBOARDING.HOME}/>\n    }\n\n    return (\n      <>\n        <div className=\"personalise-checklist\">\n          {/* Header */}\n          <div className=\"py-2 personalise-checklist-header font-body font-medium\" id=\"personalise-checklist-header\">\n            <div className=\"container\">\n              <div className=\"row align-items-center\">\n                <div className=\"col-12 col-md-6 \">Edit Checklist</div>\n                <div className=\"col-12 col-md-6 d-flex align-items-center justify-content-start justify-content-md-end\">\n                  <a className=\"mr-6 personalise-header-link\" tabindex=\"0\" onClick={(event) => this.handleGotoTakeQuiz(event)}>Take our quiz</a>\n                  <div>\n                    <Button\n                      variant=\"primary\"\n                      className=\"px-3 py-1  font-medium done-btn\"\n                      onClick={(ev) => this.handleSaveAndCloseEditChecklist(ev)}\n                    >Save & Close</Button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* All categries selection body */}\n          {this.props.stateCheckList.map((parentCategories, i) => (\n            <div className=\"mt-5 mt-md-6 container\" key={parentCategories.categoryName + \"-\" + i}>\n              <div className=\"checklist-title pb-4 body-text\">\n                {parentCategories.categoryName}\n              </div>\n              <div className=\"row mt-4\">\n                {parentCategories.subCategories.map((subCategories, i) => (\n                  <div className=\"col-12 col-md-6 col-lg-3 mb-5\" key={subCategories.id}>\n                    <div className={[\"checklist-card pl-2 pr-3 py-3\",\n                      !subCategories.isAdded ? \"add-checklist-bg\" : \"\"].join(' ')\n                    }>\n                      <div className=\"d-flex mb-4 checklist-action-btn\">\n                        <div className=\"text-body font-medium align-self-center\">{subCategories.categoryName}</div>\n                        {subCategories.addedItemsCount <= 0 ?\n                          <div className=\"ml-auto\">\n                            <button className={[\"checklist-add-btn\",\n                              !subCategories.isAdded ? \"checklist-icon-plus\" : \"icon-close\"].join(' ')}\n                              onClick={() => { this.isCheckListEdited = true; this.props.dispatch(setIsActiveCheckList(subCategories.id, !subCategories.isAdded)) }} />\n                          </div>\n                          : null\n                        }\n                      </div>\n                      {Number(subCategories.categoryType.id) !== 2 ?\n                        <div className=\"d-flex align-items-center\">\n                          <Counter\n                            counter={subCategories.totalItemsCount}\n                            incrementHandler={() => { this.isCheckListEdited = true; this.props.dispatch(incrementCheckListQuantity(subCategories.id, 1)) }}\n                            decrementHandler={() => { this.isCheckListEdited = true; this.props.dispatch(decrementCheckListQuantity(subCategories.id, 1)) }}\n                          />\n                          {subCategories.addedItemsCount > 0 ?\n                            <span className=\"ml-auto text-sm item-count-label\">{subCategories.addedItemsCount} added</span>\n                            : null\n                          }\n                        </div>\n                        :\n                        subCategories.addedItemsCount > 0 ?\n                          <div className=\"d-flex align-items-center\"><span className=\"ml-auto text-sm item-count-label\">{subCategories.addedItemsCount} added</span></div>\n                          : null\n                      }\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          ))}\n          <Toast />\n        </div>\n        {this.state.showOverrideModal ?\n          <Modal\n            show={this.state.showOverrideModal}\n            size=\"lg\"\n            footer={this.removeConfirmFooter}\n          >\n            <h2 className=\"mb-1\">Editing your checklist will override the quiz answers.</h2>\n            <label className=\"text-sm\">If you do not want to change, click on Do not override, which will take you back to your registry and the changes you made to the checklist will be discarded.</label>\n          </Modal> : null\n        }\n        {this.state.showAlertQuestion ?\n          <Modal\n            show={this.state.showAlertQuestion}\n            size=\"lg\"\n            footer={this.quizModalFooter}\n          >\n            <h2 className=\"mb-1\">Changing your quiz answers will override the previous edits to your checklist.</h2>\n            {/* <label className=\"text-sm\">If you do not want to change, click on Do not override, which will take you back to your registry and the changes you made to the quiz will be discarded.</label> */}\n          </Modal> : null\n        }\n      </>\n    );\n  }\n\n};\n\nconst mapStateToProps = state => {\n  return {\n    stateCheckList: state.personaliseCheckList.editedPersonaliseCheckList,\n    stateRegistryInfo: state.registry.info,\n    stateLoader: state.registry.loader,\n  }\n}\n\n\nexport default connect(\n  mapStateToProps\n)(PersonaliseChecklist);","import React, { useState } from \"react\";\nimport \"./FindRegistry.scss\";\nimport { FIND_REGISTRY } from \"api/queries\";\nimport { graphQL } from 'api/axios';\nimport moment from 'moment';\nimport { IMPORT_REGISTRY_EMAIL } from \"utils/constants\";\n\nconst FindRegistry = () => {\n  const [searchName, setSearchName] = useState('')\n  const [allRegistry, setAllRegistry] = useState([])\n  const [hasRegistry, setHasRegistry] = useState(true)\n  const [searchRegistry, setSearchRegistry] = useState(false)\n\n  const findRegistry = (registryName) => {\n    let reqData = {\n      query: FIND_REGISTRY,\n      variables: {\n        registryName: registryName\n      }\n    }\n    graphQL(reqData).then(res => {\n      if (res.data.data.findRegistry) {\n        let registries = [...res.data.data.findRegistry.edges]\n        setAllRegistry(registries)\n        if (registries.length > 0) {\n          setHasRegistry(true)\n        } else {\n          setHasRegistry(false)\n        }\n      }\n    }).catch(err => {\n      setHasRegistry(false)\n    })\n  }\n\n  const handleClearSearch = () => {\n    setSearchName('')\n    setAllRegistry([])\n  }\n\n  const textChangeHandler = async (ev) => {\n    await setSearchName(ev.target.value)\n    setSearchRegistry(true)\n  }\n\n  const findRegistryHandler = async () => {\n    await findRegistry(searchName)\n    setSearchRegistry(false)\n  }\n\n  const searchOnEnter = (ev) => {\n    ev.persist();\n    ev.preventDefault();\n    if (ev.keyCode === 13) { //Enter keycode is 13\n      findRegistryHandler()\n    }\n  }\n\n  const handleRegistryUrlSlug = (urlSlug) => {\n    window.open(urlSlug)\n  }\n\n  return (\n    <div className=\"mt-10 find-registry\">\n      <div className=\"row\">\n        <div className=\"col-4 offset-4\">\n          <div className=\"find-registry-header text-center\">Find a Baby Registry</div>\n          <div className=\"mt-6 find-registry-search-container mx-auto\">\n            <input\n              type=\"text\"\n              placeholder=\"Search registry...\"\n              value={searchName}\n              onKeyUp={(ev) => searchOnEnter(ev)}\n              onChange={(ev) => textChangeHandler(ev)}\n              className=\"find-registry-search-input pl-6 text-body py-1 w-100 mw-100 pr-11 m-a-unset-line-height\"\n            />\n            <i className=\"icon-search find-registry-search-icon\" />\n            {searchName.length > 0 ?\n              searchRegistry ?\n                <a className=\"find-registry-search-input-link text-body\" href=\"#\"\n                  onClick={() => {\n                    findRegistryHandler()\n                  }}>Search</a>\n                :\n                <a className=\"find-registry-search-input-link text-body\" href=\"#\"\n                  onClick={() => {\n                    handleClearSearch()\n                  }}>Clear</a>\n              : null}\n          </div>\n\n\n        </div>\n      </div>\n      <div className={[\"row\", allRegistry.length ? \"mb-4 mt-10\" : \"\"].join(\" \")}>\n        <div className=\"col-10 offset-1\">\n          {[...allRegistry].map(data => (\n            <div className=\"p-4 find-registry-card mx-5\" key={data.node.urlSlug}>\n              <div className=\"d-flex align-items-center\">\n                <div className=\"d-flex align-items-baseline\">\n                  <h3 className=\"find-registry-displayName\">{data.node.displayName}</h3>\n                  <p className=\"ml-2 find-registry-content\">{data.node.dueDate !== null ? moment(data.node.dueDate).format('MMM DD, YYYY') : \"\"}</p>\n                </div>\n                <div className=\"ml-auto\">\n                  <button className=\"find-registry-action-btn p-2\"\n                    onClick={() => handleRegistryUrlSlug(data.node.urlSlug)} />\n                </div>\n              </div>\n              {data.node.user.defaultAddress ?\n                <p\n                  className=\"mt-1 find-registry-content\">{data.node.user.defaultAddress?.city}, {data.node.user.defaultAddress?.province}</p>\n                : null}\n            </div>\n          ))}\n\n        </div>\n      </div>\n      <div className=\"row\">\n        <div className=\"col\">\n          <div className=\"mt-6 text-center\">\n            {searchName.length > 0 ?\n              hasRegistry ?\n                // If has registries in list\n                <div className=\"find-registry-content\">\n                  <h4>Didnt find the registry that you are looking for?</h4>\n                  <h4 className=\"mb-2\">Check with the family or shower host for <a\n                    href={\"mailto:\" + IMPORT_REGISTRY_EMAIL} className=\"find-registry-email-link\" tabIndex\n                    target='_blank'>direct link</a> or</h4>\n                  <a\n                    className=\"px-3 py-1 find-registry-help-disable-btn text-body font-medium d-inline-block\"\n                    href={\"mailto:\" + IMPORT_REGISTRY_EMAIL}\n                    target='_blank'\n                    tabindex=\"0\"\n                  >Email Us For Help</a>\n                </div>\n                :\n                // If has no registries in list\n                <div className=\"find-registry-content\">\n                  <h4>We couldnt find any registries that match your search...</h4>\n                  <h4 className=\"mb-2\">Check with the family or shower host for <a\n                    href={\"mailto:\" + IMPORT_REGISTRY_EMAIL} className=\"find-registry-email-link\" tabIndex\n                    target='_blank'>direct link</a> or</h4>\n                  <a\n                    className=\"px-3 py-1 find-registry-help-primary-btn text-body font-medium d-inline-block\"\n                    href={\"mailto:\" + IMPORT_REGISTRY_EMAIL}\n                    target='_blank'\n                    tabindex=\"0\"\n                  >Email Us For Help</a>\n                </div>\n              :\n              // Search is not been started yet\n              <div className=\"font-medium find-registry-content\">\n                <p>Looking for Monica+Andy baby registry?</p>\n                <p>Begin typing to search</p>\n              </div>\n            }\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default FindRegistry;","import React from \"react\";\nimport \"./BackToTop.scss\";\n\nconst BackToTop = () => {\n\n  const gotoToTop = () => {\n    window.scrollTo(0,0);\n  }\n\n  return (\n    <div className=\"ma-back-to-top-btn p-2\" id=\"ma-back-to-top\" onClick={gotoToTop}><i className=\"ma-back-to-top-icon icon-chevron-up\"/></div>\n  )\n}\n\nexport default BackToTop;","import React from \"react\";\nimport \"./Unsubscribe.scss\";\nimport {connect} from \"react-redux\";\nimport Button from \"../commons/components/button-component/ButtonComponent\";\nimport {Redirect} from \"react-router-dom\";\nimport {parseUrlToken} from \"../../utils/commonFunction\";\nimport {unsubscribe} from \"../../api/axios\";\nimport {setLoader} from \"../registry/RegistryActions\";\nimport {toast} from 'react-toastify';\nimport Toast from \"../commons/components/toast/Toast\";\n\nclass Unsubscribe extends React.Component {\n\n  state = {\n    token: null\n  }\n\n  componentDidMount() {\n    let params = new URLSearchParams(this.props.location.search)\n    if (params.has(\"t\")) {\n      let token = parseUrlToken(params.get(\"t\"))\n      if (token) {\n        this.setState({\n          token: token\n        })\n      }\n    }\n  }\n\n  unsubscribeClickHandler = () => {\n    let textAreaEl = document.getElementById(\"unsubscribeReason\");\n\n    if (textAreaEl) {\n      let reqData = {\n        token: this.state.token,\n        unsubscribed_reason: textAreaEl.value\n      }\n\n      this.props.dispatch(setLoader(true))\n      unsubscribe(reqData).then(res => {\n        if (res.data.message) {\n          toast.success(res.data.message)\n          textAreaEl.value = \"\";\n        }\n      }).catch(err => {\n        if (err.response?.data?.error){\n          toast.error(err.response.data.error)\n        }\n      }).finally((e) => {\n        this.props.dispatch(setLoader(false))\n      })\n    }\n  }\n\n  render() {\n    let params = new URLSearchParams(this.props.location.search)\n    if (!params.has(\"t\")) {\n      window.open(\"/\", \"_self\")\n      return null;\n    } else {\n      return (\n        <>\n          <div className=\"container\">\n            <div className=\"row justify-content-center\">\n              <div className=\"col-12 col-md-5\">\n                <div className=\"unsubscribe-main-content p-4 mt-5\">\n                  <div className=\"row\">\n                    <div className=\"col text-center\">\n                      <h1>Unsubscribe</h1>\n                    </div>\n                  </div>\n\n                  <div className=\"row mt-4\">\n                    <div className=\"col\">\n                      <p className=\"text-sm\">Please tell us why are you unsubscribing?</p>\n                      <textarea rows={3}\n                                id=\"unsubscribeReason\"\n                                className=\"w-100 p-1 mt-1 mb-0 text-body m-a-resize-textarea unsubscribe-input\"/>\n                    </div>\n                  </div>\n\n                  <div className=\"row mt-4\">\n                    <div className=\"col text-center\">\n                      <Button\n                        variant=\"primary\"\n                        className=\"px-3 py-1 font-medium text-body\"\n                        onClick={this.unsubscribeClickHandler}\n                      >Unsubscribe</Button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <Toast/>\n        </>\n      )\n    }\n\n  }\n}\n\nexport default connect()(Unsubscribe);","import React from \"react\";\nimport {Redirect, Route, Switch, withRouter} from \"react-router-dom\";\nimport route from \"utils/routes\";\nimport \"./ViewContainer.scss\";\nimport {connect} from \"react-redux\";\nimport RegistryHero from '../registry-hero/RegistryHero';\nimport Onboarding from \"../onboarding/Onboarding\";\nimport VerifyToken from '../Login/VerifyToken/VerifyToken'\nimport {\n  updateRegistryDetail,\n  getOnboardingQuestions,\n  createRegistry,\n  getPersonalizeQuestions,\n  getCategories,\n  getProducts, getSeo\n} from \"utils/commonFunction\";\nimport {Cookies} from \"react-cookie\";\nimport {verifyAccessToken} from \"../../api/axios\";\nimport {setLoggingStatus, updateRegistryInfo, setUserInfo} from \"../registry/RegistryActions\";\nimport PersonaliseChecklist from \"../personalise-checklist/PersonaliseChecklist\";\nimport EditChecklist from \"modules/personalise-checklist/components/edit-checklist/EditChecklist\";\nimport GuestView from \"../guest-view/GuestView\";\nimport FindRegistry from \"modules/find-registry/FindRegistry\";\nimport Loader from 'modules/commons/components/loader/Loader';\nimport BackToTop from \"./components/back-to-top/BackToTop\";\nimport Unsubscribe from \"../unsubscribe/Unsubscribe\";\n\nclass ViewsContainer extends React.Component {\n\n  state = {\n    displayContent: false,\n    foundRegistry: false\n  }\n  seoApiCalled = false\n\n  componentDidMount() {\n    if (this.props.location.pathname.search(route.UNSUBSCRIBE.HOME) < 0) {\n      const cookies = new Cookies();\n      const access_token = cookies.get(\"access_token\")\n      if (access_token) {\n        verifyAccessToken(access_token).then(res => {\n          if (res.data.data.customer) {\n            this.props.dispatch(setLoggingStatus(true))\n            this.props.dispatch(setUserInfo(res.data.data.customer))\n            if (res.data.data.registries.length > 0) {\n              this.setState({\n                foundRegistry: true\n              })\n              updateRegistryDetail(this.props.dispatch);\n\n              // Fetching seo for registry\n              getSeo(res.data.data.registries[res.data.data.registries.length - 1].url_slug, this.props.dispatch)\n\n              // TODO: Get products of active registry\n              getCategories(res.data.data.registries[res.data.data.registries.length - 1].id, this.props.dispatch);\n              // TODO: Get categories of active registry\n              getProducts(res.data.data.registries[res.data.data.registries.length - 1].id, this.props.dispatch);\n              getPersonalizeQuestions(res.data.data.registries[res.data.data.registries.length - 1].id, this.props.dispatch)\n            } else {\n              if (res.data.data.customer.is_curator_user) {\n                // Creating New Registry for curator\n                createRegistry(this.props.dispatch, res.data.data.customer.is_curator_user);\n              } else {\n                this.props.dispatch(updateRegistryInfo({notFound: true}))\n                getOnboardingQuestions(this.props.dispatch)\n                //  Creating New Registry\n                createRegistry(this.props.dispatch)\n              }\n            }\n          }\n        }).catch(err => {\n          console.error(err)\n          getOnboardingQuestions(this.props.dispatch)\n          this.props.dispatch(setLoggingStatus(false))\n          this.props.dispatch(updateRegistryInfo({notFound: true}))\n        }).finally(() => {\n          this.setState({\n            displayContent: true\n          })\n        })\n      } else {\n        getOnboardingQuestions(this.props.dispatch)\n        this.setState({\n          displayContent: true\n        })\n        this.props.dispatch(updateRegistryInfo({notFound: true}))\n      }\n    } else {\n      this.setState({\n        displayContent: true\n      })\n    }\n\n\n    //  Adding back to top event\n    window.onscroll = function () {\n      let thresholdToShowBtn = 100;\n      let buttonEl = document.getElementById(\"ma-back-to-top\")\n      if (buttonEl) {\n        if (document.body.scrollTop > thresholdToShowBtn || document.documentElement.scrollTop > thresholdToShowBtn) {\n          buttonEl.style.display = \"flex\";\n        } else {\n          buttonEl.style.display = \"none\";\n        }\n      }\n    };\n  }\n\n  render() {\n    // if (this.props.stateRouter.location.pathname.search(route.GUEST_VIEW.HOME) !== -1) {\n    //   console.log(route.GUEST_VIEW.HOME+\"/:registryName\")\n    //   return <Redirect to={this.props.stateRouter.location.pathname}/>\n    // }\n\n    // Redirecting user to onboarding is no registry found\n    // if (this.props.stateRouter.location.pathname.search(route.ONBOARDING.HOME) === -1 && !this.props.stateRegistryInfo.id && !this.state.foundRegistry && this.state.displayContent) {\n    //   console.log(this.props.stateRouter.location.pathname)\n    //   return <Redirect to={route.ONBOARDING.HOME}/>\n    // }\n\n    // Disable scroll when loader is active\n    document.body.style.overflow = this.props.stateLoader ? \"hidden\" : \"auto\";\n\n    return (\n      <>\n        <div className=\"pb-25 view-container-main-content\">\n          {this.state.displayContent ?\n            <Switch>\n              <Route exact path={route.PERSONALIZE.CHECKLIST} component={EditChecklist}/>\n              <Route exact path={route.PERSONALIZE.HOME} component={PersonaliseChecklist}/>\n              <Route exact path={route.FIND_REGISTRY.HOME} component={FindRegistry}/>\n              <Route exact path={route.ONBOARDING.HOME} component={Onboarding}/>\n              <Route exact path={route.MY_REGISTRY.HOME} component={RegistryHero}/>\n              <Route exact path={route.VIEW_REGISTRY.HOME} component={RegistryHero}/>\n              <Route exact path={route.TRACK_GIFTS.HOME} component={RegistryHero}/>\n              <Route exact path={route.UNSUBSCRIBE.HOME} component={Unsubscribe}/>\n              <Route exact path={route.GUEST_VIEW.HOME + \"/:registrySlug\"} component={GuestView}/>\n              <Route path={route.REGISTRY.HOME} component={RegistryHero}/>\n              <Route path={route.LOGIN.VERIFY_TOKEN} component={VerifyToken}/>\n              <Route render={() => <div>DEFAULT</div>}/>\n            </Switch>\n            : null}\n\n          {/* Loader */}\n          {this.props.stateLoader ? <Loader/> : null}\n        </div>\n        <BackToTop/>\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    stateRegistryInfo: state.registry.info,\n    stateOnboardingQuestions: state.onboarding.questions,\n    stateRouter: state.router,\n    statePersonaliseQuestions: state.personaliseCheckList.questions,\n    stateLoader: state.registry.loader,\n    stateSeo: state.registry.seo\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(withRouter(ViewsContainer));\n","import {ApolloClient, HttpLink, InMemoryCache} from '@apollo/client';\nimport {onError} from '@apollo/client/link/error';\nimport {ApolloLink} from '@apollo/client/link/core/ApolloLink';\n// import {API_URL} from '../utils/constants';\n\nconst cache = new InMemoryCache();\n\n\nconst errorLink = onError(({graphQLErrors, networkError}) => {\n  if (graphQLErrors)\n    graphQLErrors.map(({message, locations, path}) =>\n      console.log(\n        `[GraphQL error]: Message: ${message}, Location: ${locations}, Path: ${path}`,\n        // TODO: Add pop-up alert error message for GraphQL error\n      ),\n    );\n  if (networkError) {\n    console.log(`[Network error]: ${networkError}`);\n    // TODO: Add pop-up alert error message for network error\n  }\n});\n\n\nconst httpLink = new HttpLink({\n//  TODO: Add dynamic api url\n//  uri: API_URL,\n    uri: 'http://127.0.0.1:8000/graphql',\n});\n\nconst link = ApolloLink.from([errorLink, httpLink]);\n\nexport default new ApolloClient({\n  link,\n  cache,  \n  \n// TODO: Add store to header if any\n//   headers: {\n//     authorization: store.getState()?.auth?.token\n//       ? `Bearer ${store.getState()?.auth?.token}`\n//       : null,\n//     language: AppString.getLanguage() ?? 'en',\n//   },\n});","import React from \"react\";\nimport { Provider } from \"react-redux\";\nimport { ConnectedRouter } from \"connected-react-router\";\nimport { store, history } from \"./store/Store\";\nimport { I18nextProvider } from \"react-i18next\";\nimport i18n from \"./utils/i18n\";\nimport ViewsContainer from \"./modules/commons/ViewsContainer\";\nimport client from '../src/api';\n\nimport { ApolloProvider } from '@apollo/client';\n// Bootstrap\nimport \"./assets/scss/main.scss\";\n\n\nconst App = () => (\n  <Provider store={store}>\n    <I18nextProvider i18n={i18n}>\n      <ConnectedRouter history={history}>\n        <ApolloProvider client={client}>\n          <ViewsContainer />\n        </ApolloProvider>\n      </ConnectedRouter>\n    </I18nextProvider>\n  </Provider>\n);\n\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport registerServiceWorker from './registerServiceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\nregisterServiceWorker();\n"],"sourceRoot":""}